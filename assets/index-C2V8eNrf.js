function S2(e,t){for(var n=0;n<t.length;n++){const s=t[n];if(typeof s!="string"&&!Array.isArray(s)){for(const o in s)if(o!=="default"&&!(o in e)){const l=Object.getOwnPropertyDescriptor(s,o);l&&Object.defineProperty(e,o,l.get?l:{enumerable:!0,get:()=>s[o]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}})();function ll(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function hd(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var n=function s(){var o=!1;try{o=this instanceof s}catch{}return o?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(s){var o=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(n,s,o.get?o:{enumerable:!0,get:function(){return e[s]}})}),n}var I0={exports:{}},ju={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wx;function aN(){if(Wx)return ju;Wx=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(s,o,l){var u=null;if(l!==void 0&&(u=""+l),o.key!==void 0&&(u=""+o.key),"key"in o){l={};for(var f in o)f!=="key"&&(l[f]=o[f])}else l=o;return o=l.ref,{$$typeof:e,type:s,key:u,ref:o!==void 0?o:null,props:l}}return ju.Fragment=t,ju.jsx=n,ju.jsxs=n,ju}var Xx;function oN(){return Xx||(Xx=1,I0.exports=aN()),I0.exports}var y=oN();const E2="harim.theme",Qg="harim.settings.v1";function T2(){try{const e=localStorage.getItem(E2);if(e==="dark"||e==="light")return e;const t=localStorage.getItem(Qg);if(t){const s=JSON.parse(t)?.theme;if(s==="dark"||s==="light")return s}return null}catch{return null}}function eb(e){try{localStorage.setItem(E2,e);const t=localStorage.getItem(Qg),n=t?JSON.parse(t):{};localStorage.setItem(Qg,JSON.stringify({...n,theme:e}))}catch{}}function k2(e){const t=document.documentElement;t.classList.toggle("dark",e==="dark"),t.style.setProperty("color-scheme",e)}(function(){try{const e=T2()??(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");k2(e)}catch{}})();var z0={exports:{}},ot={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jx;function lN(){if(Jx)return ot;Jx=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),x=Symbol.iterator;function S(U){return U===null||typeof U!="object"?null:(U=x&&U[x]||U["@@iterator"],typeof U=="function"?U:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,A={};function M(U,$,F){this.props=U,this.context=$,this.refs=A,this.updater=F||T}M.prototype.isReactComponent={},M.prototype.setState=function(U,$){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,$,"setState")},M.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function R(){}R.prototype=M.prototype;function N(U,$,F){this.props=U,this.context=$,this.refs=A,this.updater=F||T}var D=N.prototype=new R;D.constructor=N,k(D,M.prototype),D.isPureReactComponent=!0;var C=Array.isArray;function G(){}var H={H:null,A:null,T:null,S:null},V=Object.prototype.hasOwnProperty;function W(U,$,F){var Z=F.ref;return{$$typeof:e,type:U,key:$,ref:Z!==void 0?Z:null,props:F}}function re(U,$){return W(U.type,$,U.props)}function ee(U){return typeof U=="object"&&U!==null&&U.$$typeof===e}function q(U){var $={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(F){return $[F]})}var te=/\/+/g;function oe(U,$){return typeof U=="object"&&U!==null&&U.key!=null?q(""+U.key):$.toString(36)}function Se(U){switch(U.status){case"fulfilled":return U.value;case"rejected":throw U.reason;default:switch(typeof U.status=="string"?U.then(G,G):(U.status="pending",U.then(function($){U.status==="pending"&&(U.status="fulfilled",U.value=$)},function($){U.status==="pending"&&(U.status="rejected",U.reason=$)})),U.status){case"fulfilled":return U.value;case"rejected":throw U.reason}}throw U}function X(U,$,F,Z,B){var Y=typeof U;(Y==="undefined"||Y==="boolean")&&(U=null);var ie=!1;if(U===null)ie=!0;else switch(Y){case"bigint":case"string":case"number":ie=!0;break;case"object":switch(U.$$typeof){case e:case t:ie=!0;break;case b:return ie=U._init,X(ie(U._payload),$,F,Z,B)}}if(ie)return B=B(U),ie=Z===""?"."+oe(U,0):Z,C(B)?(F="",ie!=null&&(F=ie.replace(te,"$&/")+"/"),X(B,$,F,"",function(xe){return xe})):B!=null&&(ee(B)&&(B=re(B,F+(B.key==null||U&&U.key===B.key?"":(""+B.key).replace(te,"$&/")+"/")+ie)),$.push(B)),1;ie=0;var fe=Z===""?".":Z+":";if(C(U))for(var ce=0;ce<U.length;ce++)Z=U[ce],Y=fe+oe(Z,ce),ie+=X(Z,$,F,Y,B);else if(ce=S(U),typeof ce=="function")for(U=ce.call(U),ce=0;!(Z=U.next()).done;)Z=Z.value,Y=fe+oe(Z,ce++),ie+=X(Z,$,F,Y,B);else if(Y==="object"){if(typeof U.then=="function")return X(Se(U),$,F,Z,B);throw $=String(U),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.")}return ie}function ae(U,$,F){if(U==null)return U;var Z=[],B=0;return X(U,Z,"","",function(Y){return $.call(F,Y,B++)}),Z}function J(U){if(U._status===-1){var $=U._result;$=$(),$.then(function(F){(U._status===0||U._status===-1)&&(U._status=1,U._result=F)},function(F){(U._status===0||U._status===-1)&&(U._status=2,U._result=F)}),U._status===-1&&(U._status=0,U._result=$)}if(U._status===1)return U._result.default;throw U._result}var ye=typeof reportError=="function"?reportError:function(U){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var $=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof U=="object"&&U!==null&&typeof U.message=="string"?String(U.message):String(U),error:U});if(!window.dispatchEvent($))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",U);return}console.error(U)},K={map:ae,forEach:function(U,$,F){ae(U,function(){$.apply(this,arguments)},F)},count:function(U){var $=0;return ae(U,function(){$++}),$},toArray:function(U){return ae(U,function($){return $})||[]},only:function(U){if(!ee(U))throw Error("React.Children.only expected to receive a single React element child.");return U}};return ot.Activity=_,ot.Children=K,ot.Component=M,ot.Fragment=n,ot.Profiler=o,ot.PureComponent=N,ot.StrictMode=s,ot.Suspense=m,ot.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=H,ot.__COMPILER_RUNTIME={__proto__:null,c:function(U){return H.H.useMemoCache(U)}},ot.cache=function(U){return function(){return U.apply(null,arguments)}},ot.cacheSignal=function(){return null},ot.cloneElement=function(U,$,F){if(U==null)throw Error("The argument must be a React element, but you passed "+U+".");var Z=k({},U.props),B=U.key;if($!=null)for(Y in $.key!==void 0&&(B=""+$.key),$)!V.call($,Y)||Y==="key"||Y==="__self"||Y==="__source"||Y==="ref"&&$.ref===void 0||(Z[Y]=$[Y]);var Y=arguments.length-2;if(Y===1)Z.children=F;else if(1<Y){for(var ie=Array(Y),fe=0;fe<Y;fe++)ie[fe]=arguments[fe+2];Z.children=ie}return W(U.type,B,Z)},ot.createContext=function(U){return U={$$typeof:u,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null},U.Provider=U,U.Consumer={$$typeof:l,_context:U},U},ot.createElement=function(U,$,F){var Z,B={},Y=null;if($!=null)for(Z in $.key!==void 0&&(Y=""+$.key),$)V.call($,Z)&&Z!=="key"&&Z!=="__self"&&Z!=="__source"&&(B[Z]=$[Z]);var ie=arguments.length-2;if(ie===1)B.children=F;else if(1<ie){for(var fe=Array(ie),ce=0;ce<ie;ce++)fe[ce]=arguments[ce+2];B.children=fe}if(U&&U.defaultProps)for(Z in ie=U.defaultProps,ie)B[Z]===void 0&&(B[Z]=ie[Z]);return W(U,Y,B)},ot.createRef=function(){return{current:null}},ot.forwardRef=function(U){return{$$typeof:f,render:U}},ot.isValidElement=ee,ot.lazy=function(U){return{$$typeof:b,_payload:{_status:-1,_result:U},_init:J}},ot.memo=function(U,$){return{$$typeof:p,type:U,compare:$===void 0?null:$}},ot.startTransition=function(U){var $=H.T,F={};H.T=F;try{var Z=U(),B=H.S;B!==null&&B(F,Z),typeof Z=="object"&&Z!==null&&typeof Z.then=="function"&&Z.then(G,ye)}catch(Y){ye(Y)}finally{$!==null&&F.types!==null&&($.types=F.types),H.T=$}},ot.unstable_useCacheRefresh=function(){return H.H.useCacheRefresh()},ot.use=function(U){return H.H.use(U)},ot.useActionState=function(U,$,F){return H.H.useActionState(U,$,F)},ot.useCallback=function(U,$){return H.H.useCallback(U,$)},ot.useContext=function(U){return H.H.useContext(U)},ot.useDebugValue=function(){},ot.useDeferredValue=function(U,$){return H.H.useDeferredValue(U,$)},ot.useEffect=function(U,$){return H.H.useEffect(U,$)},ot.useEffectEvent=function(U){return H.H.useEffectEvent(U)},ot.useId=function(){return H.H.useId()},ot.useImperativeHandle=function(U,$,F){return H.H.useImperativeHandle(U,$,F)},ot.useInsertionEffect=function(U,$){return H.H.useInsertionEffect(U,$)},ot.useLayoutEffect=function(U,$){return H.H.useLayoutEffect(U,$)},ot.useMemo=function(U,$){return H.H.useMemo(U,$)},ot.useOptimistic=function(U,$){return H.H.useOptimistic(U,$)},ot.useReducer=function(U,$,F){return H.H.useReducer(U,$,F)},ot.useRef=function(U){return H.H.useRef(U)},ot.useState=function(U){return H.H.useState(U)},ot.useSyncExternalStore=function(U,$,F){return H.H.useSyncExternalStore(U,$,F)},ot.useTransition=function(){return H.H.useTransition()},ot.version="19.2.1",ot}var Qx;function gm(){return Qx||(Qx=1,z0.exports=lN()),z0.exports}var P=gm();const nn=ll(P);var U0={exports:{}},Nu={},H0={exports:{}},G0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ew;function cN(){return ew||(ew=1,(function(e){function t(X,ae){var J=X.length;X.push(ae);e:for(;0<J;){var ye=J-1>>>1,K=X[ye];if(0<o(K,ae))X[ye]=ae,X[J]=K,J=ye;else break e}}function n(X){return X.length===0?null:X[0]}function s(X){if(X.length===0)return null;var ae=X[0],J=X.pop();if(J!==ae){X[0]=J;e:for(var ye=0,K=X.length,U=K>>>1;ye<U;){var $=2*(ye+1)-1,F=X[$],Z=$+1,B=X[Z];if(0>o(F,J))Z<K&&0>o(B,F)?(X[ye]=B,X[Z]=J,ye=Z):(X[ye]=F,X[$]=J,ye=$);else if(Z<K&&0>o(B,J))X[ye]=B,X[Z]=J,ye=Z;else break e}}return ae}function o(X,ae){var J=X.sortIndex-ae.sortIndex;return J!==0?J:X.id-ae.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var u=Date,f=u.now();e.unstable_now=function(){return u.now()-f}}var m=[],p=[],b=1,_=null,x=3,S=!1,T=!1,k=!1,A=!1,M=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function D(X){for(var ae=n(p);ae!==null;){if(ae.callback===null)s(p);else if(ae.startTime<=X)s(p),ae.sortIndex=ae.expirationTime,t(m,ae);else break;ae=n(p)}}function C(X){if(k=!1,D(X),!T)if(n(m)!==null)T=!0,G||(G=!0,q());else{var ae=n(p);ae!==null&&Se(C,ae.startTime-X)}}var G=!1,H=-1,V=5,W=-1;function re(){return A?!0:!(e.unstable_now()-W<V)}function ee(){if(A=!1,G){var X=e.unstable_now();W=X;var ae=!0;try{e:{T=!1,k&&(k=!1,R(H),H=-1),S=!0;var J=x;try{t:{for(D(X),_=n(m);_!==null&&!(_.expirationTime>X&&re());){var ye=_.callback;if(typeof ye=="function"){_.callback=null,x=_.priorityLevel;var K=ye(_.expirationTime<=X);if(X=e.unstable_now(),typeof K=="function"){_.callback=K,D(X),ae=!0;break t}_===n(m)&&s(m),D(X)}else s(m);_=n(m)}if(_!==null)ae=!0;else{var U=n(p);U!==null&&Se(C,U.startTime-X),ae=!1}}break e}finally{_=null,x=J,S=!1}ae=void 0}}finally{ae?q():G=!1}}}var q;if(typeof N=="function")q=function(){N(ee)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,oe=te.port2;te.port1.onmessage=ee,q=function(){oe.postMessage(null)}}else q=function(){M(ee,0)};function Se(X,ae){H=M(function(){X(e.unstable_now())},ae)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(X){X.callback=null},e.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<X?Math.floor(1e3/X):5},e.unstable_getCurrentPriorityLevel=function(){return x},e.unstable_next=function(X){switch(x){case 1:case 2:case 3:var ae=3;break;default:ae=x}var J=x;x=ae;try{return X()}finally{x=J}},e.unstable_requestPaint=function(){A=!0},e.unstable_runWithPriority=function(X,ae){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var J=x;x=X;try{return ae()}finally{x=J}},e.unstable_scheduleCallback=function(X,ae,J){var ye=e.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?ye+J:ye):J=ye,X){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=J+K,X={id:b++,callback:ae,priorityLevel:X,startTime:J,expirationTime:K,sortIndex:-1},J>ye?(X.sortIndex=J,t(p,X),n(m)===null&&X===n(p)&&(k?(R(H),H=-1):k=!0,Se(C,J-ye))):(X.sortIndex=K,t(m,X),T||S||(T=!0,G||(G=!0,q()))),X},e.unstable_shouldYield=re,e.unstable_wrapCallback=function(X){var ae=x;return function(){var J=x;x=ae;try{return X.apply(this,arguments)}finally{x=J}}}})(G0)),G0}var tw;function uN(){return tw||(tw=1,H0.exports=cN()),H0.exports}var F0={exports:{}},dr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nw;function dN(){if(nw)return dr;nw=1;var e=gm();function t(m){var p="https://react.dev/errors/"+m;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)p+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+m+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function l(m,p,b){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:_==null?null:""+_,children:m,containerInfo:p,implementation:b}}var u=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(m,p){if(m==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return dr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,dr.createPortal=function(m,p){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return l(m,p,null,b)},dr.flushSync=function(m){var p=u.T,b=s.p;try{if(u.T=null,s.p=2,m)return m()}finally{u.T=p,s.p=b,s.d.f()}},dr.preconnect=function(m,p){typeof m=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,s.d.C(m,p))},dr.prefetchDNS=function(m){typeof m=="string"&&s.d.D(m)},dr.preinit=function(m,p){if(typeof m=="string"&&p&&typeof p.as=="string"){var b=p.as,_=f(b,p.crossOrigin),x=typeof p.integrity=="string"?p.integrity:void 0,S=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;b==="style"?s.d.S(m,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:_,integrity:x,fetchPriority:S}):b==="script"&&s.d.X(m,{crossOrigin:_,integrity:x,fetchPriority:S,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},dr.preinitModule=function(m,p){if(typeof m=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var b=f(p.as,p.crossOrigin);s.d.M(m,{crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&s.d.M(m)},dr.preload=function(m,p){if(typeof m=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var b=p.as,_=f(b,p.crossOrigin);s.d.L(m,b,{crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},dr.preloadModule=function(m,p){if(typeof m=="string")if(p){var b=f(p.as,p.crossOrigin);s.d.m(m,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else s.d.m(m)},dr.requestFormReset=function(m){s.d.r(m)},dr.unstable_batchedUpdates=function(m,p){return m(p)},dr.useFormState=function(m,p,b){return u.H.useFormState(m,p,b)},dr.useFormStatus=function(){return u.H.useHostTransitionStatus()},dr.version="19.2.1",dr}var rw;function A2(){if(rw)return F0.exports;rw=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),F0.exports=dN(),F0.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iw;function hN(){if(iw)return Nu;iw=1;var e=uN(),t=gm(),n=A2();function s(r){var i="https://react.dev/errors/"+r;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)i+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+r+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function l(r){var i=r,c=r;if(r.alternate)for(;i.return;)i=i.return;else{r=i;do i=r,(i.flags&4098)!==0&&(c=i.return),r=i.return;while(r)}return i.tag===3?c:null}function u(r){if(r.tag===13){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function f(r){if(r.tag===31){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function m(r){if(l(r)!==r)throw Error(s(188))}function p(r){var i=r.alternate;if(!i){if(i=l(r),i===null)throw Error(s(188));return i!==r?null:r}for(var c=r,h=i;;){var v=c.return;if(v===null)break;var w=v.alternate;if(w===null){if(h=v.return,h!==null){c=h;continue}break}if(v.child===w.child){for(w=v.child;w;){if(w===c)return m(v),r;if(w===h)return m(v),i;w=w.sibling}throw Error(s(188))}if(c.return!==h.return)c=v,h=w;else{for(var O=!1,z=v.child;z;){if(z===c){O=!0,c=v,h=w;break}if(z===h){O=!0,h=v,c=w;break}z=z.sibling}if(!O){for(z=w.child;z;){if(z===c){O=!0,c=w,h=v;break}if(z===h){O=!0,h=w,c=v;break}z=z.sibling}if(!O)throw Error(s(189))}}if(c.alternate!==h)throw Error(s(190))}if(c.tag!==3)throw Error(s(188));return c.stateNode.current===c?r:i}function b(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r;for(r=r.child;r!==null;){if(i=b(r),i!==null)return i;r=r.sibling}return null}var _=Object.assign,x=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),T=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),R=Symbol.for("react.consumer"),N=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),G=Symbol.for("react.suspense_list"),H=Symbol.for("react.memo"),V=Symbol.for("react.lazy"),W=Symbol.for("react.activity"),re=Symbol.for("react.memo_cache_sentinel"),ee=Symbol.iterator;function q(r){return r===null||typeof r!="object"?null:(r=ee&&r[ee]||r["@@iterator"],typeof r=="function"?r:null)}var te=Symbol.for("react.client.reference");function oe(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===te?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case k:return"Fragment";case M:return"Profiler";case A:return"StrictMode";case C:return"Suspense";case G:return"SuspenseList";case W:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case T:return"Portal";case N:return r.displayName||"Context";case R:return(r._context.displayName||"Context")+".Consumer";case D:var i=r.render;return r=r.displayName,r||(r=i.displayName||i.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case H:return i=r.displayName||null,i!==null?i:oe(r.type)||"Memo";case V:i=r._payload,r=r._init;try{return oe(r(i))}catch{}}return null}var Se=Array.isArray,X=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J={pending:!1,data:null,method:null,action:null},ye=[],K=-1;function U(r){return{current:r}}function $(r){0>K||(r.current=ye[K],ye[K]=null,K--)}function F(r,i){K++,ye[K]=r.current,r.current=i}var Z=U(null),B=U(null),Y=U(null),ie=U(null);function fe(r,i){switch(F(Y,i),F(B,r),F(Z,null),i.nodeType){case 9:case 11:r=(r=i.documentElement)&&(r=r.namespaceURI)?vx(r):0;break;default:if(r=i.tagName,i=i.namespaceURI)i=vx(i),r=_x(i,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}$(Z),F(Z,r)}function ce(){$(Z),$(B),$(Y)}function xe(r){r.memoizedState!==null&&F(ie,r);var i=Z.current,c=_x(i,r.type);i!==c&&(F(B,r),F(Z,c))}function ke(r){B.current===r&&($(Z),$(B)),ie.current===r&&($(ie),Eu._currentValue=J)}var je,Me;function Ee(r){if(je===void 0)try{throw Error()}catch(c){var i=c.stack.trim().match(/\n( *(at )?)/);je=i&&i[1]||"",Me=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+je+r+Me}var Be=!1;function Ce(r,i){if(!r||Be)return"";Be=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(i){var De=function(){throw Error()};if(Object.defineProperty(De.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(De,[])}catch(we){var _e=we}Reflect.construct(r,[],De)}else{try{De.call()}catch(we){_e=we}r.call(De.prototype)}}else{try{throw Error()}catch(we){_e=we}(De=r())&&typeof De.catch=="function"&&De.catch(function(){})}}catch(we){if(we&&_e&&typeof we.stack=="string")return[we.stack,_e.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=h.DetermineComponentFrameRoot(),O=w[0],z=w[1];if(O&&z){var ne=O.split(`
`),be=z.split(`
`);for(v=h=0;h<ne.length&&!ne[h].includes("DetermineComponentFrameRoot");)h++;for(;v<be.length&&!be[v].includes("DetermineComponentFrameRoot");)v++;if(h===ne.length||v===be.length)for(h=ne.length-1,v=be.length-1;1<=h&&0<=v&&ne[h]!==be[v];)v--;for(;1<=h&&0<=v;h--,v--)if(ne[h]!==be[v]){if(h!==1||v!==1)do if(h--,v--,0>v||ne[h]!==be[v]){var Ae=`
`+ne[h].replace(" at new "," at ");return r.displayName&&Ae.includes("<anonymous>")&&(Ae=Ae.replace("<anonymous>",r.displayName)),Ae}while(1<=h&&0<=v);break}}}finally{Be=!1,Error.prepareStackTrace=c}return(c=r?r.displayName||r.name:"")?Ee(c):""}function Le(r,i){switch(r.tag){case 26:case 27:case 5:return Ee(r.type);case 16:return Ee("Lazy");case 13:return r.child!==i&&i!==null?Ee("Suspense Fallback"):Ee("Suspense");case 19:return Ee("SuspenseList");case 0:case 15:return Ce(r.type,!1);case 11:return Ce(r.type.render,!1);case 1:return Ce(r.type,!0);case 31:return Ee("Activity");default:return""}}function Ue(r){try{var i="",c=null;do i+=Le(r,c),c=r,r=r.return;while(r);return i}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}var me=Object.prototype.hasOwnProperty,Ie=e.unstable_scheduleCallback,le=e.unstable_cancelCallback,he=e.unstable_shouldYield,Pe=e.unstable_requestPaint,Fe=e.unstable_now,Ge=e.unstable_getCurrentPriorityLevel,st=e.unstable_ImmediatePriority,et=e.unstable_UserBlockingPriority,qt=e.unstable_NormalPriority,Sn=e.unstable_LowPriority,En=e.unstable_IdlePriority,ar=e.log,yr=e.unstable_setDisableYieldValue,un=null,Mt=null;function gn(r){if(typeof ar=="function"&&yr(r),Mt&&typeof Mt.setStrictMode=="function")try{Mt.setStrictMode(un,r)}catch{}}var dn=Math.clz32?Math.clz32:zi,Yr=Math.log,ra=Math.LN2;function zi(r){return r>>>=0,r===0?32:31-(Yr(r)/ra|0)|0}var Tn=256,On=262144,os=4194304;function jr(r){var i=r&42;if(i!==0)return i;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function or(r,i,c){var h=r.pendingLanes;if(h===0)return 0;var v=0,w=r.suspendedLanes,O=r.pingedLanes;r=r.warmLanes;var z=h&134217727;return z!==0?(h=z&~w,h!==0?v=jr(h):(O&=z,O!==0?v=jr(O):c||(c=z&~r,c!==0&&(v=jr(c))))):(z=h&~w,z!==0?v=jr(z):O!==0?v=jr(O):c||(c=h&~r,c!==0&&(v=jr(c)))),v===0?0:i!==0&&i!==v&&(i&w)===0&&(w=v&-v,c=i&-i,w>=c||w===32&&(c&4194048)!==0)?i:v}function mi(r,i){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&i)===0}function ia(r,i){switch(r){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Qa(){var r=os;return os<<=1,(os&62914560)===0&&(os=4194304),r}function eo(r){for(var i=[],c=0;31>c;c++)i.push(r);return i}function Ui(r,i){r.pendingLanes|=i,i!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function to(r,i,c,h,v,w){var O=r.pendingLanes;r.pendingLanes=c,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=c,r.entangledLanes&=c,r.errorRecoveryDisabledLanes&=c,r.shellSuspendCounter=0;var z=r.entanglements,ne=r.expirationTimes,be=r.hiddenUpdates;for(c=O&~c;0<c;){var Ae=31-dn(c),De=1<<Ae;z[Ae]=0,ne[Ae]=-1;var _e=be[Ae];if(_e!==null)for(be[Ae]=null,Ae=0;Ae<_e.length;Ae++){var we=_e[Ae];we!==null&&(we.lane&=-536870913)}c&=~De}h!==0&&sa(r,h,0),w!==0&&v===0&&r.tag!==0&&(r.suspendedLanes|=w&~(O&~i))}function sa(r,i,c){r.pendingLanes|=i,r.suspendedLanes&=~i;var h=31-dn(i);r.entangledLanes|=i,r.entanglements[h]=r.entanglements[h]|1073741824|c&261930}function no(r,i){var c=r.entangledLanes|=i;for(r=r.entanglements;c;){var h=31-dn(c),v=1<<h;v&i|r[h]&i&&(r[h]|=i),c&=~v}}function ro(r,i){var c=i&-i;return c=(c&42)!==0?1:Pn(c),(c&(r.suspendedLanes|i))!==0?0:c}function Pn(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function Ve(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function ks(){var r=ae.p;return r!==0?r:(r=window.event,r===void 0?32:Gx(r.type))}function Nr(r,i){var c=ae.p;try{return ae.p=r,i()}finally{ae.p=c}}var lr=Math.random().toString(36).slice(2),rn="__reactFiber$"+lr,kn="__reactProps$"+lr,qr="__reactContainer$"+lr,pi="__reactEvents$"+lr,pe="__reactListeners$"+lr,Ye="__reactHandles$"+lr,lt="__reactResources$"+lr,pt="__reactMarker$"+lr;function tt(r){delete r[rn],delete r[kn],delete r[pi],delete r[pe],delete r[Ye]}function dt(r){var i=r[rn];if(i)return i;for(var c=r.parentNode;c;){if(i=c[qr]||c[rn]){if(c=i.alternate,i.child!==null||c!==null&&c.child!==null)for(r=Ax(r);r!==null;){if(c=r[rn])return c;r=Ax(r)}return i}r=c,c=r.parentNode}return null}function xt(r){if(r=r[rn]||r[qr]){var i=r.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return r}return null}function mt(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r.stateNode;throw Error(s(33))}function $n(r){var i=r[lt];return i||(i=r[lt]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function wt(r){r[pt]=!0}var aa=new Set,io={};function gi(r,i){Wn(r,i),Wn(r+"Capture",i)}function Wn(r,i){for(io[r]=i,r=0;r<i.length;r++)aa.add(i[r])}var As=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),so={},ao={};function oo(r){return me.call(ao,r)?!0:me.call(so,r)?!1:As.test(r)?ao[r]=!0:(so[r]=!0,!1)}function gt(r,i,c){if(oo(i))if(c===null)r.removeAttribute(i);else{switch(typeof c){case"undefined":case"function":case"symbol":r.removeAttribute(i);return;case"boolean":var h=i.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){r.removeAttribute(i);return}}r.setAttribute(i,""+c)}}function It(r,i,c){if(c===null)r.removeAttribute(i);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(i);return}r.setAttribute(i,""+c)}}function Or(r,i,c,h){if(h===null)r.removeAttribute(c);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(c);return}r.setAttributeNS(i,c,""+h)}}function In(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function js(r){var i=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Mc(r,i,c){var h=Object.getOwnPropertyDescriptor(r.constructor.prototype,i);if(!r.hasOwnProperty(i)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var v=h.get,w=h.set;return Object.defineProperty(r,i,{configurable:!0,get:function(){return v.call(this)},set:function(O){c=""+O,w.call(this,O)}}),Object.defineProperty(r,i,{enumerable:h.enumerable}),{getValue:function(){return c},setValue:function(O){c=""+O},stopTracking:function(){r._valueTracker=null,delete r[i]}}}}function at(r){if(!r._valueTracker){var i=js(r)?"checked":"value";r._valueTracker=Mc(r,i,""+r[i])}}function sn(r){if(!r)return!1;var i=r._valueTracker;if(!i)return!0;var c=i.getValue(),h="";return r&&(h=js(r)?r.checked?"true":"false":r.value),r=h,r!==c?(i.setValue(r),!0):!1}function oa(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var dl=/[\n"\\]/g;function Qt(r){return r.replace(dl,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Cc(r,i,c,h,v,w,O,z){r.name="",O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?r.type=O:r.removeAttribute("type"),i!=null?O==="number"?(i===0&&r.value===""||r.value!=i)&&(r.value=""+In(i)):r.value!==""+In(i)&&(r.value=""+In(i)):O!=="submit"&&O!=="reset"||r.removeAttribute("value"),i!=null?Hi(r,O,In(i)):c!=null?Hi(r,O,In(c)):h!=null&&r.removeAttribute("value"),v==null&&w!=null&&(r.defaultChecked=!!w),v!=null&&(r.checked=v&&typeof v!="function"&&typeof v!="symbol"),z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"?r.name=""+In(z):r.removeAttribute("name")}function lo(r,i,c,h,v,w,O,z){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(r.type=w),i!=null||c!=null){if(!(w!=="submit"&&w!=="reset"||i!=null)){at(r);return}c=c!=null?""+In(c):"",i=i!=null?""+In(i):c,z||i===r.value||(r.value=i),r.defaultValue=i}h=h??v,h=typeof h!="function"&&typeof h!="symbol"&&!!h,r.checked=z?r.checked:!!h,r.defaultChecked=!!h,O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"&&(r.name=O),at(r)}function Hi(r,i,c){i==="number"&&oa(r.ownerDocument)===r||r.defaultValue===""+c||(r.defaultValue=""+c)}function Ft(r,i,c,h){if(r=r.options,i){i={};for(var v=0;v<c.length;v++)i["$"+c[v]]=!0;for(c=0;c<r.length;c++)v=i.hasOwnProperty("$"+r[c].value),r[c].selected!==v&&(r[c].selected=v),v&&h&&(r[c].defaultSelected=!0)}else{for(c=""+In(c),i=null,v=0;v<r.length;v++){if(r[v].value===c){r[v].selected=!0,h&&(r[v].defaultSelected=!0);return}i!==null||r[v].disabled||(i=r[v])}i!==null&&(i.selected=!0)}}function ls(r,i,c){if(i!=null&&(i=""+In(i),i!==r.value&&(r.value=i),c==null)){r.defaultValue!==i&&(r.defaultValue=i);return}r.defaultValue=c!=null?""+In(c):""}function la(r,i,c,h){if(i==null){if(h!=null){if(c!=null)throw Error(s(92));if(Se(h)){if(1<h.length)throw Error(s(93));h=h[0]}c=h}c==null&&(c=""),i=c}c=In(i),r.defaultValue=c,h=r.textContent,h===c&&h!==""&&h!==null&&(r.value=h),at(r)}function bi(r,i){if(i){var c=r.firstChild;if(c&&c===r.lastChild&&c.nodeType===3){c.nodeValue=i;return}}r.textContent=i}var Rc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ca(r,i,c){var h=i.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?h?r.setProperty(i,""):i==="float"?r.cssFloat="":r[i]="":h?r.setProperty(i,c):typeof c!="number"||c===0||Rc.has(i)?i==="float"?r.cssFloat=c:r[i]=(""+c).trim():r[i]=c+"px"}function hl(r,i,c){if(i!=null&&typeof i!="object")throw Error(s(62));if(r=r.style,c!=null){for(var h in c)!c.hasOwnProperty(h)||i!=null&&i.hasOwnProperty(h)||(h.indexOf("--")===0?r.setProperty(h,""):h==="float"?r.cssFloat="":r[h]="");for(var v in i)h=i[v],i.hasOwnProperty(v)&&c[v]!==h&&ca(r,v,h)}else for(var w in i)i.hasOwnProperty(w)&&ca(r,w,i[w])}function co(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fl=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Lc=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ua(r){return Lc.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function Dr(){}var ml=null;function uo(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var da=null,it=null;function Zr(r){var i=xt(r);if(i&&(r=i.stateNode)){var c=r[kn]||null;e:switch(r=i.stateNode,i.type){case"input":if(Cc(r,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),i=c.name,c.type==="radio"&&i!=null){for(c=r;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+Qt(""+i)+'"][type="radio"]'),i=0;i<c.length;i++){var h=c[i];if(h!==r&&h.form===r.form){var v=h[kn]||null;if(!v)throw Error(s(90));Cc(h,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(i=0;i<c.length;i++)h=c[i],h.form===r.form&&sn(h)}break e;case"textarea":ls(r,c.value,c.defaultValue);break e;case"select":i=c.value,i!=null&&Ft(r,!!c.multiple,i,!1)}}}var Lt=!1;function Bc(r,i,c){if(Lt)return r(i,c);Lt=!0;try{var h=r(i);return h}finally{if(Lt=!1,(da!==null||it!==null)&&(_h(),da&&(i=da,r=it,it=da=null,Zr(i),r)))for(i=0;i<r.length;i++)Zr(r[i])}}function Ns(r,i){var c=r.stateNode;if(c===null)return null;var h=c[kn]||null;if(h===null)return null;c=h[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(r=r.type,h=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!h;break e;default:r=!1}if(r)return null;if(c&&typeof c!="function")throw Error(s(231,i,typeof c));return c}var Vr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ho=!1;if(Vr)try{var Kr={};Object.defineProperty(Kr,"passive",{get:function(){ho=!0}}),window.addEventListener("test",Kr,Kr),window.removeEventListener("test",Kr,Kr)}catch{ho=!1}var yi=null,Os=null,bn=null;function cs(){if(bn)return bn;var r,i=Os,c=i.length,h,v="value"in yi?yi.value:yi.textContent,w=v.length;for(r=0;r<c&&i[r]===v[r];r++);var O=c-r;for(h=1;h<=O&&i[c-h]===v[w-h];h++);return bn=v.slice(r,1<h?1-h:void 0)}function fo(r){var i=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&i===13&&(r=13)):r=i,r===10&&(r=13),32<=r||r===13?r:0}function mo(){return!0}function Td(){return!1}function Xn(r){function i(c,h,v,w,O){this._reactName=c,this._targetInst=v,this.type=h,this.nativeEvent=w,this.target=O,this.currentTarget=null;for(var z in r)r.hasOwnProperty(z)&&(c=r[z],this[z]=c?c(w):w[z]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?mo:Td,this.isPropagationStopped=Td,this}return _(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=mo)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=mo)},persist:function(){},isPersistent:mo}),i}var Gi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pl=Xn(Gi),ha=_({},Gi,{view:0,detail:0}),St=Xn(ha),Pc,vr,Fi,po=_({},ha,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gc,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Fi&&(Fi&&r.type==="mousemove"?(Pc=r.screenX-Fi.screenX,vr=r.screenY-Fi.screenY):vr=Pc=0,Fi=r),Pc)},movementY:function(r){return"movementY"in r?r.movementY:vr}}),kd=Xn(po),$c=_({},po,{dataTransfer:0}),Km=Xn($c),Ad=_({},ha,{relatedTarget:0}),Ic=Xn(Ad),Wm=_({},Gi,{animationName:0,elapsedTime:0,pseudoElement:0}),zc=Xn(Wm),Xm=_({},Gi,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),vi=Xn(Xm),Jm=_({},Gi,{data:0}),Uc=Xn(Jm),us={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Nd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Hc(r){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(r):(r=Nd[r])?!!i[r]:!1}function Gc(){return Hc}var Od=_({},ha,{key:function(r){if(r.key){var i=us[r.key]||r.key;if(i!=="Unidentified")return i}return r.type==="keypress"?(r=fo(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?jd[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gc,charCode:function(r){return r.type==="keypress"?fo(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?fo(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Dd=Xn(Od),Qm=_({},po,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Md=Xn(Qm),Fc=_({},ha,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gc}),ep=Xn(Fc),Cd=_({},Gi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Rd=Xn(Cd),gl=_({},po,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Ds=Xn(gl),tp=_({},Gi,{newState:0,oldState:0}),go=Xn(tp),Mr=[9,13,27,32],bl=Vr&&"CompositionEvent"in window,fa=null;Vr&&"documentMode"in document&&(fa=document.documentMode);var np=Vr&&"TextEvent"in window&&!fa,yl=Vr&&(!bl||fa&&8<fa&&11>=fa),vl=" ",Ld=!1;function Bd(r,i){switch(r){case"keyup":return Mr.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Yc(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var ma=!1;function Wr(r,i){switch(r){case"compositionend":return Yc(i);case"keypress":return i.which!==32?null:(Ld=!0,vl);case"textInput":return r=i.data,r===vl&&Ld?null:r;default:return null}}function pa(r,i){if(ma)return r==="compositionend"||!bl&&Bd(r,i)?(r=cs(),bn=Os=yi=null,ma=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return yl&&i.locale!=="ko"?null:i.data;default:return null}}var rp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _i(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i==="input"?!!rp[r.type]:i==="textarea"}function Pd(r,i,c,h){da?it?it.push(h):it=[h]:da=h,i=Ah(i,"onChange"),0<i.length&&(c=new pl("onChange","change",null,c,h),r.push({event:c,listeners:i}))}var xi=null,bo=null;function yo(r){fx(r,0)}function vo(r){var i=mt(r);if(sn(i))return r}function _o(r,i){if(r==="change")return i}var $d=!1;if(Vr){var wi;if(Vr){var ga="oninput"in document;if(!ga){var Id=document.createElement("div");Id.setAttribute("oninput","return;"),ga=typeof Id.oninput=="function"}wi=ga}else wi=!1;$d=wi&&(!document.documentMode||9<document.documentMode)}function _l(){xi&&(xi.detachEvent("onpropertychange",zd),bo=xi=null)}function zd(r){if(r.propertyName==="value"&&vo(bo)){var i=[];Pd(i,bo,r,uo(r)),Bc(yo,i)}}function Yi(r,i,c){r==="focusin"?(_l(),xi=i,bo=c,xi.attachEvent("onpropertychange",zd)):r==="focusout"&&_l()}function ip(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return vo(bo)}function ba(r,i){if(r==="click")return vo(i)}function sp(r,i){if(r==="input"||r==="change")return vo(i)}function qi(r,i){return r===i&&(r!==0||1/r===1/i)||r!==r&&i!==i}var Gn=typeof Object.is=="function"?Object.is:qi;function ya(r,i){if(Gn(r,i))return!0;if(typeof r!="object"||r===null||typeof i!="object"||i===null)return!1;var c=Object.keys(r),h=Object.keys(i);if(c.length!==h.length)return!1;for(h=0;h<c.length;h++){var v=c[h];if(!me.call(i,v)||!Gn(r[v],i[v]))return!1}return!0}function xl(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function xo(r,i){var c=xl(r);r=0;for(var h;c;){if(c.nodeType===3){if(h=r+c.textContent.length,r<=i&&h>=i)return{node:c,offset:i-r};r=h}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=xl(c)}}function wl(r,i){return r&&i?r===i?!0:r&&r.nodeType===3?!1:i&&i.nodeType===3?wl(r,i.parentNode):"contains"in r?r.contains(i):r.compareDocumentPosition?!!(r.compareDocumentPosition(i)&16):!1:!1}function wo(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var i=oa(r.document);i instanceof r.HTMLIFrameElement;){try{var c=typeof i.contentWindow.location.href=="string"}catch{c=!1}if(c)r=i.contentWindow;else break;i=oa(r.document)}return i}function ds(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i&&(i==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||i==="textarea"||r.contentEditable==="true")}var Sl=Vr&&"documentMode"in document&&11>=document.documentMode,hs=null,El=null,So=null,va=!1;function Ud(r,i,c){var h=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;va||hs==null||hs!==oa(h)||(h=hs,"selectionStart"in h&&ds(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),So&&ya(So,h)||(So=h,h=Ah(El,"onSelect"),0<h.length&&(i=new pl("onSelect","select",null,i,c),r.push({event:i,listeners:h}),i.target=hs)))}function fs(r,i){var c={};return c[r.toLowerCase()]=i.toLowerCase(),c["Webkit"+r]="webkit"+i,c["Moz"+r]="moz"+i,c}var _a={animationend:fs("Animation","AnimationEnd"),animationiteration:fs("Animation","AnimationIteration"),animationstart:fs("Animation","AnimationStart"),transitionrun:fs("Transition","TransitionRun"),transitionstart:fs("Transition","TransitionStart"),transitioncancel:fs("Transition","TransitionCancel"),transitionend:fs("Transition","TransitionEnd")},Tl={},Hd={};Vr&&(Hd=document.createElement("div").style,"AnimationEvent"in window||(delete _a.animationend.animation,delete _a.animationiteration.animation,delete _a.animationstart.animation),"TransitionEvent"in window||delete _a.transitionend.transition);function Fn(r){if(Tl[r])return Tl[r];if(!_a[r])return r;var i=_a[r],c;for(c in i)if(i.hasOwnProperty(c)&&c in Hd)return Tl[r]=i[c];return r}var Eo=Fn("animationend"),Gd=Fn("animationiteration"),To=Fn("animationstart"),ap=Fn("transitionrun"),Fd=Fn("transitionstart"),op=Fn("transitioncancel"),xa=Fn("transitionend"),Yd=new Map,ms="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ms.push("scrollEnd");function Cr(r,i){Yd.set(r,i),gi(i,[r])}var ko=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},Rr=[],cr=0,kl=0;function Ao(){for(var r=cr,i=kl=cr=0;i<r;){var c=Rr[i];Rr[i++]=null;var h=Rr[i];Rr[i++]=null;var v=Rr[i];Rr[i++]=null;var w=Rr[i];if(Rr[i++]=null,h!==null&&v!==null){var O=h.pending;O===null?v.next=v:(v.next=O.next,O.next=v),h.pending=v}w!==0&&wa(c,v,w)}}function ps(r,i,c,h){Rr[cr++]=r,Rr[cr++]=i,Rr[cr++]=c,Rr[cr++]=h,kl|=h,r.lanes|=h,r=r.alternate,r!==null&&(r.lanes|=h)}function qc(r,i,c,h){return ps(r,i,c,h),jo(r)}function Si(r,i){return ps(r,null,null,i),jo(r)}function wa(r,i,c){r.lanes|=c;var h=r.alternate;h!==null&&(h.lanes|=c);for(var v=!1,w=r.return;w!==null;)w.childLanes|=c,h=w.alternate,h!==null&&(h.childLanes|=c),w.tag===22&&(r=w.stateNode,r===null||r._visibility&1||(v=!0)),r=w,w=w.return;return r.tag===3?(w=r.stateNode,v&&i!==null&&(v=31-dn(c),r=w.hiddenUpdates,h=r[v],h===null?r[v]=[i]:h.push(i),i.lane=c|536870912),w):null}function jo(r){if(50<bu)throw bu=0,c0=null,Error(s(185));for(var i=r.return;i!==null;)r=i,i=r.return;return r.tag===3?r.stateNode:null}var Ms={};function lp(r,i,c,h){this.tag=r,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ur(r,i,c,h){return new lp(r,i,c,h)}function Al(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Ei(r,i){var c=r.alternate;return c===null?(c=ur(r.tag,i,r.key,r.mode),c.elementType=r.elementType,c.type=r.type,c.stateNode=r.stateNode,c.alternate=r,r.alternate=c):(c.pendingProps=i,c.type=r.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=r.flags&65011712,c.childLanes=r.childLanes,c.lanes=r.lanes,c.child=r.child,c.memoizedProps=r.memoizedProps,c.memoizedState=r.memoizedState,c.updateQueue=r.updateQueue,i=r.dependencies,c.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},c.sibling=r.sibling,c.index=r.index,c.ref=r.ref,c.refCleanup=r.refCleanup,c}function Zc(r,i){r.flags&=65011714;var c=r.alternate;return c===null?(r.childLanes=0,r.lanes=i,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=c.childLanes,r.lanes=c.lanes,r.child=c.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=c.memoizedProps,r.memoizedState=c.memoizedState,r.updateQueue=c.updateQueue,r.type=c.type,i=c.dependencies,r.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),r}function No(r,i,c,h,v,w){var O=0;if(h=r,typeof r=="function")Al(r)&&(O=1);else if(typeof r=="string")O=Vj(r,c,Z.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case W:return r=ur(31,c,i,v),r.elementType=W,r.lanes=w,r;case k:return Cs(c.children,v,w,i);case A:O=8,v|=24;break;case M:return r=ur(12,c,i,v|2),r.elementType=M,r.lanes=w,r;case C:return r=ur(13,c,i,v),r.elementType=C,r.lanes=w,r;case G:return r=ur(19,c,i,v),r.elementType=G,r.lanes=w,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case N:O=10;break e;case R:O=9;break e;case D:O=11;break e;case H:O=14;break e;case V:O=16,h=null;break e}O=29,c=Error(s(130,r===null?"null":typeof r,"")),h=null}return i=ur(O,c,i,v),i.elementType=r,i.type=h,i.lanes=w,i}function Cs(r,i,c,h){return r=ur(7,r,h,i),r.lanes=c,r}function jl(r,i,c){return r=ur(6,r,null,i),r.lanes=c,r}function Vc(r){var i=ur(18,null,null,0);return i.stateNode=r,i}function Kc(r,i,c){return i=ur(4,r.children!==null?r.children:[],r.key,i),i.lanes=c,i.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},i}var a=new WeakMap;function d(r,i){if(typeof r=="object"&&r!==null){var c=a.get(r);return c!==void 0?c:(i={value:r,source:i,stack:Ue(i)},a.set(r,i),i)}return{value:r,source:i,stack:Ue(i)}}var g=[],E=0,j=null,I=0,Q=[],de=0,ve=null,Oe=1,ze="";function Xe(r,i){g[E++]=I,g[E++]=j,j=r,I=i}function ht(r,i,c){Q[de++]=Oe,Q[de++]=ze,Q[de++]=ve,ve=r;var h=Oe;r=ze;var v=32-dn(h)-1;h&=~(1<<v),c+=1;var w=32-dn(i)+v;if(30<w){var O=v-v%5;w=(h&(1<<O)-1).toString(32),h>>=O,v-=O,Oe=1<<32-dn(i)+v|c<<v|h,ze=w+r}else Oe=1<<w|c<<v|h,ze=r}function zn(r){r.return!==null&&(Xe(r,1),ht(r,1,0))}function yn(r){for(;r===j;)j=g[--E],g[E]=null,I=g[--E],g[E]=null;for(;r===ve;)ve=Q[--de],Q[de]=null,ze=Q[--de],Q[de]=null,Oe=Q[--de],Q[de]=null}function _r(r,i){Q[de++]=Oe,Q[de++]=ze,Q[de++]=ve,Oe=i.id,ze=i.overflow,ve=r}var jt=null,Nt=null,bt=!1,gs=null,Lr=!1,Nl=Error(s(519));function bs(r){var i=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Oo(d(i,r)),Nl}function Wc(r){var i=r.stateNode,c=r.type,h=r.memoizedProps;switch(i[rn]=r,i[kn]=h,c){case"dialog":vt("cancel",i),vt("close",i);break;case"iframe":case"object":case"embed":vt("load",i);break;case"video":case"audio":for(c=0;c<vu.length;c++)vt(vu[c],i);break;case"source":vt("error",i);break;case"img":case"image":case"link":vt("error",i),vt("load",i);break;case"details":vt("toggle",i);break;case"input":vt("invalid",i),lo(i,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0);break;case"select":vt("invalid",i);break;case"textarea":vt("invalid",i),la(i,h.value,h.defaultValue,h.children)}c=h.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||i.textContent===""+c||h.suppressHydrationWarning===!0||bx(i.textContent,c)?(h.popover!=null&&(vt("beforetoggle",i),vt("toggle",i)),h.onScroll!=null&&vt("scroll",i),h.onScrollEnd!=null&&vt("scrollend",i),h.onClick!=null&&(i.onclick=Dr),i=!0):i=!1,i||bs(r,!0)}function hn(r){for(jt=r.return;jt;)switch(jt.tag){case 5:case 31:case 13:Lr=!1;return;case 27:case 3:Lr=!0;return;default:jt=jt.return}}function Zi(r){if(r!==jt)return!1;if(!bt)return hn(r),bt=!0,!1;var i=r.tag,c;if((c=i!==3&&i!==27)&&((c=i===5)&&(c=r.type,c=!(c!=="form"&&c!=="button")||E0(r.type,r.memoizedProps)),c=!c),c&&Nt&&bs(r),hn(r),i===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(317));Nt=kx(r)}else if(i===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(317));Nt=kx(r)}else i===27?(i=Nt,Ba(r.type)?(r=N0,N0=null,Nt=r):Nt=i):Nt=jt?ki(r.stateNode.nextSibling):null;return!0}function Rs(){Nt=jt=null,bt=!1}function Xc(){var r=gs;return r!==null&&(Ir===null?Ir=r:Ir.push.apply(Ir,r),gs=null),r}function Oo(r){gs===null?gs=[r]:gs.push(r)}var Do=U(null),ys=null,Vi=null;function Sa(r,i,c){F(Do,i._currentValue),i._currentValue=c}function Ls(r){r._currentValue=Do.current,$(Do)}function cp(r,i,c){for(;r!==null;){var h=r.alternate;if((r.childLanes&i)!==i?(r.childLanes|=i,h!==null&&(h.childLanes|=i)):h!==null&&(h.childLanes&i)!==i&&(h.childLanes|=i),r===c)break;r=r.return}}function up(r,i,c,h){var v=r.child;for(v!==null&&(v.return=r);v!==null;){var w=v.dependencies;if(w!==null){var O=v.child;w=w.firstContext;e:for(;w!==null;){var z=w;w=v;for(var ne=0;ne<i.length;ne++)if(z.context===i[ne]){w.lanes|=c,z=w.alternate,z!==null&&(z.lanes|=c),cp(w.return,c,r),h||(O=null);break e}w=z.next}}else if(v.tag===18){if(O=v.return,O===null)throw Error(s(341));O.lanes|=c,w=O.alternate,w!==null&&(w.lanes|=c),cp(O,c,r),O=null}else O=v.child;if(O!==null)O.return=v;else for(O=v;O!==null;){if(O===r){O=null;break}if(v=O.sibling,v!==null){v.return=O.return,O=v;break}O=O.return}v=O}}function Ol(r,i,c,h){r=null;for(var v=i,w=!1;v!==null;){if(!w){if((v.flags&524288)!==0)w=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var O=v.alternate;if(O===null)throw Error(s(387));if(O=O.memoizedProps,O!==null){var z=v.type;Gn(v.pendingProps.value,O.value)||(r!==null?r.push(z):r=[z])}}else if(v===ie.current){if(O=v.alternate,O===null)throw Error(s(387));O.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(r!==null?r.push(Eu):r=[Eu])}v=v.return}r!==null&&up(i,r,c,h),i.flags|=262144}function qd(r){for(r=r.firstContext;r!==null;){if(!Gn(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function Mo(r){ys=r,Vi=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Jn(r){return nv(ys,r)}function Zd(r,i){return ys===null&&Mo(r),nv(r,i)}function nv(r,i){var c=i._currentValue;if(i={context:i,memoizedValue:c,next:null},Vi===null){if(r===null)throw Error(s(308));Vi=i,r.dependencies={lanes:0,firstContext:i},r.flags|=524288}else Vi=Vi.next=i;return c}var FA=typeof AbortController<"u"?AbortController:function(){var r=[],i=this.signal={aborted:!1,addEventListener:function(c,h){r.push(h)}};this.abort=function(){i.aborted=!0,r.forEach(function(c){return c()})}},YA=e.unstable_scheduleCallback,qA=e.unstable_NormalPriority,Dn={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function dp(){return{controller:new FA,data:new Map,refCount:0}}function Jc(r){r.refCount--,r.refCount===0&&YA(qA,function(){r.controller.abort()})}var Qc=null,hp=0,Dl=0,Ml=null;function ZA(r,i){if(Qc===null){var c=Qc=[];hp=0,Dl=p0(),Ml={status:"pending",value:void 0,then:function(h){c.push(h)}}}return hp++,i.then(rv,rv),i}function rv(){if(--hp===0&&Qc!==null){Ml!==null&&(Ml.status="fulfilled");var r=Qc;Qc=null,Dl=0,Ml=null;for(var i=0;i<r.length;i++)(0,r[i])()}}function VA(r,i){var c=[],h={status:"pending",value:null,reason:null,then:function(v){c.push(v)}};return r.then(function(){h.status="fulfilled",h.value=i;for(var v=0;v<c.length;v++)(0,c[v])(i)},function(v){for(h.status="rejected",h.reason=v,v=0;v<c.length;v++)(0,c[v])(void 0)}),h}var iv=X.S;X.S=function(r,i){U_=Fe(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&ZA(r,i),iv!==null&&iv(r,i)};var Co=U(null);function fp(){var r=Co.current;return r!==null?r:Yt.pooledCache}function Vd(r,i){i===null?F(Co,Co.current):F(Co,i.pool)}function sv(){var r=fp();return r===null?null:{parent:Dn._currentValue,pool:r}}var Cl=Error(s(460)),mp=Error(s(474)),Kd=Error(s(542)),Wd={then:function(){}};function av(r){return r=r.status,r==="fulfilled"||r==="rejected"}function ov(r,i,c){switch(c=r[c],c===void 0?r.push(i):c!==i&&(i.then(Dr,Dr),i=c),i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,cv(r),r;default:if(typeof i.status=="string")i.then(Dr,Dr);else{if(r=Yt,r!==null&&100<r.shellSuspendCounter)throw Error(s(482));r=i,r.status="pending",r.then(function(h){if(i.status==="pending"){var v=i;v.status="fulfilled",v.value=h}},function(h){if(i.status==="pending"){var v=i;v.status="rejected",v.reason=h}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,cv(r),r}throw Lo=i,Cl}}function Ro(r){try{var i=r._init;return i(r._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(Lo=c,Cl):c}}var Lo=null;function lv(){if(Lo===null)throw Error(s(459));var r=Lo;return Lo=null,r}function cv(r){if(r===Cl||r===Kd)throw Error(s(483))}var Rl=null,eu=0;function Xd(r){var i=eu;return eu+=1,Rl===null&&(Rl=[]),ov(Rl,r,i)}function tu(r,i){i=i.props.ref,r.ref=i!==void 0?i:null}function Jd(r,i){throw i.$$typeof===x?Error(s(525)):(r=Object.prototype.toString.call(i),Error(s(31,r==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":r)))}function uv(r){function i(ue,se){if(r){var ge=ue.deletions;ge===null?(ue.deletions=[se],ue.flags|=16):ge.push(se)}}function c(ue,se){if(!r)return null;for(;se!==null;)i(ue,se),se=se.sibling;return null}function h(ue){for(var se=new Map;ue!==null;)ue.key!==null?se.set(ue.key,ue):se.set(ue.index,ue),ue=ue.sibling;return se}function v(ue,se){return ue=Ei(ue,se),ue.index=0,ue.sibling=null,ue}function w(ue,se,ge){return ue.index=ge,r?(ge=ue.alternate,ge!==null?(ge=ge.index,ge<se?(ue.flags|=67108866,se):ge):(ue.flags|=67108866,se)):(ue.flags|=1048576,se)}function O(ue){return r&&ue.alternate===null&&(ue.flags|=67108866),ue}function z(ue,se,ge,Ne){return se===null||se.tag!==6?(se=jl(ge,ue.mode,Ne),se.return=ue,se):(se=v(se,ge),se.return=ue,se)}function ne(ue,se,ge,Ne){var Qe=ge.type;return Qe===k?Ae(ue,se,ge.props.children,Ne,ge.key):se!==null&&(se.elementType===Qe||typeof Qe=="object"&&Qe!==null&&Qe.$$typeof===V&&Ro(Qe)===se.type)?(se=v(se,ge.props),tu(se,ge),se.return=ue,se):(se=No(ge.type,ge.key,ge.props,null,ue.mode,Ne),tu(se,ge),se.return=ue,se)}function be(ue,se,ge,Ne){return se===null||se.tag!==4||se.stateNode.containerInfo!==ge.containerInfo||se.stateNode.implementation!==ge.implementation?(se=Kc(ge,ue.mode,Ne),se.return=ue,se):(se=v(se,ge.children||[]),se.return=ue,se)}function Ae(ue,se,ge,Ne,Qe){return se===null||se.tag!==7?(se=Cs(ge,ue.mode,Ne,Qe),se.return=ue,se):(se=v(se,ge),se.return=ue,se)}function De(ue,se,ge){if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return se=jl(""+se,ue.mode,ge),se.return=ue,se;if(typeof se=="object"&&se!==null){switch(se.$$typeof){case S:return ge=No(se.type,se.key,se.props,null,ue.mode,ge),tu(ge,se),ge.return=ue,ge;case T:return se=Kc(se,ue.mode,ge),se.return=ue,se;case V:return se=Ro(se),De(ue,se,ge)}if(Se(se)||q(se))return se=Cs(se,ue.mode,ge,null),se.return=ue,se;if(typeof se.then=="function")return De(ue,Xd(se),ge);if(se.$$typeof===N)return De(ue,Zd(ue,se),ge);Jd(ue,se)}return null}function _e(ue,se,ge,Ne){var Qe=se!==null?se.key:null;if(typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint")return Qe!==null?null:z(ue,se,""+ge,Ne);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case S:return ge.key===Qe?ne(ue,se,ge,Ne):null;case T:return ge.key===Qe?be(ue,se,ge,Ne):null;case V:return ge=Ro(ge),_e(ue,se,ge,Ne)}if(Se(ge)||q(ge))return Qe!==null?null:Ae(ue,se,ge,Ne,null);if(typeof ge.then=="function")return _e(ue,se,Xd(ge),Ne);if(ge.$$typeof===N)return _e(ue,se,Zd(ue,ge),Ne);Jd(ue,ge)}return null}function we(ue,se,ge,Ne,Qe){if(typeof Ne=="string"&&Ne!==""||typeof Ne=="number"||typeof Ne=="bigint")return ue=ue.get(ge)||null,z(se,ue,""+Ne,Qe);if(typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case S:return ue=ue.get(Ne.key===null?ge:Ne.key)||null,ne(se,ue,Ne,Qe);case T:return ue=ue.get(Ne.key===null?ge:Ne.key)||null,be(se,ue,Ne,Qe);case V:return Ne=Ro(Ne),we(ue,se,ge,Ne,Qe)}if(Se(Ne)||q(Ne))return ue=ue.get(ge)||null,Ae(se,ue,Ne,Qe,null);if(typeof Ne.then=="function")return we(ue,se,ge,Xd(Ne),Qe);if(Ne.$$typeof===N)return we(ue,se,ge,Zd(se,Ne),Qe);Jd(se,Ne)}return null}function qe(ue,se,ge,Ne){for(var Qe=null,Ot=null,Ke=se,ft=se=0,Tt=null;Ke!==null&&ft<ge.length;ft++){Ke.index>ft?(Tt=Ke,Ke=null):Tt=Ke.sibling;var Dt=_e(ue,Ke,ge[ft],Ne);if(Dt===null){Ke===null&&(Ke=Tt);break}r&&Ke&&Dt.alternate===null&&i(ue,Ke),se=w(Dt,se,ft),Ot===null?Qe=Dt:Ot.sibling=Dt,Ot=Dt,Ke=Tt}if(ft===ge.length)return c(ue,Ke),bt&&Xe(ue,ft),Qe;if(Ke===null){for(;ft<ge.length;ft++)Ke=De(ue,ge[ft],Ne),Ke!==null&&(se=w(Ke,se,ft),Ot===null?Qe=Ke:Ot.sibling=Ke,Ot=Ke);return bt&&Xe(ue,ft),Qe}for(Ke=h(Ke);ft<ge.length;ft++)Tt=we(Ke,ue,ft,ge[ft],Ne),Tt!==null&&(r&&Tt.alternate!==null&&Ke.delete(Tt.key===null?ft:Tt.key),se=w(Tt,se,ft),Ot===null?Qe=Tt:Ot.sibling=Tt,Ot=Tt);return r&&Ke.forEach(function(Ua){return i(ue,Ua)}),bt&&Xe(ue,ft),Qe}function nt(ue,se,ge,Ne){if(ge==null)throw Error(s(151));for(var Qe=null,Ot=null,Ke=se,ft=se=0,Tt=null,Dt=ge.next();Ke!==null&&!Dt.done;ft++,Dt=ge.next()){Ke.index>ft?(Tt=Ke,Ke=null):Tt=Ke.sibling;var Ua=_e(ue,Ke,Dt.value,Ne);if(Ua===null){Ke===null&&(Ke=Tt);break}r&&Ke&&Ua.alternate===null&&i(ue,Ke),se=w(Ua,se,ft),Ot===null?Qe=Ua:Ot.sibling=Ua,Ot=Ua,Ke=Tt}if(Dt.done)return c(ue,Ke),bt&&Xe(ue,ft),Qe;if(Ke===null){for(;!Dt.done;ft++,Dt=ge.next())Dt=De(ue,Dt.value,Ne),Dt!==null&&(se=w(Dt,se,ft),Ot===null?Qe=Dt:Ot.sibling=Dt,Ot=Dt);return bt&&Xe(ue,ft),Qe}for(Ke=h(Ke);!Dt.done;ft++,Dt=ge.next())Dt=we(Ke,ue,ft,Dt.value,Ne),Dt!==null&&(r&&Dt.alternate!==null&&Ke.delete(Dt.key===null?ft:Dt.key),se=w(Dt,se,ft),Ot===null?Qe=Dt:Ot.sibling=Dt,Ot=Dt);return r&&Ke.forEach(function(sN){return i(ue,sN)}),bt&&Xe(ue,ft),Qe}function Ht(ue,se,ge,Ne){if(typeof ge=="object"&&ge!==null&&ge.type===k&&ge.key===null&&(ge=ge.props.children),typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case S:e:{for(var Qe=ge.key;se!==null;){if(se.key===Qe){if(Qe=ge.type,Qe===k){if(se.tag===7){c(ue,se.sibling),Ne=v(se,ge.props.children),Ne.return=ue,ue=Ne;break e}}else if(se.elementType===Qe||typeof Qe=="object"&&Qe!==null&&Qe.$$typeof===V&&Ro(Qe)===se.type){c(ue,se.sibling),Ne=v(se,ge.props),tu(Ne,ge),Ne.return=ue,ue=Ne;break e}c(ue,se);break}else i(ue,se);se=se.sibling}ge.type===k?(Ne=Cs(ge.props.children,ue.mode,Ne,ge.key),Ne.return=ue,ue=Ne):(Ne=No(ge.type,ge.key,ge.props,null,ue.mode,Ne),tu(Ne,ge),Ne.return=ue,ue=Ne)}return O(ue);case T:e:{for(Qe=ge.key;se!==null;){if(se.key===Qe)if(se.tag===4&&se.stateNode.containerInfo===ge.containerInfo&&se.stateNode.implementation===ge.implementation){c(ue,se.sibling),Ne=v(se,ge.children||[]),Ne.return=ue,ue=Ne;break e}else{c(ue,se);break}else i(ue,se);se=se.sibling}Ne=Kc(ge,ue.mode,Ne),Ne.return=ue,ue=Ne}return O(ue);case V:return ge=Ro(ge),Ht(ue,se,ge,Ne)}if(Se(ge))return qe(ue,se,ge,Ne);if(q(ge)){if(Qe=q(ge),typeof Qe!="function")throw Error(s(150));return ge=Qe.call(ge),nt(ue,se,ge,Ne)}if(typeof ge.then=="function")return Ht(ue,se,Xd(ge),Ne);if(ge.$$typeof===N)return Ht(ue,se,Zd(ue,ge),Ne);Jd(ue,ge)}return typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint"?(ge=""+ge,se!==null&&se.tag===6?(c(ue,se.sibling),Ne=v(se,ge),Ne.return=ue,ue=Ne):(c(ue,se),Ne=jl(ge,ue.mode,Ne),Ne.return=ue,ue=Ne),O(ue)):c(ue,se)}return function(ue,se,ge,Ne){try{eu=0;var Qe=Ht(ue,se,ge,Ne);return Rl=null,Qe}catch(Ke){if(Ke===Cl||Ke===Kd)throw Ke;var Ot=ur(29,Ke,null,ue.mode);return Ot.lanes=Ne,Ot.return=ue,Ot}finally{}}}var Bo=uv(!0),dv=uv(!1),Ea=!1;function pp(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function gp(r,i){r=r.updateQueue,i.updateQueue===r&&(i.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Ta(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function ka(r,i,c){var h=r.updateQueue;if(h===null)return null;if(h=h.shared,(Ct&2)!==0){var v=h.pending;return v===null?i.next=i:(i.next=v.next,v.next=i),h.pending=i,i=jo(r),wa(r,null,c),i}return ps(r,h,i,c),jo(r)}function nu(r,i,c){if(i=i.updateQueue,i!==null&&(i=i.shared,(c&4194048)!==0)){var h=i.lanes;h&=r.pendingLanes,c|=h,i.lanes=c,no(r,c)}}function bp(r,i){var c=r.updateQueue,h=r.alternate;if(h!==null&&(h=h.updateQueue,c===h)){var v=null,w=null;if(c=c.firstBaseUpdate,c!==null){do{var O={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};w===null?v=w=O:w=w.next=O,c=c.next}while(c!==null);w===null?v=w=i:w=w.next=i}else v=w=i;c={baseState:h.baseState,firstBaseUpdate:v,lastBaseUpdate:w,shared:h.shared,callbacks:h.callbacks},r.updateQueue=c;return}r=c.lastBaseUpdate,r===null?c.firstBaseUpdate=i:r.next=i,c.lastBaseUpdate=i}var yp=!1;function ru(){if(yp){var r=Ml;if(r!==null)throw r}}function iu(r,i,c,h){yp=!1;var v=r.updateQueue;Ea=!1;var w=v.firstBaseUpdate,O=v.lastBaseUpdate,z=v.shared.pending;if(z!==null){v.shared.pending=null;var ne=z,be=ne.next;ne.next=null,O===null?w=be:O.next=be,O=ne;var Ae=r.alternate;Ae!==null&&(Ae=Ae.updateQueue,z=Ae.lastBaseUpdate,z!==O&&(z===null?Ae.firstBaseUpdate=be:z.next=be,Ae.lastBaseUpdate=ne))}if(w!==null){var De=v.baseState;O=0,Ae=be=ne=null,z=w;do{var _e=z.lane&-536870913,we=_e!==z.lane;if(we?(Et&_e)===_e:(h&_e)===_e){_e!==0&&_e===Dl&&(yp=!0),Ae!==null&&(Ae=Ae.next={lane:0,tag:z.tag,payload:z.payload,callback:null,next:null});e:{var qe=r,nt=z;_e=i;var Ht=c;switch(nt.tag){case 1:if(qe=nt.payload,typeof qe=="function"){De=qe.call(Ht,De,_e);break e}De=qe;break e;case 3:qe.flags=qe.flags&-65537|128;case 0:if(qe=nt.payload,_e=typeof qe=="function"?qe.call(Ht,De,_e):qe,_e==null)break e;De=_({},De,_e);break e;case 2:Ea=!0}}_e=z.callback,_e!==null&&(r.flags|=64,we&&(r.flags|=8192),we=v.callbacks,we===null?v.callbacks=[_e]:we.push(_e))}else we={lane:_e,tag:z.tag,payload:z.payload,callback:z.callback,next:null},Ae===null?(be=Ae=we,ne=De):Ae=Ae.next=we,O|=_e;if(z=z.next,z===null){if(z=v.shared.pending,z===null)break;we=z,z=we.next,we.next=null,v.lastBaseUpdate=we,v.shared.pending=null}}while(!0);Ae===null&&(ne=De),v.baseState=ne,v.firstBaseUpdate=be,v.lastBaseUpdate=Ae,w===null&&(v.shared.lanes=0),Da|=O,r.lanes=O,r.memoizedState=De}}function hv(r,i){if(typeof r!="function")throw Error(s(191,r));r.call(i)}function fv(r,i){var c=r.callbacks;if(c!==null)for(r.callbacks=null,r=0;r<c.length;r++)hv(c[r],i)}var Ll=U(null),Qd=U(0);function mv(r,i){r=Fs,F(Qd,r),F(Ll,i),Fs=r|i.baseLanes}function vp(){F(Qd,Fs),F(Ll,Ll.current)}function _p(){Fs=Qd.current,$(Ll),$(Qd)}var Xr=U(null),Ti=null;function Aa(r){var i=r.alternate;F(An,An.current&1),F(Xr,r),Ti===null&&(i===null||Ll.current!==null||i.memoizedState!==null)&&(Ti=r)}function xp(r){F(An,An.current),F(Xr,r),Ti===null&&(Ti=r)}function pv(r){r.tag===22?(F(An,An.current),F(Xr,r),Ti===null&&(Ti=r)):ja()}function ja(){F(An,An.current),F(Xr,Xr.current)}function Jr(r){$(Xr),Ti===r&&(Ti=null),$(An)}var An=U(0);function eh(r){for(var i=r;i!==null;){if(i.tag===13){var c=i.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||A0(c)||j0(c)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Bs=0,ct=null,zt=null,Mn=null,th=!1,Bl=!1,Po=!1,nh=0,su=0,Pl=null,KA=0;function vn(){throw Error(s(321))}function wp(r,i){if(i===null)return!1;for(var c=0;c<i.length&&c<r.length;c++)if(!Gn(r[c],i[c]))return!1;return!0}function Sp(r,i,c,h,v,w){return Bs=w,ct=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,X.H=r===null||r.memoizedState===null?Jv:$p,Po=!1,w=c(h,v),Po=!1,Bl&&(w=bv(i,c,h,v)),gv(r),w}function gv(r){X.H=lu;var i=zt!==null&&zt.next!==null;if(Bs=0,Mn=zt=ct=null,th=!1,su=0,Pl=null,i)throw Error(s(300));r===null||Cn||(r=r.dependencies,r!==null&&qd(r)&&(Cn=!0))}function bv(r,i,c,h){ct=r;var v=0;do{if(Bl&&(Pl=null),su=0,Bl=!1,25<=v)throw Error(s(301));if(v+=1,Mn=zt=null,r.updateQueue!=null){var w=r.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}X.H=Qv,w=i(c,h)}while(Bl);return w}function WA(){var r=X.H,i=r.useState()[0];return i=typeof i.then=="function"?au(i):i,r=r.useState()[0],(zt!==null?zt.memoizedState:null)!==r&&(ct.flags|=1024),i}function Ep(){var r=nh!==0;return nh=0,r}function Tp(r,i,c){i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~c}function kp(r){if(th){for(r=r.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}th=!1}Bs=0,Mn=zt=ct=null,Bl=!1,su=nh=0,Pl=null}function xr(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mn===null?ct.memoizedState=Mn=r:Mn=Mn.next=r,Mn}function jn(){if(zt===null){var r=ct.alternate;r=r!==null?r.memoizedState:null}else r=zt.next;var i=Mn===null?ct.memoizedState:Mn.next;if(i!==null)Mn=i,zt=r;else{if(r===null)throw ct.alternate===null?Error(s(467)):Error(s(310));zt=r,r={memoizedState:zt.memoizedState,baseState:zt.baseState,baseQueue:zt.baseQueue,queue:zt.queue,next:null},Mn===null?ct.memoizedState=Mn=r:Mn=Mn.next=r}return Mn}function rh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function au(r){var i=su;return su+=1,Pl===null&&(Pl=[]),r=ov(Pl,r,i),i=ct,(Mn===null?i.memoizedState:Mn.next)===null&&(i=i.alternate,X.H=i===null||i.memoizedState===null?Jv:$p),r}function ih(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return au(r);if(r.$$typeof===N)return Jn(r)}throw Error(s(438,String(r)))}function Ap(r){var i=null,c=ct.updateQueue;if(c!==null&&(i=c.memoCache),i==null){var h=ct.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(i={data:h.data.map(function(v){return v.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),c===null&&(c=rh(),ct.updateQueue=c),c.memoCache=i,c=i.data[i.index],c===void 0)for(c=i.data[i.index]=Array(r),h=0;h<r;h++)c[h]=re;return i.index++,c}function Ps(r,i){return typeof i=="function"?i(r):i}function sh(r){var i=jn();return jp(i,zt,r)}function jp(r,i,c){var h=r.queue;if(h===null)throw Error(s(311));h.lastRenderedReducer=c;var v=r.baseQueue,w=h.pending;if(w!==null){if(v!==null){var O=v.next;v.next=w.next,w.next=O}i.baseQueue=v=w,h.pending=null}if(w=r.baseState,v===null)r.memoizedState=w;else{i=v.next;var z=O=null,ne=null,be=i,Ae=!1;do{var De=be.lane&-536870913;if(De!==be.lane?(Et&De)===De:(Bs&De)===De){var _e=be.revertLane;if(_e===0)ne!==null&&(ne=ne.next={lane:0,revertLane:0,gesture:null,action:be.action,hasEagerState:be.hasEagerState,eagerState:be.eagerState,next:null}),De===Dl&&(Ae=!0);else if((Bs&_e)===_e){be=be.next,_e===Dl&&(Ae=!0);continue}else De={lane:0,revertLane:be.revertLane,gesture:null,action:be.action,hasEagerState:be.hasEagerState,eagerState:be.eagerState,next:null},ne===null?(z=ne=De,O=w):ne=ne.next=De,ct.lanes|=_e,Da|=_e;De=be.action,Po&&c(w,De),w=be.hasEagerState?be.eagerState:c(w,De)}else _e={lane:De,revertLane:be.revertLane,gesture:be.gesture,action:be.action,hasEagerState:be.hasEagerState,eagerState:be.eagerState,next:null},ne===null?(z=ne=_e,O=w):ne=ne.next=_e,ct.lanes|=De,Da|=De;be=be.next}while(be!==null&&be!==i);if(ne===null?O=w:ne.next=z,!Gn(w,r.memoizedState)&&(Cn=!0,Ae&&(c=Ml,c!==null)))throw c;r.memoizedState=w,r.baseState=O,r.baseQueue=ne,h.lastRenderedState=w}return v===null&&(h.lanes=0),[r.memoizedState,h.dispatch]}function Np(r){var i=jn(),c=i.queue;if(c===null)throw Error(s(311));c.lastRenderedReducer=r;var h=c.dispatch,v=c.pending,w=i.memoizedState;if(v!==null){c.pending=null;var O=v=v.next;do w=r(w,O.action),O=O.next;while(O!==v);Gn(w,i.memoizedState)||(Cn=!0),i.memoizedState=w,i.baseQueue===null&&(i.baseState=w),c.lastRenderedState=w}return[w,h]}function yv(r,i,c){var h=ct,v=jn(),w=bt;if(w){if(c===void 0)throw Error(s(407));c=c()}else c=i();var O=!Gn((zt||v).memoizedState,c);if(O&&(v.memoizedState=c,Cn=!0),v=v.queue,Mp(xv.bind(null,h,v,r),[r]),v.getSnapshot!==i||O||Mn!==null&&Mn.memoizedState.tag&1){if(h.flags|=2048,$l(9,{destroy:void 0},_v.bind(null,h,v,c,i),null),Yt===null)throw Error(s(349));w||(Bs&127)!==0||vv(h,i,c)}return c}function vv(r,i,c){r.flags|=16384,r={getSnapshot:i,value:c},i=ct.updateQueue,i===null?(i=rh(),ct.updateQueue=i,i.stores=[r]):(c=i.stores,c===null?i.stores=[r]:c.push(r))}function _v(r,i,c,h){i.value=c,i.getSnapshot=h,wv(i)&&Sv(r)}function xv(r,i,c){return c(function(){wv(i)&&Sv(r)})}function wv(r){var i=r.getSnapshot;r=r.value;try{var c=i();return!Gn(r,c)}catch{return!0}}function Sv(r){var i=Si(r,2);i!==null&&zr(i,r,2)}function Op(r){var i=xr();if(typeof r=="function"){var c=r;if(r=c(),Po){gn(!0);try{c()}finally{gn(!1)}}}return i.memoizedState=i.baseState=r,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ps,lastRenderedState:r},i}function Ev(r,i,c,h){return r.baseState=c,jp(r,zt,typeof h=="function"?h:Ps)}function XA(r,i,c,h,v){if(lh(r))throw Error(s(485));if(r=i.action,r!==null){var w={payload:v,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(O){w.listeners.push(O)}};X.T!==null?c(!0):w.isTransition=!1,h(w),c=i.pending,c===null?(w.next=i.pending=w,Tv(i,w)):(w.next=c.next,i.pending=c.next=w)}}function Tv(r,i){var c=i.action,h=i.payload,v=r.state;if(i.isTransition){var w=X.T,O={};X.T=O;try{var z=c(v,h),ne=X.S;ne!==null&&ne(O,z),kv(r,i,z)}catch(be){Dp(r,i,be)}finally{w!==null&&O.types!==null&&(w.types=O.types),X.T=w}}else try{w=c(v,h),kv(r,i,w)}catch(be){Dp(r,i,be)}}function kv(r,i,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(h){Av(r,i,h)},function(h){return Dp(r,i,h)}):Av(r,i,c)}function Av(r,i,c){i.status="fulfilled",i.value=c,jv(i),r.state=c,i=r.pending,i!==null&&(c=i.next,c===i?r.pending=null:(c=c.next,i.next=c,Tv(r,c)))}function Dp(r,i,c){var h=r.pending;if(r.pending=null,h!==null){h=h.next;do i.status="rejected",i.reason=c,jv(i),i=i.next;while(i!==h)}r.action=null}function jv(r){r=r.listeners;for(var i=0;i<r.length;i++)(0,r[i])()}function Nv(r,i){return i}function Ov(r,i){if(bt){var c=Yt.formState;if(c!==null){e:{var h=ct;if(bt){if(Nt){t:{for(var v=Nt,w=Lr;v.nodeType!==8;){if(!w){v=null;break t}if(v=ki(v.nextSibling),v===null){v=null;break t}}w=v.data,v=w==="F!"||w==="F"?v:null}if(v){Nt=ki(v.nextSibling),h=v.data==="F!";break e}}bs(h)}h=!1}h&&(i=c[0])}}return c=xr(),c.memoizedState=c.baseState=i,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Nv,lastRenderedState:i},c.queue=h,c=Kv.bind(null,ct,h),h.dispatch=c,h=Op(!1),w=Pp.bind(null,ct,!1,h.queue),h=xr(),v={state:i,dispatch:null,action:r,pending:null},h.queue=v,c=XA.bind(null,ct,v,w,c),v.dispatch=c,h.memoizedState=r,[i,c,!1]}function Dv(r){var i=jn();return Mv(i,zt,r)}function Mv(r,i,c){if(i=jp(r,i,Nv)[0],r=sh(Ps)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var h=au(i)}catch(O){throw O===Cl?Kd:O}else h=i;i=jn();var v=i.queue,w=v.dispatch;return c!==i.memoizedState&&(ct.flags|=2048,$l(9,{destroy:void 0},JA.bind(null,v,c),null)),[h,w,r]}function JA(r,i){r.action=i}function Cv(r){var i=jn(),c=zt;if(c!==null)return Mv(i,c,r);jn(),i=i.memoizedState,c=jn();var h=c.queue.dispatch;return c.memoizedState=r,[i,h,!1]}function $l(r,i,c,h){return r={tag:r,create:c,deps:h,inst:i,next:null},i=ct.updateQueue,i===null&&(i=rh(),ct.updateQueue=i),c=i.lastEffect,c===null?i.lastEffect=r.next=r:(h=c.next,c.next=r,r.next=h,i.lastEffect=r),r}function Rv(){return jn().memoizedState}function ah(r,i,c,h){var v=xr();ct.flags|=r,v.memoizedState=$l(1|i,{destroy:void 0},c,h===void 0?null:h)}function oh(r,i,c,h){var v=jn();h=h===void 0?null:h;var w=v.memoizedState.inst;zt!==null&&h!==null&&wp(h,zt.memoizedState.deps)?v.memoizedState=$l(i,w,c,h):(ct.flags|=r,v.memoizedState=$l(1|i,w,c,h))}function Lv(r,i){ah(8390656,8,r,i)}function Mp(r,i){oh(2048,8,r,i)}function QA(r){ct.flags|=4;var i=ct.updateQueue;if(i===null)i=rh(),ct.updateQueue=i,i.events=[r];else{var c=i.events;c===null?i.events=[r]:c.push(r)}}function Bv(r){var i=jn().memoizedState;return QA({ref:i,nextImpl:r}),function(){if((Ct&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}function Pv(r,i){return oh(4,2,r,i)}function $v(r,i){return oh(4,4,r,i)}function Iv(r,i){if(typeof i=="function"){r=r();var c=i(r);return function(){typeof c=="function"?c():i(null)}}if(i!=null)return r=r(),i.current=r,function(){i.current=null}}function zv(r,i,c){c=c!=null?c.concat([r]):null,oh(4,4,Iv.bind(null,i,r),c)}function Cp(){}function Uv(r,i){var c=jn();i=i===void 0?null:i;var h=c.memoizedState;return i!==null&&wp(i,h[1])?h[0]:(c.memoizedState=[r,i],r)}function Hv(r,i){var c=jn();i=i===void 0?null:i;var h=c.memoizedState;if(i!==null&&wp(i,h[1]))return h[0];if(h=r(),Po){gn(!0);try{r()}finally{gn(!1)}}return c.memoizedState=[h,i],h}function Rp(r,i,c){return c===void 0||(Bs&1073741824)!==0&&(Et&261930)===0?r.memoizedState=i:(r.memoizedState=c,r=G_(),ct.lanes|=r,Da|=r,c)}function Gv(r,i,c,h){return Gn(c,i)?c:Ll.current!==null?(r=Rp(r,c,h),Gn(r,i)||(Cn=!0),r):(Bs&42)===0||(Bs&1073741824)!==0&&(Et&261930)===0?(Cn=!0,r.memoizedState=c):(r=G_(),ct.lanes|=r,Da|=r,i)}function Fv(r,i,c,h,v){var w=ae.p;ae.p=w!==0&&8>w?w:8;var O=X.T,z={};X.T=z,Pp(r,!1,i,c);try{var ne=v(),be=X.S;if(be!==null&&be(z,ne),ne!==null&&typeof ne=="object"&&typeof ne.then=="function"){var Ae=VA(ne,h);ou(r,i,Ae,ti(r))}else ou(r,i,h,ti(r))}catch(De){ou(r,i,{then:function(){},status:"rejected",reason:De},ti())}finally{ae.p=w,O!==null&&z.types!==null&&(O.types=z.types),X.T=O}}function ej(){}function Lp(r,i,c,h){if(r.tag!==5)throw Error(s(476));var v=Yv(r).queue;Fv(r,v,i,J,c===null?ej:function(){return qv(r),c(h)})}function Yv(r){var i=r.memoizedState;if(i!==null)return i;i={memoizedState:J,baseState:J,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ps,lastRenderedState:J},next:null};var c={};return i.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ps,lastRenderedState:c},next:null},r.memoizedState=i,r=r.alternate,r!==null&&(r.memoizedState=i),i}function qv(r){var i=Yv(r);i.next===null&&(i=r.alternate.memoizedState),ou(r,i.next.queue,{},ti())}function Bp(){return Jn(Eu)}function Zv(){return jn().memoizedState}function Vv(){return jn().memoizedState}function tj(r){for(var i=r.return;i!==null;){switch(i.tag){case 24:case 3:var c=ti();r=Ta(c);var h=ka(i,r,c);h!==null&&(zr(h,i,c),nu(h,i,c)),i={cache:dp()},r.payload=i;return}i=i.return}}function nj(r,i,c){var h=ti();c={lane:h,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},lh(r)?Wv(i,c):(c=qc(r,i,c,h),c!==null&&(zr(c,r,h),Xv(c,i,h)))}function Kv(r,i,c){var h=ti();ou(r,i,c,h)}function ou(r,i,c,h){var v={lane:h,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(lh(r))Wv(i,v);else{var w=r.alternate;if(r.lanes===0&&(w===null||w.lanes===0)&&(w=i.lastRenderedReducer,w!==null))try{var O=i.lastRenderedState,z=w(O,c);if(v.hasEagerState=!0,v.eagerState=z,Gn(z,O))return ps(r,i,v,0),Yt===null&&Ao(),!1}catch{}finally{}if(c=qc(r,i,v,h),c!==null)return zr(c,r,h),Xv(c,i,h),!0}return!1}function Pp(r,i,c,h){if(h={lane:2,revertLane:p0(),gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},lh(r)){if(i)throw Error(s(479))}else i=qc(r,c,h,2),i!==null&&zr(i,r,2)}function lh(r){var i=r.alternate;return r===ct||i!==null&&i===ct}function Wv(r,i){Bl=th=!0;var c=r.pending;c===null?i.next=i:(i.next=c.next,c.next=i),r.pending=i}function Xv(r,i,c){if((c&4194048)!==0){var h=i.lanes;h&=r.pendingLanes,c|=h,i.lanes=c,no(r,c)}}var lu={readContext:Jn,use:ih,useCallback:vn,useContext:vn,useEffect:vn,useImperativeHandle:vn,useLayoutEffect:vn,useInsertionEffect:vn,useMemo:vn,useReducer:vn,useRef:vn,useState:vn,useDebugValue:vn,useDeferredValue:vn,useTransition:vn,useSyncExternalStore:vn,useId:vn,useHostTransitionStatus:vn,useFormState:vn,useActionState:vn,useOptimistic:vn,useMemoCache:vn,useCacheRefresh:vn};lu.useEffectEvent=vn;var Jv={readContext:Jn,use:ih,useCallback:function(r,i){return xr().memoizedState=[r,i===void 0?null:i],r},useContext:Jn,useEffect:Lv,useImperativeHandle:function(r,i,c){c=c!=null?c.concat([r]):null,ah(4194308,4,Iv.bind(null,i,r),c)},useLayoutEffect:function(r,i){return ah(4194308,4,r,i)},useInsertionEffect:function(r,i){ah(4,2,r,i)},useMemo:function(r,i){var c=xr();i=i===void 0?null:i;var h=r();if(Po){gn(!0);try{r()}finally{gn(!1)}}return c.memoizedState=[h,i],h},useReducer:function(r,i,c){var h=xr();if(c!==void 0){var v=c(i);if(Po){gn(!0);try{c(i)}finally{gn(!1)}}}else v=i;return h.memoizedState=h.baseState=v,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:v},h.queue=r,r=r.dispatch=nj.bind(null,ct,r),[h.memoizedState,r]},useRef:function(r){var i=xr();return r={current:r},i.memoizedState=r},useState:function(r){r=Op(r);var i=r.queue,c=Kv.bind(null,ct,i);return i.dispatch=c,[r.memoizedState,c]},useDebugValue:Cp,useDeferredValue:function(r,i){var c=xr();return Rp(c,r,i)},useTransition:function(){var r=Op(!1);return r=Fv.bind(null,ct,r.queue,!0,!1),xr().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,i,c){var h=ct,v=xr();if(bt){if(c===void 0)throw Error(s(407));c=c()}else{if(c=i(),Yt===null)throw Error(s(349));(Et&127)!==0||vv(h,i,c)}v.memoizedState=c;var w={value:c,getSnapshot:i};return v.queue=w,Lv(xv.bind(null,h,w,r),[r]),h.flags|=2048,$l(9,{destroy:void 0},_v.bind(null,h,w,c,i),null),c},useId:function(){var r=xr(),i=Yt.identifierPrefix;if(bt){var c=ze,h=Oe;c=(h&~(1<<32-dn(h)-1)).toString(32)+c,i="_"+i+"R_"+c,c=nh++,0<c&&(i+="H"+c.toString(32)),i+="_"}else c=KA++,i="_"+i+"r_"+c.toString(32)+"_";return r.memoizedState=i},useHostTransitionStatus:Bp,useFormState:Ov,useActionState:Ov,useOptimistic:function(r){var i=xr();i.memoizedState=i.baseState=r;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=c,i=Pp.bind(null,ct,!0,c),c.dispatch=i,[r,i]},useMemoCache:Ap,useCacheRefresh:function(){return xr().memoizedState=tj.bind(null,ct)},useEffectEvent:function(r){var i=xr(),c={impl:r};return i.memoizedState=c,function(){if((Ct&2)!==0)throw Error(s(440));return c.impl.apply(void 0,arguments)}}},$p={readContext:Jn,use:ih,useCallback:Uv,useContext:Jn,useEffect:Mp,useImperativeHandle:zv,useInsertionEffect:Pv,useLayoutEffect:$v,useMemo:Hv,useReducer:sh,useRef:Rv,useState:function(){return sh(Ps)},useDebugValue:Cp,useDeferredValue:function(r,i){var c=jn();return Gv(c,zt.memoizedState,r,i)},useTransition:function(){var r=sh(Ps)[0],i=jn().memoizedState;return[typeof r=="boolean"?r:au(r),i]},useSyncExternalStore:yv,useId:Zv,useHostTransitionStatus:Bp,useFormState:Dv,useActionState:Dv,useOptimistic:function(r,i){var c=jn();return Ev(c,zt,r,i)},useMemoCache:Ap,useCacheRefresh:Vv};$p.useEffectEvent=Bv;var Qv={readContext:Jn,use:ih,useCallback:Uv,useContext:Jn,useEffect:Mp,useImperativeHandle:zv,useInsertionEffect:Pv,useLayoutEffect:$v,useMemo:Hv,useReducer:Np,useRef:Rv,useState:function(){return Np(Ps)},useDebugValue:Cp,useDeferredValue:function(r,i){var c=jn();return zt===null?Rp(c,r,i):Gv(c,zt.memoizedState,r,i)},useTransition:function(){var r=Np(Ps)[0],i=jn().memoizedState;return[typeof r=="boolean"?r:au(r),i]},useSyncExternalStore:yv,useId:Zv,useHostTransitionStatus:Bp,useFormState:Cv,useActionState:Cv,useOptimistic:function(r,i){var c=jn();return zt!==null?Ev(c,zt,r,i):(c.baseState=r,[r,c.queue.dispatch])},useMemoCache:Ap,useCacheRefresh:Vv};Qv.useEffectEvent=Bv;function Ip(r,i,c,h){i=r.memoizedState,c=c(h,i),c=c==null?i:_({},i,c),r.memoizedState=c,r.lanes===0&&(r.updateQueue.baseState=c)}var zp={enqueueSetState:function(r,i,c){r=r._reactInternals;var h=ti(),v=Ta(h);v.payload=i,c!=null&&(v.callback=c),i=ka(r,v,h),i!==null&&(zr(i,r,h),nu(i,r,h))},enqueueReplaceState:function(r,i,c){r=r._reactInternals;var h=ti(),v=Ta(h);v.tag=1,v.payload=i,c!=null&&(v.callback=c),i=ka(r,v,h),i!==null&&(zr(i,r,h),nu(i,r,h))},enqueueForceUpdate:function(r,i){r=r._reactInternals;var c=ti(),h=Ta(c);h.tag=2,i!=null&&(h.callback=i),i=ka(r,h,c),i!==null&&(zr(i,r,c),nu(i,r,c))}};function e_(r,i,c,h,v,w,O){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(h,w,O):i.prototype&&i.prototype.isPureReactComponent?!ya(c,h)||!ya(v,w):!0}function t_(r,i,c,h){r=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(c,h),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(c,h),i.state!==r&&zp.enqueueReplaceState(i,i.state,null)}function $o(r,i){var c=i;if("ref"in i){c={};for(var h in i)h!=="ref"&&(c[h]=i[h])}if(r=r.defaultProps){c===i&&(c=_({},c));for(var v in r)c[v]===void 0&&(c[v]=r[v])}return c}function n_(r){ko(r)}function r_(r){console.error(r)}function i_(r){ko(r)}function ch(r,i){try{var c=r.onUncaughtError;c(i.value,{componentStack:i.stack})}catch(h){setTimeout(function(){throw h})}}function s_(r,i,c){try{var h=r.onCaughtError;h(c.value,{componentStack:c.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function Up(r,i,c){return c=Ta(c),c.tag=3,c.payload={element:null},c.callback=function(){ch(r,i)},c}function a_(r){return r=Ta(r),r.tag=3,r}function o_(r,i,c,h){var v=c.type.getDerivedStateFromError;if(typeof v=="function"){var w=h.value;r.payload=function(){return v(w)},r.callback=function(){s_(i,c,h)}}var O=c.stateNode;O!==null&&typeof O.componentDidCatch=="function"&&(r.callback=function(){s_(i,c,h),typeof v!="function"&&(Ma===null?Ma=new Set([this]):Ma.add(this));var z=h.stack;this.componentDidCatch(h.value,{componentStack:z!==null?z:""})})}function rj(r,i,c,h,v){if(c.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(i=c.alternate,i!==null&&Ol(i,c,v,!0),c=Xr.current,c!==null){switch(c.tag){case 31:case 13:return Ti===null?xh():c.alternate===null&&_n===0&&(_n=3),c.flags&=-257,c.flags|=65536,c.lanes=v,h===Wd?c.flags|=16384:(i=c.updateQueue,i===null?c.updateQueue=new Set([h]):i.add(h),h0(r,h,v)),!1;case 22:return c.flags|=65536,h===Wd?c.flags|=16384:(i=c.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([h])},c.updateQueue=i):(c=i.retryQueue,c===null?i.retryQueue=new Set([h]):c.add(h)),h0(r,h,v)),!1}throw Error(s(435,c.tag))}return h0(r,h,v),xh(),!1}if(bt)return i=Xr.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=v,h!==Nl&&(r=Error(s(422),{cause:h}),Oo(d(r,c)))):(h!==Nl&&(i=Error(s(423),{cause:h}),Oo(d(i,c))),r=r.current.alternate,r.flags|=65536,v&=-v,r.lanes|=v,h=d(h,c),v=Up(r.stateNode,h,v),bp(r,v),_n!==4&&(_n=2)),!1;var w=Error(s(520),{cause:h});if(w=d(w,c),gu===null?gu=[w]:gu.push(w),_n!==4&&(_n=2),i===null)return!0;h=d(h,c),c=i;do{switch(c.tag){case 3:return c.flags|=65536,r=v&-v,c.lanes|=r,r=Up(c.stateNode,h,r),bp(c,r),!1;case 1:if(i=c.type,w=c.stateNode,(c.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Ma===null||!Ma.has(w))))return c.flags|=65536,v&=-v,c.lanes|=v,v=a_(v),o_(v,r,c,h),bp(c,v),!1}c=c.return}while(c!==null);return!1}var Hp=Error(s(461)),Cn=!1;function Qn(r,i,c,h){i.child=r===null?dv(i,null,c,h):Bo(i,r.child,c,h)}function l_(r,i,c,h,v){c=c.render;var w=i.ref;if("ref"in h){var O={};for(var z in h)z!=="ref"&&(O[z]=h[z])}else O=h;return Mo(i),h=Sp(r,i,c,O,w,v),z=Ep(),r!==null&&!Cn?(Tp(r,i,v),$s(r,i,v)):(bt&&z&&zn(i),i.flags|=1,Qn(r,i,h,v),i.child)}function c_(r,i,c,h,v){if(r===null){var w=c.type;return typeof w=="function"&&!Al(w)&&w.defaultProps===void 0&&c.compare===null?(i.tag=15,i.type=w,u_(r,i,w,h,v)):(r=No(c.type,null,h,i,i.mode,v),r.ref=i.ref,r.return=i,i.child=r)}if(w=r.child,!Wp(r,v)){var O=w.memoizedProps;if(c=c.compare,c=c!==null?c:ya,c(O,h)&&r.ref===i.ref)return $s(r,i,v)}return i.flags|=1,r=Ei(w,h),r.ref=i.ref,r.return=i,i.child=r}function u_(r,i,c,h,v){if(r!==null){var w=r.memoizedProps;if(ya(w,h)&&r.ref===i.ref)if(Cn=!1,i.pendingProps=h=w,Wp(r,v))(r.flags&131072)!==0&&(Cn=!0);else return i.lanes=r.lanes,$s(r,i,v)}return Gp(r,i,c,h,v)}function d_(r,i,c,h){var v=h.children,w=r!==null?r.memoizedState:null;if(r===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.mode==="hidden"){if((i.flags&128)!==0){if(w=w!==null?w.baseLanes|c:c,r!==null){for(h=i.child=r.child,v=0;h!==null;)v=v|h.lanes|h.childLanes,h=h.sibling;h=v&~w}else h=0,i.child=null;return h_(r,i,w,c,h)}if((c&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},r!==null&&Vd(i,w!==null?w.cachePool:null),w!==null?mv(i,w):vp(),pv(i);else return h=i.lanes=536870912,h_(r,i,w!==null?w.baseLanes|c:c,c,h)}else w!==null?(Vd(i,w.cachePool),mv(i,w),ja(),i.memoizedState=null):(r!==null&&Vd(i,null),vp(),ja());return Qn(r,i,v,c),i.child}function cu(r,i){return r!==null&&r.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function h_(r,i,c,h,v){var w=fp();return w=w===null?null:{parent:Dn._currentValue,pool:w},i.memoizedState={baseLanes:c,cachePool:w},r!==null&&Vd(i,null),vp(),pv(i),r!==null&&Ol(r,i,h,!0),i.childLanes=v,null}function uh(r,i){return i=hh({mode:i.mode,children:i.children},r.mode),i.ref=r.ref,r.child=i,i.return=r,i}function f_(r,i,c){return Bo(i,r.child,null,c),r=uh(i,i.pendingProps),r.flags|=2,Jr(i),i.memoizedState=null,r}function ij(r,i,c){var h=i.pendingProps,v=(i.flags&128)!==0;if(i.flags&=-129,r===null){if(bt){if(h.mode==="hidden")return r=uh(i,h),i.lanes=536870912,cu(null,r);if(xp(i),(r=Nt)?(r=Tx(r,Lr),r=r!==null&&r.data==="&"?r:null,r!==null&&(i.memoizedState={dehydrated:r,treeContext:ve!==null?{id:Oe,overflow:ze}:null,retryLane:536870912,hydrationErrors:null},c=Vc(r),c.return=i,i.child=c,jt=i,Nt=null)):r=null,r===null)throw bs(i);return i.lanes=536870912,null}return uh(i,h)}var w=r.memoizedState;if(w!==null){var O=w.dehydrated;if(xp(i),v)if(i.flags&256)i.flags&=-257,i=f_(r,i,c);else if(i.memoizedState!==null)i.child=r.child,i.flags|=128,i=null;else throw Error(s(558));else if(Cn||Ol(r,i,c,!1),v=(c&r.childLanes)!==0,Cn||v){if(h=Yt,h!==null&&(O=ro(h,c),O!==0&&O!==w.retryLane))throw w.retryLane=O,Si(r,O),zr(h,r,O),Hp;xh(),i=f_(r,i,c)}else r=w.treeContext,Nt=ki(O.nextSibling),jt=i,bt=!0,gs=null,Lr=!1,r!==null&&_r(i,r),i=uh(i,h),i.flags|=4096;return i}return r=Ei(r.child,{mode:h.mode,children:h.children}),r.ref=i.ref,i.child=r,r.return=i,r}function dh(r,i){var c=i.ref;if(c===null)r!==null&&r.ref!==null&&(i.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(s(284));(r===null||r.ref!==c)&&(i.flags|=4194816)}}function Gp(r,i,c,h,v){return Mo(i),c=Sp(r,i,c,h,void 0,v),h=Ep(),r!==null&&!Cn?(Tp(r,i,v),$s(r,i,v)):(bt&&h&&zn(i),i.flags|=1,Qn(r,i,c,v),i.child)}function m_(r,i,c,h,v,w){return Mo(i),i.updateQueue=null,c=bv(i,h,c,v),gv(r),h=Ep(),r!==null&&!Cn?(Tp(r,i,w),$s(r,i,w)):(bt&&h&&zn(i),i.flags|=1,Qn(r,i,c,w),i.child)}function p_(r,i,c,h,v){if(Mo(i),i.stateNode===null){var w=Ms,O=c.contextType;typeof O=="object"&&O!==null&&(w=Jn(O)),w=new c(h,w),i.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=zp,i.stateNode=w,w._reactInternals=i,w=i.stateNode,w.props=h,w.state=i.memoizedState,w.refs={},pp(i),O=c.contextType,w.context=typeof O=="object"&&O!==null?Jn(O):Ms,w.state=i.memoizedState,O=c.getDerivedStateFromProps,typeof O=="function"&&(Ip(i,c,O,h),w.state=i.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(O=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),O!==w.state&&zp.enqueueReplaceState(w,w.state,null),iu(i,h,w,v),ru(),w.state=i.memoizedState),typeof w.componentDidMount=="function"&&(i.flags|=4194308),h=!0}else if(r===null){w=i.stateNode;var z=i.memoizedProps,ne=$o(c,z);w.props=ne;var be=w.context,Ae=c.contextType;O=Ms,typeof Ae=="object"&&Ae!==null&&(O=Jn(Ae));var De=c.getDerivedStateFromProps;Ae=typeof De=="function"||typeof w.getSnapshotBeforeUpdate=="function",z=i.pendingProps!==z,Ae||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(z||be!==O)&&t_(i,w,h,O),Ea=!1;var _e=i.memoizedState;w.state=_e,iu(i,h,w,v),ru(),be=i.memoizedState,z||_e!==be||Ea?(typeof De=="function"&&(Ip(i,c,De,h),be=i.memoizedState),(ne=Ea||e_(i,c,ne,h,_e,be,O))?(Ae||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(i.flags|=4194308)):(typeof w.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=h,i.memoizedState=be),w.props=h,w.state=be,w.context=O,h=ne):(typeof w.componentDidMount=="function"&&(i.flags|=4194308),h=!1)}else{w=i.stateNode,gp(r,i),O=i.memoizedProps,Ae=$o(c,O),w.props=Ae,De=i.pendingProps,_e=w.context,be=c.contextType,ne=Ms,typeof be=="object"&&be!==null&&(ne=Jn(be)),z=c.getDerivedStateFromProps,(be=typeof z=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(O!==De||_e!==ne)&&t_(i,w,h,ne),Ea=!1,_e=i.memoizedState,w.state=_e,iu(i,h,w,v),ru();var we=i.memoizedState;O!==De||_e!==we||Ea||r!==null&&r.dependencies!==null&&qd(r.dependencies)?(typeof z=="function"&&(Ip(i,c,z,h),we=i.memoizedState),(Ae=Ea||e_(i,c,Ae,h,_e,we,ne)||r!==null&&r.dependencies!==null&&qd(r.dependencies))?(be||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(h,we,ne),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(h,we,ne)),typeof w.componentDidUpdate=="function"&&(i.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof w.componentDidUpdate!="function"||O===r.memoizedProps&&_e===r.memoizedState||(i.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||O===r.memoizedProps&&_e===r.memoizedState||(i.flags|=1024),i.memoizedProps=h,i.memoizedState=we),w.props=h,w.state=we,w.context=ne,h=Ae):(typeof w.componentDidUpdate!="function"||O===r.memoizedProps&&_e===r.memoizedState||(i.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||O===r.memoizedProps&&_e===r.memoizedState||(i.flags|=1024),h=!1)}return w=h,dh(r,i),h=(i.flags&128)!==0,w||h?(w=i.stateNode,c=h&&typeof c.getDerivedStateFromError!="function"?null:w.render(),i.flags|=1,r!==null&&h?(i.child=Bo(i,r.child,null,v),i.child=Bo(i,null,c,v)):Qn(r,i,c,v),i.memoizedState=w.state,r=i.child):r=$s(r,i,v),r}function g_(r,i,c,h){return Rs(),i.flags|=256,Qn(r,i,c,h),i.child}var Fp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Yp(r){return{baseLanes:r,cachePool:sv()}}function qp(r,i,c){return r=r!==null?r.childLanes&~c:0,i&&(r|=ei),r}function b_(r,i,c){var h=i.pendingProps,v=!1,w=(i.flags&128)!==0,O;if((O=w)||(O=r!==null&&r.memoizedState===null?!1:(An.current&2)!==0),O&&(v=!0,i.flags&=-129),O=(i.flags&32)!==0,i.flags&=-33,r===null){if(bt){if(v?Aa(i):ja(),(r=Nt)?(r=Tx(r,Lr),r=r!==null&&r.data!=="&"?r:null,r!==null&&(i.memoizedState={dehydrated:r,treeContext:ve!==null?{id:Oe,overflow:ze}:null,retryLane:536870912,hydrationErrors:null},c=Vc(r),c.return=i,i.child=c,jt=i,Nt=null)):r=null,r===null)throw bs(i);return j0(r)?i.lanes=32:i.lanes=536870912,null}var z=h.children;return h=h.fallback,v?(ja(),v=i.mode,z=hh({mode:"hidden",children:z},v),h=Cs(h,v,c,null),z.return=i,h.return=i,z.sibling=h,i.child=z,h=i.child,h.memoizedState=Yp(c),h.childLanes=qp(r,O,c),i.memoizedState=Fp,cu(null,h)):(Aa(i),Zp(i,z))}var ne=r.memoizedState;if(ne!==null&&(z=ne.dehydrated,z!==null)){if(w)i.flags&256?(Aa(i),i.flags&=-257,i=Vp(r,i,c)):i.memoizedState!==null?(ja(),i.child=r.child,i.flags|=128,i=null):(ja(),z=h.fallback,v=i.mode,h=hh({mode:"visible",children:h.children},v),z=Cs(z,v,c,null),z.flags|=2,h.return=i,z.return=i,h.sibling=z,i.child=h,Bo(i,r.child,null,c),h=i.child,h.memoizedState=Yp(c),h.childLanes=qp(r,O,c),i.memoizedState=Fp,i=cu(null,h));else if(Aa(i),j0(z)){if(O=z.nextSibling&&z.nextSibling.dataset,O)var be=O.dgst;O=be,h=Error(s(419)),h.stack="",h.digest=O,Oo({value:h,source:null,stack:null}),i=Vp(r,i,c)}else if(Cn||Ol(r,i,c,!1),O=(c&r.childLanes)!==0,Cn||O){if(O=Yt,O!==null&&(h=ro(O,c),h!==0&&h!==ne.retryLane))throw ne.retryLane=h,Si(r,h),zr(O,r,h),Hp;A0(z)||xh(),i=Vp(r,i,c)}else A0(z)?(i.flags|=192,i.child=r.child,i=null):(r=ne.treeContext,Nt=ki(z.nextSibling),jt=i,bt=!0,gs=null,Lr=!1,r!==null&&_r(i,r),i=Zp(i,h.children),i.flags|=4096);return i}return v?(ja(),z=h.fallback,v=i.mode,ne=r.child,be=ne.sibling,h=Ei(ne,{mode:"hidden",children:h.children}),h.subtreeFlags=ne.subtreeFlags&65011712,be!==null?z=Ei(be,z):(z=Cs(z,v,c,null),z.flags|=2),z.return=i,h.return=i,h.sibling=z,i.child=h,cu(null,h),h=i.child,z=r.child.memoizedState,z===null?z=Yp(c):(v=z.cachePool,v!==null?(ne=Dn._currentValue,v=v.parent!==ne?{parent:ne,pool:ne}:v):v=sv(),z={baseLanes:z.baseLanes|c,cachePool:v}),h.memoizedState=z,h.childLanes=qp(r,O,c),i.memoizedState=Fp,cu(r.child,h)):(Aa(i),c=r.child,r=c.sibling,c=Ei(c,{mode:"visible",children:h.children}),c.return=i,c.sibling=null,r!==null&&(O=i.deletions,O===null?(i.deletions=[r],i.flags|=16):O.push(r)),i.child=c,i.memoizedState=null,c)}function Zp(r,i){return i=hh({mode:"visible",children:i},r.mode),i.return=r,r.child=i}function hh(r,i){return r=ur(22,r,null,i),r.lanes=0,r}function Vp(r,i,c){return Bo(i,r.child,null,c),r=Zp(i,i.pendingProps.children),r.flags|=2,i.memoizedState=null,r}function y_(r,i,c){r.lanes|=i;var h=r.alternate;h!==null&&(h.lanes|=i),cp(r.return,i,c)}function Kp(r,i,c,h,v,w){var O=r.memoizedState;O===null?r.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:h,tail:c,tailMode:v,treeForkCount:w}:(O.isBackwards=i,O.rendering=null,O.renderingStartTime=0,O.last=h,O.tail=c,O.tailMode=v,O.treeForkCount=w)}function v_(r,i,c){var h=i.pendingProps,v=h.revealOrder,w=h.tail;h=h.children;var O=An.current,z=(O&2)!==0;if(z?(O=O&1|2,i.flags|=128):O&=1,F(An,O),Qn(r,i,h,c),h=bt?I:0,!z&&r!==null&&(r.flags&128)!==0)e:for(r=i.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&y_(r,c,i);else if(r.tag===19)y_(r,c,i);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(v){case"forwards":for(c=i.child,v=null;c!==null;)r=c.alternate,r!==null&&eh(r)===null&&(v=c),c=c.sibling;c=v,c===null?(v=i.child,i.child=null):(v=c.sibling,c.sibling=null),Kp(i,!1,v,c,w,h);break;case"backwards":case"unstable_legacy-backwards":for(c=null,v=i.child,i.child=null;v!==null;){if(r=v.alternate,r!==null&&eh(r)===null){i.child=v;break}r=v.sibling,v.sibling=c,c=v,v=r}Kp(i,!0,c,null,w,h);break;case"together":Kp(i,!1,null,null,void 0,h);break;default:i.memoizedState=null}return i.child}function $s(r,i,c){if(r!==null&&(i.dependencies=r.dependencies),Da|=i.lanes,(c&i.childLanes)===0)if(r!==null){if(Ol(r,i,c,!1),(c&i.childLanes)===0)return null}else return null;if(r!==null&&i.child!==r.child)throw Error(s(153));if(i.child!==null){for(r=i.child,c=Ei(r,r.pendingProps),i.child=c,c.return=i;r.sibling!==null;)r=r.sibling,c=c.sibling=Ei(r,r.pendingProps),c.return=i;c.sibling=null}return i.child}function Wp(r,i){return(r.lanes&i)!==0?!0:(r=r.dependencies,!!(r!==null&&qd(r)))}function sj(r,i,c){switch(i.tag){case 3:fe(i,i.stateNode.containerInfo),Sa(i,Dn,r.memoizedState.cache),Rs();break;case 27:case 5:xe(i);break;case 4:fe(i,i.stateNode.containerInfo);break;case 10:Sa(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,xp(i),null;break;case 13:var h=i.memoizedState;if(h!==null)return h.dehydrated!==null?(Aa(i),i.flags|=128,null):(c&i.child.childLanes)!==0?b_(r,i,c):(Aa(i),r=$s(r,i,c),r!==null?r.sibling:null);Aa(i);break;case 19:var v=(r.flags&128)!==0;if(h=(c&i.childLanes)!==0,h||(Ol(r,i,c,!1),h=(c&i.childLanes)!==0),v){if(h)return v_(r,i,c);i.flags|=128}if(v=i.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),F(An,An.current),h)break;return null;case 22:return i.lanes=0,d_(r,i,c,i.pendingProps);case 24:Sa(i,Dn,r.memoizedState.cache)}return $s(r,i,c)}function __(r,i,c){if(r!==null)if(r.memoizedProps!==i.pendingProps)Cn=!0;else{if(!Wp(r,c)&&(i.flags&128)===0)return Cn=!1,sj(r,i,c);Cn=(r.flags&131072)!==0}else Cn=!1,bt&&(i.flags&1048576)!==0&&ht(i,I,i.index);switch(i.lanes=0,i.tag){case 16:e:{var h=i.pendingProps;if(r=Ro(i.elementType),i.type=r,typeof r=="function")Al(r)?(h=$o(r,h),i.tag=1,i=p_(null,i,r,h,c)):(i.tag=0,i=Gp(null,i,r,h,c));else{if(r!=null){var v=r.$$typeof;if(v===D){i.tag=11,i=l_(null,i,r,h,c);break e}else if(v===H){i.tag=14,i=c_(null,i,r,h,c);break e}}throw i=oe(r)||r,Error(s(306,i,""))}}return i;case 0:return Gp(r,i,i.type,i.pendingProps,c);case 1:return h=i.type,v=$o(h,i.pendingProps),p_(r,i,h,v,c);case 3:e:{if(fe(i,i.stateNode.containerInfo),r===null)throw Error(s(387));h=i.pendingProps;var w=i.memoizedState;v=w.element,gp(r,i),iu(i,h,null,c);var O=i.memoizedState;if(h=O.cache,Sa(i,Dn,h),h!==w.cache&&up(i,[Dn],c,!0),ru(),h=O.element,w.isDehydrated)if(w={element:h,isDehydrated:!1,cache:O.cache},i.updateQueue.baseState=w,i.memoizedState=w,i.flags&256){i=g_(r,i,h,c);break e}else if(h!==v){v=d(Error(s(424)),i),Oo(v),i=g_(r,i,h,c);break e}else{switch(r=i.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(Nt=ki(r.firstChild),jt=i,bt=!0,gs=null,Lr=!0,c=dv(i,null,h,c),i.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(Rs(),h===v){i=$s(r,i,c);break e}Qn(r,i,h,c)}i=i.child}return i;case 26:return dh(r,i),r===null?(c=Dx(i.type,null,i.pendingProps,null))?i.memoizedState=c:bt||(c=i.type,r=i.pendingProps,h=jh(Y.current).createElement(c),h[rn]=i,h[kn]=r,er(h,c,r),wt(h),i.stateNode=h):i.memoizedState=Dx(i.type,r.memoizedProps,i.pendingProps,r.memoizedState),null;case 27:return xe(i),r===null&&bt&&(h=i.stateNode=jx(i.type,i.pendingProps,Y.current),jt=i,Lr=!0,v=Nt,Ba(i.type)?(N0=v,Nt=ki(h.firstChild)):Nt=v),Qn(r,i,i.pendingProps.children,c),dh(r,i),r===null&&(i.flags|=4194304),i.child;case 5:return r===null&&bt&&((v=h=Nt)&&(h=Lj(h,i.type,i.pendingProps,Lr),h!==null?(i.stateNode=h,jt=i,Nt=ki(h.firstChild),Lr=!1,v=!0):v=!1),v||bs(i)),xe(i),v=i.type,w=i.pendingProps,O=r!==null?r.memoizedProps:null,h=w.children,E0(v,w)?h=null:O!==null&&E0(v,O)&&(i.flags|=32),i.memoizedState!==null&&(v=Sp(r,i,WA,null,null,c),Eu._currentValue=v),dh(r,i),Qn(r,i,h,c),i.child;case 6:return r===null&&bt&&((r=c=Nt)&&(c=Bj(c,i.pendingProps,Lr),c!==null?(i.stateNode=c,jt=i,Nt=null,r=!0):r=!1),r||bs(i)),null;case 13:return b_(r,i,c);case 4:return fe(i,i.stateNode.containerInfo),h=i.pendingProps,r===null?i.child=Bo(i,null,h,c):Qn(r,i,h,c),i.child;case 11:return l_(r,i,i.type,i.pendingProps,c);case 7:return Qn(r,i,i.pendingProps,c),i.child;case 8:return Qn(r,i,i.pendingProps.children,c),i.child;case 12:return Qn(r,i,i.pendingProps.children,c),i.child;case 10:return h=i.pendingProps,Sa(i,i.type,h.value),Qn(r,i,h.children,c),i.child;case 9:return v=i.type._context,h=i.pendingProps.children,Mo(i),v=Jn(v),h=h(v),i.flags|=1,Qn(r,i,h,c),i.child;case 14:return c_(r,i,i.type,i.pendingProps,c);case 15:return u_(r,i,i.type,i.pendingProps,c);case 19:return v_(r,i,c);case 31:return ij(r,i,c);case 22:return d_(r,i,c,i.pendingProps);case 24:return Mo(i),h=Jn(Dn),r===null?(v=fp(),v===null&&(v=Yt,w=dp(),v.pooledCache=w,w.refCount++,w!==null&&(v.pooledCacheLanes|=c),v=w),i.memoizedState={parent:h,cache:v},pp(i),Sa(i,Dn,v)):((r.lanes&c)!==0&&(gp(r,i),iu(i,null,null,c),ru()),v=r.memoizedState,w=i.memoizedState,v.parent!==h?(v={parent:h,cache:h},i.memoizedState=v,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=v),Sa(i,Dn,h)):(h=w.cache,Sa(i,Dn,h),h!==v.cache&&up(i,[Dn],c,!0))),Qn(r,i,i.pendingProps.children,c),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function Is(r){r.flags|=4}function Xp(r,i,c,h,v){if((i=(r.mode&32)!==0)&&(i=!1),i){if(r.flags|=16777216,(v&335544128)===v)if(r.stateNode.complete)r.flags|=8192;else if(Z_())r.flags|=8192;else throw Lo=Wd,mp}else r.flags&=-16777217}function x_(r,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!Bx(i))if(Z_())r.flags|=8192;else throw Lo=Wd,mp}function fh(r,i){i!==null&&(r.flags|=4),r.flags&16384&&(i=r.tag!==22?Qa():536870912,r.lanes|=i,Hl|=i)}function uu(r,i){if(!bt)switch(r.tailMode){case"hidden":i=r.tail;for(var c=null;i!==null;)i.alternate!==null&&(c=i),i=i.sibling;c===null?r.tail=null:c.sibling=null;break;case"collapsed":c=r.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?i||r.tail===null?r.tail=null:r.tail.sibling=null:h.sibling=null}}function en(r){var i=r.alternate!==null&&r.alternate.child===r.child,c=0,h=0;if(i)for(var v=r.child;v!==null;)c|=v.lanes|v.childLanes,h|=v.subtreeFlags&65011712,h|=v.flags&65011712,v.return=r,v=v.sibling;else for(v=r.child;v!==null;)c|=v.lanes|v.childLanes,h|=v.subtreeFlags,h|=v.flags,v.return=r,v=v.sibling;return r.subtreeFlags|=h,r.childLanes=c,i}function aj(r,i,c){var h=i.pendingProps;switch(yn(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return en(i),null;case 1:return en(i),null;case 3:return c=i.stateNode,h=null,r!==null&&(h=r.memoizedState.cache),i.memoizedState.cache!==h&&(i.flags|=2048),Ls(Dn),ce(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(r===null||r.child===null)&&(Zi(i)?Is(i):r===null||r.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Xc())),en(i),null;case 26:var v=i.type,w=i.memoizedState;return r===null?(Is(i),w!==null?(en(i),x_(i,w)):(en(i),Xp(i,v,null,h,c))):w?w!==r.memoizedState?(Is(i),en(i),x_(i,w)):(en(i),i.flags&=-16777217):(r=r.memoizedProps,r!==h&&Is(i),en(i),Xp(i,v,r,h,c)),null;case 27:if(ke(i),c=Y.current,v=i.type,r!==null&&i.stateNode!=null)r.memoizedProps!==h&&Is(i);else{if(!h){if(i.stateNode===null)throw Error(s(166));return en(i),null}r=Z.current,Zi(i)?Wc(i):(r=jx(v,h,c),i.stateNode=r,Is(i))}return en(i),null;case 5:if(ke(i),v=i.type,r!==null&&i.stateNode!=null)r.memoizedProps!==h&&Is(i);else{if(!h){if(i.stateNode===null)throw Error(s(166));return en(i),null}if(w=Z.current,Zi(i))Wc(i);else{var O=jh(Y.current);switch(w){case 1:w=O.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:w=O.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":w=O.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":w=O.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":w=O.createElement("div"),w.innerHTML="<script><\/script>",w=w.removeChild(w.firstChild);break;case"select":w=typeof h.is=="string"?O.createElement("select",{is:h.is}):O.createElement("select"),h.multiple?w.multiple=!0:h.size&&(w.size=h.size);break;default:w=typeof h.is=="string"?O.createElement(v,{is:h.is}):O.createElement(v)}}w[rn]=i,w[kn]=h;e:for(O=i.child;O!==null;){if(O.tag===5||O.tag===6)w.appendChild(O.stateNode);else if(O.tag!==4&&O.tag!==27&&O.child!==null){O.child.return=O,O=O.child;continue}if(O===i)break e;for(;O.sibling===null;){if(O.return===null||O.return===i)break e;O=O.return}O.sibling.return=O.return,O=O.sibling}i.stateNode=w;e:switch(er(w,v,h),v){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}h&&Is(i)}}return en(i),Xp(i,i.type,r===null?null:r.memoizedProps,i.pendingProps,c),null;case 6:if(r&&i.stateNode!=null)r.memoizedProps!==h&&Is(i);else{if(typeof h!="string"&&i.stateNode===null)throw Error(s(166));if(r=Y.current,Zi(i)){if(r=i.stateNode,c=i.memoizedProps,h=null,v=jt,v!==null)switch(v.tag){case 27:case 5:h=v.memoizedProps}r[rn]=i,r=!!(r.nodeValue===c||h!==null&&h.suppressHydrationWarning===!0||bx(r.nodeValue,c)),r||bs(i,!0)}else r=jh(r).createTextNode(h),r[rn]=i,i.stateNode=r}return en(i),null;case 31:if(c=i.memoizedState,r===null||r.memoizedState!==null){if(h=Zi(i),c!==null){if(r===null){if(!h)throw Error(s(318));if(r=i.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(557));r[rn]=i}else Rs(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;en(i),r=!1}else c=Xc(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=c),r=!0;if(!r)return i.flags&256?(Jr(i),i):(Jr(i),null);if((i.flags&128)!==0)throw Error(s(558))}return en(i),null;case 13:if(h=i.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(v=Zi(i),h!==null&&h.dehydrated!==null){if(r===null){if(!v)throw Error(s(318));if(v=i.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(s(317));v[rn]=i}else Rs(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;en(i),v=!1}else v=Xc(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=v),v=!0;if(!v)return i.flags&256?(Jr(i),i):(Jr(i),null)}return Jr(i),(i.flags&128)!==0?(i.lanes=c,i):(c=h!==null,r=r!==null&&r.memoizedState!==null,c&&(h=i.child,v=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(v=h.alternate.memoizedState.cachePool.pool),w=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(w=h.memoizedState.cachePool.pool),w!==v&&(h.flags|=2048)),c!==r&&c&&(i.child.flags|=8192),fh(i,i.updateQueue),en(i),null);case 4:return ce(),r===null&&v0(i.stateNode.containerInfo),en(i),null;case 10:return Ls(i.type),en(i),null;case 19:if($(An),h=i.memoizedState,h===null)return en(i),null;if(v=(i.flags&128)!==0,w=h.rendering,w===null)if(v)uu(h,!1);else{if(_n!==0||r!==null&&(r.flags&128)!==0)for(r=i.child;r!==null;){if(w=eh(r),w!==null){for(i.flags|=128,uu(h,!1),r=w.updateQueue,i.updateQueue=r,fh(i,r),i.subtreeFlags=0,r=c,c=i.child;c!==null;)Zc(c,r),c=c.sibling;return F(An,An.current&1|2),bt&&Xe(i,h.treeForkCount),i.child}r=r.sibling}h.tail!==null&&Fe()>yh&&(i.flags|=128,v=!0,uu(h,!1),i.lanes=4194304)}else{if(!v)if(r=eh(w),r!==null){if(i.flags|=128,v=!0,r=r.updateQueue,i.updateQueue=r,fh(i,r),uu(h,!0),h.tail===null&&h.tailMode==="hidden"&&!w.alternate&&!bt)return en(i),null}else 2*Fe()-h.renderingStartTime>yh&&c!==536870912&&(i.flags|=128,v=!0,uu(h,!1),i.lanes=4194304);h.isBackwards?(w.sibling=i.child,i.child=w):(r=h.last,r!==null?r.sibling=w:i.child=w,h.last=w)}return h.tail!==null?(r=h.tail,h.rendering=r,h.tail=r.sibling,h.renderingStartTime=Fe(),r.sibling=null,c=An.current,F(An,v?c&1|2:c&1),bt&&Xe(i,h.treeForkCount),r):(en(i),null);case 22:case 23:return Jr(i),_p(),h=i.memoizedState!==null,r!==null?r.memoizedState!==null!==h&&(i.flags|=8192):h&&(i.flags|=8192),h?(c&536870912)!==0&&(i.flags&128)===0&&(en(i),i.subtreeFlags&6&&(i.flags|=8192)):en(i),c=i.updateQueue,c!==null&&fh(i,c.retryQueue),c=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),h=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(h=i.memoizedState.cachePool.pool),h!==c&&(i.flags|=2048),r!==null&&$(Co),null;case 24:return c=null,r!==null&&(c=r.memoizedState.cache),i.memoizedState.cache!==c&&(i.flags|=2048),Ls(Dn),en(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function oj(r,i){switch(yn(i),i.tag){case 1:return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 3:return Ls(Dn),ce(),r=i.flags,(r&65536)!==0&&(r&128)===0?(i.flags=r&-65537|128,i):null;case 26:case 27:case 5:return ke(i),null;case 31:if(i.memoizedState!==null){if(Jr(i),i.alternate===null)throw Error(s(340));Rs()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 13:if(Jr(i),r=i.memoizedState,r!==null&&r.dehydrated!==null){if(i.alternate===null)throw Error(s(340));Rs()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 19:return $(An),null;case 4:return ce(),null;case 10:return Ls(i.type),null;case 22:case 23:return Jr(i),_p(),r!==null&&$(Co),r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 24:return Ls(Dn),null;case 25:return null;default:return null}}function w_(r,i){switch(yn(i),i.tag){case 3:Ls(Dn),ce();break;case 26:case 27:case 5:ke(i);break;case 4:ce();break;case 31:i.memoizedState!==null&&Jr(i);break;case 13:Jr(i);break;case 19:$(An);break;case 10:Ls(i.type);break;case 22:case 23:Jr(i),_p(),r!==null&&$(Co);break;case 24:Ls(Dn)}}function du(r,i){try{var c=i.updateQueue,h=c!==null?c.lastEffect:null;if(h!==null){var v=h.next;c=v;do{if((c.tag&r)===r){h=void 0;var w=c.create,O=c.inst;h=w(),O.destroy=h}c=c.next}while(c!==v)}}catch(z){$t(i,i.return,z)}}function Na(r,i,c){try{var h=i.updateQueue,v=h!==null?h.lastEffect:null;if(v!==null){var w=v.next;h=w;do{if((h.tag&r)===r){var O=h.inst,z=O.destroy;if(z!==void 0){O.destroy=void 0,v=i;var ne=c,be=z;try{be()}catch(Ae){$t(v,ne,Ae)}}}h=h.next}while(h!==w)}}catch(Ae){$t(i,i.return,Ae)}}function S_(r){var i=r.updateQueue;if(i!==null){var c=r.stateNode;try{fv(i,c)}catch(h){$t(r,r.return,h)}}}function E_(r,i,c){c.props=$o(r.type,r.memoizedProps),c.state=r.memoizedState;try{c.componentWillUnmount()}catch(h){$t(r,i,h)}}function hu(r,i){try{var c=r.ref;if(c!==null){switch(r.tag){case 26:case 27:case 5:var h=r.stateNode;break;case 30:h=r.stateNode;break;default:h=r.stateNode}typeof c=="function"?r.refCleanup=c(h):c.current=h}}catch(v){$t(r,i,v)}}function vs(r,i){var c=r.ref,h=r.refCleanup;if(c!==null)if(typeof h=="function")try{h()}catch(v){$t(r,i,v)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(v){$t(r,i,v)}else c.current=null}function T_(r){var i=r.type,c=r.memoizedProps,h=r.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":c.autoFocus&&h.focus();break e;case"img":c.src?h.src=c.src:c.srcSet&&(h.srcset=c.srcSet)}}catch(v){$t(r,r.return,v)}}function Jp(r,i,c){try{var h=r.stateNode;Nj(h,r.type,c,i),h[kn]=i}catch(v){$t(r,r.return,v)}}function k_(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&Ba(r.type)||r.tag===4}function Qp(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||k_(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&Ba(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function e0(r,i,c){var h=r.tag;if(h===5||h===6)r=r.stateNode,i?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(r,i):(i=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,i.appendChild(r),c=c._reactRootContainer,c!=null||i.onclick!==null||(i.onclick=Dr));else if(h!==4&&(h===27&&Ba(r.type)&&(c=r.stateNode,i=null),r=r.child,r!==null))for(e0(r,i,c),r=r.sibling;r!==null;)e0(r,i,c),r=r.sibling}function mh(r,i,c){var h=r.tag;if(h===5||h===6)r=r.stateNode,i?c.insertBefore(r,i):c.appendChild(r);else if(h!==4&&(h===27&&Ba(r.type)&&(c=r.stateNode),r=r.child,r!==null))for(mh(r,i,c),r=r.sibling;r!==null;)mh(r,i,c),r=r.sibling}function A_(r){var i=r.stateNode,c=r.memoizedProps;try{for(var h=r.type,v=i.attributes;v.length;)i.removeAttributeNode(v[0]);er(i,h,c),i[rn]=r,i[kn]=c}catch(w){$t(r,r.return,w)}}var zs=!1,Rn=!1,t0=!1,j_=typeof WeakSet=="function"?WeakSet:Set,Yn=null;function lj(r,i){if(r=r.containerInfo,w0=Lh,r=wo(r),ds(r)){if("selectionStart"in r)var c={start:r.selectionStart,end:r.selectionEnd};else e:{c=(c=r.ownerDocument)&&c.defaultView||window;var h=c.getSelection&&c.getSelection();if(h&&h.rangeCount!==0){c=h.anchorNode;var v=h.anchorOffset,w=h.focusNode;h=h.focusOffset;try{c.nodeType,w.nodeType}catch{c=null;break e}var O=0,z=-1,ne=-1,be=0,Ae=0,De=r,_e=null;t:for(;;){for(var we;De!==c||v!==0&&De.nodeType!==3||(z=O+v),De!==w||h!==0&&De.nodeType!==3||(ne=O+h),De.nodeType===3&&(O+=De.nodeValue.length),(we=De.firstChild)!==null;)_e=De,De=we;for(;;){if(De===r)break t;if(_e===c&&++be===v&&(z=O),_e===w&&++Ae===h&&(ne=O),(we=De.nextSibling)!==null)break;De=_e,_e=De.parentNode}De=we}c=z===-1||ne===-1?null:{start:z,end:ne}}else c=null}c=c||{start:0,end:0}}else c=null;for(S0={focusedElem:r,selectionRange:c},Lh=!1,Yn=i;Yn!==null;)if(i=Yn,r=i.child,(i.subtreeFlags&1028)!==0&&r!==null)r.return=i,Yn=r;else for(;Yn!==null;){switch(i=Yn,w=i.alternate,r=i.flags,i.tag){case 0:if((r&4)!==0&&(r=i.updateQueue,r=r!==null?r.events:null,r!==null))for(c=0;c<r.length;c++)v=r[c],v.ref.impl=v.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&w!==null){r=void 0,c=i,v=w.memoizedProps,w=w.memoizedState,h=c.stateNode;try{var qe=$o(c.type,v);r=h.getSnapshotBeforeUpdate(qe,w),h.__reactInternalSnapshotBeforeUpdate=r}catch(nt){$t(c,c.return,nt)}}break;case 3:if((r&1024)!==0){if(r=i.stateNode.containerInfo,c=r.nodeType,c===9)k0(r);else if(c===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":k0(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(s(163))}if(r=i.sibling,r!==null){r.return=i.return,Yn=r;break}Yn=i.return}}function N_(r,i,c){var h=c.flags;switch(c.tag){case 0:case 11:case 15:Hs(r,c),h&4&&du(5,c);break;case 1:if(Hs(r,c),h&4)if(r=c.stateNode,i===null)try{r.componentDidMount()}catch(O){$t(c,c.return,O)}else{var v=$o(c.type,i.memoizedProps);i=i.memoizedState;try{r.componentDidUpdate(v,i,r.__reactInternalSnapshotBeforeUpdate)}catch(O){$t(c,c.return,O)}}h&64&&S_(c),h&512&&hu(c,c.return);break;case 3:if(Hs(r,c),h&64&&(r=c.updateQueue,r!==null)){if(i=null,c.child!==null)switch(c.child.tag){case 27:case 5:i=c.child.stateNode;break;case 1:i=c.child.stateNode}try{fv(r,i)}catch(O){$t(c,c.return,O)}}break;case 27:i===null&&h&4&&A_(c);case 26:case 5:Hs(r,c),i===null&&h&4&&T_(c),h&512&&hu(c,c.return);break;case 12:Hs(r,c);break;case 31:Hs(r,c),h&4&&M_(r,c);break;case 13:Hs(r,c),h&4&&C_(r,c),h&64&&(r=c.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(c=bj.bind(null,c),Pj(r,c))));break;case 22:if(h=c.memoizedState!==null||zs,!h){i=i!==null&&i.memoizedState!==null||Rn,v=zs;var w=Rn;zs=h,(Rn=i)&&!w?Gs(r,c,(c.subtreeFlags&8772)!==0):Hs(r,c),zs=v,Rn=w}break;case 30:break;default:Hs(r,c)}}function O_(r){var i=r.alternate;i!==null&&(r.alternate=null,O_(i)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(i=r.stateNode,i!==null&&tt(i)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var an=null,Br=!1;function Us(r,i,c){for(c=c.child;c!==null;)D_(r,i,c),c=c.sibling}function D_(r,i,c){if(Mt&&typeof Mt.onCommitFiberUnmount=="function")try{Mt.onCommitFiberUnmount(un,c)}catch{}switch(c.tag){case 26:Rn||vs(c,i),Us(r,i,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Rn||vs(c,i);var h=an,v=Br;Ba(c.type)&&(an=c.stateNode,Br=!1),Us(r,i,c),xu(c.stateNode),an=h,Br=v;break;case 5:Rn||vs(c,i);case 6:if(h=an,v=Br,an=null,Us(r,i,c),an=h,Br=v,an!==null)if(Br)try{(an.nodeType===9?an.body:an.nodeName==="HTML"?an.ownerDocument.body:an).removeChild(c.stateNode)}catch(w){$t(c,i,w)}else try{an.removeChild(c.stateNode)}catch(w){$t(c,i,w)}break;case 18:an!==null&&(Br?(r=an,Sx(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,c.stateNode),Wl(r)):Sx(an,c.stateNode));break;case 4:h=an,v=Br,an=c.stateNode.containerInfo,Br=!0,Us(r,i,c),an=h,Br=v;break;case 0:case 11:case 14:case 15:Na(2,c,i),Rn||Na(4,c,i),Us(r,i,c);break;case 1:Rn||(vs(c,i),h=c.stateNode,typeof h.componentWillUnmount=="function"&&E_(c,i,h)),Us(r,i,c);break;case 21:Us(r,i,c);break;case 22:Rn=(h=Rn)||c.memoizedState!==null,Us(r,i,c),Rn=h;break;default:Us(r,i,c)}}function M_(r,i){if(i.memoizedState===null&&(r=i.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{Wl(r)}catch(c){$t(i,i.return,c)}}}function C_(r,i){if(i.memoizedState===null&&(r=i.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Wl(r)}catch(c){$t(i,i.return,c)}}function cj(r){switch(r.tag){case 31:case 13:case 19:var i=r.stateNode;return i===null&&(i=r.stateNode=new j_),i;case 22:return r=r.stateNode,i=r._retryCache,i===null&&(i=r._retryCache=new j_),i;default:throw Error(s(435,r.tag))}}function ph(r,i){var c=cj(r);i.forEach(function(h){if(!c.has(h)){c.add(h);var v=yj.bind(null,r,h);h.then(v,v)}})}function Pr(r,i){var c=i.deletions;if(c!==null)for(var h=0;h<c.length;h++){var v=c[h],w=r,O=i,z=O;e:for(;z!==null;){switch(z.tag){case 27:if(Ba(z.type)){an=z.stateNode,Br=!1;break e}break;case 5:an=z.stateNode,Br=!1;break e;case 3:case 4:an=z.stateNode.containerInfo,Br=!0;break e}z=z.return}if(an===null)throw Error(s(160));D_(w,O,v),an=null,Br=!1,w=v.alternate,w!==null&&(w.return=null),v.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)R_(i,r),i=i.sibling}var Ki=null;function R_(r,i){var c=r.alternate,h=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Pr(i,r),$r(r),h&4&&(Na(3,r,r.return),du(3,r),Na(5,r,r.return));break;case 1:Pr(i,r),$r(r),h&512&&(Rn||c===null||vs(c,c.return)),h&64&&zs&&(r=r.updateQueue,r!==null&&(h=r.callbacks,h!==null&&(c=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=c===null?h:c.concat(h))));break;case 26:var v=Ki;if(Pr(i,r),$r(r),h&512&&(Rn||c===null||vs(c,c.return)),h&4){var w=c!==null?c.memoizedState:null;if(h=r.memoizedState,c===null)if(h===null)if(r.stateNode===null){e:{h=r.type,c=r.memoizedProps,v=v.ownerDocument||v;t:switch(h){case"title":w=v.getElementsByTagName("title")[0],(!w||w[pt]||w[rn]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=v.createElement(h),v.head.insertBefore(w,v.querySelector("head > title"))),er(w,h,c),w[rn]=r,wt(w),h=w;break e;case"link":var O=Rx("link","href",v).get(h+(c.href||""));if(O){for(var z=0;z<O.length;z++)if(w=O[z],w.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&w.getAttribute("rel")===(c.rel==null?null:c.rel)&&w.getAttribute("title")===(c.title==null?null:c.title)&&w.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){O.splice(z,1);break t}}w=v.createElement(h),er(w,h,c),v.head.appendChild(w);break;case"meta":if(O=Rx("meta","content",v).get(h+(c.content||""))){for(z=0;z<O.length;z++)if(w=O[z],w.getAttribute("content")===(c.content==null?null:""+c.content)&&w.getAttribute("name")===(c.name==null?null:c.name)&&w.getAttribute("property")===(c.property==null?null:c.property)&&w.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&w.getAttribute("charset")===(c.charSet==null?null:c.charSet)){O.splice(z,1);break t}}w=v.createElement(h),er(w,h,c),v.head.appendChild(w);break;default:throw Error(s(468,h))}w[rn]=r,wt(w),h=w}r.stateNode=h}else Lx(v,r.type,r.stateNode);else r.stateNode=Cx(v,h,r.memoizedProps);else w!==h?(w===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):w.count--,h===null?Lx(v,r.type,r.stateNode):Cx(v,h,r.memoizedProps)):h===null&&r.stateNode!==null&&Jp(r,r.memoizedProps,c.memoizedProps)}break;case 27:Pr(i,r),$r(r),h&512&&(Rn||c===null||vs(c,c.return)),c!==null&&h&4&&Jp(r,r.memoizedProps,c.memoizedProps);break;case 5:if(Pr(i,r),$r(r),h&512&&(Rn||c===null||vs(c,c.return)),r.flags&32){v=r.stateNode;try{bi(v,"")}catch(qe){$t(r,r.return,qe)}}h&4&&r.stateNode!=null&&(v=r.memoizedProps,Jp(r,v,c!==null?c.memoizedProps:v)),h&1024&&(t0=!0);break;case 6:if(Pr(i,r),$r(r),h&4){if(r.stateNode===null)throw Error(s(162));h=r.memoizedProps,c=r.stateNode;try{c.nodeValue=h}catch(qe){$t(r,r.return,qe)}}break;case 3:if(Dh=null,v=Ki,Ki=Nh(i.containerInfo),Pr(i,r),Ki=v,$r(r),h&4&&c!==null&&c.memoizedState.isDehydrated)try{Wl(i.containerInfo)}catch(qe){$t(r,r.return,qe)}t0&&(t0=!1,L_(r));break;case 4:h=Ki,Ki=Nh(r.stateNode.containerInfo),Pr(i,r),$r(r),Ki=h;break;case 12:Pr(i,r),$r(r);break;case 31:Pr(i,r),$r(r),h&4&&(h=r.updateQueue,h!==null&&(r.updateQueue=null,ph(r,h)));break;case 13:Pr(i,r),$r(r),r.child.flags&8192&&r.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(bh=Fe()),h&4&&(h=r.updateQueue,h!==null&&(r.updateQueue=null,ph(r,h)));break;case 22:v=r.memoizedState!==null;var ne=c!==null&&c.memoizedState!==null,be=zs,Ae=Rn;if(zs=be||v,Rn=Ae||ne,Pr(i,r),Rn=Ae,zs=be,$r(r),h&8192)e:for(i=r.stateNode,i._visibility=v?i._visibility&-2:i._visibility|1,v&&(c===null||ne||zs||Rn||Io(r)),c=null,i=r;;){if(i.tag===5||i.tag===26){if(c===null){ne=c=i;try{if(w=ne.stateNode,v)O=w.style,typeof O.setProperty=="function"?O.setProperty("display","none","important"):O.display="none";else{z=ne.stateNode;var De=ne.memoizedProps.style,_e=De!=null&&De.hasOwnProperty("display")?De.display:null;z.style.display=_e==null||typeof _e=="boolean"?"":(""+_e).trim()}}catch(qe){$t(ne,ne.return,qe)}}}else if(i.tag===6){if(c===null){ne=i;try{ne.stateNode.nodeValue=v?"":ne.memoizedProps}catch(qe){$t(ne,ne.return,qe)}}}else if(i.tag===18){if(c===null){ne=i;try{var we=ne.stateNode;v?Ex(we,!0):Ex(ne.stateNode,!1)}catch(qe){$t(ne,ne.return,qe)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===r)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;c===i&&(c=null),i=i.return}c===i&&(c=null),i.sibling.return=i.return,i=i.sibling}h&4&&(h=r.updateQueue,h!==null&&(c=h.retryQueue,c!==null&&(h.retryQueue=null,ph(r,c))));break;case 19:Pr(i,r),$r(r),h&4&&(h=r.updateQueue,h!==null&&(r.updateQueue=null,ph(r,h)));break;case 30:break;case 21:break;default:Pr(i,r),$r(r)}}function $r(r){var i=r.flags;if(i&2){try{for(var c,h=r.return;h!==null;){if(k_(h)){c=h;break}h=h.return}if(c==null)throw Error(s(160));switch(c.tag){case 27:var v=c.stateNode,w=Qp(r);mh(r,w,v);break;case 5:var O=c.stateNode;c.flags&32&&(bi(O,""),c.flags&=-33);var z=Qp(r);mh(r,z,O);break;case 3:case 4:var ne=c.stateNode.containerInfo,be=Qp(r);e0(r,be,ne);break;default:throw Error(s(161))}}catch(Ae){$t(r,r.return,Ae)}r.flags&=-3}i&4096&&(r.flags&=-4097)}function L_(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var i=r;L_(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),r=r.sibling}}function Hs(r,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)N_(r,i.alternate,i),i=i.sibling}function Io(r){for(r=r.child;r!==null;){var i=r;switch(i.tag){case 0:case 11:case 14:case 15:Na(4,i,i.return),Io(i);break;case 1:vs(i,i.return);var c=i.stateNode;typeof c.componentWillUnmount=="function"&&E_(i,i.return,c),Io(i);break;case 27:xu(i.stateNode);case 26:case 5:vs(i,i.return),Io(i);break;case 22:i.memoizedState===null&&Io(i);break;case 30:Io(i);break;default:Io(i)}r=r.sibling}}function Gs(r,i,c){for(c=c&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var h=i.alternate,v=r,w=i,O=w.flags;switch(w.tag){case 0:case 11:case 15:Gs(v,w,c),du(4,w);break;case 1:if(Gs(v,w,c),h=w,v=h.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(be){$t(h,h.return,be)}if(h=w,v=h.updateQueue,v!==null){var z=h.stateNode;try{var ne=v.shared.hiddenCallbacks;if(ne!==null)for(v.shared.hiddenCallbacks=null,v=0;v<ne.length;v++)hv(ne[v],z)}catch(be){$t(h,h.return,be)}}c&&O&64&&S_(w),hu(w,w.return);break;case 27:A_(w);case 26:case 5:Gs(v,w,c),c&&h===null&&O&4&&T_(w),hu(w,w.return);break;case 12:Gs(v,w,c);break;case 31:Gs(v,w,c),c&&O&4&&M_(v,w);break;case 13:Gs(v,w,c),c&&O&4&&C_(v,w);break;case 22:w.memoizedState===null&&Gs(v,w,c),hu(w,w.return);break;case 30:break;default:Gs(v,w,c)}i=i.sibling}}function n0(r,i){var c=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),r=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),r!==c&&(r!=null&&r.refCount++,c!=null&&Jc(c))}function r0(r,i){r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&Jc(r))}function Wi(r,i,c,h){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)B_(r,i,c,h),i=i.sibling}function B_(r,i,c,h){var v=i.flags;switch(i.tag){case 0:case 11:case 15:Wi(r,i,c,h),v&2048&&du(9,i);break;case 1:Wi(r,i,c,h);break;case 3:Wi(r,i,c,h),v&2048&&(r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&Jc(r)));break;case 12:if(v&2048){Wi(r,i,c,h),r=i.stateNode;try{var w=i.memoizedProps,O=w.id,z=w.onPostCommit;typeof z=="function"&&z(O,i.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(ne){$t(i,i.return,ne)}}else Wi(r,i,c,h);break;case 31:Wi(r,i,c,h);break;case 13:Wi(r,i,c,h);break;case 23:break;case 22:w=i.stateNode,O=i.alternate,i.memoizedState!==null?w._visibility&2?Wi(r,i,c,h):fu(r,i):w._visibility&2?Wi(r,i,c,h):(w._visibility|=2,Il(r,i,c,h,(i.subtreeFlags&10256)!==0||!1)),v&2048&&n0(O,i);break;case 24:Wi(r,i,c,h),v&2048&&r0(i.alternate,i);break;default:Wi(r,i,c,h)}}function Il(r,i,c,h,v){for(v=v&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var w=r,O=i,z=c,ne=h,be=O.flags;switch(O.tag){case 0:case 11:case 15:Il(w,O,z,ne,v),du(8,O);break;case 23:break;case 22:var Ae=O.stateNode;O.memoizedState!==null?Ae._visibility&2?Il(w,O,z,ne,v):fu(w,O):(Ae._visibility|=2,Il(w,O,z,ne,v)),v&&be&2048&&n0(O.alternate,O);break;case 24:Il(w,O,z,ne,v),v&&be&2048&&r0(O.alternate,O);break;default:Il(w,O,z,ne,v)}i=i.sibling}}function fu(r,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var c=r,h=i,v=h.flags;switch(h.tag){case 22:fu(c,h),v&2048&&n0(h.alternate,h);break;case 24:fu(c,h),v&2048&&r0(h.alternate,h);break;default:fu(c,h)}i=i.sibling}}var mu=8192;function zl(r,i,c){if(r.subtreeFlags&mu)for(r=r.child;r!==null;)P_(r,i,c),r=r.sibling}function P_(r,i,c){switch(r.tag){case 26:zl(r,i,c),r.flags&mu&&r.memoizedState!==null&&Kj(c,Ki,r.memoizedState,r.memoizedProps);break;case 5:zl(r,i,c);break;case 3:case 4:var h=Ki;Ki=Nh(r.stateNode.containerInfo),zl(r,i,c),Ki=h;break;case 22:r.memoizedState===null&&(h=r.alternate,h!==null&&h.memoizedState!==null?(h=mu,mu=16777216,zl(r,i,c),mu=h):zl(r,i,c));break;default:zl(r,i,c)}}function $_(r){var i=r.alternate;if(i!==null&&(r=i.child,r!==null)){i.child=null;do i=r.sibling,r.sibling=null,r=i;while(r!==null)}}function pu(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var c=0;c<i.length;c++){var h=i[c];Yn=h,z_(h,r)}$_(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)I_(r),r=r.sibling}function I_(r){switch(r.tag){case 0:case 11:case 15:pu(r),r.flags&2048&&Na(9,r,r.return);break;case 3:pu(r);break;case 12:pu(r);break;case 22:var i=r.stateNode;r.memoizedState!==null&&i._visibility&2&&(r.return===null||r.return.tag!==13)?(i._visibility&=-3,gh(r)):pu(r);break;default:pu(r)}}function gh(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var c=0;c<i.length;c++){var h=i[c];Yn=h,z_(h,r)}$_(r)}for(r=r.child;r!==null;){switch(i=r,i.tag){case 0:case 11:case 15:Na(8,i,i.return),gh(i);break;case 22:c=i.stateNode,c._visibility&2&&(c._visibility&=-3,gh(i));break;default:gh(i)}r=r.sibling}}function z_(r,i){for(;Yn!==null;){var c=Yn;switch(c.tag){case 0:case 11:case 15:Na(8,c,i);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var h=c.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:Jc(c.memoizedState.cache)}if(h=c.child,h!==null)h.return=c,Yn=h;else e:for(c=r;Yn!==null;){h=Yn;var v=h.sibling,w=h.return;if(O_(h),h===c){Yn=null;break e}if(v!==null){v.return=w,Yn=v;break e}Yn=w}}}var uj={getCacheForType:function(r){var i=Jn(Dn),c=i.data.get(r);return c===void 0&&(c=r(),i.data.set(r,c)),c},cacheSignal:function(){return Jn(Dn).controller.signal}},dj=typeof WeakMap=="function"?WeakMap:Map,Ct=0,Yt=null,yt=null,Et=0,Pt=0,Qr=null,Oa=!1,Ul=!1,i0=!1,Fs=0,_n=0,Da=0,zo=0,s0=0,ei=0,Hl=0,gu=null,Ir=null,a0=!1,bh=0,U_=0,yh=1/0,vh=null,Ma=null,Un=0,Ca=null,Gl=null,Ys=0,o0=0,l0=null,H_=null,bu=0,c0=null;function ti(){return(Ct&2)!==0&&Et!==0?Et&-Et:X.T!==null?p0():ks()}function G_(){if(ei===0)if((Et&536870912)===0||bt){var r=On;On<<=1,(On&3932160)===0&&(On=262144),ei=r}else ei=536870912;return r=Xr.current,r!==null&&(r.flags|=32),ei}function zr(r,i,c){(r===Yt&&(Pt===2||Pt===9)||r.cancelPendingCommit!==null)&&(Fl(r,0),Ra(r,Et,ei,!1)),Ui(r,c),((Ct&2)===0||r!==Yt)&&(r===Yt&&((Ct&2)===0&&(zo|=c),_n===4&&Ra(r,Et,ei,!1)),_s(r))}function F_(r,i,c){if((Ct&6)!==0)throw Error(s(327));var h=!c&&(i&127)===0&&(i&r.expiredLanes)===0||mi(r,i),v=h?mj(r,i):d0(r,i,!0),w=h;do{if(v===0){Ul&&!h&&Ra(r,i,0,!1);break}else{if(c=r.current.alternate,w&&!hj(c)){v=d0(r,i,!1),w=!1;continue}if(v===2){if(w=i,r.errorRecoveryDisabledLanes&w)var O=0;else O=r.pendingLanes&-536870913,O=O!==0?O:O&536870912?536870912:0;if(O!==0){i=O;e:{var z=r;v=gu;var ne=z.current.memoizedState.isDehydrated;if(ne&&(Fl(z,O).flags|=256),O=d0(z,O,!1),O!==2){if(i0&&!ne){z.errorRecoveryDisabledLanes|=w,zo|=w,v=4;break e}w=Ir,Ir=v,w!==null&&(Ir===null?Ir=w:Ir.push.apply(Ir,w))}v=O}if(w=!1,v!==2)continue}}if(v===1){Fl(r,0),Ra(r,i,0,!0);break}e:{switch(h=r,w=v,w){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:Ra(h,i,ei,!Oa);break e;case 2:Ir=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(v=bh+300-Fe(),10<v)){if(Ra(h,i,ei,!Oa),or(h,0,!0)!==0)break e;Ys=i,h.timeoutHandle=xx(Y_.bind(null,h,c,Ir,vh,a0,i,ei,zo,Hl,Oa,w,"Throttled",-0,0),v);break e}Y_(h,c,Ir,vh,a0,i,ei,zo,Hl,Oa,w,null,-0,0)}}break}while(!0);_s(r)}function Y_(r,i,c,h,v,w,O,z,ne,be,Ae,De,_e,we){if(r.timeoutHandle=-1,De=i.subtreeFlags,De&8192||(De&16785408)===16785408){De={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Dr},P_(i,w,De);var qe=(w&62914560)===w?bh-Fe():(w&4194048)===w?U_-Fe():0;if(qe=Wj(De,qe),qe!==null){Ys=w,r.cancelPendingCommit=qe(Q_.bind(null,r,i,w,c,h,v,O,z,ne,Ae,De,null,_e,we)),Ra(r,w,O,!be);return}}Q_(r,i,w,c,h,v,O,z,ne)}function hj(r){for(var i=r;;){var c=i.tag;if((c===0||c===11||c===15)&&i.flags&16384&&(c=i.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var h=0;h<c.length;h++){var v=c[h],w=v.getSnapshot;v=v.value;try{if(!Gn(w(),v))return!1}catch{return!1}}if(c=i.child,i.subtreeFlags&16384&&c!==null)c.return=i,i=c;else{if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Ra(r,i,c,h){i&=~s0,i&=~zo,r.suspendedLanes|=i,r.pingedLanes&=~i,h&&(r.warmLanes|=i),h=r.expirationTimes;for(var v=i;0<v;){var w=31-dn(v),O=1<<w;h[w]=-1,v&=~O}c!==0&&sa(r,c,i)}function _h(){return(Ct&6)===0?(yu(0),!1):!0}function u0(){if(yt!==null){if(Pt===0)var r=yt.return;else r=yt,Vi=ys=null,kp(r),Rl=null,eu=0,r=yt;for(;r!==null;)w_(r.alternate,r),r=r.return;yt=null}}function Fl(r,i){var c=r.timeoutHandle;c!==-1&&(r.timeoutHandle=-1,Mj(c)),c=r.cancelPendingCommit,c!==null&&(r.cancelPendingCommit=null,c()),Ys=0,u0(),Yt=r,yt=c=Ei(r.current,null),Et=i,Pt=0,Qr=null,Oa=!1,Ul=mi(r,i),i0=!1,Hl=ei=s0=zo=Da=_n=0,Ir=gu=null,a0=!1,(i&8)!==0&&(i|=i&32);var h=r.entangledLanes;if(h!==0)for(r=r.entanglements,h&=i;0<h;){var v=31-dn(h),w=1<<v;i|=r[v],h&=~w}return Fs=i,Ao(),c}function q_(r,i){ct=null,X.H=lu,i===Cl||i===Kd?(i=lv(),Pt=3):i===mp?(i=lv(),Pt=4):Pt=i===Hp?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Qr=i,yt===null&&(_n=1,ch(r,d(i,r.current)))}function Z_(){var r=Xr.current;return r===null?!0:(Et&4194048)===Et?Ti===null:(Et&62914560)===Et||(Et&536870912)!==0?r===Ti:!1}function V_(){var r=X.H;return X.H=lu,r===null?lu:r}function K_(){var r=X.A;return X.A=uj,r}function xh(){_n=4,Oa||(Et&4194048)!==Et&&Xr.current!==null||(Ul=!0),(Da&134217727)===0&&(zo&134217727)===0||Yt===null||Ra(Yt,Et,ei,!1)}function d0(r,i,c){var h=Ct;Ct|=2;var v=V_(),w=K_();(Yt!==r||Et!==i)&&(vh=null,Fl(r,i)),i=!1;var O=_n;e:do try{if(Pt!==0&&yt!==null){var z=yt,ne=Qr;switch(Pt){case 8:u0(),O=6;break e;case 3:case 2:case 9:case 6:Xr.current===null&&(i=!0);var be=Pt;if(Pt=0,Qr=null,Yl(r,z,ne,be),c&&Ul){O=0;break e}break;default:be=Pt,Pt=0,Qr=null,Yl(r,z,ne,be)}}fj(),O=_n;break}catch(Ae){q_(r,Ae)}while(!0);return i&&r.shellSuspendCounter++,Vi=ys=null,Ct=h,X.H=v,X.A=w,yt===null&&(Yt=null,Et=0,Ao()),O}function fj(){for(;yt!==null;)W_(yt)}function mj(r,i){var c=Ct;Ct|=2;var h=V_(),v=K_();Yt!==r||Et!==i?(vh=null,yh=Fe()+500,Fl(r,i)):Ul=mi(r,i);e:do try{if(Pt!==0&&yt!==null){i=yt;var w=Qr;t:switch(Pt){case 1:Pt=0,Qr=null,Yl(r,i,w,1);break;case 2:case 9:if(av(w)){Pt=0,Qr=null,X_(i);break}i=function(){Pt!==2&&Pt!==9||Yt!==r||(Pt=7),_s(r)},w.then(i,i);break e;case 3:Pt=7;break e;case 4:Pt=5;break e;case 7:av(w)?(Pt=0,Qr=null,X_(i)):(Pt=0,Qr=null,Yl(r,i,w,7));break;case 5:var O=null;switch(yt.tag){case 26:O=yt.memoizedState;case 5:case 27:var z=yt;if(O?Bx(O):z.stateNode.complete){Pt=0,Qr=null;var ne=z.sibling;if(ne!==null)yt=ne;else{var be=z.return;be!==null?(yt=be,wh(be)):yt=null}break t}}Pt=0,Qr=null,Yl(r,i,w,5);break;case 6:Pt=0,Qr=null,Yl(r,i,w,6);break;case 8:u0(),_n=6;break e;default:throw Error(s(462))}}pj();break}catch(Ae){q_(r,Ae)}while(!0);return Vi=ys=null,X.H=h,X.A=v,Ct=c,yt!==null?0:(Yt=null,Et=0,Ao(),_n)}function pj(){for(;yt!==null&&!he();)W_(yt)}function W_(r){var i=__(r.alternate,r,Fs);r.memoizedProps=r.pendingProps,i===null?wh(r):yt=i}function X_(r){var i=r,c=i.alternate;switch(i.tag){case 15:case 0:i=m_(c,i,i.pendingProps,i.type,void 0,Et);break;case 11:i=m_(c,i,i.pendingProps,i.type.render,i.ref,Et);break;case 5:kp(i);default:w_(c,i),i=yt=Zc(i,Fs),i=__(c,i,Fs)}r.memoizedProps=r.pendingProps,i===null?wh(r):yt=i}function Yl(r,i,c,h){Vi=ys=null,kp(i),Rl=null,eu=0;var v=i.return;try{if(rj(r,v,i,c,Et)){_n=1,ch(r,d(c,r.current)),yt=null;return}}catch(w){if(v!==null)throw yt=v,w;_n=1,ch(r,d(c,r.current)),yt=null;return}i.flags&32768?(bt||h===1?r=!0:Ul||(Et&536870912)!==0?r=!1:(Oa=r=!0,(h===2||h===9||h===3||h===6)&&(h=Xr.current,h!==null&&h.tag===13&&(h.flags|=16384))),J_(i,r)):wh(i)}function wh(r){var i=r;do{if((i.flags&32768)!==0){J_(i,Oa);return}r=i.return;var c=aj(i.alternate,i,Fs);if(c!==null){yt=c;return}if(i=i.sibling,i!==null){yt=i;return}yt=i=r}while(i!==null);_n===0&&(_n=5)}function J_(r,i){do{var c=oj(r.alternate,r);if(c!==null){c.flags&=32767,yt=c;return}if(c=r.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!i&&(r=r.sibling,r!==null)){yt=r;return}yt=r=c}while(r!==null);_n=6,yt=null}function Q_(r,i,c,h,v,w,O,z,ne){r.cancelPendingCommit=null;do Sh();while(Un!==0);if((Ct&6)!==0)throw Error(s(327));if(i!==null){if(i===r.current)throw Error(s(177));if(w=i.lanes|i.childLanes,w|=kl,to(r,c,w,O,z,ne),r===Yt&&(yt=Yt=null,Et=0),Gl=i,Ca=r,Ys=c,o0=w,l0=v,H_=h,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,vj(qt,function(){return ix(),null})):(r.callbackNode=null,r.callbackPriority=0),h=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||h){h=X.T,X.T=null,v=ae.p,ae.p=2,O=Ct,Ct|=4;try{lj(r,i,c)}finally{Ct=O,ae.p=v,X.T=h}}Un=1,ex(),tx(),nx()}}function ex(){if(Un===1){Un=0;var r=Ca,i=Gl,c=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||c){c=X.T,X.T=null;var h=ae.p;ae.p=2;var v=Ct;Ct|=4;try{R_(i,r);var w=S0,O=wo(r.containerInfo),z=w.focusedElem,ne=w.selectionRange;if(O!==z&&z&&z.ownerDocument&&wl(z.ownerDocument.documentElement,z)){if(ne!==null&&ds(z)){var be=ne.start,Ae=ne.end;if(Ae===void 0&&(Ae=be),"selectionStart"in z)z.selectionStart=be,z.selectionEnd=Math.min(Ae,z.value.length);else{var De=z.ownerDocument||document,_e=De&&De.defaultView||window;if(_e.getSelection){var we=_e.getSelection(),qe=z.textContent.length,nt=Math.min(ne.start,qe),Ht=ne.end===void 0?nt:Math.min(ne.end,qe);!we.extend&&nt>Ht&&(O=Ht,Ht=nt,nt=O);var ue=xo(z,nt),se=xo(z,Ht);if(ue&&se&&(we.rangeCount!==1||we.anchorNode!==ue.node||we.anchorOffset!==ue.offset||we.focusNode!==se.node||we.focusOffset!==se.offset)){var ge=De.createRange();ge.setStart(ue.node,ue.offset),we.removeAllRanges(),nt>Ht?(we.addRange(ge),we.extend(se.node,se.offset)):(ge.setEnd(se.node,se.offset),we.addRange(ge))}}}}for(De=[],we=z;we=we.parentNode;)we.nodeType===1&&De.push({element:we,left:we.scrollLeft,top:we.scrollTop});for(typeof z.focus=="function"&&z.focus(),z=0;z<De.length;z++){var Ne=De[z];Ne.element.scrollLeft=Ne.left,Ne.element.scrollTop=Ne.top}}Lh=!!w0,S0=w0=null}finally{Ct=v,ae.p=h,X.T=c}}r.current=i,Un=2}}function tx(){if(Un===2){Un=0;var r=Ca,i=Gl,c=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||c){c=X.T,X.T=null;var h=ae.p;ae.p=2;var v=Ct;Ct|=4;try{N_(r,i.alternate,i)}finally{Ct=v,ae.p=h,X.T=c}}Un=3}}function nx(){if(Un===4||Un===3){Un=0,Pe();var r=Ca,i=Gl,c=Ys,h=H_;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Un=5:(Un=0,Gl=Ca=null,rx(r,r.pendingLanes));var v=r.pendingLanes;if(v===0&&(Ma=null),Ve(c),i=i.stateNode,Mt&&typeof Mt.onCommitFiberRoot=="function")try{Mt.onCommitFiberRoot(un,i,void 0,(i.current.flags&128)===128)}catch{}if(h!==null){i=X.T,v=ae.p,ae.p=2,X.T=null;try{for(var w=r.onRecoverableError,O=0;O<h.length;O++){var z=h[O];w(z.value,{componentStack:z.stack})}}finally{X.T=i,ae.p=v}}(Ys&3)!==0&&Sh(),_s(r),v=r.pendingLanes,(c&261930)!==0&&(v&42)!==0?r===c0?bu++:(bu=0,c0=r):bu=0,yu(0)}}function rx(r,i){(r.pooledCacheLanes&=i)===0&&(i=r.pooledCache,i!=null&&(r.pooledCache=null,Jc(i)))}function Sh(){return ex(),tx(),nx(),ix()}function ix(){if(Un!==5)return!1;var r=Ca,i=o0;o0=0;var c=Ve(Ys),h=X.T,v=ae.p;try{ae.p=32>c?32:c,X.T=null,c=l0,l0=null;var w=Ca,O=Ys;if(Un=0,Gl=Ca=null,Ys=0,(Ct&6)!==0)throw Error(s(331));var z=Ct;if(Ct|=4,I_(w.current),B_(w,w.current,O,c),Ct=z,yu(0,!1),Mt&&typeof Mt.onPostCommitFiberRoot=="function")try{Mt.onPostCommitFiberRoot(un,w)}catch{}return!0}finally{ae.p=v,X.T=h,rx(r,i)}}function sx(r,i,c){i=d(c,i),i=Up(r.stateNode,i,2),r=ka(r,i,2),r!==null&&(Ui(r,2),_s(r))}function $t(r,i,c){if(r.tag===3)sx(r,r,c);else for(;i!==null;){if(i.tag===3){sx(i,r,c);break}else if(i.tag===1){var h=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Ma===null||!Ma.has(h))){r=d(c,r),c=a_(2),h=ka(i,c,2),h!==null&&(o_(c,h,i,r),Ui(h,2),_s(h));break}}i=i.return}}function h0(r,i,c){var h=r.pingCache;if(h===null){h=r.pingCache=new dj;var v=new Set;h.set(i,v)}else v=h.get(i),v===void 0&&(v=new Set,h.set(i,v));v.has(c)||(i0=!0,v.add(c),r=gj.bind(null,r,i,c),i.then(r,r))}function gj(r,i,c){var h=r.pingCache;h!==null&&h.delete(i),r.pingedLanes|=r.suspendedLanes&c,r.warmLanes&=~c,Yt===r&&(Et&c)===c&&(_n===4||_n===3&&(Et&62914560)===Et&&300>Fe()-bh?(Ct&2)===0&&Fl(r,0):s0|=c,Hl===Et&&(Hl=0)),_s(r)}function ax(r,i){i===0&&(i=Qa()),r=Si(r,i),r!==null&&(Ui(r,i),_s(r))}function bj(r){var i=r.memoizedState,c=0;i!==null&&(c=i.retryLane),ax(r,c)}function yj(r,i){var c=0;switch(r.tag){case 31:case 13:var h=r.stateNode,v=r.memoizedState;v!==null&&(c=v.retryLane);break;case 19:h=r.stateNode;break;case 22:h=r.stateNode._retryCache;break;default:throw Error(s(314))}h!==null&&h.delete(i),ax(r,c)}function vj(r,i){return Ie(r,i)}var Eh=null,ql=null,f0=!1,Th=!1,m0=!1,La=0;function _s(r){r!==ql&&r.next===null&&(ql===null?Eh=ql=r:ql=ql.next=r),Th=!0,f0||(f0=!0,xj())}function yu(r,i){if(!m0&&Th){m0=!0;do for(var c=!1,h=Eh;h!==null;){if(r!==0){var v=h.pendingLanes;if(v===0)var w=0;else{var O=h.suspendedLanes,z=h.pingedLanes;w=(1<<31-dn(42|r)+1)-1,w&=v&~(O&~z),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(c=!0,ux(h,w))}else w=Et,w=or(h,h===Yt?w:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(w&3)===0||mi(h,w)||(c=!0,ux(h,w));h=h.next}while(c);m0=!1}}function _j(){ox()}function ox(){Th=f0=!1;var r=0;La!==0&&Dj()&&(r=La);for(var i=Fe(),c=null,h=Eh;h!==null;){var v=h.next,w=lx(h,i);w===0?(h.next=null,c===null?Eh=v:c.next=v,v===null&&(ql=c)):(c=h,(r!==0||(w&3)!==0)&&(Th=!0)),h=v}Un!==0&&Un!==5||yu(r),La!==0&&(La=0)}function lx(r,i){for(var c=r.suspendedLanes,h=r.pingedLanes,v=r.expirationTimes,w=r.pendingLanes&-62914561;0<w;){var O=31-dn(w),z=1<<O,ne=v[O];ne===-1?((z&c)===0||(z&h)!==0)&&(v[O]=ia(z,i)):ne<=i&&(r.expiredLanes|=z),w&=~z}if(i=Yt,c=Et,c=or(r,r===i?c:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),h=r.callbackNode,c===0||r===i&&(Pt===2||Pt===9)||r.cancelPendingCommit!==null)return h!==null&&h!==null&&le(h),r.callbackNode=null,r.callbackPriority=0;if((c&3)===0||mi(r,c)){if(i=c&-c,i===r.callbackPriority)return i;switch(h!==null&&le(h),Ve(c)){case 2:case 8:c=et;break;case 32:c=qt;break;case 268435456:c=En;break;default:c=qt}return h=cx.bind(null,r),c=Ie(c,h),r.callbackPriority=i,r.callbackNode=c,i}return h!==null&&h!==null&&le(h),r.callbackPriority=2,r.callbackNode=null,2}function cx(r,i){if(Un!==0&&Un!==5)return r.callbackNode=null,r.callbackPriority=0,null;var c=r.callbackNode;if(Sh()&&r.callbackNode!==c)return null;var h=Et;return h=or(r,r===Yt?h:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),h===0?null:(F_(r,h,i),lx(r,Fe()),r.callbackNode!=null&&r.callbackNode===c?cx.bind(null,r):null)}function ux(r,i){if(Sh())return null;F_(r,i,!0)}function xj(){Cj(function(){(Ct&6)!==0?Ie(st,_j):ox()})}function p0(){if(La===0){var r=Dl;r===0&&(r=Tn,Tn<<=1,(Tn&261888)===0&&(Tn=256)),La=r}return La}function dx(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:ua(""+r)}function hx(r,i){var c=i.ownerDocument.createElement("input");return c.name=i.name,c.value=i.value,r.id&&c.setAttribute("form",r.id),i.parentNode.insertBefore(c,i),r=new FormData(r),c.parentNode.removeChild(c),r}function wj(r,i,c,h,v){if(i==="submit"&&c&&c.stateNode===v){var w=dx((v[kn]||null).action),O=h.submitter;O&&(i=(i=O[kn]||null)?dx(i.formAction):O.getAttribute("formAction"),i!==null&&(w=i,O=null));var z=new pl("action","action",null,h,v);r.push({event:z,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(La!==0){var ne=O?hx(v,O):new FormData(v);Lp(c,{pending:!0,data:ne,method:v.method,action:w},null,ne)}}else typeof w=="function"&&(z.preventDefault(),ne=O?hx(v,O):new FormData(v),Lp(c,{pending:!0,data:ne,method:v.method,action:w},w,ne))},currentTarget:v}]})}}for(var g0=0;g0<ms.length;g0++){var b0=ms[g0],Sj=b0.toLowerCase(),Ej=b0[0].toUpperCase()+b0.slice(1);Cr(Sj,"on"+Ej)}Cr(Eo,"onAnimationEnd"),Cr(Gd,"onAnimationIteration"),Cr(To,"onAnimationStart"),Cr("dblclick","onDoubleClick"),Cr("focusin","onFocus"),Cr("focusout","onBlur"),Cr(ap,"onTransitionRun"),Cr(Fd,"onTransitionStart"),Cr(op,"onTransitionCancel"),Cr(xa,"onTransitionEnd"),Wn("onMouseEnter",["mouseout","mouseover"]),Wn("onMouseLeave",["mouseout","mouseover"]),Wn("onPointerEnter",["pointerout","pointerover"]),Wn("onPointerLeave",["pointerout","pointerover"]),gi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),gi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),gi("onBeforeInput",["compositionend","keypress","textInput","paste"]),gi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),gi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),gi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Tj=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(vu));function fx(r,i){i=(i&4)!==0;for(var c=0;c<r.length;c++){var h=r[c],v=h.event;h=h.listeners;e:{var w=void 0;if(i)for(var O=h.length-1;0<=O;O--){var z=h[O],ne=z.instance,be=z.currentTarget;if(z=z.listener,ne!==w&&v.isPropagationStopped())break e;w=z,v.currentTarget=be;try{w(v)}catch(Ae){ko(Ae)}v.currentTarget=null,w=ne}else for(O=0;O<h.length;O++){if(z=h[O],ne=z.instance,be=z.currentTarget,z=z.listener,ne!==w&&v.isPropagationStopped())break e;w=z,v.currentTarget=be;try{w(v)}catch(Ae){ko(Ae)}v.currentTarget=null,w=ne}}}}function vt(r,i){var c=i[pi];c===void 0&&(c=i[pi]=new Set);var h=r+"__bubble";c.has(h)||(mx(i,r,2,!1),c.add(h))}function y0(r,i,c){var h=0;i&&(h|=4),mx(c,r,h,i)}var kh="_reactListening"+Math.random().toString(36).slice(2);function v0(r){if(!r[kh]){r[kh]=!0,aa.forEach(function(c){c!=="selectionchange"&&(Tj.has(c)||y0(c,!1,r),y0(c,!0,r))});var i=r.nodeType===9?r:r.ownerDocument;i===null||i[kh]||(i[kh]=!0,y0("selectionchange",!1,i))}}function mx(r,i,c,h){switch(Gx(i)){case 2:var v=Qj;break;case 8:v=eN;break;default:v=R0}c=v.bind(null,i,c,r),v=void 0,!ho||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(v=!0),h?v!==void 0?r.addEventListener(i,c,{capture:!0,passive:v}):r.addEventListener(i,c,!0):v!==void 0?r.addEventListener(i,c,{passive:v}):r.addEventListener(i,c,!1)}function _0(r,i,c,h,v){var w=h;if((i&1)===0&&(i&2)===0&&h!==null)e:for(;;){if(h===null)return;var O=h.tag;if(O===3||O===4){var z=h.stateNode.containerInfo;if(z===v)break;if(O===4)for(O=h.return;O!==null;){var ne=O.tag;if((ne===3||ne===4)&&O.stateNode.containerInfo===v)return;O=O.return}for(;z!==null;){if(O=dt(z),O===null)return;if(ne=O.tag,ne===5||ne===6||ne===26||ne===27){h=w=O;continue e}z=z.parentNode}}h=h.return}Bc(function(){var be=w,Ae=uo(c),De=[];e:{var _e=Yd.get(r);if(_e!==void 0){var we=pl,qe=r;switch(r){case"keypress":if(fo(c)===0)break e;case"keydown":case"keyup":we=Dd;break;case"focusin":qe="focus",we=Ic;break;case"focusout":qe="blur",we=Ic;break;case"beforeblur":case"afterblur":we=Ic;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":we=kd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":we=Km;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":we=ep;break;case Eo:case Gd:case To:we=zc;break;case xa:we=Rd;break;case"scroll":case"scrollend":we=St;break;case"wheel":we=Ds;break;case"copy":case"cut":case"paste":we=vi;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":we=Md;break;case"toggle":case"beforetoggle":we=go}var nt=(i&4)!==0,Ht=!nt&&(r==="scroll"||r==="scrollend"),ue=nt?_e!==null?_e+"Capture":null:_e;nt=[];for(var se=be,ge;se!==null;){var Ne=se;if(ge=Ne.stateNode,Ne=Ne.tag,Ne!==5&&Ne!==26&&Ne!==27||ge===null||ue===null||(Ne=Ns(se,ue),Ne!=null&&nt.push(_u(se,Ne,ge))),Ht)break;se=se.return}0<nt.length&&(_e=new we(_e,qe,null,c,Ae),De.push({event:_e,listeners:nt}))}}if((i&7)===0){e:{if(_e=r==="mouseover"||r==="pointerover",we=r==="mouseout"||r==="pointerout",_e&&c!==ml&&(qe=c.relatedTarget||c.fromElement)&&(dt(qe)||qe[qr]))break e;if((we||_e)&&(_e=Ae.window===Ae?Ae:(_e=Ae.ownerDocument)?_e.defaultView||_e.parentWindow:window,we?(qe=c.relatedTarget||c.toElement,we=be,qe=qe?dt(qe):null,qe!==null&&(Ht=l(qe),nt=qe.tag,qe!==Ht||nt!==5&&nt!==27&&nt!==6)&&(qe=null)):(we=null,qe=be),we!==qe)){if(nt=kd,Ne="onMouseLeave",ue="onMouseEnter",se="mouse",(r==="pointerout"||r==="pointerover")&&(nt=Md,Ne="onPointerLeave",ue="onPointerEnter",se="pointer"),Ht=we==null?_e:mt(we),ge=qe==null?_e:mt(qe),_e=new nt(Ne,se+"leave",we,c,Ae),_e.target=Ht,_e.relatedTarget=ge,Ne=null,dt(Ae)===be&&(nt=new nt(ue,se+"enter",qe,c,Ae),nt.target=ge,nt.relatedTarget=Ht,Ne=nt),Ht=Ne,we&&qe)t:{for(nt=kj,ue=we,se=qe,ge=0,Ne=ue;Ne;Ne=nt(Ne))ge++;Ne=0;for(var Qe=se;Qe;Qe=nt(Qe))Ne++;for(;0<ge-Ne;)ue=nt(ue),ge--;for(;0<Ne-ge;)se=nt(se),Ne--;for(;ge--;){if(ue===se||se!==null&&ue===se.alternate){nt=ue;break t}ue=nt(ue),se=nt(se)}nt=null}else nt=null;we!==null&&px(De,_e,we,nt,!1),qe!==null&&Ht!==null&&px(De,Ht,qe,nt,!0)}}e:{if(_e=be?mt(be):window,we=_e.nodeName&&_e.nodeName.toLowerCase(),we==="select"||we==="input"&&_e.type==="file")var Ot=_o;else if(_i(_e))if($d)Ot=sp;else{Ot=ip;var Ke=Yi}else we=_e.nodeName,!we||we.toLowerCase()!=="input"||_e.type!=="checkbox"&&_e.type!=="radio"?be&&co(be.elementType)&&(Ot=_o):Ot=ba;if(Ot&&(Ot=Ot(r,be))){Pd(De,Ot,c,Ae);break e}Ke&&Ke(r,_e,be),r==="focusout"&&be&&_e.type==="number"&&be.memoizedProps.value!=null&&Hi(_e,"number",_e.value)}switch(Ke=be?mt(be):window,r){case"focusin":(_i(Ke)||Ke.contentEditable==="true")&&(hs=Ke,El=be,So=null);break;case"focusout":So=El=hs=null;break;case"mousedown":va=!0;break;case"contextmenu":case"mouseup":case"dragend":va=!1,Ud(De,c,Ae);break;case"selectionchange":if(Sl)break;case"keydown":case"keyup":Ud(De,c,Ae)}var ft;if(bl)e:{switch(r){case"compositionstart":var Tt="onCompositionStart";break e;case"compositionend":Tt="onCompositionEnd";break e;case"compositionupdate":Tt="onCompositionUpdate";break e}Tt=void 0}else ma?Bd(r,c)&&(Tt="onCompositionEnd"):r==="keydown"&&c.keyCode===229&&(Tt="onCompositionStart");Tt&&(yl&&c.locale!=="ko"&&(ma||Tt!=="onCompositionStart"?Tt==="onCompositionEnd"&&ma&&(ft=cs()):(yi=Ae,Os="value"in yi?yi.value:yi.textContent,ma=!0)),Ke=Ah(be,Tt),0<Ke.length&&(Tt=new Uc(Tt,r,null,c,Ae),De.push({event:Tt,listeners:Ke}),ft?Tt.data=ft:(ft=Yc(c),ft!==null&&(Tt.data=ft)))),(ft=np?Wr(r,c):pa(r,c))&&(Tt=Ah(be,"onBeforeInput"),0<Tt.length&&(Ke=new Uc("onBeforeInput","beforeinput",null,c,Ae),De.push({event:Ke,listeners:Tt}),Ke.data=ft)),wj(De,r,be,c,Ae)}fx(De,i)})}function _u(r,i,c){return{instance:r,listener:i,currentTarget:c}}function Ah(r,i){for(var c=i+"Capture",h=[];r!==null;){var v=r,w=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||w===null||(v=Ns(r,c),v!=null&&h.unshift(_u(r,v,w)),v=Ns(r,i),v!=null&&h.push(_u(r,v,w))),r.tag===3)return h;r=r.return}return[]}function kj(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function px(r,i,c,h,v){for(var w=i._reactName,O=[];c!==null&&c!==h;){var z=c,ne=z.alternate,be=z.stateNode;if(z=z.tag,ne!==null&&ne===h)break;z!==5&&z!==26&&z!==27||be===null||(ne=be,v?(be=Ns(c,w),be!=null&&O.unshift(_u(c,be,ne))):v||(be=Ns(c,w),be!=null&&O.push(_u(c,be,ne)))),c=c.return}O.length!==0&&r.push({event:i,listeners:O})}var Aj=/\r\n?/g,jj=/\u0000|\uFFFD/g;function gx(r){return(typeof r=="string"?r:""+r).replace(Aj,`
`).replace(jj,"")}function bx(r,i){return i=gx(i),gx(r)===i}function Ut(r,i,c,h,v,w){switch(c){case"children":typeof h=="string"?i==="body"||i==="textarea"&&h===""||bi(r,h):(typeof h=="number"||typeof h=="bigint")&&i!=="body"&&bi(r,""+h);break;case"className":It(r,"class",h);break;case"tabIndex":It(r,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":It(r,c,h);break;case"style":hl(r,h,w);break;case"data":if(i!=="object"){It(r,"data",h);break}case"src":case"href":if(h===""&&(i!=="a"||c!=="href")){r.removeAttribute(c);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){r.removeAttribute(c);break}h=ua(""+h),r.setAttribute(c,h);break;case"action":case"formAction":if(typeof h=="function"){r.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(c==="formAction"?(i!=="input"&&Ut(r,i,"name",v.name,v,null),Ut(r,i,"formEncType",v.formEncType,v,null),Ut(r,i,"formMethod",v.formMethod,v,null),Ut(r,i,"formTarget",v.formTarget,v,null)):(Ut(r,i,"encType",v.encType,v,null),Ut(r,i,"method",v.method,v,null),Ut(r,i,"target",v.target,v,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){r.removeAttribute(c);break}h=ua(""+h),r.setAttribute(c,h);break;case"onClick":h!=null&&(r.onclick=Dr);break;case"onScroll":h!=null&&vt("scroll",r);break;case"onScrollEnd":h!=null&&vt("scrollend",r);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(s(61));if(c=h.__html,c!=null){if(v.children!=null)throw Error(s(60));r.innerHTML=c}}break;case"multiple":r.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":r.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){r.removeAttribute("xlink:href");break}c=ua(""+h),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?r.setAttribute(c,""+h):r.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?r.setAttribute(c,""):r.removeAttribute(c);break;case"capture":case"download":h===!0?r.setAttribute(c,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?r.setAttribute(c,h):r.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?r.setAttribute(c,h):r.removeAttribute(c);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?r.removeAttribute(c):r.setAttribute(c,h);break;case"popover":vt("beforetoggle",r),vt("toggle",r),gt(r,"popover",h);break;case"xlinkActuate":Or(r,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":Or(r,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":Or(r,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":Or(r,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":Or(r,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":Or(r,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":Or(r,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":Or(r,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":Or(r,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":gt(r,"is",h);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=fl.get(c)||c,gt(r,c,h))}}function x0(r,i,c,h,v,w){switch(c){case"style":hl(r,h,w);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(s(61));if(c=h.__html,c!=null){if(v.children!=null)throw Error(s(60));r.innerHTML=c}}break;case"children":typeof h=="string"?bi(r,h):(typeof h=="number"||typeof h=="bigint")&&bi(r,""+h);break;case"onScroll":h!=null&&vt("scroll",r);break;case"onScrollEnd":h!=null&&vt("scrollend",r);break;case"onClick":h!=null&&(r.onclick=Dr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!io.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(v=c.endsWith("Capture"),i=c.slice(2,v?c.length-7:void 0),w=r[kn]||null,w=w!=null?w[c]:null,typeof w=="function"&&r.removeEventListener(i,w,v),typeof h=="function")){typeof w!="function"&&w!==null&&(c in r?r[c]=null:r.hasAttribute(c)&&r.removeAttribute(c)),r.addEventListener(i,h,v);break e}c in r?r[c]=h:h===!0?r.setAttribute(c,""):gt(r,c,h)}}}function er(r,i,c){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":vt("error",r),vt("load",r);var h=!1,v=!1,w;for(w in c)if(c.hasOwnProperty(w)){var O=c[w];if(O!=null)switch(w){case"src":h=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Ut(r,i,w,O,c,null)}}v&&Ut(r,i,"srcSet",c.srcSet,c,null),h&&Ut(r,i,"src",c.src,c,null);return;case"input":vt("invalid",r);var z=w=O=v=null,ne=null,be=null;for(h in c)if(c.hasOwnProperty(h)){var Ae=c[h];if(Ae!=null)switch(h){case"name":v=Ae;break;case"type":O=Ae;break;case"checked":ne=Ae;break;case"defaultChecked":be=Ae;break;case"value":w=Ae;break;case"defaultValue":z=Ae;break;case"children":case"dangerouslySetInnerHTML":if(Ae!=null)throw Error(s(137,i));break;default:Ut(r,i,h,Ae,c,null)}}lo(r,w,z,ne,be,O,v,!1);return;case"select":vt("invalid",r),h=O=w=null;for(v in c)if(c.hasOwnProperty(v)&&(z=c[v],z!=null))switch(v){case"value":w=z;break;case"defaultValue":O=z;break;case"multiple":h=z;default:Ut(r,i,v,z,c,null)}i=w,c=O,r.multiple=!!h,i!=null?Ft(r,!!h,i,!1):c!=null&&Ft(r,!!h,c,!0);return;case"textarea":vt("invalid",r),w=v=h=null;for(O in c)if(c.hasOwnProperty(O)&&(z=c[O],z!=null))switch(O){case"value":h=z;break;case"defaultValue":v=z;break;case"children":w=z;break;case"dangerouslySetInnerHTML":if(z!=null)throw Error(s(91));break;default:Ut(r,i,O,z,c,null)}la(r,h,v,w);return;case"option":for(ne in c)if(c.hasOwnProperty(ne)&&(h=c[ne],h!=null))switch(ne){case"selected":r.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:Ut(r,i,ne,h,c,null)}return;case"dialog":vt("beforetoggle",r),vt("toggle",r),vt("cancel",r),vt("close",r);break;case"iframe":case"object":vt("load",r);break;case"video":case"audio":for(h=0;h<vu.length;h++)vt(vu[h],r);break;case"image":vt("error",r),vt("load",r);break;case"details":vt("toggle",r);break;case"embed":case"source":case"link":vt("error",r),vt("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(be in c)if(c.hasOwnProperty(be)&&(h=c[be],h!=null))switch(be){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Ut(r,i,be,h,c,null)}return;default:if(co(i)){for(Ae in c)c.hasOwnProperty(Ae)&&(h=c[Ae],h!==void 0&&x0(r,i,Ae,h,c,void 0));return}}for(z in c)c.hasOwnProperty(z)&&(h=c[z],h!=null&&Ut(r,i,z,h,c,null))}function Nj(r,i,c,h){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,w=null,O=null,z=null,ne=null,be=null,Ae=null;for(we in c){var De=c[we];if(c.hasOwnProperty(we)&&De!=null)switch(we){case"checked":break;case"value":break;case"defaultValue":ne=De;default:h.hasOwnProperty(we)||Ut(r,i,we,null,h,De)}}for(var _e in h){var we=h[_e];if(De=c[_e],h.hasOwnProperty(_e)&&(we!=null||De!=null))switch(_e){case"type":w=we;break;case"name":v=we;break;case"checked":be=we;break;case"defaultChecked":Ae=we;break;case"value":O=we;break;case"defaultValue":z=we;break;case"children":case"dangerouslySetInnerHTML":if(we!=null)throw Error(s(137,i));break;default:we!==De&&Ut(r,i,_e,we,h,De)}}Cc(r,O,z,ne,be,Ae,w,v);return;case"select":we=O=z=_e=null;for(w in c)if(ne=c[w],c.hasOwnProperty(w)&&ne!=null)switch(w){case"value":break;case"multiple":we=ne;default:h.hasOwnProperty(w)||Ut(r,i,w,null,h,ne)}for(v in h)if(w=h[v],ne=c[v],h.hasOwnProperty(v)&&(w!=null||ne!=null))switch(v){case"value":_e=w;break;case"defaultValue":z=w;break;case"multiple":O=w;default:w!==ne&&Ut(r,i,v,w,h,ne)}i=z,c=O,h=we,_e!=null?Ft(r,!!c,_e,!1):!!h!=!!c&&(i!=null?Ft(r,!!c,i,!0):Ft(r,!!c,c?[]:"",!1));return;case"textarea":we=_e=null;for(z in c)if(v=c[z],c.hasOwnProperty(z)&&v!=null&&!h.hasOwnProperty(z))switch(z){case"value":break;case"children":break;default:Ut(r,i,z,null,h,v)}for(O in h)if(v=h[O],w=c[O],h.hasOwnProperty(O)&&(v!=null||w!=null))switch(O){case"value":_e=v;break;case"defaultValue":we=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(s(91));break;default:v!==w&&Ut(r,i,O,v,h,w)}ls(r,_e,we);return;case"option":for(var qe in c)if(_e=c[qe],c.hasOwnProperty(qe)&&_e!=null&&!h.hasOwnProperty(qe))switch(qe){case"selected":r.selected=!1;break;default:Ut(r,i,qe,null,h,_e)}for(ne in h)if(_e=h[ne],we=c[ne],h.hasOwnProperty(ne)&&_e!==we&&(_e!=null||we!=null))switch(ne){case"selected":r.selected=_e&&typeof _e!="function"&&typeof _e!="symbol";break;default:Ut(r,i,ne,_e,h,we)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var nt in c)_e=c[nt],c.hasOwnProperty(nt)&&_e!=null&&!h.hasOwnProperty(nt)&&Ut(r,i,nt,null,h,_e);for(be in h)if(_e=h[be],we=c[be],h.hasOwnProperty(be)&&_e!==we&&(_e!=null||we!=null))switch(be){case"children":case"dangerouslySetInnerHTML":if(_e!=null)throw Error(s(137,i));break;default:Ut(r,i,be,_e,h,we)}return;default:if(co(i)){for(var Ht in c)_e=c[Ht],c.hasOwnProperty(Ht)&&_e!==void 0&&!h.hasOwnProperty(Ht)&&x0(r,i,Ht,void 0,h,_e);for(Ae in h)_e=h[Ae],we=c[Ae],!h.hasOwnProperty(Ae)||_e===we||_e===void 0&&we===void 0||x0(r,i,Ae,_e,h,we);return}}for(var ue in c)_e=c[ue],c.hasOwnProperty(ue)&&_e!=null&&!h.hasOwnProperty(ue)&&Ut(r,i,ue,null,h,_e);for(De in h)_e=h[De],we=c[De],!h.hasOwnProperty(De)||_e===we||_e==null&&we==null||Ut(r,i,De,_e,h,we)}function yx(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Oj(){if(typeof performance.getEntriesByType=="function"){for(var r=0,i=0,c=performance.getEntriesByType("resource"),h=0;h<c.length;h++){var v=c[h],w=v.transferSize,O=v.initiatorType,z=v.duration;if(w&&z&&yx(O)){for(O=0,z=v.responseEnd,h+=1;h<c.length;h++){var ne=c[h],be=ne.startTime;if(be>z)break;var Ae=ne.transferSize,De=ne.initiatorType;Ae&&yx(De)&&(ne=ne.responseEnd,O+=Ae*(ne<z?1:(z-be)/(ne-be)))}if(--h,i+=8*(w+O)/(v.duration/1e3),r++,10<r)break}}if(0<r)return i/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var w0=null,S0=null;function jh(r){return r.nodeType===9?r:r.ownerDocument}function vx(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function _x(r,i){if(r===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&i==="foreignObject"?0:r}function E0(r,i){return r==="textarea"||r==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var T0=null;function Dj(){var r=window.event;return r&&r.type==="popstate"?r===T0?!1:(T0=r,!0):(T0=null,!1)}var xx=typeof setTimeout=="function"?setTimeout:void 0,Mj=typeof clearTimeout=="function"?clearTimeout:void 0,wx=typeof Promise=="function"?Promise:void 0,Cj=typeof queueMicrotask=="function"?queueMicrotask:typeof wx<"u"?function(r){return wx.resolve(null).then(r).catch(Rj)}:xx;function Rj(r){setTimeout(function(){throw r})}function Ba(r){return r==="head"}function Sx(r,i){var c=i,h=0;do{var v=c.nextSibling;if(r.removeChild(c),v&&v.nodeType===8)if(c=v.data,c==="/$"||c==="/&"){if(h===0){r.removeChild(v),Wl(i);return}h--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")h++;else if(c==="html")xu(r.ownerDocument.documentElement);else if(c==="head"){c=r.ownerDocument.head,xu(c);for(var w=c.firstChild;w;){var O=w.nextSibling,z=w.nodeName;w[pt]||z==="SCRIPT"||z==="STYLE"||z==="LINK"&&w.rel.toLowerCase()==="stylesheet"||c.removeChild(w),w=O}}else c==="body"&&xu(r.ownerDocument.body);c=v}while(c);Wl(i)}function Ex(r,i){var c=r;r=0;do{var h=c.nextSibling;if(c.nodeType===1?i?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(i?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),h&&h.nodeType===8)if(c=h.data,c==="/$"){if(r===0)break;r--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||r++;c=h}while(c)}function k0(r){var i=r.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var c=i;switch(i=i.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":k0(c),tt(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}r.removeChild(c)}}function Lj(r,i,c,h){for(;r.nodeType===1;){var v=c;if(r.nodeName.toLowerCase()!==i.toLowerCase()){if(!h&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(h){if(!r[pt])switch(i){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(w=r.getAttribute("rel"),w==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(w!==v.rel||r.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||r.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||r.getAttribute("title")!==(v.title==null?null:v.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(w=r.getAttribute("src"),(w!==(v.src==null?null:v.src)||r.getAttribute("type")!==(v.type==null?null:v.type)||r.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&w&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(i==="input"&&r.type==="hidden"){var w=v.name==null?null:""+v.name;if(v.type==="hidden"&&r.getAttribute("name")===w)return r}else return r;if(r=ki(r.nextSibling),r===null)break}return null}function Bj(r,i,c){if(i==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!c||(r=ki(r.nextSibling),r===null))return null;return r}function Tx(r,i){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!i||(r=ki(r.nextSibling),r===null))return null;return r}function A0(r){return r.data==="$?"||r.data==="$~"}function j0(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function Pj(r,i){var c=r.ownerDocument;if(r.data==="$~")r._reactRetry=i;else if(r.data!=="$?"||c.readyState!=="loading")i();else{var h=function(){i(),c.removeEventListener("DOMContentLoaded",h)};c.addEventListener("DOMContentLoaded",h),r._reactRetry=h}}function ki(r){for(;r!=null;r=r.nextSibling){var i=r.nodeType;if(i===1||i===3)break;if(i===8){if(i=r.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return r}var N0=null;function kx(r){r=r.nextSibling;for(var i=0;r;){if(r.nodeType===8){var c=r.data;if(c==="/$"||c==="/&"){if(i===0)return ki(r.nextSibling);i--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||i++}r=r.nextSibling}return null}function Ax(r){r=r.previousSibling;for(var i=0;r;){if(r.nodeType===8){var c=r.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(i===0)return r;i--}else c!=="/$"&&c!=="/&"||i++}r=r.previousSibling}return null}function jx(r,i,c){switch(i=jh(c),r){case"html":if(r=i.documentElement,!r)throw Error(s(452));return r;case"head":if(r=i.head,!r)throw Error(s(453));return r;case"body":if(r=i.body,!r)throw Error(s(454));return r;default:throw Error(s(451))}}function xu(r){for(var i=r.attributes;i.length;)r.removeAttributeNode(i[0]);tt(r)}var Ai=new Map,Nx=new Set;function Nh(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var qs=ae.d;ae.d={f:$j,r:Ij,D:zj,C:Uj,L:Hj,m:Gj,X:Yj,S:Fj,M:qj};function $j(){var r=qs.f(),i=_h();return r||i}function Ij(r){var i=xt(r);i!==null&&i.tag===5&&i.type==="form"?qv(i):qs.r(r)}var Zl=typeof document>"u"?null:document;function Ox(r,i,c){var h=Zl;if(h&&typeof i=="string"&&i){var v=Qt(i);v='link[rel="'+r+'"][href="'+v+'"]',typeof c=="string"&&(v+='[crossorigin="'+c+'"]'),Nx.has(v)||(Nx.add(v),r={rel:r,crossOrigin:c,href:i},h.querySelector(v)===null&&(i=h.createElement("link"),er(i,"link",r),wt(i),h.head.appendChild(i)))}}function zj(r){qs.D(r),Ox("dns-prefetch",r,null)}function Uj(r,i){qs.C(r,i),Ox("preconnect",r,i)}function Hj(r,i,c){qs.L(r,i,c);var h=Zl;if(h&&r&&i){var v='link[rel="preload"][as="'+Qt(i)+'"]';i==="image"&&c&&c.imageSrcSet?(v+='[imagesrcset="'+Qt(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(v+='[imagesizes="'+Qt(c.imageSizes)+'"]')):v+='[href="'+Qt(r)+'"]';var w=v;switch(i){case"style":w=Vl(r);break;case"script":w=Kl(r)}Ai.has(w)||(r=_({rel:"preload",href:i==="image"&&c&&c.imageSrcSet?void 0:r,as:i},c),Ai.set(w,r),h.querySelector(v)!==null||i==="style"&&h.querySelector(wu(w))||i==="script"&&h.querySelector(Su(w))||(i=h.createElement("link"),er(i,"link",r),wt(i),h.head.appendChild(i)))}}function Gj(r,i){qs.m(r,i);var c=Zl;if(c&&r){var h=i&&typeof i.as=="string"?i.as:"script",v='link[rel="modulepreload"][as="'+Qt(h)+'"][href="'+Qt(r)+'"]',w=v;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=Kl(r)}if(!Ai.has(w)&&(r=_({rel:"modulepreload",href:r},i),Ai.set(w,r),c.querySelector(v)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Su(w)))return}h=c.createElement("link"),er(h,"link",r),wt(h),c.head.appendChild(h)}}}function Fj(r,i,c){qs.S(r,i,c);var h=Zl;if(h&&r){var v=$n(h).hoistableStyles,w=Vl(r);i=i||"default";var O=v.get(w);if(!O){var z={loading:0,preload:null};if(O=h.querySelector(wu(w)))z.loading=5;else{r=_({rel:"stylesheet",href:r,"data-precedence":i},c),(c=Ai.get(w))&&O0(r,c);var ne=O=h.createElement("link");wt(ne),er(ne,"link",r),ne._p=new Promise(function(be,Ae){ne.onload=be,ne.onerror=Ae}),ne.addEventListener("load",function(){z.loading|=1}),ne.addEventListener("error",function(){z.loading|=2}),z.loading|=4,Oh(O,i,h)}O={type:"stylesheet",instance:O,count:1,state:z},v.set(w,O)}}}function Yj(r,i){qs.X(r,i);var c=Zl;if(c&&r){var h=$n(c).hoistableScripts,v=Kl(r),w=h.get(v);w||(w=c.querySelector(Su(v)),w||(r=_({src:r,async:!0},i),(i=Ai.get(v))&&D0(r,i),w=c.createElement("script"),wt(w),er(w,"link",r),c.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},h.set(v,w))}}function qj(r,i){qs.M(r,i);var c=Zl;if(c&&r){var h=$n(c).hoistableScripts,v=Kl(r),w=h.get(v);w||(w=c.querySelector(Su(v)),w||(r=_({src:r,async:!0,type:"module"},i),(i=Ai.get(v))&&D0(r,i),w=c.createElement("script"),wt(w),er(w,"link",r),c.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},h.set(v,w))}}function Dx(r,i,c,h){var v=(v=Y.current)?Nh(v):null;if(!v)throw Error(s(446));switch(r){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(i=Vl(c.href),c=$n(v).hoistableStyles,h=c.get(i),h||(h={type:"style",instance:null,count:0,state:null},c.set(i,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){r=Vl(c.href);var w=$n(v).hoistableStyles,O=w.get(r);if(O||(v=v.ownerDocument||v,O={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(r,O),(w=v.querySelector(wu(r)))&&!w._p&&(O.instance=w,O.state.loading=5),Ai.has(r)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},Ai.set(r,c),w||Zj(v,r,c,O.state))),i&&h===null)throw Error(s(528,""));return O}if(i&&h!==null)throw Error(s(529,""));return null;case"script":return i=c.async,c=c.src,typeof c=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Kl(c),c=$n(v).hoistableScripts,h=c.get(i),h||(h={type:"script",instance:null,count:0,state:null},c.set(i,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,r))}}function Vl(r){return'href="'+Qt(r)+'"'}function wu(r){return'link[rel="stylesheet"]['+r+"]"}function Mx(r){return _({},r,{"data-precedence":r.precedence,precedence:null})}function Zj(r,i,c,h){r.querySelector('link[rel="preload"][as="style"]['+i+"]")?h.loading=1:(i=r.createElement("link"),h.preload=i,i.addEventListener("load",function(){return h.loading|=1}),i.addEventListener("error",function(){return h.loading|=2}),er(i,"link",c),wt(i),r.head.appendChild(i))}function Kl(r){return'[src="'+Qt(r)+'"]'}function Su(r){return"script[async]"+r}function Cx(r,i,c){if(i.count++,i.instance===null)switch(i.type){case"style":var h=r.querySelector('style[data-href~="'+Qt(c.href)+'"]');if(h)return i.instance=h,wt(h),h;var v=_({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return h=(r.ownerDocument||r).createElement("style"),wt(h),er(h,"style",v),Oh(h,c.precedence,r),i.instance=h;case"stylesheet":v=Vl(c.href);var w=r.querySelector(wu(v));if(w)return i.state.loading|=4,i.instance=w,wt(w),w;h=Mx(c),(v=Ai.get(v))&&O0(h,v),w=(r.ownerDocument||r).createElement("link"),wt(w);var O=w;return O._p=new Promise(function(z,ne){O.onload=z,O.onerror=ne}),er(w,"link",h),i.state.loading|=4,Oh(w,c.precedence,r),i.instance=w;case"script":return w=Kl(c.src),(v=r.querySelector(Su(w)))?(i.instance=v,wt(v),v):(h=c,(v=Ai.get(w))&&(h=_({},c),D0(h,v)),r=r.ownerDocument||r,v=r.createElement("script"),wt(v),er(v,"link",h),r.head.appendChild(v),i.instance=v);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(h=i.instance,i.state.loading|=4,Oh(h,c.precedence,r));return i.instance}function Oh(r,i,c){for(var h=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=h.length?h[h.length-1]:null,w=v,O=0;O<h.length;O++){var z=h[O];if(z.dataset.precedence===i)w=z;else if(w!==v)break}w?w.parentNode.insertBefore(r,w.nextSibling):(i=c.nodeType===9?c.head:c,i.insertBefore(r,i.firstChild))}function O0(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.title==null&&(r.title=i.title)}function D0(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.integrity==null&&(r.integrity=i.integrity)}var Dh=null;function Rx(r,i,c){if(Dh===null){var h=new Map,v=Dh=new Map;v.set(c,h)}else v=Dh,h=v.get(c),h||(h=new Map,v.set(c,h));if(h.has(r))return h;for(h.set(r,null),c=c.getElementsByTagName(r),v=0;v<c.length;v++){var w=c[v];if(!(w[pt]||w[rn]||r==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var O=w.getAttribute(i)||"";O=r+O;var z=h.get(O);z?z.push(w):h.set(O,[w])}}return h}function Lx(r,i,c){r=r.ownerDocument||r,r.head.insertBefore(c,i==="title"?r.querySelector("head > title"):null)}function Vj(r,i,c){if(c===1||i.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return r=i.disabled,typeof i.precedence=="string"&&r==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Bx(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function Kj(r,i,c,h){if(c.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var v=Vl(h.href),w=i.querySelector(wu(v));if(w){i=w._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(r.count++,r=Mh.bind(r),i.then(r,r)),c.state.loading|=4,c.instance=w,wt(w);return}w=i.ownerDocument||i,h=Mx(h),(v=Ai.get(v))&&O0(h,v),w=w.createElement("link"),wt(w);var O=w;O._p=new Promise(function(z,ne){O.onload=z,O.onerror=ne}),er(w,"link",h),c.instance=w}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(c,i),(i=c.state.preload)&&(c.state.loading&3)===0&&(r.count++,c=Mh.bind(r),i.addEventListener("load",c),i.addEventListener("error",c))}}var M0=0;function Wj(r,i){return r.stylesheets&&r.count===0&&Rh(r,r.stylesheets),0<r.count||0<r.imgCount?function(c){var h=setTimeout(function(){if(r.stylesheets&&Rh(r,r.stylesheets),r.unsuspend){var w=r.unsuspend;r.unsuspend=null,w()}},6e4+i);0<r.imgBytes&&M0===0&&(M0=62500*Oj());var v=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&Rh(r,r.stylesheets),r.unsuspend)){var w=r.unsuspend;r.unsuspend=null,w()}},(r.imgBytes>M0?50:800)+i);return r.unsuspend=c,function(){r.unsuspend=null,clearTimeout(h),clearTimeout(v)}}:null}function Mh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Rh(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Ch=null;function Rh(r,i){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Ch=new Map,i.forEach(Xj,r),Ch=null,Mh.call(r))}function Xj(r,i){if(!(i.state.loading&4)){var c=Ch.get(r);if(c)var h=c.get(null);else{c=new Map,Ch.set(r,c);for(var v=r.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<v.length;w++){var O=v[w];(O.nodeName==="LINK"||O.getAttribute("media")!=="not all")&&(c.set(O.dataset.precedence,O),h=O)}h&&c.set(null,h)}v=i.instance,O=v.getAttribute("data-precedence"),w=c.get(O)||h,w===h&&c.set(null,v),c.set(O,v),this.count++,h=Mh.bind(this),v.addEventListener("load",h),v.addEventListener("error",h),w?w.parentNode.insertBefore(v,w.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(v,r.firstChild)),i.state.loading|=4}}var Eu={$$typeof:N,Provider:null,Consumer:null,_currentValue:J,_currentValue2:J,_threadCount:0};function Jj(r,i,c,h,v,w,O,z,ne){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=eo(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=eo(0),this.hiddenUpdates=eo(null),this.identifierPrefix=h,this.onUncaughtError=v,this.onCaughtError=w,this.onRecoverableError=O,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ne,this.incompleteTransitions=new Map}function Px(r,i,c,h,v,w,O,z,ne,be,Ae,De){return r=new Jj(r,i,c,O,ne,be,Ae,De,z),i=1,w===!0&&(i|=24),w=ur(3,null,null,i),r.current=w,w.stateNode=r,i=dp(),i.refCount++,r.pooledCache=i,i.refCount++,w.memoizedState={element:h,isDehydrated:c,cache:i},pp(w),r}function $x(r){return r?(r=Ms,r):Ms}function Ix(r,i,c,h,v,w){v=$x(v),h.context===null?h.context=v:h.pendingContext=v,h=Ta(i),h.payload={element:c},w=w===void 0?null:w,w!==null&&(h.callback=w),c=ka(r,h,i),c!==null&&(zr(c,r,i),nu(c,r,i))}function zx(r,i){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var c=r.retryLane;r.retryLane=c!==0&&c<i?c:i}}function C0(r,i){zx(r,i),(r=r.alternate)&&zx(r,i)}function Ux(r){if(r.tag===13||r.tag===31){var i=Si(r,67108864);i!==null&&zr(i,r,67108864),C0(r,67108864)}}function Hx(r){if(r.tag===13||r.tag===31){var i=ti();i=Pn(i);var c=Si(r,i);c!==null&&zr(c,r,i),C0(r,i)}}var Lh=!0;function Qj(r,i,c,h){var v=X.T;X.T=null;var w=ae.p;try{ae.p=2,R0(r,i,c,h)}finally{ae.p=w,X.T=v}}function eN(r,i,c,h){var v=X.T;X.T=null;var w=ae.p;try{ae.p=8,R0(r,i,c,h)}finally{ae.p=w,X.T=v}}function R0(r,i,c,h){if(Lh){var v=L0(h);if(v===null)_0(r,i,h,Bh,c),Fx(r,h);else if(nN(v,r,i,c,h))h.stopPropagation();else if(Fx(r,h),i&4&&-1<tN.indexOf(r)){for(;v!==null;){var w=xt(v);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var O=jr(w.pendingLanes);if(O!==0){var z=w;for(z.pendingLanes|=2,z.entangledLanes|=2;O;){var ne=1<<31-dn(O);z.entanglements[1]|=ne,O&=~ne}_s(w),(Ct&6)===0&&(yh=Fe()+500,yu(0))}}break;case 31:case 13:z=Si(w,2),z!==null&&zr(z,w,2),_h(),C0(w,2)}if(w=L0(h),w===null&&_0(r,i,h,Bh,c),w===v)break;v=w}v!==null&&h.stopPropagation()}else _0(r,i,h,null,c)}}function L0(r){return r=uo(r),B0(r)}var Bh=null;function B0(r){if(Bh=null,r=dt(r),r!==null){var i=l(r);if(i===null)r=null;else{var c=i.tag;if(c===13){if(r=u(i),r!==null)return r;r=null}else if(c===31){if(r=f(i),r!==null)return r;r=null}else if(c===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null)}}return Bh=r,null}function Gx(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ge()){case st:return 2;case et:return 8;case qt:case Sn:return 32;case En:return 268435456;default:return 32}default:return 32}}var P0=!1,Pa=null,$a=null,Ia=null,Tu=new Map,ku=new Map,za=[],tN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Fx(r,i){switch(r){case"focusin":case"focusout":Pa=null;break;case"dragenter":case"dragleave":$a=null;break;case"mouseover":case"mouseout":Ia=null;break;case"pointerover":case"pointerout":Tu.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":ku.delete(i.pointerId)}}function Au(r,i,c,h,v,w){return r===null||r.nativeEvent!==w?(r={blockedOn:i,domEventName:c,eventSystemFlags:h,nativeEvent:w,targetContainers:[v]},i!==null&&(i=xt(i),i!==null&&Ux(i)),r):(r.eventSystemFlags|=h,i=r.targetContainers,v!==null&&i.indexOf(v)===-1&&i.push(v),r)}function nN(r,i,c,h,v){switch(i){case"focusin":return Pa=Au(Pa,r,i,c,h,v),!0;case"dragenter":return $a=Au($a,r,i,c,h,v),!0;case"mouseover":return Ia=Au(Ia,r,i,c,h,v),!0;case"pointerover":var w=v.pointerId;return Tu.set(w,Au(Tu.get(w)||null,r,i,c,h,v)),!0;case"gotpointercapture":return w=v.pointerId,ku.set(w,Au(ku.get(w)||null,r,i,c,h,v)),!0}return!1}function Yx(r){var i=dt(r.target);if(i!==null){var c=l(i);if(c!==null){if(i=c.tag,i===13){if(i=u(c),i!==null){r.blockedOn=i,Nr(r.priority,function(){Hx(c)});return}}else if(i===31){if(i=f(c),i!==null){r.blockedOn=i,Nr(r.priority,function(){Hx(c)});return}}else if(i===3&&c.stateNode.current.memoizedState.isDehydrated){r.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Ph(r){if(r.blockedOn!==null)return!1;for(var i=r.targetContainers;0<i.length;){var c=L0(r.nativeEvent);if(c===null){c=r.nativeEvent;var h=new c.constructor(c.type,c);ml=h,c.target.dispatchEvent(h),ml=null}else return i=xt(c),i!==null&&Ux(i),r.blockedOn=c,!1;i.shift()}return!0}function qx(r,i,c){Ph(r)&&c.delete(i)}function rN(){P0=!1,Pa!==null&&Ph(Pa)&&(Pa=null),$a!==null&&Ph($a)&&($a=null),Ia!==null&&Ph(Ia)&&(Ia=null),Tu.forEach(qx),ku.forEach(qx)}function $h(r,i){r.blockedOn===i&&(r.blockedOn=null,P0||(P0=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,rN)))}var Ih=null;function Zx(r){Ih!==r&&(Ih=r,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Ih===r&&(Ih=null);for(var i=0;i<r.length;i+=3){var c=r[i],h=r[i+1],v=r[i+2];if(typeof h!="function"){if(B0(h||c)===null)continue;break}var w=xt(c);w!==null&&(r.splice(i,3),i-=3,Lp(w,{pending:!0,data:v,method:c.method,action:h},h,v))}}))}function Wl(r){function i(ne){return $h(ne,r)}Pa!==null&&$h(Pa,r),$a!==null&&$h($a,r),Ia!==null&&$h(Ia,r),Tu.forEach(i),ku.forEach(i);for(var c=0;c<za.length;c++){var h=za[c];h.blockedOn===r&&(h.blockedOn=null)}for(;0<za.length&&(c=za[0],c.blockedOn===null);)Yx(c),c.blockedOn===null&&za.shift();if(c=(r.ownerDocument||r).$$reactFormReplay,c!=null)for(h=0;h<c.length;h+=3){var v=c[h],w=c[h+1],O=v[kn]||null;if(typeof w=="function")O||Zx(c);else if(O){var z=null;if(w&&w.hasAttribute("formAction")){if(v=w,O=w[kn]||null)z=O.formAction;else if(B0(v)!==null)continue}else z=O.action;typeof z=="function"?c[h+1]=z:(c.splice(h,3),h-=3),Zx(c)}}}function Vx(){function r(w){w.canIntercept&&w.info==="react-transition"&&w.intercept({handler:function(){return new Promise(function(O){return v=O})},focusReset:"manual",scroll:"manual"})}function i(){v!==null&&(v(),v=null),h||setTimeout(c,20)}function c(){if(!h&&!navigation.transition){var w=navigation.currentEntry;w&&w.url!=null&&navigation.navigate(w.url,{state:w.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var h=!1,v=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(c,100),function(){h=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),v!==null&&(v(),v=null)}}}function $0(r){this._internalRoot=r}zh.prototype.render=$0.prototype.render=function(r){var i=this._internalRoot;if(i===null)throw Error(s(409));var c=i.current,h=ti();Ix(c,h,r,i,null,null)},zh.prototype.unmount=$0.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var i=r.containerInfo;Ix(r.current,2,null,r,null,null),_h(),i[qr]=null}};function zh(r){this._internalRoot=r}zh.prototype.unstable_scheduleHydration=function(r){if(r){var i=ks();r={blockedOn:null,target:r,priority:i};for(var c=0;c<za.length&&i!==0&&i<za[c].priority;c++);za.splice(c,0,r),c===0&&Yx(r)}};var Kx=t.version;if(Kx!=="19.2.1")throw Error(s(527,Kx,"19.2.1"));ae.findDOMNode=function(r){var i=r._reactInternals;if(i===void 0)throw typeof r.render=="function"?Error(s(188)):(r=Object.keys(r).join(","),Error(s(268,r)));return r=p(i),r=r!==null?b(r):null,r=r===null?null:r.stateNode,r};var iN={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Uh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Uh.isDisabled&&Uh.supportsFiber)try{un=Uh.inject(iN),Mt=Uh}catch{}}return Nu.createRoot=function(r,i){if(!o(r))throw Error(s(299));var c=!1,h="",v=n_,w=r_,O=i_;return i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(h=i.identifierPrefix),i.onUncaughtError!==void 0&&(v=i.onUncaughtError),i.onCaughtError!==void 0&&(w=i.onCaughtError),i.onRecoverableError!==void 0&&(O=i.onRecoverableError)),i=Px(r,1,!1,null,null,c,h,null,v,w,O,Vx),r[qr]=i.current,v0(r),new $0(i)},Nu.hydrateRoot=function(r,i,c){if(!o(r))throw Error(s(299));var h=!1,v="",w=n_,O=r_,z=i_,ne=null;return c!=null&&(c.unstable_strictMode===!0&&(h=!0),c.identifierPrefix!==void 0&&(v=c.identifierPrefix),c.onUncaughtError!==void 0&&(w=c.onUncaughtError),c.onCaughtError!==void 0&&(O=c.onCaughtError),c.onRecoverableError!==void 0&&(z=c.onRecoverableError),c.formState!==void 0&&(ne=c.formState)),i=Px(r,1,!0,i,c??null,h,v,ne,w,O,z,Vx),i.context=$x(null),c=i.current,h=ti(),h=Pn(h),v=Ta(h),v.callback=null,ka(c,v,h),c=h,i.current.lanes=c,Ui(i,c),_s(i),r[qr]=i.current,v0(r),new zh(i)},Nu.version="19.2.1",Nu}var sw;function fN(){if(sw)return U0.exports;sw=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),U0.exports=hN(),U0.exports}var mN=fN();let pN={data:""},gN=e=>typeof window=="object"?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||pN,bN=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,yN=/\/\*[^]*?\*\/|  +/g,aw=/\n+/g,Fa=(e,t)=>{let n="",s="",o="";for(let l in e){let u=e[l];l[0]=="@"?l[1]=="i"?n=l+" "+u+";":s+=l[1]=="f"?Fa(u,l):l+"{"+Fa(u,l[1]=="k"?"":t)+"}":typeof u=="object"?s+=Fa(u,t?t.replace(/([^,])+/g,f=>l.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,m=>/&/.test(m)?m.replace(/&/g,f):f?f+" "+m:m)):l):u!=null&&(l=/^--/.test(l)?l:l.replace(/[A-Z]/g,"-$&").toLowerCase(),o+=Fa.p?Fa.p(l,u):l+":"+u+";")}return n+(t&&o?t+"{"+o+"}":o)+s},Zs={},j2=e=>{if(typeof e=="object"){let t="";for(let n in e)t+=n+j2(e[n]);return t}return e},vN=(e,t,n,s,o)=>{let l=j2(e),u=Zs[l]||(Zs[l]=(m=>{let p=0,b=11;for(;p<m.length;)b=101*b+m.charCodeAt(p++)>>>0;return"go"+b})(l));if(!Zs[u]){let m=l!==e?e:(p=>{let b,_,x=[{}];for(;b=bN.exec(p.replace(yN,""));)b[4]?x.shift():b[3]?(_=b[3].replace(aw," ").trim(),x.unshift(x[0][_]=x[0][_]||{})):x[0][b[1]]=b[2].replace(aw," ").trim();return x[0]})(e);Zs[u]=Fa(o?{["@keyframes "+u]:m}:m,n?"":"."+u)}let f=n&&Zs.g?Zs.g:null;return n&&(Zs.g=Zs[u]),((m,p,b,_)=>{_?p.data=p.data.replace(_,m):p.data.indexOf(m)===-1&&(p.data=b?m+p.data:p.data+m)})(Zs[u],t,s,f),u},_N=(e,t,n)=>e.reduce((s,o,l)=>{let u=t[l];if(u&&u.call){let f=u(n),m=f&&f.props&&f.props.className||/^go/.test(f)&&f;u=m?"."+m:f&&typeof f=="object"?f.props?"":Fa(f,""):f===!1?"":f}return s+o+(u??"")},"");function bm(e){let t=this||{},n=e.call?e(t.p):e;return vN(n.unshift?n.raw?_N(n,[].slice.call(arguments,1),t.p):n.reduce((s,o)=>Object.assign(s,o&&o.call?o(t.p):o),{}):n,gN(t.target),t.g,t.o,t.k)}let N2,tb,nb;bm.bind({g:1});let ta=bm.bind({k:1});function xN(e,t,n,s){Fa.p=t,N2=e,tb=n,nb=s}function Ja(e,t){let n=this||{};return function(){let s=arguments;function o(l,u){let f=Object.assign({},l),m=f.className||o.className;n.p=Object.assign({theme:tb&&tb()},f),n.o=/ *go\d+/.test(m),f.className=bm.apply(n,s)+(m?" "+m:"");let p=e;return e[0]&&(p=f.as||e,delete f.as),nb&&p[0]&&nb(f),N2(p,f)}return o}}var wN=e=>typeof e=="function",Uf=(e,t)=>wN(e)?e(t):e,SN=(()=>{let e=0;return()=>(++e).toString()})(),O2=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),EN=20,Yb="default",D2=(e,t)=>{let{toastLimit:n}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,n)};case 1:return{...e,toasts:e.toasts.map(u=>u.id===t.toast.id?{...u,...t.toast}:u)};case 2:let{toast:s}=t;return D2(e,{type:e.toasts.find(u=>u.id===s.id)?1:0,toast:s});case 3:let{toastId:o}=t;return{...e,toasts:e.toasts.map(u=>u.id===o||o===void 0?{...u,dismissed:!0,visible:!1}:u)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(u=>u.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let l=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(u=>({...u,pauseDuration:u.pauseDuration+l}))}}},Cf=[],M2={toasts:[],pausedAt:void 0,settings:{toastLimit:EN}},Es={},C2=(e,t=Yb)=>{Es[t]=D2(Es[t]||M2,e),Cf.forEach(([n,s])=>{n===t&&s(Es[t])})},R2=e=>Object.keys(Es).forEach(t=>C2(e,t)),TN=e=>Object.keys(Es).find(t=>Es[t].toasts.some(n=>n.id===e)),ym=(e=Yb)=>t=>{C2(t,e)},kN={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},AN=(e={},t=Yb)=>{let[n,s]=P.useState(Es[t]||M2),o=P.useRef(Es[t]);P.useEffect(()=>(o.current!==Es[t]&&s(Es[t]),Cf.push([t,s]),()=>{let u=Cf.findIndex(([f])=>f===t);u>-1&&Cf.splice(u,1)}),[t]);let l=n.toasts.map(u=>{var f,m,p;return{...e,...e[u.type],...u,removeDelay:u.removeDelay||((f=e[u.type])==null?void 0:f.removeDelay)||e?.removeDelay,duration:u.duration||((m=e[u.type])==null?void 0:m.duration)||e?.duration||kN[u.type],style:{...e.style,...(p=e[u.type])==null?void 0:p.style,...u.style}}});return{...n,toasts:l}},jN=(e,t="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...n,id:n?.id||SN()}),fd=e=>(t,n)=>{let s=jN(t,e,n);return ym(s.toasterId||TN(s.id))({type:2,toast:s}),s.id},Zn=(e,t)=>fd("blank")(e,t);Zn.error=fd("error");Zn.success=fd("success");Zn.loading=fd("loading");Zn.custom=fd("custom");Zn.dismiss=(e,t)=>{let n={type:3,toastId:e};t?ym(t)(n):R2(n)};Zn.dismissAll=e=>Zn.dismiss(void 0,e);Zn.remove=(e,t)=>{let n={type:4,toastId:e};t?ym(t)(n):R2(n)};Zn.removeAll=e=>Zn.remove(void 0,e);Zn.promise=(e,t,n)=>{let s=Zn.loading(t.loading,{...n,...n?.loading});return typeof e=="function"&&(e=e()),e.then(o=>{let l=t.success?Uf(t.success,o):void 0;return l?Zn.success(l,{id:s,...n,...n?.success}):Zn.dismiss(s),o}).catch(o=>{let l=t.error?Uf(t.error,o):void 0;l?Zn.error(l,{id:s,...n,...n?.error}):Zn.dismiss(s)}),e};var NN=1e3,ON=(e,t="default")=>{let{toasts:n,pausedAt:s}=AN(e,t),o=P.useRef(new Map).current,l=P.useCallback((_,x=NN)=>{if(o.has(_))return;let S=setTimeout(()=>{o.delete(_),u({type:4,toastId:_})},x);o.set(_,S)},[]);P.useEffect(()=>{if(s)return;let _=Date.now(),x=n.map(S=>{if(S.duration===1/0)return;let T=(S.duration||0)+S.pauseDuration-(_-S.createdAt);if(T<0){S.visible&&Zn.dismiss(S.id);return}return setTimeout(()=>Zn.dismiss(S.id,t),T)});return()=>{x.forEach(S=>S&&clearTimeout(S))}},[n,s,t]);let u=P.useCallback(ym(t),[t]),f=P.useCallback(()=>{u({type:5,time:Date.now()})},[u]),m=P.useCallback((_,x)=>{u({type:1,toast:{id:_,height:x}})},[u]),p=P.useCallback(()=>{s&&u({type:6,time:Date.now()})},[s,u]),b=P.useCallback((_,x)=>{let{reverseOrder:S=!1,gutter:T=8,defaultPosition:k}=x||{},A=n.filter(N=>(N.position||k)===(_.position||k)&&N.height),M=A.findIndex(N=>N.id===_.id),R=A.filter((N,D)=>D<M&&N.visible).length;return A.filter(N=>N.visible).slice(...S?[R+1]:[0,R]).reduce((N,D)=>N+(D.height||0)+T,0)},[n]);return P.useEffect(()=>{n.forEach(_=>{if(_.dismissed)l(_.id,_.removeDelay);else{let x=o.get(_.id);x&&(clearTimeout(x),o.delete(_.id))}})},[n,l]),{toasts:n,handlers:{updateHeight:m,startPause:f,endPause:p,calculateOffset:b}}},DN=ta`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,MN=ta`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,CN=ta`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,RN=Ja("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${DN} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${MN} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${CN} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,LN=ta`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,BN=Ja("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${LN} 1s linear infinite;
`,PN=ta`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,$N=ta`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,IN=Ja("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${PN} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${$N} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,zN=Ja("div")`
  position: absolute;
`,UN=Ja("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,HN=ta`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,GN=Ja("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${HN} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,FN=({toast:e})=>{let{icon:t,type:n,iconTheme:s}=e;return t!==void 0?typeof t=="string"?P.createElement(GN,null,t):t:n==="blank"?null:P.createElement(UN,null,P.createElement(BN,{...s}),n!=="loading"&&P.createElement(zN,null,n==="error"?P.createElement(RN,{...s}):P.createElement(IN,{...s})))},YN=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,qN=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,ZN="0%{opacity:0;} 100%{opacity:1;}",VN="0%{opacity:1;} 100%{opacity:0;}",KN=Ja("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,WN=Ja("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,XN=(e,t)=>{let n=e.includes("top")?1:-1,[s,o]=O2()?[ZN,VN]:[YN(n),qN(n)];return{animation:t?`${ta(s)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${ta(o)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},JN=P.memo(({toast:e,position:t,style:n,children:s})=>{let o=e.height?XN(e.position||t||"top-center",e.visible):{opacity:0},l=P.createElement(FN,{toast:e}),u=P.createElement(WN,{...e.ariaProps},Uf(e.message,e));return P.createElement(KN,{className:e.className,style:{...o,...n,...e.style}},typeof s=="function"?s({icon:l,message:u}):P.createElement(P.Fragment,null,l,u))});xN(P.createElement);var QN=({id:e,className:t,style:n,onHeightUpdate:s,children:o})=>{let l=P.useCallback(u=>{if(u){let f=()=>{let m=u.getBoundingClientRect().height;s(e,m)};f(),new MutationObserver(f).observe(u,{subtree:!0,childList:!0,characterData:!0})}},[e,s]);return P.createElement("div",{ref:l,className:t,style:n},o)},eO=(e,t)=>{let n=e.includes("top"),s=n?{top:0}:{bottom:0},o=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:O2()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(n?1:-1)}px)`,...s,...o}},tO=bm`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Hh=16,nO=({reverseOrder:e,position:t="top-center",toastOptions:n,gutter:s,children:o,toasterId:l,containerStyle:u,containerClassName:f})=>{let{toasts:m,handlers:p}=ON(n,l);return P.createElement("div",{"data-rht-toaster":l||"",style:{position:"fixed",zIndex:9999,top:Hh,left:Hh,right:Hh,bottom:Hh,pointerEvents:"none",...u},className:f,onMouseEnter:p.startPause,onMouseLeave:p.endPause},m.map(b=>{let _=b.position||t,x=p.calculateOffset(b,{reverseOrder:e,gutter:s,defaultPosition:t}),S=eO(_,x);return P.createElement(QN,{id:b.id,key:b.id,onHeightUpdate:p.updateHeight,className:b.visible?tO:"",style:S},b.type==="custom"?Uf(b.message,b):o?o(b):P.createElement(JN,{toast:b,position:_}))}))};function rO(e,t,n,s=0,o=0){t<=2&&(e-=1,t+=12);const l=Math.floor(e/100),u=2-l+Math.floor(l/4),f=n+(s+o/60)/24;return Math.floor(365.25*(e+4716))+Math.floor(30.6001*(t+1))+f+u-1524.5}const iO=864e5;function sO(e){const t=(e-24405875e-1)*iO;return new Date(t)}function aO(e,t=7){const n=e+(t-.5)/12;if(n>=1986&&n<2005){const o=n-2e3;return 63.86+.3345*o-.060374*o*o+.0017275*o**3+651814e-9*o**4+2373599e-11*o**5}if(n>=2005&&n<2050){const o=n-2e3;return 62.92+.32217*o+.005589*o*o}if(n>=2050&&n<=2150){const o=(n-1820)/100;return-20+32*o*o-.5628*(2150-n)}if(n>=1900&&n<1986)return-2.79+1.494119*(n-1900)-.0598939*(n-1900)**2+.0061966*(n-1900)**3-197e-6*(n-1900)**4;if(n>=1800&&n<1900){const o=(n-1800)/100;return 13.72-33.244*o+68.612*o**2-65.3*o**3-1.653*o**4+.3343*o**5-.012125*o**6+1348e-7*o**7-175e-8*o**8}const s=(n-1820)/100;return-20+32*s*s}function oO(e){const t=Math.floor(e+.5),n=e+.5-t;let s=t;if(t>=2299161){const _=Math.floor((t-186721625e-2)/36524.25);s=t+1+_-Math.floor(_/4)}const o=s+1524,l=Math.floor((o-122.1)/365.25),u=Math.floor(365.25*l),f=Math.floor((o-u)/30.6001),m=o-u-Math.floor(30.6001*f)+n;let p=f-1;p>12&&(p-=12);let b=l-4715;return p>2&&(b-=1),[b,p,m]}const Zu=Math.PI,el=Zu/180,lO=180/Zu,cO=86400;function uO(e){return e%=360,e<0?e+360:e}function dO(e,t){return(e-t+540)%360-180}function ow(e,t){for(;e-t>180;)e-=360;for(;e-t<-180;)e+=360;return e}function hO(e){const[t,n]=oO(e);return e+aO(t,Math.round(n))/cO}function lw(e,t){let n=0,s=1;for(let o=0;o<e.length;o++){let l=0;for(const[u,f,m]of e[o])l+=u*Math.cos(f+m*t);n+=l*s,s*=t}return n*1e-8}function fO(e){const t=(e-2451545)/36525,n=(297.85036+445267.11148*t-.0019142*t*t+t*t*t/189474)*el,s=(357.52772+35999.05034*t-1603e-7*t*t-t*t*t/3e5)*el,o=(134.96298+477198.867398*t+.0086972*t*t+t*t*t/56250)*el,l=(93.27191+483202.017538*t-.0036825*t*t+t*t*t/327270)*el,u=(125.04452-1934.136261*t+.0020708*t*t+t*t*t/45e4)*el,f=[[0,0,0,0,1,-171996,-174.2,92025,8.9],[0,0,2,-2,2,-13187,-1.6,5736,-3.1],[0,0,2,0,2,-2274,-.2,977,-.5],[0,0,0,0,2,2062,.2,-895,.5],[0,1,0,0,0,1426,-3.4,54,-.1],[1,0,0,0,0,712,.1,-7,0],[0,1,2,-2,2,-517,1.2,224,-.6],[0,0,2,0,1,-386,-.4,200,0],[1,0,2,0,2,-301,0,129,-.1],[0,-1,2,-2,2,217,-.5,-95,.3]];let m=0,p=0;for(const[b,_,x,S,T,k,A,M,R]of f){const N=b*n+_*s+x*o+S*l+T*u;m+=(k+A*t)*Math.sin(N),p+=(M+R*t)*Math.cos(N)}return m*=1e-4,p*=1e-4,{dpsi:m,deps:p}}function Gh(e){const t=hO(e),n=(t-2451545)/365250,s=lw(cw.L,n),o=lw(cw.R,n);let l=s+Zu;l>2*Zu&&(l-=2*Zu);const{dpsi:u}=fO(t),f=u/3600*el,m=20.4898/(3600*o),p=l+f-m*el;return uO(p*lO)}function Hn(e,t,n){const s=(t%360+360)%360,o=rO(e,1,1),l=Gh(o);let u=s-l;u<0&&(u+=360);let f=o+u/.98564736;const m=1e-6,p=5e-6;for(let x=0;x<25;x++){const S=Gh(f),T=dO(s,S);if(Math.abs(T)<m)break;const k=Gh(f+p),A=Gh(f-p),M=ow(k,S),R=ow(A,S),N=(M-R)/(2*p);f+=T/N}const b=sO(f),_=new Date(b.getFullYear(),b.getMonth(),b.getDate(),b.getHours(),b.getMinutes(),0,0);if(Number.isFinite(n)){const x=n/15-9;if(Math.abs(x)>1e-12)return new Date(_.getTime()+x*36e5)}return _}const cw={L:[[[175347046,0,0],[3341656,4.6692568,6283.07585],[34894,4.6261,12566.1517],[3497,2.7441,5753.3849],[3418,2.8289,3.5231],[3136,3.6277,77713.7715],[2676,4.4181,7860.4194],[2343,6.1352,3930.2097],[1324,.7425,11506.7698],[1273,2.0371,529.691],[1199,1.1096,1577.3435],[990,5.233,5884.927],[902,2.045,26.298],[857,3.508,398.149],[780,1.179,5223.694],[753,2.533,5507.553],[505,4.583,18849.228],[492,4.205,775.523],[357,2.92,.067],[317,5.849,11790.629]],[[628331966747,0,0],[206059,2.678235,6283.07585],[4303,2.6351,12566.1517],[425,1.59,3.523],[119,5.796,26.298],[109,2.966,1577.344],[93,2.59,18849.23],[72,1.14,529.69],[68,1.87,398.15],[67,4.41,5507.55],[59,2.89,5223.69],[56,2.17,155.42]],[[52919,0,0],[8720,1.0721,6283.0758],[309,.867,12566.152]],[[289,5.844,6283.076],[35,0,0]],[[114,3.142,0],[8,4.13,6283.08]],[[1,3.14,0]]],R:[[[100013989,0,0],[1670700,3.0984635,6283.07585],[13956,3.05525,12566.1517],[3084,5.1985,77713.7715],[1628,1.1739,5753.3849],[1576,2.8469,7860.4194],[925,5.453,11506.77],[542,4.564,3930.21],[472,3.661,5884.927],[346,.964,5507.553],[329,5.9,5223.694]],[[103019,1.10749,6283.07585],[1721,1.0644,12566.1517],[702,3.142,0],[32,1.02,18849.23]],[[4359,5.7846,6283.0758],[124,5.579,12566.152],[12,3.14,0]],[[145,4.273,6283.076]]]},Ar=["","","","","","","","","",""],Fr=["","","","","","","","","","","",""],Li={:["","","","","","","","","",""],:["","","","","","","","","","","",""]},fi={:["","","","","","","","","",""],:["","","","","","","","","","","",""]},mO=["","","","","","","","","",""],pO=["","","","","","","","","","","",""],gO=["","","","","","","","","","","","","","","","","","","",""],bO=["","","","","","","","","","","","","","","","","","","","","","","",""],vm=new Set(Ar),qb=new Set(Fr),_m={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Zb={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Vb=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],Kb={:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""]},L2={:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""]},uw=[{branch:"",hanja:"",start:1380,end:60},{branch:"",hanja:"",start:60,end:180},{branch:"",hanja:"",start:180,end:300},{branch:"",hanja:"",start:300,end:420},{branch:"",hanja:"",start:420,end:540},{branch:"",hanja:"",start:540,end:660},{branch:"",hanja:"",start:660,end:780},{branch:"",hanja:"",start:780,end:900},{branch:"",hanja:"",start:900,end:1020},{branch:"",hanja:"",start:1020,end:1140},{branch:"",hanja:"",start:1140,end:1260},{branch:"",hanja:"",start:1260,end:1380}],yO={:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}},vO={:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}};function _O(e,t=127.5){return(ut(e,t)||"").charAt(0)}const dw=new Map;function B2(e,t=127.5){const n=`${e}@${t}`,s=dw.get(n);if(s)return s;const o=Hn(e,315,t);if(!o)throw new Error(`    : year=${e}, lon=${t}`);return dw.set(n,o),o}const xO=(e,t)=>(e%t+t)%t,P2=e=>e instanceof Date&&!Number.isNaN(e.getTime());function $2(e,t=127.5){if(!P2(e))throw new Error("resolveYearIndex: invalid date");const n=e.getFullYear(),s=B2(n,t),o=e<s?n-1:n,l=xO(o-4,60);return{useYear:o,index60Num:l}}function ut(e,t=127.5){const{index60Num:n}=$2(e,t);return Vb[n]}const wO=[2,4,6,8,0,2,4,6,8,0];function SO(e,t=127.5){const n=new Array(12);return n[0]=B2(e,t),n[1]=Hn(e,345,t),n[2]=Hn(e,15,t),n[3]=Hn(e,45,t),n[4]=Hn(e,75,t),n[5]=Hn(e,105,t),n[6]=Hn(e,135,t),n[7]=Hn(e,165,t),n[8]=Hn(e,195,t),n[9]=Hn(e,225,t),n[10]=Hn(e,255,t),n[11]=Hn(e+1,285,t),n.map(s=>new Date(s.getTime()+1800*1e3))}function EO(e,t=127.5){const{useYear:n}=$2(e,t),s=SO(n,t);let o=0;for(let u=0;u<12;u++)e>=s[u]&&(o=u);return{monthIndex:o+1,useYear:n,boundaries:s}}function TO(e,t=127.5){const n=_O(e,t),s=Li..indexOf(n);if(s<0)throw new Error(`resolveFirstMonthStemIdx: invalid year stem "${n}"`);return wO[s]}function kO(e,t,n=127.5){return(TO(e,n)+(t-1))%10}function At(e,t=127.5){if(!P2(e))return"";const{monthIndex:n}=EO(e,t),s=(2+(n-1))%12,o=Li.[s],l=kO(e,n,t);return Li.[l]+o}const I2=(e,t)=>(e%t+t)%t;function z2(e,t,n,s=0,o=0,l=0){t<=2&&(e-=1,t+=12);const u=Math.floor(e/100),f=2-u+Math.floor(u/4),m=(s+o/60+l/3600)/24;return Math.floor(365.25*(e+4716))+Math.floor(30.6001*(t+1))+n+m+f-1524.5}function AO(e,t){const n=e.getHours(),s=e.getMinutes(),o=n*60+s,l=U2(e);return t===""&&l===""?o>=1380?1:0:t===""&&(l===""||l==="")?o<180?-1:0:(o<0,0)}function jO(e,t){const s=e.getHours()*60+e.getMinutes();return t===""?s>=1380?1:0:t===""&&s<180?-1:0}const Hf={JDN:2445731,idx:0};function _t(e,t){const n=AO(e,t),s=new Date(e.getTime());s.setDate(s.getDate()+n);const o=z2(s.getFullYear(),s.getMonth()+1,s.getDate(),s.getHours(),s.getMinutes()),l=Math.floor(o+.5),u=I2(l-Hf.JDN+Hf.idx,60),f=Vb[u];if(!f)throw new Error(`getDayGanZhi: idx=${u} out of range (jdn=${l}, jd=${o})`);return f}function NO(e,t){const n=new Date(e),s=jO(n,t),o=new Date(e.getTime());o.setDate(o.getDate()+s);const l=z2(o.getFullYear(),o.getMonth()+1,o.getDate(),o.getHours(),o.getMinutes()),u=Math.floor(l+.5),f=I2(u-Hf.JDN+Hf.idx,60),m=Vb[f];if(!m)throw new Error(`getDayGanZhi: idx=${f} out of range (jdn=${u}, jd=${l})`);return m}function U2(e){e instanceof Date||(e=new Date(e));const t=e.getHours()*60+e.getMinutes();for(let n=0;n<uw.length;n++){const{branch:s,start:o,end:l}=uw[n];if(o<l){if(t>=o&&t<l)return s}else if(t>=o||t<l)return s}return""}function OO(e,t,n,s){const o=Ar.indexOf(t);if(o<0)return"";let l=(o%5*2+n)%10;const u=e.getHours();return(s===""||s==="/"&&u>=3)&&(n===0||n===1)&&(l=(l+2)%10),Ar[l]}function Pi(e,t,n){e instanceof Date||(e=new Date(e));const s=U2(e),o=Fr.indexOf(s),u=(n??_t(e,t)).charAt(0);return OO(e,u,o,t)+s}const hw=e=>{let t;const n=new Set,s=(p,b)=>{const _=typeof p=="function"?p(t):p;if(!Object.is(_,t)){const x=t;t=b??(typeof _!="object"||_===null)?_:Object.assign({},t,_),n.forEach(S=>S(t,x))}},o=()=>t,f={setState:s,getState:o,getInitialState:()=>m,subscribe:p=>(n.add(p),()=>n.delete(p))},m=t=e(s,o,f);return f},DO=(e=>e?hw(e):hw),MO=e=>e;function CO(e,t=MO){const n=nn.useSyncExternalStore(e.subscribe,nn.useCallback(()=>t(e.getState()),[e,t]),nn.useCallback(()=>t(e.getInitialState()),[e,t]));return nn.useDebugValue(n),n}const fw=e=>{const t=DO(e),n=s=>CO(t,s);return Object.assign(n,t),n},md=(e=>e?fw(e):fw);function RO(e,t){let n;try{n=e()}catch{return}return{getItem:o=>{var l;const u=m=>m===null?null:JSON.parse(m,void 0),f=(l=n.getItem(o))!=null?l:null;return f instanceof Promise?f.then(u):u(f)},setItem:(o,l)=>n.setItem(o,JSON.stringify(l,void 0)),removeItem:o=>n.removeItem(o)}}const rb=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then(s){return rb(s)(n)},catch(s){return this}}}catch(n){return{then(s){return this},catch(s){return rb(s)(n)}}}},LO=(e,t)=>(n,s,o)=>{let l={storage:RO(()=>localStorage),partialize:k=>k,version:0,merge:(k,A)=>({...A,...k}),...t},u=!1;const f=new Set,m=new Set;let p=l.storage;if(!p)return e((...k)=>{console.warn(`[zustand persist middleware] Unable to update item '${l.name}', the given storage is currently unavailable.`),n(...k)},s,o);const b=()=>{const k=l.partialize({...s()});return p.setItem(l.name,{state:k,version:l.version})},_=o.setState;o.setState=(k,A)=>(_(k,A),b());const x=e((...k)=>(n(...k),b()),s,o);o.getInitialState=()=>x;let S;const T=()=>{var k,A;if(!p)return;u=!1,f.forEach(R=>{var N;return R((N=s())!=null?N:x)});const M=((A=l.onRehydrateStorage)==null?void 0:A.call(l,(k=s())!=null?k:x))||void 0;return rb(p.getItem.bind(p))(l.name).then(R=>{if(R)if(typeof R.version=="number"&&R.version!==l.version){if(l.migrate){const N=l.migrate(R.state,R.version);return N instanceof Promise?N.then(D=>[!0,D]):[!0,N]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,R.state];return[!1,void 0]}).then(R=>{var N;const[D,C]=R;if(S=l.merge(C,(N=s())!=null?N:x),n(S,!0),D)return b()}).then(()=>{M?.(S,void 0),S=s(),u=!0,m.forEach(R=>R(S))}).catch(R=>{M?.(void 0,R)})};return o.persist={setOptions:k=>{l={...l,...k},k.storage&&(p=k.storage)},clearStorage:()=>{p?.removeItem(l.name)},getOptions:()=>l,rehydrate:()=>T(),hasHydrated:()=>u,onHydrate:k=>(f.add(k),()=>{f.delete(k)}),onFinishHydration:k=>(m.add(k),()=>{m.delete(k)})},l.skipHydration||T(),S||x},H2=LO,ib={hiddenStem:"all",hiddenStemMode:"classic",ilunRule:"/",sinsalMode:"classic",sinsalBase:"",sinsalBloom:!1,exposure:"",charType:"",thinEum:!1,showSipSin:!0,showSibiSinsal:!0,showSibiUnseong:!0,showNabeum:!0,theme:"dark",sectionOrder:["hiddenStem","hiddenStemMode","ilunRule","sinsalMode","sinsalBase","sinsalBloom","exposure","charType","thinEum","visibility"]},br=md()(H2((e,t)=>({settings:ib,setSettings:n=>e({settings:n}),setKey:(n,s)=>e({settings:{...t().settings,[n]:s}}),reset:()=>e({settings:ib})}),{name:"settings_v1"}));function sb(e){const t=Ar.indexOf(e);if(t!==-1)return Ar[t];const n=fi..indexOf(e);return n!==-1?Ar[n]:null}function G2(e){const t=Fr.indexOf(e);if(t!==-1)return Fr[t];const n=fi..indexOf(e);return n!==-1?Fr[n]:null}function mw(e,t){if(t?.difficultyMode)return t?.theme==="light"?"bg-white border border-gray-300 text-white":"bg-white text-black";switch(e){case"":return"bg-green-600 text-white";case"":return"bg-red-600 text-white";case"":return"bg-yellow-500 text-white";case"":return"bg-gray-400 text-white";case"":return"bg-black text-white";default:return"bg-neutral-700 text-white"}}function di(e,t,n){if(t==="stem"){const s=sb(e);if(!s)return console.warn("Invalid stem:",e),"bg-neutral-700";const o=Ar.indexOf(s),l=o>=0?mO[o]:void 0;return mw(l,n)}else{const s=G2(e);if(!s)return console.warn("Invalid branch:",e),"bg-neutral-700";const o=Fr.indexOf(s),l=o>=0?pO[o]:void 0;return mw(l,n)}}function kr(e,t){const n=sb(e);if(!n)throw new Error(`getSipSin: invalid dayStem ${e}`);if(t.stem){const s=sb(t.stem);if(!s)throw new Error(`getSipSin: invalid stem ${t.stem}`);return yO[n][s]}if(t.branch){const s=G2(t.branch);if(!s)throw new Error(`getSipSin: invalid branch ${t.branch}`);return vO[n][s]}throw new Error("getSipSin: stem or branch required")}const xm={:["","(-)",""],:["","",""],:["","",""],:["","(-)",""],:["","",""],:["","",""],:["","",""],:["","",""],:["","",""],:["","(-)",""],:["","",""],:["","",""]},wm={:["(-)","(-)",""],:["","",""],:["(-)","",""],:["(-)","(-)",""],:["","",""],:["(-)","",""],:["(-)","(-)",""],:["","",""],:["(-)","",""],:["(-)","(-)",""],:["","",""],:["(-)","",""]};function Uu({branch:e,dayStem:t,mode:n="all",mapping:s="classic",variant:o="auto",isUnknownTime:l=!1}){const u=(s==="hgc"?wm:xm)[e]??[],f=n==="main"?[u[2]]:u,m=o==="white",p=m?"text-white":"text-neutral-800 dark:text-white",b=m?"border-white":"border-neutral-800 dark: border-neutral-200",_=m?"text-yellow-900":"text-red-600 dark:text-yellow-300";return y.jsx("div",{className:"w-full flex flex-col gap-1 mt-1",children:f.map((x,S)=>x==="(-)"||l?y.jsx("div",{className:`w-full max-w-[80px] mx-auto text-[10px] desk:text-xs text-neutral-500 py-0.5 desk:px-1 border ${b} ${p} rounded text-center text-nowrap`,children:"(-) ()"},S):y.jsxs("div",{className:`w-full max-w-[80px] mx-auto text-[10px] desk:text-xs py-0.5 desk:px-1 border ${b} ${p} rounded text-center text-nowrap 
            ${n==="main"||S===2?`jeonggi bg-neutral-500/50 ${_} font-bold`:""}`,children:[x," (",kr(t,{stem:x}),")"]},S))})}const pd=md(e=>({manualHour:null,setManualHour:t=>e({manualHour:t}),clearManualHour:()=>e({manualHour:null})})),Wb={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},F2=Object.fromEntries(Object.entries(Wb).map(([e,t])=>[t,e])),Xb={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Y2=Object.fromEntries(Object.entries(Xb).map(([e,t])=>[t,e]));function pw(e){return Li..includes(e)}function gw(e){return Li..includes(e)}function BO(e){return fi..includes(e)}function PO(e){return fi..includes(e)}function bw(e,t,n){return n===""?t==="stem"?Wb[e]??e:Xb[e]??e:t==="stem"?F2[e]??e:Y2[e]??e}function yw(e){const t=F2[e]??e;return BO(t)?t:""}function $O(e){const t=Y2[e]??e;return PO(t)?t:""}function IO(e){if(pw(e))return e;const t=Wb[e]??e;return pw(t)?t:""}function zO(e){if(gw(e))return e;const t=Xb[e]??e;return gw(t)?t:""}const UO=new Set(["","","","","","","","","",""]),HO=new Set(["","","","","","","","","","","",""]),GO=e=>UO.has(e),FO=e=>HO.has(e);function cc({label:e,gz:t,dayStem:n,settings:s,unseongText:o,shinsalText:l,hideBranchSipSin:u=!0,hideHiddenStems:f=!1,size:m="sm",variant:p="auto",isUnknownTime:b=!1}){const{manualHour:_}=pd(),x=b&&!_,S=t.charAt(0),T=t.charAt(1),k=bw(S,"stem",s.charType),A=bw(T,"branch",s.charType),M=yw(S),R=$O(T),N=yw(n),D=zO(T),C=IO(n),G=s.showSipSin?kr(N,{stem:M}):null,H=!u&&s.showSipSin?kr(N,{branch:R}):null,V=s.thinEum&&GO(S)?"font-thin":"font-bold",W=s.thinEum&&FO(T)?"font-thin":"font-bold",re={sm:"w-10 h-10 sm:w-12 sm:h-12",md:"w-12 h-12 sm:w-14 sm:h-14 md:w-16 md:h-16",lg:"w-14 h-14 sm:w-16 sm:h-16 md:w-20 md:h-20"},ee=!f&&!!s.hiddenStem,q=s.hiddenStem==="regular"?"main":"all",te=s.hiddenStemMode==="hgc"?"hgc":"classic",oe=p==="white",Se=oe?"bg-white text-neutral-900 border border-neutral-200":"bg-white dark:bg-neutral-900 text-neutral-900 dark:text-neutral-100 border border-neutral-200 dark:border-neutral-800",X=oe?"bg-neutral-100 text-neutral-700":"bg-neutral-100 dark:bg-neutral-800/60 text-neutral-700 dark:text-neutral-200",ae=oe?"border-neutral-200":"border-neutral-200 dark:border-neutral-800",J=oe?"text-neutral-500":"text-neutral-400",ye=oe?"text-neutral-500":"text-neutral-400",{settings:K}=br(),U=x?`bg-white ${ae}`:`${di(M,"stem",K)} ${ae}`,$=x?`bg-white ${ae}`:`${di(R,"branch",K)} ${ae}`,F=x?"text-black":K.difficultyMode?K.theme==="light"?"text-neutral-900":"text-black":"text-white",Z=x?"text-black":K.difficultyMode?K.theme==="light"?"text-neutral-900":"text-black":"text-white";return y.jsxs("div",{className:`rounded-sm desk:rounded-xl overflow-hidden ${Se}`,children:[y.jsx("div",{className:`py-2 text-center text-[10px] desk:text-xs tracking-wider ${X} text-nowrap`,children:e}),y.jsxs("div",{className:"py-3 flex flex-col items-center gap-1",children:[G&&y.jsx("div",{className:`text-[10px] desk:text-xs ${J} text-nowrap`,children:b&&!_?"-":G}),y.jsx("div",{className:`${re[m]} rounded-sm desk:rounded-lg flex items-center justify-center border ${U}`,children:y.jsx("span",{className:`text-2xl md:text-3xl ${F} ${V}`,children:x?"-":k})}),y.jsx("div",{className:`${re[m]} rounded-sm desk:rounded-lg flex items-center justify-center border ${$}`,children:y.jsx("span",{className:`text-2xl md:text-3xl ${Z} ${W}`,children:x?"-":A})}),ee&&y.jsx(Uu,{branch:D,dayStem:C,mode:q,mapping:te,isUnknownTime:b&&!_&&(e===""||e==="")}),H&&y.jsx("div",{className:`text-[10px] desk:text-xs ${ye}`,children:b&&!_?"-":H}),s.showSibiUnseong&&y.jsx("div",{className:`text-[10px] desk:text-xs ${ye} text-nowrap`,children:b&&!_?"-":o||""}),s.showSibiSinsal&&y.jsx("div",{className:`text-[10px] desk:text-xs ${ye} text-nowrap`,children:b&&!_?"-":l||""})]})]})}const YO=new Set(fi.);function qO(e){return vm.has(e)?e:YO.has(e)?_m[e]:""}function ZO({label:e,settings:t,hideBranchSipSin:n=!0}){const s=t.showSipSin,o=!!t.hiddenStem,u=(t.hiddenStem==="regular"?"main":"all")==="main"?1:3,f=t.showSipSin&&!n;return y.jsxs("div",{className:"rounded-sm desk:rounded-xl bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 overflow-hidden transition-colors",children:[y.jsx("div",{className:"py-2 text-center text-[10px] desk:text-xs tracking-wider bg-neutral-100 dark:bg-neutral-800/60 text-neutral-700 dark:text-neutral-200 text-nowrap",children:e}),y.jsxs("div",{className:"p-3 flex flex-col items-center gap-1",children:[s&&y.jsx("div",{className:"text-[10px] desk:text-xs text-neutral-500 dark:text-neutral-400 text-nowrap",children:"-"}),y.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-sm desk:rounded-lg flex items-center justify-center border border-neutral-200 dark:border-neutral-800 bg-white",children:y.jsx("span",{className:"text-2xl md:text-3xl font-bold text-neutral-900",children:"-"})}),y.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-sm desk:rounded-lg flex items-center justify-center border border-neutral-200 dark:border-neutral-800 bg-white",children:y.jsx("span",{className:"text-2xl md:text-3xl font-bold text-neutral-900",children:"-"})}),o&&y.jsx("div",{className:"flex flex-col gap-1 mt-1 w-full",children:Array.from({length:u}).map((m,p)=>y.jsx("div",{className:"w-full max-w-[80px] mx-auto text-[10px] desk:text-xs py-0.5 desk:px-1 border border-neutral-200 dark:border-neutral-800 rounded text-center text-nowrap text-neutral-500 dark:text-neutral-400",children:"-"},p))}),f&&y.jsx("div",{className:"text-[10px] desk:text-xs text-neutral-500 dark:text-neutral-400",children:"-"})]})]})}function VO(){const e=br(T=>T.settings),[t,n]=P.useState(new Date),[s,o]=P.useState(!0),[l,u]=P.useState("/"),[f,m]=P.useState(!1);P.useEffect(()=>{if(!s)return;const T=setInterval(()=>n(new Date),1e3);return()=>clearInterval(T)},[s]);const p=ut(t),b=At(t),_=_t(t,l),x=Pi(t,"/"),S=qO(_.charAt(0));return y.jsx("div",{className:"flex justify-center items-center mt-12 w-full h-[calc(100dvh_-_112px)] ",children:y.jsxs("div",{className:`w-[96%] max-w-[640px] mx-auto mb-4 p-4
                      bg-white dark:bg-neutral-950
                      text-neutral-900 dark:text-neutral-100
                      rounded-xl shadow border border-neutral-200 dark:border-neutral-800 transition-colors`,children:[y.jsxs("header",{className:"flex flex-col desk:flex-row items-center justify-center desk:justify-between mb-4 gap-2",children:[y.jsxs("div",{className:"font-semibold text-sm desk:text-base",children:[" "," ",y.jsxs("span",{className:"text-neutral-500 dark:text-neutral-400",children:["(",s?"":"",") ",XO(t)]})]}),y.jsxs("div",{className:"flex gap-2 items-center",children:[y.jsxs("select",{value:l,onChange:T=>u(T.target.value),className:`text-xs rounded px-2 py-1 h-30 cursor-pointer
                        bg-white dark:bg-neutral-900
                        border border-neutral-300 dark:border-neutral-700
                        text-neutral-900 dark:text-neutral-100
                        focus:outline-none focus:ring-2 focus:ring-amber-500/40`,children:[y.jsx("option",{value:"",children:" ( 23)"}),y.jsx("option",{value:"/",children:"/ ()"}),y.jsx("option",{value:"",children:" ( 3)"})]}),y.jsx("button",{onClick:()=>o(!s),className:`text-xs px-3 py-1 rounded transition-colors cursor-pointer
                        bg-neutral-100 hover:bg-neutral-200
                        dark:bg-neutral-800 dark:hover:bg-neutral-700
                        text-neutral-900 dark:text-neutral-100
                        border border-neutral-200 dark:border-neutral-700`,children:s?" ":" "})]})]}),y.jsxs("div",{className:"grid grid-cols-4 gap-3 mb-6",children:[f?y.jsx(ZO,{label:"",settings:e,hideBranchSipSin:!0}):y.jsx(cc,{label:"",gz:x,dayStem:S,settings:e,hideBranchSipSin:!0}),y.jsx(cc,{label:"",gz:_,dayStem:S,settings:e,hideBranchSipSin:!0}),y.jsx(cc,{label:"",gz:b,dayStem:S,settings:e,hideBranchSipSin:!0}),y.jsx(cc,{label:"",gz:p,dayStem:S,settings:e,hideBranchSipSin:!0})]}),y.jsxs("div",{className:"flex flex-col desk:flex-row gap-2 desk:gap-3 items-center",children:[y.jsx("label",{className:"text-sm text-neutral-600 dark:text-neutral-300",children:"/ "}),y.jsx("input",{type:"datetime-local",value:KO(t),disabled:s,onChange:T=>{const k=WO(T.target.value);k&&n(k)},className:`rounded px-3 py-1 text-sm transition-colors
                        bg-white dark:bg-neutral-900
                        border border-neutral-300 dark:border-neutral-700
                        text-neutral-900 dark:text-neutral-100
                        focus:outline-none focus:ring-2 focus:ring-amber-500/40
                        ${s?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,min:"1900-01-01T00:00",max:"2100-12-31T23:59"}),y.jsx("button",{onClick:()=>m(T=>!T),className:`text-xs px-3 py-1 rounded border transition-colors cursor-pointer
                        ${f?"bg-white text-neutral-900 border-neutral-300 hover:bg-neutral-100":"bg-neutral-100 text-neutral-900 border-neutral-200 hover:bg-neutral-200 dark:bg-neutral-800 dark:text-neutral-100 dark:border-neutral-700 dark:hover:bg-neutral-700"}`,title:"     ",children:f?" ":" "})]})]})})}function KO(e){const t=n=>n.toString().padStart(2,"0");return`${e.getFullYear()}-${t(e.getMonth()+1)}-${t(e.getDate())}T${t(e.getHours())}:${t(e.getMinutes())}`}function WO(e){if(!e)return null;const[t,n]=e.split("T");if(!t||!n)return null;const[s,o,l]=t.split("-").map(Number),[u,f]=n.split(":").map(Number),m=new Date(s,o-1,l,u,f);return Number.isNaN(m.getTime())?null:m}function XO(e){const t=n=>n.toString().padStart(2,"0");return`${t(e.getHours())}:${t(e.getMinutes())}:${t(e.getSeconds())}`}const nr=[];for(let e=0;e<256;++e)nr.push((e+256).toString(16).slice(1));function JO(e,t=0){return(nr[e[t+0]]+nr[e[t+1]]+nr[e[t+2]]+nr[e[t+3]]+"-"+nr[e[t+4]]+nr[e[t+5]]+"-"+nr[e[t+6]]+nr[e[t+7]]+"-"+nr[e[t+8]]+nr[e[t+9]]+"-"+nr[e[t+10]]+nr[e[t+11]]+nr[e[t+12]]+nr[e[t+13]]+nr[e[t+14]]+nr[e[t+15]]).toLowerCase()}let Y0;const QO=new Uint8Array(16);function eD(){if(!Y0){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Y0=crypto.getRandomValues.bind(crypto)}return Y0(QO)}const tD=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),vw={randomUUID:tD};function q2(e,t,n){if(vw.randomUUID&&!e)return vw.randomUUID();e=e||{};const s=e.random??e.rng?.()??eD();if(s.length<16)throw new Error("Random bytes length must be >= 16");return s[6]=s[6]&15|64,s[8]=s[8]&63|128,JO(s)}var Hu={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var nD=Hu.exports,_w;function rD(){return _w||(_w=1,(function(e,t){(function(n,s){s(t)})(nD,(function(n){var s="1.9.4";function o(a){var d,g,E,j;for(g=1,E=arguments.length;g<E;g++){j=arguments[g];for(d in j)a[d]=j[d]}return a}var l=Object.create||(function(){function a(){}return function(d){return a.prototype=d,new a}})();function u(a,d){var g=Array.prototype.slice;if(a.bind)return a.bind.apply(a,g.call(arguments,1));var E=g.call(arguments,2);return function(){return a.apply(d,E.length?E.concat(g.call(arguments)):arguments)}}var f=0;function m(a){return"_leaflet_id"in a||(a._leaflet_id=++f),a._leaflet_id}function p(a,d,g){var E,j,I,Q;return Q=function(){E=!1,j&&(I.apply(g,j),j=!1)},I=function(){E?j=arguments:(a.apply(g,arguments),setTimeout(Q,d),E=!0)},I}function b(a,d,g){var E=d[1],j=d[0],I=E-j;return a===E&&g?a:((a-j)%I+I)%I+j}function _(){return!1}function x(a,d){if(d===!1)return a;var g=Math.pow(10,d===void 0?6:d);return Math.round(a*g)/g}function S(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function T(a){return S(a).split(/\s+/)}function k(a,d){Object.prototype.hasOwnProperty.call(a,"options")||(a.options=a.options?l(a.options):{});for(var g in d)a.options[g]=d[g];return a.options}function A(a,d,g){var E=[];for(var j in a)E.push(encodeURIComponent(g?j.toUpperCase():j)+"="+encodeURIComponent(a[j]));return(!d||d.indexOf("?")===-1?"?":"&")+E.join("&")}var M=/\{ *([\w_ -]+) *\}/g;function R(a,d){return a.replace(M,function(g,E){var j=d[E];if(j===void 0)throw new Error("No value provided for variable "+g);return typeof j=="function"&&(j=j(d)),j})}var N=Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"};function D(a,d){for(var g=0;g<a.length;g++)if(a[g]===d)return g;return-1}var C="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function G(a){return window["webkit"+a]||window["moz"+a]||window["ms"+a]}var H=0;function V(a){var d=+new Date,g=Math.max(0,16-(d-H));return H=d+g,window.setTimeout(a,g)}var W=window.requestAnimationFrame||G("RequestAnimationFrame")||V,re=window.cancelAnimationFrame||G("CancelAnimationFrame")||G("CancelRequestAnimationFrame")||function(a){window.clearTimeout(a)};function ee(a,d,g){if(g&&W===V)a.call(d);else return W.call(window,u(a,d))}function q(a){a&&re.call(window,a)}var te={__proto__:null,extend:o,create:l,bind:u,get lastId(){return f},stamp:m,throttle:p,wrapNum:b,falseFn:_,formatNum:x,trim:S,splitWords:T,setOptions:k,getParamString:A,template:R,isArray:N,indexOf:D,emptyImageUrl:C,requestFn:W,cancelFn:re,requestAnimFrame:ee,cancelAnimFrame:q};function oe(){}oe.extend=function(a){var d=function(){k(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},g=d.__super__=this.prototype,E=l(g);E.constructor=d,d.prototype=E;for(var j in this)Object.prototype.hasOwnProperty.call(this,j)&&j!=="prototype"&&j!=="__super__"&&(d[j]=this[j]);return a.statics&&o(d,a.statics),a.includes&&(Se(a.includes),o.apply(null,[E].concat(a.includes))),o(E,a),delete E.statics,delete E.includes,E.options&&(E.options=g.options?l(g.options):{},o(E.options,a.options)),E._initHooks=[],E.callInitHooks=function(){if(!this._initHooksCalled){g.callInitHooks&&g.callInitHooks.call(this),this._initHooksCalled=!0;for(var I=0,Q=E._initHooks.length;I<Q;I++)E._initHooks[I].call(this)}},d},oe.include=function(a){var d=this.prototype.options;return o(this.prototype,a),a.options&&(this.prototype.options=d,this.mergeOptions(a.options)),this},oe.mergeOptions=function(a){return o(this.prototype.options,a),this},oe.addInitHook=function(a){var d=Array.prototype.slice.call(arguments,1),g=typeof a=="function"?a:function(){this[a].apply(this,d)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(g),this};function Se(a){if(!(typeof L>"u"||!L||!L.Mixin)){a=N(a)?a:[a];for(var d=0;d<a.length;d++)a[d]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var X={on:function(a,d,g){if(typeof a=="object")for(var E in a)this._on(E,a[E],d);else{a=T(a);for(var j=0,I=a.length;j<I;j++)this._on(a[j],d,g)}return this},off:function(a,d,g){if(!arguments.length)delete this._events;else if(typeof a=="object")for(var E in a)this._off(E,a[E],d);else{a=T(a);for(var j=arguments.length===1,I=0,Q=a.length;I<Q;I++)j?this._off(a[I]):this._off(a[I],d,g)}return this},_on:function(a,d,g,E){if(typeof d!="function"){console.warn("wrong listener type: "+typeof d);return}if(this._listens(a,d,g)===!1){g===this&&(g=void 0);var j={fn:d,ctx:g};E&&(j.once=!0),this._events=this._events||{},this._events[a]=this._events[a]||[],this._events[a].push(j)}},_off:function(a,d,g){var E,j,I;if(this._events&&(E=this._events[a],!!E)){if(arguments.length===1){if(this._firingCount)for(j=0,I=E.length;j<I;j++)E[j].fn=_;delete this._events[a];return}if(typeof d!="function"){console.warn("wrong listener type: "+typeof d);return}var Q=this._listens(a,d,g);if(Q!==!1){var de=E[Q];this._firingCount&&(de.fn=_,this._events[a]=E=E.slice()),E.splice(Q,1)}}},fire:function(a,d,g){if(!this.listens(a,g))return this;var E=o({},d,{type:a,target:this,sourceTarget:d&&d.sourceTarget||this});if(this._events){var j=this._events[a];if(j){this._firingCount=this._firingCount+1||1;for(var I=0,Q=j.length;I<Q;I++){var de=j[I],ve=de.fn;de.once&&this.off(a,ve,de.ctx),ve.call(de.ctx||this,E)}this._firingCount--}}return g&&this._propagateEvent(E),this},listens:function(a,d,g,E){typeof a!="string"&&console.warn('"string" type argument expected');var j=d;typeof d!="function"&&(E=!!d,j=void 0,g=void 0);var I=this._events&&this._events[a];if(I&&I.length&&this._listens(a,j,g)!==!1)return!0;if(E){for(var Q in this._eventParents)if(this._eventParents[Q].listens(a,d,g,E))return!0}return!1},_listens:function(a,d,g){if(!this._events)return!1;var E=this._events[a]||[];if(!d)return!!E.length;g===this&&(g=void 0);for(var j=0,I=E.length;j<I;j++)if(E[j].fn===d&&E[j].ctx===g)return j;return!1},once:function(a,d,g){if(typeof a=="object")for(var E in a)this._on(E,a[E],d,!0);else{a=T(a);for(var j=0,I=a.length;j<I;j++)this._on(a[j],d,g,!0)}return this},addEventParent:function(a){return this._eventParents=this._eventParents||{},this._eventParents[m(a)]=a,this},removeEventParent:function(a){return this._eventParents&&delete this._eventParents[m(a)],this},_propagateEvent:function(a){for(var d in this._eventParents)this._eventParents[d].fire(a.type,o({layer:a.target,propagatedFrom:a.target},a),!0)}};X.addEventListener=X.on,X.removeEventListener=X.clearAllEventListeners=X.off,X.addOneTimeEventListener=X.once,X.fireEvent=X.fire,X.hasEventListeners=X.listens;var ae=oe.extend(X);function J(a,d,g){this.x=g?Math.round(a):a,this.y=g?Math.round(d):d}var ye=Math.trunc||function(a){return a>0?Math.floor(a):Math.ceil(a)};J.prototype={clone:function(){return new J(this.x,this.y)},add:function(a){return this.clone()._add(K(a))},_add:function(a){return this.x+=a.x,this.y+=a.y,this},subtract:function(a){return this.clone()._subtract(K(a))},_subtract:function(a){return this.x-=a.x,this.y-=a.y,this},divideBy:function(a){return this.clone()._divideBy(a)},_divideBy:function(a){return this.x/=a,this.y/=a,this},multiplyBy:function(a){return this.clone()._multiplyBy(a)},_multiplyBy:function(a){return this.x*=a,this.y*=a,this},scaleBy:function(a){return new J(this.x*a.x,this.y*a.y)},unscaleBy:function(a){return new J(this.x/a.x,this.y/a.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ye(this.x),this.y=ye(this.y),this},distanceTo:function(a){a=K(a);var d=a.x-this.x,g=a.y-this.y;return Math.sqrt(d*d+g*g)},equals:function(a){return a=K(a),a.x===this.x&&a.y===this.y},contains:function(a){return a=K(a),Math.abs(a.x)<=Math.abs(this.x)&&Math.abs(a.y)<=Math.abs(this.y)},toString:function(){return"Point("+x(this.x)+", "+x(this.y)+")"}};function K(a,d,g){return a instanceof J?a:N(a)?new J(a[0],a[1]):a==null?a:typeof a=="object"&&"x"in a&&"y"in a?new J(a.x,a.y):new J(a,d,g)}function U(a,d){if(a)for(var g=d?[a,d]:a,E=0,j=g.length;E<j;E++)this.extend(g[E])}U.prototype={extend:function(a){var d,g;if(!a)return this;if(a instanceof J||typeof a[0]=="number"||"x"in a)d=g=K(a);else if(a=$(a),d=a.min,g=a.max,!d||!g)return this;return!this.min&&!this.max?(this.min=d.clone(),this.max=g.clone()):(this.min.x=Math.min(d.x,this.min.x),this.max.x=Math.max(g.x,this.max.x),this.min.y=Math.min(d.y,this.min.y),this.max.y=Math.max(g.y,this.max.y)),this},getCenter:function(a){return K((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,a)},getBottomLeft:function(){return K(this.min.x,this.max.y)},getTopRight:function(){return K(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(a){var d,g;return typeof a[0]=="number"||a instanceof J?a=K(a):a=$(a),a instanceof U?(d=a.min,g=a.max):d=g=a,d.x>=this.min.x&&g.x<=this.max.x&&d.y>=this.min.y&&g.y<=this.max.y},intersects:function(a){a=$(a);var d=this.min,g=this.max,E=a.min,j=a.max,I=j.x>=d.x&&E.x<=g.x,Q=j.y>=d.y&&E.y<=g.y;return I&&Q},overlaps:function(a){a=$(a);var d=this.min,g=this.max,E=a.min,j=a.max,I=j.x>d.x&&E.x<g.x,Q=j.y>d.y&&E.y<g.y;return I&&Q},isValid:function(){return!!(this.min&&this.max)},pad:function(a){var d=this.min,g=this.max,E=Math.abs(d.x-g.x)*a,j=Math.abs(d.y-g.y)*a;return $(K(d.x-E,d.y-j),K(g.x+E,g.y+j))},equals:function(a){return a?(a=$(a),this.min.equals(a.getTopLeft())&&this.max.equals(a.getBottomRight())):!1}};function $(a,d){return!a||a instanceof U?a:new U(a,d)}function F(a,d){if(a)for(var g=d?[a,d]:a,E=0,j=g.length;E<j;E++)this.extend(g[E])}F.prototype={extend:function(a){var d=this._southWest,g=this._northEast,E,j;if(a instanceof B)E=a,j=a;else if(a instanceof F){if(E=a._southWest,j=a._northEast,!E||!j)return this}else return a?this.extend(Y(a)||Z(a)):this;return!d&&!g?(this._southWest=new B(E.lat,E.lng),this._northEast=new B(j.lat,j.lng)):(d.lat=Math.min(E.lat,d.lat),d.lng=Math.min(E.lng,d.lng),g.lat=Math.max(j.lat,g.lat),g.lng=Math.max(j.lng,g.lng)),this},pad:function(a){var d=this._southWest,g=this._northEast,E=Math.abs(d.lat-g.lat)*a,j=Math.abs(d.lng-g.lng)*a;return new F(new B(d.lat-E,d.lng-j),new B(g.lat+E,g.lng+j))},getCenter:function(){return new B((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new B(this.getNorth(),this.getWest())},getSouthEast:function(){return new B(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(a){typeof a[0]=="number"||a instanceof B||"lat"in a?a=Y(a):a=Z(a);var d=this._southWest,g=this._northEast,E,j;return a instanceof F?(E=a.getSouthWest(),j=a.getNorthEast()):E=j=a,E.lat>=d.lat&&j.lat<=g.lat&&E.lng>=d.lng&&j.lng<=g.lng},intersects:function(a){a=Z(a);var d=this._southWest,g=this._northEast,E=a.getSouthWest(),j=a.getNorthEast(),I=j.lat>=d.lat&&E.lat<=g.lat,Q=j.lng>=d.lng&&E.lng<=g.lng;return I&&Q},overlaps:function(a){a=Z(a);var d=this._southWest,g=this._northEast,E=a.getSouthWest(),j=a.getNorthEast(),I=j.lat>d.lat&&E.lat<g.lat,Q=j.lng>d.lng&&E.lng<g.lng;return I&&Q},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(a,d){return a?(a=Z(a),this._southWest.equals(a.getSouthWest(),d)&&this._northEast.equals(a.getNorthEast(),d)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Z(a,d){return a instanceof F?a:new F(a,d)}function B(a,d,g){if(isNaN(a)||isNaN(d))throw new Error("Invalid LatLng object: ("+a+", "+d+")");this.lat=+a,this.lng=+d,g!==void 0&&(this.alt=+g)}B.prototype={equals:function(a,d){if(!a)return!1;a=Y(a);var g=Math.max(Math.abs(this.lat-a.lat),Math.abs(this.lng-a.lng));return g<=(d===void 0?1e-9:d)},toString:function(a){return"LatLng("+x(this.lat,a)+", "+x(this.lng,a)+")"},distanceTo:function(a){return fe.distance(this,Y(a))},wrap:function(){return fe.wrapLatLng(this)},toBounds:function(a){var d=180*a/40075017,g=d/Math.cos(Math.PI/180*this.lat);return Z([this.lat-d,this.lng-g],[this.lat+d,this.lng+g])},clone:function(){return new B(this.lat,this.lng,this.alt)}};function Y(a,d,g){return a instanceof B?a:N(a)&&typeof a[0]!="object"?a.length===3?new B(a[0],a[1],a[2]):a.length===2?new B(a[0],a[1]):null:a==null?a:typeof a=="object"&&"lat"in a?new B(a.lat,"lng"in a?a.lng:a.lon,a.alt):d===void 0?null:new B(a,d,g)}var ie={latLngToPoint:function(a,d){var g=this.projection.project(a),E=this.scale(d);return this.transformation._transform(g,E)},pointToLatLng:function(a,d){var g=this.scale(d),E=this.transformation.untransform(a,g);return this.projection.unproject(E)},project:function(a){return this.projection.project(a)},unproject:function(a){return this.projection.unproject(a)},scale:function(a){return 256*Math.pow(2,a)},zoom:function(a){return Math.log(a/256)/Math.LN2},getProjectedBounds:function(a){if(this.infinite)return null;var d=this.projection.bounds,g=this.scale(a),E=this.transformation.transform(d.min,g),j=this.transformation.transform(d.max,g);return new U(E,j)},infinite:!1,wrapLatLng:function(a){var d=this.wrapLng?b(a.lng,this.wrapLng,!0):a.lng,g=this.wrapLat?b(a.lat,this.wrapLat,!0):a.lat,E=a.alt;return new B(g,d,E)},wrapLatLngBounds:function(a){var d=a.getCenter(),g=this.wrapLatLng(d),E=d.lat-g.lat,j=d.lng-g.lng;if(E===0&&j===0)return a;var I=a.getSouthWest(),Q=a.getNorthEast(),de=new B(I.lat-E,I.lng-j),ve=new B(Q.lat-E,Q.lng-j);return new F(de,ve)}},fe=o({},ie,{wrapLng:[-180,180],R:6371e3,distance:function(a,d){var g=Math.PI/180,E=a.lat*g,j=d.lat*g,I=Math.sin((d.lat-a.lat)*g/2),Q=Math.sin((d.lng-a.lng)*g/2),de=I*I+Math.cos(E)*Math.cos(j)*Q*Q,ve=2*Math.atan2(Math.sqrt(de),Math.sqrt(1-de));return this.R*ve}}),ce=6378137,xe={R:ce,MAX_LATITUDE:85.0511287798,project:function(a){var d=Math.PI/180,g=this.MAX_LATITUDE,E=Math.max(Math.min(g,a.lat),-g),j=Math.sin(E*d);return new J(this.R*a.lng*d,this.R*Math.log((1+j)/(1-j))/2)},unproject:function(a){var d=180/Math.PI;return new B((2*Math.atan(Math.exp(a.y/this.R))-Math.PI/2)*d,a.x*d/this.R)},bounds:(function(){var a=ce*Math.PI;return new U([-a,-a],[a,a])})()};function ke(a,d,g,E){if(N(a)){this._a=a[0],this._b=a[1],this._c=a[2],this._d=a[3];return}this._a=a,this._b=d,this._c=g,this._d=E}ke.prototype={transform:function(a,d){return this._transform(a.clone(),d)},_transform:function(a,d){return d=d||1,a.x=d*(this._a*a.x+this._b),a.y=d*(this._c*a.y+this._d),a},untransform:function(a,d){return d=d||1,new J((a.x/d-this._b)/this._a,(a.y/d-this._d)/this._c)}};function je(a,d,g,E){return new ke(a,d,g,E)}var Me=o({},fe,{code:"EPSG:3857",projection:xe,transformation:(function(){var a=.5/(Math.PI*xe.R);return je(a,.5,-a,.5)})()}),Ee=o({},Me,{code:"EPSG:900913"});function Be(a){return document.createElementNS("http://www.w3.org/2000/svg",a)}function Ce(a,d){var g="",E,j,I,Q,de,ve;for(E=0,I=a.length;E<I;E++){for(de=a[E],j=0,Q=de.length;j<Q;j++)ve=de[j],g+=(j?"L":"M")+ve.x+" "+ve.y;g+=d?Ve.svg?"z":"x":""}return g||"M0 0"}var Le=document.documentElement.style,Ue="ActiveXObject"in window,me=Ue&&!document.addEventListener,Ie="msLaunchUri"in navigator&&!("documentMode"in document),le=Pn("webkit"),he=Pn("android"),Pe=Pn("android 2")||Pn("android 3"),Fe=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Ge=he&&Pn("Google")&&Fe<537&&!("AudioNode"in window),st=!!window.opera,et=!Ie&&Pn("chrome"),qt=Pn("gecko")&&!le&&!st&&!Ue,Sn=!et&&Pn("safari"),En=Pn("phantom"),ar="OTransition"in Le,yr=navigator.platform.indexOf("Win")===0,un=Ue&&"transition"in Le,Mt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Pe,gn="MozPerspective"in Le,dn=!window.L_DISABLE_3D&&(un||Mt||gn)&&!ar&&!En,Yr=typeof orientation<"u"||Pn("mobile"),ra=Yr&&le,zi=Yr&&Mt,Tn=!window.PointerEvent&&window.MSPointerEvent,On=!!(window.PointerEvent||Tn),os="ontouchstart"in window||!!window.TouchEvent,jr=!window.L_NO_TOUCH&&(os||On),or=Yr&&st,mi=Yr&&qt,ia=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Qa=(function(){var a=!1;try{var d=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("testPassiveEventSupport",_,d),window.removeEventListener("testPassiveEventSupport",_,d)}catch{}return a})(),eo=(function(){return!!document.createElement("canvas").getContext})(),Ui=!!(document.createElementNS&&Be("svg").createSVGRect),to=!!Ui&&(function(){var a=document.createElement("div");return a.innerHTML="<svg/>",(a.firstChild&&a.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),sa=!Ui&&(function(){try{var a=document.createElement("div");a.innerHTML='<v:shape adj="1"/>';var d=a.firstChild;return d.style.behavior="url(#default#VML)",d&&typeof d.adj=="object"}catch{return!1}})(),no=navigator.platform.indexOf("Mac")===0,ro=navigator.platform.indexOf("Linux")===0;function Pn(a){return navigator.userAgent.toLowerCase().indexOf(a)>=0}var Ve={ie:Ue,ielt9:me,edge:Ie,webkit:le,android:he,android23:Pe,androidStock:Ge,opera:st,chrome:et,gecko:qt,safari:Sn,phantom:En,opera12:ar,win:yr,ie3d:un,webkit3d:Mt,gecko3d:gn,any3d:dn,mobile:Yr,mobileWebkit:ra,mobileWebkit3d:zi,msPointer:Tn,pointer:On,touch:jr,touchNative:os,mobileOpera:or,mobileGecko:mi,retina:ia,passiveEvents:Qa,canvas:eo,svg:Ui,vml:sa,inlineSvg:to,mac:no,linux:ro},ks=Ve.msPointer?"MSPointerDown":"pointerdown",Nr=Ve.msPointer?"MSPointerMove":"pointermove",lr=Ve.msPointer?"MSPointerUp":"pointerup",rn=Ve.msPointer?"MSPointerCancel":"pointercancel",kn={touchstart:ks,touchmove:Nr,touchend:lr,touchcancel:rn},qr={touchstart:$n,touchmove:mt,touchend:mt,touchcancel:mt},pi={},pe=!1;function Ye(a,d,g){return d==="touchstart"&&xt(),qr[d]?(g=qr[d].bind(this,g),a.addEventListener(kn[d],g,!1),g):(console.warn("wrong event specified:",d),_)}function lt(a,d,g){if(!kn[d]){console.warn("wrong event specified:",d);return}a.removeEventListener(kn[d],g,!1)}function pt(a){pi[a.pointerId]=a}function tt(a){pi[a.pointerId]&&(pi[a.pointerId]=a)}function dt(a){delete pi[a.pointerId]}function xt(){pe||(document.addEventListener(ks,pt,!0),document.addEventListener(Nr,tt,!0),document.addEventListener(lr,dt,!0),document.addEventListener(rn,dt,!0),pe=!0)}function mt(a,d){if(d.pointerType!==(d.MSPOINTER_TYPE_MOUSE||"mouse")){d.touches=[];for(var g in pi)d.touches.push(pi[g]);d.changedTouches=[d],a(d)}}function $n(a,d){d.MSPOINTER_TYPE_TOUCH&&d.pointerType===d.MSPOINTER_TYPE_TOUCH&&bn(d),mt(a,d)}function wt(a){var d={},g,E;for(E in a)g=a[E],d[E]=g&&g.bind?g.bind(a):g;return a=d,d.type="dblclick",d.detail=2,d.isTrusted=!1,d._simulated=!0,d}var aa=200;function io(a,d){a.addEventListener("dblclick",d);var g=0,E;function j(I){if(I.detail!==1){E=I.detail;return}if(!(I.pointerType==="mouse"||I.sourceCapabilities&&!I.sourceCapabilities.firesTouchEvents)){var Q=fo(I);if(!(Q.some(function(ve){return ve instanceof HTMLLabelElement&&ve.attributes.for})&&!Q.some(function(ve){return ve instanceof HTMLInputElement||ve instanceof HTMLSelectElement}))){var de=Date.now();de-g<=aa?(E++,E===2&&d(wt(I))):E=1,g=de}}}return a.addEventListener("click",j),{dblclick:d,simDblclick:j}}function gi(a,d){a.removeEventListener("dblclick",d.dblclick),a.removeEventListener("click",d.simDblclick)}var Wn=lo(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),As=lo(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),so=As==="webkitTransition"||As==="OTransition"?As+"End":"transitionend";function ao(a){return typeof a=="string"?document.getElementById(a):a}function oo(a,d){var g=a.style[d]||a.currentStyle&&a.currentStyle[d];if((!g||g==="auto")&&document.defaultView){var E=document.defaultView.getComputedStyle(a,null);g=E?E[d]:null}return g==="auto"?null:g}function gt(a,d,g){var E=document.createElement(a);return E.className=d||"",g&&g.appendChild(E),E}function It(a){var d=a.parentNode;d&&d.removeChild(a)}function Or(a){for(;a.firstChild;)a.removeChild(a.firstChild)}function In(a){var d=a.parentNode;d&&d.lastChild!==a&&d.appendChild(a)}function js(a){var d=a.parentNode;d&&d.firstChild!==a&&d.insertBefore(a,d.firstChild)}function Mc(a,d){if(a.classList!==void 0)return a.classList.contains(d);var g=dl(a);return g.length>0&&new RegExp("(^|\\s)"+d+"(\\s|$)").test(g)}function at(a,d){if(a.classList!==void 0)for(var g=T(d),E=0,j=g.length;E<j;E++)a.classList.add(g[E]);else if(!Mc(a,d)){var I=dl(a);oa(a,(I?I+" ":"")+d)}}function sn(a,d){a.classList!==void 0?a.classList.remove(d):oa(a,S((" "+dl(a)+" ").replace(" "+d+" "," ")))}function oa(a,d){a.className.baseVal===void 0?a.className=d:a.className.baseVal=d}function dl(a){return a.correspondingElement&&(a=a.correspondingElement),a.className.baseVal===void 0?a.className:a.className.baseVal}function Qt(a,d){"opacity"in a.style?a.style.opacity=d:"filter"in a.style&&Cc(a,d)}function Cc(a,d){var g=!1,E="DXImageTransform.Microsoft.Alpha";try{g=a.filters.item(E)}catch{if(d===1)return}d=Math.round(d*100),g?(g.Enabled=d!==100,g.Opacity=d):a.style.filter+=" progid:"+E+"(opacity="+d+")"}function lo(a){for(var d=document.documentElement.style,g=0;g<a.length;g++)if(a[g]in d)return a[g];return!1}function Hi(a,d,g){var E=d||new J(0,0);a.style[Wn]=(Ve.ie3d?"translate("+E.x+"px,"+E.y+"px)":"translate3d("+E.x+"px,"+E.y+"px,0)")+(g?" scale("+g+")":"")}function Ft(a,d){a._leaflet_pos=d,Ve.any3d?Hi(a,d):(a.style.left=d.x+"px",a.style.top=d.y+"px")}function ls(a){return a._leaflet_pos||new J(0,0)}var la,bi,Rc;if("onselectstart"in document)la=function(){it(window,"selectstart",bn)},bi=function(){Lt(window,"selectstart",bn)};else{var ca=lo(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);la=function(){if(ca){var a=document.documentElement.style;Rc=a[ca],a[ca]="none"}},bi=function(){ca&&(document.documentElement.style[ca]=Rc,Rc=void 0)}}function hl(){it(window,"dragstart",bn)}function co(){Lt(window,"dragstart",bn)}var fl,Lc;function ua(a){for(;a.tabIndex===-1;)a=a.parentNode;a.style&&(Dr(),fl=a,Lc=a.style.outlineStyle,a.style.outlineStyle="none",it(window,"keydown",Dr))}function Dr(){fl&&(fl.style.outlineStyle=Lc,fl=void 0,Lc=void 0,Lt(window,"keydown",Dr))}function ml(a){do a=a.parentNode;while((!a.offsetWidth||!a.offsetHeight)&&a!==document.body);return a}function uo(a){var d=a.getBoundingClientRect();return{x:d.width/a.offsetWidth||1,y:d.height/a.offsetHeight||1,boundingClientRect:d}}var da={__proto__:null,TRANSFORM:Wn,TRANSITION:As,TRANSITION_END:so,get:ao,getStyle:oo,create:gt,remove:It,empty:Or,toFront:In,toBack:js,hasClass:Mc,addClass:at,removeClass:sn,setClass:oa,getClass:dl,setOpacity:Qt,testProp:lo,setTransform:Hi,setPosition:Ft,getPosition:ls,get disableTextSelection(){return la},get enableTextSelection(){return bi},disableImageDrag:hl,enableImageDrag:co,preventOutline:ua,restoreOutline:Dr,getSizedParentNode:ml,getScale:uo};function it(a,d,g,E){if(d&&typeof d=="object")for(var j in d)Vr(a,j,d[j],g);else{d=T(d);for(var I=0,Q=d.length;I<Q;I++)Vr(a,d[I],g,E)}return this}var Zr="_leaflet_events";function Lt(a,d,g,E){if(arguments.length===1)Bc(a),delete a[Zr];else if(d&&typeof d=="object")for(var j in d)ho(a,j,d[j],g);else if(d=T(d),arguments.length===2)Bc(a,function(de){return D(d,de)!==-1});else for(var I=0,Q=d.length;I<Q;I++)ho(a,d[I],g,E);return this}function Bc(a,d){for(var g in a[Zr]){var E=g.split(/\d/)[0];(!d||d(E))&&ho(a,E,null,null,g)}}var Ns={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Vr(a,d,g,E){var j=d+m(g)+(E?"_"+m(E):"");if(a[Zr]&&a[Zr][j])return this;var I=function(de){return g.call(E||a,de||window.event)},Q=I;!Ve.touchNative&&Ve.pointer&&d.indexOf("touch")===0?I=Ye(a,d,I):Ve.touch&&d==="dblclick"?I=io(a,I):"addEventListener"in a?d==="touchstart"||d==="touchmove"||d==="wheel"||d==="mousewheel"?a.addEventListener(Ns[d]||d,I,Ve.passiveEvents?{passive:!1}:!1):d==="mouseenter"||d==="mouseleave"?(I=function(de){de=de||window.event,Gi(a,de)&&Q(de)},a.addEventListener(Ns[d],I,!1)):a.addEventListener(d,Q,!1):a.attachEvent("on"+d,I),a[Zr]=a[Zr]||{},a[Zr][j]=I}function ho(a,d,g,E,j){j=j||d+m(g)+(E?"_"+m(E):"");var I=a[Zr]&&a[Zr][j];if(!I)return this;!Ve.touchNative&&Ve.pointer&&d.indexOf("touch")===0?lt(a,d,I):Ve.touch&&d==="dblclick"?gi(a,I):"removeEventListener"in a?a.removeEventListener(Ns[d]||d,I,!1):a.detachEvent("on"+d,I),a[Zr][j]=null}function Kr(a){return a.stopPropagation?a.stopPropagation():a.originalEvent?a.originalEvent._stopped=!0:a.cancelBubble=!0,this}function yi(a){return Vr(a,"wheel",Kr),this}function Os(a){return it(a,"mousedown touchstart dblclick contextmenu",Kr),a._leaflet_disable_click=!0,this}function bn(a){return a.preventDefault?a.preventDefault():a.returnValue=!1,this}function cs(a){return bn(a),Kr(a),this}function fo(a){if(a.composedPath)return a.composedPath();for(var d=[],g=a.target;g;)d.push(g),g=g.parentNode;return d}function mo(a,d){if(!d)return new J(a.clientX,a.clientY);var g=uo(d),E=g.boundingClientRect;return new J((a.clientX-E.left)/g.x-d.clientLeft,(a.clientY-E.top)/g.y-d.clientTop)}var Td=Ve.linux&&Ve.chrome?window.devicePixelRatio:Ve.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Xn(a){return Ve.edge?a.wheelDeltaY/2:a.deltaY&&a.deltaMode===0?-a.deltaY/Td:a.deltaY&&a.deltaMode===1?-a.deltaY*20:a.deltaY&&a.deltaMode===2?-a.deltaY*60:a.deltaX||a.deltaZ?0:a.wheelDelta?(a.wheelDeltaY||a.wheelDelta)/2:a.detail&&Math.abs(a.detail)<32765?-a.detail*20:a.detail?a.detail/-32765*60:0}function Gi(a,d){var g=d.relatedTarget;if(!g)return!0;try{for(;g&&g!==a;)g=g.parentNode}catch{return!1}return g!==a}var pl={__proto__:null,on:it,off:Lt,stopPropagation:Kr,disableScrollPropagation:yi,disableClickPropagation:Os,preventDefault:bn,stop:cs,getPropagationPath:fo,getMousePosition:mo,getWheelDelta:Xn,isExternalTarget:Gi,addListener:it,removeListener:Lt},ha=ae.extend({run:function(a,d,g,E){this.stop(),this._el=a,this._inProgress=!0,this._duration=g||.25,this._easeOutPower=1/Math.max(E||.5,.2),this._startPos=ls(a),this._offset=d.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=ee(this._animate,this),this._step()},_step:function(a){var d=+new Date-this._startTime,g=this._duration*1e3;d<g?this._runFrame(this._easeOut(d/g),a):(this._runFrame(1),this._complete())},_runFrame:function(a,d){var g=this._startPos.add(this._offset.multiplyBy(a));d&&g._round(),Ft(this._el,g),this.fire("step")},_complete:function(){q(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(a){return 1-Math.pow(1-a,this._easeOutPower)}}),St=ae.extend({options:{crs:Me,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(a,d){d=k(this,d),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(a),this._initLayout(),this._onResize=u(this._onResize,this),this._initEvents(),d.maxBounds&&this.setMaxBounds(d.maxBounds),d.zoom!==void 0&&(this._zoom=this._limitZoom(d.zoom)),d.center&&d.zoom!==void 0&&this.setView(Y(d.center),d.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=As&&Ve.any3d&&!Ve.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),it(this._proxy,so,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(a,d,g){if(d=d===void 0?this._zoom:this._limitZoom(d),a=this._limitCenter(Y(a),d,this.options.maxBounds),g=g||{},this._stop(),this._loaded&&!g.reset&&g!==!0){g.animate!==void 0&&(g.zoom=o({animate:g.animate},g.zoom),g.pan=o({animate:g.animate,duration:g.duration},g.pan));var E=this._zoom!==d?this._tryAnimatedZoom&&this._tryAnimatedZoom(a,d,g.zoom):this._tryAnimatedPan(a,g.pan);if(E)return clearTimeout(this._sizeTimer),this}return this._resetView(a,d,g.pan&&g.pan.noMoveStart),this},setZoom:function(a,d){return this._loaded?this.setView(this.getCenter(),a,{zoom:d}):(this._zoom=a,this)},zoomIn:function(a,d){return a=a||(Ve.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+a,d)},zoomOut:function(a,d){return a=a||(Ve.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-a,d)},setZoomAround:function(a,d,g){var E=this.getZoomScale(d),j=this.getSize().divideBy(2),I=a instanceof J?a:this.latLngToContainerPoint(a),Q=I.subtract(j).multiplyBy(1-1/E),de=this.containerPointToLatLng(j.add(Q));return this.setView(de,d,{zoom:g})},_getBoundsCenterZoom:function(a,d){d=d||{},a=a.getBounds?a.getBounds():Z(a);var g=K(d.paddingTopLeft||d.padding||[0,0]),E=K(d.paddingBottomRight||d.padding||[0,0]),j=this.getBoundsZoom(a,!1,g.add(E));if(j=typeof d.maxZoom=="number"?Math.min(d.maxZoom,j):j,j===1/0)return{center:a.getCenter(),zoom:j};var I=E.subtract(g).divideBy(2),Q=this.project(a.getSouthWest(),j),de=this.project(a.getNorthEast(),j),ve=this.unproject(Q.add(de).divideBy(2).add(I),j);return{center:ve,zoom:j}},fitBounds:function(a,d){if(a=Z(a),!a.isValid())throw new Error("Bounds are not valid.");var g=this._getBoundsCenterZoom(a,d);return this.setView(g.center,g.zoom,d)},fitWorld:function(a){return this.fitBounds([[-90,-180],[90,180]],a)},panTo:function(a,d){return this.setView(a,this._zoom,{pan:d})},panBy:function(a,d){if(a=K(a).round(),d=d||{},!a.x&&!a.y)return this.fire("moveend");if(d.animate!==!0&&!this.getSize().contains(a))return this._resetView(this.unproject(this.project(this.getCenter()).add(a)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new ha,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),d.noMoveStart||this.fire("movestart"),d.animate!==!1){at(this._mapPane,"leaflet-pan-anim");var g=this._getMapPanePos().subtract(a).round();this._panAnim.run(this._mapPane,g,d.duration||.25,d.easeLinearity)}else this._rawPanBy(a),this.fire("move").fire("moveend");return this},flyTo:function(a,d,g){if(g=g||{},g.animate===!1||!Ve.any3d)return this.setView(a,d,g);this._stop();var E=this.project(this.getCenter()),j=this.project(a),I=this.getSize(),Q=this._zoom;a=Y(a),d=d===void 0?Q:d;var de=Math.max(I.x,I.y),ve=de*this.getZoomScale(Q,d),Oe=j.distanceTo(E)||1,ze=1.42,Xe=ze*ze;function ht(hn){var Zi=hn?-1:1,Rs=hn?ve:de,Xc=ve*ve-de*de+Zi*Xe*Xe*Oe*Oe,Oo=2*Rs*Xe*Oe,Do=Xc/Oo,ys=Math.sqrt(Do*Do+1)-Do,Vi=ys<1e-9?-18:Math.log(ys);return Vi}function zn(hn){return(Math.exp(hn)-Math.exp(-hn))/2}function yn(hn){return(Math.exp(hn)+Math.exp(-hn))/2}function _r(hn){return zn(hn)/yn(hn)}var jt=ht(0);function Nt(hn){return de*(yn(jt)/yn(jt+ze*hn))}function bt(hn){return de*(yn(jt)*_r(jt+ze*hn)-zn(jt))/Xe}function gs(hn){return 1-Math.pow(1-hn,1.5)}var Lr=Date.now(),Nl=(ht(1)-jt)/ze,bs=g.duration?1e3*g.duration:1e3*Nl*.8;function Wc(){var hn=(Date.now()-Lr)/bs,Zi=gs(hn)*Nl;hn<=1?(this._flyToFrame=ee(Wc,this),this._move(this.unproject(E.add(j.subtract(E).multiplyBy(bt(Zi)/Oe)),Q),this.getScaleZoom(de/Nt(Zi),Q),{flyTo:!0})):this._move(a,d)._moveEnd(!0)}return this._moveStart(!0,g.noMoveStart),Wc.call(this),this},flyToBounds:function(a,d){var g=this._getBoundsCenterZoom(a,d);return this.flyTo(g.center,g.zoom,d)},setMaxBounds:function(a){return a=Z(a),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),a.isValid()?(this.options.maxBounds=a,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(a){var d=this.options.minZoom;return this.options.minZoom=a,this._loaded&&d!==a&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(a):this},setMaxZoom:function(a){var d=this.options.maxZoom;return this.options.maxZoom=a,this._loaded&&d!==a&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(a):this},panInsideBounds:function(a,d){this._enforcingBounds=!0;var g=this.getCenter(),E=this._limitCenter(g,this._zoom,Z(a));return g.equals(E)||this.panTo(E,d),this._enforcingBounds=!1,this},panInside:function(a,d){d=d||{};var g=K(d.paddingTopLeft||d.padding||[0,0]),E=K(d.paddingBottomRight||d.padding||[0,0]),j=this.project(this.getCenter()),I=this.project(a),Q=this.getPixelBounds(),de=$([Q.min.add(g),Q.max.subtract(E)]),ve=de.getSize();if(!de.contains(I)){this._enforcingBounds=!0;var Oe=I.subtract(de.getCenter()),ze=de.extend(I).getSize().subtract(ve);j.x+=Oe.x<0?-ze.x:ze.x,j.y+=Oe.y<0?-ze.y:ze.y,this.panTo(this.unproject(j),d),this._enforcingBounds=!1}return this},invalidateSize:function(a){if(!this._loaded)return this;a=o({animate:!1,pan:!0},a===!0?{animate:!0}:a);var d=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var g=this.getSize(),E=d.divideBy(2).round(),j=g.divideBy(2).round(),I=E.subtract(j);return!I.x&&!I.y?this:(a.animate&&a.pan?this.panBy(I):(a.pan&&this._rawPanBy(I),this.fire("move"),a.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(u(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:d,newSize:g}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(a){if(a=this._locateOptions=o({timeout:1e4,watch:!1},a),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var d=u(this._handleGeolocationResponse,this),g=u(this._handleGeolocationError,this);return a.watch?this._locationWatchId=navigator.geolocation.watchPosition(d,g,a):navigator.geolocation.getCurrentPosition(d,g,a),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(a){if(this._container._leaflet_id){var d=a.code,g=a.message||(d===1?"permission denied":d===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:d,message:"Geolocation error: "+g+"."})}},_handleGeolocationResponse:function(a){if(this._container._leaflet_id){var d=a.coords.latitude,g=a.coords.longitude,E=new B(d,g),j=E.toBounds(a.coords.accuracy*2),I=this._locateOptions;if(I.setView){var Q=this.getBoundsZoom(j);this.setView(E,I.maxZoom?Math.min(Q,I.maxZoom):Q)}var de={latlng:E,bounds:j,timestamp:a.timestamp};for(var ve in a.coords)typeof a.coords[ve]=="number"&&(de[ve]=a.coords[ve]);this.fire("locationfound",de)}},addHandler:function(a,d){if(!d)return this;var g=this[a]=new d(this);return this._handlers.push(g),this.options[a]&&g.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),It(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(q(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var a;for(a in this._layers)this._layers[a].remove();for(a in this._panes)It(this._panes[a]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(a,d){var g="leaflet-pane"+(a?" leaflet-"+a.replace("Pane","")+"-pane":""),E=gt("div",g,d||this._mapPane);return a&&(this._panes[a]=E),E},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var a=this.getPixelBounds(),d=this.unproject(a.getBottomLeft()),g=this.unproject(a.getTopRight());return new F(d,g)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(a,d,g){a=Z(a),g=K(g||[0,0]);var E=this.getZoom()||0,j=this.getMinZoom(),I=this.getMaxZoom(),Q=a.getNorthWest(),de=a.getSouthEast(),ve=this.getSize().subtract(g),Oe=$(this.project(de,E),this.project(Q,E)).getSize(),ze=Ve.any3d?this.options.zoomSnap:1,Xe=ve.x/Oe.x,ht=ve.y/Oe.y,zn=d?Math.max(Xe,ht):Math.min(Xe,ht);return E=this.getScaleZoom(zn,E),ze&&(E=Math.round(E/(ze/100))*(ze/100),E=d?Math.ceil(E/ze)*ze:Math.floor(E/ze)*ze),Math.max(j,Math.min(I,E))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new J(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(a,d){var g=this._getTopLeftPoint(a,d);return new U(g,g.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(a){return this.options.crs.getProjectedBounds(a===void 0?this.getZoom():a)},getPane:function(a){return typeof a=="string"?this._panes[a]:a},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(a,d){var g=this.options.crs;return d=d===void 0?this._zoom:d,g.scale(a)/g.scale(d)},getScaleZoom:function(a,d){var g=this.options.crs;d=d===void 0?this._zoom:d;var E=g.zoom(a*g.scale(d));return isNaN(E)?1/0:E},project:function(a,d){return d=d===void 0?this._zoom:d,this.options.crs.latLngToPoint(Y(a),d)},unproject:function(a,d){return d=d===void 0?this._zoom:d,this.options.crs.pointToLatLng(K(a),d)},layerPointToLatLng:function(a){var d=K(a).add(this.getPixelOrigin());return this.unproject(d)},latLngToLayerPoint:function(a){var d=this.project(Y(a))._round();return d._subtract(this.getPixelOrigin())},wrapLatLng:function(a){return this.options.crs.wrapLatLng(Y(a))},wrapLatLngBounds:function(a){return this.options.crs.wrapLatLngBounds(Z(a))},distance:function(a,d){return this.options.crs.distance(Y(a),Y(d))},containerPointToLayerPoint:function(a){return K(a).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(a){return K(a).add(this._getMapPanePos())},containerPointToLatLng:function(a){var d=this.containerPointToLayerPoint(K(a));return this.layerPointToLatLng(d)},latLngToContainerPoint:function(a){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Y(a)))},mouseEventToContainerPoint:function(a){return mo(a,this._container)},mouseEventToLayerPoint:function(a){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(a))},mouseEventToLatLng:function(a){return this.layerPointToLatLng(this.mouseEventToLayerPoint(a))},_initContainer:function(a){var d=this._container=ao(a);if(d){if(d._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");it(d,"scroll",this._onScroll,this),this._containerId=m(d)},_initLayout:function(){var a=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ve.any3d,at(a,"leaflet-container"+(Ve.touch?" leaflet-touch":"")+(Ve.retina?" leaflet-retina":"")+(Ve.ielt9?" leaflet-oldie":"")+(Ve.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var d=oo(a,"position");d!=="absolute"&&d!=="relative"&&d!=="fixed"&&d!=="sticky"&&(a.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var a=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Ft(this._mapPane,new J(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(at(a.markerPane,"leaflet-zoom-hide"),at(a.shadowPane,"leaflet-zoom-hide"))},_resetView:function(a,d,g){Ft(this._mapPane,new J(0,0));var E=!this._loaded;this._loaded=!0,d=this._limitZoom(d),this.fire("viewprereset");var j=this._zoom!==d;this._moveStart(j,g)._move(a,d)._moveEnd(j),this.fire("viewreset"),E&&this.fire("load")},_moveStart:function(a,d){return a&&this.fire("zoomstart"),d||this.fire("movestart"),this},_move:function(a,d,g,E){d===void 0&&(d=this._zoom);var j=this._zoom!==d;return this._zoom=d,this._lastCenter=a,this._pixelOrigin=this._getNewPixelOrigin(a),E?g&&g.pinch&&this.fire("zoom",g):((j||g&&g.pinch)&&this.fire("zoom",g),this.fire("move",g)),this},_moveEnd:function(a){return a&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return q(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(a){Ft(this._mapPane,this._getMapPanePos().subtract(a))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(a){this._targets={},this._targets[m(this._container)]=this;var d=a?Lt:it;d(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&d(window,"resize",this._onResize,this),Ve.any3d&&this.options.transform3DLimit&&(a?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){q(this._resizeRequest),this._resizeRequest=ee(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var a=this._getMapPanePos();Math.max(Math.abs(a.x),Math.abs(a.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(a,d){for(var g=[],E,j=d==="mouseout"||d==="mouseover",I=a.target||a.srcElement,Q=!1;I;){if(E=this._targets[m(I)],E&&(d==="click"||d==="preclick")&&this._draggableMoved(E)){Q=!0;break}if(E&&E.listens(d,!0)&&(j&&!Gi(I,a)||(g.push(E),j))||I===this._container)break;I=I.parentNode}return!g.length&&!Q&&!j&&this.listens(d,!0)&&(g=[this]),g},_isClickDisabled:function(a){for(;a&&a!==this._container;){if(a._leaflet_disable_click)return!0;a=a.parentNode}},_handleDOMEvent:function(a){var d=a.target||a.srcElement;if(!(!this._loaded||d._leaflet_disable_events||a.type==="click"&&this._isClickDisabled(d))){var g=a.type;g==="mousedown"&&ua(d),this._fireDOMEvent(a,g)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(a,d,g){if(a.type==="click"){var E=o({},a);E.type="preclick",this._fireDOMEvent(E,E.type,g)}var j=this._findEventTargets(a,d);if(g){for(var I=[],Q=0;Q<g.length;Q++)g[Q].listens(d,!0)&&I.push(g[Q]);j=I.concat(j)}if(j.length){d==="contextmenu"&&bn(a);var de=j[0],ve={originalEvent:a};if(a.type!=="keypress"&&a.type!=="keydown"&&a.type!=="keyup"){var Oe=de.getLatLng&&(!de._radius||de._radius<=10);ve.containerPoint=Oe?this.latLngToContainerPoint(de.getLatLng()):this.mouseEventToContainerPoint(a),ve.layerPoint=this.containerPointToLayerPoint(ve.containerPoint),ve.latlng=Oe?de.getLatLng():this.layerPointToLatLng(ve.layerPoint)}for(Q=0;Q<j.length;Q++)if(j[Q].fire(d,ve,!0),ve.originalEvent._stopped||j[Q].options.bubblingMouseEvents===!1&&D(this._mouseEvents,d)!==-1)return}},_draggableMoved:function(a){return a=a.dragging&&a.dragging.enabled()?a:this,a.dragging&&a.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var a=0,d=this._handlers.length;a<d;a++)this._handlers[a].disable()},whenReady:function(a,d){return this._loaded?a.call(d||this,{target:this}):this.on("load",a,d),this},_getMapPanePos:function(){return ls(this._mapPane)||new J(0,0)},_moved:function(){var a=this._getMapPanePos();return a&&!a.equals([0,0])},_getTopLeftPoint:function(a,d){var g=a&&d!==void 0?this._getNewPixelOrigin(a,d):this.getPixelOrigin();return g.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(a,d){var g=this.getSize()._divideBy(2);return this.project(a,d)._subtract(g)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(a,d,g){var E=this._getNewPixelOrigin(g,d);return this.project(a,d)._subtract(E)},_latLngBoundsToNewLayerBounds:function(a,d,g){var E=this._getNewPixelOrigin(g,d);return $([this.project(a.getSouthWest(),d)._subtract(E),this.project(a.getNorthWest(),d)._subtract(E),this.project(a.getSouthEast(),d)._subtract(E),this.project(a.getNorthEast(),d)._subtract(E)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(a){return this.latLngToLayerPoint(a).subtract(this._getCenterLayerPoint())},_limitCenter:function(a,d,g){if(!g)return a;var E=this.project(a,d),j=this.getSize().divideBy(2),I=new U(E.subtract(j),E.add(j)),Q=this._getBoundsOffset(I,g,d);return Math.abs(Q.x)<=1&&Math.abs(Q.y)<=1?a:this.unproject(E.add(Q),d)},_limitOffset:function(a,d){if(!d)return a;var g=this.getPixelBounds(),E=new U(g.min.add(a),g.max.add(a));return a.add(this._getBoundsOffset(E,d))},_getBoundsOffset:function(a,d,g){var E=$(this.project(d.getNorthEast(),g),this.project(d.getSouthWest(),g)),j=E.min.subtract(a.min),I=E.max.subtract(a.max),Q=this._rebound(j.x,-I.x),de=this._rebound(j.y,-I.y);return new J(Q,de)},_rebound:function(a,d){return a+d>0?Math.round(a-d)/2:Math.max(0,Math.ceil(a))-Math.max(0,Math.floor(d))},_limitZoom:function(a){var d=this.getMinZoom(),g=this.getMaxZoom(),E=Ve.any3d?this.options.zoomSnap:1;return E&&(a=Math.round(a/E)*E),Math.max(d,Math.min(g,a))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){sn(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(a,d){var g=this._getCenterOffset(a)._trunc();return(d&&d.animate)!==!0&&!this.getSize().contains(g)?!1:(this.panBy(g,d),!0)},_createAnimProxy:function(){var a=this._proxy=gt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(a),this.on("zoomanim",function(d){var g=Wn,E=this._proxy.style[g];Hi(this._proxy,this.project(d.center,d.zoom),this.getZoomScale(d.zoom,1)),E===this._proxy.style[g]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){It(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var a=this.getCenter(),d=this.getZoom();Hi(this._proxy,this.project(a,d),this.getZoomScale(d,1))},_catchTransitionEnd:function(a){this._animatingZoom&&a.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(a,d,g){if(this._animatingZoom)return!0;if(g=g||{},!this._zoomAnimated||g.animate===!1||this._nothingToAnimate()||Math.abs(d-this._zoom)>this.options.zoomAnimationThreshold)return!1;var E=this.getZoomScale(d),j=this._getCenterOffset(a)._divideBy(1-1/E);return g.animate!==!0&&!this.getSize().contains(j)?!1:(ee(function(){this._moveStart(!0,g.noMoveStart||!1)._animateZoom(a,d,!0)},this),!0)},_animateZoom:function(a,d,g,E){this._mapPane&&(g&&(this._animatingZoom=!0,this._animateToCenter=a,this._animateToZoom=d,at(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:a,zoom:d,noUpdate:E}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(u(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&sn(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Pc(a,d){return new St(a,d)}var vr=oe.extend({options:{position:"topright"},initialize:function(a){k(this,a)},getPosition:function(){return this.options.position},setPosition:function(a){var d=this._map;return d&&d.removeControl(this),this.options.position=a,d&&d.addControl(this),this},getContainer:function(){return this._container},addTo:function(a){this.remove(),this._map=a;var d=this._container=this.onAdd(a),g=this.getPosition(),E=a._controlCorners[g];return at(d,"leaflet-control"),g.indexOf("bottom")!==-1?E.insertBefore(d,E.firstChild):E.appendChild(d),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(It(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(a){this._map&&a&&a.screenX>0&&a.screenY>0&&this._map.getContainer().focus()}}),Fi=function(a){return new vr(a)};St.include({addControl:function(a){return a.addTo(this),this},removeControl:function(a){return a.remove(),this},_initControlPos:function(){var a=this._controlCorners={},d="leaflet-",g=this._controlContainer=gt("div",d+"control-container",this._container);function E(j,I){var Q=d+j+" "+d+I;a[j+I]=gt("div",Q,g)}E("top","left"),E("top","right"),E("bottom","left"),E("bottom","right")},_clearControlPos:function(){for(var a in this._controlCorners)It(this._controlCorners[a]);It(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var po=vr.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(a,d,g,E){return g<E?-1:E<g?1:0}},initialize:function(a,d,g){k(this,g),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var E in a)this._addLayer(a[E],E);for(E in d)this._addLayer(d[E],E,!0)},onAdd:function(a){this._initLayout(),this._update(),this._map=a,a.on("zoomend",this._checkDisabledLayers,this);for(var d=0;d<this._layers.length;d++)this._layers[d].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(a){return vr.prototype.addTo.call(this,a),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(a,d){return this._addLayer(a,d),this._map?this._update():this},addOverlay:function(a,d){return this._addLayer(a,d,!0),this._map?this._update():this},removeLayer:function(a){a.off("add remove",this._onLayerChange,this);var d=this._getLayer(m(a));return d&&this._layers.splice(this._layers.indexOf(d),1),this._map?this._update():this},expand:function(){at(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var a=this._map.getSize().y-(this._container.offsetTop+50);return a<this._section.clientHeight?(at(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=a+"px"):sn(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return sn(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var a="leaflet-control-layers",d=this._container=gt("div",a),g=this.options.collapsed;d.setAttribute("aria-haspopup",!0),Os(d),yi(d);var E=this._section=gt("section",a+"-list");g&&(this._map.on("click",this.collapse,this),it(d,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var j=this._layersLink=gt("a",a+"-toggle",d);j.href="#",j.title="Layers",j.setAttribute("role","button"),it(j,{keydown:function(I){I.keyCode===13&&this._expandSafely()},click:function(I){bn(I),this._expandSafely()}},this),g||this.expand(),this._baseLayersList=gt("div",a+"-base",E),this._separator=gt("div",a+"-separator",E),this._overlaysList=gt("div",a+"-overlays",E),d.appendChild(E)},_getLayer:function(a){for(var d=0;d<this._layers.length;d++)if(this._layers[d]&&m(this._layers[d].layer)===a)return this._layers[d]},_addLayer:function(a,d,g){this._map&&a.on("add remove",this._onLayerChange,this),this._layers.push({layer:a,name:d,overlay:g}),this.options.sortLayers&&this._layers.sort(u(function(E,j){return this.options.sortFunction(E.layer,j.layer,E.name,j.name)},this)),this.options.autoZIndex&&a.setZIndex&&(this._lastZIndex++,a.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Or(this._baseLayersList),Or(this._overlaysList),this._layerControlInputs=[];var a,d,g,E,j=0;for(g=0;g<this._layers.length;g++)E=this._layers[g],this._addItem(E),d=d||E.overlay,a=a||!E.overlay,j+=E.overlay?0:1;return this.options.hideSingleBase&&(a=a&&j>1,this._baseLayersList.style.display=a?"":"none"),this._separator.style.display=d&&a?"":"none",this},_onLayerChange:function(a){this._handlingClick||this._update();var d=this._getLayer(m(a.target)),g=d.overlay?a.type==="add"?"overlayadd":"overlayremove":a.type==="add"?"baselayerchange":null;g&&this._map.fire(g,d)},_createRadioElement:function(a,d){var g='<input type="radio" class="leaflet-control-layers-selector" name="'+a+'"'+(d?' checked="checked"':"")+"/>",E=document.createElement("div");return E.innerHTML=g,E.firstChild},_addItem:function(a){var d=document.createElement("label"),g=this._map.hasLayer(a.layer),E;a.overlay?(E=document.createElement("input"),E.type="checkbox",E.className="leaflet-control-layers-selector",E.defaultChecked=g):E=this._createRadioElement("leaflet-base-layers_"+m(this),g),this._layerControlInputs.push(E),E.layerId=m(a.layer),it(E,"click",this._onInputClick,this);var j=document.createElement("span");j.innerHTML=" "+a.name;var I=document.createElement("span");d.appendChild(I),I.appendChild(E),I.appendChild(j);var Q=a.overlay?this._overlaysList:this._baseLayersList;return Q.appendChild(d),this._checkDisabledLayers(),d},_onInputClick:function(){if(!this._preventClick){var a=this._layerControlInputs,d,g,E=[],j=[];this._handlingClick=!0;for(var I=a.length-1;I>=0;I--)d=a[I],g=this._getLayer(d.layerId).layer,d.checked?E.push(g):d.checked||j.push(g);for(I=0;I<j.length;I++)this._map.hasLayer(j[I])&&this._map.removeLayer(j[I]);for(I=0;I<E.length;I++)this._map.hasLayer(E[I])||this._map.addLayer(E[I]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var a=this._layerControlInputs,d,g,E=this._map.getZoom(),j=a.length-1;j>=0;j--)d=a[j],g=this._getLayer(d.layerId).layer,d.disabled=g.options.minZoom!==void 0&&E<g.options.minZoom||g.options.maxZoom!==void 0&&E>g.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var a=this._section;this._preventClick=!0,it(a,"click",bn),this.expand();var d=this;setTimeout(function(){Lt(a,"click",bn),d._preventClick=!1})}}),kd=function(a,d,g){return new po(a,d,g)},$c=vr.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(a){var d="leaflet-control-zoom",g=gt("div",d+" leaflet-bar"),E=this.options;return this._zoomInButton=this._createButton(E.zoomInText,E.zoomInTitle,d+"-in",g,this._zoomIn),this._zoomOutButton=this._createButton(E.zoomOutText,E.zoomOutTitle,d+"-out",g,this._zoomOut),this._updateDisabled(),a.on("zoomend zoomlevelschange",this._updateDisabled,this),g},onRemove:function(a){a.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(a){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(a.shiftKey?3:1))},_zoomOut:function(a){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(a.shiftKey?3:1))},_createButton:function(a,d,g,E,j){var I=gt("a",g,E);return I.innerHTML=a,I.href="#",I.title=d,I.setAttribute("role","button"),I.setAttribute("aria-label",d),Os(I),it(I,"click",cs),it(I,"click",j,this),it(I,"click",this._refocusOnMap,this),I},_updateDisabled:function(){var a=this._map,d="leaflet-disabled";sn(this._zoomInButton,d),sn(this._zoomOutButton,d),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||a._zoom===a.getMinZoom())&&(at(this._zoomOutButton,d),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||a._zoom===a.getMaxZoom())&&(at(this._zoomInButton,d),this._zoomInButton.setAttribute("aria-disabled","true"))}});St.mergeOptions({zoomControl:!0}),St.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new $c,this.addControl(this.zoomControl))});var Km=function(a){return new $c(a)},Ad=vr.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(a){var d="leaflet-control-scale",g=gt("div",d),E=this.options;return this._addScales(E,d+"-line",g),a.on(E.updateWhenIdle?"moveend":"move",this._update,this),a.whenReady(this._update,this),g},onRemove:function(a){a.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(a,d,g){a.metric&&(this._mScale=gt("div",d,g)),a.imperial&&(this._iScale=gt("div",d,g))},_update:function(){var a=this._map,d=a.getSize().y/2,g=a.distance(a.containerPointToLatLng([0,d]),a.containerPointToLatLng([this.options.maxWidth,d]));this._updateScales(g)},_updateScales:function(a){this.options.metric&&a&&this._updateMetric(a),this.options.imperial&&a&&this._updateImperial(a)},_updateMetric:function(a){var d=this._getRoundNum(a),g=d<1e3?d+" m":d/1e3+" km";this._updateScale(this._mScale,g,d/a)},_updateImperial:function(a){var d=a*3.2808399,g,E,j;d>5280?(g=d/5280,E=this._getRoundNum(g),this._updateScale(this._iScale,E+" mi",E/g)):(j=this._getRoundNum(d),this._updateScale(this._iScale,j+" ft",j/d))},_updateScale:function(a,d,g){a.style.width=Math.round(this.options.maxWidth*g)+"px",a.innerHTML=d},_getRoundNum:function(a){var d=Math.pow(10,(Math.floor(a)+"").length-1),g=a/d;return g=g>=10?10:g>=5?5:g>=3?3:g>=2?2:1,d*g}}),Ic=function(a){return new Ad(a)},Wm='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',zc=vr.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Ve.inlineSvg?Wm+" ":"")+"Leaflet</a>"},initialize:function(a){k(this,a),this._attributions={}},onAdd:function(a){a.attributionControl=this,this._container=gt("div","leaflet-control-attribution"),Os(this._container);for(var d in a._layers)a._layers[d].getAttribution&&this.addAttribution(a._layers[d].getAttribution());return this._update(),a.on("layeradd",this._addAttribution,this),this._container},onRemove:function(a){a.off("layeradd",this._addAttribution,this)},_addAttribution:function(a){a.layer.getAttribution&&(this.addAttribution(a.layer.getAttribution()),a.layer.once("remove",function(){this.removeAttribution(a.layer.getAttribution())},this))},setPrefix:function(a){return this.options.prefix=a,this._update(),this},addAttribution:function(a){return a?(this._attributions[a]||(this._attributions[a]=0),this._attributions[a]++,this._update(),this):this},removeAttribution:function(a){return a?(this._attributions[a]&&(this._attributions[a]--,this._update()),this):this},_update:function(){if(this._map){var a=[];for(var d in this._attributions)this._attributions[d]&&a.push(d);var g=[];this.options.prefix&&g.push(this.options.prefix),a.length&&g.push(a.join(", ")),this._container.innerHTML=g.join(' <span aria-hidden="true">|</span> ')}}});St.mergeOptions({attributionControl:!0}),St.addInitHook(function(){this.options.attributionControl&&new zc().addTo(this)});var Xm=function(a){return new zc(a)};vr.Layers=po,vr.Zoom=$c,vr.Scale=Ad,vr.Attribution=zc,Fi.layers=kd,Fi.zoom=Km,Fi.scale=Ic,Fi.attribution=Xm;var vi=oe.extend({initialize:function(a){this._map=a},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});vi.addTo=function(a,d){return a.addHandler(d,this),this};var Jm={Events:X},Uc=Ve.touch?"touchstart mousedown":"mousedown",us=ae.extend({options:{clickTolerance:3},initialize:function(a,d,g,E){k(this,E),this._element=a,this._dragStartTarget=d||a,this._preventOutline=g},enable:function(){this._enabled||(it(this._dragStartTarget,Uc,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(us._dragging===this&&this.finishDrag(!0),Lt(this._dragStartTarget,Uc,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(a){if(this._enabled&&(this._moved=!1,!Mc(this._element,"leaflet-zoom-anim"))){if(a.touches&&a.touches.length!==1){us._dragging===this&&this.finishDrag();return}if(!(us._dragging||a.shiftKey||a.which!==1&&a.button!==1&&!a.touches)&&(us._dragging=this,this._preventOutline&&ua(this._element),hl(),la(),!this._moving)){this.fire("down");var d=a.touches?a.touches[0]:a,g=ml(this._element);this._startPoint=new J(d.clientX,d.clientY),this._startPos=ls(this._element),this._parentScale=uo(g);var E=a.type==="mousedown";it(document,E?"mousemove":"touchmove",this._onMove,this),it(document,E?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(a){if(this._enabled){if(a.touches&&a.touches.length>1){this._moved=!0;return}var d=a.touches&&a.touches.length===1?a.touches[0]:a,g=new J(d.clientX,d.clientY)._subtract(this._startPoint);!g.x&&!g.y||Math.abs(g.x)+Math.abs(g.y)<this.options.clickTolerance||(g.x/=this._parentScale.x,g.y/=this._parentScale.y,bn(a),this._moved||(this.fire("dragstart"),this._moved=!0,at(document.body,"leaflet-dragging"),this._lastTarget=a.target||a.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),at(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(g),this._moving=!0,this._lastEvent=a,this._updatePosition())}},_updatePosition:function(){var a={originalEvent:this._lastEvent};this.fire("predrag",a),Ft(this._element,this._newPos),this.fire("drag",a)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(a){sn(document.body,"leaflet-dragging"),this._lastTarget&&(sn(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Lt(document,"mousemove touchmove",this._onMove,this),Lt(document,"mouseup touchend touchcancel",this._onUp,this),co(),bi();var d=this._moved&&this._moving;this._moving=!1,us._dragging=!1,d&&this.fire("dragend",{noInertia:a,distance:this._newPos.distanceTo(this._startPos)})}});function jd(a,d,g){var E,j=[1,4,2,8],I,Q,de,ve,Oe,ze,Xe,ht;for(I=0,ze=a.length;I<ze;I++)a[I]._code=Ds(a[I],d);for(de=0;de<4;de++){for(Xe=j[de],E=[],I=0,ze=a.length,Q=ze-1;I<ze;Q=I++)ve=a[I],Oe=a[Q],ve._code&Xe?Oe._code&Xe||(ht=gl(Oe,ve,Xe,d,g),ht._code=Ds(ht,d),E.push(ht)):(Oe._code&Xe&&(ht=gl(Oe,ve,Xe,d,g),ht._code=Ds(ht,d),E.push(ht)),E.push(ve));a=E}return a}function Nd(a,d){var g,E,j,I,Q,de,ve,Oe,ze;if(!a||a.length===0)throw new Error("latlngs not passed");Mr(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var Xe=Y([0,0]),ht=Z(a),zn=ht.getNorthWest().distanceTo(ht.getSouthWest())*ht.getNorthEast().distanceTo(ht.getNorthWest());zn<1700&&(Xe=Hc(a));var yn=a.length,_r=[];for(g=0;g<yn;g++){var jt=Y(a[g]);_r.push(d.project(Y([jt.lat-Xe.lat,jt.lng-Xe.lng])))}for(de=ve=Oe=0,g=0,E=yn-1;g<yn;E=g++)j=_r[g],I=_r[E],Q=j.y*I.x-I.y*j.x,ve+=(j.x+I.x)*Q,Oe+=(j.y+I.y)*Q,de+=Q*3;de===0?ze=_r[0]:ze=[ve/de,Oe/de];var Nt=d.unproject(K(ze));return Y([Nt.lat+Xe.lat,Nt.lng+Xe.lng])}function Hc(a){for(var d=0,g=0,E=0,j=0;j<a.length;j++){var I=Y(a[j]);d+=I.lat,g+=I.lng,E++}return Y([d/E,g/E])}var Gc={__proto__:null,clipPolygon:jd,polygonCenter:Nd,centroid:Hc};function Od(a,d){if(!d||!a.length)return a.slice();var g=d*d;return a=ep(a,g),a=Md(a,g),a}function Dd(a,d,g){return Math.sqrt(go(a,d,g,!0))}function Qm(a,d,g){return go(a,d,g)}function Md(a,d){var g=a.length,E=typeof Uint8Array<"u"?Uint8Array:Array,j=new E(g);j[0]=j[g-1]=1,Fc(a,j,d,0,g-1);var I,Q=[];for(I=0;I<g;I++)j[I]&&Q.push(a[I]);return Q}function Fc(a,d,g,E,j){var I=0,Q,de,ve;for(de=E+1;de<=j-1;de++)ve=go(a[de],a[E],a[j],!0),ve>I&&(Q=de,I=ve);I>g&&(d[Q]=1,Fc(a,d,g,E,Q),Fc(a,d,g,Q,j))}function ep(a,d){for(var g=[a[0]],E=1,j=0,I=a.length;E<I;E++)tp(a[E],a[j])>d&&(g.push(a[E]),j=E);return j<I-1&&g.push(a[I-1]),g}var Cd;function Rd(a,d,g,E,j){var I=E?Cd:Ds(a,g),Q=Ds(d,g),de,ve,Oe;for(Cd=Q;;){if(!(I|Q))return[a,d];if(I&Q)return!1;de=I||Q,ve=gl(a,d,de,g,j),Oe=Ds(ve,g),de===I?(a=ve,I=Oe):(d=ve,Q=Oe)}}function gl(a,d,g,E,j){var I=d.x-a.x,Q=d.y-a.y,de=E.min,ve=E.max,Oe,ze;return g&8?(Oe=a.x+I*(ve.y-a.y)/Q,ze=ve.y):g&4?(Oe=a.x+I*(de.y-a.y)/Q,ze=de.y):g&2?(Oe=ve.x,ze=a.y+Q*(ve.x-a.x)/I):g&1&&(Oe=de.x,ze=a.y+Q*(de.x-a.x)/I),new J(Oe,ze,j)}function Ds(a,d){var g=0;return a.x<d.min.x?g|=1:a.x>d.max.x&&(g|=2),a.y<d.min.y?g|=4:a.y>d.max.y&&(g|=8),g}function tp(a,d){var g=d.x-a.x,E=d.y-a.y;return g*g+E*E}function go(a,d,g,E){var j=d.x,I=d.y,Q=g.x-j,de=g.y-I,ve=Q*Q+de*de,Oe;return ve>0&&(Oe=((a.x-j)*Q+(a.y-I)*de)/ve,Oe>1?(j=g.x,I=g.y):Oe>0&&(j+=Q*Oe,I+=de*Oe)),Q=a.x-j,de=a.y-I,E?Q*Q+de*de:new J(j,I)}function Mr(a){return!N(a[0])||typeof a[0][0]!="object"&&typeof a[0][0]<"u"}function bl(a){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Mr(a)}function fa(a,d){var g,E,j,I,Q,de,ve,Oe;if(!a||a.length===0)throw new Error("latlngs not passed");Mr(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var ze=Y([0,0]),Xe=Z(a),ht=Xe.getNorthWest().distanceTo(Xe.getSouthWest())*Xe.getNorthEast().distanceTo(Xe.getNorthWest());ht<1700&&(ze=Hc(a));var zn=a.length,yn=[];for(g=0;g<zn;g++){var _r=Y(a[g]);yn.push(d.project(Y([_r.lat-ze.lat,_r.lng-ze.lng])))}for(g=0,E=0;g<zn-1;g++)E+=yn[g].distanceTo(yn[g+1])/2;if(E===0)Oe=yn[0];else for(g=0,I=0;g<zn-1;g++)if(Q=yn[g],de=yn[g+1],j=Q.distanceTo(de),I+=j,I>E){ve=(I-E)/j,Oe=[de.x-ve*(de.x-Q.x),de.y-ve*(de.y-Q.y)];break}var jt=d.unproject(K(Oe));return Y([jt.lat+ze.lat,jt.lng+ze.lng])}var np={__proto__:null,simplify:Od,pointToSegmentDistance:Dd,closestPointOnSegment:Qm,clipSegment:Rd,_getEdgeIntersection:gl,_getBitCode:Ds,_sqClosestPointOnSegment:go,isFlat:Mr,_flat:bl,polylineCenter:fa},yl={project:function(a){return new J(a.lng,a.lat)},unproject:function(a){return new B(a.y,a.x)},bounds:new U([-180,-90],[180,90])},vl={R:6378137,R_MINOR:6356752314245179e-9,bounds:new U([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(a){var d=Math.PI/180,g=this.R,E=a.lat*d,j=this.R_MINOR/g,I=Math.sqrt(1-j*j),Q=I*Math.sin(E),de=Math.tan(Math.PI/4-E/2)/Math.pow((1-Q)/(1+Q),I/2);return E=-g*Math.log(Math.max(de,1e-10)),new J(a.lng*d*g,E)},unproject:function(a){for(var d=180/Math.PI,g=this.R,E=this.R_MINOR/g,j=Math.sqrt(1-E*E),I=Math.exp(-a.y/g),Q=Math.PI/2-2*Math.atan(I),de=0,ve=.1,Oe;de<15&&Math.abs(ve)>1e-7;de++)Oe=j*Math.sin(Q),Oe=Math.pow((1-Oe)/(1+Oe),j/2),ve=Math.PI/2-2*Math.atan(I*Oe)-Q,Q+=ve;return new B(Q*d,a.x*d/g)}},Ld={__proto__:null,LonLat:yl,Mercator:vl,SphericalMercator:xe},Bd=o({},fe,{code:"EPSG:3395",projection:vl,transformation:(function(){var a=.5/(Math.PI*vl.R);return je(a,.5,-a,.5)})()}),Yc=o({},fe,{code:"EPSG:4326",projection:yl,transformation:je(1/180,1,-1/180,.5)}),ma=o({},ie,{projection:yl,transformation:je(1,0,-1,0),scale:function(a){return Math.pow(2,a)},zoom:function(a){return Math.log(a)/Math.LN2},distance:function(a,d){var g=d.lng-a.lng,E=d.lat-a.lat;return Math.sqrt(g*g+E*E)},infinite:!0});ie.Earth=fe,ie.EPSG3395=Bd,ie.EPSG3857=Me,ie.EPSG900913=Ee,ie.EPSG4326=Yc,ie.Simple=ma;var Wr=ae.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(a){return a.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(a){return a&&a.removeLayer(this),this},getPane:function(a){return this._map.getPane(a?this.options[a]||a:this.options.pane)},addInteractiveTarget:function(a){return this._map._targets[m(a)]=this,this},removeInteractiveTarget:function(a){return delete this._map._targets[m(a)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(a){var d=a.target;if(d.hasLayer(this)){if(this._map=d,this._zoomAnimated=d._zoomAnimated,this.getEvents){var g=this.getEvents();d.on(g,this),this.once("remove",function(){d.off(g,this)},this)}this.onAdd(d),this.fire("add"),d.fire("layeradd",{layer:this})}}});St.include({addLayer:function(a){if(!a._layerAdd)throw new Error("The provided object is not a Layer.");var d=m(a);return this._layers[d]?this:(this._layers[d]=a,a._mapToAdd=this,a.beforeAdd&&a.beforeAdd(this),this.whenReady(a._layerAdd,a),this)},removeLayer:function(a){var d=m(a);return this._layers[d]?(this._loaded&&a.onRemove(this),delete this._layers[d],this._loaded&&(this.fire("layerremove",{layer:a}),a.fire("remove")),a._map=a._mapToAdd=null,this):this},hasLayer:function(a){return m(a)in this._layers},eachLayer:function(a,d){for(var g in this._layers)a.call(d,this._layers[g]);return this},_addLayers:function(a){a=a?N(a)?a:[a]:[];for(var d=0,g=a.length;d<g;d++)this.addLayer(a[d])},_addZoomLimit:function(a){(!isNaN(a.options.maxZoom)||!isNaN(a.options.minZoom))&&(this._zoomBoundLayers[m(a)]=a,this._updateZoomLevels())},_removeZoomLimit:function(a){var d=m(a);this._zoomBoundLayers[d]&&(delete this._zoomBoundLayers[d],this._updateZoomLevels())},_updateZoomLevels:function(){var a=1/0,d=-1/0,g=this._getZoomSpan();for(var E in this._zoomBoundLayers){var j=this._zoomBoundLayers[E].options;a=j.minZoom===void 0?a:Math.min(a,j.minZoom),d=j.maxZoom===void 0?d:Math.max(d,j.maxZoom)}this._layersMaxZoom=d===-1/0?void 0:d,this._layersMinZoom=a===1/0?void 0:a,g!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var pa=Wr.extend({initialize:function(a,d){k(this,d),this._layers={};var g,E;if(a)for(g=0,E=a.length;g<E;g++)this.addLayer(a[g])},addLayer:function(a){var d=this.getLayerId(a);return this._layers[d]=a,this._map&&this._map.addLayer(a),this},removeLayer:function(a){var d=a in this._layers?a:this.getLayerId(a);return this._map&&this._layers[d]&&this._map.removeLayer(this._layers[d]),delete this._layers[d],this},hasLayer:function(a){var d=typeof a=="number"?a:this.getLayerId(a);return d in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(a){var d=Array.prototype.slice.call(arguments,1),g,E;for(g in this._layers)E=this._layers[g],E[a]&&E[a].apply(E,d);return this},onAdd:function(a){this.eachLayer(a.addLayer,a)},onRemove:function(a){this.eachLayer(a.removeLayer,a)},eachLayer:function(a,d){for(var g in this._layers)a.call(d,this._layers[g]);return this},getLayer:function(a){return this._layers[a]},getLayers:function(){var a=[];return this.eachLayer(a.push,a),a},setZIndex:function(a){return this.invoke("setZIndex",a)},getLayerId:function(a){return m(a)}}),rp=function(a,d){return new pa(a,d)},_i=pa.extend({addLayer:function(a){return this.hasLayer(a)?this:(a.addEventParent(this),pa.prototype.addLayer.call(this,a),this.fire("layeradd",{layer:a}))},removeLayer:function(a){return this.hasLayer(a)?(a in this._layers&&(a=this._layers[a]),a.removeEventParent(this),pa.prototype.removeLayer.call(this,a),this.fire("layerremove",{layer:a})):this},setStyle:function(a){return this.invoke("setStyle",a)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var a=new F;for(var d in this._layers){var g=this._layers[d];a.extend(g.getBounds?g.getBounds():g.getLatLng())}return a}}),Pd=function(a,d){return new _i(a,d)},xi=oe.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(a){k(this,a)},createIcon:function(a){return this._createIcon("icon",a)},createShadow:function(a){return this._createIcon("shadow",a)},_createIcon:function(a,d){var g=this._getIconUrl(a);if(!g){if(a==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var E=this._createImg(g,d&&d.tagName==="IMG"?d:null);return this._setIconStyles(E,a),(this.options.crossOrigin||this.options.crossOrigin==="")&&(E.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),E},_setIconStyles:function(a,d){var g=this.options,E=g[d+"Size"];typeof E=="number"&&(E=[E,E]);var j=K(E),I=K(d==="shadow"&&g.shadowAnchor||g.iconAnchor||j&&j.divideBy(2,!0));a.className="leaflet-marker-"+d+" "+(g.className||""),I&&(a.style.marginLeft=-I.x+"px",a.style.marginTop=-I.y+"px"),j&&(a.style.width=j.x+"px",a.style.height=j.y+"px")},_createImg:function(a,d){return d=d||document.createElement("img"),d.src=a,d},_getIconUrl:function(a){return Ve.retina&&this.options[a+"RetinaUrl"]||this.options[a+"Url"]}});function bo(a){return new xi(a)}var yo=xi.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(a){return typeof yo.imagePath!="string"&&(yo.imagePath=this._detectIconPath()),(this.options.imagePath||yo.imagePath)+xi.prototype._getIconUrl.call(this,a)},_stripUrl:function(a){var d=function(g,E,j){var I=E.exec(g);return I&&I[j]};return a=d(a,/^url\((['"])?(.+)\1\)$/,2),a&&d(a,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var a=gt("div","leaflet-default-icon-path",document.body),d=oo(a,"background-image")||oo(a,"backgroundImage");if(document.body.removeChild(a),d=this._stripUrl(d),d)return d;var g=document.querySelector('link[href$="leaflet.css"]');return g?g.href.substring(0,g.href.length-11-1):""}}),vo=vi.extend({initialize:function(a){this._marker=a},addHooks:function(){var a=this._marker._icon;this._draggable||(this._draggable=new us(a,a,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),at(a,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&sn(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(a){var d=this._marker,g=d._map,E=this._marker.options.autoPanSpeed,j=this._marker.options.autoPanPadding,I=ls(d._icon),Q=g.getPixelBounds(),de=g.getPixelOrigin(),ve=$(Q.min._subtract(de).add(j),Q.max._subtract(de).subtract(j));if(!ve.contains(I)){var Oe=K((Math.max(ve.max.x,I.x)-ve.max.x)/(Q.max.x-ve.max.x)-(Math.min(ve.min.x,I.x)-ve.min.x)/(Q.min.x-ve.min.x),(Math.max(ve.max.y,I.y)-ve.max.y)/(Q.max.y-ve.max.y)-(Math.min(ve.min.y,I.y)-ve.min.y)/(Q.min.y-ve.min.y)).multiplyBy(E);g.panBy(Oe,{animate:!1}),this._draggable._newPos._add(Oe),this._draggable._startPos._add(Oe),Ft(d._icon,this._draggable._newPos),this._onDrag(a),this._panRequest=ee(this._adjustPan.bind(this,a))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(a){this._marker.options.autoPan&&(q(this._panRequest),this._panRequest=ee(this._adjustPan.bind(this,a)))},_onDrag:function(a){var d=this._marker,g=d._shadow,E=ls(d._icon),j=d._map.layerPointToLatLng(E);g&&Ft(g,E),d._latlng=j,a.latlng=j,a.oldLatLng=this._oldLatLng,d.fire("move",a).fire("drag",a)},_onDragEnd:function(a){q(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",a)}}),_o=Wr.extend({options:{icon:new yo,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(a,d){k(this,d),this._latlng=Y(a)},onAdd:function(a){this._zoomAnimated=this._zoomAnimated&&a.options.markerZoomAnimation,this._zoomAnimated&&a.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(a){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&a.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(a){var d=this._latlng;return this._latlng=Y(a),this.update(),this.fire("move",{oldLatLng:d,latlng:this._latlng})},setZIndexOffset:function(a){return this.options.zIndexOffset=a,this.update()},getIcon:function(){return this.options.icon},setIcon:function(a){return this.options.icon=a,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var a=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(a)}return this},_initIcon:function(){var a=this.options,d="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),g=a.icon.createIcon(this._icon),E=!1;g!==this._icon&&(this._icon&&this._removeIcon(),E=!0,a.title&&(g.title=a.title),g.tagName==="IMG"&&(g.alt=a.alt||"")),at(g,d),a.keyboard&&(g.tabIndex="0",g.setAttribute("role","button")),this._icon=g,a.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&it(g,"focus",this._panOnFocus,this);var j=a.icon.createShadow(this._shadow),I=!1;j!==this._shadow&&(this._removeShadow(),I=!0),j&&(at(j,d),j.alt=""),this._shadow=j,a.opacity<1&&this._updateOpacity(),E&&this.getPane().appendChild(this._icon),this._initInteraction(),j&&I&&this.getPane(a.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Lt(this._icon,"focus",this._panOnFocus,this),It(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&It(this._shadow),this._shadow=null},_setPos:function(a){this._icon&&Ft(this._icon,a),this._shadow&&Ft(this._shadow,a),this._zIndex=a.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(a){this._icon&&(this._icon.style.zIndex=this._zIndex+a)},_animateZoom:function(a){var d=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center).round();this._setPos(d)},_initInteraction:function(){if(this.options.interactive&&(at(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),vo)){var a=this.options.draggable;this.dragging&&(a=this.dragging.enabled(),this.dragging.disable()),this.dragging=new vo(this),a&&this.dragging.enable()}},setOpacity:function(a){return this.options.opacity=a,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var a=this.options.opacity;this._icon&&Qt(this._icon,a),this._shadow&&Qt(this._shadow,a)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var a=this._map;if(a){var d=this.options.icon.options,g=d.iconSize?K(d.iconSize):K(0,0),E=d.iconAnchor?K(d.iconAnchor):K(0,0);a.panInside(this._latlng,{paddingTopLeft:E,paddingBottomRight:g.subtract(E)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function $d(a,d){return new _o(a,d)}var wi=Wr.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(a){this._renderer=a.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(a){return k(this,a),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&a&&Object.prototype.hasOwnProperty.call(a,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ga=wi.extend({options:{fill:!0,radius:10},initialize:function(a,d){k(this,d),this._latlng=Y(a),this._radius=this.options.radius},setLatLng:function(a){var d=this._latlng;return this._latlng=Y(a),this.redraw(),this.fire("move",{oldLatLng:d,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(a){return this.options.radius=this._radius=a,this.redraw()},getRadius:function(){return this._radius},setStyle:function(a){var d=a&&a.radius||this._radius;return wi.prototype.setStyle.call(this,a),this.setRadius(d),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var a=this._radius,d=this._radiusY||a,g=this._clickTolerance(),E=[a+g,d+g];this._pxBounds=new U(this._point.subtract(E),this._point.add(E))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(a){return a.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Id(a,d){return new ga(a,d)}var _l=ga.extend({initialize:function(a,d,g){if(typeof d=="number"&&(d=o({},g,{radius:d})),k(this,d),this._latlng=Y(a),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(a){return this._mRadius=a,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var a=[this._radius,this._radiusY||this._radius];return new F(this._map.layerPointToLatLng(this._point.subtract(a)),this._map.layerPointToLatLng(this._point.add(a)))},setStyle:wi.prototype.setStyle,_project:function(){var a=this._latlng.lng,d=this._latlng.lat,g=this._map,E=g.options.crs;if(E.distance===fe.distance){var j=Math.PI/180,I=this._mRadius/fe.R/j,Q=g.project([d+I,a]),de=g.project([d-I,a]),ve=Q.add(de).divideBy(2),Oe=g.unproject(ve).lat,ze=Math.acos((Math.cos(I*j)-Math.sin(d*j)*Math.sin(Oe*j))/(Math.cos(d*j)*Math.cos(Oe*j)))/j;(isNaN(ze)||ze===0)&&(ze=I/Math.cos(Math.PI/180*d)),this._point=ve.subtract(g.getPixelOrigin()),this._radius=isNaN(ze)?0:ve.x-g.project([Oe,a-ze]).x,this._radiusY=ve.y-Q.y}else{var Xe=E.unproject(E.project(this._latlng).subtract([this._mRadius,0]));this._point=g.latLngToLayerPoint(this._latlng),this._radius=this._point.x-g.latLngToLayerPoint(Xe).x}this._updateBounds()}});function zd(a,d,g){return new _l(a,d,g)}var Yi=wi.extend({options:{smoothFactor:1,noClip:!1},initialize:function(a,d){k(this,d),this._setLatLngs(a)},getLatLngs:function(){return this._latlngs},setLatLngs:function(a){return this._setLatLngs(a),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(a){for(var d=1/0,g=null,E=go,j,I,Q=0,de=this._parts.length;Q<de;Q++)for(var ve=this._parts[Q],Oe=1,ze=ve.length;Oe<ze;Oe++){j=ve[Oe-1],I=ve[Oe];var Xe=E(a,j,I,!0);Xe<d&&(d=Xe,g=E(a,j,I))}return g&&(g.distance=Math.sqrt(d)),g},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return fa(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(a,d){return d=d||this._defaultShape(),a=Y(a),d.push(a),this._bounds.extend(a),this.redraw()},_setLatLngs:function(a){this._bounds=new F,this._latlngs=this._convertLatLngs(a)},_defaultShape:function(){return Mr(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(a){for(var d=[],g=Mr(a),E=0,j=a.length;E<j;E++)g?(d[E]=Y(a[E]),this._bounds.extend(d[E])):d[E]=this._convertLatLngs(a[E]);return d},_project:function(){var a=new U;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,a),this._bounds.isValid()&&a.isValid()&&(this._rawPxBounds=a,this._updateBounds())},_updateBounds:function(){var a=this._clickTolerance(),d=new J(a,a);this._rawPxBounds&&(this._pxBounds=new U([this._rawPxBounds.min.subtract(d),this._rawPxBounds.max.add(d)]))},_projectLatlngs:function(a,d,g){var E=a[0]instanceof B,j=a.length,I,Q;if(E){for(Q=[],I=0;I<j;I++)Q[I]=this._map.latLngToLayerPoint(a[I]),g.extend(Q[I]);d.push(Q)}else for(I=0;I<j;I++)this._projectLatlngs(a[I],d,g)},_clipPoints:function(){var a=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}var d=this._parts,g,E,j,I,Q,de,ve;for(g=0,j=0,I=this._rings.length;g<I;g++)for(ve=this._rings[g],E=0,Q=ve.length;E<Q-1;E++)de=Rd(ve[E],ve[E+1],a,E,!0),de&&(d[j]=d[j]||[],d[j].push(de[0]),(de[1]!==ve[E+1]||E===Q-2)&&(d[j].push(de[1]),j++))}},_simplifyPoints:function(){for(var a=this._parts,d=this.options.smoothFactor,g=0,E=a.length;g<E;g++)a[g]=Od(a[g],d)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(a,d){var g,E,j,I,Q,de,ve=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(g=0,I=this._parts.length;g<I;g++)for(de=this._parts[g],E=0,Q=de.length,j=Q-1;E<Q;j=E++)if(!(!d&&E===0)&&Dd(a,de[j],de[E])<=ve)return!0;return!1}});function ip(a,d){return new Yi(a,d)}Yi._flat=bl;var ba=Yi.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Nd(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(a){var d=Yi.prototype._convertLatLngs.call(this,a),g=d.length;return g>=2&&d[0]instanceof B&&d[0].equals(d[g-1])&&d.pop(),d},_setLatLngs:function(a){Yi.prototype._setLatLngs.call(this,a),Mr(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Mr(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var a=this._renderer._bounds,d=this.options.weight,g=new J(d,d);if(a=new U(a.min.subtract(g),a.max.add(g)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}for(var E=0,j=this._rings.length,I;E<j;E++)I=jd(this._rings[E],a,!0),I.length&&this._parts.push(I)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(a){var d=!1,g,E,j,I,Q,de,ve,Oe;if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(I=0,ve=this._parts.length;I<ve;I++)for(g=this._parts[I],Q=0,Oe=g.length,de=Oe-1;Q<Oe;de=Q++)E=g[Q],j=g[de],E.y>a.y!=j.y>a.y&&a.x<(j.x-E.x)*(a.y-E.y)/(j.y-E.y)+E.x&&(d=!d);return d||Yi.prototype._containsPoint.call(this,a,!0)}});function sp(a,d){return new ba(a,d)}var qi=_i.extend({initialize:function(a,d){k(this,d),this._layers={},a&&this.addData(a)},addData:function(a){var d=N(a)?a:a.features,g,E,j;if(d){for(g=0,E=d.length;g<E;g++)j=d[g],(j.geometries||j.geometry||j.features||j.coordinates)&&this.addData(j);return this}var I=this.options;if(I.filter&&!I.filter(a))return this;var Q=Gn(a,I);return Q?(Q.feature=Sl(a),Q.defaultOptions=Q.options,this.resetStyle(Q),I.onEachFeature&&I.onEachFeature(a,Q),this.addLayer(Q)):this},resetStyle:function(a){return a===void 0?this.eachLayer(this.resetStyle,this):(a.options=o({},a.defaultOptions),this._setLayerStyle(a,this.options.style),this)},setStyle:function(a){return this.eachLayer(function(d){this._setLayerStyle(d,a)},this)},_setLayerStyle:function(a,d){a.setStyle&&(typeof d=="function"&&(d=d(a.feature)),a.setStyle(d))}});function Gn(a,d){var g=a.type==="Feature"?a.geometry:a,E=g?g.coordinates:null,j=[],I=d&&d.pointToLayer,Q=d&&d.coordsToLatLng||xl,de,ve,Oe,ze;if(!E&&!g)return null;switch(g.type){case"Point":return de=Q(E),ya(I,a,de,d);case"MultiPoint":for(Oe=0,ze=E.length;Oe<ze;Oe++)de=Q(E[Oe]),j.push(ya(I,a,de,d));return new _i(j);case"LineString":case"MultiLineString":return ve=xo(E,g.type==="LineString"?0:1,Q),new Yi(ve,d);case"Polygon":case"MultiPolygon":return ve=xo(E,g.type==="Polygon"?1:2,Q),new ba(ve,d);case"GeometryCollection":for(Oe=0,ze=g.geometries.length;Oe<ze;Oe++){var Xe=Gn({geometry:g.geometries[Oe],type:"Feature",properties:a.properties},d);Xe&&j.push(Xe)}return new _i(j);case"FeatureCollection":for(Oe=0,ze=g.features.length;Oe<ze;Oe++){var ht=Gn(g.features[Oe],d);ht&&j.push(ht)}return new _i(j);default:throw new Error("Invalid GeoJSON object.")}}function ya(a,d,g,E){return a?a(d,g):new _o(g,E&&E.markersInheritOptions&&E)}function xl(a){return new B(a[1],a[0],a[2])}function xo(a,d,g){for(var E=[],j=0,I=a.length,Q;j<I;j++)Q=d?xo(a[j],d-1,g):(g||xl)(a[j]),E.push(Q);return E}function wl(a,d){return a=Y(a),a.alt!==void 0?[x(a.lng,d),x(a.lat,d),x(a.alt,d)]:[x(a.lng,d),x(a.lat,d)]}function wo(a,d,g,E){for(var j=[],I=0,Q=a.length;I<Q;I++)j.push(d?wo(a[I],Mr(a[I])?0:d-1,g,E):wl(a[I],E));return!d&&g&&j.length>0&&j.push(j[0].slice()),j}function ds(a,d){return a.feature?o({},a.feature,{geometry:d}):Sl(d)}function Sl(a){return a.type==="Feature"||a.type==="FeatureCollection"?a:{type:"Feature",properties:{},geometry:a}}var hs={toGeoJSON:function(a){return ds(this,{type:"Point",coordinates:wl(this.getLatLng(),a)})}};_o.include(hs),_l.include(hs),ga.include(hs),Yi.include({toGeoJSON:function(a){var d=!Mr(this._latlngs),g=wo(this._latlngs,d?1:0,!1,a);return ds(this,{type:(d?"Multi":"")+"LineString",coordinates:g})}}),ba.include({toGeoJSON:function(a){var d=!Mr(this._latlngs),g=d&&!Mr(this._latlngs[0]),E=wo(this._latlngs,g?2:d?1:0,!0,a);return d||(E=[E]),ds(this,{type:(g?"Multi":"")+"Polygon",coordinates:E})}}),pa.include({toMultiPoint:function(a){var d=[];return this.eachLayer(function(g){d.push(g.toGeoJSON(a).geometry.coordinates)}),ds(this,{type:"MultiPoint",coordinates:d})},toGeoJSON:function(a){var d=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(d==="MultiPoint")return this.toMultiPoint(a);var g=d==="GeometryCollection",E=[];return this.eachLayer(function(j){if(j.toGeoJSON){var I=j.toGeoJSON(a);if(g)E.push(I.geometry);else{var Q=Sl(I);Q.type==="FeatureCollection"?E.push.apply(E,Q.features):E.push(Q)}}}),g?ds(this,{geometries:E,type:"GeometryCollection"}):{type:"FeatureCollection",features:E}}});function El(a,d){return new qi(a,d)}var So=El,va=Wr.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(a,d,g){this._url=a,this._bounds=Z(d),k(this,g)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(at(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){It(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(a){return this.options.opacity=a,this._image&&this._updateOpacity(),this},setStyle:function(a){return a.opacity&&this.setOpacity(a.opacity),this},bringToFront:function(){return this._map&&In(this._image),this},bringToBack:function(){return this._map&&js(this._image),this},setUrl:function(a){return this._url=a,this._image&&(this._image.src=a),this},setBounds:function(a){return this._bounds=Z(a),this._map&&this._reset(),this},getEvents:function(){var a={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var a=this._url.tagName==="IMG",d=this._image=a?this._url:gt("img");if(at(d,"leaflet-image-layer"),this._zoomAnimated&&at(d,"leaflet-zoom-animated"),this.options.className&&at(d,this.options.className),d.onselectstart=_,d.onmousemove=_,d.onload=u(this.fire,this,"load"),d.onerror=u(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),a){this._url=d.src;return}d.src=this._url,d.alt=this.options.alt},_animateZoom:function(a){var d=this._map.getZoomScale(a.zoom),g=this._map._latLngBoundsToNewLayerBounds(this._bounds,a.zoom,a.center).min;Hi(this._image,g,d)},_reset:function(){var a=this._image,d=new U(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),g=d.getSize();Ft(a,d.min),a.style.width=g.x+"px",a.style.height=g.y+"px"},_updateOpacity:function(){Qt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var a=this.options.errorOverlayUrl;a&&this._url!==a&&(this._url=a,this._image.src=a)},getCenter:function(){return this._bounds.getCenter()}}),Ud=function(a,d,g){return new va(a,d,g)},fs=va.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var a=this._url.tagName==="VIDEO",d=this._image=a?this._url:gt("video");if(at(d,"leaflet-image-layer"),this._zoomAnimated&&at(d,"leaflet-zoom-animated"),this.options.className&&at(d,this.options.className),d.onselectstart=_,d.onmousemove=_,d.onloadeddata=u(this.fire,this,"load"),a){for(var g=d.getElementsByTagName("source"),E=[],j=0;j<g.length;j++)E.push(g[j].src);this._url=g.length>0?E:[d.src];return}N(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(d.style,"objectFit")&&(d.style.objectFit="fill"),d.autoplay=!!this.options.autoplay,d.loop=!!this.options.loop,d.muted=!!this.options.muted,d.playsInline=!!this.options.playsInline;for(var I=0;I<this._url.length;I++){var Q=gt("source");Q.src=this._url[I],d.appendChild(Q)}}});function _a(a,d,g){return new fs(a,d,g)}var Tl=va.extend({_initImage:function(){var a=this._image=this._url;at(a,"leaflet-image-layer"),this._zoomAnimated&&at(a,"leaflet-zoom-animated"),this.options.className&&at(a,this.options.className),a.onselectstart=_,a.onmousemove=_}});function Hd(a,d,g){return new Tl(a,d,g)}var Fn=Wr.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(a,d){a&&(a instanceof B||N(a))?(this._latlng=Y(a),k(this,d)):(k(this,a),this._source=d),this.options.content&&(this._content=this.options.content)},openOn:function(a){return a=arguments.length?a:this._source._map,a.hasLayer(this)||a.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(a){return this._map?this.close():(arguments.length?this._source=a:a=this._source,this._prepareOpen(),this.openOn(a._map)),this},onAdd:function(a){this._zoomAnimated=a._zoomAnimated,this._container||this._initLayout(),a._fadeAnimated&&Qt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),a._fadeAnimated&&Qt(this._container,1),this.bringToFront(),this.options.interactive&&(at(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(a){a._fadeAnimated?(Qt(this._container,0),this._removeTimeout=setTimeout(u(It,void 0,this._container),200)):It(this._container),this.options.interactive&&(sn(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(a){return this._latlng=Y(a),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(a){return this._content=a,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var a={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&In(this._container),this},bringToBack:function(){return this._map&&js(this._container),this},_prepareOpen:function(a){var d=this._source;if(!d._map)return!1;if(d instanceof _i){d=null;var g=this._source._layers;for(var E in g)if(g[E]._map){d=g[E];break}if(!d)return!1;this._source=d}if(!a)if(d.getCenter)a=d.getCenter();else if(d.getLatLng)a=d.getLatLng();else if(d.getBounds)a=d.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(a),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var a=this._contentNode,d=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof d=="string")a.innerHTML=d;else{for(;a.hasChildNodes();)a.removeChild(a.firstChild);a.appendChild(d)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var a=this._map.latLngToLayerPoint(this._latlng),d=K(this.options.offset),g=this._getAnchor();this._zoomAnimated?Ft(this._container,a.add(g)):d=d.add(a).add(g);var E=this._containerBottom=-d.y,j=this._containerLeft=-Math.round(this._containerWidth/2)+d.x;this._container.style.bottom=E+"px",this._container.style.left=j+"px"}},_getAnchor:function(){return[0,0]}});St.include({_initOverlay:function(a,d,g,E){var j=d;return j instanceof a||(j=new a(E).setContent(d)),g&&j.setLatLng(g),j}}),Wr.include({_initOverlay:function(a,d,g,E){var j=g;return j instanceof a?(k(j,E),j._source=this):(j=d&&!E?d:new a(E,this),j.setContent(g)),j}});var Eo=Fn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(a){return a=arguments.length?a:this._source._map,!a.hasLayer(this)&&a._popup&&a._popup.options.autoClose&&a.removeLayer(a._popup),a._popup=this,Fn.prototype.openOn.call(this,a)},onAdd:function(a){Fn.prototype.onAdd.call(this,a),a.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof wi||this._source.on("preclick",Kr))},onRemove:function(a){Fn.prototype.onRemove.call(this,a),a.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof wi||this._source.off("preclick",Kr))},getEvents:function(){var a=Fn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(a.preclick=this.close),this.options.keepInView&&(a.moveend=this._adjustPan),a},_initLayout:function(){var a="leaflet-popup",d=this._container=gt("div",a+" "+(this.options.className||"")+" leaflet-zoom-animated"),g=this._wrapper=gt("div",a+"-content-wrapper",d);if(this._contentNode=gt("div",a+"-content",g),Os(d),yi(this._contentNode),it(d,"contextmenu",Kr),this._tipContainer=gt("div",a+"-tip-container",d),this._tip=gt("div",a+"-tip",this._tipContainer),this.options.closeButton){var E=this._closeButton=gt("a",a+"-close-button",d);E.setAttribute("role","button"),E.setAttribute("aria-label","Close popup"),E.href="#close",E.innerHTML='<span aria-hidden="true">&#215;</span>',it(E,"click",function(j){bn(j),this.close()},this)}},_updateLayout:function(){var a=this._contentNode,d=a.style;d.width="",d.whiteSpace="nowrap";var g=a.offsetWidth;g=Math.min(g,this.options.maxWidth),g=Math.max(g,this.options.minWidth),d.width=g+1+"px",d.whiteSpace="",d.height="";var E=a.offsetHeight,j=this.options.maxHeight,I="leaflet-popup-scrolled";j&&E>j?(d.height=j+"px",at(a,I)):sn(a,I),this._containerWidth=this._container.offsetWidth},_animateZoom:function(a){var d=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center),g=this._getAnchor();Ft(this._container,d.add(g))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var a=this._map,d=parseInt(oo(this._container,"marginBottom"),10)||0,g=this._container.offsetHeight+d,E=this._containerWidth,j=new J(this._containerLeft,-g-this._containerBottom);j._add(ls(this._container));var I=a.layerPointToContainerPoint(j),Q=K(this.options.autoPanPadding),de=K(this.options.autoPanPaddingTopLeft||Q),ve=K(this.options.autoPanPaddingBottomRight||Q),Oe=a.getSize(),ze=0,Xe=0;I.x+E+ve.x>Oe.x&&(ze=I.x+E-Oe.x+ve.x),I.x-ze-de.x<0&&(ze=I.x-de.x),I.y+g+ve.y>Oe.y&&(Xe=I.y+g-Oe.y+ve.y),I.y-Xe-de.y<0&&(Xe=I.y-de.y),(ze||Xe)&&(this.options.keepInView&&(this._autopanning=!0),a.fire("autopanstart").panBy([ze,Xe]))}},_getAnchor:function(){return K(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Gd=function(a,d){return new Eo(a,d)};St.mergeOptions({closePopupOnClick:!0}),St.include({openPopup:function(a,d,g){return this._initOverlay(Eo,a,d,g).openOn(this),this},closePopup:function(a){return a=arguments.length?a:this._popup,a&&a.close(),this}}),Wr.include({bindPopup:function(a,d){return this._popup=this._initOverlay(Eo,this._popup,a,d),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(a){return this._popup&&(this instanceof _i||(this._popup._source=this),this._popup._prepareOpen(a||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(a){return this._popup&&this._popup.setContent(a),this},getPopup:function(){return this._popup},_openPopup:function(a){if(!(!this._popup||!this._map)){cs(a);var d=a.layer||a.target;if(this._popup._source===d&&!(d instanceof wi)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(a.latlng);return}this._popup._source=d,this.openPopup(a.latlng)}},_movePopup:function(a){this._popup.setLatLng(a.latlng)},_onKeyPress:function(a){a.originalEvent.keyCode===13&&this._openPopup(a)}});var To=Fn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(a){Fn.prototype.onAdd.call(this,a),this.setOpacity(this.options.opacity),a.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(a){Fn.prototype.onRemove.call(this,a),a.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var a=Fn.prototype.getEvents.call(this);return this.options.permanent||(a.preclick=this.close),a},_initLayout:function(){var a="leaflet-tooltip",d=a+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=gt("div",d),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+m(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(a){var d,g,E=this._map,j=this._container,I=E.latLngToContainerPoint(E.getCenter()),Q=E.layerPointToContainerPoint(a),de=this.options.direction,ve=j.offsetWidth,Oe=j.offsetHeight,ze=K(this.options.offset),Xe=this._getAnchor();de==="top"?(d=ve/2,g=Oe):de==="bottom"?(d=ve/2,g=0):de==="center"?(d=ve/2,g=Oe/2):de==="right"?(d=0,g=Oe/2):de==="left"?(d=ve,g=Oe/2):Q.x<I.x?(de="right",d=0,g=Oe/2):(de="left",d=ve+(ze.x+Xe.x)*2,g=Oe/2),a=a.subtract(K(d,g,!0)).add(ze).add(Xe),sn(j,"leaflet-tooltip-right"),sn(j,"leaflet-tooltip-left"),sn(j,"leaflet-tooltip-top"),sn(j,"leaflet-tooltip-bottom"),at(j,"leaflet-tooltip-"+de),Ft(j,a)},_updatePosition:function(){var a=this._map.latLngToLayerPoint(this._latlng);this._setPosition(a)},setOpacity:function(a){this.options.opacity=a,this._container&&Qt(this._container,a)},_animateZoom:function(a){var d=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center);this._setPosition(d)},_getAnchor:function(){return K(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),ap=function(a,d){return new To(a,d)};St.include({openTooltip:function(a,d,g){return this._initOverlay(To,a,d,g).openOn(this),this},closeTooltip:function(a){return a.close(),this}}),Wr.include({bindTooltip:function(a,d){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(To,this._tooltip,a,d),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(a){if(!(!a&&this._tooltipHandlersAdded)){var d=a?"off":"on",g={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?g.add=this._openTooltip:(g.mouseover=this._openTooltip,g.mouseout=this.closeTooltip,g.click=this._openTooltip,this._map?this._addFocusListeners():g.add=this._addFocusListeners),this._tooltip.options.sticky&&(g.mousemove=this._moveTooltip),this[d](g),this._tooltipHandlersAdded=!a}},openTooltip:function(a){return this._tooltip&&(this instanceof _i||(this._tooltip._source=this),this._tooltip._prepareOpen(a)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(a){return this._tooltip&&this._tooltip.setContent(a),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(a){var d=typeof a.getElement=="function"&&a.getElement();d&&(it(d,"focus",function(){this._tooltip._source=a,this.openTooltip()},this),it(d,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(a){var d=typeof a.getElement=="function"&&a.getElement();d&&d.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(a){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var d=this;this._map.once("moveend",function(){d._openOnceFlag=!1,d._openTooltip(a)});return}this._tooltip._source=a.layer||a.target,this.openTooltip(this._tooltip.options.sticky?a.latlng:void 0)}},_moveTooltip:function(a){var d=a.latlng,g,E;this._tooltip.options.sticky&&a.originalEvent&&(g=this._map.mouseEventToContainerPoint(a.originalEvent),E=this._map.containerPointToLayerPoint(g),d=this._map.layerPointToLatLng(E)),this._tooltip.setLatLng(d)}});var Fd=xi.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(a){var d=a&&a.tagName==="DIV"?a:document.createElement("div"),g=this.options;if(g.html instanceof Element?(Or(d),d.appendChild(g.html)):d.innerHTML=g.html!==!1?g.html:"",g.bgPos){var E=K(g.bgPos);d.style.backgroundPosition=-E.x+"px "+-E.y+"px"}return this._setIconStyles(d,"icon"),d},createShadow:function(){return null}});function op(a){return new Fd(a)}xi.Default=yo;var xa=Wr.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Ve.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(a){k(this,a)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(a){a._addZoomLimit(this)},onRemove:function(a){this._removeAllTiles(),It(this._container),a._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(In(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(js(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(a){return this.options.opacity=a,this._updateOpacity(),this},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var a=this._clampZoom(this._map.getZoom());a!==this._tileZoom&&(this._tileZoom=a,this._updateLevels()),this._update()}return this},getEvents:function(){var a={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=p(this._onMoveEnd,this.options.updateInterval,this)),a.move=this._onMove),this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},createTile:function(){return document.createElement("div")},getTileSize:function(){var a=this.options.tileSize;return a instanceof J?a:new J(a,a)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(a){for(var d=this.getPane().children,g=-a(-1/0,1/0),E=0,j=d.length,I;E<j;E++)I=d[E].style.zIndex,d[E]!==this._container&&I&&(g=a(g,+I));isFinite(g)&&(this.options.zIndex=g+a(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Ve.ielt9){Qt(this._container,this.options.opacity);var a=+new Date,d=!1,g=!1;for(var E in this._tiles){var j=this._tiles[E];if(!(!j.current||!j.loaded)){var I=Math.min(1,(a-j.loaded)/200);Qt(j.el,I),I<1?d=!0:(j.active?g=!0:this._onOpaqueTile(j),j.active=!0)}}g&&!this._noPrune&&this._pruneTiles(),d&&(q(this._fadeFrame),this._fadeFrame=ee(this._updateOpacity,this))}},_onOpaqueTile:_,_initContainer:function(){this._container||(this._container=gt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var a=this._tileZoom,d=this.options.maxZoom;if(a!==void 0){for(var g in this._levels)g=Number(g),this._levels[g].el.children.length||g===a?(this._levels[g].el.style.zIndex=d-Math.abs(a-g),this._onUpdateLevel(g)):(It(this._levels[g].el),this._removeTilesAtZoom(g),this._onRemoveLevel(g),delete this._levels[g]);var E=this._levels[a],j=this._map;return E||(E=this._levels[a]={},E.el=gt("div","leaflet-tile-container leaflet-zoom-animated",this._container),E.el.style.zIndex=d,E.origin=j.project(j.unproject(j.getPixelOrigin()),a).round(),E.zoom=a,this._setZoomTransform(E,j.getCenter(),j.getZoom()),_(E.el.offsetWidth),this._onCreateLevel(E)),this._level=E,E}},_onUpdateLevel:_,_onRemoveLevel:_,_onCreateLevel:_,_pruneTiles:function(){if(this._map){var a,d,g=this._map.getZoom();if(g>this.options.maxZoom||g<this.options.minZoom){this._removeAllTiles();return}for(a in this._tiles)d=this._tiles[a],d.retain=d.current;for(a in this._tiles)if(d=this._tiles[a],d.current&&!d.active){var E=d.coords;this._retainParent(E.x,E.y,E.z,E.z-5)||this._retainChildren(E.x,E.y,E.z,E.z+2)}for(a in this._tiles)this._tiles[a].retain||this._removeTile(a)}},_removeTilesAtZoom:function(a){for(var d in this._tiles)this._tiles[d].coords.z===a&&this._removeTile(d)},_removeAllTiles:function(){for(var a in this._tiles)this._removeTile(a)},_invalidateAll:function(){for(var a in this._levels)It(this._levels[a].el),this._onRemoveLevel(Number(a)),delete this._levels[a];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(a,d,g,E){var j=Math.floor(a/2),I=Math.floor(d/2),Q=g-1,de=new J(+j,+I);de.z=+Q;var ve=this._tileCoordsToKey(de),Oe=this._tiles[ve];return Oe&&Oe.active?(Oe.retain=!0,!0):(Oe&&Oe.loaded&&(Oe.retain=!0),Q>E?this._retainParent(j,I,Q,E):!1)},_retainChildren:function(a,d,g,E){for(var j=2*a;j<2*a+2;j++)for(var I=2*d;I<2*d+2;I++){var Q=new J(j,I);Q.z=g+1;var de=this._tileCoordsToKey(Q),ve=this._tiles[de];if(ve&&ve.active){ve.retain=!0;continue}else ve&&ve.loaded&&(ve.retain=!0);g+1<E&&this._retainChildren(j,I,g+1,E)}},_resetView:function(a){var d=a&&(a.pinch||a.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),d,d)},_animateZoom:function(a){this._setView(a.center,a.zoom,!0,a.noUpdate)},_clampZoom:function(a){var d=this.options;return d.minNativeZoom!==void 0&&a<d.minNativeZoom?d.minNativeZoom:d.maxNativeZoom!==void 0&&d.maxNativeZoom<a?d.maxNativeZoom:a},_setView:function(a,d,g,E){var j=Math.round(d);this.options.maxZoom!==void 0&&j>this.options.maxZoom||this.options.minZoom!==void 0&&j<this.options.minZoom?j=void 0:j=this._clampZoom(j);var I=this.options.updateWhenZooming&&j!==this._tileZoom;(!E||I)&&(this._tileZoom=j,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),j!==void 0&&this._update(a),g||this._pruneTiles(),this._noPrune=!!g),this._setZoomTransforms(a,d)},_setZoomTransforms:function(a,d){for(var g in this._levels)this._setZoomTransform(this._levels[g],a,d)},_setZoomTransform:function(a,d,g){var E=this._map.getZoomScale(g,a.zoom),j=a.origin.multiplyBy(E).subtract(this._map._getNewPixelOrigin(d,g)).round();Ve.any3d?Hi(a.el,j,E):Ft(a.el,j)},_resetGrid:function(){var a=this._map,d=a.options.crs,g=this._tileSize=this.getTileSize(),E=this._tileZoom,j=this._map.getPixelWorldBounds(this._tileZoom);j&&(this._globalTileRange=this._pxBoundsToTileRange(j)),this._wrapX=d.wrapLng&&!this.options.noWrap&&[Math.floor(a.project([0,d.wrapLng[0]],E).x/g.x),Math.ceil(a.project([0,d.wrapLng[1]],E).x/g.y)],this._wrapY=d.wrapLat&&!this.options.noWrap&&[Math.floor(a.project([d.wrapLat[0],0],E).y/g.x),Math.ceil(a.project([d.wrapLat[1],0],E).y/g.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(a){var d=this._map,g=d._animatingZoom?Math.max(d._animateToZoom,d.getZoom()):d.getZoom(),E=d.getZoomScale(g,this._tileZoom),j=d.project(a,this._tileZoom).floor(),I=d.getSize().divideBy(E*2);return new U(j.subtract(I),j.add(I))},_update:function(a){var d=this._map;if(d){var g=this._clampZoom(d.getZoom());if(a===void 0&&(a=d.getCenter()),this._tileZoom!==void 0){var E=this._getTiledPixelBounds(a),j=this._pxBoundsToTileRange(E),I=j.getCenter(),Q=[],de=this.options.keepBuffer,ve=new U(j.getBottomLeft().subtract([de,-de]),j.getTopRight().add([de,-de]));if(!(isFinite(j.min.x)&&isFinite(j.min.y)&&isFinite(j.max.x)&&isFinite(j.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Oe in this._tiles){var ze=this._tiles[Oe].coords;(ze.z!==this._tileZoom||!ve.contains(new J(ze.x,ze.y)))&&(this._tiles[Oe].current=!1)}if(Math.abs(g-this._tileZoom)>1){this._setView(a,g);return}for(var Xe=j.min.y;Xe<=j.max.y;Xe++)for(var ht=j.min.x;ht<=j.max.x;ht++){var zn=new J(ht,Xe);if(zn.z=this._tileZoom,!!this._isValidTile(zn)){var yn=this._tiles[this._tileCoordsToKey(zn)];yn?yn.current=!0:Q.push(zn)}}if(Q.sort(function(jt,Nt){return jt.distanceTo(I)-Nt.distanceTo(I)}),Q.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var _r=document.createDocumentFragment();for(ht=0;ht<Q.length;ht++)this._addTile(Q[ht],_r);this._level.el.appendChild(_r)}}}},_isValidTile:function(a){var d=this._map.options.crs;if(!d.infinite){var g=this._globalTileRange;if(!d.wrapLng&&(a.x<g.min.x||a.x>g.max.x)||!d.wrapLat&&(a.y<g.min.y||a.y>g.max.y))return!1}if(!this.options.bounds)return!0;var E=this._tileCoordsToBounds(a);return Z(this.options.bounds).overlaps(E)},_keyToBounds:function(a){return this._tileCoordsToBounds(this._keyToTileCoords(a))},_tileCoordsToNwSe:function(a){var d=this._map,g=this.getTileSize(),E=a.scaleBy(g),j=E.add(g),I=d.unproject(E,a.z),Q=d.unproject(j,a.z);return[I,Q]},_tileCoordsToBounds:function(a){var d=this._tileCoordsToNwSe(a),g=new F(d[0],d[1]);return this.options.noWrap||(g=this._map.wrapLatLngBounds(g)),g},_tileCoordsToKey:function(a){return a.x+":"+a.y+":"+a.z},_keyToTileCoords:function(a){var d=a.split(":"),g=new J(+d[0],+d[1]);return g.z=+d[2],g},_removeTile:function(a){var d=this._tiles[a];d&&(It(d.el),delete this._tiles[a],this.fire("tileunload",{tile:d.el,coords:this._keyToTileCoords(a)}))},_initTile:function(a){at(a,"leaflet-tile");var d=this.getTileSize();a.style.width=d.x+"px",a.style.height=d.y+"px",a.onselectstart=_,a.onmousemove=_,Ve.ielt9&&this.options.opacity<1&&Qt(a,this.options.opacity)},_addTile:function(a,d){var g=this._getTilePos(a),E=this._tileCoordsToKey(a),j=this.createTile(this._wrapCoords(a),u(this._tileReady,this,a));this._initTile(j),this.createTile.length<2&&ee(u(this._tileReady,this,a,null,j)),Ft(j,g),this._tiles[E]={el:j,coords:a,current:!0},d.appendChild(j),this.fire("tileloadstart",{tile:j,coords:a})},_tileReady:function(a,d,g){d&&this.fire("tileerror",{error:d,tile:g,coords:a});var E=this._tileCoordsToKey(a);g=this._tiles[E],g&&(g.loaded=+new Date,this._map._fadeAnimated?(Qt(g.el,0),q(this._fadeFrame),this._fadeFrame=ee(this._updateOpacity,this)):(g.active=!0,this._pruneTiles()),d||(at(g.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:g.el,coords:a})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Ve.ielt9||!this._map._fadeAnimated?ee(this._pruneTiles,this):setTimeout(u(this._pruneTiles,this),250)))},_getTilePos:function(a){return a.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(a){var d=new J(this._wrapX?b(a.x,this._wrapX):a.x,this._wrapY?b(a.y,this._wrapY):a.y);return d.z=a.z,d},_pxBoundsToTileRange:function(a){var d=this.getTileSize();return new U(a.min.unscaleBy(d).floor(),a.max.unscaleBy(d).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var a in this._tiles)if(!this._tiles[a].loaded)return!1;return!0}});function Yd(a){return new xa(a)}var ms=xa.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(a,d){this._url=a,d=k(this,d),d.detectRetina&&Ve.retina&&d.maxZoom>0?(d.tileSize=Math.floor(d.tileSize/2),d.zoomReverse?(d.zoomOffset--,d.minZoom=Math.min(d.maxZoom,d.minZoom+1)):(d.zoomOffset++,d.maxZoom=Math.max(d.minZoom,d.maxZoom-1)),d.minZoom=Math.max(0,d.minZoom)):d.zoomReverse?d.minZoom=Math.min(d.maxZoom,d.minZoom):d.maxZoom=Math.max(d.minZoom,d.maxZoom),typeof d.subdomains=="string"&&(d.subdomains=d.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(a,d){return this._url===a&&d===void 0&&(d=!0),this._url=a,d||this.redraw(),this},createTile:function(a,d){var g=document.createElement("img");return it(g,"load",u(this._tileOnLoad,this,d,g)),it(g,"error",u(this._tileOnError,this,d,g)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(g.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(g.referrerPolicy=this.options.referrerPolicy),g.alt="",g.src=this.getTileUrl(a),g},getTileUrl:function(a){var d={r:Ve.retina?"@2x":"",s:this._getSubdomain(a),x:a.x,y:a.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var g=this._globalTileRange.max.y-a.y;this.options.tms&&(d.y=g),d["-y"]=g}return R(this._url,o(d,this.options))},_tileOnLoad:function(a,d){Ve.ielt9?setTimeout(u(a,this,null,d),0):a(null,d)},_tileOnError:function(a,d,g){var E=this.options.errorTileUrl;E&&d.getAttribute("src")!==E&&(d.src=E),a(g,d)},_onTileRemove:function(a){a.tile.onload=null},_getZoomForUrl:function(){var a=this._tileZoom,d=this.options.maxZoom,g=this.options.zoomReverse,E=this.options.zoomOffset;return g&&(a=d-a),a+E},_getSubdomain:function(a){var d=Math.abs(a.x+a.y)%this.options.subdomains.length;return this.options.subdomains[d]},_abortLoading:function(){var a,d;for(a in this._tiles)if(this._tiles[a].coords.z!==this._tileZoom&&(d=this._tiles[a].el,d.onload=_,d.onerror=_,!d.complete)){d.src=C;var g=this._tiles[a].coords;It(d),delete this._tiles[a],this.fire("tileabort",{tile:d,coords:g})}},_removeTile:function(a){var d=this._tiles[a];if(d)return d.el.setAttribute("src",C),xa.prototype._removeTile.call(this,a)},_tileReady:function(a,d,g){if(!(!this._map||g&&g.getAttribute("src")===C))return xa.prototype._tileReady.call(this,a,d,g)}});function Cr(a,d){return new ms(a,d)}var ko=ms.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(a,d){this._url=a;var g=o({},this.defaultWmsParams);for(var E in d)E in this.options||(g[E]=d[E]);d=k(this,d);var j=d.detectRetina&&Ve.retina?2:1,I=this.getTileSize();g.width=I.x*j,g.height=I.y*j,this.wmsParams=g},onAdd:function(a){this._crs=this.options.crs||a.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var d=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[d]=this._crs.code,ms.prototype.onAdd.call(this,a)},getTileUrl:function(a){var d=this._tileCoordsToNwSe(a),g=this._crs,E=$(g.project(d[0]),g.project(d[1])),j=E.min,I=E.max,Q=(this._wmsVersion>=1.3&&this._crs===Yc?[j.y,j.x,I.y,I.x]:[j.x,j.y,I.x,I.y]).join(","),de=ms.prototype.getTileUrl.call(this,a);return de+A(this.wmsParams,de,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+Q},setParams:function(a,d){return o(this.wmsParams,a),d||this.redraw(),this}});function Rr(a,d){return new ko(a,d)}ms.WMS=ko,Cr.wms=Rr;var cr=Wr.extend({options:{padding:.1},initialize:function(a){k(this,a),m(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),at(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var a={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(a.zoomanim=this._onAnimZoom),a},_onAnimZoom:function(a){this._updateTransform(a.center,a.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(a,d){var g=this._map.getZoomScale(d,this._zoom),E=this._map.getSize().multiplyBy(.5+this.options.padding),j=this._map.project(this._center,d),I=E.multiplyBy(-g).add(j).subtract(this._map._getNewPixelOrigin(a,d));Ve.any3d?Hi(this._container,I,g):Ft(this._container,I)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var a in this._layers)this._layers[a]._reset()},_onZoomEnd:function(){for(var a in this._layers)this._layers[a]._project()},_updatePaths:function(){for(var a in this._layers)this._layers[a]._update()},_update:function(){var a=this.options.padding,d=this._map.getSize(),g=this._map.containerPointToLayerPoint(d.multiplyBy(-a)).round();this._bounds=new U(g,g.add(d.multiplyBy(1+a*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),kl=cr.extend({options:{tolerance:0},getEvents:function(){var a=cr.prototype.getEvents.call(this);return a.viewprereset=this._onViewPreReset,a},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){cr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var a=this._container=document.createElement("canvas");it(a,"mousemove",this._onMouseMove,this),it(a,"click dblclick mousedown mouseup contextmenu",this._onClick,this),it(a,"mouseout",this._handleMouseOut,this),a._leaflet_disable_events=!0,this._ctx=a.getContext("2d")},_destroyContainer:function(){q(this._redrawRequest),delete this._ctx,It(this._container),Lt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var a;this._redrawBounds=null;for(var d in this._layers)a=this._layers[d],a._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){cr.prototype._update.call(this);var a=this._bounds,d=this._container,g=a.getSize(),E=Ve.retina?2:1;Ft(d,a.min),d.width=E*g.x,d.height=E*g.y,d.style.width=g.x+"px",d.style.height=g.y+"px",Ve.retina&&this._ctx.scale(2,2),this._ctx.translate(-a.min.x,-a.min.y),this.fire("update")}},_reset:function(){cr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(a){this._updateDashArray(a),this._layers[m(a)]=a;var d=a._order={layer:a,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=d),this._drawLast=d,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(a){this._requestRedraw(a)},_removePath:function(a){var d=a._order,g=d.next,E=d.prev;g?g.prev=E:this._drawLast=E,E?E.next=g:this._drawFirst=g,delete a._order,delete this._layers[m(a)],this._requestRedraw(a)},_updatePath:function(a){this._extendRedrawBounds(a),a._project(),a._update(),this._requestRedraw(a)},_updateStyle:function(a){this._updateDashArray(a),this._requestRedraw(a)},_updateDashArray:function(a){if(typeof a.options.dashArray=="string"){var d=a.options.dashArray.split(/[, ]+/),g=[],E,j;for(j=0;j<d.length;j++){if(E=Number(d[j]),isNaN(E))return;g.push(E)}a.options._dashArray=g}else a.options._dashArray=a.options.dashArray},_requestRedraw:function(a){this._map&&(this._extendRedrawBounds(a),this._redrawRequest=this._redrawRequest||ee(this._redraw,this))},_extendRedrawBounds:function(a){if(a._pxBounds){var d=(a.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new U,this._redrawBounds.extend(a._pxBounds.min.subtract([d,d])),this._redrawBounds.extend(a._pxBounds.max.add([d,d]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var a=this._redrawBounds;if(a){var d=a.getSize();this._ctx.clearRect(a.min.x,a.min.y,d.x,d.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var a,d=this._redrawBounds;if(this._ctx.save(),d){var g=d.getSize();this._ctx.beginPath(),this._ctx.rect(d.min.x,d.min.y,g.x,g.y),this._ctx.clip()}this._drawing=!0;for(var E=this._drawFirst;E;E=E.next)a=E.layer,(!d||a._pxBounds&&a._pxBounds.intersects(d))&&a._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(a,d){if(this._drawing){var g,E,j,I,Q=a._parts,de=Q.length,ve=this._ctx;if(de){for(ve.beginPath(),g=0;g<de;g++){for(E=0,j=Q[g].length;E<j;E++)I=Q[g][E],ve[E?"lineTo":"moveTo"](I.x,I.y);d&&ve.closePath()}this._fillStroke(ve,a)}}},_updateCircle:function(a){if(!(!this._drawing||a._empty())){var d=a._point,g=this._ctx,E=Math.max(Math.round(a._radius),1),j=(Math.max(Math.round(a._radiusY),1)||E)/E;j!==1&&(g.save(),g.scale(1,j)),g.beginPath(),g.arc(d.x,d.y/j,E,0,Math.PI*2,!1),j!==1&&g.restore(),this._fillStroke(g,a)}},_fillStroke:function(a,d){var g=d.options;g.fill&&(a.globalAlpha=g.fillOpacity,a.fillStyle=g.fillColor||g.color,a.fill(g.fillRule||"evenodd")),g.stroke&&g.weight!==0&&(a.setLineDash&&a.setLineDash(d.options&&d.options._dashArray||[]),a.globalAlpha=g.opacity,a.lineWidth=g.weight,a.strokeStyle=g.color,a.lineCap=g.lineCap,a.lineJoin=g.lineJoin,a.stroke())},_onClick:function(a){for(var d=this._map.mouseEventToLayerPoint(a),g,E,j=this._drawFirst;j;j=j.next)g=j.layer,g.options.interactive&&g._containsPoint(d)&&(!(a.type==="click"||a.type==="preclick")||!this._map._draggableMoved(g))&&(E=g);this._fireEvent(E?[E]:!1,a)},_onMouseMove:function(a){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var d=this._map.mouseEventToLayerPoint(a);this._handleMouseHover(a,d)}},_handleMouseOut:function(a){var d=this._hoveredLayer;d&&(sn(this._container,"leaflet-interactive"),this._fireEvent([d],a,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(a,d){if(!this._mouseHoverThrottled){for(var g,E,j=this._drawFirst;j;j=j.next)g=j.layer,g.options.interactive&&g._containsPoint(d)&&(E=g);E!==this._hoveredLayer&&(this._handleMouseOut(a),E&&(at(this._container,"leaflet-interactive"),this._fireEvent([E],a,"mouseover"),this._hoveredLayer=E)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,a),this._mouseHoverThrottled=!0,setTimeout(u(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(a,d,g){this._map._fireDOMEvent(d,g||d.type,a)},_bringToFront:function(a){var d=a._order;if(d){var g=d.next,E=d.prev;if(g)g.prev=E;else return;E?E.next=g:g&&(this._drawFirst=g),d.prev=this._drawLast,this._drawLast.next=d,d.next=null,this._drawLast=d,this._requestRedraw(a)}},_bringToBack:function(a){var d=a._order;if(d){var g=d.next,E=d.prev;if(E)E.next=g;else return;g?g.prev=E:E&&(this._drawLast=E),d.prev=null,d.next=this._drawFirst,this._drawFirst.prev=d,this._drawFirst=d,this._requestRedraw(a)}}});function Ao(a){return Ve.canvas?new kl(a):null}var ps=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(a){return document.createElement("<lvml:"+a+' class="lvml">')}}catch{}return function(a){return document.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),qc={_initContainer:function(){this._container=gt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(cr.prototype._update.call(this),this.fire("update"))},_initPath:function(a){var d=a._container=ps("shape");at(d,"leaflet-vml-shape "+(this.options.className||"")),d.coordsize="1 1",a._path=ps("path"),d.appendChild(a._path),this._updateStyle(a),this._layers[m(a)]=a},_addPath:function(a){var d=a._container;this._container.appendChild(d),a.options.interactive&&a.addInteractiveTarget(d)},_removePath:function(a){var d=a._container;It(d),a.removeInteractiveTarget(d),delete this._layers[m(a)]},_updateStyle:function(a){var d=a._stroke,g=a._fill,E=a.options,j=a._container;j.stroked=!!E.stroke,j.filled=!!E.fill,E.stroke?(d||(d=a._stroke=ps("stroke")),j.appendChild(d),d.weight=E.weight+"px",d.color=E.color,d.opacity=E.opacity,E.dashArray?d.dashStyle=N(E.dashArray)?E.dashArray.join(" "):E.dashArray.replace(/( *, *)/g," "):d.dashStyle="",d.endcap=E.lineCap.replace("butt","flat"),d.joinstyle=E.lineJoin):d&&(j.removeChild(d),a._stroke=null),E.fill?(g||(g=a._fill=ps("fill")),j.appendChild(g),g.color=E.fillColor||E.color,g.opacity=E.fillOpacity):g&&(j.removeChild(g),a._fill=null)},_updateCircle:function(a){var d=a._point.round(),g=Math.round(a._radius),E=Math.round(a._radiusY||g);this._setPath(a,a._empty()?"M0 0":"AL "+d.x+","+d.y+" "+g+","+E+" 0,"+65535*360)},_setPath:function(a,d){a._path.v=d},_bringToFront:function(a){In(a._container)},_bringToBack:function(a){js(a._container)}},Si=Ve.vml?ps:Be,wa=cr.extend({_initContainer:function(){this._container=Si("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Si("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){It(this._container),Lt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){cr.prototype._update.call(this);var a=this._bounds,d=a.getSize(),g=this._container;(!this._svgSize||!this._svgSize.equals(d))&&(this._svgSize=d,g.setAttribute("width",d.x),g.setAttribute("height",d.y)),Ft(g,a.min),g.setAttribute("viewBox",[a.min.x,a.min.y,d.x,d.y].join(" ")),this.fire("update")}},_initPath:function(a){var d=a._path=Si("path");a.options.className&&at(d,a.options.className),a.options.interactive&&at(d,"leaflet-interactive"),this._updateStyle(a),this._layers[m(a)]=a},_addPath:function(a){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(a._path),a.addInteractiveTarget(a._path)},_removePath:function(a){It(a._path),a.removeInteractiveTarget(a._path),delete this._layers[m(a)]},_updatePath:function(a){a._project(),a._update()},_updateStyle:function(a){var d=a._path,g=a.options;d&&(g.stroke?(d.setAttribute("stroke",g.color),d.setAttribute("stroke-opacity",g.opacity),d.setAttribute("stroke-width",g.weight),d.setAttribute("stroke-linecap",g.lineCap),d.setAttribute("stroke-linejoin",g.lineJoin),g.dashArray?d.setAttribute("stroke-dasharray",g.dashArray):d.removeAttribute("stroke-dasharray"),g.dashOffset?d.setAttribute("stroke-dashoffset",g.dashOffset):d.removeAttribute("stroke-dashoffset")):d.setAttribute("stroke","none"),g.fill?(d.setAttribute("fill",g.fillColor||g.color),d.setAttribute("fill-opacity",g.fillOpacity),d.setAttribute("fill-rule",g.fillRule||"evenodd")):d.setAttribute("fill","none"))},_updatePoly:function(a,d){this._setPath(a,Ce(a._parts,d))},_updateCircle:function(a){var d=a._point,g=Math.max(Math.round(a._radius),1),E=Math.max(Math.round(a._radiusY),1)||g,j="a"+g+","+E+" 0 1,0 ",I=a._empty()?"M0 0":"M"+(d.x-g)+","+d.y+j+g*2+",0 "+j+-g*2+",0 ";this._setPath(a,I)},_setPath:function(a,d){a._path.setAttribute("d",d)},_bringToFront:function(a){In(a._path)},_bringToBack:function(a){js(a._path)}});Ve.vml&&wa.include(qc);function jo(a){return Ve.svg||Ve.vml?new wa(a):null}St.include({getRenderer:function(a){var d=a.options.renderer||this._getPaneRenderer(a.options.pane)||this.options.renderer||this._renderer;return d||(d=this._renderer=this._createRenderer()),this.hasLayer(d)||this.addLayer(d),d},_getPaneRenderer:function(a){if(a==="overlayPane"||a===void 0)return!1;var d=this._paneRenderers[a];return d===void 0&&(d=this._createRenderer({pane:a}),this._paneRenderers[a]=d),d},_createRenderer:function(a){return this.options.preferCanvas&&Ao(a)||jo(a)}});var Ms=ba.extend({initialize:function(a,d){ba.prototype.initialize.call(this,this._boundsToLatLngs(a),d)},setBounds:function(a){return this.setLatLngs(this._boundsToLatLngs(a))},_boundsToLatLngs:function(a){return a=Z(a),[a.getSouthWest(),a.getNorthWest(),a.getNorthEast(),a.getSouthEast()]}});function lp(a,d){return new Ms(a,d)}wa.create=Si,wa.pointsToPath=Ce,qi.geometryToLayer=Gn,qi.coordsToLatLng=xl,qi.coordsToLatLngs=xo,qi.latLngToCoords=wl,qi.latLngsToCoords=wo,qi.getFeature=ds,qi.asFeature=Sl,St.mergeOptions({boxZoom:!0});var ur=vi.extend({initialize:function(a){this._map=a,this._container=a._container,this._pane=a._panes.overlayPane,this._resetStateTimeout=0,a.on("unload",this._destroy,this)},addHooks:function(){it(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Lt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){It(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(a){if(!a.shiftKey||a.which!==1&&a.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),la(),hl(),this._startPoint=this._map.mouseEventToContainerPoint(a),it(document,{contextmenu:cs,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(a){this._moved||(this._moved=!0,this._box=gt("div","leaflet-zoom-box",this._container),at(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(a);var d=new U(this._point,this._startPoint),g=d.getSize();Ft(this._box,d.min),this._box.style.width=g.x+"px",this._box.style.height=g.y+"px"},_finish:function(){this._moved&&(It(this._box),sn(this._container,"leaflet-crosshair")),bi(),co(),Lt(document,{contextmenu:cs,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(a){if(!(a.which!==1&&a.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(u(this._resetState,this),0);var d=new F(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(d).fire("boxzoomend",{boxZoomBounds:d})}},_onKeyDown:function(a){a.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});St.addInitHook("addHandler","boxZoom",ur),St.mergeOptions({doubleClickZoom:!0});var Al=vi.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(a){var d=this._map,g=d.getZoom(),E=d.options.zoomDelta,j=a.originalEvent.shiftKey?g-E:g+E;d.options.doubleClickZoom==="center"?d.setZoom(j):d.setZoomAround(a.containerPoint,j)}});St.addInitHook("addHandler","doubleClickZoom",Al),St.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Ei=vi.extend({addHooks:function(){if(!this._draggable){var a=this._map;this._draggable=new us(a._mapPane,a._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),a.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),a.on("zoomend",this._onZoomEnd,this),a.whenReady(this._onZoomEnd,this))}at(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){sn(this._map._container,"leaflet-grab"),sn(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var a=this._map;if(a._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var d=Z(this._map.options.maxBounds);this._offsetLimit=$(this._map.latLngToContainerPoint(d.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(d.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;a.fire("movestart").fire("dragstart"),a.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(a){if(this._map.options.inertia){var d=this._lastTime=+new Date,g=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(g),this._times.push(d),this._prunePositions(d)}this._map.fire("move",a).fire("drag",a)},_prunePositions:function(a){for(;this._positions.length>1&&a-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var a=this._map.getSize().divideBy(2),d=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=d.subtract(a).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(a,d){return a-(a-d)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var a=this._draggable._newPos.subtract(this._draggable._startPos),d=this._offsetLimit;a.x<d.min.x&&(a.x=this._viscousLimit(a.x,d.min.x)),a.y<d.min.y&&(a.y=this._viscousLimit(a.y,d.min.y)),a.x>d.max.x&&(a.x=this._viscousLimit(a.x,d.max.x)),a.y>d.max.y&&(a.y=this._viscousLimit(a.y,d.max.y)),this._draggable._newPos=this._draggable._startPos.add(a)}},_onPreDragWrap:function(){var a=this._worldWidth,d=Math.round(a/2),g=this._initialWorldOffset,E=this._draggable._newPos.x,j=(E-d+g)%a+d-g,I=(E+d+g)%a-d-g,Q=Math.abs(j+g)<Math.abs(I+g)?j:I;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=Q},_onDragEnd:function(a){var d=this._map,g=d.options,E=!g.inertia||a.noInertia||this._times.length<2;if(d.fire("dragend",a),E)d.fire("moveend");else{this._prunePositions(+new Date);var j=this._lastPos.subtract(this._positions[0]),I=(this._lastTime-this._times[0])/1e3,Q=g.easeLinearity,de=j.multiplyBy(Q/I),ve=de.distanceTo([0,0]),Oe=Math.min(g.inertiaMaxSpeed,ve),ze=de.multiplyBy(Oe/ve),Xe=Oe/(g.inertiaDeceleration*Q),ht=ze.multiplyBy(-Xe/2).round();!ht.x&&!ht.y?d.fire("moveend"):(ht=d._limitOffset(ht,d.options.maxBounds),ee(function(){d.panBy(ht,{duration:Xe,easeLinearity:Q,noMoveStart:!0,animate:!0})}))}}});St.addInitHook("addHandler","dragging",Ei),St.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Zc=vi.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(a){this._map=a,this._setPanDelta(a.options.keyboardPanDelta),this._setZoomDelta(a.options.zoomDelta)},addHooks:function(){var a=this._map._container;a.tabIndex<=0&&(a.tabIndex="0"),it(a,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Lt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var a=document.body,d=document.documentElement,g=a.scrollTop||d.scrollTop,E=a.scrollLeft||d.scrollLeft;this._map._container.focus(),window.scrollTo(E,g)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(a){var d=this._panKeys={},g=this.keyCodes,E,j;for(E=0,j=g.left.length;E<j;E++)d[g.left[E]]=[-1*a,0];for(E=0,j=g.right.length;E<j;E++)d[g.right[E]]=[a,0];for(E=0,j=g.down.length;E<j;E++)d[g.down[E]]=[0,a];for(E=0,j=g.up.length;E<j;E++)d[g.up[E]]=[0,-1*a]},_setZoomDelta:function(a){var d=this._zoomKeys={},g=this.keyCodes,E,j;for(E=0,j=g.zoomIn.length;E<j;E++)d[g.zoomIn[E]]=a;for(E=0,j=g.zoomOut.length;E<j;E++)d[g.zoomOut[E]]=-a},_addHooks:function(){it(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Lt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(a){if(!(a.altKey||a.ctrlKey||a.metaKey)){var d=a.keyCode,g=this._map,E;if(d in this._panKeys){if(!g._panAnim||!g._panAnim._inProgress)if(E=this._panKeys[d],a.shiftKey&&(E=K(E).multiplyBy(3)),g.options.maxBounds&&(E=g._limitOffset(K(E),g.options.maxBounds)),g.options.worldCopyJump){var j=g.wrapLatLng(g.unproject(g.project(g.getCenter()).add(E)));g.panTo(j)}else g.panBy(E)}else if(d in this._zoomKeys)g.setZoom(g.getZoom()+(a.shiftKey?3:1)*this._zoomKeys[d]);else if(d===27&&g._popup&&g._popup.options.closeOnEscapeKey)g.closePopup();else return;cs(a)}}});St.addInitHook("addHandler","keyboard",Zc),St.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var No=vi.extend({addHooks:function(){it(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Lt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(a){var d=Xn(a),g=this._map.options.wheelDebounceTime;this._delta+=d,this._lastMousePos=this._map.mouseEventToContainerPoint(a),this._startTime||(this._startTime=+new Date);var E=Math.max(g-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(u(this._performZoom,this),E),cs(a)},_performZoom:function(){var a=this._map,d=a.getZoom(),g=this._map.options.zoomSnap||0;a._stop();var E=this._delta/(this._map.options.wheelPxPerZoomLevel*4),j=4*Math.log(2/(1+Math.exp(-Math.abs(E))))/Math.LN2,I=g?Math.ceil(j/g)*g:j,Q=a._limitZoom(d+(this._delta>0?I:-I))-d;this._delta=0,this._startTime=null,Q&&(a.options.scrollWheelZoom==="center"?a.setZoom(d+Q):a.setZoomAround(this._lastMousePos,d+Q))}});St.addInitHook("addHandler","scrollWheelZoom",No);var Cs=600;St.mergeOptions({tapHold:Ve.touchNative&&Ve.safari&&Ve.mobile,tapTolerance:15});var jl=vi.extend({addHooks:function(){it(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Lt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(a){if(clearTimeout(this._holdTimeout),a.touches.length===1){var d=a.touches[0];this._startPos=this._newPos=new J(d.clientX,d.clientY),this._holdTimeout=setTimeout(u(function(){this._cancel(),this._isTapValid()&&(it(document,"touchend",bn),it(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",d))},this),Cs),it(document,"touchend touchcancel contextmenu",this._cancel,this),it(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function a(){Lt(document,"touchend",bn),Lt(document,"touchend touchcancel",a)},_cancel:function(){clearTimeout(this._holdTimeout),Lt(document,"touchend touchcancel contextmenu",this._cancel,this),Lt(document,"touchmove",this._onMove,this)},_onMove:function(a){var d=a.touches[0];this._newPos=new J(d.clientX,d.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(a,d){var g=new MouseEvent(a,{bubbles:!0,cancelable:!0,view:window,screenX:d.screenX,screenY:d.screenY,clientX:d.clientX,clientY:d.clientY});g._simulated=!0,d.target.dispatchEvent(g)}});St.addInitHook("addHandler","tapHold",jl),St.mergeOptions({touchZoom:Ve.touch,bounceAtZoomLimits:!0});var Vc=vi.extend({addHooks:function(){at(this._map._container,"leaflet-touch-zoom"),it(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){sn(this._map._container,"leaflet-touch-zoom"),Lt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(a){var d=this._map;if(!(!a.touches||a.touches.length!==2||d._animatingZoom||this._zooming)){var g=d.mouseEventToContainerPoint(a.touches[0]),E=d.mouseEventToContainerPoint(a.touches[1]);this._centerPoint=d.getSize()._divideBy(2),this._startLatLng=d.containerPointToLatLng(this._centerPoint),d.options.touchZoom!=="center"&&(this._pinchStartLatLng=d.containerPointToLatLng(g.add(E)._divideBy(2))),this._startDist=g.distanceTo(E),this._startZoom=d.getZoom(),this._moved=!1,this._zooming=!0,d._stop(),it(document,"touchmove",this._onTouchMove,this),it(document,"touchend touchcancel",this._onTouchEnd,this),bn(a)}},_onTouchMove:function(a){if(!(!a.touches||a.touches.length!==2||!this._zooming)){var d=this._map,g=d.mouseEventToContainerPoint(a.touches[0]),E=d.mouseEventToContainerPoint(a.touches[1]),j=g.distanceTo(E)/this._startDist;if(this._zoom=d.getScaleZoom(j,this._startZoom),!d.options.bounceAtZoomLimits&&(this._zoom<d.getMinZoom()&&j<1||this._zoom>d.getMaxZoom()&&j>1)&&(this._zoom=d._limitZoom(this._zoom)),d.options.touchZoom==="center"){if(this._center=this._startLatLng,j===1)return}else{var I=g._add(E)._divideBy(2)._subtract(this._centerPoint);if(j===1&&I.x===0&&I.y===0)return;this._center=d.unproject(d.project(this._pinchStartLatLng,this._zoom).subtract(I),this._zoom)}this._moved||(d._moveStart(!0,!1),this._moved=!0),q(this._animRequest);var Q=u(d._move,d,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=ee(Q,this,!0),bn(a)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,q(this._animRequest),Lt(document,"touchmove",this._onTouchMove,this),Lt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});St.addInitHook("addHandler","touchZoom",Vc),St.BoxZoom=ur,St.DoubleClickZoom=Al,St.Drag=Ei,St.Keyboard=Zc,St.ScrollWheelZoom=No,St.TapHold=jl,St.TouchZoom=Vc,n.Bounds=U,n.Browser=Ve,n.CRS=ie,n.Canvas=kl,n.Circle=_l,n.CircleMarker=ga,n.Class=oe,n.Control=vr,n.DivIcon=Fd,n.DivOverlay=Fn,n.DomEvent=pl,n.DomUtil=da,n.Draggable=us,n.Evented=ae,n.FeatureGroup=_i,n.GeoJSON=qi,n.GridLayer=xa,n.Handler=vi,n.Icon=xi,n.ImageOverlay=va,n.LatLng=B,n.LatLngBounds=F,n.Layer=Wr,n.LayerGroup=pa,n.LineUtil=np,n.Map=St,n.Marker=_o,n.Mixin=Jm,n.Path=wi,n.Point=J,n.PolyUtil=Gc,n.Polygon=ba,n.Polyline=Yi,n.Popup=Eo,n.PosAnimation=ha,n.Projection=Ld,n.Rectangle=Ms,n.Renderer=cr,n.SVG=wa,n.SVGOverlay=Tl,n.TileLayer=ms,n.Tooltip=To,n.Transformation=ke,n.Util=te,n.VideoOverlay=fs,n.bind=u,n.bounds=$,n.canvas=Ao,n.circle=zd,n.circleMarker=Id,n.control=Fi,n.divIcon=op,n.extend=o,n.featureGroup=Pd,n.geoJSON=El,n.geoJson=So,n.gridLayer=Yd,n.icon=bo,n.imageOverlay=Ud,n.latLng=Y,n.latLngBounds=Z,n.layerGroup=rp,n.map=Pc,n.marker=$d,n.point=K,n.polygon=sp,n.polyline=ip,n.popup=Gd,n.rectangle=lp,n.setOptions=k,n.stamp=m,n.svg=jo,n.svgOverlay=Hd,n.tileLayer=Cr,n.tooltip=ap,n.transformation=je,n.version=s,n.videoOverlay=_a;var Kc=window.L;n.noConflict=function(){return window.L=Kc,this},window.L=n}))})(Hu,Hu.exports)),Hu.exports}var iD=rD();const q0=ll(iD),Fh=e=>e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;");function Uo(e){const t=document.getElementById(e);if(!t)throw new Error(`#${e} not found`);return t}function sD(e){const{buttonId:t,buttonInputId:n,modalId:s,closeMapId:o,mapCloseBtnId:l,searchBoxId:u,suggestionsId:f,mapId:m}=e.ids,p=e.initialCenter??{lat:37.5665,lon:126.978},b=Uo(n),_=Uo(t),x=Uo(s),S=Uo(l),T=Uo(u),k=Uo(f),A=o?Uo(o):null;let M=null,R=null,N=null;const D=q=>q.code==="Space"||q.key===" "||q.key==="Spacebar"||q.key==="Space",C=q=>{D(q)&&document.activeElement!==T&&(q.preventDefault(),q.stopPropagation(),T.focus())},G=()=>{x.style.display="flex",M?setTimeout(()=>M?.invalidateSize(),200):setTimeout(()=>{M=q0.map(m,{keyboard:!1}).setView([p.lat,p.lon],11),q0.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:" OpenStreetMap"}).addTo(M),M.invalidateSize()},0),x.addEventListener("keydown",C,!0),x.addEventListener("keyup",C,!0),T.focus()},H=()=>{x.style.display="none",T.value="",k.innerHTML="",N&&(window.clearTimeout(N),N=null),x.removeEventListener("keydown",C,!0),x.removeEventListener("keyup",C,!0)},V=q=>{const te=q.dataset.name??"",oe=Number(q.dataset.lat??""),Se=Number(q.dataset.lon??"");!Number.isFinite(oe)||!Number.isFinite(Se)||!M||(R?R.setLatLng([oe,Se]):R=q0.marker([oe,Se]).addTo(M),M.flyTo([oe,Se],14,{duration:.5}),b.value=te,b.dataset.lat=String(oe),b.dataset.lon=String(Se),e.onSelected?.({name:te,lat:oe,lon:Se}),k.innerHTML="",H())},W=()=>{N&&window.clearTimeout(N);const q=T.value.trim();if(!q){k.innerHTML="";return}N=window.setTimeout(async()=>{try{const te="https://nominatim.openstreetmap.org/search?format=jsonv2&limit=12&accept-language=ko&addressdetails=1&dedupe=1&email=unique950318@gmail.com&q="+encodeURIComponent(q),oe=await fetch(te,{headers:{Accept:"application/json"}});if(!oe.ok)throw new Error(`HTTP ${oe.status}`);const Se=await oe.json();if(!Array.isArray(Se)||Se.length===0){k.innerHTML='<li style="padding:8px"> </li>';return}const X=Se.slice(0,12).map((ae,J)=>{const ye=ae.display_name.split(",").slice(0,3).map($=>$.trim()).join("  "),K="padding:8px;cursor:pointer;outline:none;",U=J===0?"background-color:#1f2937;border-radius:4px;":"";return`<li
                    role="option"
                    data-name="${Fh(ye)}"
                    data-lat="${Fh(ae.lat)}"
                    data-lon="${Fh(ae.lon)}"
                    data-active="${J===0?"1":"0"}"
                    style="${K}${U}"
                  >${Fh(ye)}</li>`}).join("");k.innerHTML=X}catch(te){console.error(te),k.innerHTML='<li style="padding:8px;color:#b91c1c"> </li>'}},250)},re=q=>{const te=q.target;te.tagName==="LI"&&V(te)},ee=q=>{if(q.key==="Enter"){const te=k.querySelector('li[data-active="1"]')??k.querySelector("li");te&&V(te)}};return _.addEventListener("click",G),S.addEventListener("click",H),A&&A.addEventListener("click",H),T.addEventListener("input",W),T.addEventListener("keydown",ee),k.addEventListener("click",re),()=>{_.removeEventListener("click",G),S.removeEventListener("click",H),A&&A.removeEventListener("click",H),T.removeEventListener("input",W),T.removeEventListener("keydown",ee),k.removeEventListener("click",re),x.removeEventListener("keydown",C,!0),x.removeEventListener("keyup",C,!0),N&&(window.clearTimeout(N),N=null),M&&(M.remove(),M=null)}}function Xl(){return document.getElementById("suggestions")}function Rf(e){const t=Array.from(e.querySelectorAll('li, [role="option"]'));return t.forEach((n,s)=>{n.getAttribute("role")||n.setAttribute("role","option"),n.setAttribute("aria-selected",n===document.activeElement?"true":"false"),n.tabIndex=-1,n.id||(n.id=`suggestion-item-${s}`)}),t}function Z0(e,t){const n=Rf(e);if(n.length===0)return;const s=n.length;let o=t;o<0&&(o=s-1),o>=s&&(o=0),n.forEach(u=>{u.tabIndex=-1,u.setAttribute("aria-selected","false")});const l=n[o];l.tabIndex=0,l.setAttribute("aria-selected","true"),l.focus()}function Z2({onSelect:e,placeholderText:t="",buttonStyle:n,value:s}){const[o,l]=P.useState(t),[u,f]=P.useState(!1),[m,p]=P.useState(s??""),b=P.useRef(null),_=P.useRef(null),x=P.useRef(null),S=P.useRef(null);return P.useEffect(()=>{s!==void 0&&p(s)},[s]),P.useEffect(()=>{if(!u)return;const T=sD({ids:{buttonInputId:"inputBirthPlace",buttonId:"inputBirthPlaceBtn",modalId:"mapModal",closeMapId:"closeMap",mapCloseBtnId:"mapCloseBtn",searchBoxId:"searchBox",suggestionsId:"suggestions",mapId:"map"},onSelected:W=>{l(""),p(W.name),b.current&&(b.current.value=W.name),_.current&&(_.current.value=String(W.lat)),x.current&&(x.current.value=String(W.lon)),e?.(W),f(!1)}}),k=document.getElementById("inputBirthPlaceBtn");k&&k.dispatchEvent(new MouseEvent("click",{bubbles:!0}));const A=document.getElementById("mapModal"),M=document.getElementById("searchBox"),R=Xl();setTimeout(()=>M?.focus(),0);const N='button, [href], input:not([type="hidden"]), select, textarea, [tabindex]:not([tabindex="-1"])',D=W=>{if(W.key==="Escape"){W.preventDefault(),f(!1);return}if(W.key!=="Tab")return;const re=Xl();if(re&&re.contains(document.activeElement))return;const ee=Array.from(A.querySelectorAll(N)).filter(Se=>!Se.hasAttribute("disabled")&&Se.tabIndex!==-1);if(ee.length===0)return;const q=ee[0],te=ee[ee.length-1],oe=document.activeElement;W.shiftKey?(oe===q||!A.contains(oe))&&(W.preventDefault(),te.focus()):(oe===te||!A.contains(oe))&&(W.preventDefault(),q.focus())};A.addEventListener("keydown",D);const C=W=>{if(W.key!=="ArrowDown")return;const re=Xl();!re||Rf(re).length===0||W.preventDefault()};M?.addEventListener("keydown",C);const G=W=>{if(W.target.value.trim()===""){const ee=Xl();ee&&(ee.innerHTML="")}};M?.addEventListener("input",G);const H=W=>{const re=Xl();if(!re)return;const ee=Rf(re);if(ee.length===0)return;const q=document.activeElement,te=q?ee.indexOf(q):-1;if(te===-1)return;const oe=Se=>{W.preventDefault(),Z0(re,te+Se)};switch(W.key){case"Tab":W.preventDefault(),oe(W.shiftKey?-1:1);break;case"ArrowDown":W.preventDefault(),oe(1);break;case"ArrowUp":W.preventDefault(),oe(-1);break;case"Home":W.preventDefault(),Z0(re,0);break;case"End":W.preventDefault(),Z0(re,ee.length-1);break;case"Enter":case" ":W.preventDefault(),q.click();break;case"Backspace":W.preventDefault(),re.innerHTML="",M?.focus();break}W.stopPropagation()};let V=null;return R&&(R.addEventListener("keydown",H),V=new MutationObserver(()=>{const W=Xl();!W||Rf(W).length}),V.observe(R,{childList:!0,subtree:!1})),()=>{A.removeEventListener("keydown",D),M?.removeEventListener("keydown",C),M?.removeEventListener("input",G),R&&R.removeEventListener("keydown",H),V?.disconnect(),T?.()}},[u,e]),P.useEffect(()=>{u||setTimeout(()=>S.current?.focus(),0)},[u]),y.jsxs("li",{className:"flex items-center gap-2",children:[y.jsx("input",{className:`w-[60%] desk:w-[70%] mr-2 border rounded-lg p-2
                   bg-white dark:bg-neutral-900
                   border-neutral-300 dark:border-neutral-700
                   text-neutral-900 dark:text-neutral-100
                   placeholder-neutral-400 dark:placeholder-neutral-500`,type:"text",id:"inputBirthPlace",readOnly:!0,"aria-readonly":"true",value:m&&m.trim()!==""?m:t}),y.jsx("button",{ref:S,type:"button",id:"inputBirthPlaceBtn",className:"btn_style text-sm desk:text-base w-[calc(40%_-_8px)] desk:w-[calc(30%_-_8px)] p-0",style:n,onClick:()=>f(!0),"aria-haspopup":"dialog","aria-expanded":u,"aria-controls":"mapModal",children:o}),y.jsx("input",{ref:b,type:"hidden",name:"birthPlace_name",defaultValue:""}),y.jsx("input",{ref:_,type:"hidden",name:"birthPlace_lat",defaultValue:""}),y.jsx("input",{ref:x,type:"hidden",name:"birthPlace_lon",defaultValue:""}),u&&y.jsx("div",{id:"mapModal",role:"dialog","aria-modal":"true","aria-labelledby":"mapModalTitle",className:"fixed inset-0 z-[999] flex items-center justify-center bg-black/40 dark:bg-black/60 p-4",children:y.jsxs("div",{className:`w-[96vw] desk:w-[920px] rounded-2xl shadow-2xl overflow-hidden flex flex-col
                          bg-white dark:bg-neutral-950
                          text-neutral-900 dark:text-neutral-100
                          border border-neutral-200 dark:border-neutral-800`,children:[y.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-neutral-200 dark:border-neutral-800",children:[y.jsx("div",{id:"mapModalTitle",className:"font-bold",children:""}),y.jsx("button",{id:"mapCloseBtn","aria-label":"",className:"text-xl hover:opacity-70 cursor-pointer",onClick:()=>f(!1),children:""})]}),y.jsxs("div",{className:"relative grid gap-2 px-3 py-3 border-t border-neutral-200 dark:border-neutral-800",children:[y.jsx("label",{htmlFor:"searchBox",className:"text-xs text-neutral-500 dark:text-neutral-400",children:"/ "}),y.jsxs("div",{className:"relative",children:[y.jsx("input",{id:"searchBox",placeholder:":   / seoul /  / tokyo",className:`h-10 w-full rounded-lg border px-3 outline-none
                             bg-white dark:bg-neutral-900
                             border-neutral-300 dark:border-neutral-700
                             placeholder-neutral-400 dark:placeholder-neutral-500
                             text-neutral-900 dark:text-neutral-100
                             focus:border-neutral-400 dark:focus:border-neutral-600`,autoComplete:"off"}),y.jsx("ul",{id:"suggestions",role:"listbox","aria-label":" ",className:`absolute left-0 right-0 mt-1 max-h-60 overflow-y-auto rounded-lg border shadow-xl z-[1005]
                             bg-white dark:bg-neutral-900
                             border-neutral-200 dark:border-neutral-700
                             text-neutral-900 dark:text-neutral-100
                             divide-y divide-neutral-200 dark:divide-neutral-800`})]})]}),y.jsx("div",{className:"relative h-[250px] desk:h-[360px] border-y border-neutral-200 dark:border-neutral-800",children:y.jsx("div",{id:"map",className:"h-full w-full"})}),y.jsxs("div",{className:"gap-2 p-3",children:[y.jsxs("div",{id:"footerHint",className:"pr-2 text-xs text-neutral-600 dark:text-neutral-300 flex-1",children:[y.jsxs("p",{className:"flex mb-1",children:[y.jsx("span",{className:"mr-1",children:"*"}),y.jsx("span",{children:" ,  ."})]}),y.jsxs("p",{className:"flex",children:[y.jsx("span",{className:"mr-1",children:"*"}),y.jsx("span",{children:"       ,   ."})]})]}),y.jsx("button",{id:"closeMap",style:{display:"none"},"aria-hidden":"true",tabIndex:-1})]})]})})]})}var Sm=A2();const aD=ll(Sm);function Sr(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var oD=typeof Symbol=="function"&&Symbol.observable||"@@observable",xw=oD,ww=()=>Math.random().toString(36).substring(7).split("").join("."),lD={INIT:`@@redux/INIT${ww()}`,REPLACE:`@@redux/REPLACE${ww()}`},Sw=lD;function cD(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function V2(e,t,n){if(typeof e!="function")throw new Error(Sr(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Sr(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Sr(1));return n(V2)(e,t)}let s=e,o=t,l=new Map,u=l,f=0,m=!1;function p(){u===l&&(u=new Map,l.forEach((A,M)=>{u.set(M,A)}))}function b(){if(m)throw new Error(Sr(3));return o}function _(A){if(typeof A!="function")throw new Error(Sr(4));if(m)throw new Error(Sr(5));let M=!0;p();const R=f++;return u.set(R,A),function(){if(M){if(m)throw new Error(Sr(6));M=!1,p(),u.delete(R),l=null}}}function x(A){if(!cD(A))throw new Error(Sr(7));if(typeof A.type>"u")throw new Error(Sr(8));if(typeof A.type!="string")throw new Error(Sr(17));if(m)throw new Error(Sr(9));try{m=!0,o=s(o,A)}finally{m=!1}return(l=u).forEach(R=>{R()}),A}function S(A){if(typeof A!="function")throw new Error(Sr(10));s=A,x({type:Sw.REPLACE})}function T(){const A=_;return{subscribe(M){if(typeof M!="object"||M===null)throw new Error(Sr(11));function R(){const D=M;D.next&&D.next(b())}return R(),{unsubscribe:A(R)}},[xw](){return this}}}return x({type:Sw.INIT}),{dispatch:x,subscribe:_,getState:b,replaceReducer:S,[xw]:T}}function Ew(e,t){return function(...n){return t(e.apply(this,n))}}function Tw(e,t){if(typeof e=="function")return Ew(e,t);if(typeof e!="object"||e===null)throw new Error(Sr(16));const n={};for(const s in e){const o=e[s];typeof o=="function"&&(n[s]=Ew(o,t))}return n}function K2(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...s)=>t(n(...s)))}function uD(...e){return t=>(n,s)=>{const o=t(n,s);let l=()=>{throw new Error(Sr(15))};const u={getState:o.getState,dispatch:(m,...p)=>l(m,...p)},f=e.map(m=>m(u));return l=K2(...f)(o.dispatch),{...o,dispatch:l}}}var V0={exports:{}},K0={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kw;function dD(){if(kw)return K0;kw=1;var e=gm();function t(m,p){return m===p&&(m!==0||1/m===1/p)||m!==m&&p!==p}var n=typeof Object.is=="function"?Object.is:t,s=e.useSyncExternalStore,o=e.useRef,l=e.useEffect,u=e.useMemo,f=e.useDebugValue;return K0.useSyncExternalStoreWithSelector=function(m,p,b,_,x){var S=o(null);if(S.current===null){var T={hasValue:!1,value:null};S.current=T}else T=S.current;S=u(function(){function A(C){if(!M){if(M=!0,R=C,C=_(C),x!==void 0&&T.hasValue){var G=T.value;if(x(G,C))return N=G}return N=C}if(G=N,n(R,C))return G;var H=_(C);return x!==void 0&&x(G,H)?(R=C,G):(R=C,N=H)}var M=!1,R,N,D=b===void 0?null:b;return[function(){return A(p())},D===null?void 0:function(){return A(D())}]},[p,b,_,x]);var k=s(m,S[0],S[1]);return l(function(){T.hasValue=!0,T.value=k},[k]),f(k),k},K0}var Aw;function hD(){return Aw||(Aw=1,V0.exports=dD()),V0.exports}hD();var fD=P.version.startsWith("19"),mD=Symbol.for(fD?"react.transitional.element":"react.element"),pD=Symbol.for("react.portal"),gD=Symbol.for("react.fragment"),bD=Symbol.for("react.strict_mode"),yD=Symbol.for("react.profiler"),vD=Symbol.for("react.consumer"),_D=Symbol.for("react.context"),W2=Symbol.for("react.forward_ref"),xD=Symbol.for("react.suspense"),wD=Symbol.for("react.suspense_list"),Jb=Symbol.for("react.memo"),SD=Symbol.for("react.lazy"),ED=W2,TD=Jb;function kD(e){if(typeof e=="object"&&e!==null){const{$$typeof:t}=e;switch(t){case mD:switch(e=e.type,e){case gD:case yD:case bD:case xD:case wD:return e;default:switch(e=e&&e.$$typeof,e){case _D:case W2:case SD:case Jb:return e;case vD:return e;default:return t}}case pD:return t}}}function AD(e){return kD(e)===Jb}function jD(e,t,n,s,{areStatesEqual:o,areOwnPropsEqual:l,areStatePropsEqual:u}){let f=!1,m,p,b,_,x;function S(R,N){return m=R,p=N,b=e(m,p),_=t(s,p),x=n(b,_,p),f=!0,x}function T(){return b=e(m,p),t.dependsOnOwnProps&&(_=t(s,p)),x=n(b,_,p),x}function k(){return e.dependsOnOwnProps&&(b=e(m,p)),t.dependsOnOwnProps&&(_=t(s,p)),x=n(b,_,p),x}function A(){const R=e(m,p),N=!u(R,b);return b=R,N&&(x=n(b,_,p)),x}function M(R,N){const D=!l(N,p),C=!o(R,m,N,p);return m=R,p=N,D&&C?T():D?k():C?A():x}return function(N,D){return f?M(N,D):S(N,D)}}function ND(e,{initMapStateToProps:t,initMapDispatchToProps:n,initMergeProps:s,...o}){const l=t(e,o),u=n(e,o),f=s(e,o);return jD(l,u,f,e,o)}function OD(e,t){const n={};for(const s in e){const o=e[s];typeof o=="function"&&(n[s]=(...l)=>t(o(...l)))}return n}function ab(e){return function(n){const s=e(n);function o(){return s}return o.dependsOnOwnProps=!1,o}}function jw(e){return e.dependsOnOwnProps?!!e.dependsOnOwnProps:e.length!==1}function X2(e,t){return function(s,{displayName:o}){const l=function(f,m){return l.dependsOnOwnProps?l.mapToProps(f,m):l.mapToProps(f,void 0)};return l.dependsOnOwnProps=!0,l.mapToProps=function(f,m){l.mapToProps=e,l.dependsOnOwnProps=jw(e);let p=l(f,m);return typeof p=="function"&&(l.mapToProps=p,l.dependsOnOwnProps=jw(p),p=l(f,m)),p},l}}function Qb(e,t){return(n,s)=>{throw new Error(`Invalid value of type ${typeof e} for ${t} argument when connecting component ${s.wrappedComponentName}.`)}}function DD(e){return e&&typeof e=="object"?ab(t=>OD(e,t)):e?typeof e=="function"?X2(e):Qb(e,"mapDispatchToProps"):ab(t=>({dispatch:t}))}function MD(e){return e?typeof e=="function"?X2(e):Qb(e,"mapStateToProps"):ab(()=>({}))}function CD(e,t,n){return{...n,...e,...t}}function RD(e){return function(n,{displayName:s,areMergedPropsEqual:o}){let l=!1,u;return function(m,p,b){const _=e(m,p,b);return l?o(_,u)||(u=_):(l=!0,u=_),u}}}function LD(e){return e?typeof e=="function"?RD(e):Qb(e,"mergeProps"):()=>CD}function BD(e){e()}function PD(){let e=null,t=null;return{clear(){e=null,t=null},notify(){BD(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let s=e;for(;s;)n.push(s),s=s.next;return n},subscribe(n){let s=!0;const o=t={callback:n,next:null,prev:t};return o.prev?o.prev.next=o:e=o,function(){!s||e===null||(s=!1,o.next?o.next.prev=o.prev:t=o.prev,o.prev?o.prev.next=o.next:e=o.next)}}}}var Nw={notify(){},get:()=>[]};function J2(e,t){let n,s=Nw,o=0,l=!1;function u(k){b();const A=s.subscribe(k);let M=!1;return()=>{M||(M=!0,A(),_())}}function f(){s.notify()}function m(){T.onStateChange&&T.onStateChange()}function p(){return l}function b(){o++,n||(n=t?t.addNestedSub(m):e.subscribe(m),s=PD())}function _(){o--,n&&o===0&&(n(),n=void 0,s.clear(),s=Nw)}function x(){l||(l=!0,b())}function S(){l&&(l=!1,_())}const T={addNestedSub:u,notifyNestedSubs:f,handleChangeWrapper:m,isSubscribed:p,trySubscribe:x,tryUnsubscribe:S,getListeners:()=>s};return T}var $D=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ID=$D(),zD=()=>typeof navigator<"u"&&navigator.product==="ReactNative",UD=zD(),HD=()=>ID||UD?P.useLayoutEffect:P.useEffect,Gf=HD();function Ow(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function W0(e,t){if(Ow(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(!Object.prototype.hasOwnProperty.call(t,n[o])||!Ow(e[n[o]],t[n[o]]))return!1;return!0}var GD={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},FD={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},YD={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Q2={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},qD={[ED]:YD,[TD]:Q2};function Dw(e){return AD(e)?Q2:qD[e.$$typeof]||GD}var ZD=Object.defineProperty,VD=Object.getOwnPropertyNames,Mw=Object.getOwnPropertySymbols,KD=Object.getOwnPropertyDescriptor,WD=Object.getPrototypeOf,Cw=Object.prototype;function ob(e,t){if(typeof t!="string"){if(Cw){const l=WD(t);l&&l!==Cw&&ob(e,l)}let n=VD(t);Mw&&(n=n.concat(Mw(t)));const s=Dw(e),o=Dw(t);for(let l=0;l<n.length;++l){const u=n[l];if(!FD[u]&&!(o&&o[u])&&!(s&&s[u])){const f=KD(t,u);try{ZD(e,u,f)}catch{}}}}return e}var XD=Symbol.for("react-redux-context"),JD=typeof globalThis<"u"?globalThis:{};function QD(){if(!P.createContext)return{};const e=JD[XD]??=new Map;let t=e.get(P.createContext);return t||(t=P.createContext(null),e.set(P.createContext,t)),t}var eE=QD(),eM=[null,null];function tM(e,t,n){Gf(()=>e(...t),n)}function nM(e,t,n,s,o,l){e.current=s,n.current=!1,o.current&&(o.current=null,l())}function rM(e,t,n,s,o,l,u,f,m,p,b){if(!e)return()=>{};let _=!1,x=null;const S=()=>{if(_||!f.current)return;const k=t.getState();let A,M;try{A=s(k,o.current)}catch(R){M=R,x=R}M||(x=null),A===l.current?u.current||p():(l.current=A,m.current=A,u.current=!0,b())};return n.onStateChange=S,n.trySubscribe(),S(),()=>{if(_=!0,n.tryUnsubscribe(),n.onStateChange=null,x)throw x}}function iM(e,t){return e===t}function sM(e,t,n,{pure:s,areStatesEqual:o=iM,areOwnPropsEqual:l=W0,areStatePropsEqual:u=W0,areMergedPropsEqual:f=W0,forwardRef:m=!1,context:p=eE}={}){const b=p,_=MD(e),x=DD(t),S=LD(n),T=!!e;return A=>{const M=A.displayName||A.name||"Component",R=`Connect(${M})`,N={shouldHandleStateChanges:T,displayName:R,wrappedComponentName:M,WrappedComponent:A,initMapStateToProps:_,initMapDispatchToProps:x,initMergeProps:S,areStatesEqual:o,areStatePropsEqual:u,areOwnPropsEqual:l,areMergedPropsEqual:f};function D(H){const[V,W,re]=P.useMemo(()=>{const{reactReduxForwardedRef:je,...Me}=H;return[H.context,je,Me]},[H]),ee=P.useMemo(()=>{let je=b;return V?.Consumer,je},[V,b]),q=P.useContext(ee),te=!!H.store&&!!H.store.getState&&!!H.store.dispatch,oe=!!q&&!!q.store,Se=te?H.store:q.store,X=oe?q.getServerState:Se.getState,ae=P.useMemo(()=>ND(Se.dispatch,N),[Se]),[J,ye]=P.useMemo(()=>{if(!T)return eM;const je=J2(Se,te?void 0:q.subscription),Me=je.notifyNestedSubs.bind(je);return[je,Me]},[Se,te,q]),K=P.useMemo(()=>te?q:{...q,subscription:J},[te,q,J]),U=P.useRef(void 0),$=P.useRef(re),F=P.useRef(void 0),Z=P.useRef(!1),B=P.useRef(!1),Y=P.useRef(void 0);Gf(()=>(B.current=!0,()=>{B.current=!1}),[]);const ie=P.useMemo(()=>()=>F.current&&re===$.current?F.current:ae(Se.getState(),re),[Se,re]),fe=P.useMemo(()=>Me=>J?rM(T,Se,J,ae,$,U,Z,B,F,ye,Me):()=>{},[J]);tM(nM,[$,U,Z,re,F,ye]);let ce;try{ce=P.useSyncExternalStore(fe,ie,X?()=>ae(X(),re):ie)}catch(je){throw Y.current&&(je.message+=`
The error may be correlated with this previous error:
${Y.current.stack}

`),je}Gf(()=>{Y.current=void 0,F.current=void 0,U.current=ce});const xe=P.useMemo(()=>P.createElement(A,{...ce,ref:W}),[W,A,ce]);return P.useMemo(()=>T?P.createElement(ee.Provider,{value:K},xe):xe,[ee,xe,K])}const G=P.memo(D);if(G.WrappedComponent=A,G.displayName=D.displayName=R,m){const V=P.forwardRef(function(re,ee){return P.createElement(G,{...re,reactReduxForwardedRef:ee})});return V.displayName=R,V.WrappedComponent=A,ob(V,A)}return ob(G,A)}}var tE=sM;function aM(e){const{children:t,context:n,serverState:s,store:o}=e,l=P.useMemo(()=>{const m=J2(o);return{store:o,subscription:m,getServerState:s?()=>s:void 0}},[o,s]),u=P.useMemo(()=>o.getState(),[o]);Gf(()=>{const{subscription:m}=l;return m.onStateChange=m.notifyNestedSubs,m.trySubscribe(),u!==o.getState()&&m.notifyNestedSubs(),()=>{m.tryUnsubscribe(),m.onStateChange=void 0}},[l,u]);const f=n||eE;return P.createElement(f.Provider,{value:l},t)}var oM=aM,lM="Invariant failed";function cM(e,t){throw new Error(lM)}var is=function(t){var n=t.top,s=t.right,o=t.bottom,l=t.left,u=s-l,f=o-n,m={top:n,right:s,bottom:o,left:l,width:u,height:f,x:l,y:n,center:{x:(s+l)/2,y:(o+n)/2}};return m},ey=function(t,n){return{top:t.top-n.top,left:t.left-n.left,bottom:t.bottom+n.bottom,right:t.right+n.right}},Rw=function(t,n){return{top:t.top+n.top,left:t.left+n.left,bottom:t.bottom-n.bottom,right:t.right-n.right}},uM=function(t,n){return{top:t.top+n.y,left:t.left+n.x,bottom:t.bottom+n.y,right:t.right+n.x}},X0={top:0,right:0,bottom:0,left:0},ty=function(t){var n=t.borderBox,s=t.margin,o=s===void 0?X0:s,l=t.border,u=l===void 0?X0:l,f=t.padding,m=f===void 0?X0:f,p=is(ey(n,o)),b=is(Rw(n,u)),_=is(Rw(b,m));return{marginBox:p,borderBox:is(n),paddingBox:b,contentBox:_,margin:o,border:u,padding:m}},ji=function(t){var n=t.slice(0,-2),s=t.slice(-2);if(s!=="px")return 0;var o=Number(n);return isNaN(o)&&cM(),o},dM=function(){return{x:window.pageXOffset,y:window.pageYOffset}},Ff=function(t,n){var s=t.borderBox,o=t.border,l=t.margin,u=t.padding,f=uM(s,n);return ty({borderBox:f,border:o,margin:l,padding:u})},Yf=function(t,n){return n===void 0&&(n=dM()),Ff(t,n)},nE=function(t,n){var s={top:ji(n.marginTop),right:ji(n.marginRight),bottom:ji(n.marginBottom),left:ji(n.marginLeft)},o={top:ji(n.paddingTop),right:ji(n.paddingRight),bottom:ji(n.paddingBottom),left:ji(n.paddingLeft)},l={top:ji(n.borderTopWidth),right:ji(n.borderRightWidth),bottom:ji(n.borderBottomWidth),left:ji(n.borderLeftWidth)};return ty({borderBox:t,margin:s,padding:o,border:l})},rE=function(t){var n=t.getBoundingClientRect(),s=window.getComputedStyle(t);return nE(n,s)},Ju=function(t){var n=[],s=null,o=function(){for(var u=arguments.length,f=new Array(u),m=0;m<u;m++)f[m]=arguments[m];n=f,!s&&(s=requestAnimationFrame(function(){s=null,t.apply(void 0,n)}))};return o.cancel=function(){s&&(cancelAnimationFrame(s),s=null)},o};function qf(){return qf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},qf.apply(null,arguments)}function iE(e,t){}iE.bind(null,"warn");iE.bind(null,"error");function Za(){}function hM(e,t){return{...e,...t}}function Di(e,t,n){const s=t.map(o=>{const l=hM(n,o.options);return e.addEventListener(o.eventName,o.fn,l),function(){e.removeEventListener(o.eventName,o.fn,l)}});return function(){s.forEach(l=>{l()})}}const fM="Invariant failed";class Zf extends Error{}Zf.prototype.toString=function(){return this.message};function $e(e,t){throw new Zf(fM)}class mM extends nn.Component{constructor(...t){super(...t),this.callbacks=null,this.unbind=Za,this.onWindowError=n=>{const s=this.getCallbacks();s.isDragging()&&s.tryAbort(),n.error instanceof Zf&&n.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=n=>{this.callbacks=n}}componentDidMount(){this.unbind=Di(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(t){if(t instanceof Zf){this.setState({});return}throw t}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}}const pM=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,Vf=e=>e+1,gM=e=>`
  You have lifted an item in position ${Vf(e.source.index)}
`,sE=(e,t)=>{const n=e.droppableId===t.droppableId,s=Vf(e.index),o=Vf(t.index);return n?`
      You have moved the item from position ${s}
      to position ${o}
    `:`
    You have moved the item from position ${s}
    in list ${e.droppableId}
    to list ${t.droppableId}
    in position ${o}
  `},aE=(e,t,n)=>t.droppableId===n.droppableId?`
      The item ${e}
      has been combined with ${n.draggableId}`:`
      The item ${e}
      in list ${t.droppableId}
      has been combined with ${n.draggableId}
      in list ${n.droppableId}
    `,bM=e=>{const t=e.destination;if(t)return sE(e.source,t);const n=e.combine;return n?aE(e.draggableId,e.source,n):"You are over an area that cannot be dropped on"},Lw=e=>`
  The item has returned to its starting position
  of ${Vf(e.index)}
`,yM=e=>{if(e.reason==="CANCEL")return`
      Movement cancelled.
      ${Lw(e.source)}
    `;const t=e.destination,n=e.combine;return t?`
      You have dropped the item.
      ${sE(e.source,t)}
    `:n?`
      You have dropped the item.
      ${aE(e.draggableId,e.source,n)}
    `:`
    The item has been dropped while not over a drop area.
    ${Lw(e.source)}
  `},Lf={dragHandleUsageInstructions:pM,onDragStart:gM,onDragUpdate:bM,onDragEnd:yM};function vM(e,t){return!!(e===t||Number.isNaN(e)&&Number.isNaN(t))}function oE(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!vM(e[n],t[n]))return!1;return!0}function kt(e,t){const n=P.useState(()=>({inputs:t,result:e()}))[0],s=P.useRef(!0),o=P.useRef(n),u=s.current||!!(t&&o.current.inputs&&oE(t,o.current.inputs))?o.current:{inputs:t,result:e()};return P.useEffect(()=>{s.current=!1,o.current=u},[u]),u.result}function Je(e,t){return kt(()=>e,t)}const Kn={x:0,y:0},sr=(e,t)=>({x:e.x+t.x,y:e.y+t.y}),li=(e,t)=>({x:e.x-t.x,y:e.y-t.y}),Va=(e,t)=>e.x===t.x&&e.y===t.y,Tc=e=>({x:e.x!==0?-e.x:0,y:e.y!==0?-e.y:0}),al=(e,t,n=0)=>e==="x"?{x:t,y:n}:{x:n,y:t},Qu=(e,t)=>Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2),Bw=(e,t)=>Math.min(...t.map(n=>Qu(e,n))),lE=e=>t=>({x:e(t.x),y:e(t.y)});var _M=(e,t)=>{const n=is({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return n.width<=0||n.height<=0?null:n};const gd=(e,t)=>({top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}),Pw=e=>[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}],xM={top:0,right:0,bottom:0,left:0},wM=(e,t)=>t?gd(e,t.scroll.diff.displacement):e,SM=(e,t,n)=>n&&n.increasedBy?{...e,[t.end]:e[t.end]+n.increasedBy[t.line]}:e,EM=(e,t)=>t&&t.shouldClipSubject?_M(t.pageMarginBox,e):is(e);var bc=({page:e,withPlaceholder:t,axis:n,frame:s})=>{const o=wM(e.marginBox,s),l=SM(o,n,t),u=EM(l,s);return{page:e,withPlaceholder:t,active:u}},ny=(e,t)=>{e.frame||$e();const n=e.frame,s=li(t,n.scroll.initial),o=Tc(s),l={...n,scroll:{initial:n.scroll.initial,current:t,diff:{value:s,displacement:o},max:n.scroll.max}},u=bc({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:l});return{...e,frame:l,subject:u}};function Vn(e,t=oE){let n=null;function s(...o){if(n&&n.lastThis===this&&t(o,n.lastArgs))return n.lastResult;const l=e.apply(this,o);return n={lastResult:l,lastArgs:o,lastThis:this},l}return s.clear=function(){n=null},s}const cE=Vn(e=>e.reduce((t,n)=>(t[n.descriptor.id]=n,t),{})),uE=Vn(e=>e.reduce((t,n)=>(t[n.descriptor.id]=n,t),{})),Em=Vn(e=>Object.values(e)),TM=Vn(e=>Object.values(e));var kc=Vn((e,t)=>TM(t).filter(s=>e===s.descriptor.droppableId).sort((s,o)=>s.descriptor.index-o.descriptor.index));function ry(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function Tm(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var km=Vn((e,t)=>t.filter(n=>n.descriptor.id!==e.descriptor.id)),kM=({isMovingForward:e,draggable:t,destination:n,insideDestination:s,previousImpact:o})=>{if(!n.isCombineEnabled||!ry(o))return null;function u(S){const T={type:"COMBINE",combine:{draggableId:S,droppableId:n.descriptor.id}};return{...o,at:T}}const f=o.displaced.all,m=f.length?f[0]:null;if(e)return m?u(m):null;const p=km(t,s);if(!m){if(!p.length)return null;const S=p[p.length-1];return u(S.descriptor.id)}const b=p.findIndex(S=>S.descriptor.id===m);b===-1&&$e();const _=b-1;if(_<0)return null;const x=p[_];return u(x.descriptor.id)},Ac=(e,t)=>e.descriptor.droppableId===t.descriptor.id;const dE={point:Kn,value:0},ed={invisible:{},visible:{},all:[]},AM={displaced:ed,displacedBy:dE,at:null};var Bi=(e,t)=>n=>e<=n&&n<=t,hE=e=>{const t=Bi(e.top,e.bottom),n=Bi(e.left,e.right);return s=>{if(t(s.top)&&t(s.bottom)&&n(s.left)&&n(s.right))return!0;const l=t(s.top)||t(s.bottom),u=n(s.left)||n(s.right);if(l&&u)return!0;const m=s.top<e.top&&s.bottom>e.bottom,p=s.left<e.left&&s.right>e.right;return m&&p?!0:m&&u||p&&l}},jM=e=>{const t=Bi(e.top,e.bottom),n=Bi(e.left,e.right);return s=>t(s.top)&&t(s.bottom)&&n(s.left)&&n(s.right)};const iy={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},fE={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};var NM=e=>t=>{const n=Bi(t.top,t.bottom),s=Bi(t.left,t.right);return o=>e===iy?n(o.top)&&n(o.bottom):s(o.left)&&s(o.right)};const OM=(e,t)=>{const n=t.frame?t.frame.scroll.diff.displacement:Kn;return gd(e,n)},DM=(e,t,n)=>t.subject.active?n(t.subject.active)(e):!1,MM=(e,t,n)=>n(t)(e),sy=({target:e,destination:t,viewport:n,withDroppableDisplacement:s,isVisibleThroughFrameFn:o})=>{const l=s?OM(e,t):e;return DM(l,t,o)&&MM(l,n,o)},CM=e=>sy({...e,isVisibleThroughFrameFn:hE}),mE=e=>sy({...e,isVisibleThroughFrameFn:jM}),RM=e=>sy({...e,isVisibleThroughFrameFn:NM(e.destination.axis)}),LM=(e,t,n)=>{if(typeof n=="boolean")return n;if(!t)return!0;const{invisible:s,visible:o}=t;if(s[e])return!1;const l=o[e];return l?l.shouldAnimate:!0};function BM(e,t){const n=e.page.marginBox,s={top:t.point.y,right:0,bottom:0,left:t.point.x};return is(ey(n,s))}function td({afterDragging:e,destination:t,displacedBy:n,viewport:s,forceShouldAnimate:o,last:l}){return e.reduce(function(f,m){const p=BM(m,n),b=m.descriptor.id;if(f.all.push(b),!CM({target:p,destination:t,viewport:s,withDroppableDisplacement:!0}))return f.invisible[m.descriptor.id]=!0,f;const x=LM(b,l,o),S={draggableId:b,shouldAnimate:x};return f.visible[b]=S,f},{all:[],visible:{},invisible:{}})}function PM(e,t){if(!e.length)return 0;const n=e[e.length-1].descriptor.index;return t.inHomeList?n:n+1}function $w({insideDestination:e,inHomeList:t,displacedBy:n,destination:s}){const o=PM(e,{inHomeList:t});return{displaced:ed,displacedBy:n,at:{type:"REORDER",destination:{droppableId:s.descriptor.id,index:o}}}}function Kf({draggable:e,insideDestination:t,destination:n,viewport:s,displacedBy:o,last:l,index:u,forceShouldAnimate:f}){const m=Ac(e,n);if(u==null)return $w({insideDestination:t,inHomeList:m,displacedBy:o,destination:n});const p=t.find(T=>T.descriptor.index===u);if(!p)return $w({insideDestination:t,inHomeList:m,displacedBy:o,destination:n});const b=km(e,t),_=t.indexOf(p),x=b.slice(_);return{displaced:td({afterDragging:x,destination:n,displacedBy:o,last:l,viewport:s.frame,forceShouldAnimate:f}),displacedBy:o,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:u}}}}function Ka(e,t){return!!t.effected[e]}var $M=({isMovingForward:e,destination:t,draggables:n,combine:s,afterCritical:o})=>{if(!t.isCombineEnabled)return null;const l=s.draggableId,f=n[l].descriptor.index;return Ka(l,o)?e?f:f-1:e?f+1:f},IM=({isMovingForward:e,isInHomeList:t,insideDestination:n,location:s})=>{if(!n.length)return null;const o=s.index,l=e?o+1:o-1,u=n[0].descriptor.index,f=n[n.length-1].descriptor.index,m=t?f:f+1;return l<u||l>m?null:l},zM=({isMovingForward:e,isInHomeList:t,draggable:n,draggables:s,destination:o,insideDestination:l,previousImpact:u,viewport:f,afterCritical:m})=>{const p=u.at;if(p||$e(),p.type==="REORDER"){const _=IM({isMovingForward:e,isInHomeList:t,location:p.destination,insideDestination:l});return _==null?null:Kf({draggable:n,insideDestination:l,destination:o,viewport:f,last:u.displaced,displacedBy:u.displacedBy,index:_})}const b=$M({isMovingForward:e,destination:o,displaced:u.displaced,draggables:s,combine:p.combine,afterCritical:m});return b==null?null:Kf({draggable:n,insideDestination:l,destination:o,viewport:f,last:u.displaced,displacedBy:u.displacedBy,index:b})},UM=({displaced:e,afterCritical:t,combineWith:n,displacedBy:s})=>{const o=!!(e.visible[n]||e.invisible[n]);return Ka(n,t)?o?Kn:Tc(s.point):o?s.point:Kn},HM=({afterCritical:e,impact:t,draggables:n})=>{const s=Tm(t);s||$e();const o=s.draggableId,l=n[o].page.borderBox.center,u=UM({displaced:t.displaced,afterCritical:e,combineWith:o,displacedBy:t.displacedBy});return sr(l,u)};const pE=(e,t)=>t.margin[e.start]+t.borderBox[e.size]/2,GM=(e,t)=>t.margin[e.end]+t.borderBox[e.size]/2,ay=(e,t,n)=>t[e.crossAxisStart]+n.margin[e.crossAxisStart]+n.borderBox[e.crossAxisSize]/2,Iw=({axis:e,moveRelativeTo:t,isMoving:n})=>al(e.line,t.marginBox[e.end]+pE(e,n),ay(e,t.marginBox,n)),zw=({axis:e,moveRelativeTo:t,isMoving:n})=>al(e.line,t.marginBox[e.start]-GM(e,n),ay(e,t.marginBox,n)),FM=({axis:e,moveInto:t,isMoving:n})=>al(e.line,t.contentBox[e.start]+pE(e,n),ay(e,t.contentBox,n));var YM=({impact:e,draggable:t,draggables:n,droppable:s,afterCritical:o})=>{const l=kc(s.descriptor.id,n),u=t.page,f=s.axis;if(!l.length)return FM({axis:f,moveInto:s.page,isMoving:u});const{displaced:m,displacedBy:p}=e,b=m.all[0];if(b){const x=n[b];if(Ka(b,o))return zw({axis:f,moveRelativeTo:x.page,isMoving:u});const S=Ff(x.page,p.point);return zw({axis:f,moveRelativeTo:S,isMoving:u})}const _=l[l.length-1];if(_.descriptor.id===t.descriptor.id)return u.borderBox.center;if(Ka(_.descriptor.id,o)){const x=Ff(_.page,Tc(o.displacedBy.point));return Iw({axis:f,moveRelativeTo:x,isMoving:u})}return Iw({axis:f,moveRelativeTo:_.page,isMoving:u})},lb=(e,t)=>{const n=e.frame;return n?sr(t,n.scroll.diff.displacement):t};const qM=({impact:e,draggable:t,droppable:n,draggables:s,afterCritical:o})=>{const l=t.page.borderBox.center,u=e.at;return!n||!u?l:u.type==="REORDER"?YM({impact:e,draggable:t,draggables:s,droppable:n,afterCritical:o}):HM({impact:e,draggables:s,afterCritical:o})};var Am=e=>{const t=qM(e),n=e.droppable;return n?lb(n,t):t},gE=(e,t)=>{const n=li(t,e.scroll.initial),s=Tc(n);return{frame:is({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:n,displacement:s}}}};function Uw(e,t){return e.map(n=>t[n])}function ZM(e,t){for(let n=0;n<t.length;n++){const s=t[n].visible[e];if(s)return s}return null}var VM=({impact:e,viewport:t,destination:n,draggables:s,maxScrollChange:o})=>{const l=gE(t,sr(t.scroll.current,o)),u=n.frame?ny(n,sr(n.frame.scroll.current,o)):n,f=e.displaced,m=td({afterDragging:Uw(f.all,s),destination:n,displacedBy:e.displacedBy,viewport:l.frame,last:f,forceShouldAnimate:!1}),p=td({afterDragging:Uw(f.all,s),destination:u,displacedBy:e.displacedBy,viewport:t.frame,last:f,forceShouldAnimate:!1}),b={},_={},x=[f,m,p];return f.all.forEach(T=>{const k=ZM(T,x);if(k){_[T]=k;return}b[T]=!0}),{...e,displaced:{all:f.all,invisible:b,visible:_}}},KM=(e,t)=>sr(e.scroll.diff.displacement,t),oy=({pageBorderBoxCenter:e,draggable:t,viewport:n})=>{const s=KM(n,e),o=li(s,t.page.borderBox.center);return sr(t.client.borderBox.center,o)},bE=({draggable:e,destination:t,newPageBorderBoxCenter:n,viewport:s,withDroppableDisplacement:o,onlyOnMainAxis:l=!1})=>{const u=li(n,e.page.borderBox.center),m={target:gd(e.page.borderBox,u),destination:t,withDroppableDisplacement:o,viewport:s};return l?RM(m):mE(m)},WM=({isMovingForward:e,draggable:t,destination:n,draggables:s,previousImpact:o,viewport:l,previousPageBorderBoxCenter:u,previousClientSelection:f,afterCritical:m})=>{if(!n.isEnabled)return null;const p=kc(n.descriptor.id,s),b=Ac(t,n),_=kM({isMovingForward:e,draggable:t,destination:n,insideDestination:p,previousImpact:o})||zM({isMovingForward:e,isInHomeList:b,draggable:t,draggables:s,destination:n,insideDestination:p,previousImpact:o,viewport:l,afterCritical:m});if(!_)return null;const x=Am({impact:_,draggable:t,droppable:n,draggables:s,afterCritical:m});if(bE({draggable:t,destination:n,newPageBorderBoxCenter:x,viewport:l.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:oy({pageBorderBoxCenter:x,draggable:t,viewport:l}),impact:_,scrollJumpRequest:null};const T=li(x,u),k=VM({impact:_,viewport:l,destination:n,draggables:s,maxScrollChange:T});return{clientSelection:f,impact:k,scrollJumpRequest:T}};const wr=e=>{const t=e.subject.active;return t||$e(),t};var XM=({isMovingForward:e,pageBorderBoxCenter:t,source:n,droppables:s,viewport:o})=>{const l=n.subject.active;if(!l)return null;const u=n.axis,f=Bi(l[u.start],l[u.end]),m=Em(s).filter(b=>b!==n).filter(b=>b.isEnabled).filter(b=>!!b.subject.active).filter(b=>hE(o.frame)(wr(b))).filter(b=>{const _=wr(b);return e?l[u.crossAxisEnd]<_[u.crossAxisEnd]:_[u.crossAxisStart]<l[u.crossAxisStart]}).filter(b=>{const _=wr(b),x=Bi(_[u.start],_[u.end]);return f(_[u.start])||f(_[u.end])||x(l[u.start])||x(l[u.end])}).sort((b,_)=>{const x=wr(b)[u.crossAxisStart],S=wr(_)[u.crossAxisStart];return e?x-S:S-x}).filter((b,_,x)=>wr(b)[u.crossAxisStart]===wr(x[0])[u.crossAxisStart]);if(!m.length)return null;if(m.length===1)return m[0];const p=m.filter(b=>Bi(wr(b)[u.start],wr(b)[u.end])(t[u.line]));return p.length===1?p[0]:p.length>1?p.sort((b,_)=>wr(b)[u.start]-wr(_)[u.start])[0]:m.sort((b,_)=>{const x=Bw(t,Pw(wr(b))),S=Bw(t,Pw(wr(_)));return x!==S?x-S:wr(b)[u.start]-wr(_)[u.start]})[0]};const Hw=(e,t)=>{const n=e.page.borderBox.center;return Ka(e.descriptor.id,t)?li(n,t.displacedBy.point):n},JM=(e,t)=>{const n=e.page.borderBox;return Ka(e.descriptor.id,t)?gd(n,Tc(t.displacedBy.point)):n};var QM=({pageBorderBoxCenter:e,viewport:t,destination:n,insideDestination:s,afterCritical:o})=>s.filter(u=>mE({target:JM(u,o),destination:n,viewport:t.frame,withDroppableDisplacement:!0})).sort((u,f)=>{const m=Qu(e,lb(n,Hw(u,o))),p=Qu(e,lb(n,Hw(f,o)));return m<p?-1:p<m?1:u.descriptor.index-f.descriptor.index})[0]||null,bd=Vn(function(t,n){const s=n[t.line];return{value:s,point:al(t.line,s)}});const eC=(e,t,n)=>{const s=e.axis;if(e.descriptor.mode==="virtual")return al(s.line,t[s.line]);const o=e.subject.page.contentBox[s.size],m=kc(e.descriptor.id,n).reduce((p,b)=>p+b.client.marginBox[s.size],0)+t[s.line]-o;return m<=0?null:al(s.line,m)},yE=(e,t)=>({...e,scroll:{...e.scroll,max:t}}),vE=(e,t,n)=>{const s=e.frame;Ac(t,e)&&$e(),e.subject.withPlaceholder&&$e();const o=bd(e.axis,t.displaceBy).point,l=eC(e,o,n),u={placeholderSize:o,increasedBy:l,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!s){const b=bc({page:e.subject.page,withPlaceholder:u,axis:e.axis,frame:e.frame});return{...e,subject:b}}const f=l?sr(s.scroll.max,l):s.scroll.max,m=yE(s,f),p=bc({page:e.subject.page,withPlaceholder:u,axis:e.axis,frame:m});return{...e,subject:p,frame:m}},tC=e=>{const t=e.subject.withPlaceholder;t||$e();const n=e.frame;if(!n){const u=bc({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null});return{...e,subject:u}}const s=t.oldFrameMaxScroll;s||$e();const o=yE(n,s),l=bc({page:e.subject.page,axis:e.axis,frame:o,withPlaceholder:null});return{...e,subject:l,frame:o}};var nC=({previousPageBorderBoxCenter:e,moveRelativeTo:t,insideDestination:n,draggable:s,draggables:o,destination:l,viewport:u,afterCritical:f})=>{if(!t){if(n.length)return null;const _={displaced:ed,displacedBy:dE,at:{type:"REORDER",destination:{droppableId:l.descriptor.id,index:0}}},x=Am({impact:_,draggable:s,droppable:l,draggables:o,afterCritical:f}),S=Ac(s,l)?l:vE(l,s,o);return bE({draggable:s,destination:S,newPageBorderBoxCenter:x,viewport:u.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?_:null}const m=e[l.axis.line]<=t.page.borderBox.center[l.axis.line],p=(()=>{const _=t.descriptor.index;return t.descriptor.id===s.descriptor.id||m?_:_+1})(),b=bd(l.axis,s.displaceBy);return Kf({draggable:s,insideDestination:n,destination:l,viewport:u,displacedBy:b,last:ed,index:p})},rC=({isMovingForward:e,previousPageBorderBoxCenter:t,draggable:n,isOver:s,draggables:o,droppables:l,viewport:u,afterCritical:f})=>{const m=XM({isMovingForward:e,pageBorderBoxCenter:t,source:s,droppables:l,viewport:u});if(!m)return null;const p=kc(m.descriptor.id,o),b=QM({pageBorderBoxCenter:t,viewport:u,destination:m,insideDestination:p,afterCritical:f}),_=nC({previousPageBorderBoxCenter:t,destination:m,draggable:n,draggables:o,moveRelativeTo:b,insideDestination:p,viewport:u,afterCritical:f});if(!_)return null;const x=Am({impact:_,draggable:n,droppable:m,draggables:o,afterCritical:f});return{clientSelection:oy({pageBorderBoxCenter:x,draggable:n,viewport:u}),impact:_,scrollJumpRequest:null}},ci=e=>{const t=e.at;return t?t.type==="REORDER"?t.destination.droppableId:t.combine.droppableId:null};const iC=(e,t)=>{const n=ci(e);return n?t[n]:null};var sC=({state:e,type:t})=>{const n=iC(e.impact,e.dimensions.droppables),s=!!n,o=e.dimensions.droppables[e.critical.droppable.id],l=n||o,u=l.axis.direction,f=u==="vertical"&&(t==="MOVE_UP"||t==="MOVE_DOWN")||u==="horizontal"&&(t==="MOVE_LEFT"||t==="MOVE_RIGHT");if(f&&!s)return null;const m=t==="MOVE_DOWN"||t==="MOVE_RIGHT",p=e.dimensions.draggables[e.critical.draggable.id],b=e.current.page.borderBoxCenter,{draggables:_,droppables:x}=e.dimensions;return f?WM({isMovingForward:m,previousPageBorderBoxCenter:b,draggable:p,destination:l,draggables:_,viewport:e.viewport,previousClientSelection:e.current.client.selection,previousImpact:e.impact,afterCritical:e.afterCritical}):rC({isMovingForward:m,previousPageBorderBoxCenter:b,draggable:p,isOver:l,draggables:_,droppables:x,viewport:e.viewport,afterCritical:e.afterCritical})};function Wo(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function _E(e){const t=Bi(e.top,e.bottom),n=Bi(e.left,e.right);return function(o){return t(o.y)&&n(o.x)}}function aC(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}function oC({pageBorderBox:e,draggable:t,candidates:n}){const s=t.page.borderBox.center,o=n.map(l=>{const u=l.axis,f=al(l.axis.line,e.center[u.line],l.page.borderBox.center[u.crossAxisLine]);return{id:l.descriptor.id,distance:Qu(s,f)}}).sort((l,u)=>u.distance-l.distance);return o[0]?o[0].id:null}function lC({pageBorderBox:e,draggable:t,droppables:n}){const s=Em(n).filter(o=>{if(!o.isEnabled)return!1;const l=o.subject.active;if(!l||!aC(e,l))return!1;if(_E(l)(e.center))return!0;const u=o.axis,f=l.center[u.crossAxisLine],m=e[u.crossAxisStart],p=e[u.crossAxisEnd],b=Bi(l[u.crossAxisStart],l[u.crossAxisEnd]),_=b(m),x=b(p);return!_&&!x?!0:_?m<f:p>f});return s.length?s.length===1?s[0].descriptor.id:oC({pageBorderBox:e,draggable:t,candidates:s}):null}const xE=(e,t)=>is(gd(e,t));var cC=(e,t)=>{const n=e.frame;return n?xE(t,n.scroll.diff.value):t};function wE({displaced:e,id:t}){return!!(e.visible[t]||e.invisible[t])}function uC({draggable:e,closest:t,inHomeList:n}){return t?n&&t.descriptor.index>e.descriptor.index?t.descriptor.index-1:t.descriptor.index:null}var dC=({pageBorderBoxWithDroppableScroll:e,draggable:t,destination:n,insideDestination:s,last:o,viewport:l,afterCritical:u})=>{const f=n.axis,m=bd(n.axis,t.displaceBy),p=m.value,b=e[f.start],_=e[f.end],S=km(t,s).find(k=>{const A=k.descriptor.id,M=k.page.borderBox.center[f.line],R=Ka(A,u),N=wE({displaced:o,id:A});return R?N?_<=M:b<M-p:N?_<=M+p:b<M})||null,T=uC({draggable:t,closest:S,inHomeList:Ac(t,n)});return Kf({draggable:t,insideDestination:s,destination:n,viewport:l,last:o,displacedBy:m,index:T})};const hC=4;var fC=({draggable:e,pageBorderBoxWithDroppableScroll:t,previousImpact:n,destination:s,insideDestination:o,afterCritical:l})=>{if(!s.isCombineEnabled)return null;const u=s.axis,f=bd(s.axis,e.displaceBy),m=f.value,p=t[u.start],b=t[u.end],x=km(e,o).find(T=>{const k=T.descriptor.id,A=T.page.borderBox,R=A[u.size]/hC,N=Ka(k,l),D=wE({displaced:n.displaced,id:k});return N?D?b>A[u.start]+R&&b<A[u.end]-R:p>A[u.start]-m+R&&p<A[u.end]-m-R:D?b>A[u.start]+m+R&&b<A[u.end]+m-R:p>A[u.start]+R&&p<A[u.end]-R});return x?{displacedBy:f,displaced:n.displaced,at:{type:"COMBINE",combine:{draggableId:x.descriptor.id,droppableId:s.descriptor.id}}}:null},SE=({pageOffset:e,draggable:t,draggables:n,droppables:s,previousImpact:o,viewport:l,afterCritical:u})=>{const f=xE(t.page.borderBox,e),m=lC({pageBorderBox:f,draggable:t,droppables:s});if(!m)return AM;const p=s[m],b=kc(p.descriptor.id,n),_=cC(p,f);return fC({pageBorderBoxWithDroppableScroll:_,draggable:t,previousImpact:o,destination:p,insideDestination:b,afterCritical:u})||dC({pageBorderBoxWithDroppableScroll:_,draggable:t,destination:p,insideDestination:b,last:o.displaced,viewport:l,afterCritical:u})},ly=(e,t)=>({...e,[t.descriptor.id]:t});const mC=({previousImpact:e,impact:t,droppables:n})=>{const s=ci(e),o=ci(t);if(!s||s===o)return n;const l=n[s];if(!l.subject.withPlaceholder)return n;const u=tC(l);return ly(n,u)};var pC=({draggable:e,draggables:t,droppables:n,previousImpact:s,impact:o})=>{const l=mC({previousImpact:s,impact:o,droppables:n}),u=ci(o);if(!u)return l;const f=n[u];if(Ac(e,f)||f.subject.withPlaceholder)return l;const m=vE(f,e,t);return ly(l,m)},Vu=({state:e,clientSelection:t,dimensions:n,viewport:s,impact:o,scrollJumpRequest:l})=>{const u=s||e.viewport,f=n||e.dimensions,m=t||e.current.client.selection,p=li(m,e.initial.client.selection),b={offset:p,selection:m,borderBoxCenter:sr(e.initial.client.borderBoxCenter,p)},_={selection:sr(b.selection,u.scroll.current),borderBoxCenter:sr(b.borderBoxCenter,u.scroll.current),offset:sr(b.offset,u.scroll.diff.value)},x={client:b,page:_};if(e.phase==="COLLECTING")return{...e,dimensions:f,viewport:u,current:x};const S=f.draggables[e.critical.draggable.id],T=o||SE({pageOffset:_.offset,draggable:S,draggables:f.draggables,droppables:f.droppables,previousImpact:e.impact,viewport:u,afterCritical:e.afterCritical}),k=pC({draggable:S,impact:T,previousImpact:e.impact,draggables:f.draggables,droppables:f.droppables});return{...e,current:x,dimensions:{draggables:f.draggables,droppables:k},impact:T,viewport:u,scrollJumpRequest:l||null,forceShouldAnimate:l?!1:null}};function gC(e,t){return e.map(n=>t[n])}var EE=({impact:e,viewport:t,draggables:n,destination:s,forceShouldAnimate:o})=>{const l=e.displaced,u=gC(l.all,n),f=td({afterDragging:u,destination:s,displacedBy:e.displacedBy,viewport:t.frame,forceShouldAnimate:o,last:l});return{...e,displaced:f}},TE=({impact:e,draggable:t,droppable:n,draggables:s,viewport:o,afterCritical:l})=>{const u=Am({impact:e,draggable:t,draggables:s,droppable:n,afterCritical:l});return oy({pageBorderBoxCenter:u,draggable:t,viewport:o})},kE=({state:e,dimensions:t,viewport:n})=>{e.movementMode!=="SNAP"&&$e();const s=e.impact,o=n||e.viewport,l=t||e.dimensions,{draggables:u,droppables:f}=l,m=u[e.critical.draggable.id],p=ci(s);p||$e();const b=f[p],_=EE({impact:s,viewport:o,destination:b,draggables:u}),x=TE({impact:_,draggable:m,droppable:b,draggables:u,viewport:o,afterCritical:e.afterCritical});return Vu({impact:_,clientSelection:x,state:e,dimensions:l,viewport:o})},bC=e=>({index:e.index,droppableId:e.droppableId}),AE=({draggable:e,home:t,draggables:n,viewport:s})=>{const o=bd(t.axis,e.displaceBy),l=kc(t.descriptor.id,n),u=l.indexOf(e);u===-1&&$e();const f=l.slice(u+1),m=f.reduce((x,S)=>(x[S.descriptor.id]=!0,x),{}),p={inVirtualList:t.descriptor.mode==="virtual",displacedBy:o,effected:m};return{impact:{displaced:td({afterDragging:f,destination:t,displacedBy:o,last:null,viewport:s.frame,forceShouldAnimate:!1}),displacedBy:o,at:{type:"REORDER",destination:bC(e.descriptor)}},afterCritical:p}},yC=(e,t)=>({draggables:e.draggables,droppables:ly(e.droppables,t)}),vC=({draggable:e,offset:t,initialWindowScroll:n})=>{const s=Ff(e.client,t),o=Yf(s,n);return{...e,placeholder:{...e.placeholder,client:s},client:s,page:o}},_C=e=>{const t=e.frame;return t||$e(),t},xC=({additions:e,updatedDroppables:t,viewport:n})=>{const s=n.scroll.diff.value;return e.map(o=>{const l=o.descriptor.droppableId,u=t[l],m=_C(u).scroll.diff.value,p=sr(s,m);return vC({draggable:o,offset:p,initialWindowScroll:n.scroll.initial})})},wC=({state:e,published:t})=>{const n=t.modified.map(M=>{const R=e.dimensions.droppables[M.droppableId];return ny(R,M.scroll)}),s={...e.dimensions.droppables,...cE(n)},o=uE(xC({additions:t.additions,updatedDroppables:s,viewport:e.viewport})),l={...e.dimensions.draggables,...o};t.removals.forEach(M=>{delete l[M]});const u={droppables:s,draggables:l},f=ci(e.impact),m=f?u.droppables[f]:null,p=u.draggables[e.critical.draggable.id],b=u.droppables[e.critical.droppable.id],{impact:_,afterCritical:x}=AE({draggable:p,home:b,draggables:l,viewport:e.viewport}),S=m&&m.isCombineEnabled?e.impact:_,T=SE({pageOffset:e.current.page.offset,draggable:u.draggables[e.critical.draggable.id],draggables:u.draggables,droppables:u.droppables,previousImpact:S,viewport:e.viewport,afterCritical:x}),k={...e,phase:"DRAGGING",impact:T,onLiftImpact:_,dimensions:u,afterCritical:x,forceShouldAnimate:!1};return e.phase==="COLLECTING"?k:{...k,phase:"DROP_PENDING",reason:e.reason,isWaiting:!1}};const cb=e=>e.movementMode==="SNAP",J0=(e,t,n)=>{const s=yC(e.dimensions,t);return!cb(e)||n?Vu({state:e,dimensions:s}):kE({state:e,dimensions:s})};function Q0(e){return e.isDragging&&e.movementMode==="SNAP"?{...e,scrollJumpRequest:null}:e}const Gw={phase:"IDLE",completed:null,shouldFlush:!1};var SC=(e=Gw,t)=>{if(t.type==="FLUSH")return{...Gw,shouldFlush:!0};if(t.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&$e();const{critical:n,clientSelection:s,viewport:o,dimensions:l,movementMode:u}=t.payload,f=l.draggables[n.draggable.id],m=l.droppables[n.droppable.id],p={selection:s,borderBoxCenter:f.client.borderBox.center,offset:Kn},b={client:p,page:{selection:sr(p.selection,o.scroll.initial),borderBoxCenter:sr(p.selection,o.scroll.initial),offset:sr(p.selection,o.scroll.diff.value)}},_=Em(l.droppables).every(k=>!k.isFixedOnPage),{impact:x,afterCritical:S}=AE({draggable:f,home:m,draggables:l.draggables,viewport:o});return{phase:"DRAGGING",isDragging:!0,critical:n,movementMode:u,dimensions:l,initial:b,current:b,isWindowScrollAllowed:_,impact:x,afterCritical:S,onLiftImpact:x,viewport:o,scrollJumpRequest:null,forceShouldAnimate:null}}if(t.type==="COLLECTION_STARTING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"?e:(e.phase!=="DRAGGING"&&$e(),{...e,phase:"COLLECTING"});if(t.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||$e(),wC({state:e,published:t.payload});if(t.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;Wo(e)||$e();const{client:n}=t.payload;return Va(n,e.current.client.selection)?e:Vu({state:e,clientSelection:n,impact:cb(e)?e.impact:null})}if(t.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return Q0(e);Wo(e)||$e();const{id:n,newScroll:s}=t.payload,o=e.dimensions.droppables[n];if(!o)return e;const l=ny(o,s);return J0(e,l,!1)}if(t.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;Wo(e)||$e();const{id:n,isEnabled:s}=t.payload,o=e.dimensions.droppables[n];o||$e(),o.isEnabled===s&&$e();const l={...o,isEnabled:s};return J0(e,l,!0)}if(t.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;Wo(e)||$e();const{id:n,isCombineEnabled:s}=t.payload,o=e.dimensions.droppables[n];o||$e(),o.isCombineEnabled===s&&$e();const l={...o,isCombineEnabled:s};return J0(e,l,!0)}if(t.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;Wo(e)||$e(),e.isWindowScrollAllowed||$e();const n=t.payload.newScroll;if(Va(e.viewport.scroll.current,n))return Q0(e);const s=gE(e.viewport,n);return cb(e)?kE({state:e,viewport:s}):Vu({state:e,viewport:s})}if(t.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!Wo(e))return e;const n=t.payload.maxScroll;if(Va(n,e.viewport.scroll.max))return e;const s={...e.viewport,scroll:{...e.viewport.scroll,max:n}};return{...e,viewport:s}}if(t.type==="MOVE_UP"||t.type==="MOVE_DOWN"||t.type==="MOVE_LEFT"||t.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&$e();const n=sC({state:e,type:t.type});return n?Vu({state:e,impact:n.impact,clientSelection:n.clientSelection,scrollJumpRequest:n.scrollJumpRequest}):e}if(t.type==="DROP_PENDING"){const n=t.payload.reason;return e.phase!=="COLLECTING"&&$e(),{...e,phase:"DROP_PENDING",isWaiting:!0,reason:n}}if(t.type==="DROP_ANIMATE"){const{completed:n,dropDuration:s,newHomeClientOffset:o}=t.payload;return e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||$e(),{phase:"DROP_ANIMATING",completed:n,dropDuration:s,newHomeClientOffset:o,dimensions:e.dimensions}}if(t.type==="DROP_COMPLETE"){const{completed:n}=t.payload;return{phase:"IDLE",completed:n,shouldFlush:!1}}return e};function Bt(e,t){return e instanceof Object&&"type"in e&&e.type===t}const EC=e=>({type:"BEFORE_INITIAL_CAPTURE",payload:e}),TC=e=>({type:"LIFT",payload:e}),kC=e=>({type:"INITIAL_PUBLISH",payload:e}),AC=e=>({type:"PUBLISH_WHILE_DRAGGING",payload:e}),jC=()=>({type:"COLLECTION_STARTING",payload:null}),NC=e=>({type:"UPDATE_DROPPABLE_SCROLL",payload:e}),OC=e=>({type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}),DC=e=>({type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}),jE=e=>({type:"MOVE",payload:e}),MC=e=>({type:"MOVE_BY_WINDOW_SCROLL",payload:e}),CC=e=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}),RC=()=>({type:"MOVE_UP",payload:null}),LC=()=>({type:"MOVE_DOWN",payload:null}),BC=()=>({type:"MOVE_RIGHT",payload:null}),PC=()=>({type:"MOVE_LEFT",payload:null}),cy=()=>({type:"FLUSH",payload:null}),$C=e=>({type:"DROP_ANIMATE",payload:e}),uy=e=>({type:"DROP_COMPLETE",payload:e}),NE=e=>({type:"DROP",payload:e}),IC=e=>({type:"DROP_PENDING",payload:e}),OE=()=>({type:"DROP_ANIMATION_FINISHED",payload:null});var zC=e=>({getState:t,dispatch:n})=>s=>o=>{if(!Bt(o,"LIFT")){s(o);return}const{id:l,clientSelection:u,movementMode:f}=o.payload,m=t();m.phase==="DROP_ANIMATING"&&n(uy({completed:m.completed})),t().phase!=="IDLE"&&$e(),n(cy()),n(EC({draggableId:l,movementMode:f}));const b={draggableId:l,scrollOptions:{shouldPublishImmediately:f==="SNAP"}},{critical:_,dimensions:x,viewport:S}=e.startPublishing(b);n(kC({critical:_,dimensions:x,clientSelection:u,movementMode:f,viewport:S}))},UC=e=>()=>t=>n=>{Bt(n,"INITIAL_PUBLISH")&&e.dragging(),Bt(n,"DROP_ANIMATE")&&e.dropping(n.payload.completed.result.reason),(Bt(n,"FLUSH")||Bt(n,"DROP_COMPLETE"))&&e.resting(),t(n)};const dy={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},nd={opacity:{drop:0,combining:.7},scale:{drop:.75}},DE={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},Ho=`${DE.outOfTheWay}s ${dy.outOfTheWay}`,Ku={fluid:`opacity ${Ho}`,snap:`transform ${Ho}, opacity ${Ho}`,drop:e=>{const t=`${e}s ${dy.drop}`;return`transform ${t}, opacity ${t}`},outOfTheWay:`transform ${Ho}`,placeholder:`height ${Ho}, width ${Ho}, margin ${Ho}`},Fw=e=>Va(e,Kn)?void 0:`translate(${e.x}px, ${e.y}px)`,ub={moveTo:Fw,drop:(e,t)=>{const n=Fw(e);if(n)return t?`${n} scale(${nd.scale.drop})`:n}},{minDropTime:db,maxDropTime:ME}=DE,HC=ME-db,Yw=1500,GC=.6;var FC=({current:e,destination:t,reason:n})=>{const s=Qu(e,t);if(s<=0)return db;if(s>=Yw)return ME;const o=s/Yw,l=db+HC*o,u=n==="CANCEL"?l*GC:l;return Number(u.toFixed(2))},YC=({impact:e,draggable:t,dimensions:n,viewport:s,afterCritical:o})=>{const{draggables:l,droppables:u}=n,f=ci(e),m=f?u[f]:null,p=u[t.descriptor.droppableId],b=TE({impact:e,draggable:t,draggables:l,afterCritical:o,droppable:m||p,viewport:s});return li(b,t.client.borderBox.center)},qC=({draggables:e,reason:t,lastImpact:n,home:s,viewport:o,onLiftImpact:l})=>!n.at||t!=="DROP"?{impact:EE({draggables:e,impact:l,destination:s,viewport:o,forceShouldAnimate:!0}),didDropInsideDroppable:!1}:n.at.type==="REORDER"?{impact:n,didDropInsideDroppable:!0}:{impact:{...n,displaced:ed},didDropInsideDroppable:!0};const ZC=({getState:e,dispatch:t})=>n=>s=>{if(!Bt(s,"DROP")){n(s);return}const o=e(),l=s.payload.reason;if(o.phase==="COLLECTING"){t(IC({reason:l}));return}if(o.phase==="IDLE")return;o.phase==="DROP_PENDING"&&o.isWaiting&&$e(),o.phase==="DRAGGING"||o.phase==="DROP_PENDING"||$e();const f=o.critical,m=o.dimensions,p=m.draggables[o.critical.draggable.id],{impact:b,didDropInsideDroppable:_}=qC({reason:l,lastImpact:o.impact,afterCritical:o.afterCritical,onLiftImpact:o.onLiftImpact,home:o.dimensions.droppables[o.critical.droppable.id],viewport:o.viewport,draggables:o.dimensions.draggables}),x=_?ry(b):null,S=_?Tm(b):null,T={index:f.draggable.index,droppableId:f.droppable.id},k={draggableId:p.descriptor.id,type:p.descriptor.type,source:T,reason:l,mode:o.movementMode,destination:x,combine:S},A=YC({impact:b,draggable:p,dimensions:m,viewport:o.viewport,afterCritical:o.afterCritical}),M={critical:o.critical,afterCritical:o.afterCritical,result:k,impact:b};if(!(!Va(o.current.client.offset,A)||!!k.combine)){t(uy({completed:M}));return}const N=FC({current:o.current.client.offset,destination:A,reason:l});t($C({newHomeClientOffset:A,dropDuration:N,completed:M}))};var CE=()=>({x:window.pageXOffset,y:window.pageYOffset});function VC(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:t=>{t.target!==window&&t.target!==window.document||e()}}}function KC({onWindowScroll:e}){function t(){e(CE())}const n=Ju(t),s=VC(n);let o=Za;function l(){return o!==Za}function u(){l()&&$e(),o=Di(window,[s])}function f(){l()||$e(),n.cancel(),o(),o=Za}return{start:u,stop:f,isActive:l}}const WC=e=>Bt(e,"DROP_COMPLETE")||Bt(e,"DROP_ANIMATE")||Bt(e,"FLUSH"),XC=e=>{const t=KC({onWindowScroll:n=>{e.dispatch(MC({newScroll:n}))}});return n=>s=>{!t.isActive()&&Bt(s,"INITIAL_PUBLISH")&&t.start(),t.isActive()&&WC(s)&&t.stop(),n(s)}};var JC=e=>{let t=!1,n=!1;const s=setTimeout(()=>{n=!0}),o=l=>{t||n||(t=!0,e(l),clearTimeout(s))};return o.wasCalled=()=>t,o},QC=()=>{const e=[],t=o=>{const l=e.findIndex(f=>f.timerId===o);l===-1&&$e();const[u]=e.splice(l,1);u.callback()};return{add:o=>{const l=setTimeout(()=>t(l)),u={timerId:l,callback:o};e.push(u)},flush:()=>{if(!e.length)return;const o=[...e];e.length=0,o.forEach(l=>{clearTimeout(l.timerId),l.callback()})}}};const e3=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.droppableId===t.droppableId&&e.index===t.index,t3=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.draggableId===t.draggableId&&e.droppableId===t.droppableId,n3=(e,t)=>{if(e===t)return!0;const n=e.draggable.id===t.draggable.id&&e.draggable.droppableId===t.draggable.droppableId&&e.draggable.type===t.draggable.type&&e.draggable.index===t.draggable.index,s=e.droppable.id===t.droppable.id&&e.droppable.type===t.droppable.type;return n&&s},Ou=(e,t)=>{t()},Yh=(e,t)=>({draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:t});function eg(e,t,n,s){if(!e){n(s(t));return}const o=JC(n);e(t,{announce:o}),o.wasCalled()||n(s(t))}var r3=(e,t)=>{const n=QC();let s=null;const o=(_,x)=>{s&&$e(),Ou("onBeforeCapture",()=>{const S=e().onBeforeCapture;S&&S({draggableId:_,mode:x})})},l=(_,x)=>{s&&$e(),Ou("onBeforeDragStart",()=>{const S=e().onBeforeDragStart;S&&S(Yh(_,x))})},u=(_,x)=>{s&&$e();const S=Yh(_,x);s={mode:x,lastCritical:_,lastLocation:S.source,lastCombine:null},n.add(()=>{Ou("onDragStart",()=>eg(e().onDragStart,S,t,Lf.onDragStart))})},f=(_,x)=>{const S=ry(x),T=Tm(x);s||$e();const k=!n3(_,s.lastCritical);k&&(s.lastCritical=_);const A=!e3(s.lastLocation,S);A&&(s.lastLocation=S);const M=!t3(s.lastCombine,T);if(M&&(s.lastCombine=T),!k&&!A&&!M)return;const R={...Yh(_,s.mode),combine:T,destination:S};n.add(()=>{Ou("onDragUpdate",()=>eg(e().onDragUpdate,R,t,Lf.onDragUpdate))})},m=()=>{s||$e(),n.flush()},p=_=>{s||$e(),s=null,Ou("onDragEnd",()=>eg(e().onDragEnd,_,t,Lf.onDragEnd))};return{beforeCapture:o,beforeStart:l,start:u,update:f,flush:m,drop:p,abort:()=>{if(!s)return;const _={...Yh(s.lastCritical,s.mode),combine:null,destination:null,reason:"CANCEL"};p(_)}}},i3=(e,t)=>{const n=r3(e,t);return s=>o=>l=>{if(Bt(l,"BEFORE_INITIAL_CAPTURE")){n.beforeCapture(l.payload.draggableId,l.payload.movementMode);return}if(Bt(l,"INITIAL_PUBLISH")){const f=l.payload.critical;n.beforeStart(f,l.payload.movementMode),o(l),n.start(f,l.payload.movementMode);return}if(Bt(l,"DROP_COMPLETE")){const f=l.payload.completed.result;n.flush(),o(l),n.drop(f);return}if(o(l),Bt(l,"FLUSH")){n.abort();return}const u=s.getState();u.phase==="DRAGGING"&&n.update(u.critical,u.impact)}};const s3=e=>t=>n=>{if(!Bt(n,"DROP_ANIMATION_FINISHED")){t(n);return}const s=e.getState();s.phase!=="DROP_ANIMATING"&&$e(),e.dispatch(uy({completed:s.completed}))},a3=e=>{let t=null,n=null;function s(){n&&(cancelAnimationFrame(n),n=null),t&&(t(),t=null)}return o=>l=>{if((Bt(l,"FLUSH")||Bt(l,"DROP_COMPLETE")||Bt(l,"DROP_ANIMATION_FINISHED"))&&s(),o(l),!Bt(l,"DROP_ANIMATE"))return;const u={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){e.getState().phase==="DROP_ANIMATING"&&e.dispatch(OE())}};n=requestAnimationFrame(()=>{n=null,t=Di(window,[u])})}};var o3=e=>()=>t=>n=>{(Bt(n,"DROP_COMPLETE")||Bt(n,"FLUSH")||Bt(n,"DROP_ANIMATE"))&&e.stopPublishing(),t(n)},l3=e=>{let t=!1;return()=>n=>s=>{if(Bt(s,"INITIAL_PUBLISH")){t=!0,e.tryRecordFocus(s.payload.critical.draggable.id),n(s),e.tryRestoreFocusRecorded();return}if(n(s),!!t){if(Bt(s,"FLUSH")){t=!1,e.tryRestoreFocusRecorded();return}if(Bt(s,"DROP_COMPLETE")){t=!1;const o=s.payload.completed.result;o.combine&&e.tryShiftRecord(o.draggableId,o.combine.draggableId),e.tryRestoreFocusRecorded()}}}};const c3=e=>Bt(e,"DROP_COMPLETE")||Bt(e,"DROP_ANIMATE")||Bt(e,"FLUSH");var u3=e=>t=>n=>s=>{if(c3(s)){e.stop(),n(s);return}if(Bt(s,"INITIAL_PUBLISH")){n(s);const o=t.getState();o.phase!=="DRAGGING"&&$e(),e.start(o);return}n(s),e.scroll(t.getState())};const d3=e=>t=>n=>{if(t(n),!Bt(n,"PUBLISH_WHILE_DRAGGING"))return;const s=e.getState();s.phase==="DROP_PENDING"&&(s.isWaiting||e.dispatch(NE({reason:s.reason})))},h3=K2;var f3=({dimensionMarshal:e,focusMarshal:t,styleMarshal:n,getResponders:s,announce:o,autoScroller:l})=>V2(SC,h3(uD(UC(n),o3(e),zC(e),ZC,s3,a3,d3,u3(l),XC,l3(t),i3(s,o))));const tg=()=>({additions:{},removals:{},modified:{}});function m3({registry:e,callbacks:t}){let n=tg(),s=null;const o=()=>{s||(t.collectionStarting(),s=requestAnimationFrame(()=>{s=null;const{additions:m,removals:p,modified:b}=n,_=Object.keys(m).map(T=>e.draggable.getById(T).getDimension(Kn)).sort((T,k)=>T.descriptor.index-k.descriptor.index),x=Object.keys(b).map(T=>{const A=e.droppable.getById(T).callbacks.getScrollWhileDragging();return{droppableId:T,scroll:A}}),S={additions:_,removals:Object.keys(p),modified:x};n=tg(),t.publish(S)}))};return{add:m=>{const p=m.descriptor.id;n.additions[p]=m,n.modified[m.descriptor.droppableId]=!0,n.removals[p]&&delete n.removals[p],o()},remove:m=>{const p=m.descriptor;n.removals[p.id]=!0,n.modified[p.droppableId]=!0,n.additions[p.id]&&delete n.additions[p.id],o()},stop:()=>{s&&(cancelAnimationFrame(s),s=null,n=tg())}}}var RE=({scrollHeight:e,scrollWidth:t,height:n,width:s})=>{const o=li({x:t,y:e},{x:s,y:n});return{x:Math.max(0,o.x),y:Math.max(0,o.y)}},LE=()=>{const e=document.documentElement;return e||$e(),e},BE=()=>{const e=LE();return RE({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})},p3=()=>{const e=CE(),t=BE(),n=e.y,s=e.x,o=LE(),l=o.clientWidth,u=o.clientHeight,f=s+l,m=n+u;return{frame:is({top:n,left:s,right:f,bottom:m}),scroll:{initial:e,current:e,max:t,diff:{value:Kn,displacement:Kn}}}},g3=({critical:e,scrollOptions:t,registry:n})=>{const s=p3(),o=s.scroll.current,l=e.droppable,u=n.droppable.getAllByType(l.type).map(b=>b.callbacks.getDimensionAndWatchScroll(o,t)),f=n.draggable.getAllByType(e.draggable.type).map(b=>b.getDimension(o));return{dimensions:{draggables:uE(f),droppables:cE(u)},critical:e,viewport:s}};function qw(e,t,n){return!(n.descriptor.id===t.id||n.descriptor.type!==t.type||e.droppable.getById(n.descriptor.droppableId).descriptor.mode!=="virtual")}var b3=(e,t)=>{let n=null;const s=m3({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),o=(x,S)=>{e.droppable.exists(x)||$e(),n&&t.updateDroppableIsEnabled({id:x,isEnabled:S})},l=(x,S)=>{n&&(e.droppable.exists(x)||$e(),t.updateDroppableIsCombineEnabled({id:x,isCombineEnabled:S}))},u=(x,S)=>{n&&(e.droppable.exists(x)||$e(),t.updateDroppableScroll({id:x,newScroll:S}))},f=(x,S)=>{n&&e.droppable.getById(x).callbacks.scroll(S)},m=()=>{if(!n)return;s.stop();const x=n.critical.droppable;e.droppable.getAllByType(x.type).forEach(S=>S.callbacks.dragStopped()),n.unsubscribe(),n=null},p=x=>{n||$e();const S=n.critical.draggable;x.type==="ADDITION"&&qw(e,S,x.value)&&s.add(x.value),x.type==="REMOVAL"&&qw(e,S,x.value)&&s.remove(x.value)};return{updateDroppableIsEnabled:o,updateDroppableIsCombineEnabled:l,scrollDroppable:f,updateDroppableScroll:u,startPublishing:x=>{n&&$e();const S=e.draggable.getById(x.draggableId),T=e.droppable.getById(S.descriptor.droppableId),k={draggable:S.descriptor,droppable:T.descriptor},A=e.subscribe(p);return n={critical:k,unsubscribe:A},g3({critical:k,registry:e,scrollOptions:x.scrollOptions})},stopPublishing:m}},PE=(e,t)=>e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===t?!1:e.completed.result.reason==="DROP",y3=e=>{window.scrollBy(e.x,e.y)};const v3=Vn(e=>Em(e).filter(t=>!(!t.isEnabled||!t.frame))),_3=(e,t)=>v3(t).find(s=>(s.frame||$e(),_E(s.frame.pageMarginBox)(e)))||null;var x3=({center:e,destination:t,droppables:n})=>{if(t){const o=n[t];return o.frame?o:null}return _3(e,n)};const rd={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:e=>e**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1};var w3=(e,t,n=()=>rd)=>{const s=n(),o=e[t.size]*s.startFromPercentage,l=e[t.size]*s.maxScrollAtPercentage;return{startScrollingFrom:o,maxScrollValueAt:l}},$E=({startOfRange:e,endOfRange:t,current:n})=>{const s=t-e;return s===0?0:(n-e)/s},hy=1,S3=(e,t,n=()=>rd)=>{const s=n();if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return s.maxPixelScroll;if(e===t.startScrollingFrom)return hy;const l=1-$E({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),u=s.maxPixelScroll*s.ease(l);return Math.ceil(u)},E3=(e,t,n)=>{const s=n(),o=s.durationDampening.accelerateAt,l=s.durationDampening.stopDampeningAt,u=t,f=l,p=Date.now()-u;if(p>=l)return e;if(p<o)return hy;const b=$E({startOfRange:o,endOfRange:f,current:p}),_=e*s.ease(b);return Math.ceil(_)},Zw=({distanceToEdge:e,thresholds:t,dragStartTime:n,shouldUseTimeDampening:s,getAutoScrollerOptions:o})=>{const l=S3(e,t,o);return l===0?0:s?Math.max(E3(l,n,o),hy):l},Vw=({container:e,distanceToEdges:t,dragStartTime:n,axis:s,shouldUseTimeDampening:o,getAutoScrollerOptions:l})=>{const u=w3(e,s,l);return t[s.end]<t[s.start]?Zw({distanceToEdge:t[s.end],thresholds:u,dragStartTime:n,shouldUseTimeDampening:o,getAutoScrollerOptions:l}):-1*Zw({distanceToEdge:t[s.start],thresholds:u,dragStartTime:n,shouldUseTimeDampening:o,getAutoScrollerOptions:l})},T3=({container:e,subject:t,proposedScroll:n})=>{const s=t.height>e.height,o=t.width>e.width;return!o&&!s?n:o&&s?null:{x:o?0:n.x,y:s?0:n.y}};const k3=lE(e=>e===0?0:e);var IE=({dragStartTime:e,container:t,subject:n,center:s,shouldUseTimeDampening:o,getAutoScrollerOptions:l})=>{const u={top:s.y-t.top,right:t.right-s.x,bottom:t.bottom-s.y,left:s.x-t.left},f=Vw({container:t,distanceToEdges:u,dragStartTime:e,axis:iy,shouldUseTimeDampening:o,getAutoScrollerOptions:l}),m=Vw({container:t,distanceToEdges:u,dragStartTime:e,axis:fE,shouldUseTimeDampening:o,getAutoScrollerOptions:l}),p=k3({x:m,y:f});if(Va(p,Kn))return null;const b=T3({container:t,subject:n,proposedScroll:p});return b?Va(b,Kn)?null:b:null};const A3=lE(e=>e===0?0:e>0?1:-1),fy=(()=>{const e=(t,n)=>t<0?t:t>n?t-n:0;return({current:t,max:n,change:s})=>{const o=sr(t,s),l={x:e(o.x,n.x),y:e(o.y,n.y)};return Va(l,Kn)?null:l}})(),zE=({max:e,current:t,change:n})=>{const s={x:Math.max(t.x,e.x),y:Math.max(t.y,e.y)},o=A3(n),l=fy({max:s,current:t,change:o});return!l||o.x!==0&&l.x===0||o.y!==0&&l.y===0},my=(e,t)=>zE({current:e.scroll.current,max:e.scroll.max,change:t}),j3=(e,t)=>{if(!my(e,t))return null;const n=e.scroll.max,s=e.scroll.current;return fy({current:s,max:n,change:t})},py=(e,t)=>{const n=e.frame;return n?zE({current:n.scroll.current,max:n.scroll.max,change:t}):!1},N3=(e,t)=>{const n=e.frame;return!n||!py(e,t)?null:fy({current:n.scroll.current,max:n.scroll.max,change:t})};var O3=({viewport:e,subject:t,center:n,dragStartTime:s,shouldUseTimeDampening:o,getAutoScrollerOptions:l})=>{const u=IE({dragStartTime:s,container:e.frame,subject:t,center:n,shouldUseTimeDampening:o,getAutoScrollerOptions:l});return u&&my(e,u)?u:null},D3=({droppable:e,subject:t,center:n,dragStartTime:s,shouldUseTimeDampening:o,getAutoScrollerOptions:l})=>{const u=e.frame;if(!u)return null;const f=IE({dragStartTime:s,container:u.pageMarginBox,subject:t,center:n,shouldUseTimeDampening:o,getAutoScrollerOptions:l});return f&&py(e,f)?f:null},Kw=({state:e,dragStartTime:t,shouldUseTimeDampening:n,scrollWindow:s,scrollDroppable:o,getAutoScrollerOptions:l})=>{const u=e.current.page.borderBoxCenter,m=e.dimensions.draggables[e.critical.draggable.id].page.marginBox;if(e.isWindowScrollAllowed){const _=e.viewport,x=O3({dragStartTime:t,viewport:_,subject:m,center:u,shouldUseTimeDampening:n,getAutoScrollerOptions:l});if(x){s(x);return}}const p=x3({center:u,destination:ci(e.impact),droppables:e.dimensions.droppables});if(!p)return;const b=D3({dragStartTime:t,droppable:p,subject:m,center:u,shouldUseTimeDampening:n,getAutoScrollerOptions:l});b&&o(p.descriptor.id,b)},M3=({scrollWindow:e,scrollDroppable:t,getAutoScrollerOptions:n=()=>rd})=>{const s=Ju(e),o=Ju(t);let l=null;const u=p=>{l||$e();const{shouldUseTimeDampening:b,dragStartTime:_}=l;Kw({state:p,scrollWindow:s,scrollDroppable:o,dragStartTime:_,shouldUseTimeDampening:b,getAutoScrollerOptions:n})};return{start:p=>{l&&$e();const b=Date.now();let _=!1;const x=()=>{_=!0};Kw({state:p,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:x,scrollDroppable:x,getAutoScrollerOptions:n}),l={dragStartTime:b,shouldUseTimeDampening:_},_&&u(p)},stop:()=>{l&&(s.cancel(),o.cancel(),l=null)},scroll:u}},C3=({move:e,scrollDroppable:t,scrollWindow:n})=>{const s=(f,m)=>{const p=sr(f.current.client.selection,m);e({client:p})},o=(f,m)=>{if(!py(f,m))return m;const p=N3(f,m);if(!p)return t(f.descriptor.id,m),null;const b=li(m,p);return t(f.descriptor.id,b),li(m,b)},l=(f,m,p)=>{if(!f||!my(m,p))return p;const b=j3(m,p);if(!b)return n(p),null;const _=li(p,b);return n(_),li(p,_)};return f=>{const m=f.scrollJumpRequest;if(!m)return;const p=ci(f.impact);p||$e();const b=o(f.dimensions.droppables[p],m);if(!b)return;const _=f.viewport,x=l(f.isWindowScrollAllowed,_,b);x&&s(f,x)}},R3=({scrollDroppable:e,scrollWindow:t,move:n,getAutoScrollerOptions:s})=>{const o=M3({scrollWindow:t,scrollDroppable:e,getAutoScrollerOptions:s}),l=C3({move:n,scrollWindow:t,scrollDroppable:e});return{scroll:m=>{if(!(s().disabled||m.phase!=="DRAGGING")){if(m.movementMode==="FLUID"){o.scroll(m);return}m.scrollJumpRequest&&l(m)}},start:o.start,stop:o.stop}};const yc="data-rfd",vc=(()=>{const e=`${yc}-drag-handle`;return{base:e,draggableId:`${e}-draggable-id`,contextId:`${e}-context-id`}})(),hb=(()=>{const e=`${yc}-draggable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),L3=(()=>{const e=`${yc}-droppable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),Ww={contextId:`${yc}-scroll-container-context-id`},B3=e=>t=>`[${t}="${e}"]`,Du=(e,t)=>e.map(n=>{const s=n.styles[t];return s?`${n.selector} { ${s} }`:""}).join(" "),P3="pointer-events: none;";var $3=e=>{const t=B3(e),n=(()=>{const f=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:t(vc.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:f,dragging:P3,dropAnimating:f}}})(),s=(()=>{const f=`
      transition: ${Ku.outOfTheWay};
    `;return{selector:t(hb.contextId),styles:{dragging:f,dropAnimating:f,userCancel:f}}})(),o={selector:t(L3.contextId),styles:{always:"overflow-anchor: none;"}},u=[s,n,o,{selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}}];return{always:Du(u,"always"),resting:Du(u,"resting"),dragging:Du(u,"dragging"),dropAnimating:Du(u,"dropAnimating"),userCancel:Du(u,"userCancel")}};const ui=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?P.useLayoutEffect:P.useEffect,ng=()=>{const e=document.querySelector("head");return e||$e(),e},Xw=e=>{const t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.type="text/css",t};function I3(e,t){const n=kt(()=>$3(e),[e]),s=P.useRef(null),o=P.useRef(null),l=Je(Vn(_=>{const x=o.current;x||$e(),x.textContent=_}),[]),u=Je(_=>{const x=s.current;x||$e(),x.textContent=_},[]);ui(()=>{!s.current&&!o.current||$e();const _=Xw(t),x=Xw(t);return s.current=_,o.current=x,_.setAttribute(`${yc}-always`,e),x.setAttribute(`${yc}-dynamic`,e),ng().appendChild(_),ng().appendChild(x),u(n.always),l(n.resting),()=>{const S=T=>{const k=T.current;k||$e(),ng().removeChild(k),T.current=null};S(s),S(o)}},[t,u,l,n.always,n.resting,e]);const f=Je(()=>l(n.dragging),[l,n.dragging]),m=Je(_=>{if(_==="DROP"){l(n.dropAnimating);return}l(n.userCancel)},[l,n.dropAnimating,n.userCancel]),p=Je(()=>{o.current&&l(n.resting)},[l,n.resting]);return kt(()=>({dragging:f,dropping:m,resting:p}),[f,m,p])}function UE(e,t){return Array.from(e.querySelectorAll(t))}var HE=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView?e.ownerDocument.defaultView:window;function jm(e){return e instanceof HE(e).HTMLElement}function z3(e,t){const n=`[${vc.contextId}="${e}"]`,s=UE(document,n);if(!s.length)return null;const o=s.find(l=>l.getAttribute(vc.draggableId)===t);return!o||!jm(o)?null:o}function U3(e){const t=P.useRef({}),n=P.useRef(null),s=P.useRef(null),o=P.useRef(!1),l=Je(function(x,S){const T={id:x,focus:S};return t.current[x]=T,function(){const A=t.current;A[x]!==T&&delete A[x]}},[]),u=Je(function(x){const S=z3(e,x);S&&S!==document.activeElement&&S.focus()},[e]),f=Je(function(x,S){n.current===x&&(n.current=S)},[]),m=Je(function(){s.current||o.current&&(s.current=requestAnimationFrame(()=>{s.current=null;const x=n.current;x&&u(x)}))},[u]),p=Je(function(x){n.current=null;const S=document.activeElement;S&&S.getAttribute(vc.draggableId)===x&&(n.current=x)},[]);return ui(()=>(o.current=!0,function(){o.current=!1;const x=s.current;x&&cancelAnimationFrame(x)}),[]),kt(()=>({register:l,tryRecordFocus:p,tryRestoreFocusRecorded:m,tryShiftRecord:f}),[l,p,m,f])}function H3(){const e={draggables:{},droppables:{}},t=[];function n(_){return t.push(_),function(){const S=t.indexOf(_);S!==-1&&t.splice(S,1)}}function s(_){t.length&&t.forEach(x=>x(_))}function o(_){return e.draggables[_]||null}function l(_){const x=o(_);return x||$e(),x}const u={register:_=>{e.draggables[_.descriptor.id]=_,s({type:"ADDITION",value:_})},update:(_,x)=>{const S=e.draggables[x.descriptor.id];S&&S.uniqueId===_.uniqueId&&(delete e.draggables[x.descriptor.id],e.draggables[_.descriptor.id]=_)},unregister:_=>{const x=_.descriptor.id,S=o(x);S&&_.uniqueId===S.uniqueId&&(delete e.draggables[x],e.droppables[_.descriptor.droppableId]&&s({type:"REMOVAL",value:_}))},getById:l,findById:o,exists:_=>!!o(_),getAllByType:_=>Object.values(e.draggables).filter(x=>x.descriptor.type===_)};function f(_){return e.droppables[_]||null}function m(_){const x=f(_);return x||$e(),x}const p={register:_=>{e.droppables[_.descriptor.id]=_},unregister:_=>{const x=f(_.descriptor.id);x&&_.uniqueId===x.uniqueId&&delete e.droppables[_.descriptor.id]},getById:m,findById:f,exists:_=>!!f(_),getAllByType:_=>Object.values(e.droppables).filter(x=>x.descriptor.type===_)};function b(){e.draggables={},e.droppables={},t.length=0}return{draggable:u,droppable:p,subscribe:n,clean:b}}function G3(){const e=kt(H3,[]);return P.useEffect(()=>function(){e.clean()},[e]),e}var gy=nn.createContext(null),Wf=()=>{const e=document.body;return e||$e(),e};const F3={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},Y3=e=>`rfd-announcement-${e}`;function q3(e){const t=kt(()=>Y3(e),[e]),n=P.useRef(null);return P.useEffect(function(){const l=document.createElement("div");return n.current=l,l.id=t,l.setAttribute("aria-live","assertive"),l.setAttribute("aria-atomic","true"),qf(l.style,F3),Wf().appendChild(l),function(){setTimeout(function(){const m=Wf();m.contains(l)&&m.removeChild(l),l===n.current&&(n.current=null)})}},[t]),Je(o=>{const l=n.current;if(l){l.textContent=o;return}},[])}const Z3={separator:"::"};function by(e,t=Z3){const n=nn.useId();return kt(()=>`${e}${t.separator}${n}`,[t.separator,e,n])}function V3({contextId:e,uniqueId:t}){return`rfd-hidden-text-${e}-${t}`}function K3({contextId:e,text:t}){const n=by("hidden-text",{separator:"-"}),s=kt(()=>V3({contextId:e,uniqueId:n}),[n,e]);return P.useEffect(function(){const l=document.createElement("div");return l.id=s,l.textContent=t,l.style.display="none",Wf().appendChild(l),function(){const f=Wf();f.contains(l)&&f.removeChild(l)}},[s,t]),s}var Nm=nn.createContext(null);function GE(e){const t=P.useRef(e);return P.useEffect(()=>{t.current=e}),t}function W3(){let e=null;function t(){return!!e}function n(u){return u===e}function s(u){e&&$e();const f={abandon:u};return e=f,f}function o(){e||$e(),e=null}function l(){e&&(e.abandon(),o())}return{isClaimed:t,isActive:n,claim:s,release:o,tryAbandon:l}}function id(e){return e.phase==="IDLE"||e.phase==="DROP_ANIMATING"?!1:e.isDragging}const X3=9,J3=13,yy=27,FE=32,Q3=33,eR=34,tR=35,nR=36,rR=37,iR=38,sR=39,aR=40,oR={[J3]:!0,[X3]:!0};var YE=e=>{oR[e.keyCode]&&e.preventDefault()};const Om=(()=>{const e="visibilitychange";return typeof document>"u"?e:[e,`ms${e}`,`webkit${e}`,`moz${e}`,`o${e}`].find(s=>`on${s}`in document)||e})(),qE=0,Jw=5;function lR(e,t){return Math.abs(t.x-e.x)>=Jw||Math.abs(t.y-e.y)>=Jw}const Qw={type:"IDLE"};function cR({cancel:e,completed:t,getPhase:n,setPhase:s}){return[{eventName:"mousemove",fn:o=>{const{button:l,clientX:u,clientY:f}=o;if(l!==qE)return;const m={x:u,y:f},p=n();if(p.type==="DRAGGING"){o.preventDefault(),p.actions.move(m);return}p.type!=="PENDING"&&$e();const b=p.point;if(!lR(b,m))return;o.preventDefault();const _=p.actions.fluidLift(m);s({type:"DRAGGING",actions:_})}},{eventName:"mouseup",fn:o=>{const l=n();if(l.type!=="DRAGGING"){e();return}o.preventDefault(),l.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"mousedown",fn:o=>{n().type==="DRAGGING"&&o.preventDefault(),e()}},{eventName:"keydown",fn:o=>{if(n().type==="PENDING"){e();return}if(o.keyCode===yy){o.preventDefault(),e();return}YE(o)}},{eventName:"resize",fn:e},{eventName:"scroll",options:{passive:!0,capture:!1},fn:()=>{n().type==="PENDING"&&e()}},{eventName:"webkitmouseforcedown",fn:o=>{const l=n();if(l.type==="IDLE"&&$e(),l.actions.shouldRespectForcePress()){e();return}o.preventDefault()}},{eventName:Om,fn:e}]}function uR(e){const t=P.useRef(Qw),n=P.useRef(Za),s=kt(()=>({eventName:"mousedown",fn:function(_){if(_.defaultPrevented||_.button!==qE||_.ctrlKey||_.metaKey||_.shiftKey||_.altKey)return;const x=e.findClosestDraggableId(_);if(!x)return;const S=e.tryGetLock(x,u,{sourceEvent:_});if(!S)return;_.preventDefault();const T={x:_.clientX,y:_.clientY};n.current(),p(S,T)}}),[e]),o=kt(()=>({eventName:"webkitmouseforcewillbegin",fn:b=>{if(b.defaultPrevented)return;const _=e.findClosestDraggableId(b);if(!_)return;const x=e.findOptionsForDraggable(_);x&&(x.shouldRespectForcePress||e.canGetLock(_)&&b.preventDefault())}}),[e]),l=Je(function(){const _={passive:!1,capture:!0};n.current=Di(window,[o,s],_)},[o,s]),u=Je(()=>{t.current.type!=="IDLE"&&(t.current=Qw,n.current(),l())},[l]),f=Je(()=>{const b=t.current;u(),b.type==="DRAGGING"&&b.actions.cancel({shouldBlockNextClick:!0}),b.type==="PENDING"&&b.actions.abort()},[u]),m=Je(function(){const _={capture:!0,passive:!1},x=cR({cancel:f,completed:u,getPhase:()=>t.current,setPhase:S=>{t.current=S}});n.current=Di(window,x,_)},[f,u]),p=Je(function(_,x){t.current.type!=="IDLE"&&$e(),t.current={type:"PENDING",point:x,actions:_},m()},[m]);ui(function(){return l(),function(){n.current()}},[l])}function dR(){}const hR={[eR]:!0,[Q3]:!0,[nR]:!0,[tR]:!0};function fR(e,t){function n(){t(),e.cancel()}function s(){t(),e.drop()}return[{eventName:"keydown",fn:o=>{if(o.keyCode===yy){o.preventDefault(),n();return}if(o.keyCode===FE){o.preventDefault(),s();return}if(o.keyCode===aR){o.preventDefault(),e.moveDown();return}if(o.keyCode===iR){o.preventDefault(),e.moveUp();return}if(o.keyCode===sR){o.preventDefault(),e.moveRight();return}if(o.keyCode===rR){o.preventDefault(),e.moveLeft();return}if(hR[o.keyCode]){o.preventDefault();return}YE(o)}},{eventName:"mousedown",fn:n},{eventName:"mouseup",fn:n},{eventName:"click",fn:n},{eventName:"touchstart",fn:n},{eventName:"resize",fn:n},{eventName:"wheel",fn:n,options:{passive:!0}},{eventName:Om,fn:n}]}function mR(e){const t=P.useRef(dR),n=kt(()=>({eventName:"keydown",fn:function(l){if(l.defaultPrevented||l.keyCode!==FE)return;const u=e.findClosestDraggableId(l);if(!u)return;const f=e.tryGetLock(u,b,{sourceEvent:l});if(!f)return;l.preventDefault();let m=!0;const p=f.snapLift();t.current();function b(){m||$e(),m=!1,t.current(),s()}t.current=Di(window,fR(p,b),{capture:!0,passive:!1})}}),[e]),s=Je(function(){const l={passive:!1,capture:!0};t.current=Di(window,[n],l)},[n]);ui(function(){return s(),function(){t.current()}},[s])}const rg={type:"IDLE"},pR=120,gR=.15;function bR({cancel:e,getPhase:t}){return[{eventName:"orientationchange",fn:e},{eventName:"resize",fn:e},{eventName:"contextmenu",fn:n=>{n.preventDefault()}},{eventName:"keydown",fn:n=>{if(t().type!=="DRAGGING"){e();return}n.keyCode===yy&&n.preventDefault(),e()}},{eventName:Om,fn:e}]}function yR({cancel:e,completed:t,getPhase:n}){return[{eventName:"touchmove",options:{capture:!1},fn:s=>{const o=n();if(o.type!=="DRAGGING"){e();return}o.hasMoved=!0;const{clientX:l,clientY:u}=s.touches[0],f={x:l,y:u};s.preventDefault(),o.actions.move(f)}},{eventName:"touchend",fn:s=>{const o=n();if(o.type!=="DRAGGING"){e();return}s.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"touchcancel",fn:s=>{if(n().type!=="DRAGGING"){e();return}s.preventDefault(),e()}},{eventName:"touchforcechange",fn:s=>{const o=n();o.type==="IDLE"&&$e();const l=s.touches[0];if(!l||!(l.force>=gR))return;const f=o.actions.shouldRespectForcePress();if(o.type==="PENDING"){f&&e();return}if(f){if(o.hasMoved){s.preventDefault();return}e();return}s.preventDefault()}},{eventName:Om,fn:e}]}function vR(e){const t=P.useRef(rg),n=P.useRef(Za),s=Je(function(){return t.current},[]),o=Je(function(S){t.current=S},[]),l=kt(()=>({eventName:"touchstart",fn:function(S){if(S.defaultPrevented)return;const T=e.findClosestDraggableId(S);if(!T)return;const k=e.tryGetLock(T,f,{sourceEvent:S});if(!k)return;const A=S.touches[0],{clientX:M,clientY:R}=A,N={x:M,y:R};n.current(),_(k,N)}}),[e]),u=Je(function(){const S={capture:!0,passive:!1};n.current=Di(window,[l],S)},[l]),f=Je(()=>{const x=t.current;x.type!=="IDLE"&&(x.type==="PENDING"&&clearTimeout(x.longPressTimerId),o(rg),n.current(),u())},[u,o]),m=Je(()=>{const x=t.current;f(),x.type==="DRAGGING"&&x.actions.cancel({shouldBlockNextClick:!0}),x.type==="PENDING"&&x.actions.abort()},[f]),p=Je(function(){const S={capture:!0,passive:!1},T={cancel:m,completed:f,getPhase:s},k=Di(window,yR(T),S),A=Di(window,bR(T),S);n.current=function(){k(),A()}},[m,s,f]),b=Je(function(){const S=s();S.type!=="PENDING"&&$e();const T=S.actions.fluidLift(S.point);o({type:"DRAGGING",actions:T,hasMoved:!1})},[s,o]),_=Je(function(S,T){s().type!=="IDLE"&&$e();const k=setTimeout(b,pR);o({type:"PENDING",point:T,actions:S,longPressTimerId:k}),p()},[p,s,o,b]);ui(function(){return u(),function(){n.current();const T=s();T.type==="PENDING"&&(clearTimeout(T.longPressTimerId),o(rg))}},[s,u,o]),ui(function(){return Di(window,[{eventName:"touchmove",fn:()=>{},options:{capture:!1,passive:!1}}])},[])}const _R=["input","button","textarea","select","option","optgroup","video","audio"];function ZE(e,t){if(t==null)return!1;if(_R.includes(t.tagName.toLowerCase()))return!0;const s=t.getAttribute("contenteditable");return s==="true"||s===""?!0:t===e?!1:ZE(e,t.parentElement)}function xR(e,t){const n=t.target;return jm(n)?ZE(e,n):!1}var wR=e=>is(e.getBoundingClientRect()).center;function SR(e){return e instanceof HE(e).Element}const ER=(()=>{const e="matches";return typeof document>"u"?e:[e,"msMatchesSelector","webkitMatchesSelector"].find(s=>s in Element.prototype)||e})();function VE(e,t){return e==null?null:e[ER](t)?e:VE(e.parentElement,t)}function TR(e,t){return e.closest?e.closest(t):VE(e,t)}function kR(e){return`[${vc.contextId}="${e}"]`}function AR(e,t){const n=t.target;if(!SR(n))return null;const s=kR(e),o=TR(n,s);return!o||!jm(o)?null:o}function jR(e,t){const n=AR(e,t);return n?n.getAttribute(vc.draggableId):null}function NR(e,t){const n=`[${hb.contextId}="${e}"]`,o=UE(document,n).find(l=>l.getAttribute(hb.id)===t);return!o||!jm(o)?null:o}function OR(e){e.preventDefault()}function qh({expected:e,phase:t,isLockActive:n,shouldWarn:s}){return!(!n()||e!==t)}function KE({lockAPI:e,store:t,registry:n,draggableId:s}){if(e.isClaimed())return!1;const o=n.draggable.findById(s);return!(!o||!o.options.isEnabled||!PE(t.getState(),s))}function DR({lockAPI:e,contextId:t,store:n,registry:s,draggableId:o,forceSensorStop:l,sourceEvent:u}){if(!KE({lockAPI:e,store:n,registry:s,draggableId:o}))return null;const m=s.draggable.getById(o),p=NR(t,m.descriptor.id);if(!p||u&&!m.options.canDragInteractiveElements&&xR(p,u))return null;const b=e.claim(l||Za);let _="PRE_DRAG";function x(){return m.options.shouldRespectForcePress}function S(){return e.isActive(b)}function T(C,G){qh({expected:C,phase:_,isLockActive:S,shouldWarn:!0})&&n.dispatch(G())}const k=T.bind(null,"DRAGGING");function A(C){function G(){e.release(),_="COMPLETED"}_!=="PRE_DRAG"&&(G(),$e()),n.dispatch(TC(C.liftActionArgs)),_="DRAGGING";function H(V,W={shouldBlockNextClick:!1}){if(C.cleanup(),W.shouldBlockNextClick){const re=Di(window,[{eventName:"click",fn:OR,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(re)}G(),n.dispatch(NE({reason:V}))}return{isActive:()=>qh({expected:"DRAGGING",phase:_,isLockActive:S,shouldWarn:!1}),shouldRespectForcePress:x,drop:V=>H("DROP",V),cancel:V=>H("CANCEL",V),...C.actions}}function M(C){const G=Ju(V=>{k(()=>jE({client:V}))});return{...A({liftActionArgs:{id:o,clientSelection:C,movementMode:"FLUID"},cleanup:()=>G.cancel(),actions:{move:G}}),move:G}}function R(){const C={moveUp:()=>k(RC),moveRight:()=>k(BC),moveDown:()=>k(LC),moveLeft:()=>k(PC)};return A({liftActionArgs:{id:o,clientSelection:wR(p),movementMode:"SNAP"},cleanup:Za,actions:C})}function N(){qh({expected:"PRE_DRAG",phase:_,isLockActive:S,shouldWarn:!0})&&e.release()}return{isActive:()=>qh({expected:"PRE_DRAG",phase:_,isLockActive:S,shouldWarn:!1}),shouldRespectForcePress:x,fluidLift:M,snapLift:R,abort:N}}const MR=[uR,mR,vR];function CR({contextId:e,store:t,registry:n,customSensors:s,enableDefaultSensors:o}){const l=[...o?MR:[],...s||[]],u=P.useState(()=>W3())[0],f=Je(function(A,M){id(A)&&!id(M)&&u.tryAbandon()},[u]);ui(function(){let A=t.getState();return t.subscribe(()=>{const R=t.getState();f(A,R),A=R})},[u,t,f]),ui(()=>u.tryAbandon,[u.tryAbandon]);const m=Je(k=>KE({lockAPI:u,registry:n,store:t,draggableId:k}),[u,n,t]),p=Je((k,A,M)=>DR({lockAPI:u,registry:n,contextId:e,store:t,draggableId:k,forceSensorStop:A||null,sourceEvent:M&&M.sourceEvent?M.sourceEvent:null}),[e,u,n,t]),b=Je(k=>jR(e,k),[e]),_=Je(k=>{const A=n.draggable.findById(k);return A?A.options:null},[n.draggable]),x=Je(function(){u.isClaimed()&&(u.tryAbandon(),t.getState().phase!=="IDLE"&&t.dispatch(cy()))},[u,t]),S=Je(()=>u.isClaimed(),[u]),T=kt(()=>({canGetLock:m,tryGetLock:p,findClosestDraggableId:b,findOptionsForDraggable:_,tryReleaseLock:x,isLockClaimed:S}),[m,p,b,_,x,S]);for(let k=0;k<l.length;k++)l[k](T)}const RR=e=>({onBeforeCapture:t=>{const n=()=>{e.onBeforeCapture&&e.onBeforeCapture(t)};Sm.flushSync(n)},onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}),LR=e=>({...rd,...e.autoScrollerOptions,durationDampening:{...rd.durationDampening,...e.autoScrollerOptions}});function Mu(e){return e.current||$e(),e.current}function BR(e){const{contextId:t,setCallbacks:n,sensors:s,nonce:o,dragHandleUsageInstructions:l}=e,u=P.useRef(null),f=GE(e),m=Je(()=>RR(f.current),[f]),p=Je(()=>LR(f.current),[f]),b=q3(t),_=K3({contextId:t,text:l}),x=I3(t,o),S=Je(re=>{Mu(u).dispatch(re)},[]),T=kt(()=>Tw({publishWhileDragging:AC,updateDroppableScroll:NC,updateDroppableIsEnabled:OC,updateDroppableIsCombineEnabled:DC,collectionStarting:jC},S),[S]),k=G3(),A=kt(()=>b3(k,T),[k,T]),M=kt(()=>R3({scrollWindow:y3,scrollDroppable:A.scrollDroppable,getAutoScrollerOptions:p,...Tw({move:jE},S)}),[A.scrollDroppable,S,p]),R=U3(t),N=kt(()=>f3({announce:b,autoScroller:M,dimensionMarshal:A,focusMarshal:R,getResponders:m,styleMarshal:x}),[b,M,A,R,m,x]);u.current=N;const D=Je(()=>{const re=Mu(u);re.getState().phase!=="IDLE"&&re.dispatch(cy())},[]),C=Je(()=>{const re=Mu(u).getState();return re.phase==="DROP_ANIMATING"?!0:re.phase==="IDLE"?!1:re.isDragging},[]),G=kt(()=>({isDragging:C,tryAbort:D}),[C,D]);n(G);const H=Je(re=>PE(Mu(u).getState(),re),[]),V=Je(()=>Wo(Mu(u).getState()),[]),W=kt(()=>({marshal:A,focus:R,contextId:t,canLift:H,isMovementAllowed:V,dragHandleUsageInstructionsId:_,registry:k}),[t,A,_,R,H,V,k]);return CR({contextId:t,store:N,registry:k,customSensors:s||null,enableDefaultSensors:e.enableDefaultSensors!==!1}),P.useEffect(()=>D,[D]),nn.createElement(Nm.Provider,{value:W},nn.createElement(oM,{context:gy,store:N},e.children))}function PR(){return nn.useId()}function yd(e){const t=PR(),n=e.dragHandleUsageInstructions||Lf.dragHandleUsageInstructions;return nn.createElement(mM,null,s=>nn.createElement(BR,{nonce:e.nonce,contextId:t,setCallbacks:s,dragHandleUsageInstructions:n,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd,autoScrollerOptions:e.autoScrollerOptions},e.children))}const e1={dragging:5e3,dropAnimating:4500},$R=(e,t)=>t?Ku.drop(t.duration):e?Ku.snap:Ku.fluid,IR=(e,t)=>{if(e)return t?nd.opacity.drop:nd.opacity.combining},zR=e=>e.forceShouldAnimate!=null?e.forceShouldAnimate:e.mode==="SNAP";function UR(e){const n=e.dimension.client,{offset:s,combineWith:o,dropping:l}=e,u=!!o,f=zR(e),m=!!l,p=m?ub.drop(s,u):ub.moveTo(s);return{position:"fixed",top:n.marginBox.top,left:n.marginBox.left,boxSizing:"border-box",width:n.borderBox.width,height:n.borderBox.height,transition:$R(f,l),transform:p,opacity:IR(u,m),zIndex:m?e1.dropAnimating:e1.dragging,pointerEvents:"none"}}function HR(e){return{transform:ub.moveTo(e.offset),transition:e.shouldAnimateDisplacement?void 0:"none"}}function GR(e){return e.type==="DRAGGING"?UR(e):HR(e)}function FR(e,t,n=Kn){const s=window.getComputedStyle(t),o=t.getBoundingClientRect(),l=nE(o,s),u=Yf(l,n),f={client:l,tagName:t.tagName.toLowerCase(),display:s.display},m={x:l.marginBox.width,y:l.marginBox.height};return{descriptor:e,placeholder:f,displaceBy:m,client:l,page:u}}function YR(e){const t=by("draggable"),{descriptor:n,registry:s,getDraggableRef:o,canDragInteractiveElements:l,shouldRespectForcePress:u,isEnabled:f}=e,m=kt(()=>({canDragInteractiveElements:l,shouldRespectForcePress:u,isEnabled:f}),[l,f,u]),p=Je(S=>{const T=o();return T||$e(),FR(n,T,S)},[n,o]),b=kt(()=>({uniqueId:t,descriptor:n,options:m,getDimension:p}),[n,p,m,t]),_=P.useRef(b),x=P.useRef(!0);ui(()=>(s.draggable.register(_.current),()=>s.draggable.unregister(_.current)),[s.draggable]),ui(()=>{if(x.current){x.current=!1;return}const S=_.current;_.current=b,s.draggable.update(b,S)},[b,s.draggable])}var vy=nn.createContext(null);function Xf(e){const t=P.useContext(e);return t||$e(),t}function qR(e){e.preventDefault()}const ZR=e=>{const t=P.useRef(null),n=Je((G=null)=>{t.current=G},[]),s=Je(()=>t.current,[]),{contextId:o,dragHandleUsageInstructionsId:l,registry:u}=Xf(Nm),{type:f,droppableId:m}=Xf(vy),p=kt(()=>({id:e.draggableId,index:e.index,type:f,droppableId:m}),[e.draggableId,e.index,f,m]),{children:b,draggableId:_,isEnabled:x,shouldRespectForcePress:S,canDragInteractiveElements:T,isClone:k,mapped:A,dropAnimationFinished:M}=e;if(!k){const G=kt(()=>({descriptor:p,registry:u,getDraggableRef:s,canDragInteractiveElements:T,shouldRespectForcePress:S,isEnabled:x}),[p,u,s,T,S,x]);YR(G)}const R=kt(()=>x?{tabIndex:0,role:"button","aria-describedby":l,"data-rfd-drag-handle-draggable-id":_,"data-rfd-drag-handle-context-id":o,draggable:!1,onDragStart:qR}:null,[o,l,_,x]),N=Je(G=>{A.type==="DRAGGING"&&A.dropping&&G.propertyName==="transform"&&Sm.flushSync(M)},[M,A]),D=kt(()=>{const G=GR(A),H=A.type==="DRAGGING"&&A.dropping?N:void 0;return{innerRef:n,draggableProps:{"data-rfd-draggable-context-id":o,"data-rfd-draggable-id":_,style:G,onTransitionEnd:H},dragHandleProps:R}},[o,R,_,A,N,n]),C=kt(()=>({draggableId:p.id,type:p.type,source:{index:p.index,droppableId:p.droppableId}}),[p.droppableId,p.id,p.index,p.type]);return nn.createElement(nn.Fragment,null,b(D,A.snapshot,C))};var WE=(e,t)=>e===t,XE=e=>{const{combine:t,destination:n}=e;return n?n.droppableId:t?t.droppableId:null};const VR=e=>e.combine?e.combine.draggableId:null,KR=e=>e.at&&e.at.type==="COMBINE"?e.at.combine.draggableId:null;function WR(){const e=Vn((o,l)=>({x:o,y:l})),t=Vn((o,l,u=null,f=null,m=null)=>({isDragging:!0,isClone:l,isDropAnimating:!!m,dropAnimation:m,mode:o,draggingOver:u,combineWith:f,combineTargetFor:null})),n=Vn((o,l,u,f,m=null,p=null,b=null)=>({mapped:{type:"DRAGGING",dropping:null,draggingOver:m,combineWith:p,mode:l,offset:o,dimension:u,forceShouldAnimate:b,snapshot:t(l,f,m,p,null)}}));return(o,l)=>{if(id(o)){if(o.critical.draggable.id!==l.draggableId)return null;const u=o.current.client.offset,f=o.dimensions.draggables[l.draggableId],m=ci(o.impact),p=KR(o.impact),b=o.forceShouldAnimate;return n(e(u.x,u.y),o.movementMode,f,l.isClone,m,p,b)}if(o.phase==="DROP_ANIMATING"){const u=o.completed;if(u.result.draggableId!==l.draggableId)return null;const f=l.isClone,m=o.dimensions.draggables[l.draggableId],p=u.result,b=p.mode,_=XE(p),x=VR(p),T={duration:o.dropDuration,curve:dy.drop,moveTo:o.newHomeClientOffset,opacity:x?nd.opacity.drop:null,scale:x?nd.scale.drop:null};return{mapped:{type:"DRAGGING",offset:o.newHomeClientOffset,dimension:m,dropping:T,draggingOver:_,combineWith:x,mode:b,forceShouldAnimate:null,snapshot:t(b,f,_,x,T)}}}return null}}function JE(e=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}const XR={mapped:{type:"SECONDARY",offset:Kn,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:JE(null)}};function JR(){const e=Vn((u,f)=>({x:u,y:f})),t=Vn(JE),n=Vn((u,f=null,m)=>({mapped:{type:"SECONDARY",offset:u,combineTargetFor:f,shouldAnimateDisplacement:m,snapshot:t(f)}})),s=u=>u?n(Kn,u,!0):null,o=(u,f,m,p)=>{const b=m.displaced.visible[u],_=!!(p.inVirtualList&&p.effected[u]),x=Tm(m),S=x&&x.draggableId===u?f:null;if(!b){if(!_)return s(S);if(m.displaced.invisible[u])return null;const A=Tc(p.displacedBy.point),M=e(A.x,A.y);return n(M,S,!0)}if(_)return s(S);const T=m.displacedBy.point,k=e(T.x,T.y);return n(k,S,b.shouldAnimate)};return(u,f)=>{if(id(u))return u.critical.draggable.id===f.draggableId?null:o(f.draggableId,u.critical.draggable.id,u.impact,u.afterCritical);if(u.phase==="DROP_ANIMATING"){const m=u.completed;return m.result.draggableId===f.draggableId?null:o(f.draggableId,m.result.draggableId,m.impact,m.afterCritical)}return null}}const QR=()=>{const e=WR(),t=JR();return(s,o)=>e(s,o)||t(s,o)||XR},e5={dropAnimationFinished:OE},t5=tE(QR,e5,null,{context:gy,areStatePropsEqual:WE})(ZR);function QE(e){return Xf(vy).isUsingCloneFor===e.draggableId&&!e.isClone?null:nn.createElement(t5,e)}function _c(e){const t=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,n=!!e.disableInteractiveElementBlocking,s=!!e.shouldRespectForcePress;return nn.createElement(QE,qf({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:n,shouldRespectForcePress:s}))}const eT=e=>t=>e===t,n5=eT("scroll"),r5=eT("auto"),t1=(e,t)=>t(e.overflowX)||t(e.overflowY),i5=e=>{const t=window.getComputedStyle(e),n={overflowX:t.overflowX,overflowY:t.overflowY};return t1(n,n5)||t1(n,r5)},s5=()=>!1,tT=e=>e==null?null:e===document.body?s5()?e:null:e===document.documentElement?null:i5(e)?e:tT(e.parentElement);var fb=e=>({x:e.scrollLeft,y:e.scrollTop});const nT=e=>e?window.getComputedStyle(e).position==="fixed"?!0:nT(e.parentElement):!1;var a5=e=>{const t=tT(e),n=nT(e);return{closestScrollable:t,isFixedOnPage:n}},o5=({descriptor:e,isEnabled:t,isCombineEnabled:n,isFixedOnPage:s,direction:o,client:l,page:u,closest:f})=>{const m=(()=>{if(!f)return null;const{scrollSize:x,client:S}=f,T=RE({scrollHeight:x.scrollHeight,scrollWidth:x.scrollWidth,height:S.paddingBox.height,width:S.paddingBox.width});return{pageMarginBox:f.page.marginBox,frameClient:S,scrollSize:x,shouldClipSubject:f.shouldClipSubject,scroll:{initial:f.scroll,current:f.scroll,max:T,diff:{value:Kn,displacement:Kn}}}})(),p=o==="vertical"?iy:fE,b=bc({page:u,withPlaceholder:null,axis:p,frame:m});return{descriptor:e,isCombineEnabled:n,isFixedOnPage:s,axis:p,isEnabled:t,client:l,page:u,frame:m,subject:b}};const l5=(e,t)=>{const n=rE(e);if(!t||e!==t)return n;const s=n.paddingBox.top-t.scrollTop,o=n.paddingBox.left-t.scrollLeft,l=s+t.scrollHeight,u=o+t.scrollWidth,m=ey({top:s,right:u,bottom:l,left:o},n.border);return ty({borderBox:m,margin:n.margin,border:n.border,padding:n.padding})};var c5=({ref:e,descriptor:t,env:n,windowScroll:s,direction:o,isDropDisabled:l,isCombineEnabled:u,shouldClipSubject:f})=>{const m=n.closestScrollable,p=l5(e,m),b=Yf(p,s),_=(()=>{if(!m)return null;const S=rE(m),T={scrollHeight:m.scrollHeight,scrollWidth:m.scrollWidth};return{client:S,page:Yf(S,s),scroll:fb(m),scrollSize:T,shouldClipSubject:f}})();return o5({descriptor:t,isEnabled:!l,isCombineEnabled:u,isFixedOnPage:n.isFixedOnPage,direction:o,client:p,page:b,closest:_})};const u5={passive:!1},d5={passive:!0};var n1=e=>e.shouldPublishImmediately?u5:d5;const Zh=e=>e&&e.env.closestScrollable||null;function h5(e){const t=P.useRef(null),n=Xf(Nm),s=by("droppable"),{registry:o,marshal:l}=n,u=GE(e),f=kt(()=>({id:e.droppableId,type:e.type,mode:e.mode}),[e.droppableId,e.mode,e.type]),m=P.useRef(f),p=kt(()=>Vn((D,C)=>{t.current||$e();const G={x:D,y:C};l.updateDroppableScroll(f.id,G)}),[f.id,l]),b=Je(()=>{const D=t.current;return!D||!D.env.closestScrollable?Kn:fb(D.env.closestScrollable)},[]),_=Je(()=>{const D=b();p(D.x,D.y)},[b,p]),x=kt(()=>Ju(_),[_]),S=Je(()=>{const D=t.current,C=Zh(D);if(D&&C||$e(),D.scrollOptions.shouldPublishImmediately){_();return}x()},[x,_]),T=Je((D,C)=>{t.current&&$e();const G=u.current,H=G.getDroppableRef();H||$e();const V=a5(H),W={ref:H,descriptor:f,env:V,scrollOptions:C};t.current=W;const re=c5({ref:H,descriptor:f,env:V,windowScroll:D,direction:G.direction,isDropDisabled:G.isDropDisabled,isCombineEnabled:G.isCombineEnabled,shouldClipSubject:!G.ignoreContainerClipping}),ee=V.closestScrollable;return ee&&(ee.setAttribute(Ww.contextId,n.contextId),ee.addEventListener("scroll",S,n1(W.scrollOptions))),re},[n.contextId,f,S,u]),k=Je(()=>{const D=t.current,C=Zh(D);return D&&C||$e(),fb(C)},[]),A=Je(()=>{const D=t.current;D||$e();const C=Zh(D);t.current=null,C&&(x.cancel(),C.removeAttribute(Ww.contextId),C.removeEventListener("scroll",S,n1(D.scrollOptions)))},[S,x]),M=Je(D=>{const C=t.current;C||$e();const G=Zh(C);G||$e(),G.scrollTop+=D.y,G.scrollLeft+=D.x},[]),R=kt(()=>({getDimensionAndWatchScroll:T,getScrollWhileDragging:k,dragStopped:A,scroll:M}),[A,T,k,M]),N=kt(()=>({uniqueId:s,descriptor:f,callbacks:R}),[R,f,s]);ui(()=>(m.current=N.descriptor,o.droppable.register(N),()=>{t.current&&A(),o.droppable.unregister(N)}),[R,f,A,N,l,o.droppable]),ui(()=>{t.current&&l.updateDroppableIsEnabled(m.current.id,!e.isDropDisabled)},[e.isDropDisabled,l]),ui(()=>{t.current&&l.updateDroppableIsCombineEnabled(m.current.id,e.isCombineEnabled)},[e.isCombineEnabled,l])}function ig(){}const r1={width:0,height:0,margin:xM},f5=({isAnimatingOpenOnMount:e,placeholder:t,animate:n})=>e||n==="close"?r1:{height:t.client.borderBox.height,width:t.client.borderBox.width,margin:t.client.margin},m5=({isAnimatingOpenOnMount:e,placeholder:t,animate:n})=>{const s=f5({isAnimatingOpenOnMount:e,placeholder:t,animate:n});return{display:t.display,boxSizing:"border-box",width:s.width,height:s.height,marginTop:s.margin.top,marginRight:s.margin.right,marginBottom:s.margin.bottom,marginLeft:s.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:n!=="none"?Ku.placeholder:null}},p5=e=>{const t=P.useRef(null),n=Je(()=>{t.current&&(clearTimeout(t.current),t.current=null)},[]),{animate:s,onTransitionEnd:o,onClose:l,contextId:u}=e,[f,m]=P.useState(e.animate==="open");P.useEffect(()=>f?s!=="open"?(n(),m(!1),ig):t.current?ig:(t.current=setTimeout(()=>{t.current=null,m(!1)}),n):ig,[s,f,n]);const p=Je(_=>{_.propertyName==="height"&&(o(),s==="close"&&l())},[s,l,o]),b=m5({isAnimatingOpenOnMount:f,animate:e.animate,placeholder:e.placeholder});return nn.createElement(e.placeholder.tagName,{style:b,"data-rfd-placeholder-context-id":u,onTransitionEnd:p,ref:e.innerRef})};var g5=nn.memo(p5);class b5 extends nn.PureComponent{constructor(...t){super(...t),this.state={isVisible:!!this.props.on,data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{this.state.animate==="close"&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(t,n){return t.shouldAnimate?t.on?{isVisible:!0,data:t.on,animate:"open"}:n.isVisible?{isVisible:!0,data:n.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!t.on,data:t.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const t={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(t)}}const y5=e=>{const t=P.useContext(Nm);t||$e();const{contextId:n,isMovementAllowed:s}=t,o=P.useRef(null),l=P.useRef(null),{children:u,droppableId:f,type:m,mode:p,direction:b,ignoreContainerClipping:_,isDropDisabled:x,isCombineEnabled:S,snapshot:T,useClone:k,updateViewportMaxScroll:A,getContainerForClone:M}=e,R=Je(()=>o.current,[]),N=Je((ee=null)=>{o.current=ee},[]);Je(()=>l.current,[]);const D=Je((ee=null)=>{l.current=ee},[]),C=Je(()=>{s()&&A({maxScroll:BE()})},[s,A]);h5({droppableId:f,type:m,mode:p,direction:b,isDropDisabled:x,isCombineEnabled:S,ignoreContainerClipping:_,getDroppableRef:R});const G=kt(()=>nn.createElement(b5,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},({onClose:ee,data:q,animate:te})=>nn.createElement(g5,{placeholder:q,onClose:ee,innerRef:D,animate:te,contextId:n,onTransitionEnd:C})),[n,C,e.placeholder,e.shouldAnimatePlaceholder,D]),H=kt(()=>({innerRef:N,placeholder:G,droppableProps:{"data-rfd-droppable-id":f,"data-rfd-droppable-context-id":n}}),[n,f,G,N]),V=k?k.dragging.draggableId:null,W=kt(()=>({droppableId:f,type:m,isUsingCloneFor:V}),[f,V,m]);function re(){if(!k)return null;const{dragging:ee,render:q}=k,te=nn.createElement(QE,{draggableId:ee.draggableId,index:ee.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(oe,Se)=>q(oe,Se,ee));return aD.createPortal(te,M())}return nn.createElement(vy.Provider,{value:W},u(H,T),re())};function v5(){return document.body||$e(),document.body}const i1={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:v5},rT=e=>{let t={...e},n;for(n in i1)e[n]===void 0&&(t={...t,[n]:i1[n]});return t},sg=(e,t)=>e===t.droppable.type,s1=(e,t)=>t.draggables[e.draggable.id],_5=()=>{const e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t={...e,shouldAnimatePlaceholder:!1},n=Vn(l=>({draggableId:l.id,type:l.type,source:{index:l.index,droppableId:l.droppableId}})),s=Vn((l,u,f,m,p,b)=>{const _=p.descriptor.id;if(p.descriptor.droppableId===l){const T=b?{render:b,dragging:n(p.descriptor)}:null,k={isDraggingOver:f,draggingOverWith:f?_:null,draggingFromThisWith:_,isUsingPlaceholder:!0};return{placeholder:p.placeholder,shouldAnimatePlaceholder:!1,snapshot:k,useClone:T}}if(!u)return t;if(!m)return e;const S={isDraggingOver:f,draggingOverWith:_,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:p.placeholder,shouldAnimatePlaceholder:!0,snapshot:S,useClone:null}});return(l,u)=>{const f=rT(u),m=f.droppableId,p=f.type,b=!f.isDropDisabled,_=f.renderClone;if(id(l)){const x=l.critical;if(!sg(p,x))return t;const S=s1(x,l.dimensions),T=ci(l.impact)===m;return s(m,b,T,T,S,_)}if(l.phase==="DROP_ANIMATING"){const x=l.completed;if(!sg(p,x.critical))return t;const S=s1(x.critical,l.dimensions);return s(m,b,XE(x.result)===m,ci(x.impact)===m,S,_)}if(l.phase==="IDLE"&&l.completed&&!l.shouldFlush){const x=l.completed;if(!sg(p,x.critical))return t;const S=ci(x.impact)===m,T=!!(x.impact.at&&x.impact.at.type==="COMBINE"),k=x.critical.droppable.id===m;return S?T?e:t:k?e:t}return t}},x5={updateViewportMaxScroll:CC},il=tE(_5,x5,(e,t,n)=>({...rT(n),...e,...t}),{context:gy,areStatePropsEqual:WE})(y5);var Vs={},Vh={},mb=function(e,t){return mb=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(n[o]=s[o])},mb(e,t)};function iT(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");mb(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var Jf=function(){return Jf=Object.assign||function(t){for(var n,s=1,o=arguments.length;s<o;s++){n=arguments[s];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(t[l]=n[l])}return t},Jf.apply(this,arguments)};function jc(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(n[s[o]]=e[s[o]]);return n}function sT(e,t,n,s){var o=arguments.length,l=o<3?t:s===null?s=Object.getOwnPropertyDescriptor(t,n):s,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(e,t,n,s);else for(var f=e.length-1;f>=0;f--)(u=e[f])&&(l=(o<3?u(l):o>3?u(t,n,l):u(t,n))||l);return o>3&&l&&Object.defineProperty(t,n,l),l}function aT(e,t){return function(n,s){t(n,s,e)}}function oT(e,t,n,s,o,l){function u(M){if(M!==void 0&&typeof M!="function")throw new TypeError("Function expected");return M}for(var f=s.kind,m=f==="getter"?"get":f==="setter"?"set":"value",p=!t&&e?s.static?e:e.prototype:null,b=t||(p?Object.getOwnPropertyDescriptor(p,s.name):{}),_,x=!1,S=n.length-1;S>=0;S--){var T={};for(var k in s)T[k]=k==="access"?{}:s[k];for(var k in s.access)T.access[k]=s.access[k];T.addInitializer=function(M){if(x)throw new TypeError("Cannot add initializers after decoration has completed");l.push(u(M||null))};var A=(0,n[S])(f==="accessor"?{get:b.get,set:b.set}:b[m],T);if(f==="accessor"){if(A===void 0)continue;if(A===null||typeof A!="object")throw new TypeError("Object expected");(_=u(A.get))&&(b.get=_),(_=u(A.set))&&(b.set=_),(_=u(A.init))&&o.unshift(_)}else(_=u(A))&&(f==="field"?o.unshift(_):b[m]=_)}p&&Object.defineProperty(p,s.name,b),x=!0}function lT(e,t,n){for(var s=arguments.length>2,o=0;o<t.length;o++)n=s?t[o].call(e,n):t[o].call(e);return s?n:void 0}function cT(e){return typeof e=="symbol"?e:"".concat(e)}function uT(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})}function dT(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function Ze(e,t,n,s){function o(l){return l instanceof n?l:new n(function(u){u(l)})}return new(n||(n=Promise))(function(l,u){function f(b){try{p(s.next(b))}catch(_){u(_)}}function m(b){try{p(s.throw(b))}catch(_){u(_)}}function p(b){b.done?l(b.value):o(b.value).then(f,m)}p((s=s.apply(e,t||[])).next())})}function hT(e,t){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},s,o,l,u=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return u.next=f(0),u.throw=f(1),u.return=f(2),typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(p){return function(b){return m([p,b])}}function m(p){if(s)throw new TypeError("Generator is already executing.");for(;u&&(u=0,p[0]&&(n=0)),n;)try{if(s=1,o&&(l=p[0]&2?o.return:p[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,p[1])).done)return l;switch(o=0,l&&(p=[p[0]&2,l.value]),p[0]){case 0:case 1:l=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,o=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!l||p[1]>l[0]&&p[1]<l[3])){n.label=p[1];break}if(p[0]===6&&n.label<l[1]){n.label=l[1],l=p;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(p);break}l[2]&&n.ops.pop(),n.trys.pop();continue}p=t.call(e,n)}catch(b){p=[6,b],o=0}finally{s=l=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}var Dm=Object.create?(function(e,t,n,s){s===void 0&&(s=n);var o=Object.getOwnPropertyDescriptor(t,n);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,s,o)}):(function(e,t,n,s){s===void 0&&(s=n),e[s]=t[n]});function fT(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&Dm(t,e,n)}function Qf(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],s=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&s>=e.length&&(e=void 0),{value:e&&e[s++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function _y(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var s=n.call(e),o,l=[],u;try{for(;(t===void 0||t-- >0)&&!(o=s.next()).done;)l.push(o.value)}catch(f){u={error:f}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(u)throw u.error}}return l}function mT(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(_y(arguments[t]));return e}function pT(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var s=Array(e),o=0,t=0;t<n;t++)for(var l=arguments[t],u=0,f=l.length;u<f;u++,o++)s[o]=l[u];return s}function gT(e,t,n){if(n||arguments.length===2)for(var s=0,o=t.length,l;s<o;s++)(l||!(s in t))&&(l||(l=Array.prototype.slice.call(t,0,s)),l[s]=t[s]);return e.concat(l||Array.prototype.slice.call(t))}function xc(e){return this instanceof xc?(this.v=e,this):new xc(e)}function bT(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=n.apply(e,t||[]),o,l=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),f("next"),f("throw"),f("return",u),o[Symbol.asyncIterator]=function(){return this},o;function u(S){return function(T){return Promise.resolve(T).then(S,_)}}function f(S,T){s[S]&&(o[S]=function(k){return new Promise(function(A,M){l.push([S,k,A,M])>1||m(S,k)})},T&&(o[S]=T(o[S])))}function m(S,T){try{p(s[S](T))}catch(k){x(l[0][3],k)}}function p(S){S.value instanceof xc?Promise.resolve(S.value.v).then(b,_):x(l[0][2],S)}function b(S){m("next",S)}function _(S){m("throw",S)}function x(S,T){S(T),l.shift(),l.length&&m(l[0][0],l[0][1])}}function yT(e){var t,n;return t={},s("next"),s("throw",function(o){throw o}),s("return"),t[Symbol.iterator]=function(){return this},t;function s(o,l){t[o]=e[o]?function(u){return(n=!n)?{value:xc(e[o](u)),done:!1}:l?l(u):u}:l}}function vT(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Qf=="function"?Qf(e):e[Symbol.iterator](),n={},s("next"),s("throw"),s("return"),n[Symbol.asyncIterator]=function(){return this},n);function s(l){n[l]=e[l]&&function(u){return new Promise(function(f,m){u=e[l](u),o(f,m,u.done,u.value)})}}function o(l,u,f,m){Promise.resolve(m).then(function(p){l({value:p,done:f})},u)}}function _T(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var w5=Object.create?(function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}):function(e,t){e.default=t},pb=function(e){return pb=Object.getOwnPropertyNames||function(t){var n=[];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[n.length]=s);return n},pb(e)};function xT(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n=pb(e),s=0;s<n.length;s++)n[s]!=="default"&&Dm(t,e,n[s]);return w5(t,e),t}function wT(e){return e&&e.__esModule?e:{default:e}}function ST(e,t,n,s){if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?s:n==="a"?s.call(e):s?s.value:t.get(e)}function ET(e,t,n,s,o){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?o.call(e,n):o?o.value=n:t.set(e,n),n}function TT(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function kT(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var s,o;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");s=t[Symbol.asyncDispose]}if(s===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");s=t[Symbol.dispose],n&&(o=s)}if(typeof s!="function")throw new TypeError("Object not disposable.");o&&(s=function(){try{o.call(this)}catch(l){return Promise.reject(l)}}),e.stack.push({value:t,dispose:s,async:n})}else n&&e.stack.push({async:!0});return t}var S5=typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var s=new Error(n);return s.name="SuppressedError",s.error=e,s.suppressed=t,s};function AT(e){function t(l){e.error=e.hasError?new S5(l,e.error,"An error was suppressed during disposal."):l,e.hasError=!0}var n,s=0;function o(){for(;n=e.stack.pop();)try{if(!n.async&&s===1)return s=0,e.stack.push(n),Promise.resolve().then(o);if(n.dispose){var l=n.dispose.call(n.value);if(n.async)return s|=2,Promise.resolve(l).then(o,function(u){return t(u),o()})}else s|=1}catch(u){t(u)}if(s===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return o()}function jT(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,s,o,l,u){return s?t?".jsx":".js":o&&(!l||!u)?n:o+l+"."+u.toLowerCase()+"js"}):e}const E5={__extends:iT,__assign:Jf,__rest:jc,__decorate:sT,__param:aT,__esDecorate:oT,__runInitializers:lT,__propKey:cT,__setFunctionName:uT,__metadata:dT,__awaiter:Ze,__generator:hT,__createBinding:Dm,__exportStar:fT,__values:Qf,__read:_y,__spread:mT,__spreadArrays:pT,__spreadArray:gT,__await:xc,__asyncGenerator:bT,__asyncDelegator:yT,__asyncValues:vT,__makeTemplateObject:_T,__importStar:xT,__importDefault:wT,__classPrivateFieldGet:ST,__classPrivateFieldSet:ET,__classPrivateFieldIn:TT,__addDisposableResource:kT,__disposeResources:AT,__rewriteRelativeImportExtension:jT},T5=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:kT,get __assign(){return Jf},__asyncDelegator:yT,__asyncGenerator:bT,__asyncValues:vT,__await:xc,__awaiter:Ze,__classPrivateFieldGet:ST,__classPrivateFieldIn:TT,__classPrivateFieldSet:ET,__createBinding:Dm,__decorate:sT,__disposeResources:AT,__esDecorate:oT,__exportStar:fT,__extends:iT,__generator:hT,__importDefault:wT,__importStar:xT,__makeTemplateObject:_T,__metadata:dT,__param:aT,__propKey:cT,__read:_y,__rest:jc,__rewriteRelativeImportExtension:jT,__runInitializers:lT,__setFunctionName:uT,__spread:mT,__spreadArray:gT,__spreadArrays:pT,__values:Qf,default:E5},Symbol.toStringTag,{value:"Module"})),k5=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);let Mm=class extends Error{constructor(t,n="FunctionsError",s){super(t),this.name=n,this.context=s}},NT=class extends Mm{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}},gb=class extends Mm{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}},bb=class extends Mm{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}};var em;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(em||(em={}));class A5{constructor(t,{headers:n={},customFetch:s,region:o=em.Any}={}){this.url=t,this.headers=n,this.region=o,this.fetch=k5(s)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return Ze(this,arguments,void 0,function*(n,s={}){var o;let l,u;try{const{headers:f,method:m,body:p,signal:b,timeout:_}=s;let x={},{region:S}=s;S||(S=this.region);const T=new URL(`${this.url}/${n}`);S&&S!=="any"&&(x["x-region"]=S,T.searchParams.set("forceFunctionRegion",S));let k;p&&(f&&!Object.prototype.hasOwnProperty.call(f,"Content-Type")||!f)?typeof Blob<"u"&&p instanceof Blob||p instanceof ArrayBuffer?(x["Content-Type"]="application/octet-stream",k=p):typeof p=="string"?(x["Content-Type"]="text/plain",k=p):typeof FormData<"u"&&p instanceof FormData?k=p:(x["Content-Type"]="application/json",k=JSON.stringify(p)):k=p;let A=b;_&&(u=new AbortController,l=setTimeout(()=>u.abort(),_),b?(A=u.signal,b.addEventListener("abort",()=>u.abort())):A=u.signal);const M=yield this.fetch(T.toString(),{method:m||"POST",headers:Object.assign(Object.assign(Object.assign({},x),this.headers),f),body:k,signal:A}).catch(C=>{throw new NT(C)}),R=M.headers.get("x-relay-error");if(R&&R==="true")throw new gb(M);if(!M.ok)throw new bb(M);let N=((o=M.headers.get("Content-Type"))!==null&&o!==void 0?o:"text/plain").split(";")[0].trim(),D;return N==="application/json"?D=yield M.json():N==="application/octet-stream"||N==="application/pdf"?D=yield M.blob():N==="text/event-stream"?D=M:N==="multipart/form-data"?D=yield M.formData():D=yield M.text(),{data:D,error:null,response:M}}catch(f){return{data:null,error:f,response:f instanceof bb||f instanceof gb?f.context:void 0}}finally{l&&clearTimeout(l)}})}}const j5=Object.freeze(Object.defineProperty({__proto__:null,get FunctionRegion(){return em},FunctionsClient:A5,FunctionsError:Mm,FunctionsFetchError:NT,FunctionsHttpError:bb,FunctionsRelayError:gb},Symbol.toStringTag,{value:"Module"})),OT=hd(j5);var hr={};const Nc=hd(T5);var Kh={},Wh={},Xh={},Jh={},Qh={},ef={},a1;function DT(){if(a1)return ef;a1=1,Object.defineProperty(ef,"__esModule",{value:!0});class e extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return ef.default=e,ef}var o1;function MT(){if(o1)return Qh;o1=1,Object.defineProperty(Qh,"__esModule",{value:!0});const t=Nc.__importDefault(DT());let n=class{constructor(o){var l,u;this.shouldThrowOnError=!1,this.method=o.method,this.url=o.url,this.headers=new Headers(o.headers),this.schema=o.schema,this.body=o.body,this.shouldThrowOnError=(l=o.shouldThrowOnError)!==null&&l!==void 0?l:!1,this.signal=o.signal,this.isMaybeSingle=(u=o.isMaybeSingle)!==null&&u!==void 0?u:!1,o.fetch?this.fetch=o.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(o,l){return this.headers=new Headers(this.headers),this.headers.set(o,l),this}then(o,l){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const u=this.fetch;let f=u(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async m=>{var p,b,_,x;let S=null,T=null,k=null,A=m.status,M=m.statusText;if(m.ok){if(this.method!=="HEAD"){const C=await m.text();C===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((p=this.headers.get("Accept"))===null||p===void 0)&&p.includes("application/vnd.pgrst.plan+text"))?T=C:T=JSON.parse(C))}const N=(b=this.headers.get("Prefer"))===null||b===void 0?void 0:b.match(/count=(exact|planned|estimated)/),D=(_=m.headers.get("content-range"))===null||_===void 0?void 0:_.split("/");N&&D&&D.length>1&&(k=parseInt(D[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(T)&&(T.length>1?(S={code:"PGRST116",details:`Results contain ${T.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},T=null,k=null,A=406,M="Not Acceptable"):T.length===1?T=T[0]:T=null)}else{const N=await m.text();try{S=JSON.parse(N),Array.isArray(S)&&m.status===404&&(T=[],S=null,A=200,M="OK")}catch{m.status===404&&N===""?(A=204,M="No Content"):S={message:N}}if(S&&this.isMaybeSingle&&(!((x=S?.details)===null||x===void 0)&&x.includes("0 rows"))&&(S=null,A=200,M="OK"),S&&this.shouldThrowOnError)throw new t.default(S)}return{error:S,data:T,count:k,status:A,statusText:M}});return this.shouldThrowOnError||(f=f.catch(m=>{var p,b,_,x,S,T;let k="";const A=m?.cause;if(A){const M=(p=A?.message)!==null&&p!==void 0?p:"",R=(b=A?.code)!==null&&b!==void 0?b:"";k=`${(_=m?.name)!==null&&_!==void 0?_:"FetchError"}: ${m?.message}`,k+=`

Caused by: ${(x=A?.name)!==null&&x!==void 0?x:"Error"}: ${M}`,R&&(k+=` (${R})`),A?.stack&&(k+=`
${A.stack}`)}else k=(S=m?.stack)!==null&&S!==void 0?S:"";return{error:{message:`${(T=m?.name)!==null&&T!==void 0?T:"FetchError"}: ${m?.message}`,details:k,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),f.then(o,l)}returns(){return this}overrideTypes(){return this}};return Qh.default=n,Qh}var l1;function CT(){if(l1)return Jh;l1=1,Object.defineProperty(Jh,"__esModule",{value:!0});const t=Nc.__importDefault(MT());let n=class extends t.default{select(o){let l=!1;const u=(o??"*").split("").map(f=>/\s/.test(f)&&!l?"":(f==='"'&&(l=!l),f)).join("");return this.url.searchParams.set("select",u),this.headers.append("Prefer","return=representation"),this}order(o,{ascending:l=!0,nullsFirst:u,foreignTable:f,referencedTable:m=f}={}){const p=m?`${m}.order`:"order",b=this.url.searchParams.get(p);return this.url.searchParams.set(p,`${b?`${b},`:""}${o}.${l?"asc":"desc"}${u===void 0?"":u?".nullsfirst":".nullslast"}`),this}limit(o,{foreignTable:l,referencedTable:u=l}={}){const f=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(f,`${o}`),this}range(o,l,{foreignTable:u,referencedTable:f=u}={}){const m=typeof f>"u"?"offset":`${f}.offset`,p=typeof f>"u"?"limit":`${f}.limit`;return this.url.searchParams.set(m,`${o}`),this.url.searchParams.set(p,`${l-o+1}`),this}abortSignal(o){return this.signal=o,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:o=!1,verbose:l=!1,settings:u=!1,buffers:f=!1,wal:m=!1,format:p="text"}={}){var b;const _=[o?"analyze":null,l?"verbose":null,u?"settings":null,f?"buffers":null,m?"wal":null].filter(Boolean).join("|"),x=(b=this.headers.get("Accept"))!==null&&b!==void 0?b:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${p}; for="${x}"; options=${_};`),p==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(o){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${o}`),this}};return Jh.default=n,Jh}var c1;function xy(){if(c1)return Xh;c1=1,Object.defineProperty(Xh,"__esModule",{value:!0});const t=Nc.__importDefault(CT()),n=new RegExp("[,()]");let s=class extends t.default{eq(l,u){return this.url.searchParams.append(l,`eq.${u}`),this}neq(l,u){return this.url.searchParams.append(l,`neq.${u}`),this}gt(l,u){return this.url.searchParams.append(l,`gt.${u}`),this}gte(l,u){return this.url.searchParams.append(l,`gte.${u}`),this}lt(l,u){return this.url.searchParams.append(l,`lt.${u}`),this}lte(l,u){return this.url.searchParams.append(l,`lte.${u}`),this}like(l,u){return this.url.searchParams.append(l,`like.${u}`),this}likeAllOf(l,u){return this.url.searchParams.append(l,`like(all).{${u.join(",")}}`),this}likeAnyOf(l,u){return this.url.searchParams.append(l,`like(any).{${u.join(",")}}`),this}ilike(l,u){return this.url.searchParams.append(l,`ilike.${u}`),this}ilikeAllOf(l,u){return this.url.searchParams.append(l,`ilike(all).{${u.join(",")}}`),this}ilikeAnyOf(l,u){return this.url.searchParams.append(l,`ilike(any).{${u.join(",")}}`),this}regexMatch(l,u){return this.url.searchParams.append(l,`match.${u}`),this}regexIMatch(l,u){return this.url.searchParams.append(l,`imatch.${u}`),this}is(l,u){return this.url.searchParams.append(l,`is.${u}`),this}isDistinct(l,u){return this.url.searchParams.append(l,`isdistinct.${u}`),this}in(l,u){const f=Array.from(new Set(u)).map(m=>typeof m=="string"&&n.test(m)?`"${m}"`:`${m}`).join(",");return this.url.searchParams.append(l,`in.(${f})`),this}contains(l,u){return typeof u=="string"?this.url.searchParams.append(l,`cs.${u}`):Array.isArray(u)?this.url.searchParams.append(l,`cs.{${u.join(",")}}`):this.url.searchParams.append(l,`cs.${JSON.stringify(u)}`),this}containedBy(l,u){return typeof u=="string"?this.url.searchParams.append(l,`cd.${u}`):Array.isArray(u)?this.url.searchParams.append(l,`cd.{${u.join(",")}}`):this.url.searchParams.append(l,`cd.${JSON.stringify(u)}`),this}rangeGt(l,u){return this.url.searchParams.append(l,`sr.${u}`),this}rangeGte(l,u){return this.url.searchParams.append(l,`nxl.${u}`),this}rangeLt(l,u){return this.url.searchParams.append(l,`sl.${u}`),this}rangeLte(l,u){return this.url.searchParams.append(l,`nxr.${u}`),this}rangeAdjacent(l,u){return this.url.searchParams.append(l,`adj.${u}`),this}overlaps(l,u){return typeof u=="string"?this.url.searchParams.append(l,`ov.${u}`):this.url.searchParams.append(l,`ov.{${u.join(",")}}`),this}textSearch(l,u,{config:f,type:m}={}){let p="";m==="plain"?p="pl":m==="phrase"?p="ph":m==="websearch"&&(p="w");const b=f===void 0?"":`(${f})`;return this.url.searchParams.append(l,`${p}fts${b}.${u}`),this}match(l){return Object.entries(l).forEach(([u,f])=>{this.url.searchParams.append(u,`eq.${f}`)}),this}not(l,u,f){return this.url.searchParams.append(l,`not.${u}.${f}`),this}or(l,{foreignTable:u,referencedTable:f=u}={}){const m=f?`${f}.or`:"or";return this.url.searchParams.append(m,`(${l})`),this}filter(l,u,f){return this.url.searchParams.append(l,`${u}.${f}`),this}};return Xh.default=s,Xh}var u1;function RT(){if(u1)return Wh;u1=1,Object.defineProperty(Wh,"__esModule",{value:!0});const t=Nc.__importDefault(xy());let n=class{constructor(o,{headers:l={},schema:u,fetch:f}){this.url=o,this.headers=new Headers(l),this.schema=u,this.fetch=f}select(o,l){const{head:u=!1,count:f}=l??{},m=u?"HEAD":"GET";let p=!1;const b=(o??"*").split("").map(_=>/\s/.test(_)&&!p?"":(_==='"'&&(p=!p),_)).join("");return this.url.searchParams.set("select",b),f&&this.headers.append("Prefer",`count=${f}`),new t.default({method:m,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(o,{count:l,defaultToNull:u=!0}={}){var f;const m="POST";if(l&&this.headers.append("Prefer",`count=${l}`),u||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const p=o.reduce((b,_)=>b.concat(Object.keys(_)),[]);if(p.length>0){const b=[...new Set(p)].map(_=>`"${_}"`);this.url.searchParams.set("columns",b.join(","))}}return new t.default({method:m,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}upsert(o,{onConflict:l,ignoreDuplicates:u=!1,count:f,defaultToNull:m=!0}={}){var p;const b="POST";if(this.headers.append("Prefer",`resolution=${u?"ignore":"merge"}-duplicates`),l!==void 0&&this.url.searchParams.set("on_conflict",l),f&&this.headers.append("Prefer",`count=${f}`),m||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const _=o.reduce((x,S)=>x.concat(Object.keys(S)),[]);if(_.length>0){const x=[...new Set(_)].map(S=>`"${S}"`);this.url.searchParams.set("columns",x.join(","))}}return new t.default({method:b,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}update(o,{count:l}={}){var u;const f="PATCH";return l&&this.headers.append("Prefer",`count=${l}`),new t.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}delete({count:o}={}){var l;const u="DELETE";return o&&this.headers.append("Prefer",`count=${o}`),new t.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}};return Wh.default=n,Wh}var d1;function N5(){if(d1)return Kh;d1=1,Object.defineProperty(Kh,"__esModule",{value:!0});const e=Nc,t=e.__importDefault(RT()),n=e.__importDefault(xy());let s=class LT{constructor(l,{headers:u={},schema:f,fetch:m}={}){this.url=l,this.headers=new Headers(u),this.schemaName=f,this.fetch=m}from(l){if(!l||typeof l!="string"||l.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const u=new URL(`${this.url}/${l}`);return new t.default(u,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(l){return new LT(this.url,{headers:this.headers,schema:l,fetch:this.fetch})}rpc(l,u={},{head:f=!1,get:m=!1,count:p}={}){var b;let _;const x=new URL(`${this.url}/rpc/${l}`);let S;f||m?(_=f?"HEAD":"GET",Object.entries(u).filter(([k,A])=>A!==void 0).map(([k,A])=>[k,Array.isArray(A)?`{${A.join(",")}}`:`${A}`]).forEach(([k,A])=>{x.searchParams.append(k,A)})):(_="POST",S=u);const T=new Headers(this.headers);return p&&T.set("Prefer",`count=${p}`),new n.default({method:_,url:x,headers:T,schema:this.schemaName,body:S,fetch:(b=this.fetch)!==null&&b!==void 0?b:fetch})}};return Kh.default=s,Kh}var h1;function BT(){if(h1)return hr;h1=1,Object.defineProperty(hr,"__esModule",{value:!0}),hr.PostgrestError=hr.PostgrestBuilder=hr.PostgrestTransformBuilder=hr.PostgrestFilterBuilder=hr.PostgrestQueryBuilder=hr.PostgrestClient=void 0;const e=Nc,t=e.__importDefault(N5());hr.PostgrestClient=t.default;const n=e.__importDefault(RT());hr.PostgrestQueryBuilder=n.default;const s=e.__importDefault(xy());hr.PostgrestFilterBuilder=s.default;const o=e.__importDefault(CT());hr.PostgrestTransformBuilder=o.default;const l=e.__importDefault(MT());hr.PostgrestBuilder=l.default;const u=e.__importDefault(DT());return hr.PostgrestError=u.default,hr.default={PostgrestClient:t.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:s.default,PostgrestTransformBuilder:o.default,PostgrestBuilder:l.default,PostgrestError:u.default},hr}class PT{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const s=n.node,o=parseInt(s.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const s=this.getWebSocketConstructor();return new s(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const O5="2.86.2",D5=`realtime-js/${O5}`,$T="1.0.0",M5="2.0.0",f1=$T,yb=1e4,C5=1e3,R5=100;var tl;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(tl||(tl={}));var Ln;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Ln||(Ln={}));var ns;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(ns||(ns={}));var vb;(function(e){e.websocket="websocket"})(vb||(vb={}));var nl;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(nl||(nl={}));class L5{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,n){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(t));let s=[t.join_ref,t.ref,t.topic,t.event,t.payload];return n(JSON.stringify(s))}_binaryEncodeUserBroadcastPush(t){var n;return this._isArrayBuffer((n=t.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var n,s;const o=(s=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&s!==void 0?s:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,o)}_encodeJsonUserBroadcastPush(t){var n,s;const o=(s=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&s!==void 0?s:{},u=new TextEncoder().encode(JSON.stringify(o)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,u)}_encodeUserBroadcastPush(t,n,s){var o,l;const u=t.topic,f=(o=t.ref)!==null&&o!==void 0?o:"",m=(l=t.join_ref)!==null&&l!==void 0?l:"",p=t.payload.event,b=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},_=Object.keys(b).length===0?"":JSON.stringify(b);if(m.length>255)throw new Error(`joinRef length ${m.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`ref length ${f.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`topic length ${u.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`userEvent length ${p.length} exceeds maximum of 255`);if(_.length>255)throw new Error(`metadata length ${_.length} exceeds maximum of 255`);const x=this.USER_BROADCAST_PUSH_META_LENGTH+m.length+f.length+u.length+p.length+_.length,S=new ArrayBuffer(this.HEADER_LENGTH+x);let T=new DataView(S),k=0;T.setUint8(k++,this.KINDS.userBroadcastPush),T.setUint8(k++,m.length),T.setUint8(k++,f.length),T.setUint8(k++,u.length),T.setUint8(k++,p.length),T.setUint8(k++,_.length),T.setUint8(k++,n),Array.from(m,M=>T.setUint8(k++,M.charCodeAt(0))),Array.from(f,M=>T.setUint8(k++,M.charCodeAt(0))),Array.from(u,M=>T.setUint8(k++,M.charCodeAt(0))),Array.from(p,M=>T.setUint8(k++,M.charCodeAt(0))),Array.from(_,M=>T.setUint8(k++,M.charCodeAt(0)));var A=new Uint8Array(S.byteLength+s.byteLength);return A.set(new Uint8Array(S),0),A.set(new Uint8Array(s),S.byteLength),A.buffer}decode(t,n){if(this._isArrayBuffer(t)){let s=this._binaryDecode(t);return n(s)}if(typeof t=="string"){const s=JSON.parse(t),[o,l,u,f,m]=s;return n({join_ref:o,ref:l,topic:u,event:f,payload:m})}return n({})}_binaryDecode(t){const n=new DataView(t),s=n.getUint8(0),o=new TextDecoder;switch(s){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,n,o)}}_decodeUserBroadcast(t,n,s){const o=n.getUint8(1),l=n.getUint8(2),u=n.getUint8(3),f=n.getUint8(4);let m=this.HEADER_LENGTH+4;const p=s.decode(t.slice(m,m+o));m=m+o;const b=s.decode(t.slice(m,m+l));m=m+l;const _=s.decode(t.slice(m,m+u));m=m+u;const x=t.slice(m,t.byteLength),S=f===this.JSON_ENCODING?JSON.parse(s.decode(x)):x,T={type:this.BROADCAST_EVENT,event:b,payload:S};return u>0&&(T.meta=JSON.parse(_)),{join_ref:null,ref:null,topic:p,event:this.BROADCAST_EVENT,payload:T}}_isArrayBuffer(t){var n;return t instanceof ArrayBuffer||((n=t?.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(t,n){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([s])=>n.includes(s)))}}class IT{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Vt;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Vt||(Vt={}));const m1=(e,t,n={})=>{var s;const o=(s=n.skipTypes)!==null&&s!==void 0?s:[];return t?Object.keys(t).reduce((l,u)=>(l[u]=B5(u,e,t,o),l),{}):{}},B5=(e,t,n,s)=>{const o=t.find(f=>f.name===e),l=o?.type,u=n[e];return l&&!s.includes(l)?zT(l,u):_b(u)},zT=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return z5(t,n)}switch(e){case Vt.bool:return P5(t);case Vt.float4:case Vt.float8:case Vt.int2:case Vt.int4:case Vt.int8:case Vt.numeric:case Vt.oid:return $5(t);case Vt.json:case Vt.jsonb:return I5(t);case Vt.timestamp:return U5(t);case Vt.abstime:case Vt.date:case Vt.daterange:case Vt.int4range:case Vt.int8range:case Vt.money:case Vt.reltime:case Vt.text:case Vt.time:case Vt.timestamptz:case Vt.timetz:case Vt.tsrange:case Vt.tstzrange:return _b(t);default:return _b(t)}},_b=e=>e,P5=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},$5=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},I5=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},z5=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,s=e[n];if(e[0]==="{"&&s==="}"){let l;const u=e.slice(1,n);try{l=JSON.parse("["+u+"]")}catch{l=u?u.split(","):[]}return l.map(f=>zT(t,f))}return e},U5=e=>typeof e=="string"?e.replace(" ","T"):e,UT=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class ag{constructor(t,n,s={},o=yb){this.channel=t,this.event=n,this.payload=s,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var s;return this._hasReceived(t)&&n((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(s=>s.status===t).forEach(s=>s.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var xb;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(xb||(xb={}));let HT=class Bf{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=n?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},o=>{const{onJoin:l,onLeave:u,onSync:f}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Bf.syncState(this.state,o,l,u),this.pendingDiffs.forEach(m=>{this.state=Bf.syncDiff(this.state,m,l,u)}),this.pendingDiffs=[],f()}),this.channel._on(s.diff,{},o=>{const{onJoin:l,onLeave:u,onSync:f}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=Bf.syncDiff(this.state,o,l,u),f())}),this.onJoin((o,l,u)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:l,newPresences:u})}),this.onLeave((o,l,u)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:l,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,s,o){const l=this.cloneDeep(t),u=this.transformState(n),f={},m={};return this.map(l,(p,b)=>{u[p]||(m[p]=b)}),this.map(u,(p,b)=>{const _=l[p];if(_){const x=b.map(A=>A.presence_ref),S=_.map(A=>A.presence_ref),T=b.filter(A=>S.indexOf(A.presence_ref)<0),k=_.filter(A=>x.indexOf(A.presence_ref)<0);T.length>0&&(f[p]=T),k.length>0&&(m[p]=k)}else f[p]=b}),this.syncDiff(l,{joins:f,leaves:m},s,o)}static syncDiff(t,n,s,o){const{joins:l,leaves:u}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return s||(s=()=>{}),o||(o=()=>{}),this.map(l,(f,m)=>{var p;const b=(p=t[f])!==null&&p!==void 0?p:[];if(t[f]=this.cloneDeep(m),b.length>0){const _=t[f].map(S=>S.presence_ref),x=b.filter(S=>_.indexOf(S.presence_ref)<0);t[f].unshift(...x)}s(f,b,m)}),this.map(u,(f,m)=>{let p=t[f];if(!p)return;const b=m.map(_=>_.presence_ref);p=p.filter(_=>b.indexOf(_.presence_ref)<0),t[f]=p,o(f,p,m),p.length===0&&delete t[f]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(s=>n(s,t[s]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,s)=>{const o=t[s];return"metas"in o?n[s]=o.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):n[s]=o,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var wb;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(wb||(wb={}));var mc;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(mc||(mc={}));var Ss;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Ss||(Ss={}));const H5=Ln;let GT=class FT{constructor(t,n={config:{}},s){var o,l;if(this.topic=t,this.params=n,this.socket=s,this.bindings={},this.state=Ln.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new ag(this,ns.join,this.params,this.timeout),this.rejoinTimer=new IT(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ln.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(u=>u.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ln.closed,this.socket._remove(this)}),this._onError(u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=Ln.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ln.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=Ln.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ns.reply,{},(u,f)=>{this._trigger(this._replyEventName(f),u)}),this.presence=new HT(this),this.broadcastEndpointURL=UT(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((l=(o=this.params.config)===null||o===void 0?void 0:o.broadcast)===null||l===void 0)&&l.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var s,o,l;if(this.socket.isConnected()||this.socket.connect(),this.state==Ln.closed){const{config:{broadcast:u,presence:f,private:m}}=this.params,p=(o=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(S=>S.filter))!==null&&o!==void 0?o:[],b=!!this.bindings[mc.PRESENCE]&&this.bindings[mc.PRESENCE].length>0||((l=this.params.config.presence)===null||l===void 0?void 0:l.enabled)===!0,_={},x={broadcast:u,presence:Object.assign(Object.assign({},f),{enabled:b}),postgres_changes:p,private:m};this.socket.accessTokenValue&&(_.access_token=this.socket.accessTokenValue),this._onError(S=>t?.(Ss.CHANNEL_ERROR,S)),this._onClose(()=>t?.(Ss.CLOSED)),this.updateJoinPayload(Object.assign({config:x},_)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:S})=>{var T;if(this.socket.setAuth(),S===void 0){t?.(Ss.SUBSCRIBED);return}else{const k=this.bindings.postgres_changes,A=(T=k?.length)!==null&&T!==void 0?T:0,M=[];for(let R=0;R<A;R++){const N=k[R],{filter:{event:D,schema:C,table:G,filter:H}}=N,V=S&&S[R];if(V&&V.event===D&&V.schema===C&&V.table===G&&V.filter===H)M.push(Object.assign(Object.assign({},N),{id:V.id}));else{this.unsubscribe(),this.state=Ln.errored,t?.(Ss.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=M,t&&t(Ss.SUBSCRIBED);return}}).receive("error",S=>{this.state=Ln.errored,t?.(Ss.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(S).join(", ")||"error")))}).receive("timeout",()=>{t?.(Ss.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,s){return this.state===Ln.joined&&t===mc.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,s)}async httpSend(t,n,s={}){var o;const l=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(n==null)return Promise.reject("Payload is required for httpSend()");const u={method:"POST",headers:{Authorization:l,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:n,private:this.private}]})},f=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(o=s.timeout)!==null&&o!==void 0?o:this.timeout);if(f.status===202)return{success:!0};let m=f.statusText;try{const p=await f.json();m=p.error||p.message||m}catch{}return Promise.reject(new Error(m))}async send(t,n={}){var s,o;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:l,payload:u}=t,m={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:u,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,m,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);return await((o=p.body)===null||o===void 0?void 0:o.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var u,f,m;const p=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((m=(f=(u=this.params)===null||u===void 0?void 0:u.config)===null||f===void 0?void 0:f.broadcast)===null||m===void 0)&&m.ack)&&l("ok"),p.receive("ok",()=>l("ok")),p.receive("error",()=>l("error")),p.receive("timeout",()=>l("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Ln.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ns.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(o=>{s=new ag(this,ns.leave,{},t),s.receive("ok",()=>{n(),o("ok")}).receive("timeout",()=>{n(),o("timed out")}).receive("error",()=>{o("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s?.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ln.closed,this.bindings={}}async _fetchWithTimeout(t,n,s){const o=new AbortController,l=setTimeout(()=>o.abort(),s),u=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:o.signal}));return clearTimeout(l),u}_push(t,n,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new ag(this,t,n,s);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>R5){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,s){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,s){var o,l;const u=t.toLocaleLowerCase(),{close:f,error:m,leave:p,join:b}=ns;if(s&&[f,m,p,b].indexOf(u)>=0&&s!==this._joinRef())return;let x=this._onMessage(u,n,s);if(n&&!x)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(S=>{var T,k,A;return((T=S.filter)===null||T===void 0?void 0:T.event)==="*"||((A=(k=S.filter)===null||k===void 0?void 0:k.event)===null||A===void 0?void 0:A.toLocaleLowerCase())===u}).map(S=>S.callback(x,s)):(l=this.bindings[u])===null||l===void 0||l.filter(S=>{var T,k,A,M,R,N;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in S){const D=S.id,C=(T=S.filter)===null||T===void 0?void 0:T.event;return D&&((k=n.ids)===null||k===void 0?void 0:k.includes(D))&&(C==="*"||C?.toLocaleLowerCase()===((A=n.data)===null||A===void 0?void 0:A.type.toLocaleLowerCase()))}else{const D=(R=(M=S?.filter)===null||M===void 0?void 0:M.event)===null||R===void 0?void 0:R.toLocaleLowerCase();return D==="*"||D===((N=n?.event)===null||N===void 0?void 0:N.toLocaleLowerCase())}else return S.type.toLocaleLowerCase()===u}).map(S=>{if(typeof x=="object"&&"ids"in x){const T=x.data,{schema:k,table:A,commit_timestamp:M,type:R,errors:N}=T;x=Object.assign(Object.assign({},{schema:k,table:A,commit_timestamp:M,eventType:R,new:{},old:{},errors:N}),this._getPayloadRecords(T))}S.callback(x,s)})}_isClosed(){return this.state===Ln.closed}_isJoined(){return this.state===Ln.joined}_isJoining(){return this.state===Ln.joining}_isLeaving(){return this.state===Ln.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,s){const o=t.toLocaleLowerCase(),l={type:o,filter:n,callback:s};return this.bindings[o]?this.bindings[o].push(l):this.bindings[o]=[l],this}_off(t,n){const s=t.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(o=>{var l;return!(((l=o.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===s&&FT.isEqual(o.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const s in t)if(t[s]!==n[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(ns.close,{},t)}_onError(t){this._on(ns.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ln.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=m1(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=m1(t.columns,t.old_record)),n}};const og=()=>{},tf={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},G5=[1e3,2e3,5e3,1e4],F5=1e4,Y5=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;let q5=class{constructor(t,n){var s;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=yb,this.transport=null,this.heartbeatIntervalMs=tf.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=og,this.ref=0,this.reconnectTimer=null,this.vsn=f1,this.logger=og,this.conn=null,this.sendBuffer=[],this.serializer=new L5,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=o=>o?(...l)=>o(...l):(...l)=>fetch(...l),!(!((s=n?.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${vb.websocket}`,this.httpEndpoint=UT(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=PT.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,s){this.logger(t,n,s)}connectionState(){switch(this.conn&&this.conn.readyState){case tl.connecting:return nl.Connecting;case tl.open:return nl.Open;case tl.closing:return nl.Closing;default:return nl.Closed}}isConnected(){return this.connectionState()===nl.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const s=`realtime:${t}`,o=this.getChannels().find(l=>l.topic===s);if(o)return o;{const l=new GT(`realtime:${t}`,n,this);return this.channels.push(l),l}}push(t){const{topic:n,event:s,payload:o,ref:l}=t,u=()=>{this.encode(t,f=>{var m;(m=this.conn)===null||m===void 0||m.send(f)})};this.log("push",`${n} ${s} (${l})`,o),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(C5,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},tf.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(s=>s.topic===t&&(s._isJoined()||s._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(p){this.log("error","error in heartbeat callback",p)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:o,payload:l,ref:u}=n,f=u?`(${u})`:"",m=l.status||"";this.log("receive",`${m} ${s} ${o} ${f}`.trim(),l),this.channels.filter(p=>p._isMember(s)).forEach(p=>p._trigger(o,l,u)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){if(this.conn){if(this.conn.readyState===tl.open||this.conn.readyState===tl.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(ns.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const s=t.match(/\?/)?"&":"?",o=new URLSearchParams(n);return`${t}${s}${o}`}_workerObjectUrl(t){let n;if(t)n=t;else{const s=new Blob([Y5],{type:"application/javascript"});n=URL.createObjectURL(s)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(s=>{const o={access_token:n,version:D5};n&&s.updateJoinPayload(o),s.joinedOnce&&s._isJoined()&&s._push(ns.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(s=>{try{s(n)}catch(o){this.log("error",`error in ${t} callback`,o)}})}catch(s){this.log("error",`error triggering ${t} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new IT(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},tf.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,s,o,l,u,f,m,p,b,_,x,S;switch(this.transport=(n=t?.transport)!==null&&n!==void 0?n:null,this.timeout=(s=t?.timeout)!==null&&s!==void 0?s:yb,this.heartbeatIntervalMs=(o=t?.heartbeatIntervalMs)!==null&&o!==void 0?o:tf.HEARTBEAT_INTERVAL,this.worker=(l=t?.worker)!==null&&l!==void 0?l:!1,this.accessToken=(u=t?.accessToken)!==null&&u!==void 0?u:null,this.heartbeatCallback=(f=t?.heartbeatCallback)!==null&&f!==void 0?f:og,this.vsn=(m=t?.vsn)!==null&&m!==void 0?m:f1,t?.params&&(this.params=t.params),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(p=t?.reconnectAfterMs)!==null&&p!==void 0?p:(T=>G5[T-1]||F5),this.vsn){case $T:this.encode=(b=t?.encode)!==null&&b!==void 0?b:((T,k)=>k(JSON.stringify(T))),this.decode=(_=t?.decode)!==null&&_!==void 0?_:((T,k)=>k(JSON.parse(T)));break;case M5:this.encode=(x=t?.encode)!==null&&x!==void 0?x:this.serializer.encode.bind(this.serializer),this.decode=(S=t?.decode)!==null&&S!==void 0?S:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t?.workerUrl}}};const Z5=Object.freeze(Object.defineProperty({__proto__:null,REALTIME_CHANNEL_STATES:H5,get REALTIME_LISTEN_TYPES(){return mc},get REALTIME_POSTGRES_CHANGES_LISTEN_EVENT(){return wb},get REALTIME_PRESENCE_LISTEN_EVENTS(){return xb},get REALTIME_SUBSCRIBE_STATES(){return Ss},RealtimeChannel:GT,RealtimeClient:q5,RealtimePresence:HT,WebSocketFactory:PT},Symbol.toStringTag,{value:"Module"})),YT=hd(Z5);class vd extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function on(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class qT extends vd{constructor(t,n,s){super(t),this.name="StorageApiError",this.status=n,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class tm extends vd{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}const wy=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),V5=()=>Response,Sb=e=>{if(Array.isArray(e))return e.map(n=>Sb(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,s])=>{const o=n.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));t[o]=Sb(s)}),t},K5=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},W5=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e),lg=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},X5=(e,t,n)=>Ze(void 0,void 0,void 0,function*(){const s=yield V5();e instanceof s&&!n?.noResolveJson?e.json().then(o=>{const l=e.status||500,u=o?.statusCode||l+"";t(new qT(lg(o),l,u))}).catch(o=>{t(new tm(lg(o),o))}):t(new tm(lg(e),e))}),J5=(e,t,n,s)=>{const o={method:e,headers:t?.headers||{}};return e==="GET"||!s?o:(K5(s)?(o.headers=Object.assign({"Content-Type":"application/json"},t?.headers),o.body=JSON.stringify(s)):o.body=s,t?.duplex&&(o.duplex=t.duplex),Object.assign(Object.assign({},o),n))};function _d(e,t,n,s,o,l){return Ze(this,void 0,void 0,function*(){return new Promise((u,f)=>{e(n,J5(t,s,o,l)).then(m=>{if(!m.ok)throw m;return s?.noResolveJson?m:m.json()}).then(m=>u(m)).catch(m=>X5(m,f,s))})})}function sd(e,t,n,s){return Ze(this,void 0,void 0,function*(){return _d(e,"GET",t,n,s)})}function ts(e,t,n,s,o){return Ze(this,void 0,void 0,function*(){return _d(e,"POST",t,s,o,n)})}function Eb(e,t,n,s,o){return Ze(this,void 0,void 0,function*(){return _d(e,"PUT",t,s,o,n)})}function Q5(e,t,n,s){return Ze(this,void 0,void 0,function*(){return _d(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),s)})}function Sy(e,t,n,s,o){return Ze(this,void 0,void 0,function*(){return _d(e,"DELETE",t,s,o,n)})}class eL{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n}then(t,n){return this.execute().then(t,n)}execute(){return Ze(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(on(t))return{data:null,error:t};throw t}})}}var ZT;class tL{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n,this[ZT]="BlobDownloadBuilder",this.promise=null}asStream(){return new eL(this.downloadFn,this.shouldThrowOnError)}then(t,n){return this.getPromise().then(t,n)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return Ze(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(on(t))return{data:null,error:t};throw t}})}}ZT=Symbol.toStringTag;const nL={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},p1={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class rL{constructor(t,n={},s,o){this.shouldThrowOnError=!1,this.url=t,this.headers=n,this.bucketId=s,this.fetch=wy(o)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,n,s,o){return Ze(this,void 0,void 0,function*(){try{let l;const u=Object.assign(Object.assign({},p1),o);let f=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(u.upsert)});const m=u.metadata;typeof Blob<"u"&&s instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),m&&l.append("metadata",this.encodeMetadata(m)),l.append("",s)):typeof FormData<"u"&&s instanceof FormData?(l=s,l.has("cacheControl")||l.append("cacheControl",u.cacheControl),m&&!l.has("metadata")&&l.append("metadata",this.encodeMetadata(m))):(l=s,f["cache-control"]=`max-age=${u.cacheControl}`,f["content-type"]=u.contentType,m&&(f["x-metadata"]=this.toBase64(this.encodeMetadata(m))),(typeof ReadableStream<"u"&&l instanceof ReadableStream||l&&typeof l=="object"&&"pipe"in l&&typeof l.pipe=="function")&&!u.duplex&&(u.duplex="half")),o?.headers&&(f=Object.assign(Object.assign({},f),o.headers));const p=this._removeEmptyFolders(n),b=this._getFinalPath(p),_=yield(t=="PUT"?Eb:ts)(this.fetch,`${this.url}/object/${b}`,l,Object.assign({headers:f},u?.duplex?{duplex:u.duplex}:{}));return{data:{path:p,id:_.Id,fullPath:_.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(on(l))return{data:null,error:l};throw l}})}upload(t,n,s){return Ze(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,s)})}uploadToSignedUrl(t,n,s,o){return Ze(this,void 0,void 0,function*(){const l=this._removeEmptyFolders(t),u=this._getFinalPath(l),f=new URL(this.url+`/object/upload/sign/${u}`);f.searchParams.set("token",n);try{let m;const p=Object.assign({upsert:p1.upsert},o),b=Object.assign(Object.assign({},this.headers),{"x-upsert":String(p.upsert)});typeof Blob<"u"&&s instanceof Blob?(m=new FormData,m.append("cacheControl",p.cacheControl),m.append("",s)):typeof FormData<"u"&&s instanceof FormData?(m=s,m.append("cacheControl",p.cacheControl)):(m=s,b["cache-control"]=`max-age=${p.cacheControl}`,b["content-type"]=p.contentType);const _=yield Eb(this.fetch,f.toString(),m,{headers:b});return{data:{path:l,fullPath:_.Key},error:null}}catch(m){if(this.shouldThrowOnError)throw m;if(on(m))return{data:null,error:m};throw m}})}createSignedUploadUrl(t,n){return Ze(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t);const o=Object.assign({},this.headers);n?.upsert&&(o["x-upsert"]="true");const l=yield ts(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:o}),u=new URL(this.url+l.url),f=u.searchParams.get("token");if(!f)throw new vd("No token returned by API");return{data:{signedUrl:u.toString(),path:t,token:f},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(on(s))return{data:null,error:s};throw s}})}update(t,n,s){return Ze(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,s)})}move(t,n,s){return Ze(this,void 0,void 0,function*(){try{return{data:yield ts(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:s?.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(on(o))return{data:null,error:o};throw o}})}copy(t,n,s){return Ze(this,void 0,void 0,function*(){try{return{data:{path:(yield ts(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:s?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(on(o))return{data:null,error:o};throw o}})}createSignedUrl(t,n,s){return Ze(this,void 0,void 0,function*(){try{let o=this._getFinalPath(t),l=yield ts(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:n},s?.transform?{transform:s.transform}:{}),{headers:this.headers});const u=s?.download?`&download=${s.download===!0?"":s.download}`:"";return l={signedUrl:encodeURI(`${this.url}${l.signedURL}${u}`)},{data:l,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(on(o))return{data:null,error:o};throw o}})}createSignedUrls(t,n,s){return Ze(this,void 0,void 0,function*(){try{const o=yield ts(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),l=s?.download?`&download=${s.download===!0?"":s.download}`:"";return{data:o.map(u=>Object.assign(Object.assign({},u),{signedUrl:u.signedURL?encodeURI(`${this.url}${u.signedURL}${l}`):null})),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(on(o))return{data:null,error:o};throw o}})}download(t,n){const o=typeof n?.transform<"u"?"render/image/authenticated":"object",l=this.transformOptsToQueryString(n?.transform||{}),u=l?`?${l}`:"",f=this._getFinalPath(t),m=()=>sd(this.fetch,`${this.url}/${o}/${f}${u}`,{headers:this.headers,noResolveJson:!0});return new tL(m,this.shouldThrowOnError)}info(t){return Ze(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const s=yield sd(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Sb(s),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(on(s))return{data:null,error:s};throw s}})}exists(t){return Ze(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield Q5(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(on(s)&&s instanceof tm){const o=s.originalError;if([400,404].includes(o?.status))return{data:!1,error:s}}throw s}})}getPublicUrl(t,n){const s=this._getFinalPath(t),o=[],l=n?.download?`download=${n.download===!0?"":n.download}`:"";l!==""&&o.push(l);const f=typeof n?.transform<"u"?"render/image":"object",m=this.transformOptsToQueryString(n?.transform||{});m!==""&&o.push(m);let p=o.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${f}/public/${s}${p}`)}}}remove(t){return Ze(this,void 0,void 0,function*(){try{return{data:yield Sy(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(on(n))return{data:null,error:n};throw n}})}list(t,n,s){return Ze(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},nL),n),{prefix:t||""});return{data:yield ts(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},s),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(on(o))return{data:null,error:o};throw o}})}listV2(t,n){return Ze(this,void 0,void 0,function*(){try{const s=Object.assign({},t);return{data:yield ts(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(on(s))return{data:null,error:s};throw s}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const VT="2.86.2",KT={"X-Client-Info":`storage-js/${VT}`};class iL{constructor(t,n={},s,o){this.shouldThrowOnError=!1;const l=new URL(t);o?.useNewHostname&&/supabase\.(co|in|red)$/.test(l.hostname)&&!l.hostname.includes("storage.supabase.")&&(l.hostname=l.hostname.replace("supabase.","storage.supabase.")),this.url=l.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},KT),n),this.fetch=wy(s)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(t){return Ze(this,void 0,void 0,function*(){try{const n=this.listBucketOptionsToQueryString(t);return{data:yield sd(this.fetch,`${this.url}/bucket${n}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(on(n))return{data:null,error:n};throw n}})}getBucket(t){return Ze(this,void 0,void 0,function*(){try{return{data:yield sd(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(on(n))return{data:null,error:n};throw n}})}createBucket(t){return Ze(this,arguments,void 0,function*(n,s={public:!1}){try{return{data:yield ts(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(on(o))return{data:null,error:o};throw o}})}updateBucket(t,n){return Ze(this,void 0,void 0,function*(){try{return{data:yield Eb(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(on(s))return{data:null,error:s};throw s}})}emptyBucket(t){return Ze(this,void 0,void 0,function*(){try{return{data:yield ts(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(on(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Ze(this,void 0,void 0,function*(){try{return{data:yield Sy(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(on(n))return{data:null,error:n};throw n}})}listBucketOptionsToQueryString(t){const n={};return t&&("limit"in t&&(n.limit=String(t.limit)),"offset"in t&&(n.offset=String(t.offset)),t.search&&(n.search=t.search),t.sortColumn&&(n.sortColumn=t.sortColumn),t.sortOrder&&(n.sortOrder=t.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}}var ad=class extends Error{constructor(e,t){super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&t.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function sL(e,t,n){const s=new URL(t,e);if(n)for(const[o,l]of Object.entries(n))l!==void 0&&s.searchParams.set(o,l);return s.toString()}async function aL(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function oL(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:n,path:s,query:o,body:l,headers:u}){const f=sL(e.baseUrl,s,o),m=await aL(e.auth),p=await t(f,{method:n,headers:{...l?{"Content-Type":"application/json"}:{},...m,...u},body:l?JSON.stringify(l):void 0}),b=await p.text(),_=(p.headers.get("content-type")||"").includes("application/json"),x=_&&b?JSON.parse(b):b;if(!p.ok){const S=_?x:void 0,T=S?.error;throw new ad(T?.message??`Request failed with status ${p.status}`,{status:p.status,icebergType:T?.type,icebergCode:T?.code,details:S})}return{status:p.status,headers:p.headers,data:x}}}}function nf(e){return e.join("")}var lL=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:nf(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(s=>({namespace:s}))}async createNamespace(e,t){const n={namespace:e.namespace,properties:t?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${nf(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${nf(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${nf(e.namespace)}`}),!0}catch(t){if(t instanceof ad&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(n){if(n instanceof ad&&n.status===409)return;throw n}}};function Jl(e){return e.join("")}var cL=class{constructor(e,t="",n){this.client=e,this.prefix=t,this.accessDelegation=n}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Jl(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Jl(e.namespace)}/tables`,body:t,headers:n})).data.metadata}async updateTable(e,t){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Jl(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Jl(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String(t?.purge??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Jl(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Jl(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(n){if(n instanceof ad&&n.status===404)return!1;throw n}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(n){if(n instanceof ad&&n.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw n}}},uL=class{constructor(e){let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const n=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=oL({baseUrl:n,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=e.accessDelegation?.join(","),this.namespaceOps=new lL(this.client,t),this.tableOps=new cL(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}};class WT{constructor(t,n={},s){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},KT),n),this.fetch=wy(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return Ze(this,void 0,void 0,function*(){try{return{data:yield ts(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(on(n))return{data:null,error:n};throw n}})}listBuckets(t){return Ze(this,void 0,void 0,function*(){try{const n=new URLSearchParams;t?.limit!==void 0&&n.set("limit",t.limit.toString()),t?.offset!==void 0&&n.set("offset",t.offset.toString()),t?.sortColumn&&n.set("sortColumn",t.sortColumn),t?.sortOrder&&n.set("sortOrder",t.sortOrder),t?.search&&n.set("search",t.search);const s=n.toString(),o=s?`${this.url}/bucket?${s}`:`${this.url}/bucket`;return{data:yield sd(this.fetch,o,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(on(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Ze(this,void 0,void 0,function*(){try{return{data:yield Sy(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(on(n))return{data:null,error:n};throw n}})}from(t){if(!W5(t))throw new vd("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");return new uL({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:()=>Ze(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch})}}const Ey={"X-Client-Info":`storage-js/${VT}`,"Content-Type":"application/json"};class Ty extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Gr(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}class Pf extends Ty{constructor(t,n,s){super(t),this.name="StorageVectorsApiError",this.status=n,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class XT extends Ty{constructor(t,n){super(t),this.name="StorageVectorsUnknownError",this.originalError=n}}var Tb;(function(e){e.InternalError="InternalError",e.S3VectorConflictException="S3VectorConflictException",e.S3VectorNotFoundException="S3VectorNotFoundException",e.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",e.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",e.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(Tb||(Tb={}));const Cm=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),dL=()=>Response,JT=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},hL=e=>Array.from(new Float32Array(e)),fL=(e,t)=>{if(t!==void 0&&e.float32.length!==t)throw new Error(`Vector dimension mismatch: expected ${t}, got ${e.float32.length}`)},g1=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),mL=(e,t,n)=>Ze(void 0,void 0,void 0,function*(){if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!n?.noResolveJson){const o=e.status||500,l=e;if(typeof l.json=="function")l.json().then(u=>{const f=u?.statusCode||u?.code||o+"";t(new Pf(g1(u),o,f))}).catch(()=>{const u=o+"",f=l.statusText||`HTTP ${o} error`;t(new Pf(f,o,u))});else{const u=o+"",f=l.statusText||`HTTP ${o} error`;t(new Pf(f,o,u))}}else t(new XT(g1(e),e))}),pL=(e,t,n,s)=>{const o={method:e,headers:t?.headers||{}};return s?(JT(s)?(o.headers=Object.assign({"Content-Type":"application/json"},t?.headers),o.body=JSON.stringify(s)):o.body=s,Object.assign(Object.assign({},o),n)):o};function gL(e,t,n,s,o,l){return Ze(this,void 0,void 0,function*(){return new Promise((u,f)=>{e(n,pL(t,s,o,l)).then(m=>{if(!m.ok)throw m;if(s?.noResolveJson)return m;const p=m.headers.get("content-type");return!p||!p.includes("application/json")?{}:m.json()}).then(m=>u(m)).catch(m=>mL(m,f,s))})})}function oi(e,t,n,s,o){return Ze(this,void 0,void 0,function*(){return gL(e,"POST",t,s,o,n)})}class QT{constructor(t,n={},s){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Ey),n),this.fetch=Cm(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return Ze(this,void 0,void 0,function*(){try{return{data:(yield oi(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Gr(n))return{data:null,error:n};throw n}})}getIndex(t,n){return Ze(this,void 0,void 0,function*(){try{return{data:yield oi(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:n},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Gr(s))return{data:null,error:s};throw s}})}listIndexes(t){return Ze(this,void 0,void 0,function*(){try{return{data:yield oi(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Gr(n))return{data:null,error:n};throw n}})}deleteIndex(t,n){return Ze(this,void 0,void 0,function*(){try{return{data:(yield oi(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:n},{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Gr(s))return{data:null,error:s};throw s}})}}class ek{constructor(t,n={},s){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Ey),n),this.fetch=Cm(s)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return Ze(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield oi(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Gr(n))return{data:null,error:n};throw n}})}getVectors(t){return Ze(this,void 0,void 0,function*(){try{return{data:yield oi(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Gr(n))return{data:null,error:n};throw n}})}listVectors(t){return Ze(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield oi(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Gr(n))return{data:null,error:n};throw n}})}queryVectors(t){return Ze(this,void 0,void 0,function*(){try{return{data:yield oi(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Gr(n))return{data:null,error:n};throw n}})}deleteVectors(t){return Ze(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield oi(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Gr(n))return{data:null,error:n};throw n}})}}class tk{constructor(t,n={},s){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Ey),n),this.fetch=Cm(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return Ze(this,void 0,void 0,function*(){try{return{data:(yield oi(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Gr(n))return{data:null,error:n};throw n}})}getBucket(t){return Ze(this,void 0,void 0,function*(){try{return{data:yield oi(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Gr(n))return{data:null,error:n};throw n}})}listBuckets(){return Ze(this,arguments,void 0,function*(t={}){try{return{data:yield oi(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Gr(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Ze(this,void 0,void 0,function*(){try{return{data:(yield oi(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Gr(n))return{data:null,error:n};throw n}})}}class nk extends tk{constructor(t,n={}){super(t,n.headers||{},n.fetch)}from(t){return new rk(this.url,this.headers,t,this.fetch)}createBucket(t){const n=Object.create(null,{createBucket:{get:()=>super.createBucket}});return Ze(this,void 0,void 0,function*(){return n.createBucket.call(this,t)})}getBucket(t){const n=Object.create(null,{getBucket:{get:()=>super.getBucket}});return Ze(this,void 0,void 0,function*(){return n.getBucket.call(this,t)})}listBuckets(){const t=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return Ze(this,arguments,void 0,function*(n={}){return t.listBuckets.call(this,n)})}deleteBucket(t){const n=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return Ze(this,void 0,void 0,function*(){return n.deleteBucket.call(this,t)})}}class rk extends QT{constructor(t,n,s,o){super(t,n,o),this.vectorBucketName=s}createIndex(t){const n=Object.create(null,{createIndex:{get:()=>super.createIndex}});return Ze(this,void 0,void 0,function*(){return n.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return Ze(this,arguments,void 0,function*(n={}){return t.listIndexes.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){const n=Object.create(null,{getIndex:{get:()=>super.getIndex}});return Ze(this,void 0,void 0,function*(){return n.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){const n=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return Ze(this,void 0,void 0,function*(){return n.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new ik(this.url,this.headers,this.vectorBucketName,t,this.fetch)}}class ik extends ek{constructor(t,n,s,o,l){super(t,n,l),this.vectorBucketName=s,this.indexName=o}putVectors(t){const n=Object.create(null,{putVectors:{get:()=>super.putVectors}});return Ze(this,void 0,void 0,function*(){return n.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){const n=Object.create(null,{getVectors:{get:()=>super.getVectors}});return Ze(this,void 0,void 0,function*(){return n.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return Ze(this,arguments,void 0,function*(n={}){return t.listVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){const n=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return Ze(this,void 0,void 0,function*(){return n.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){const n=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return Ze(this,void 0,void 0,function*(){return n.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class bL extends iL{constructor(t,n={},s,o){super(t,n,s,o)}from(t){return new rL(this.url,this.headers,t,this.fetch)}get vectors(){return new nk(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new WT(this.url+"/iceberg",this.headers,this.fetch)}}const yL=Object.freeze(Object.defineProperty({__proto__:null,StorageAnalyticsClient:WT,StorageApiError:qT,StorageClient:bL,StorageError:vd,StorageUnknownError:tm,StorageVectorsApiError:Pf,StorageVectorsClient:nk,StorageVectorsError:Ty,get StorageVectorsErrorCode(){return Tb},StorageVectorsUnknownError:XT,VectorBucketApi:tk,VectorBucketScope:rk,VectorDataApi:ek,VectorIndexApi:QT,VectorIndexScope:ik,isPlainObject:JT,isStorageError:on,isStorageVectorsError:Gr,normalizeToFloat32:hL,resolveFetch:Cm,resolveResponse:dL,validateVectorDimension:fL},Symbol.toStringTag,{value:"Module"})),vL=hd(yL);var cg={},Cu={},b1;function _L(){return b1||(b1=1,Object.defineProperty(Cu,"__esModule",{value:!0}),Cu.version=void 0,Cu.version="2.86.2"),Cu}var y1;function xL(){return y1||(y1=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_REALTIME_OPTIONS=e.DEFAULT_AUTH_OPTIONS=e.DEFAULT_DB_OPTIONS=e.DEFAULT_GLOBAL_OPTIONS=e.DEFAULT_HEADERS=void 0;const t=_L();let n="";typeof Deno<"u"?n="deno":typeof document<"u"?n="web":typeof navigator<"u"&&navigator.product==="ReactNative"?n="react-native":n="node",e.DEFAULT_HEADERS={"X-Client-Info":`supabase-js-${n}/${t.version}`},e.DEFAULT_GLOBAL_OPTIONS={headers:e.DEFAULT_HEADERS},e.DEFAULT_DB_OPTIONS={schema:"public"},e.DEFAULT_AUTH_OPTIONS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},e.DEFAULT_REALTIME_OPTIONS={}})(cg)),cg}var ug={},v1;function wL(){return v1||(v1=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.fetchWithAuth=e.resolveHeadersConstructor=e.resolveFetch=void 0;const t=o=>o?(...l)=>o(...l):(...l)=>fetch(...l);e.resolveFetch=t;const n=()=>Headers;e.resolveHeadersConstructor=n;const s=(o,l,u)=>{const f=(0,e.resolveFetch)(u),m=(0,e.resolveHeadersConstructor)();return async(p,b)=>{var _;const x=(_=await l())!==null&&_!==void 0?_:o;let S=new m(b?.headers);return S.has("apikey")||S.set("apikey",o),S.has("Authorization")||S.set("Authorization",`Bearer ${x}`),f(p,Object.assign(Object.assign({},b),{headers:S}))}};e.fetchWithAuth=s})(ug)),ug}var Ks={},_1;function SL(){if(_1)return Ks;_1=1,Object.defineProperty(Ks,"__esModule",{value:!0}),Ks.isBrowser=void 0,Ks.uuid=e,Ks.ensureTrailingSlash=t,Ks.applySettingDefaults=s,Ks.validateSupabaseUrl=o;function e(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(l){var u=Math.random()*16|0,f=l=="x"?u:u&3|8;return f.toString(16)})}function t(l){return l.endsWith("/")?l:l+"/"}const n=()=>typeof window<"u";Ks.isBrowser=n;function s(l,u){var f,m;const{db:p,auth:b,realtime:_,global:x}=l,{db:S,auth:T,realtime:k,global:A}=u,M={db:Object.assign(Object.assign({},S),p),auth:Object.assign(Object.assign({},T),b),realtime:Object.assign(Object.assign({},k),_),storage:{},global:Object.assign(Object.assign(Object.assign({},A),x),{headers:Object.assign(Object.assign({},(f=A?.headers)!==null&&f!==void 0?f:{}),(m=x?.headers)!==null&&m!==void 0?m:{})}),accessToken:async()=>""};return l.accessToken?M.accessToken=l.accessToken:delete M.accessToken,M}function o(l){const u=l?.trim();if(!u)throw new Error("supabaseUrl is required.");if(!u.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(t(u))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}return Ks}var Ru={};const sk="2.86.2",oc=30*1e3,kb=3,dg=kb*oc,EL="http://localhost:9999",TL="supabase.auth.token",kL={"X-Client-Info":`gotrue-js/${sk}`},Ab="X-Supabase-Api-Version",ak={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},AL=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,jL=600*1e3;let wc=class extends Error{constructor(t,n,s){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=s}};function We(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}let ok=class extends wc{constructor(t,n,s){super(t,n,s),this.name="AuthApiError",this.status=n,this.code=s}};function lk(e){return We(e)&&e.name==="AuthApiError"}let Ya=class extends wc{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}},na=class extends wc{constructor(t,n,s,o){super(t,s,o),this.name=n,this.status=s}},Ur=class extends na{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function ck(e){return We(e)&&e.name==="AuthSessionMissingError"}let Xo=class extends na{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},Gu=class extends na{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}},Fu=class extends na{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function uk(e){return We(e)&&e.name==="AuthImplicitGrantRedirectError"}let jb=class extends na{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},nm=class extends na{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}};function $f(e){return We(e)&&e.name==="AuthRetryableFetchError"}let Nb=class extends na{constructor(t,n,s){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=s}};function NL(e){return We(e)&&e.name==="AuthWeakPasswordError"}let rm=class extends na{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}};const im="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),x1=` 	
\r=`.split(""),OL=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<x1.length;t+=1)e[x1[t].charCodeAt(0)]=-2;for(let t=0;t<im.length;t+=1)e[im[t].charCodeAt(0)]=t;return e})();function w1(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const s=t.queue>>t.queuedBits-6&63;n(im[s]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const s=t.queue>>t.queuedBits-6&63;n(im[s]),t.queuedBits-=6}}function dk(e,t,n){const s=OL[e];if(s>-1)for(t.queue=t.queue<<6|s,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function S1(e){const t=[],n=u=>{t.push(String.fromCodePoint(u))},s={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},l=u=>{CL(u,s,n)};for(let u=0;u<e.length;u+=1)dk(e.charCodeAt(u),o,l);return t.join("")}function DL(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function ML(e,t){for(let n=0;n<e.length;n+=1){let s=e.charCodeAt(n);if(s>55295&&s<=56319){const o=(s-55296)*1024&65535;s=(e.charCodeAt(n+1)-56320&65535|o)+65536,n+=1}DL(s,t)}}function CL(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let s=1;s<6;s+=1)if((e>>7-s&1)===0){t.utf8seq=s;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function pc(e){const t=[],n={queue:0,queuedBits:0},s=o=>{t.push(o)};for(let o=0;o<e.length;o+=1)dk(e.charCodeAt(o),n,s);return new Uint8Array(t)}function RL(e){const t=[];return ML(e,n=>t.push(n)),new Uint8Array(t)}function rl(e){const t=[],n={queue:0,queuedBits:0},s=o=>{t.push(o)};return e.forEach(o=>w1(o,n,s)),w1(null,n,s),t.join("")}function LL(e){return Math.round(Date.now()/1e3)+e}function BL(){return Symbol("auth-callback")}const rr=()=>typeof window<"u"&&typeof document<"u",Go={tested:!1,writable:!1},hk=()=>{if(!rr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Go.tested)return Go.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Go.tested=!0,Go.writable=!0}catch{Go.tested=!0,Go.writable=!1}return Go.writable};function PL(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((o,l)=>{t[l]=o})}catch{}return n.searchParams.forEach((s,o)=>{t[o]=s}),t}const fk=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),$L=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",lc=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Fo=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},tr=async(e,t)=>{await e.removeItem(t)};class Rm{constructor(){this.promise=new Rm.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}Rm.promiseConstructor=Promise;function hg(e){const t=e.split(".");if(t.length!==3)throw new rm("Invalid JWT structure");for(let s=0;s<t.length;s++)if(!AL.test(t[s]))throw new rm("JWT not in base64url format");return{header:JSON.parse(S1(t[0])),payload:JSON.parse(S1(t[1])),signature:pc(t[2]),raw:{header:t[0],payload:t[1]}}}async function IL(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function zL(e,t){return new Promise((s,o)=>{(async()=>{for(let l=0;l<1/0;l++)try{const u=await e(l);if(!t(l,null,u)){s(u);return}}catch(u){if(!t(l,u)){o(u);return}}})()})}function UL(e){return("0"+e.toString(16)).substr(-2)}function HL(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=n.length;let o="";for(let l=0;l<56;l++)o+=n.charAt(Math.floor(Math.random()*s));return o}return crypto.getRandomValues(t),Array.from(t,UL).join("")}async function GL(e){const n=new TextEncoder().encode(e),s=await crypto.subtle.digest("SHA-256",n),o=new Uint8Array(s);return Array.from(o).map(l=>String.fromCharCode(l)).join("")}async function FL(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await GL(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ql(e,t,n=!1){const s=HL();let o=s;n&&(o+="/PASSWORD_RECOVERY"),await lc(e,`${t}-code-verifier`,o);const l=await FL(s);return[l,s===l?"plain":"s256"]}const YL=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function qL(e){const t=e.headers.get(Ab);if(!t||!t.match(YL))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function ZL(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function VL(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const KL=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ec(e){if(!KL.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function fg(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const s=n.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function WL(e,t){return new Proxy(e,{get:(n,s,o)=>{if(s==="__isInsecureUserWarningProxy")return!0;if(typeof s=="symbol"){const l=s.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)"||l==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,s,o)}return!t.value&&typeof s=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(n,s,o)}})}function E1(e){return JSON.parse(JSON.stringify(e))}const Jo=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),XL=[502,503,504];async function T1(e){var t;if(!$L(e))throw new nm(Jo(e),0);if(XL.includes(e.status))throw new nm(Jo(e),e.status);let n;try{n=await e.json()}catch(l){throw new Ya(Jo(l),l)}let s;const o=qL(e);if(o&&o.getTime()>=ak["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?s=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(s=n.error_code),s){if(s==="weak_password")throw new Nb(Jo(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(s==="session_not_found")throw new Ur}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((l,u)=>l&&typeof u=="string",!0))throw new Nb(Jo(n),e.status,n.weak_password.reasons);throw new ok(Jo(n),e.status||500,s)}const JL=(e,t,n,s)=>{const o={method:e,headers:t?.headers||{}};return e==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),o.body=JSON.stringify(s),Object.assign(Object.assign({},o),n))};async function rt(e,t,n,s){var o;const l=Object.assign({},s?.headers);l[Ab]||(l[Ab]=ak["2024-01-01"].name),s?.jwt&&(l.Authorization=`Bearer ${s.jwt}`);const u=(o=s?.query)!==null&&o!==void 0?o:{};s?.redirectTo&&(u.redirect_to=s.redirectTo);const f=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",m=await QL(e,t,n+f,{headers:l,noResolveJson:s?.noResolveJson},{},s?.body);return s?.xform?s?.xform(m):{data:Object.assign({},m),error:null}}async function QL(e,t,n,s,o,l){const u=JL(t,s,o,l);let f;try{f=await e(n,Object.assign({},u))}catch(m){throw console.error(m),new nm(Jo(m),0)}if(f.ok||await T1(f),s?.noResolveJson)return f;try{return await f.json()}catch(m){await T1(m)}}function Qi(e){var t;let n=null;nB(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=LL(e.expires_in)));const s=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:s},error:null}}function k1(e){const t=Qi(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,s)=>n&&typeof s=="string",!0)&&(t.data.weak_password=e.weak_password),t}function qa(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function eB(e){return{data:e,error:null}}function tB(e){const{action_link:t,email_otp:n,hashed_token:s,redirect_to:o,verification_type:l}=e,u=jc(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),f={action_link:t,email_otp:n,hashed_token:s,redirect_to:o,verification_type:l},m=Object.assign({},u);return{data:{properties:f,user:m},error:null}}function A1(e){return e}function nB(e){return e.access_token&&e.refresh_token&&e.expires_in}const If=["global","local","others"];let ky=class{constructor({url:t="",headers:n={},fetch:s}){this.url=t,this.headers=n,this.fetch=fk(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=If[0]){if(If.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${If.join(", ")}`);try{return await rt(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(s){if(We(s))return{data:null,error:s};throw s}}async inviteUserByEmail(t,n={}){try{return await rt(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:qa})}catch(s){if(We(s))return{data:{user:null},error:s};throw s}}async generateLink(t){try{const{options:n}=t,s=jc(t,["options"]),o=Object.assign(Object.assign({},s),n);return"newEmail"in s&&(o.new_email=s?.newEmail,delete o.newEmail),await rt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:tB,redirectTo:n?.redirectTo})}catch(n){if(We(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await rt(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:qa})}catch(n){if(We(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,s,o,l,u,f,m;try{const p={nextPage:null,lastPage:0,total:0},b=await rt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(n=t?.page)===null||n===void 0?void 0:n.toString())!==null&&s!==void 0?s:"",per_page:(l=(o=t?.perPage)===null||o===void 0?void 0:o.toString())!==null&&l!==void 0?l:""},xform:A1});if(b.error)throw b.error;const _=await b.json(),x=(u=b.headers.get("x-total-count"))!==null&&u!==void 0?u:0,S=(m=(f=b.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&m!==void 0?m:[];return S.length>0&&(S.forEach(T=>{const k=parseInt(T.split(";")[0].split("=")[1].substring(0,1)),A=JSON.parse(T.split(";")[1].split("=")[1]);p[`${A}Page`]=k}),p.total=parseInt(x)),{data:Object.assign(Object.assign({},_),p),error:null}}catch(p){if(We(p))return{data:{users:[]},error:p};throw p}}async getUserById(t){ec(t);try{return await rt(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:qa})}catch(n){if(We(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){ec(t);try{return await rt(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:qa})}catch(s){if(We(s))return{data:{user:null},error:s};throw s}}async deleteUser(t,n=!1){ec(t);try{return await rt(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:qa})}catch(s){if(We(s))return{data:{user:null},error:s};throw s}}async _listFactors(t){ec(t.userId);try{const{data:n,error:s}=await rt(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:n,error:s}}catch(n){if(We(n))return{data:null,error:n};throw n}}async _deleteFactor(t){ec(t.userId),ec(t.id);try{return{data:await rt(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(We(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,s,o,l,u,f,m;try{const p={nextPage:null,lastPage:0,total:0},b=await rt(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(n=t?.page)===null||n===void 0?void 0:n.toString())!==null&&s!==void 0?s:"",per_page:(l=(o=t?.perPage)===null||o===void 0?void 0:o.toString())!==null&&l!==void 0?l:""},xform:A1});if(b.error)throw b.error;const _=await b.json(),x=(u=b.headers.get("x-total-count"))!==null&&u!==void 0?u:0,S=(m=(f=b.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&m!==void 0?m:[];return S.length>0&&(S.forEach(T=>{const k=parseInt(T.split(";")[0].split("=")[1].substring(0,1)),A=JSON.parse(T.split(";")[1].split("=")[1]);p[`${A}Page`]=k}),p.total=parseInt(x)),{data:Object.assign(Object.assign({},_),p),error:null}}catch(p){if(We(p))return{data:{clients:[]},error:p};throw p}}async _createOAuthClient(t){try{return await rt(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(We(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await rt(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(We(n))return{data:null,error:n};throw n}}async _updateOAuthClient(t,n){try{return await rt(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:n,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(We(s))return{data:null,error:s};throw s}}async _deleteOAuthClient(t){try{return await rt(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(We(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await rt(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(We(n))return{data:null,error:n};throw n}}};function j1(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const Qo={debug:!!(globalThis&&hk()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Ay extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}let mk=class extends Ay{};class rB extends Ay{}async function pk(e,t,n){Qo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const s=new globalThis.AbortController;return t>0&&setTimeout(()=>{s.abort(),Qo.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async o=>{if(o){Qo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,o.name);try{return await n()}finally{Qo.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,o.name)}}else{if(t===0)throw Qo.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new mk(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Qo.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}const N1={};async function iB(e,t,n){var s;const o=(s=N1[e])!==null&&s!==void 0?s:Promise.resolve(),l=Promise.race([o.catch(()=>null),t>=0?new Promise((u,f)=>{setTimeout(()=>{f(new rB(`Acquring process lock with name "${e}" timed out`))},t)}):null].filter(u=>u)).catch(u=>{if(u&&u.isAcquireTimeout)throw u;return null}).then(async()=>await n());return N1[e]=l.catch(async u=>{if(u&&u.isAcquireTimeout)return await o,null;throw u}),await l}function sB(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function gk(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function aB(e){return parseInt(e,16)}function oB(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,s=>s.toString(16).padStart(2,"0")).join("")}function lB(e){var t;const{chainId:n,domain:s,expirationTime:o,issuedAt:l=new Date,nonce:u,notBefore:f,requestId:m,resources:p,scheme:b,uri:_,version:x}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(u&&u.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${u}`);if(!_)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(x!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${x}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const S=gk(e.address),T=b?`${b}://${s}`:s,k=e.statement?`${e.statement}
`:"",A=`${T} wants you to sign in with your Ethereum account:
${S}

${k}`;let M=`URI: ${_}
Version: ${x}
Chain ID: ${n}${u?`
Nonce: ${u}`:""}
Issued At: ${l.toISOString()}`;if(o&&(M+=`
Expiration Time: ${o.toISOString()}`),f&&(M+=`
Not Before: ${f.toISOString()}`),m&&(M+=`
Request ID: ${m}`),p){let R=`
Resources:`;for(const N of p){if(!N||typeof N!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${N}`);R+=`
- ${N}`}M+=R}return`${A}
${M}`}class Bn extends Error{constructor({message:t,code:n,cause:s,name:o}){var l;super(t,{cause:s}),this.__isWebAuthnError=!0,this.name=(l=o??(s instanceof Error?s.name:void 0))!==null&&l!==void 0?l:"Unknown Error",this.code=n}}class sm extends Bn{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}}function cB({error:e,options:t}){var n,s,o;const{publicKey:l}=t;if(!l)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Bn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=l.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Bn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((s=l.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new Bn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((o=l.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new Bn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new Bn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new Bn({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return l.pubKeyCredParams.filter(f=>f.type==="public-key").length===0?new Bn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Bn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const u=window.location.hostname;if(bk(u)){if(l.rp.id!==u)return new Bn({message:`The RP ID "${l.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Bn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(l.user.id.byteLength<1||l.user.id.byteLength>64)return new Bn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new Bn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Bn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function uB({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Bn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new Bn({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const s=window.location.hostname;if(bk(s)){if(n.rpId!==s)return new Bn({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Bn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new Bn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Bn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class dB{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const hB=new dB;function fB(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:s}=e,o=jc(e,["challenge","user","excludeCredentials"]),l=pc(t).buffer,u=Object.assign(Object.assign({},n),{id:pc(n.id).buffer}),f=Object.assign(Object.assign({},o),{challenge:l,user:u});if(s&&s.length>0){f.excludeCredentials=new Array(s.length);for(let m=0;m<s.length;m++){const p=s[m];f.excludeCredentials[m]=Object.assign(Object.assign({},p),{id:pc(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return f}function mB(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,s=jc(e,["challenge","allowCredentials"]),o=pc(t).buffer,l=Object.assign(Object.assign({},s),{challenge:o});if(n&&n.length>0){l.allowCredentials=new Array(n.length);for(let u=0;u<n.length;u++){const f=n[u];l.allowCredentials[u]=Object.assign(Object.assign({},f),{id:pc(f.id).buffer,type:f.type||"public-key",transports:f.transports})}}return l}function pB(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:rl(new Uint8Array(e.response.attestationObject)),clientDataJSON:rl(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function gB(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e,s=e.getClientExtensionResults(),o=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:rl(new Uint8Array(o.authenticatorData)),clientDataJSON:rl(new Uint8Array(o.clientDataJSON)),signature:rl(new Uint8Array(o.signature)),userHandle:o.userHandle?rl(new Uint8Array(o.userHandle)):void 0},type:"public-key",clientExtensionResults:s,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function bk(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function O1(){var e,t;return!!(rr()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.get)=="function")}async function bB(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new sm("Browser returned unexpected credential type",t)}:{data:null,error:new sm("Empty credential response",t)}}catch(t){return{data:null,error:cB({error:t,options:e})}}}async function yB(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new sm("Browser returned unexpected credential type",t)}:{data:null,error:new sm("Empty credential response",t)}}catch(t){return{data:null,error:uB({error:t,options:e})}}}const vB={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},_B={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function am(...e){const t=o=>o!==null&&typeof o=="object"&&!Array.isArray(o),n=o=>o instanceof ArrayBuffer||ArrayBuffer.isView(o),s={};for(const o of e)if(o)for(const l in o){const u=o[l];if(u!==void 0)if(Array.isArray(u))s[l]=u;else if(n(u))s[l]=u;else if(t(u)){const f=s[l];t(f)?s[l]=am(f,u):s[l]=am(u)}else s[l]=u}return s}function xB(e,t){return am(vB,e,t||{})}function wB(e,t){return am(_B,e,t||{})}class SB{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:s,signal:o},l){try{const{data:u,error:f}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!u)return{data:null,error:f};const m=o??hB.createNewAbortSignal();if(u.webauthn.type==="create"){const{user:p}=u.webauthn.credential_options.publicKey;p.name||(p.name=`${p.id}:${s}`),p.displayName||(p.displayName=p.name)}switch(u.webauthn.type){case"create":{const p=xB(u.webauthn.credential_options.publicKey,l?.create),{data:b,error:_}=await bB({publicKey:p,signal:m});return b?{data:{factorId:t,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:b}},error:null}:{data:null,error:_}}case"request":{const p=wB(u.webauthn.credential_options.publicKey,l?.request),{data:b,error:_}=await yB(Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:p,signal:m}));return b?{data:{factorId:t,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:b}},error:null}:{data:null,error:_}}}}catch(u){return We(u)?{data:null,error:u}:{data:null,error:new Ya("Unexpected error in challenge",u)}}}async _verify({challengeId:t,factorId:n,webauthn:s}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:s})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},l){if(!n)return{data:null,error:new wc("rpId is required for WebAuthn authentication")};try{if(!O1())return{data:null,error:new Ya("Browser does not support WebAuthn",null)};const{data:u,error:f}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:s},signal:o},{request:l});if(!u)return{data:null,error:f};const{webauthn:m}=u;return this._verify({factorId:t,challengeId:u.challengeId,webauthn:{type:m.type,rpId:n,rpOrigins:s,credential_response:m.credential_response}})}catch(u){return We(u)?{data:null,error:u}:{data:null,error:new Ya("Unexpected error in authenticate",u)}}}async _register({friendlyName:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},l){if(!n)return{data:null,error:new wc("rpId is required for WebAuthn registration")};try{if(!O1())return{data:null,error:new Ya("Browser does not support WebAuthn",null)};const{data:u,error:f}=await this._enroll({friendlyName:t});if(!u)return await this.client.mfa.listFactors().then(b=>{var _;return(_=b.data)===null||_===void 0?void 0:_.all.find(x=>x.factor_type==="webauthn"&&x.friendly_name===t&&x.status!=="unverified")}).then(b=>b?this.client.mfa.unenroll({factorId:b?.id}):void 0),{data:null,error:f};const{data:m,error:p}=await this._challenge({factorId:u.id,friendlyName:u.friendly_name,webauthn:{rpId:n,rpOrigins:s},signal:o},{create:l});return m?this._verify({factorId:u.id,challengeId:m.challengeId,webauthn:{rpId:n,rpOrigins:s,type:m.webauthn.type,credential_response:m.webauthn.credential_response}}):{data:null,error:p}}catch(u){return We(u)?{data:null,error:u}:{data:null,error:new Ya("Unexpected error in register",u)}}}}sB();const EB={url:EL,storageKey:TL,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:kL,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function D1(e,t,n){return await n()}const tc={};let jy=class Ob{get jwks(){var t,n;return(n=(t=tc[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){tc[this.storageKey]=Object.assign(Object.assign({},tc[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=tc[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){tc[this.storageKey]=Object.assign(Object.assign({},tc[this.storageKey]),{cachedAt:t})}constructor(t){var n,s,o;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const l=Object.assign(Object.assign({},EB),t);if(this.storageKey=l.storageKey,this.instanceID=(n=Ob.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,Ob.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.instanceID>0&&rr()){const u=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(u),this.logDebugMessages&&console.trace(u)}if(this.persistSession=l.persistSession,this.autoRefreshToken=l.autoRefreshToken,this.admin=new ky({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=fk(l.fetch),this.lock=l.lock||D1,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,this.throwOnError=l.throwOnError,l.lock?this.lock=l.lock:rr()&&(!((s=globalThis?.navigator)===null||s===void 0)&&s.locks)?this.lock=pk:this.lock=D1,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new SB(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(l.storage?this.storage=l.storage:hk()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=j1(this.memoryStorage)),l.userStorage&&(this.userStorage=l.userStorage)):(this.memoryStorage={},this.storage=j1(this.memoryStorage)),rr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(u){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",u)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",async u=>{this._debug("received broadcast notification from other tab or client",u),await this._notifyAllSubscribers(u.data.event,u.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${sk}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let n={},s="none";if(rr()&&(n=PL(window.location.href),this._isImplicitGrantCallback(n)?s="implicit":await this._isPKCECallback(n)&&(s="pkce")),rr()&&this.detectSessionInUrl&&s!=="none"){const{data:o,error:l}=await this._getSessionFromURL(n,s);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),uk(l)){const m=(t=l.details)===null||t===void 0?void 0:t.code;if(m==="identity_already_exists"||m==="identity_not_found"||m==="single_identity_not_deletable")return{error:l}}return await this._removeSession(),{error:l}}const{session:u,redirectType:f}=o;return this._debug("#_initialize()","detected session in URL",u,"redirect type",f),await this._saveSession(u),setTimeout(async()=>{f==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return We(n)?this._returnResult({error:n}):this._returnResult({error:new Ya("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,s,o;try{const l=await rt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(n=t?.options)===null||n===void 0?void 0:n.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(o=t?.options)===null||o===void 0?void 0:o.captchaToken}},xform:Qi}),{data:u,error:f}=l;if(f||!u)return this._returnResult({data:{user:null,session:null},error:f});const m=u.session,p=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:p,session:m},error:null})}catch(l){if(We(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signUp(t){var n,s,o;try{let l;if("email"in t){const{email:b,password:_,options:x}=t;let S=null,T=null;this.flowType==="pkce"&&([S,T]=await Ql(this.storage,this.storageKey)),l=await rt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:x?.emailRedirectTo,body:{email:b,password:_,data:(n=x?.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:x?.captchaToken},code_challenge:S,code_challenge_method:T},xform:Qi})}else if("phone"in t){const{phone:b,password:_,options:x}=t;l=await rt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:b,password:_,data:(s=x?.data)!==null&&s!==void 0?s:{},channel:(o=x?.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:x?.captchaToken}},xform:Qi})}else throw new Gu("You must provide either an email or phone number and a password");const{data:u,error:f}=l;if(f||!u)return await tr(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:f});const m=u.session,p=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:p,session:m},error:null})}catch(l){if(await tr(this.storage,`${this.storageKey}-code-verifier`),We(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithPassword(t){try{let n;if("email"in t){const{email:l,password:u,options:f}=t;n=await rt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:u,gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:k1})}else if("phone"in t){const{phone:l,password:u,options:f}=t;n=await rt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:u,gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:k1})}else throw new Gu("You must provide either an email or phone number and a password");const{data:s,error:o}=n;if(o)return this._returnResult({data:{user:null,session:null},error:o});if(!s||!s.session||!s.user){const l=new Xo;return this._returnResult({data:{user:null,session:null},error:l})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:o})}catch(n){if(We(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(t){var n,s,o,l;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(s=t.options)===null||s===void 0?void 0:s.scopes,queryParams:(o=t.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(l=t.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,s,o,l,u,f,m,p,b,_,x;let S,T;if("message"in t)S=t.message,T=t.signature;else{const{chain:k,wallet:A,statement:M,options:R}=t;let N;if(rr())if(typeof A=="object")N=A;else{const W=window;if("ethereum"in W&&typeof W.ethereum=="object"&&"request"in W.ethereum&&typeof W.ethereum.request=="function")N=W.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof A!="object"||!R?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");N=A}const D=new URL((n=R?.url)!==null&&n!==void 0?n:window.location.href),C=await N.request({method:"eth_requestAccounts"}).then(W=>W).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!C||C.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const G=gk(C[0]);let H=(s=R?.signInWithEthereum)===null||s===void 0?void 0:s.chainId;if(!H){const W=await N.request({method:"eth_chainId"});H=aB(W)}const V={domain:D.host,address:G,statement:M,uri:D.href,version:"1",chainId:H,nonce:(o=R?.signInWithEthereum)===null||o===void 0?void 0:o.nonce,issuedAt:(u=(l=R?.signInWithEthereum)===null||l===void 0?void 0:l.issuedAt)!==null&&u!==void 0?u:new Date,expirationTime:(f=R?.signInWithEthereum)===null||f===void 0?void 0:f.expirationTime,notBefore:(m=R?.signInWithEthereum)===null||m===void 0?void 0:m.notBefore,requestId:(p=R?.signInWithEthereum)===null||p===void 0?void 0:p.requestId,resources:(b=R?.signInWithEthereum)===null||b===void 0?void 0:b.resources};S=lB(V),T=await N.request({method:"personal_sign",params:[oB(S),G]})}try{const{data:k,error:A}=await rt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:S,signature:T},!((_=t.options)===null||_===void 0)&&_.captchaToken?{gotrue_meta_security:{captcha_token:(x=t.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:Qi});if(A)throw A;if(!k||!k.session||!k.user){const M=new Xo;return this._returnResult({data:{user:null,session:null},error:M})}return k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("SIGNED_IN",k.session)),this._returnResult({data:Object.assign({},k),error:A})}catch(k){if(We(k))return this._returnResult({data:{user:null,session:null},error:k});throw k}}async signInWithSolana(t){var n,s,o,l,u,f,m,p,b,_,x,S;let T,k;if("message"in t)T=t.message,k=t.signature;else{const{chain:A,wallet:M,statement:R,options:N}=t;let D;if(rr())if(typeof M=="object")D=M;else{const G=window;if("solana"in G&&typeof G.solana=="object"&&("signIn"in G.solana&&typeof G.solana.signIn=="function"||"signMessage"in G.solana&&typeof G.solana.signMessage=="function"))D=G.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof M!="object"||!N?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");D=M}const C=new URL((n=N?.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in D&&D.signIn){const G=await D.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},N?.signInWithSolana),{version:"1",domain:C.host,uri:C.href}),R?{statement:R}:null));let H;if(Array.isArray(G)&&G[0]&&typeof G[0]=="object")H=G[0];else if(G&&typeof G=="object"&&"signedMessage"in G&&"signature"in G)H=G;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in H&&"signature"in H&&(typeof H.signedMessage=="string"||H.signedMessage instanceof Uint8Array)&&H.signature instanceof Uint8Array)T=typeof H.signedMessage=="string"?H.signedMessage:new TextDecoder().decode(H.signedMessage),k=H.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in D)||typeof D.signMessage!="function"||!("publicKey"in D)||typeof D!="object"||!D.publicKey||!("toBase58"in D.publicKey)||typeof D.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");T=[`${C.host} wants you to sign in with your Solana account:`,D.publicKey.toBase58(),...R?["",R,""]:[""],"Version: 1",`URI: ${C.href}`,`Issued At: ${(o=(s=N?.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((l=N?.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${N.signInWithSolana.notBefore}`]:[],...!((u=N?.signInWithSolana)===null||u===void 0)&&u.expirationTime?[`Expiration Time: ${N.signInWithSolana.expirationTime}`]:[],...!((f=N?.signInWithSolana)===null||f===void 0)&&f.chainId?[`Chain ID: ${N.signInWithSolana.chainId}`]:[],...!((m=N?.signInWithSolana)===null||m===void 0)&&m.nonce?[`Nonce: ${N.signInWithSolana.nonce}`]:[],...!((p=N?.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${N.signInWithSolana.requestId}`]:[],...!((_=(b=N?.signInWithSolana)===null||b===void 0?void 0:b.resources)===null||_===void 0)&&_.length?["Resources",...N.signInWithSolana.resources.map(H=>`- ${H}`)]:[]].join(`
`);const G=await D.signMessage(new TextEncoder().encode(T),"utf8");if(!G||!(G instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");k=G}}try{const{data:A,error:M}=await rt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:T,signature:rl(k)},!((x=t.options)===null||x===void 0)&&x.captchaToken?{gotrue_meta_security:{captcha_token:(S=t.options)===null||S===void 0?void 0:S.captchaToken}}:null),xform:Qi});if(M)throw M;if(!A||!A.session||!A.user){const R=new Xo;return this._returnResult({data:{user:null,session:null},error:R})}return A.session&&(await this._saveSession(A.session),await this._notifyAllSubscribers("SIGNED_IN",A.session)),this._returnResult({data:Object.assign({},A),error:M})}catch(A){if(We(A))return this._returnResult({data:{user:null,session:null},error:A});throw A}}async _exchangeCodeForSession(t){const n=await Fo(this.storage,`${this.storageKey}-code-verifier`),[s,o]=(n??"").split("/");try{const{data:l,error:u}=await rt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:s},xform:Qi});if(await tr(this.storage,`${this.storageKey}-code-verifier`),u)throw u;if(!l||!l.session||!l.user){const f=new Xo;return this._returnResult({data:{user:null,session:null,redirectType:null},error:f})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:Object.assign(Object.assign({},l),{redirectType:o??null}),error:u})}catch(l){if(await tr(this.storage,`${this.storageKey}-code-verifier`),We(l))return this._returnResult({data:{user:null,session:null,redirectType:null},error:l});throw l}}async signInWithIdToken(t){try{const{options:n,provider:s,token:o,access_token:l,nonce:u}=t,f=await rt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:o,access_token:l,nonce:u,gotrue_meta_security:{captcha_token:n?.captchaToken}},xform:Qi}),{data:m,error:p}=f;if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!m||!m.session||!m.user){const b=new Xo;return this._returnResult({data:{user:null,session:null},error:b})}return m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),this._returnResult({data:m,error:p})}catch(n){if(We(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(t){var n,s,o,l,u;try{if("email"in t){const{email:f,options:m}=t;let p=null,b=null;this.flowType==="pkce"&&([p,b]=await Ql(this.storage,this.storageKey));const{error:_}=await rt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:f,data:(n=m?.data)!==null&&n!==void 0?n:{},create_user:(s=m?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:m?.captchaToken},code_challenge:p,code_challenge_method:b},redirectTo:m?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:_})}if("phone"in t){const{phone:f,options:m}=t,{data:p,error:b}=await rt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:f,data:(o=m?.data)!==null&&o!==void 0?o:{},create_user:(l=m?.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:m?.captchaToken},channel:(u=m?.channel)!==null&&u!==void 0?u:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:p?.message_id},error:b})}throw new Gu("You must provide either an email or phone number.")}catch(f){if(await tr(this.storage,`${this.storageKey}-code-verifier`),We(f))return this._returnResult({data:{user:null,session:null},error:f});throw f}}async verifyOtp(t){var n,s;try{let o,l;"options"in t&&(o=(n=t.options)===null||n===void 0?void 0:n.redirectTo,l=(s=t.options)===null||s===void 0?void 0:s.captchaToken);const{data:u,error:f}=await rt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:l}}),redirectTo:o,xform:Qi});if(f)throw f;if(!u)throw new Error("An error occurred on token verification.");const m=u.session,p=u.user;return m?.access_token&&(await this._saveSession(m),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",m)),this._returnResult({data:{user:p,session:m},error:null})}catch(o){if(We(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithSSO(t){var n,s,o,l,u;try{let f=null,m=null;this.flowType==="pkce"&&([f,m]=await Ql(this.storage,this.storageKey));const p=await rt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(s=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&s!==void 0?s:void 0}),!((o=t?.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:f,code_challenge_method:m}),headers:this.headers,xform:eB});return!((l=p.data)===null||l===void 0)&&l.url&&rr()&&!(!((u=t.options)===null||u===void 0)&&u.skipBrowserRedirect)&&window.location.assign(p.data.url),this._returnResult(p)}catch(f){if(await tr(this.storage,`${this.storageKey}-code-verifier`),We(f))return this._returnResult({data:null,error:f});throw f}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:s}=t;if(s)throw s;if(!n)throw new Ur;const{error:o}=await rt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:o})})}catch(t){if(We(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:s,type:o,options:l}=t,{error:u}=await rt(this.fetch,"POST",n,{headers:this.headers,body:{email:s,type:o,gotrue_meta_security:{captcha_token:l?.captchaToken}},redirectTo:l?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:u})}else if("phone"in t){const{phone:s,type:o,options:l}=t,{data:u,error:f}=await rt(this.fetch,"POST",n,{headers:this.headers,body:{phone:s,type:o,gotrue_meta_security:{captcha_token:l?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:u?.message_id},error:f})}throw new Gu("You must provide either an email or phone number and a type")}catch(n){if(We(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await s,await n()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=n();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await Fo(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const s=t.expires_at?t.expires_at*1e3-Date.now()<dg:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",t.expires_at),!s){if(this.userStorage){const u=await Fo(this.userStorage,this.storageKey+"-user");u?.user?t.user=u.user:t.user=fg()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const u={value:this.suppressGetSessionWarning};t.user=WL(t.user,u),u.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:o,error:l}=await this._callRefreshToken(t.refresh_token);return l?this._returnResult({data:{session:null},error:l}):this._returnResult({data:{session:o},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const n=await this._acquireLock(-1,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(t){try{return t?await rt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:qa}):await this._useSession(async n=>{var s,o,l;const{data:u,error:f}=n;if(f)throw f;return!(!((s=u.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ur}:await rt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(o=u.session)===null||o===void 0?void 0:o.access_token)!==null&&l!==void 0?l:void 0,xform:qa})})}catch(n){if(We(n))return ck(n)&&(await this._removeSession(),await tr(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async s=>{const{data:o,error:l}=s;if(l)throw l;if(!o.session)throw new Ur;const u=o.session;let f=null,m=null;this.flowType==="pkce"&&t.email!=null&&([f,m]=await Ql(this.storage,this.storageKey));const{data:p,error:b}=await rt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n?.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:f,code_challenge_method:m}),jwt:u.access_token,xform:qa});if(b)throw b;return u.user=p.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),this._returnResult({data:{user:u.user},error:null})})}catch(s){if(await tr(this.storage,`${this.storageKey}-code-verifier`),We(s))return this._returnResult({data:{user:null},error:s});throw s}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Ur;const n=Date.now()/1e3;let s=n,o=!0,l=null;const{payload:u}=hg(t.access_token);if(u.exp&&(s=u.exp,o=s<=n),o){const{data:f,error:m}=await this._callRefreshToken(t.refresh_token);if(m)return this._returnResult({data:{user:null,session:null},error:m});if(!f)return{data:{user:null,session:null},error:null};l=f}else{const{data:f,error:m}=await this._getUser(t.access_token);if(m)throw m;l={access_token:t.access_token,refresh_token:t.refresh_token,user:f.user,token_type:"bearer",expires_in:s-n,expires_at:s},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return this._returnResult({data:{user:l.user,session:l},error:null})}catch(n){if(We(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var s;if(!t){const{data:u,error:f}=n;if(f)throw f;t=(s=u.session)!==null&&s!==void 0?s:void 0}if(!t?.refresh_token)throw new Ur;const{data:o,error:l}=await this._callRefreshToken(t.refresh_token);return l?this._returnResult({data:{user:null,session:null},error:l}):o?this._returnResult({data:{user:o.user,session:o},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(We(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(t,n){try{if(!rr())throw new Fu("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Fu(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new jb("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Fu("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new jb("No code detected.");const{data:R,error:N}=await this._exchangeCodeForSession(t.code);if(N)throw N;const D=new URL(window.location.href);return D.searchParams.delete("code"),window.history.replaceState(window.history.state,"",D.toString()),{data:{session:R.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:o,access_token:l,refresh_token:u,expires_in:f,expires_at:m,token_type:p}=t;if(!l||!f||!u||!p)throw new Fu("No session defined in URL");const b=Math.round(Date.now()/1e3),_=parseInt(f);let x=b+_;m&&(x=parseInt(m));const S=x-b;S*1e3<=oc&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${S}s, should have been closer to ${_}s`);const T=x-_;b-T>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",T,x,b):b-T<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",T,x,b);const{data:k,error:A}=await this._getUser(l);if(A)throw A;const M={provider_token:s,provider_refresh_token:o,access_token:l,expires_in:_,expires_at:x,refresh_token:u,token_type:p,user:k.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:M,redirectType:t.type},error:null})}catch(s){if(We(s))return this._returnResult({data:{session:null,redirectType:null},error:s});throw s}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await Fo(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var s;const{data:o,error:l}=n;if(l)return this._returnResult({error:l});const u=(s=o.session)===null||s===void 0?void 0:s.access_token;if(u){const{error:f}=await this.admin.signOut(u,t);if(f&&!(lk(f)&&(f.status===404||f.status===401||f.status===403)))return this._returnResult({error:f})}return t!=="others"&&(await this._removeSession(),await tr(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const n=BL(),s={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:s}}}async _emitInitialSession(t){return await this._useSession(async n=>{var s,o;try{const{data:{session:l},error:u}=n;if(u)throw u;await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",t,"session",l)}catch(l){await((o=this.stateChangeEmitters.get(t))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",l),console.error(l)}})}async resetPasswordForEmail(t,n={}){let s=null,o=null;this.flowType==="pkce"&&([s,o]=await Ql(this.storage,this.storageKey,!0));try{return await rt(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:s,code_challenge_method:o,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(l){if(await tr(this.storage,`${this.storageKey}-code-verifier`),We(l))return this._returnResult({data:null,error:l});throw l}}async getUserIdentities(){var t;try{const{data:n,error:s}=await this.getUser();if(s)throw s;return this._returnResult({data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(n){if(We(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var n;try{const{data:s,error:o}=await this._useSession(async l=>{var u,f,m,p,b;const{data:_,error:x}=l;if(x)throw x;const S=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(u=t.options)===null||u===void 0?void 0:u.redirectTo,scopes:(f=t.options)===null||f===void 0?void 0:f.scopes,queryParams:(m=t.options)===null||m===void 0?void 0:m.queryParams,skipBrowserRedirect:!0});return await rt(this.fetch,"GET",S,{headers:this.headers,jwt:(b=(p=_.session)===null||p===void 0?void 0:p.access_token)!==null&&b!==void 0?b:void 0})});if(o)throw o;return rr()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(s?.url),this._returnResult({data:{provider:t.provider,url:s?.url},error:null})}catch(s){if(We(s))return this._returnResult({data:{provider:t.provider,url:null},error:s});throw s}}async linkIdentityIdToken(t){return await this._useSession(async n=>{var s;try{const{error:o,data:{session:l}}=n;if(o)throw o;const{options:u,provider:f,token:m,access_token:p,nonce:b}=t,_=await rt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(s=l?.access_token)!==null&&s!==void 0?s:void 0,body:{provider:f,id_token:m,access_token:p,nonce:b,link_identity:!0,gotrue_meta_security:{captcha_token:u?.captchaToken}},xform:Qi}),{data:x,error:S}=_;return S?this._returnResult({data:{user:null,session:null},error:S}):!x||!x.session||!x.user?this._returnResult({data:{user:null,session:null},error:new Xo}):(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("USER_UPDATED",x.session)),this._returnResult({data:x,error:S}))}catch(o){if(await tr(this.storage,`${this.storageKey}-code-verifier`),We(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}})}async unlinkIdentity(t){try{return await this._useSession(async n=>{var s,o;const{data:l,error:u}=n;if(u)throw u;return await rt(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(o=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&o!==void 0?o:void 0})})}catch(n){if(We(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const s=Date.now();return await zL(async o=>(o>0&&await IL(200*Math.pow(2,o-1)),this._debug(n,"refreshing attempt",o),await rt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Qi})),(o,l)=>{const u=200*Math.pow(2,o);return l&&$f(l)&&Date.now()+u-s<oc})}catch(s){if(this._debug(n,"error",s),We(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const s=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",s),rr()&&!n.skipBrowserRedirect&&window.location.assign(s),{data:{provider:t,url:s},error:null}}async _recoverAndRefresh(){var t,n;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const o=await Fo(this.storage,this.storageKey);if(o&&this.userStorage){let u=await Fo(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!u&&(u={user:o.user},await lc(this.userStorage,this.storageKey+"-user",u)),o.user=(t=u?.user)!==null&&t!==void 0?t:fg()}else if(o&&!o.user&&!o.user){const u=await Fo(this.storage,this.storageKey+"-user");u&&u?.user?(o.user=u.user,await tr(this.storage,this.storageKey+"-user"),await lc(this.storage,this.storageKey,o)):o.user=fg()}if(this._debug(s,"session from storage",o),!this._isValidSession(o)){this._debug(s,"session is not valid"),o!==null&&await this._removeSession();return}const l=((n=o.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<dg;if(this._debug(s,`session has${l?"":" not"} expired with margin of ${dg}s`),l){if(this.autoRefreshToken&&o.refresh_token){const{error:u}=await this._callRefreshToken(o.refresh_token);u&&(console.error(u),$f(u)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:u,error:f}=await this._getUser(o.access_token);!f&&u?.user?(o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(u){console.error("Error getting user data:",u),this._debug(s,"error getting user data, skipping SIGNED_IN notification",u)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(s,"error",o),console.error(o);return}finally{this._debug(s,"end")}}async _callRefreshToken(t){var n,s;if(!t)throw new Ur;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new Rm;const{data:l,error:u}=await this._refreshAccessToken(t);if(u)throw u;if(!l.session)throw new Ur;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const f={data:l.session,error:null};return this.refreshingDeferred.resolve(f),f}catch(l){if(this._debug(o,"error",l),We(l)){const u={data:null,error:l};return $f(l)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(u),u}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(l),l}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(t,n,s=!0){const o=`#_notifyAllSubscribers(${t})`;this._debug(o,"begin",n,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:t,session:n});const l=[],u=Array.from(this.stateChangeEmitters.values()).map(async f=>{try{await f.callback(t,n)}catch(m){l.push(m)}});if(await Promise.all(u),l.length>0){for(let f=0;f<l.length;f+=1)console.error(l[f]);throw l[0]}}finally{this._debug(o,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await tr(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},t),s=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&n.user&&await lc(this.userStorage,this.storageKey+"-user",{user:n.user});const o=Object.assign({},n);delete o.user;const l=E1(o);await lc(this.storage,this.storageKey,l)}else{const o=E1(n);await lc(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await tr(this.storage,this.storageKey),await tr(this.storage,this.storageKey+"-code-verifier"),await tr(this.storage,this.storageKey+"-user"),this.userStorage&&await tr(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&rr()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),oc);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:s}}=n;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((s.expires_at*1e3-t)/oc);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${oc}ms, refresh threshold is ${kb} ticks`),o<=kb&&await this._callRefreshToken(s.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Ay)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!rr()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,s){const o=[`provider=${encodeURIComponent(n)}`];if(s?.redirectTo&&o.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s?.scopes&&o.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[l,u]=await Ql(this.storage,this.storageKey),f=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(u)}`});o.push(f.toString())}if(s?.queryParams){const l=new URLSearchParams(s.queryParams);o.push(l.toString())}return s?.skipBrowserRedirect&&o.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${t}?${o.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var s;const{data:o,error:l}=n;return l?this._returnResult({data:null,error:l}):await rt(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(s=o?.session)===null||s===void 0?void 0:s.access_token})})}catch(n){if(We(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(t){try{return await this._useSession(async n=>{var s,o;const{data:l,error:u}=n;if(u)return this._returnResult({data:null,error:u});const f=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:m,error:p}=await rt(this.fetch,"POST",`${this.url}/factors`,{body:f,headers:this.headers,jwt:(s=l?.session)===null||s===void 0?void 0:s.access_token});return p?this._returnResult({data:null,error:p}):(t.factorType==="totp"&&m.type==="totp"&&(!((o=m?.totp)===null||o===void 0)&&o.qr_code)&&(m.totp.qr_code=`data:image/svg+xml;utf-8,${m.totp.qr_code}`),this._returnResult({data:m,error:null}))})}catch(n){if(We(n))return this._returnResult({data:null,error:n});throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var s;const{data:o,error:l}=n;if(l)return this._returnResult({data:null,error:l});const u=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?pB(t.webauthn.credential_response):gB(t.webauthn.credential_response)})}:{code:t.code}),{data:f,error:m}=await rt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:u,headers:this.headers,jwt:(s=o?.session)===null||s===void 0?void 0:s.access_token});return m?this._returnResult({data:null,error:m}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+f.expires_in},f)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",f),this._returnResult({data:f,error:m}))})}catch(n){if(We(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var s;const{data:o,error:l}=n;if(l)return this._returnResult({data:null,error:l});const u=await rt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(s=o?.session)===null||s===void 0?void 0:s.access_token});if(u.error)return u;const{data:f}=u;if(f.type!=="webauthn")return{data:f,error:null};switch(f.webauthn.type){case"create":return{data:Object.assign(Object.assign({},f),{webauthn:Object.assign(Object.assign({},f.webauthn),{credential_options:Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:fB(f.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},f),{webauthn:Object.assign(Object.assign({},f.webauthn),{credential_options:Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:mB(f.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(We(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(t){const{data:n,error:s}=await this._challenge({factorId:t.factorId});return s?this._returnResult({data:null,error:s}):await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){var t;const{data:{user:n},error:s}=await this.getUser();if(s)return{data:null,error:s};const o={all:[],phone:[],totp:[],webauthn:[]};for(const l of(t=n?.factors)!==null&&t!==void 0?t:[])o.all.push(l),l.status==="verified"&&o[l.factor_type].push(l);return{data:o,error:null}}async _getAuthenticatorAssuranceLevel(){var t,n;const{data:{session:s},error:o}=await this.getSession();if(o)return this._returnResult({data:null,error:o});if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=hg(s.access_token);let u=null;l.aal&&(u=l.aal);let f=u;((n=(t=s.user.factors)===null||t===void 0?void 0:t.filter(b=>b.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(f="aal2");const p=l.amr||[];return{data:{currentLevel:u,nextLevel:f,currentAuthenticationMethods:p},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async n=>{const{data:{session:s},error:o}=n;return o?this._returnResult({data:null,error:o}):s?await rt(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:s.access_token,xform:l=>({data:l,error:null})}):this._returnResult({data:null,error:new Ur})})}catch(n){if(We(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(t,n){try{return await this._useSession(async s=>{const{data:{session:o},error:l}=s;if(l)return this._returnResult({data:null,error:l});if(!o)return this._returnResult({data:null,error:new Ur});const u=await rt(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"approve"},xform:f=>({data:f,error:null})});return u.data&&u.data.redirect_url&&rr()&&!n?.skipBrowserRedirect&&window.location.assign(u.data.redirect_url),u})}catch(s){if(We(s))return this._returnResult({data:null,error:s});throw s}}async _denyAuthorization(t,n){try{return await this._useSession(async s=>{const{data:{session:o},error:l}=s;if(l)return this._returnResult({data:null,error:l});if(!o)return this._returnResult({data:null,error:new Ur});const u=await rt(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"deny"},xform:f=>({data:f,error:null})});return u.data&&u.data.redirect_url&&rr()&&!n?.skipBrowserRedirect&&window.location.assign(u.data.redirect_url),u})}catch(s){if(We(s))return this._returnResult({data:null,error:s});throw s}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:n},error:s}=t;return s?this._returnResult({data:null,error:s}):n?await rt(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new Ur})})}catch(t){if(We(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async n=>{const{data:{session:s},error:o}=n;return o?this._returnResult({data:null,error:o}):s?(await rt(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Ur})})}catch(n){if(We(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(t,n={keys:[]}){let s=n.keys.find(f=>f.kid===t);if(s)return s;const o=Date.now();if(s=this.jwks.keys.find(f=>f.kid===t),s&&this.jwks_cached_at+jL>o)return s;const{data:l,error:u}=await rt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(u)throw u;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=o,s=l.keys.find(f=>f.kid===t),!s)?null:s}async getClaims(t,n={}){try{let s=t;if(!s){const{data:S,error:T}=await this.getSession();if(T||!S.session)return this._returnResult({data:null,error:T});s=S.session.access_token}const{header:o,payload:l,signature:u,raw:{header:f,payload:m}}=hg(s);n?.allowExpired||ZL(l.exp);const p=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,n?.keys?{keys:n.keys}:n?.jwks);if(!p){const{error:S}=await this.getUser(s);if(S)throw S;return{data:{claims:l,header:o,signature:u},error:null}}const b=VL(o.alg),_=await crypto.subtle.importKey("jwk",p,b,!0,["verify"]);if(!await crypto.subtle.verify(b,_,u,RL(`${f}.${m}`)))throw new rm("Invalid JWT signature");return{data:{claims:l,header:o,signature:u},error:null}}catch(s){if(We(s))return this._returnResult({data:null,error:s});throw s}}};jy.nextInstanceID={};const TB=ky,kB=jy,AB=Object.freeze(Object.defineProperty({__proto__:null,AuthAdminApi:TB,AuthApiError:ok,AuthClient:kB,AuthError:wc,AuthImplicitGrantRedirectError:Fu,AuthInvalidCredentialsError:Gu,AuthInvalidJwtError:rm,AuthInvalidTokenResponseError:Xo,AuthPKCEGrantCodeExchangeError:jb,AuthRetryableFetchError:nm,AuthSessionMissingError:Ur,AuthUnknownError:Ya,AuthWeakPasswordError:Nb,CustomAuthError:na,GoTrueAdminApi:ky,GoTrueClient:jy,NavigatorLockAcquireTimeoutError:mk,SIGN_OUT_SCOPES:If,isAuthApiError:lk,isAuthError:We,isAuthImplicitGrantRedirectError:uk,isAuthRetryableFetchError:$f,isAuthSessionMissingError:ck,isAuthWeakPasswordError:NL,lockInternals:Qo,navigatorLock:pk,processLock:iB},Symbol.toStringTag,{value:"Module"})),yk=hd(AB);var M1;function jB(){if(M1)return Ru;M1=1,Object.defineProperty(Ru,"__esModule",{value:!0}),Ru.SupabaseAuthClient=void 0;const e=yk;let t=class extends e.AuthClient{constructor(s){super(s)}};return Ru.SupabaseAuthClient=t,Ru}var C1;function R1(){if(C1)return Vh;C1=1,Object.defineProperty(Vh,"__esModule",{value:!0});const e=OT,t=BT(),n=YT,s=vL,o=xL(),l=wL(),u=SL(),f=jB();class m{constructor(b,_,x){var S,T,k;this.supabaseUrl=b,this.supabaseKey=_;const A=(0,u.validateSupabaseUrl)(b);if(!_)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",A),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",A),this.storageUrl=new URL("storage/v1",A),this.functionsUrl=new URL("functions/v1",A);const M=`sb-${A.hostname.split(".")[0]}-auth-token`,R={db:o.DEFAULT_DB_OPTIONS,realtime:o.DEFAULT_REALTIME_OPTIONS,auth:Object.assign(Object.assign({},o.DEFAULT_AUTH_OPTIONS),{storageKey:M}),global:o.DEFAULT_GLOBAL_OPTIONS},N=(0,u.applySettingDefaults)(x??{},R);this.storageKey=(S=N.auth.storageKey)!==null&&S!==void 0?S:"",this.headers=(T=N.global.headers)!==null&&T!==void 0?T:{},N.accessToken?(this.accessToken=N.accessToken,this.auth=new Proxy({},{get:(D,C)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(C)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((k=N.auth)!==null&&k!==void 0?k:{},this.headers,N.global.fetch),this.fetch=(0,l.fetchWithAuth)(_,this._getAccessToken.bind(this),N.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},N.realtime)),this.accessToken&&this.accessToken().then(D=>this.realtime.setAuth(D)).catch(D=>console.warn("Failed to set initial Realtime auth token:",D)),this.rest=new t.PostgrestClient(new URL("rest/v1",A).href,{headers:this.headers,schema:N.db.schema,fetch:this.fetch}),this.storage=new s.StorageClient(this.storageUrl.href,this.headers,this.fetch,x?.storage),N.accessToken||this._listenForAuthEvents()}get functions(){return new e.FunctionsClient(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(b){return this.rest.from(b)}schema(b){return this.rest.schema(b)}rpc(b,_={},x={head:!1,get:!1,count:void 0}){return this.rest.rpc(b,_,x)}channel(b,_={config:{}}){return this.realtime.channel(b,_)}getChannels(){return this.realtime.getChannels()}removeChannel(b){return this.realtime.removeChannel(b)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var b,_;if(this.accessToken)return await this.accessToken();const{data:x}=await this.auth.getSession();return(_=(b=x.session)===null||b===void 0?void 0:b.access_token)!==null&&_!==void 0?_:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:b,persistSession:_,detectSessionInUrl:x,storage:S,userStorage:T,storageKey:k,flowType:A,lock:M,debug:R,throwOnError:N},D,C){const G={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new f.SupabaseAuthClient({url:this.authUrl.href,headers:Object.assign(Object.assign({},G),D),storageKey:k,autoRefreshToken:b,persistSession:_,detectSessionInUrl:x,storage:S,userStorage:T,flowType:A,lock:M,debug:R,throwOnError:N,fetch:C,hasCustomAuthorizationHeader:Object.keys(this.headers).some(H=>H.toLowerCase()==="authorization")})}_initRealtimeClient(b){return new n.RealtimeClient(this.realtimeUrl.href,Object.assign(Object.assign({},b),{params:Object.assign({apikey:this.supabaseKey},b?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((_,x)=>{this._handleTokenChanged(_,"CLIENT",x?.access_token)})}_handleTokenChanged(b,_,x){(b==="TOKEN_REFRESHED"||b==="SIGNED_IN")&&this.changedAccessToken!==x?(this.changedAccessToken=x,this.realtime.setAuth(x)):b==="SIGNED_OUT"&&(this.realtime.setAuth(),_=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}return Vh.default=m,Vh}var L1;function NB(){return L1||(L1=1,(function(e){var t=Vs&&Vs.__createBinding||(Object.create?(function(b,_,x,S){S===void 0&&(S=x);var T=Object.getOwnPropertyDescriptor(_,x);(!T||("get"in T?!_.__esModule:T.writable||T.configurable))&&(T={enumerable:!0,get:function(){return _[x]}}),Object.defineProperty(b,S,T)}):(function(b,_,x,S){S===void 0&&(S=x),b[S]=_[x]})),n=Vs&&Vs.__exportStar||function(b,_){for(var x in b)x!=="default"&&!Object.prototype.hasOwnProperty.call(_,x)&&t(_,b,x)},s=Vs&&Vs.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};Object.defineProperty(e,"__esModule",{value:!0}),e.createClient=e.SupabaseClient=e.FunctionRegion=e.FunctionsError=e.FunctionsRelayError=e.FunctionsFetchError=e.FunctionsHttpError=e.PostgrestError=void 0;const o=s(R1());n(yk,e);var l=BT();Object.defineProperty(e,"PostgrestError",{enumerable:!0,get:function(){return l.PostgrestError}});var u=OT;Object.defineProperty(e,"FunctionsHttpError",{enumerable:!0,get:function(){return u.FunctionsHttpError}}),Object.defineProperty(e,"FunctionsFetchError",{enumerable:!0,get:function(){return u.FunctionsFetchError}}),Object.defineProperty(e,"FunctionsRelayError",{enumerable:!0,get:function(){return u.FunctionsRelayError}}),Object.defineProperty(e,"FunctionsError",{enumerable:!0,get:function(){return u.FunctionsError}}),Object.defineProperty(e,"FunctionRegion",{enumerable:!0,get:function(){return u.FunctionRegion}}),n(YT,e);var f=R1();Object.defineProperty(e,"SupabaseClient",{enumerable:!0,get:function(){return s(f).default}});const m=(b,_,x)=>new o.default(b,_,x);e.createClient=m;function p(){if(typeof window<"u"||typeof process>"u")return!1;const b=process.version;if(b==null)return!1;const _=b.match(/^v(\d+)\./);return _?parseInt(_[1],10)<=18:!1}p()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217")})(Vs)),Vs}var vk=NB();const _k=ll(vk),OB=S2({__proto__:null,default:_k},[vk]),{PostgrestError:tU,FunctionsHttpError:nU,FunctionsFetchError:rU,FunctionsRelayError:iU,FunctionsError:sU,FunctionRegion:aU,SupabaseClient:oU,createClient:DB,GoTrueAdminApi:lU,GoTrueClient:cU,AuthAdminApi:uU,AuthClient:dU,navigatorLock:hU,NavigatorLockAcquireTimeoutError:fU,lockInternals:mU,processLock:pU,SIGN_OUT_SCOPES:gU,AuthError:bU,AuthApiError:yU,AuthUnknownError:vU,CustomAuthError:_U,AuthSessionMissingError:xU,AuthInvalidTokenResponseError:wU,AuthInvalidCredentialsError:SU,AuthImplicitGrantRedirectError:EU,AuthPKCEGrantCodeExchangeError:TU,AuthRetryableFetchError:kU,AuthWeakPasswordError:AU,AuthInvalidJwtError:jU,isAuthError:NU,isAuthApiError:OU,isAuthSessionMissingError:DU,isAuthImplicitGrantRedirectError:MU,isAuthRetryableFetchError:CU,isAuthWeakPasswordError:RU,RealtimePresence:LU,RealtimeChannel:BU,RealtimeClient:PU,REALTIME_LISTEN_TYPES:$U,REALTIME_POSTGRES_CHANGES_LISTEN_EVENT:IU,REALTIME_PRESENCE_LISTEN_EVENTS:zU,REALTIME_SUBSCRIBE_STATES:UU,REALTIME_CHANNEL_STATES:HU}=_k||OB;console.log("ENV CHECK:",{url:"https://jouhybyquybxbnqztxum.supabase.co",key:"yJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpvdWh5YnlxdXlieGJucXp0eHVtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ5NjIwOTgsImV4cCI6MjA4MDUzODA5OH0.qAD7S7yRW8GxcRze_3dyirReIy6HvMr9DeET-djp1Fw"});function MB(){return DB("https://jouhybyquybxbnqztxum.supabase.co","yJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpvdWh5YnlxdXlieGJucXp0eHVtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ5NjIwOTgsImV4cCI6MjA4MDUzODA5OH0.qAD7S7yRW8GxcRze_3dyirReIy6HvMr9DeET-djp1Fw")}const Ni=MB(),CB={1948:{start:new Date(1948,4,1),end:new Date(1948,7,13)},1949:{start:new Date(1949,2,3),end:new Date(1949,7,11)},1950:{start:new Date(1950,2,1),end:new Date(1950,7,10)},1951:{start:new Date(1951,3,6),end:new Date(1951,7,9)},1955:{start:new Date(1955,3,5),end:new Date(1955,7,9)},1956:{start:new Date(1956,3,20),end:new Date(1956,7,30)},1957:{start:new Date(1957,3,5),end:new Date(1957,7,22)},1958:{start:new Date(1958,3,4),end:new Date(1958,7,21)},1959:{start:new Date(1959,3,3),end:new Date(1959,7,20)},1960:{start:new Date(1960,3,1),end:new Date(1960,7,18)},1987:{start:new Date(1987,3,10),end:new Date(1987,8,11)},1988:{start:new Date(1988,3,8),end:new Date(1988,8,9)}};function om(e,t,n){const s=CB[e];if(!s)return!1;const o=new Date(e,t-1,n,0,0,0,0);return o>=s.start&&o<s.end}function RB(e){if(!isFinite(e.getTime()))return 0;const t=e.getUTCFullYear(),n=Date.UTC(t,0,1),o=Math.floor((e.getTime()-n)/864e5)+1,l=e.getUTCHours(),u=e.getUTCMinutes(),f=e.getUTCSeconds(),m=(l-12)/24+u/1440+f/86400,p=2*Math.PI/365*(o-1+m);return 229.18*(75e-6+.001868*Math.cos(p)-.032077*Math.sin(p)-.014615*Math.cos(2*p)-.040849*Math.sin(2*p))}function LB(e){return e=(e+540)%360-180,e>=124&&e<=132||e>=129&&e<=146?135:e>=73&&e<=135?120:e>=-161&&e<=-154?-150:e>=-170&&e<-161?-165:e>=-150&&e<-141?-135:e>=-141&&e<-126?-120:e>=-126&&e<-111?-105:e>=-111&&e<-96?-90:e>=-96&&e<-81?-75:Math.round(e/15)*15}function cl(e,t,n=!1){const s=new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),0,0);if(n)return new Date(s.getTime()-1800*1e3);if(t==null||!isFinite(t))return s;let o=t;Math.abs(o)<=Math.PI+1e-6&&(o=o*180/Math.PI),o=(o+540)%360-180;const l=LB(o),u=4*(o-l),f=RB(s);return new Date(s.getTime()+(u+f)*60*1e3)}var zf={exports:{}},BB=zf.exports,B1;function PB(){return B1||(B1=1,(function(e,t){(function(n,s){e.exports=s()})(BB,function(){return(function(n){function s(l){if(o[l])return o[l].exports;var u=o[l]={i:l,l:!1,exports:{}};return n[l].call(u.exports,u,u.exports,s),u.l=!0,u.exports}var o={};return s.m=n,s.c=o,s.d=function(l,u,f){s.o(l,u)||Object.defineProperty(l,u,{configurable:!1,enumerable:!0,get:f})},s.n=function(l){var u=l&&l.__esModule?function(){return l.default}:function(){return l};return s.d(u,"a",u),u},s.o=function(l,u){return Object.prototype.hasOwnProperty.call(l,u)},s.p="",s(s.s=0)})([function(n,s,o){Object.defineProperty(s,"__esModule",{value:!0});var l=o(1),u=(function(f){return f&&f.__esModule?f:{default:f}})(l);s.default=u.default,n.exports=s.default},function(n,s,o){function l(te){return te&&te.__esModule?te:{default:te}}Object.defineProperty(s,"__esModule",{value:!0});var u=o(2),f=l(u),m=o(3),p=l(m),b=o(4),_=l(b),x=o(5),S=l(x),T=o(6),k=l(T),A=o(7),M=l(A),R=o(8),N=l(R),D=o(9),C=l(D),G=o(10),H=l(G),V=o(11),W=l(V),re=o(12),ee=l(re),q={lunarInfo:f.default,solarMonth:p.default,gan:_.default,zhi:S.default,animals:k.default,lunarTerm:M.default,lTermInfo:N.default,nStr1:C.default,nStr2:H.default,nStr3:W.default,nStr4:ee.default,lYearDays:function(te){var oe,Se=348;for(oe=32768;oe>8;oe>>=1)Se+=q.lunarInfo[te-1900]&oe?1:0;return Se+q.leapDays(te)},leapMonth:function(te){return 15&q.lunarInfo[te-1900]},leapDays:function(te){return q.leapMonth(te)?65536&q.lunarInfo[te-1900]?30:29:0},monthDays:function(te,oe){return oe>12||oe<1?-1:q.lunarInfo[te-1900]&65536>>oe?30:29},solarDays:function(te,oe){if(oe>12||oe<1)return-1;var Se=oe-1;return Se==1?te%4==0&&te%100!=0||te%400==0?29:28:q.solarMonth[Se]},toGanZhi:function(te){return q.gan[te%10]+q.zhi[te%12]},getTerm:function(te,oe){if(te<1900||te>2100||oe<1||oe>24)return-1;var Se=q.lTermInfo[te-1900],X=[parseInt("0x"+Se.substr(0,5)).toString(),parseInt("0x"+Se.substr(5,5)).toString(),parseInt("0x"+Se.substr(10,5)).toString(),parseInt("0x"+Se.substr(15,5)).toString(),parseInt("0x"+Se.substr(20,5)).toString(),parseInt("0x"+Se.substr(25,5)).toString()],ae=[X[0].substr(0,1),X[0].substr(1,2),X[0].substr(3,1),X[0].substr(4,2),X[1].substr(0,1),X[1].substr(1,2),X[1].substr(3,1),X[1].substr(4,2),X[2].substr(0,1),X[2].substr(1,2),X[2].substr(3,1),X[2].substr(4,2),X[3].substr(0,1),X[3].substr(1,2),X[3].substr(3,1),X[3].substr(4,2),X[4].substr(0,1),X[4].substr(1,2),X[4].substr(3,1),X[4].substr(4,2),X[5].substr(0,1),X[5].substr(1,2),X[5].substr(3,1),X[5].substr(4,2)];return parseInt(ae[oe-1])},toChinaYear:function(te){var oe=parseInt(te/1e3),Se=parseInt(te%1e3/100),X=parseInt(te%100/10),ae=te%10;return q.nStr4[oe]+q.nStr4[Se]+q.nStr4[X]+q.nStr4[ae]+""},toChinaMonth:function(te){if(te>12||te<1)return-1;var oe=q.nStr3[te-1];return oe+=""},toChinaDay:function(te){var oe;switch(te){case 10:oe="";break;case 20:oe="";break;case 30:oe="";break;default:oe=q.nStr2[Math.floor(te/10)],oe+=q.nStr1[te%10]}return oe},getAnimal:function(te){return q.animals[(te-4)%12]},solar2lunar:function(ye,K,U){if(ye<1900||ye>2100||ye==1900&&K==1&&U<31)return-1;if(ye)var X=new Date(ye,parseInt(K)-1,U);else var X=new Date;var ae,fe=0,J=0,ye=X.getFullYear(),K=X.getMonth()+1,U=X.getDate(),$=(Date.UTC(X.getFullYear(),X.getMonth(),X.getDate())-Date.UTC(1900,0,31))/864e5;for(ae=1900;ae<2101&&$>0;ae++)J=q.lYearDays(ae),$-=J;$<0&&($+=J,ae--);var F=new Date,Z=!1;F.getFullYear()==ye&&F.getMonth()+1==K&&F.getDate()==U&&(Z=!0);var B=X.getDay(),Y=q.nStr1[B];B==0&&(B=7);var ie=ae,fe=q.leapMonth(ae),ce=!1;for(ae=1;ae<13&&$>0;ae++)fe>0&&ae==fe+1&&ce==0?(--ae,ce=!0,J=q.leapDays(ie)):J=q.monthDays(ie,ae),ce==1&&ae==fe+1&&(ce=!1),$-=J;$==0&&fe>0&&ae==fe+1&&(ce?ce=!1:(ce=!0,--ae)),$<0&&($+=J,--ae);var xe=ae,ke=$+1,je=K-1,Me=q.getTerm(ye,3),Ee=q.toGanZhi(ye-4),Be=new Date(ye,1,Me).getTime();new Date(ye,je,U).getTime()<Be&&(Ee=q.toGanZhi(ye-5));var Ce=q.getTerm(ye,2*K-1),Le=q.getTerm(ye,2*K),Ue=q.toGanZhi(12*(ye-1900)+K+11);U>=Ce&&(Ue=q.toGanZhi(12*(ye-1900)+K+12));var me=!1,Ie="";Ce==U&&(me=!0,Ie=q.lunarTerm[2*K-2]),Le==U&&(me=!0,Ie=q.lunarTerm[2*K-1]);var le=Date.UTC(ye,je,1,0,0,0,0)/864e5+25567+10,he=q.toGanZhi(le+U-1);return{lYear:ie,lMonth:xe,lDay:ke,animal:q.getAnimal(ie),yearCn:q.toChinaYear(ie),monthCn:(ce&&fe===xe?"":"")+q.toChinaMonth(xe),dayCn:q.toChinaDay(ke),cYear:ye,cMonth:K,cDay:U,gzYear:Ee,gzMonth:Ue,gzDay:he,isToday:Z,isLeap:ce,nWeek:B,ncWeek:""+Y,isTerm:me,term:Ie}},lunar2solar:function(te,oe,Se,X){var ae=q.leapMonth(te);if(q.leapDays(te),X&&ae!=oe||te==2100&&oe==12&&Se>1||te==1900&&oe==1&&Se<31)return-1;var J=q.monthDays(te,oe);if(te<1900||te>2100||Se>J)return-1;for(var ye=0,K=1900;K<te;K++)ye+=q.lYearDays(K);for(var U=0,$=!1,K=1;K<oe;K++)U=q.leapMonth(te),$||U<=K&&U>0&&(ye+=q.leapDays(te),$=!0),ye+=q.monthDays(te,K);X&&(ye+=J);var F=Date.UTC(1900,1,30,0,0,0),Z=new Date(864e5*(ye+Se-31)+F),B=Z.getUTCFullYear(),Y=Z.getUTCMonth()+1,ie=Z.getUTCDate();return q.solar2lunar(B,Y,ie)}};s.default=q,n.exports=s.default},function(n,s,o){Object.defineProperty(s,"__esModule",{value:!0}),s.default=[19416,19168,42352,21717,53856,55632,91476,22176,39632,21970,19168,42422,42192,53840,119381,46400,54944,44450,38320,84343,18800,42160,46261,27216,27968,109396,11104,38256,21234,18800,25958,54432,59984,28309,23248,11104,100067,37600,116951,51536,54432,120998,46416,22176,107956,9680,37584,53938,43344,46423,27808,46416,86869,19872,42416,83315,21168,43432,59728,27296,44710,43856,19296,43748,42352,21088,62051,55632,23383,22176,38608,19925,19152,42192,54484,53840,54616,46400,46752,103846,38320,18864,43380,42160,45690,27216,27968,44870,43872,38256,19189,18800,25776,29859,59984,27480,23232,43872,38613,37600,51552,55636,54432,55888,30034,22176,43959,9680,37584,51893,43344,46240,47780,44368,21977,19360,42416,86390,21168,43312,31060,27296,44368,23378,19296,42726,42208,53856,60005,54576,23200,30371,38608,19195,19152,42192,118966,53840,54560,56645,46496,22224,21938,18864,42359,42160,43600,111189,27936,44448,84835,37744,18936,18800,25776,92326,59984,27424,108228,43744,37600,53987,51552,54615,54432,55888,23893,22176,42704,21972,21200,43448,43344,46240,46758,44368,21920,43940,42416,21168,45683,26928,29495,27296,44368,84821,19296,42352,21732,53600,59752,54560,55968,92838,22224,19168,43476,42192,53584,62034,54560],n.exports=s.default},function(n,s,o){Object.defineProperty(s,"__esModule",{value:!0}),s.default=[31,28,31,30,31,30,31,31,30,31,30,31],n.exports=s.default},function(n,s,o){Object.defineProperty(s,"__esModule",{value:!0}),s.default=["","","","","","","","","",""],n.exports=s.default},function(n,s,o){Object.defineProperty(s,"__esModule",{value:!0}),s.default=["","","","","","","","","","","",""],n.exports=s.default},function(n,s,o){Object.defineProperty(s,"__esModule",{value:!0}),s.default=["","","","","","","","","","","",""],n.exports=s.default},function(n,s,o){Object.defineProperty(s,"__esModule",{value:!0}),s.default=["","","","","","","","","","","","","","","","","","","","","","","",""],n.exports=s.default},function(n,s,o){Object.defineProperty(s,"__esModule",{value:!0}),s.default=["9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c3598082c95f8c965cc920f","97bd0b06bdb0722c965ce1cfcc920f","b027097bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd0b06bdb0722c965ce1cfcc920f","b027097bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd0b06bdb0722c965ce1cfcc920f","b027097bd097c36b0b6fc9274c91aa","9778397bd19801ec9210c965cc920e","97b6b97bd19801ec95f8c965cc920f","97bd09801d98082c95f8e1cfcc920f","97bd097bd097c36b0b6fc9210c8dc2","9778397bd197c36c9210c9274c91aa","97b6b97bd19801ec95f8c965cc920e","97bd09801d98082c95f8e1cfcc920f","97bd097bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c91aa","97b6b97bd19801ec95f8c965cc920e","97bcf97c3598082c95f8e1cfcc920f","97bd097bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c3598082c95f8c965cc920f","97bd097bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c3598082c95f8c965cc920f","97bd097bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd097bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd097bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd097bd07f595b0b6fc920fb0722","9778397bd097c36b0b6fc9210c8dc2","9778397bd19801ec9210c9274c920e","97b6b97bd19801ec95f8c965cc920f","97bd07f5307f595b0b0bc920fb0722","7f0e397bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c920e","97b6b97bd19801ec95f8c965cc920f","97bd07f5307f595b0b0bc920fb0722","7f0e397bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c91aa","97b6b97bd19801ec9210c965cc920e","97bd07f1487f595b0b0bc920fb0722","7f0e397bd097c36b0b6fc9210c8dc2","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf7f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf7f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf7f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf7f1487f531b0b0bb0b6fb0722","7f0e397bd07f595b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c9274c920e","97bcf7f0e47f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9210c91aa","97b6b97bd197c36c9210c9274c920e","97bcf7f0e47f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c920e","97b6b7f0e47f531b0723b0b6fb0722","7f0e37f5307f595b0b0bc920fb0722","7f0e397bd097c36b0b6fc9210c8dc2","9778397bd097c36b0b70c9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e37f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc9210c8dc2","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e27f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0787b0721","7f0e27f0e47f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9210c91aa","97b6b7f0e47f149b0723b0787b0721","7f0e27f0e47f531b0723b0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9210c8dc2","977837f0e37f149b0723b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e37f5307f595b0b0bc920fb0722","7f0e397bd097c35b0b6fc9210c8dc2","977837f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0721","7f0e37f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc9210c8dc2","977837f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","977837f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","977837f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","977837f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","977837f0e37f14998082b0787b06bd","7f07e7f0e47f149b0723b0787b0721","7f0e27f0e47f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","977837f0e37f14998082b0723b06bd","7f07e7f0e37f149b0723b0787b0721","7f0e27f0e47f531b0723b0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","977837f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e37f1487f595b0b0bb0b6fb0722","7f0e37f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e37f1487f531b0b0bb0b6fb0722","7f0e37f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e37f1487f531b0b0bb0b6fb0722","7f0e37f0e37f14898082b072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e37f0e37f14898082b072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e37f0e366aa89801eb072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f149b0723b0787b0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e37f0e366aa89801eb072297c35","7ec967f0e37f14998082b0723b06bd","7f07e7f0e47f149b0723b0787b0721","7f0e27f0e47f531b0723b0b6fb0722","7f0e37f0e366aa89801eb072297c35","7ec967f0e37f14998082b0723b06bd","7f07e7f0e37f14998083b0787b0721","7f0e27f0e47f531b0723b0b6fb0722","7f0e37f0e366aa89801eb072297c35","7ec967f0e37f14898082b0723b02d5","7f07e7f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e36665b66aa89801e9808297c35","665f67f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e36665b66a449801e9808297c35","665f67f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e36665b66a449801e9808297c35","665f67f0e37f14898082b072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e26665b66a449801e9808297c35","665f67f0e37f1489801eb072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722"],n.exports=s.default},function(n,s,o){Object.defineProperty(s,"__esModule",{value:!0}),s.default=["","","","","","","","","","",""],n.exports=s.default},function(n,s,o){Object.defineProperty(s,"__esModule",{value:!0}),s.default=["","","",""],n.exports=s.default},function(n,s,o){Object.defineProperty(s,"__esModule",{value:!0}),s.default=["","","","","","","","","","","",""],n.exports=s.default},function(n,s,o){Object.defineProperty(s,"__esModule",{value:!0}),s.default=["","","","","","","","","","",""],n.exports=s.default}])})})(zf)),zf.exports}var xk=PB();const $B=ll(xk),Ny=S2({__proto__:null,default:$B},[xk]);function Db(e){return typeof e=="object"&&e!==null}function IB(e){if(!Db(e))throw new Error("Invalid lunar2solar result");const t=e,n=t.cYear,s=t.cMonth,o=t.cDay;if(typeof n!="number"||typeof s!="number"||typeof o!="number")throw new Error("Invalid lunar2solar fields");const l=t.isLeap;return{cYear:n,cMonth:s,cDay:o,isLeap:typeof l=="boolean"?l:void 0}}function zB(e){const t=Db(e)&&"default"in e?e.default:e;if(!Db(t))throw new Error("solarlunar module invalid");const n=t.lunar2solar;if(typeof n!="function")throw new Error("solarlunar.lunar2solar not found");return(s,o,l)=>IB(n(s,o,l,!1))}const UB=zB(Ny);function Lm(e){const t=e.mingSikType??"/";let n=Number(e.birthDay.slice(0,4)),s=Number(e.birthDay.slice(4,6)),o=Number(e.birthDay.slice(6,8));if(e.calendarType==="lunar"){const R=UB(n,s,o);n=R.cYear,s=R.cMonth,o=R.cDay}const l=!e.birthTime||e.birthTime==="",u=l?4:Number(e.birthTime.slice(0,2)),f=l?30:Number(e.birthTime.slice(2,4)),m=!e.birthPlace||e.birthPlace.name===""||e.birthPlace.lon===0?127.5:e.birthPlace.lon,p=new Date(n,s-1,o,u,f,0,0),b=!e.birthPlace||typeof e.birthPlace=="object"&&e.birthPlace.name==="",_=cl(p,m,b),x=l?"":_.toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit"}),S=ut(_,m),T=At(_,m),k=_t(_,t),A=l?null:Pi(_,t),M=[` : ${S} ${T} ${k}`,A?`${A}`:null].filter(Boolean).join(" ");return{correctedLocal:x,ganji:M}}function Oy(e){const t=(e??"").trim();return t?t===""||t.toLowerCase()==="female"||t==="2"||t.toUpperCase()==="F"?"":(t===""||t.toLowerCase()==="male"||t==="1"||t.toUpperCase()==="M",""):""}function P1(e){if(!e)return null;const t=e.match(/(|||||||||)(|||||||||||)/);if(t)return t[1];const n=e.split(/\s+/).find(s=>s.endsWith(""));return n&&n.length>0?n.charAt(0):null}function $1(e){const t=Oy(e.gender),n=P1(e.ganjiText)??P1(e.ganji);if(!n)return"forward";const o=["","","","",""].includes(n),l=t==="";return o&&!l||!o&&l?"forward":"backward"}function HB(e){const t=e.dateObj instanceof Date?e.dateObj:e.dateObj?new Date(e.dateObj):new Date,n=e.corrected instanceof Date?e.corrected:e.corrected?new Date(e.corrected):new Date,s={...e,dateObj:t,corrected:n};try{const o=Lm(s),l={...s,...o},u=$1(l);return{...l,dir:u}}catch(o){console.error("[useMyeongSikStore] recalcGanjiSnapshot error:",o);const l=$1(s);return{...s,dir:l}}}function GB(e){const t={name:e.birth_place_name??"",lat:e.birth_place_lat??0,lon:e.birth_place_lon??127.5},n={id:e.id,name:e.name??"",birthDay:e.birth_day??"",birthTime:e.birth_time??"",gender:Oy(e.gender),birthPlace:t,relationship:e.relationship??"",memo:e.memo??"",folder:e.folder??"",mingSikType:["","/",""].includes(e.ming_sik_type)?e.ming_sik_type:"",DayChangeRule:e.day_change_rule===""||e.day_change_rule===""?e.day_change_rule:"",favorite:e.favorite??!1,dateObj:new Date,corrected:new Date,correctedLocal:"",dayStem:"",ganjiText:"",ganji:"",calendarType:"solar",dir:"forward"};return HB(n)}function mg(e,t){const n=e.birthPlace??{name:"",lat:0,lon:127.5};return{id:e.id,user_id:t,name:e.name??null,birth_day:e.birthDay??null,birth_time:e.birthTime??null,gender:Oy(e.gender),birth_place_name:n.name??null,birth_place_lat:typeof n.lat=="number"?n.lat:null,birth_place_lon:typeof n.lon=="number"?n.lon:null,relationship:e.relationship??null,memo:e.memo??null,folder:e.folder??null,ming_sik_type:e.mingSikType??null,day_change_rule:e.DayChangeRule??null,favorite:e.favorite??!1,updated_at:new Date().toISOString()}}const ss=md((e,t)=>({currentId:null,list:[],loading:!1,setCurrent:n=>e({currentId:n}),loadFromServer:async()=>{e({loading:!0});const{data:{user:n},error:s}=await Ni.auth.getUser();if(s||!n){console.error("loadFromServer: user not found / error",s),e({list:[],currentId:null,loading:!1});return}const{data:o,error:l}=await Ni.from("myeongsik").select("id, user_id, name, birth_day, birth_time, gender, birth_place_name, birth_place_lat, birth_place_lon, relationship, memo, folder, ming_sik_type, day_change_rule, favorite, created_at, updated_at").order("created_at",{ascending:!1});if(l||!o){console.error("loadFromServer error:",l),e({loading:!1});return}const f=o.filter(p=>p.user_id===n.id).map(GB),m=f[0]?.id??null;e({list:f,currentId:m,loading:!1})},migrateLocalToServer:async()=>{if(typeof window>"u")return;const n=window.localStorage.getItem("myeongsik-list");if(!n)return;let s;try{s=JSON.parse(n)}catch(T){console.error("migrateLocalToServer: JSON parse error",T),window.localStorage.removeItem("myeongsik-list");return}const o=s.state??{},l=Array.isArray(o.list)?o.list:[];if(l.length===0){window.localStorage.removeItem("myeongsik-list");return}const{data:{user:u},error:f}=await Ni.auth.getUser();if(f||!u){console.warn("migrateLocalToServer: no user, skip");return}const{data:m,error:p}=await Ni.from("myeongsik").select("id").eq("user_id",u.id);if(p){console.error("migrateLocalToServer: fetch existing ids error",p);return}const b=new Set((m??[]).map(T=>T.id)),_=l.filter(T=>!!T&&!b.has(T.id));if(_.length===0){console.log("migrateLocalToServer: nothing new to insert, just clear localStorage"),window.localStorage.removeItem("myeongsik-list");return}const x=_.map(T=>mg(T,u.id)),{error:S}=await Ni.from("myeongsik").upsert(x,{onConflict:"id"});if(S){console.error("migrateLocalToServer upsert error:",S);return}window.localStorage.removeItem("myeongsik-list")},add:async n=>{const{data:{user:s},error:o}=await Ni.auth.getUser();if(o||!s){console.error("add: user not found",o);return}e(f=>({list:[n,...f.list],currentId:f.currentId??n.id}));const l=mg(n,s.id),{error:u}=await Ni.from("myeongsik").upsert(l,{onConflict:"id"});u&&console.error("add upsert error:",u)},update:async(n,s)=>{const o=t().list.find(b=>b.id===n);if(!o)return;const l={...o,...s};e(b=>({list:b.list.map(_=>_.id===n?l:_)}));const{data:{user:u},error:f}=await Ni.auth.getUser();if(f||!u){console.error("update: user not found",f);return}const m=mg(l,u.id),{error:p}=await Ni.from("myeongsik").update(m).eq("id",n);p&&console.error("update error:",p)},remove:async n=>{e(o=>{const l=o.list.filter(f=>f.id!==n),u=o.currentId===n?l[0]?.id??null:o.currentId;return{list:l,currentId:u}});const{error:s}=await Ni.from("myeongsik").delete().eq("id",n);s&&console.error("remove error:",s)},reorder:n=>{e({list:n})},clear:()=>{e({currentId:null,list:[]})}})),FB=[{value:"",label:" (1 )"},{value:"/",label:" / "},{value:"",label:""},{value:"",label:""},{value:"",label:""},{value:"",label:""},{value:"",label:""}],wk=({value:e,onChange:t})=>{const[n,s]=P.useState(FB),[o,l]=P.useState(""),[u,f]=P.useState(!1),[m,p]=P.useState(""),[b,_]=P.useState(!1),{list:x}=ss(),T=x.some(N=>N.relationship==="")?n.filter(N=>N.value!==""):n;P.useEffect(()=>{e!==void 0&&l(e)},[e]);const k=N=>{const D=N.target.value;l(D),t?.(D),D===""?f(!0):(f(!1),p(""))};P.useEffect(()=>{const N=localStorage.getItem("relationshipOptions");N&&s(JSON.parse(N))},[]),P.useEffect(()=>{localStorage.setItem("relationshipOptions",JSON.stringify(n))},[n]);const A=()=>{if(!m.trim())return;const N={value:m,label:m};s([...n,N]),l(m),p(""),f(!1)},M=N=>{s(n.filter(D=>D.value!==N)),o===N&&l("")},R=N=>{if(!N.destination)return;const D=Array.from(n),[C]=D.splice(N.source.index,1);D.splice(N.destination.index,0,C),s(D)};return y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"rel_set flex items-center gap-2",children:[y.jsxs("select",{name:"relationship",id:"relationship",value:o,onChange:k,children:[y.jsx("option",{value:"",hidden:!0,children:""}),T.map(N=>y.jsx("option",{value:N.value,children:N.label},N.value)),y.jsx("option",{value:"",children:""})]}),y.jsx("button",{type:"button",onClick:()=>_(!0),className:"btn_style",children:""})]}),u&&!b&&y.jsxs("div",{className:"rel_set flex items-center mt-2 gap-2",children:[y.jsx("input",{type:"text",placeholder:" ",value:m,onChange:N=>p(N.target.value)}),y.jsx("button",{type:"button",onClick:A,className:"btn_style",children:""})]}),b&&y.jsxs("div",{className:"p-3 border mt-2 rounded bg-gray-50 dark:bg-neutral-900",children:[y.jsx("h4",{className:"font-bold mb-2",children:" "}),y.jsx(yd,{onDragEnd:R,children:y.jsx(il,{droppableId:"relList",children:N=>y.jsxs("ul",{ref:N.innerRef,...N.droppableProps,className:"space-y-1",children:[n.map((D,C)=>y.jsx(_c,{draggableId:D.value,index:C,children:G=>y.jsxs("li",{ref:G.innerRef,...G.draggableProps,...G.dragHandleProps,className:"flex justify-between items-center bg-white dark:bg-neutral-800 p-2 rounded border text-sm desk:text-base",children:[y.jsx("span",{className:"cursor-grab mr-2",children:""}),y.jsx("span",{className:"flex-1 pr-1",children:D.label}),y.jsx("button",{type:"button",className:"text-red-500",onClick:()=>M(D.value),children:""})]})},D.value)),N.placeholder]})})}),y.jsx("button",{type:"button",onClick:()=>_(!1),className:"w-full btn_style mt-2",children:""})]})]})},mn=" ",Sk=["","","","","",""],Dy="ms_folders",Ek="ms_folder_order",I1="ms_folder_favs",Mb="ms_disabled_presets",Wa="myeoun:folder-updated";function sl(e){if(e!==mn)return e||void 0}function Bm(e){if(typeof window>"u")return[];const t=window.localStorage.getItem(e);if(!t)return[];try{const n=JSON.parse(t);return Array.isArray(n)?n.filter(s=>typeof s=="string"):[]}catch{return[]}}function Pm(e,t){if(!(typeof window>"u"))try{window.localStorage.setItem(e,JSON.stringify(t))}catch{}}function YB(){const e=Bm(Mb);return Sk.filter(t=>!e.includes(t))}function My(){return Bm(Dy)}function Cb(){const e=YB(),t=My(),n=new Set,s=[];for(const o of[...e,...t])n.has(o)||(n.add(o),s.push(o));return s}function qB(){return[mn,...Cb()]}function Tk(e){const t=e.trim();if(!t||t===mn)return;const n=My();if(n.includes(t))return;const s=[...n,t];Pm(Dy,s),typeof window<"u"&&window.dispatchEvent(new Event(Wa))}function ZB(e){const t=My(),n=t.filter(s=>s!==e);n.length!==t.length&&(Pm(Dy,n),typeof window<"u"&&window.dispatchEvent(new Event(Wa)))}function VB(e){const t=Bm(Mb);if(t.includes(e))return;const n=[...t,e];Pm(Mb,n),typeof window<"u"&&window.dispatchEvent(new Event(Wa))}function Rb(){return Bm(Ek)}function Wu(e){Pm(Ek,e),typeof window<"u"&&window.dispatchEvent(new Event(Wa))}function Lb(e,t){const n=new Set(e),s=[];for(const o of t)n.has(o)&&!s.includes(o)&&s.push(o);for(const o of e)s.includes(o)||s.push(o);return s}function KB(e){return Array.from(new Set(e))}function rf(e){const t=e.filter(n=>n!==mn);return{rest:t,withUnassigned:[mn,...t]}}function WB(e,t){return Lb(t,e)}function XB({value:e,onChange:t}){const[n,s]=P.useState([mn]),[o,l]=P.useState(!1),[u,f]=P.useState(""),[m,p]=P.useState(!1),b=P.useCallback(()=>{if(typeof window>"u")return;const k=KB(qB()),A=k.includes(mn)?k:[mn,...k],{rest:M}=rf(A),R=Rb(),N=WB(R,M),D=[mn,...N];s(D),R.length===N.length&&R.every((G,H)=>G===N[H])||Wu(N)},[]);P.useEffect(()=>{if(b(),typeof window<"u"){const k=()=>b();return window.addEventListener(Wa,k),()=>window.removeEventListener(Wa,k)}},[b]);const _=P.useMemo(()=>e||mn,[e]),x=k=>{const{rest:A}=rf(k);Wu(A)},S=k=>{const{source:A,destination:M}=k;if(!M||M.index===A.index)return;const{rest:R}=rf(n),N=Array.from(R),[D]=N.splice(A.index,1);N.splice(M.index,0,D);const C=[mn,...N];s(C),x(C)},T=k=>{const A=sl(k);A&&(Tk(A),b())};return y.jsxs("div",{className:"space-y-2",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsxs("select",{className:"flex-1 border rounded-lg p-2",value:o?"__custom__":_,onChange:k=>{const A=k.target.value;if(A==="__custom__"){l(!0),t(void 0);return}l(!1),t(sl(A))},children:[n.map(k=>y.jsx("option",{value:k,children:k},k)),y.jsx("option",{value:"__custom__",children:"+   "})]}),y.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-neutral-200 hover:bg-neutral-300 dark:bg-neutral-800 dark:hover:bg-neutral-700 text-sm cursor-pointer",onClick:()=>p(k=>!k),children:m?" ":" "})]}),o&&y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("input",{type:"text",value:u,onChange:k=>f(k.target.value),placeholder:"  ",className:"flex-1 border rounded-lg p-2"}),y.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-neutral-800 hover:bg-neutral-700 text-sm text-white cursor-pointer",onClick:()=>{const k=u.trim();k&&(T(k),t(sl(k)),l(!1),f(""))},children:""})]}),m&&y.jsxs("div",{className:"p-3 border rounded bg-neutral-50 dark:bg-neutral-900",children:[y.jsx("h4",{className:"font-bold mb-2 text-s",children:"  "}),y.jsxs("div",{className:"flex items-center justify-between bg-white dark:bg-neutral-800 p-2 rounded border text-sm mb-2",children:[y.jsx("span",{className:"opacity-60 select-none",children:""}),y.jsxs("span",{className:"flex-1 px-2",children:[mn," ()"]})]}),y.jsx(yd,{onDragEnd:S,children:y.jsx(il,{droppableId:"folderList",direction:"vertical",type:"FOLDER",children:k=>y.jsxs("ul",{ref:k.innerRef,...k.droppableProps,className:"space-y-1",children:[rf(n).rest.map((A,M)=>y.jsx(_c,{draggableId:A,index:M,children:R=>y.jsxs("li",{ref:R.innerRef,...R.draggableProps,...R.dragHandleProps,className:"flex items-center justify-between bg-white dark:bg-neutral-800 p-2 rounded border text-sm",children:[y.jsx("span",{className:"cursor-grab select-none mr-2",children:""}),y.jsx("span",{className:"flex-1 pr-1",children:A})]})},A)),k.placeholder]})})})]}),y.jsxs("p",{className:"text-xs text-gray-500",children:['   "',mn,'" .      .']})]})}function kk({message:e,onClose:t,ms:n=2e3}){return P.useEffect(()=>{const s=setTimeout(t,n);return()=>clearTimeout(s)},[t,n]),y.jsx("div",{className:"fixed top-4 left-1/2 -translate-x-1/2 bg-black text-white px-4 py-2 rounded-lg shadow-lg z-[9999]",children:e})}function $m(e){return typeof e=="object"&&e!==null}function JB(e){return $m(e)&&"default"in e}function QB(e){return $m(e)&&typeof e.lunar2solar=="function"}function e7(e){if(!$m(e))throw new Error("Invalid lunar2solar result");const t=e.cYear,n=e.cMonth,s=e.cDay,o=e.isLeap;if(typeof t!="number"||typeof n!="number"||typeof s!="number")throw new Error("Invalid lunar2solar fields");return{cYear:t,cMonth:n,cDay:s,isLeap:typeof o=="boolean"?o:void 0}}function t7(e){const t=JB(e)?e.default:e;if(!QB(t))throw new Error("solarlunar.lunar2solar not found");return{lunar2solar:(s,o,l,u)=>{const f=t.lunar2solar(s,o,l,u);return e7(f)}}}const n7=t7(Ny);function pr(e,t,n,s=4,o=0){const l=n7.lunar2solar(e,t,n,!1);return new Date(l.cYear,l.cMonth-1,l.cDay,s,o)}const Lu=[{key:"name",label:"",placeholder:" ",type:"text"},{key:"birthDay",label:"",placeholder:": 19900101",type:"tel"},{key:"birthTime",label:" ",placeholder:": 1524",type:"tel"},{key:"mingSikType",label:" ",type:"mingrule"},{key:"gender",label:"",type:"radio"},{key:"birthPlace",label:" ",type:"place"},{key:"relationship",label:"",type:"relationship"},{key:"folder",label:" ",type:"folder"},{key:"memo",label:"",placeholder:" ",type:"textarea"}],Bu=[{value:"solar",label:"",id:"calendarType_solar"},{value:"lunar",label:"",id:"calendarType_lunar"}],sf=["","/",""],af=["",""];function pg(e,t,n){return n==="ArrowRight"||n==="ArrowDown"?(e+1)%t:n==="ArrowLeft"||n==="ArrowUp"?(e-1+t)%t:n==="Home"?0:n==="End"?t-1:e}function gg(e){const t=document.getElementById(e);t instanceof HTMLElement&&t.focus()}function r7({onSave:e,onClose:t}){const{add:n}=ss(),[s,o]=P.useState(0),[l,u]=P.useState({gender:"",mingSikType:"/",DayChangeRule:"",calendarType:"solar"}),[f,m]=P.useState(null),[p,b]=P.useState(!1),[_,x]=P.useState(!1),S=Lu[s],T=D=>m(D);P.useEffect(()=>{if(["name","birthDay","birthTime","memo"].includes(S.key)){const C=document.querySelector(".current-step input[type='text']:not([disabled]), .current-step textarea:not([disabled])");if(C){C.focus();return}}if(S.key==="mingSikType"){const C=document.querySelector("[id^='ming_'][id$='_lbl'][aria-checked='true']");if(C){C.focus();return}}if(S.key==="gender"){const C=document.querySelector("[id^='gender_'][id$='_lbl'][aria-checked='true']");if(C){C.focus();return}}if(l.birthPlace||_){const C=()=>{const G=document.querySelector(".current-step form button[type='submit']");G&&G.focus()};C(),setTimeout(C,0)}else{const C=document.getElementById("inputBirthPlaceBtn");C&&C.focus()}if(S.key==="relationship"){setTimeout(()=>{const C=document.querySelector(".current-step select");C&&C.focus()},0);return}if(S.key==="folder"){setTimeout(()=>{const C=document.querySelector(".current-step select");C&&C.focus()},0);return}document.querySelector(".current-step button, .current-step [tabindex='0']")?.focus()},[_,s,S.key,l.birthPlace]);const k=P.useMemo(()=>{if(l.calendarType!=="lunar"||!l.birthDay||l.birthDay.length!==8)return null;try{const D=Number(l.birthDay.slice(0,4)),C=Number(l.birthDay.slice(4,6)),G=Number(l.birthDay.slice(6,8)),H=pr(D,C,G);return`  ${H.getFullYear()}-${String(H.getMonth()+1).padStart(2,"0")}-${String(H.getDate()).padStart(2,"0")}`}catch(D){const C=D instanceof Error?D.message:void 0;return`  ${C?`: ${C}`:""}`}},[l.calendarType,l.birthDay]),A=()=>{const D=Lu[s];if(D.key==="name"&&(l.name||(u({...l,name:""}),T("   '' ."))),D.key==="birthDay"){const C=/^\d{8}$/;if(!l.birthDay||!C.test(l.birthDay))return T(" YYYYMMDD  ."),!1;const G=Number(l.birthDay.substring(0,4)),H=Number(l.birthDay.substring(4,6)),V=Number(l.birthDay.substring(6,8));if(G<1900||G>2100)return T("  1900~2100  ."),!1;if(H<1||H>12)return T("  01~12  ."),!1;if(V<1||V>31)return T("  01~31  ."),!1;if(l.calendarType==="solar"){const W=new Date(G,H-1,V);if(W.getFullYear()!==G||W.getMonth()+1!==H||W.getDate()!==V)return T("  ."),!1}else try{pr(G,H,V)}catch(W){return T(W instanceof Error?W.message:"   ."),!1}}if(D.key==="birthTime"){if(!l.birthTime&&!p)return T("   ''  ."),!1;if(l.birthTime){const C=Number(l.birthTime);if(Number.isNaN(C)||C<0||C>2359)return T("  00002359  ."),!1;const G=Number(l.birthTime.slice(0,2)),H=Number(l.birthTime.slice(2,4));if(G>23||H>59)return T("  00002359  ."),!1}}return D.key==="birthPlace"&&!l.birthPlace&&!_?(T("   ''  ."),!1):!0},M=()=>{if(!A())return;if(s<Lu.length-1){o(s+1);return}const D=sl(l.folder),C=!l.birthTime||l.birthTime==="",G=!l.birthPlace||typeof l.birthPlace=="object"&&l.birthPlace.name==="";let H=Number(l.birthDay.slice(0,4)),V=Number(l.birthDay.slice(4,6)),W=Number(l.birthDay.slice(6,8));if(l.calendarType==="lunar"){const Y=pr(H,V,W);H=Y.getFullYear(),V=Y.getMonth()+1,W=Y.getDate()}const re=C?4:Number(l.birthTime.slice(0,2)),ee=C?30:Number(l.birthTime.slice(2,4)),q=new Date(H,V-1,W,re,ee,0,0),te=_||!l.birthPlace||l.birthPlace.lon===0?127.5:l.birthPlace.lon,oe=cl(q,te,G),Se=l.mingSikType??"/",X=C?"":oe.toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit"}),ae=ut(oe,te),J=At(oe,te),ye=_t(oe,Se),K=C?null:Pi(oe,Se),U=[` : ${ae} ${J} ${ye}`,K?`${K}`:null].filter(Boolean).join(" ");function $(Y,ie){const ce=["","","","","","","","","",""].includes(Y),xe=ie==="";return ce?xe?"forward":"backward":xe?"backward":"forward"}const F=ae.charAt(0),Z=$(F,l.gender??""),B={id:q2(),name:l.name?.trim()||"",birthDay:l.birthDay||"",birthTime:C?"":l.birthTime||"",gender:l.gender??"",birthPlace:_?{name:"",lat:0,lon:127.5}:l.birthPlace??{name:"",lat:0,lon:127.5},relationship:l.relationship??"",memo:l.memo??"",mingSikType:l.mingSikType??"/",DayChangeRule:l.mingSikType===""?"":"",folder:D,correctedLocal:X,ganji:U,calendarType:l.calendarType??"solar",dir:Z,corrected:oe,dateObj:l.dateObj||new Date,dayStem:l.dayStem||"",ganjiText:l.ganjiText||"   "};n(B),e(B),m(" !"),u({gender:"",mingSikType:"/",calendarType:"solar"}),b(!1),x(!1),o(0)},R=D=>{if(D.key!=="Enter")return;const C=D.target,G=C.getAttribute("role");if(G==="radio"||G==="checkbox")return;const H=document.getElementById("mapModal");if(H&&H.contains(C))return;const V=C.tagName.toLowerCase(),W=C instanceof HTMLInputElement?C.type:"";if(V==="textarea"){if(D.shiftKey)return;D.preventDefault(),M();return}if(W==="radio"||W==="checkbox"){D.preventDefault(),C instanceof HTMLInputElement&&C.click();return}V==="button"&&C.type!=="submit"||(D.preventDefault(),M())},N=D=>{switch(D){case"birthPlace":return _?"":l.birthPlace?.name||"";case"birthTime":return p?"":l.birthTime||"";case"folder":return l.folder?String(l.folder):mn;default:{const G=l[D];return typeof G=="string"?G:G!=null?String(G):""}}};return y.jsxs("div",{className:"mx-auto mt-10 space-y-2 max-w-[640px] w-[96%] text-neutral-900 dark:text-neutral-100",children:[f&&y.jsx(kk,{message:f,onClose:()=>m(null)}),Lu.slice(0,s).map((D,C)=>y.jsxs("button",{onClick:()=>o(C),className:"p-3 rounded-lg bg-neutral-100 dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 flex justify-between w-full text-left hover:bg-neutral-200 dark:hover:bg-neutral-800/80 transition-colors",children:[y.jsx("span",{className:"font-semibold",children:D.label}),y.jsx("span",{className:"text-neutral-600 dark:text-neutral-300",children:N(D.key)})]},D.key)),y.jsx("div",{className:"p-4 border rounded-lg shadow current-step bg-white dark:bg-neutral-900 border-neutral-200 dark:border-neutral-800",children:y.jsxs("form",{onSubmit:D=>{D.preventDefault(),M()},onKeyDown:R,children:[y.jsx("label",{className:"block mb-2 font-bold",children:S.label}),S.key==="name"&&y.jsx("input",{type:"text",className:"w-full border rounded-lg p-2 bg-white dark:bg-neutral-900 border-neutral-300 dark:border-neutral-700 placeholder-neutral-400 dark:placeholder-neutral-500 text-neutral-900 dark:text-neutral-100",placeholder:S.placeholder,value:l.name||"",onChange:D=>u({...l,name:D.target.value})}),S.key==="birthDay"&&y.jsxs("div",{className:"space-y-2",children:[y.jsxs("div",{className:"flex gap-1 items-center",children:[y.jsx("input",{type:"text",className:"flex-1 border rounded-lg p-2 bg-white dark:bg-neutral-900 border-neutral-300 dark:border-neutral-700 placeholder-neutral-400 dark:placeholder-neutral-500 text-neutral-900 dark:text-neutral-100",placeholder:S.placeholder,value:l.birthDay||"",onChange:D=>{const C=D.target.value.replace(/\D/g,"");u({...l,birthDay:C.slice(0,8)})},inputMode:"numeric",pattern:"\\d*",maxLength:8}),y.jsx("fieldset",{role:"radiogroup","aria-label":" ",className:"flex gap-1 text-sm",children:Bu.map(({value:D,label:C,id:G})=>{const H=l.calendarType===D;return y.jsxs("span",{className:"inline-flex items-center gap-1",children:[y.jsx("input",{id:G,name:"calendarType",type:"radio",style:{display:"none"}}),y.jsx("label",{htmlFor:G,id:`${G}_lbl`,role:"radio","aria-checked":H,tabIndex:0,className:`cursor-pointer select-none px-2 py-1 rounded-md border
                                     border-neutral-300 dark:border-neutral-700
                                     bg-white dark:bg-neutral-900
                                     focus-visible:outline focus-visible:outline-2 focus-visible:outline-amber-500
                                     data-[checked=true]:border-amber-400 data-[checked=true]:bg-amber-50
                                     dark:data-[checked=true]:bg-amber-500/10`,"data-checked":H?"true":"false",onKeyDown:V=>{if(V.stopPropagation(),V.key===" "||V.key==="Enter"){V.preventDefault(),u({...l,calendarType:D});return}if(!["ArrowRight","ArrowLeft","ArrowUp","ArrowDown","Home","End"].includes(V.key))return;V.preventDefault();const re=Bu.findIndex(te=>te.value===l.calendarType),ee=pg(re<0?0:re,Bu.length,V.key),q=Bu[ee].value;u({...l,calendarType:q}),gg(`${Bu[ee].id}_lbl`)},onClick:V=>{V.preventDefault(),u({...l,calendarType:D})},children:C})]},D)})})]}),l.calendarType==="lunar"&&y.jsx("div",{className:"flex items-center justify-end",children:y.jsx("span",{className:"text-xs text-neutral-600 dark:text-neutral-300",children:k})}),l.birthDay&&l.birthDay.length===8&&(()=>{const D=Number(l.birthDay.slice(0,4)),C=Number(l.birthDay.slice(4,6)),G=Number(l.birthDay.slice(6,8));return om(D,C,G)?y.jsx("div",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:" ."}):null})()]}),S.key==="birthTime"&&y.jsxs("div",{className:"space-y-2",children:[y.jsx("input",{type:"text",className:"w-full border rounded-lg p-2 disabled:opacity-50 bg-white dark:bg-neutral-900 border-neutral-300 dark:border-neutral-700 placeholder-neutral-400 dark:placeholder-neutral-500 text-neutral-900 dark:text-neutral-100",placeholder:S.placeholder,value:p?"":l.birthTime||"",onChange:D=>{const C=D.target.value.replace(/\D/g,"");u({...l,birthTime:C.slice(0,4)})},inputMode:"numeric",pattern:"\\d*",maxLength:4,disabled:p}),y.jsxs("span",{className:"inline-flex items-center gap-1",children:[y.jsx("input",{id:"birthTimeX",type:"checkbox",style:{display:"none"}}),y.jsx("label",{htmlFor:"birthTimeX",role:"checkbox","aria-checked":p,tabIndex:0,className:`text-sm select-none cursor-pointer px-2 py-1 rounded-md border
                             border-neutral-300 dark:border-neutral-700
                             bg-white dark:bg-neutral-900
                             focus-visible:outline focus-visible:outline-2 focus-visible:outline-amber-500
                             data-[checked=true]:border-amber-400 data-[checked=true]:bg-amber-50
                             dark:data-[checked=true]:bg-amber-500/10`,"data-checked":p?"true":"false",onKeyDown:D=>{D.stopPropagation(),(D.key===" "||D.key==="Enter")&&(D.preventDefault(),b(!p))},onClick:D=>{D.preventDefault(),b(!p)},children:""})]})]}),S.key==="mingSikType"&&y.jsx("fieldset",{role:"radiogroup","aria-label":" ",className:"flex flex-wrap gap-3",children:sf.map(D=>{const C=`ming_${D}`,G=(l.mingSikType??"/")===D;return y.jsxs("span",{className:"inline-flex items-center gap-1",children:[y.jsx("input",{id:C,name:"mingSikType",type:"radio",style:{display:"none"}}),y.jsxs("label",{htmlFor:C,id:`${C}_lbl`,role:"radio","aria-checked":G,tabIndex:0,className:`cursor-pointer select-none px-2 py-1 rounded-md border
                                 border-neutral-300 dark:border-neutral-700
                                 bg-white dark:bg-neutral-900
                                 focus-visible:outline focus-visible:outline-2 focus-visible:outline-amber-500
                                 data-[checked=true]:border-amber-400 data-[checked=true]:bg-amber-50
                                 dark:data-[checked=true]:bg-amber-500/10`,"data-checked":G?"true":"false",onKeyDown:H=>{if(H.stopPropagation(),H.key===" "||H.key==="Enter"){H.preventDefault(),u({...l,mingSikType:D});return}if(!["ArrowRight","ArrowLeft","ArrowUp","ArrowDown","Home","End"].includes(H.key))return;H.preventDefault();const W=l.mingSikType??"/",re=sf.indexOf(W),ee=pg(re,sf.length,H.key),q=sf[ee];u({...l,mingSikType:q}),gg(`ming_${q}_lbl`)},onClick:H=>{H.preventDefault(),u({...l,mingSikType:D})},children:[D,""]})]},D)})}),S.key==="gender"&&y.jsx("fieldset",{role:"radiogroup","aria-label":"",className:"flex gap-2",children:af.map(D=>{const C=`gender_${D}`,G=(l.gender??"")===D;return y.jsxs("span",{className:"inline-flex items-center gap-1",children:[y.jsx("input",{id:C,name:"gender",type:"radio",style:{display:"none"}}),y.jsx("label",{htmlFor:C,id:`${C}_lbl`,role:"radio","aria-checked":G,tabIndex:0,className:`cursor-pointer select-none px-2 py-1 rounded-md border
                                 border-neutral-300 dark:border-neutral-700
                                 bg-white dark:bg-neutral-900
                                 focus-visible:outline focus-visible:outline-2 focus-visible:outline-amber-500
                                 data-[checked=true]:border-amber-400 data-[checked=true]:bg-amber-50
                                 dark:data-[checked=true]:bg-amber-500/10`,"data-checked":G?"true":"false",onKeyDown:H=>{if(H.stopPropagation(),H.key===" "||H.key==="Enter"){H.preventDefault(),u({...l,gender:D});return}if(!["ArrowRight","ArrowLeft","ArrowUp","ArrowDown","Home","End"].includes(H.key))return;H.preventDefault();const W=l.gender??"",re=af.indexOf(W),ee=pg(re,af.length,H.key),q=af[ee];u({...l,gender:q}),gg(`gender_${q}_lbl`)},onClick:H=>{H.preventDefault(),u({...l,gender:D})},children:D})]},D)})}),S.key==="birthPlace"&&y.jsxs("div",{className:"space-y-2",children:[y.jsx(Z2,{onSelect:D=>u({...l,birthPlace:D})}),y.jsxs("span",{className:"inline-flex items-center gap-1",children:[y.jsx("input",{id:"birthPlaceX",type:"checkbox",style:{display:"none"}}),y.jsx("label",{htmlFor:"birthPlaceX",role:"checkbox","aria-checked":_,tabIndex:0,className:`text-sm select-none cursor-pointer px-2 py-1 rounded-md border
                             border-neutral-300 dark:border-neutral-700
                             bg-white dark:bg-neutral-900
                             focus-visible:outline focus-visible:outline-2 focus-visible:outline-amber-500
                             data-[checked=true]:border-amber-400 data-[checked=true]:bg-amber-50
                             dark:data-[checked=true]:bg-amber-500/10`,"data-checked":_?"true":"false",onKeyDown:D=>{D.stopPropagation(),(D.key===" "||D.key==="Enter")&&(D.preventDefault(),x(!_))},onClick:D=>{D.preventDefault(),x(!_)},children:""})]})]}),S.key==="relationship"&&y.jsx(wk,{value:l.relationship||"",onChange:D=>u({...l,relationship:D})}),S.key==="folder"&&y.jsx(XB,{value:sl(l.folder),onChange:D=>u({...l,folder:D})}),S.key==="memo"&&y.jsx("textarea",{className:"w-full border rounded-lg p-2 bg-white dark:bg-neutral-900 border-neutral-300 dark:border-neutral-700 placeholder-neutral-400 dark:placeholder-neutral-500 text-neutral-900 dark:text-neutral-100",placeholder:S.placeholder,value:l.memo||"",onChange:D=>u({...l,memo:D.target.value})}),y.jsxs("div",{className:"flex justify-between gap-2",children:[y.jsx("button",{className:"mt-4 w-full btn_style btn_secondary dark:focus:ring-amber-500",onClick:t,children:""}),y.jsx("button",{type:"submit",className:"mt-4 w-full btn_style dark:focus:ring-amber-500",children:s===Lu.length-1?"":""})]})]})})]})}var of={},z1;function i7(){if(z1)return of;z1=1,of.match=l,of.parse=u;var e=/(?:(only|not)?\s*([^\s\(\)]+)(?:\s*and)?\s*)?(.+)?/i,t=/\(\s*([^\s\:\)]+)\s*(?:\:\s*([^\s\)]+))?\s*\)/,n=/^(?:(min|max)-)?(.+)/,s=/(em|rem|px|cm|mm|in|pt|pc)?$/,o=/(dpi|dpcm|dppx)?$/;function l(b,_){return u(b).some(function(x){var S=x.inverse,T=x.type==="all"||_.type===x.type;if(T&&S||!(T||S))return!1;var k=x.expressions.every(function(A){var M=A.feature,R=A.modifier,N=A.value,D=_[M];if(!D)return!1;switch(M){case"orientation":case"scan":return D.toLowerCase()===N.toLowerCase();case"width":case"height":case"device-width":case"device-height":N=p(N),D=p(D);break;case"resolution":N=m(N),D=m(D);break;case"aspect-ratio":case"device-aspect-ratio":case"device-pixel-ratio":N=f(N),D=f(D);break;case"grid":case"color":case"color-index":case"monochrome":N=parseInt(N,10)||1,D=parseInt(D,10)||0;break}switch(R){case"min":return D>=N;case"max":return D<=N;default:return D===N}});return k&&!S||!k&&S})}function u(b){return b.split(",").map(function(_){_=_.trim();var x=_.match(e),S=x[1],T=x[2],k=x[3]||"",A={};return A.inverse=!!S&&S.toLowerCase()==="not",A.type=T?T.toLowerCase():"all",k=k.match(/\([^\)]+\)/g)||[],A.expressions=k.map(function(M){var R=M.match(t),N=R[1].toLowerCase().match(n);return{modifier:N[1],feature:N[2],value:R[2]}}),A})}function f(b){var _=Number(b),x;return _||(x=b.match(/^(\d+)\s*\/\s*(\d+)$/),_=x[1]/x[2]),_}function m(b){var _=parseFloat(b),x=String(b).match(o)[1];switch(x){case"dpcm":return _/2.54;case"dppx":return _*96;default:return _}}function p(b){var _=parseFloat(b),x=String(b).match(s)[1];switch(x){case"em":return _*16;case"rem":return _*16;case"cm":return _*96/2.54;case"mm":return _*96/2.54/10;case"in":return _*96;case"pt":return _*72;case"pc":return _*72/12;default:return _}}return of}var bg,U1;function s7(){if(U1)return bg;U1=1;var e=i7().match,t=typeof window<"u"?window.matchMedia:null;function n(o,l,u){var f=this,m;t&&!u&&(m=t.call(window,o)),m?(this.matches=m.matches,this.media=m.media,m.addListener(_)):(this.matches=e(o,l),this.media=o),this.addListener=p,this.removeListener=b,this.dispose=x;function p(S){m&&m.addListener(S)}function b(S){m&&m.removeListener(S)}function _(S){f.matches=S.matches,f.media=S.media}function x(){m&&m.removeListener(_)}}function s(o,l,u){return new n(o,l,u)}return bg=s,bg}var a7=s7();const o7=ll(a7);var l7=/[A-Z]/g,c7=/^ms-/,yg={};function u7(e){return"-"+e.toLowerCase()}function Ak(e){if(yg.hasOwnProperty(e))return yg[e];var t=e.replace(l7,u7);return yg[e]=c7.test(t)?"-"+t:t}function d7(e,t){if(e===t)return!0;if(!e||!t)return!1;const n=Object.keys(e),s=Object.keys(t),o=n.length;if(s.length!==o)return!1;for(let l=0;l<o;l++){const u=n[l];if(e[u]!==t[u]||!Object.prototype.hasOwnProperty.call(t,u))return!1}return!0}var vg={exports:{}},_g,H1;function h7(){if(H1)return _g;H1=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return _g=e,_g}var xg,G1;function f7(){if(G1)return xg;G1=1;var e=h7();function t(){}function n(){}return n.resetWarningCache=t,xg=function(){function s(u,f,m,p,b,_){if(_!==e){var x=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw x.name="Invariant Violation",x}}s.isRequired=s;function o(){return s}var l={array:s,bigint:s,bool:s,func:s,number:s,object:s,string:s,symbol:s,any:s,arrayOf:o,element:s,elementType:s,instanceOf:o,node:s,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:n,resetWarningCache:t};return l.PropTypes=l,l},xg}var F1;function m7(){return F1||(F1=1,vg.exports=f7()()),vg.exports}var p7=m7();const Rt=ll(p7),Tr=Rt.oneOfType([Rt.string,Rt.number]),jk={all:Rt.bool,grid:Rt.bool,aural:Rt.bool,braille:Rt.bool,handheld:Rt.bool,print:Rt.bool,projection:Rt.bool,screen:Rt.bool,tty:Rt.bool,tv:Rt.bool,embossed:Rt.bool},g7={orientation:Rt.oneOf(["portrait","landscape"]),scan:Rt.oneOf(["progressive","interlace"]),aspectRatio:Rt.string,deviceAspectRatio:Rt.string,height:Tr,deviceHeight:Tr,width:Tr,deviceWidth:Tr,color:Rt.bool,colorIndex:Rt.bool,monochrome:Rt.bool,resolution:Tr,type:Object.keys(jk)},{type:GU,...b7}=g7,y7={minAspectRatio:Rt.string,maxAspectRatio:Rt.string,minDeviceAspectRatio:Rt.string,maxDeviceAspectRatio:Rt.string,minHeight:Tr,maxHeight:Tr,minDeviceHeight:Tr,maxDeviceHeight:Tr,minWidth:Tr,maxWidth:Tr,minDeviceWidth:Tr,maxDeviceWidth:Tr,minColor:Rt.number,maxColor:Rt.number,minColorIndex:Rt.number,maxColorIndex:Rt.number,minMonochrome:Rt.number,maxMonochrome:Rt.number,minResolution:Tr,maxResolution:Tr,...b7},v7={...jk,...y7};var _7={all:v7};const x7=e=>`not ${e}`,w7=(e,t)=>{const n=Ak(e);return typeof t=="number"&&(t=`${t}px`),t===!0?n:t===!1?x7(n):`(${n}: ${t})`},S7=e=>e.join(" and "),E7=e=>{const t=[];return Object.keys(_7.all).forEach(n=>{const s=e[n];s!=null&&t.push(w7(n,s))}),S7(t)},T7=P.createContext(void 0),k7=e=>e.query||E7(e),Y1=e=>e?Object.keys(e).reduce((n,s)=>(n[Ak(s)]=e[s],n),{}):void 0,Nk=()=>{const e=P.useRef(!1);return P.useEffect(()=>{e.current=!0},[]),e.current},A7=e=>{const t=P.useContext(T7),n=()=>Y1(e)||Y1(t),[s,o]=P.useState(n);return P.useEffect(()=>{const l=n();d7(s,l)||o(l)},[e,t]),s},j7=e=>{const t=()=>k7(e),[n,s]=P.useState(t);return P.useEffect(()=>{const o=t();n!==o&&s(o)},[e]),n},N7=(e,t)=>{const n=()=>o7(e,t||{},!!t),[s,o]=P.useState(n),l=Nk();return P.useEffect(()=>{if(l){const u=n();return o(u),()=>{u&&u.dispose()}}},[e,t]),s},O7=e=>{const[t,n]=P.useState(e.matches);return P.useEffect(()=>{const s=o=>{n(o.matches)};return e.addListener(s),n(e.matches),()=>{e.removeListener(s)}},[e]),t},D7=(e,t,n)=>{const s=A7(t),o=j7(e);if(!o)throw new Error("Invalid or missing MediaQuery!");const l=N7(o,s),u=O7(l);return Nk(),P.useEffect(()=>{},[u]),P.useEffect(()=>()=>{l&&l.dispose()},[]),u},Ok=(()=>{const e=[];for(let t=0;t<60;t++)e.push(`${Ar[t%10]}${Fr[t%12]}`);return e})();function M7(e){const t=Ok.indexOf(e);if(t<0)throw new Error(`Unknown : ${e}`);return t}function lm(e,t,n=1){const s=M7(e),o=t==="forward"?n:-n;return Ok[(s+o+60*1e3)%60]}const C7=60*1e3,R7=60*C7,L7=24*R7;function B7(e,t){const n=new Date(e.getTime()),s=n.getFullYear()+t,o=n.getMonth(),l=n.getDate();return new Date(Date.UTC(s,o,l,n.getUTCHours(),n.getUTCMinutes()))}function Bb(e){const t=new Date(e);return t.setSeconds(0,0),t}function P7(e,t,n){const s=e.getHours(),o=n==="/"?(Math.floor((s+1)/2)*2-1+24)%24:(Math.floor(s/2)*2+1)%24,l=new Date(e);l.setHours(o,0,0,0);const u=new Date(l);u.setHours(o+2,0,0,0);const f=e.getTime()-l.getTime(),m=u.getTime()-e.getTime();return t==="backward"?f:m}function Dk(e,t,n,s=120,o="/"){const l=Bb(e),u=P7(l,n,o),f=Bb(new Date(l.getTime()+u*120)),m=B7(e,s).getTime(),p=[];let b=lm(t,n,1);for(let _=f.getTime();_<=m;_+=10*L7)p.push({at:new Date(_),gz:b}),b=lm(b,n,1);return{firstChange:f,events:p}}function Mk(e,t){const n=t==="forward"?e===""?"":"":e===""?"":"";return s=>s===n}function Ck(e,t,n,s){const o=Mk(s,n);let l=t;const u=[];for(const f of e.events){const m=f.gz.charAt(1);o(m)&&(l=lm(l,n,1),u.push({at:f.at,gz:l}))}return{events:u}}function as(e){const t=e.getFullYear(),n=[{deg:315,name:""},{deg:345,name:""},{deg:15,name:""},{deg:45,name:""},{deg:75,name:""},{deg:105,name:""},{deg:135,name:""},{deg:165,name:""},{deg:195,name:""},{deg:225,name:""},{deg:255,name:""},{deg:285,name:""}],s={deg:315,name:""},o=n.map(f=>({name:f.name,date:Hn(t,f.deg)})).concat([{name:s.name,date:Hn(t+1,s.deg)},{name:"",date:Hn(t+1,285)}]),l=Hn(t,315),u=Hn(t+1,315);return o.filter(f=>f.date>=l&&f.date<u).sort((f,m)=>f.date.getTime()-m.date.getTime())}const $7={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},I7={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},z7=e=>$7[e]??("".includes(e)?e:null),U7=e=>I7[e]??("".includes(e)?e:null);function q1(e){const t=z7(e[0]),n=U7(e[1]);if(!t||!n)throw new Error(`Invalid GZ: ${e}`);return`${t}${n}`}function xd(e,t,n,s=120,o){function l(N){return N instanceof Date||(N=new Date(N)),Math.floor((N.getHours()+1)%24/2)}function u(N){return["","","","","","","","","","","",""][l(N)]}function f(N,D,C){const G=N.charAt(0),H=N.charAt(1),V=Ar.indexOf(G),W=Fr.indexOf(H),re=D==="forward"?C:-C,ee=(V+re%10+10)%10,q=(W+re%12+12)%12;return Ar[ee]+Fr[q]}const m=as(e).sort((N,D)=>N.date.getTime()-D.date.getTime());let p;if(n==="forward"){const N=m.findIndex(D=>D.date>=e);N>=0&&(p=m[N].date)}else{const N=m.filter(D=>D.date<=e);N.length&&(p=N[N.length-1].date)}function b(N,D){const C=u(N),G={:23,:1,:3,:5,:7,:9,:11,:13,:15,:17,:19,:21},H=G[C],V=(H+2)%24,W=new Date(N);if(W.setSeconds(0,0),n==="backward"&&D){const ee=u(D),q=G[ee],te=new Date(D);return te.setHours(q,0,0,0),te}if(n==="forward"&&D){const ee=u(D),q=G[ee],te=new Date(D);if(te.setHours(q,0,0,0),te>W)return te}const re=new Date(W);return n==="forward"?(re.setHours(V,0,0,0),re<=W&&re.setDate(re.getDate()+1)):(re.setHours(H,0,0,0),re>=W&&re.setDate(re.getDate()-1)),re}new Date(e).setSeconds(0,0);const x=q1(At(e,127.5)),S=b(e,p),T=Math.floor(n==="forward"?(S.getTime()-e.getTime())/6e4:(e.getTime()-S.getTime())/6e4),k=Math.round(T/120*(14400*60*1e3));let A=new Date(e.getTime()+k);try{const N=q1(At(e,o));(n==="forward"&&x!==N||n==="backward"&&x!==N)&&(A=new Date(e.getTime()+6e4))}catch{}const M=s/10,R=[];for(let N=0;N<M;N++){const D=new Date(A);D.setFullYear(D.getFullYear()+N*10),D.setSeconds(0,0);const C=f(t,n,N+1);R.push({at:D,gz:C})}return{natalMonthPillar:t,firstChange:A,mPillars:[],events:R}}function H7(e,t){const s=(t.getTime()-e.getTime())/(365.2425*24*60*60*1e3);return Math.max(0,Math.floor(s))}function Rk(e,t,n,s,o){const l=Mk(s,n);let u=t;const f=[];for(const m of e.events){const p=m.gz.charAt(1);l(p)&&(u=lm(u,n,1),f.push({at:m.at,gz:u,age:H7(o,m.at)}))}return{events:f}}function G7(e){const t=Number(e.birthDay.slice(0,4)),n=Number(e.birthDay.slice(4,6)),s=Number(e.birthDay.slice(6,8));let o=12,l=0;return e.birthTime&&e.birthTime!==""&&/^\d{4}$/.test(e.birthTime)&&(o=Number(e.birthTime.slice(0,2)),l=Number(e.birthTime.slice(2,4))),new Date(t,n-1,s,o,l,0,0)}function Im(e){const t=G7(e),n=!e.birthPlace||typeof e.birthPlace=="object"&&e.birthPlace.name==="",s=cl(t,e.birthPlace?.lon??null,n);return Bb(s)}function Cy(e,t){const n=e.birthPlace?.lon??127.5,s=Im(e),o=_t(s,t),l=Pi(s,t,o.charAt(0));return{year:ut(s,n),month:At(s,n),day:o,hour:l}}const F7=(()=>{const e=[];for(let t=0;t<60;t++)e.push(`${Ar[t%10]}${Fr[t%12]}`);return e})(),Y7=e=>F7.indexOf(e),wg=e=>{if(Y7(e)<0)throw new Error(`Unknown : ${e}`);return{stem:e[0],branch:e[1]}};function Ry(e){return typeof e=="object"&&e!==null}function q7(e){return Ry(e)&&"default"in e}function Z7(e){return Ry(e)&&typeof e.lunar2solar=="function"}function V7(e){if(!Ry(e))throw new Error("Invalid lunar2solar result");const t=e.cYear,n=e.cMonth,s=e.cDay,o=e.isLeap;if(typeof t!="number"||typeof n!="number"||typeof s!="number")throw new Error("Invalid lunar2solar fields");return{cYear:t,cMonth:n,cDay:s,isLeap:typeof o=="boolean"?o:void 0}}function K7(e){const t=q7(e)?e.default:e;if(!Z7(t))throw new Error("solarlunar.lunar2solar not found");return{lunar2solar:(s,o,l,u)=>{const f=t.lunar2solar(s,o,l,!!u);return V7(f)}}}const W7=K7(Ny),Z1=e=>e<10?`0${e}`:`${e}`;function Ly(e){const t=e,n=typeof t.birthDay=="string"?t.birthDay:"",s=typeof t.calendarType=="string"?t.calendarType:"solar";if(n.length<8||s!=="lunar")return e;const o=Number(n.slice(0,4)),l=Number(n.slice(4,6)),u=Number(n.slice(6,8)),f=["isLeap","isLeapMonth","leapMonth","leap","lunarLeap"];let m=!1;for(const p of f){const b=t[p];if(typeof b=="boolean"){m=b;break}if(typeof b=="number"){m=b===1;break}if(typeof b=="string"){m=b==="1"||b.toLowerCase()==="true";break}}try{const p=W7.lunar2solar(o,l,u,m),b=`${p.cYear}${Z1(p.cMonth)}${Z1(p.cDay)}`;return{...e,birthDay:b,calendarType:"solar"}}catch{return e}}function X7(e,t="/"){const n=P.useMemo(()=>Ly(e),[e]),s=P.useMemo(()=>Im(n),[n]),o=P.useMemo(()=>Cy(n,t),[n,t]);return P.useMemo(()=>{const l=xd(s,o.month,n.dir,120,n?.birthPlace?.lon??127.5),u=new Date;function f(N,D){let C=null;const G=D.getTime();for(const H of N)if(H.at.getTime()<=G)C=H;else break;return C}const m=f(l.events,u)?.gz??o.month,p=wg(m),b=u.getFullYear(),_=Hn(b,315),S=_&&u>=_?b:b-1,T=ut(new Date(S,1,10,0,0,0),127.5),k=wg(T),A=At(u,127.5),M=wg(A),R=[];return M&&R.push({key:"wolun",label:"",data:M}),k&&R.push({key:"seun",label:"",data:k}),p&&R.push({key:"daeun",label:"",data:p}),R},[s,n.dir,o.month,n.birthPlace?.lon])}function Xu(e){const t=n=>n.toString().padStart(2,"0");return`${e.getFullYear()} ${t(e.getMonth()+1)} ${t(e.getDate())} ${t(e.getHours())} ${t(e.getMinutes())}`}function uc(e){return e<10?`0${e}`:`${e}`}function J7(e){return`${uc(e.getHours())}:${uc(e.getMinutes())}`}function Q7(e){return`${e.getFullYear()}-${uc(e.getMonth()+1)}-${uc(e.getDate())} ${uc(e.getHours())}:${uc(e.getMinutes())}`}const hi=md()(H2((e,t)=>{const n=new Date,s="/",o=127.5,l=o,u=ut(n,l),f=At(n,l),m=_t(n,s);return{date:n,scope:"",rule:s,lon:o,yearGZ:u,monthGZ:f,dayGZ:m,setDate:p=>{const{rule:b,lon:_}=t(),x=typeof _=="number"?_:void 0;e({date:p,yearGZ:ut(p,x),monthGZ:At(p,x),dayGZ:_t(p,b)})},resetDate:()=>{const{rule:p,lon:b}=t(),_=new Date,x=typeof b=="number"?b:void 0;e({date:_,yearGZ:ut(_,x),monthGZ:At(_,x),dayGZ:_t(_,p)})},resetMonth:()=>{const{lon:p}=t(),b=new Date;e({date:b,monthGZ:At(b,typeof p=="number"?p:void 0)})},setScope:p=>e({scope:p}),setRule:p=>{const{date:b,lon:_}=t(),x=typeof _=="number"?_:void 0;e({rule:p,yearGZ:ut(b,x),monthGZ:At(b,x),dayGZ:_t(b,p)})},setLon:p=>{const{date:b,rule:_}=t(),x=typeof p=="number"?p:void 0;e({lon:p,yearGZ:ut(b,x),monthGZ:At(b,x),dayGZ:_t(b,_)})},setFromEvent:(p,b)=>{const{rule:_,lon:x}=t(),S=typeof x=="number"?x:void 0;e({date:p.at,scope:b,yearGZ:ut(p.at,S),monthGZ:At(p.at,S),dayGZ:_t(p.at,_)})},forceKey:new Date}},{name:"luck-picker-v1",merge:(e,t)=>{const n=e;return n.date&&typeof n.date=="string"&&(n.date=new Date(n.date)),{...t,...n}}})),ul={Classic:"",Modern:""};function Xt(e,t){const s={:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}}[e];return s?s[t]??"":""}function e4(e,t){return{:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}}[e]?.[t]??""}function t4(e,t){const n={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},s={:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}},o=n[e];return o&&s[o]?s[o][t]??"":""}function n4(e,t){return{:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}}[e]?.[t]??""}function r4(e,t){const n={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},s={:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}},o=n[e];return o&&s[o]?s[o][t]??"":""}function Jt(e){const{baseBranch:t,targetBranch:n,era:s,gaehwa:o}=e;return!t||!n?"":s===""?o?e4(t,n):t4(t,n):o?n4(t,n):r4(t,n)}function wd(e,t="/",n=100){const s=P.useMemo(()=>Ly(e),[e]),o=P.useMemo(()=>Im(s),[s]),l=P.useMemo(()=>Cy(s,t),[s,t]),u=(f,m)=>{const p=m.getFullYear()-f.getFullYear(),b=m.getMonth()-f.getMonth(),_=m.getDate()-f.getDate(),x=b<0||b===0&&_<0?p-1:p;return Math.max(0,x)};return P.useMemo(()=>xd(o,l.month,s.dir,n,s.birthPlace?.lon??127.5).events.map(m=>({...m,age:u(o,m.at)})),[o,l.month,s.dir,n,s.birthPlace?.lon])}function Sg(e){return e instanceof Date&&!Number.isNaN(e.getTime())}function i4(e,t){if(!Array.isArray(e)||e.length===0||!Sg(t))return{gz:"",at:t,index:-1};const n=e;for(let l=0;l<n.length;l++){const u=n[l],f=n[l+1];if(!Sg(u.at))continue;if(t.getTime()>=u.at.getTime()&&(!f||Sg(f.at)&&t.getTime()<f.at.getTime()))return{gz:u.gz??"",at:u.at,index:l}}if(t.getTime()<n[0].at.getTime()){const l=n[0];return{gz:l.gz??"",at:l.at,index:0}}const s=n.length-1,o=n[s];return{gz:o.gz??"",at:o.at,index:s}}function By(e,t,n){const{date:s,rule:o,lon:l}=hi(),u=P.useMemo(()=>n??s??new Date,[n,s]),f=wd(e,e?.mingSikType),{gz:m}=i4(f,u);return P.useMemo(()=>{try{const p=l??e?.birthPlace?.lon??127.5,b=o??e?.mingSikType??t??"/";return{dae:{gz:m,at:u},se:{gz:ut(u,p),at:u},wol:{gz:At(u,p),at:u},il:{gz:_t(u,b),at:u}}}catch{const p=new Date;return{dae:{gz:"",at:p},se:{gz:"",at:p},wol:{gz:"",at:p},il:{gz:"",at:p}}}},[u,o,l,e,t,m])}const Py={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},$y={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},s4=Object.fromEntries(Object.entries(Py).map(([e,t])=>[t,e])),a4=Object.fromEntries(Object.entries($y).map(([e,t])=>[t,e])),o4=new Set(["","","","","","","","","",""]),l4=new Set(["","","","","","","","","","","",""]),c4=[{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""}],u4=(()=>{const e={};for(const t of c4){const[n,s]=t.keys;e[n]={label:t.label,elem:t.elem},e[s]={label:t.label,elem:t.elem}}return e})();function d4(e){switch(e){case"":return"bg-green-600 text-white";case"":return"bg-red-600 text-white";case"":return"bg-yellow-600 text-white";case"":return"bg-gray-500 text-white";case"":return"bg-blue-700 text-white";default:return"bg-neutral-700 text-white"}}const h4={:1,:2,:3};function f4(e){return e.includes("")?3:e.includes("")?2:(e.includes(""),1)}const m4={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};function p4(e){switch(m4[e]){case"":return"bg-green-600 text-white border-green-600";case"":return"bg-red-600 text-white border-red-600";case"":return"bg-yellow-500 text-white border-yellow-500";case"":return"bg-gray-400 text-white border-gray-400";case"":return"bg-blue-900 text-white border-blue-600";default:return"bg-neutral-700 text-white border-neutral-700"}}function g4({data:e,hourTable:t}){const{date:n}=hi(),s=br(B=>B.settings),o=s.showNabeum??!0,l=e.mingSikType??t??"/",u=!e.birthPlace||e.birthPlace.name===""||!e.birthPlace.lon?127.5:e.birthPlace.lon,{solarY:f,solarM:m,solarD:p}=P.useMemo(()=>{let B=Number(e.birthDay?.slice(0,4)??2e3),Y=Number(e.birthDay?.slice(4,6)??1),ie=Number(e.birthDay?.slice(6,8)??1);if(e.calendarType==="lunar"){const fe=pr(B,Y,ie);B=fe.getFullYear(),Y=fe.getMonth()+1,ie=fe.getDate()}return{solarY:B,solarM:Y,solarD:ie}},[e.birthDay,e.calendarType]),[b,_]=P.useState(!1);P.useEffect(()=>{f&&m&&p&&_(om(f,m,p))},[f,m,p]);const x=!e.birthTime||e.birthTime==="";function S(B,Y){const ie=!B.birthTime||B.birthTime==="";let fe=Number(B.birthDay.slice(0,4)),ce=Number(B.birthDay.slice(4,6)),xe=Number(B.birthDay.slice(6,8));if(B.calendarType==="lunar"){const Pe=pr(fe,ce,xe);fe=Pe.getFullYear(),ce=Pe.getMonth()+1,xe=Pe.getDate()}const ke=ie?4:Number(B.birthTime.slice(0,2)),je=ie?30:Number(B.birthTime.slice(2,4)),Me=new Date(fe,ce-1,xe,ke,je,0,0),Ee=!B.birthPlace||B.birthPlace.name===""||!B.birthPlace.lon,Be=Ee?127.5:B.birthPlace.lon;let Ce;Ee?Ce=new Date(Me.getTime()-1800*1e3):Ce=cl(Me,Be,ie);const Le=Y?new Date(Ce.getTime()-3600*1e3):Ce,Ue=B.mingSikType??"/",me=ut(Le,Be),Ie=At(Le,Be),le=_t(Le,Ue),he=ie?null:Pi(Le,Ue);return{corrected:Le,year:{stem:me.charAt(0),branch:me.charAt(1)},month:{stem:Ie.charAt(0),branch:Ie.charAt(1)},day:{stem:le.charAt(0),branch:le.charAt(1)},hour:he?{stem:he.charAt(0),branch:he.charAt(1)}:null}}const[T,k]=P.useState(()=>S(e,b));P.useEffect(()=>{k(S(e,b))},[e,b]);const A=e.id??`${e.birthDay}-${e.birthTime}-${e.name??""}`,M=T.day.stem,[R,N]=P.useState(null),[D,C]=P.useState(()=>e.mingSikType==="");P.useEffect(()=>{N(null),C(e.mingSikType==="")},[A,e.mingSikType]);const G=P.useMemo(()=>(D?Kb:L2)[M]??[],[D,M]),H=R??T.hour,V=s.sinsalBase===""?T.day.branch:T.year.branch,W=pd(B=>B.setManualHour),re=(B,Y)=>{const ie={stem:B,branch:Y};N(ie),W(ie)},ee=B=>s.showSibiUnseong?Xt(M,B):null,q=B=>s.showSibiSinsal?Jt({baseBranch:V,targetBranch:B,era:Eg(s.sinsalMode),gaehwa:s.sinsalBloom}):null,te=X7(e,l),oe=D7({query:"(min-width: 992px)"}),Se=s.hiddenStem==="regular"?"main":"all",X=s.exposure,ae=X===""?0:h4[X],J=ae===0?[]:te.filter(B=>f4(B.label)<=ae),ye=om(f,m,p),K=()=>_(B=>!B),U=By(e,t,n),$=U.dae.gz,F=U.se.gz,Z=U.wol.gz;return y.jsxs("div",{className:"w-full max-w-[640px] mx-auto",children:[y.jsxs("div",{className:"mb-1 flex flex-wrap items-end justify-between gap-2 p-2",children:[y.jsxs("div",{children:[y.jsxs("div",{className:"text-md desk:text-xl font-bold text-neutral-900 dark:text-neutral-100",children:[(e.name?.trim()||"")+" ",y.jsxs("span",{className:"text-sm text-neutral-500 dark:text-neutral-400 mr-2",children:["(",e.gender,")"]}),ye&&y.jsxs("button",{onClick:K,className:`px-2 py-0.5 text-xs rounded cursor-pointer border
                  ${b?"bg-red-600 text-white border-red-600":"bg-neutral-100 text-neutral-700 border-neutral-300 dark:bg-neutral-800 dark:text-neutral-200 dark:border-neutral-700"}`,children:[" ",b?"ON":"OFF"]})]}),y.jsxs("div",{className:"text-sm text-neutral-600 dark:text-neutral-400",children:[y4(e.birthDay,e.birthTime),e.birthPlace?.name?`  ${": "+e.birthPlace.name}`:""]}),y.jsxs("div",{className:"text-sm text-neutral-600 dark:text-neutral-400",children:[": ",`${x?"":Q7(T.corrected)}`]})]}),y.jsxs("div",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:[" : ",u.toFixed(2),"  ",l," "]})]}),y.jsxs("div",{className:`grid gap-2 p-2 desk:p-0 ${J.length===0?"grid-cols-1":J.length===1?"grid-cols-[2fr_8fr]":J.length===2?"grid-cols-[3.5fr_6.5fr]":"grid-cols-[4fr_5fr]"}`,children:[J.length>0&&(oe?y.jsxs("section",{className:"rounded-lg bg-white dark:bg-neutral-900 text-neutral-900 dark:text-white border border-neutral-200 dark:border-neutral-700 shadow",children:[y.jsx("div",{className:"px-3 py-1 text-md text-neutral-600 dark:text-neutral-300",children:y.jsx("b",{children:""})}),y.jsx("div",{className:"pb-2",children:y.jsx("div",{className:`grid gap-2 p-3 ${J.length===1?"grid-cols-1":J.length===2?"grid-cols-2":"grid-cols-3"}`,children:J.map(B=>{let Y=B.data.stem,ie=B.data.branch;B.label.includes("")&&$&&(Y=$.charAt(0),ie=$.charAt(1)),B.label.includes("")&&F&&(Y=F.charAt(0),ie=F.charAt(1)),B.label.includes("")&&Z&&(Y=Z.charAt(0),ie=Z.charAt(1));const fe=ee(ie),ce=q(ie);return y.jsxs("div",{className:"rounded-xl bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 overflow-hidden",children:[y.jsx("div",{className:"px-2 py-1 text-center text-xs tracking-wider bg-neutral-50 dark:bg-neutral-800/60 text-neutral-600 dark:text-neutral-300",children:B.label}),y.jsxs("div",{className:"p-2 flex flex-col items-center gap-1",children:[s.showSipSin&&y.jsx("div",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:kr(M,{stem:Y})}),y.jsx(Ha,{value:Y,kind:"stem",charType:s.charType,thinEum:s.thinEum}),y.jsx(Ha,{value:ie,kind:"branch",charType:s.charType,thinEum:s.thinEum}),y.jsx(Uu,{branch:ie,dayStem:M,mode:Se,mapping:s.hiddenStemMode}),(s.showSibiUnseong||s.showSibiSinsal||o)&&y.jsxs("div",{className:"text-[11px] text-neutral-500 dark:text-neutral-400 mt-1 text-center space-y-0.5",children:[s.showSibiUnseong&&y.jsx("div",{children:fe}),s.showSibiSinsal&&y.jsx("div",{children:ce}),o&&y.jsx(lf,{stem:Y,branch:ie})]})]})]},B.key)})})})]}):y.jsxs("div",{className:"rounded-lg bg-white dark:bg-neutral-900 text-neutral-900 dark:text-white border border-neutral-200 dark:border-neutral-700 shadow",children:[y.jsx("div",{className:"px-3 py-1 text-[11px] text-neutral-600 dark:text-neutral-300",children:""}),y.jsx("div",{className:"pb-2",children:y.jsx("div",{className:`grid gap-1 p-0 ${J.length===1?"grid-cols-1":J.length===2?"grid-cols-2":"grid-cols-3"}`,children:J.map(B=>{let Y=B.data.stem,ie=B.data.branch;B.label.includes("")&&$&&(Y=$.charAt(0),ie=$.charAt(1)),B.label.includes("")&&F&&(Y=F.charAt(0),ie=F.charAt(1)),B.label.includes("")&&Z&&(Y=Z.charAt(0),ie=Z.charAt(1));const fe=ee(ie),ce=q(ie);return y.jsxs("div",{className:"rounded-xl bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 overflow-hidden",children:[y.jsx("div",{className:"py-1 text-center text-xs tracking-wider bg-neutral-50 dark:bg-neutral-800/60 text-neutral-600 dark:text-neutral-300",children:B.label}),y.jsxs("div",{className:"py-2 flex flex-col items-center gap-1",children:[s.showSipSin&&y.jsx("div",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:kr(M,{stem:Y})}),y.jsx(Ha,{value:Y,kind:"stem",charType:s.charType,thinEum:s.thinEum}),y.jsx(Ha,{value:ie,kind:"branch",charType:s.charType,thinEum:s.thinEum}),y.jsx(Uu,{branch:ie,dayStem:M,mode:Se,mapping:s.hiddenStemMode}),(s.showSibiUnseong||s.showSibiSinsal||o)&&y.jsxs("div",{className:"text-[11px] text-neutral-500 dark:text-neutral-400 mt-1 text-center space-y-0.5",children:[s.showSibiUnseong&&y.jsx("div",{children:fe}),s.showSibiSinsal&&y.jsx("div",{children:ce}),o&&y.jsx(lf,{stem:Y,branch:ie})]})]})]},B.key)})})})]})),oe?y.jsxs("section",{className:"flex-2 rounded-lg bg-white dark:bg-neutral-900 text-neutral-900 dark:text-white border border-neutral-200 dark:border-neutral-700 shadow",children:[y.jsx("div",{className:"px-3 py-1 text-md text-neutral-600 dark:text-neutral-300",children:y.jsx("b",{children:""})}),y.jsx("div",{className:"pb-2",children:y.jsx("div",{className:"grid grid-cols-4 gap-2 p-3",children:[{key:"hour",label:"",data:H},{key:"day",label:"",data:T.day},{key:"month",label:"",data:T.month},{key:"year",label:"",data:T.year}].map(B=>y.jsxs("div",{className:"rounded-xl bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 overflow-hidden",children:[y.jsx("div",{className:"px-2 py-1 text-center text-xs tracking-wider bg-neutral-50 dark:bg-neutral-800/60 text-neutral-600 dark:text-neutral-300",children:B.label}),y.jsx("div",{className:"p-2 flex flex-col items-center gap-1",children:B.data?y.jsxs(y.Fragment,{children:[s.showSipSin&&y.jsx("div",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:kr(M,{stem:B.data.stem})}),y.jsx(Ha,{value:B.data.stem,kind:"stem",charType:s.charType,thinEum:s.thinEum}),y.jsx(Ha,{value:B.data.branch,kind:"branch",charType:s.charType,thinEum:s.thinEum}),y.jsx(Uu,{branch:B.data.branch,dayStem:M,mode:Se,mapping:s.hiddenStemMode}),(s.showSibiUnseong||s.showSibiSinsal||o)&&y.jsxs("div",{className:"text-[11px] text-neutral-500 dark:text-neutral-400 mt-1 text-center space-y-0.5",children:[s.showSibiUnseong&&y.jsx("div",{children:Xt(M,B.data.branch)}),s.showSibiSinsal&&y.jsx("div",{children:Jt({baseBranch:s.sinsalBase===""?T.day.branch:T.year.branch,targetBranch:B.data.branch,era:Eg(s.sinsalMode),gaehwa:s.sinsalBloom})}),o&&y.jsx(lf,{stem:B.data.stem,branch:B.data.branch})]})]}):y.jsx("span",{className:"text-[10px] desk:text-xs text-neutral-500 dark:text-neutral-400",children:" "})})]},B.key))})})]}):y.jsxs("div",{className:"flex-2 rounded-lg bg-white dark:bg-neutral-900 text-neutral-900 dark:text-white border border-neutral-200 dark:border-neutral-700 shadow",children:[y.jsx("div",{className:"px-3 py-1 text-[11px] text-neutral-600 dark:text-neutral-300",children:""}),y.jsx("div",{className:"px-1 pb-2",children:y.jsx("div",{className:"grid grid-cols-4 gap-1",children:[{key:"hour",label:"",data:H},{key:"day",label:"",data:T.day},{key:"month",label:"",data:T.month},{key:"year",label:"",data:T.year}].map(B=>y.jsxs("div",{className:"rounded-xl bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 overflow-hidden",children:[y.jsx("div",{className:"py-1 text-center text-xs tracking-wider bg-neutral-50 dark:bg-neutral-800/60 text-neutral-600 dark:text-neutral-300",children:B.label}),y.jsx("div",{className:"py-2 flex flex-col items-center gap-1",children:B.data?y.jsxs(y.Fragment,{children:[s.showSipSin&&y.jsx("div",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:kr(M,{stem:B.data.stem})}),y.jsx(Ha,{value:B.data.stem,kind:"stem",charType:s.charType,thinEum:s.thinEum}),y.jsx(Ha,{value:B.data.branch,kind:"branch",charType:s.charType,thinEum:s.thinEum}),y.jsx(Uu,{branch:B.data.branch,dayStem:M,mode:Se,mapping:s.hiddenStemMode}),(s.showSibiUnseong||s.showSibiSinsal||o)&&y.jsxs("div",{className:"text-[11px] text-neutral-500 dark:text-neutral-400 mt-1 text-center space-y-0.5",children:[s.showSibiUnseong&&y.jsx("div",{children:Xt(M,B.data.branch)}),s.showSibiSinsal&&y.jsx("div",{children:Jt({baseBranch:s.sinsalBase===""?T.day.branch:T.year.branch,targetBranch:B.data.branch,era:Eg(s.sinsalMode),gaehwa:s.sinsalBloom})}),o&&y.jsx(lf,{stem:B.data.stem,branch:B.data.branch})]})]}):y.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400 text-nowrap",children:" "})})]},B.key))})})]})]}),x&&y.jsxs("div",{className:"mt-4 p-3 border rounded bg-neutral-50 dark:bg-neutral-800",children:[y.jsxs("div",{className:"flex items-center justify-between mb-2",children:[y.jsx("span",{className:"font-semibold text-sm text-neutral-700 dark:text-neutral-300",children:" "}),y.jsx("button",{onClick:()=>C(B=>!B),className:"px-2 py-1 text-xs rounded border bg-white dark:bg-neutral-900 border-neutral-300 dark:border-neutral-600 cursor-pointer",children:D?" : ":" : "})]}),y.jsx("div",{className:"grid grid-cols-4 gap-2",children:G.map(B=>{const Y=B.charAt(0),ie=B.charAt(1),fe=R?.stem===Y&&R?.branch===ie;return y.jsx("button",{onClick:()=>re(Y,ie),className:`p-2 text-xs rounded border cursor-pointer ${fe?p4(ie):"bg-white dark:bg-neutral-900 text-neutral-700 dark:text-neutral-200 border-neutral-300 dark:border-neutral-600"}`,title:`${B} ( )`,children:B},B)})})]})]})}function lf({stem:e,branch:t}){const n=Py[e]??e,s=$y[t]??t,o=`${n}${s}`,l=u4[o];if(!l)return null;const u=d4(l.elem);return y.jsx("span",{className:`inline-block px-1.5 py-[2px] rounded ${u} border border-white/10 text-nowrap`,title:`${l.label}  ${l.elem}`,children:l.label})}function b4(e){return $m(e)&&("Classic"in e||"Modern"in e||"classic"in e||"modern"in e)}function Eg(e){const t=ul;return b4(t)?e==="classic"?t.Classic:t.Modern:e}function Ha({value:e,kind:t,charType:n,thinEum:s}){const{settings:o}=br(),l=di(e,t,o),u=n===""?t==="stem"?Py[e]??e:$y[e]??e:t==="stem"?s4[e]??e:a4[e]??e,f=t==="stem"?o4.has(e):l4.has(e),m=s&&f?"font-thin":"font-bold";return y.jsx("div",{className:`w-11 h-11 sm:w-14 sm:h-14 md:w-14 md:h-14 rounded-md ${l}
                  flex items-center justify-center border border-neutral-200 dark:border-neutral-800`,children:y.jsx("span",{className:`text-[24px] md:text-2xl ${m}`,children:u})})}function y4(e,t){if(!e||!/^\d{8}$/.test(e))return"";const n=e.slice(0,4),s=e.slice(4,6),o=e.slice(6,8),l=`${n}-${s}-${o}`;return!t||t===""||!/^\d{4}$/.test(t)?l:`${l} ${t.slice(0,2)}:${t.slice(2,4)}`}function Xa(e){const t=Number(e.birthDay?.slice(0,4)),n=Number(e.birthDay?.slice(4,6))-1,s=Number(e.birthDay?.slice(6,8)),o=!e.birthTime||e.birthTime===""?0:Number(e.birthTime?.slice(0,2)),l=!e.birthTime||e.birthTime===""?0:Number(e.birthTime?.slice(2,4)),u=new Date(t,n,s,o,l,0,0);if(isNaN(u.getTime()))throw new Error(`Invalid date: ${e.birthDay} ${e.birthTime}`);const f=!e.birthPlace||typeof e.birthPlace=="object"&&e.birthPlace.name==="";return cl(u,e.birthPlace?.lon??127.5,f)}function zm(e,t){const n=e.length;if(n===0||!t)return 0;const s=e[0].at.getTime(),o=e[n-1].at.getTime(),l=t.getTime();if(l<=s)return 0;if(l>=o)return n-1;for(let u=0;u<n-1;u+=1){const f=e[u].at.getTime(),m=e[u+1].at.getTime();if(l>=f&&l<m)return u}return 0}const Lk={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Bk={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},v4=Object.fromEntries(Object.entries(Lk).map(([e,t])=>[t,e])),_4=Object.fromEntries(Object.entries(Bk).map(([e,t])=>[t,e]));function V1(e,t,n){return n===""?t==="stem"?Lk[e]??e:Bk[e]??e:t==="stem"?v4[e]??e:_4[e]??e}const x4=new Set(["","","","","","","","","",""]),w4=new Set(["","","","","","","","","","","",""]);function K1(e,t){return t==="stem"?x4.has(e):w4.has(e)}function S4(e){return typeof e=="object"&&e!==null}function E4(e){return S4(e)&&("Classic"in e||"Modern"in e||"classic"in e||"modern"in e)}function T4(e){const t=ul;return E4(t)?e==="classic"?t.Classic:t.Modern:e}const k4=!1,W1=e=>e<10?`0${e}`:`${e}`;function A4(e){const t=e,n=typeof t.birthDay=="string"?t.birthDay:"",s=typeof t.calendarType=="string"?t.calendarType:"solar";if(n.length<8)return e;const o=Number(n.slice(0,4)),l=Number(n.slice(4,6)),u=Number(n.slice(6,8)),f=["isLeap","isLeapMonth","leapMonth","leap","lunarLeap"];let m=!1;for(const p of f){const b=t[p];if(typeof b=="boolean"){m=b;break}if(typeof b=="number"){m=b===1;break}if(typeof b=="string"){m=b==="1"||b.toLowerCase()==="true";break}}if(s==="lunar")try{const p=pr(o,l,u,0,0),b=`${p.getFullYear()}${W1(p.getMonth()+1)}${W1(p.getDate())}`;return{...e,birthDay:b,calendarType:"solar"}}catch{return e}return e}function j4({data:e}){const t=wd(e),n=P.useMemo(()=>{const C=A4(e);return Xa(C)},[e]),s=P.useMemo(()=>{const C=e.mingSikType??"/";return _t(n,C).charAt(0)},[n,e.mingSikType]),{date:o,setFromEvent:l}=hi(),u=P.useMemo(()=>zm(t,o),[t,o]),f=br(C=>C.settings),{charType:m,thinEum:p,showSipSin:b,showSibiUnseong:_,showSibiSinsal:x,sinsalBase:S,sinsalMode:T,sinsalBloom:k}=f,A=!e.birthPlace||e.birthPlace.name===""||e.birthPlace.lon===0?127.5:e.birthPlace.lon,M=e.mingSikType??"/",R=S===""?_t(n,M).charAt(1):ut(n,A).charAt(1),N=C=>_?Xt(s,C):null,D=C=>x?Jt({baseBranch:R,targetBranch:C,era:T4(T),gaehwa:!!k}):null;return y.jsxs("div",{className:"w-full max-w-[640px] mx-auto rounded-xl bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 overflow-hidden",children:[y.jsx("div",{className:"px-3 py-2 text-sm font-semibold tracking-wider bg-neutral-50 dark:bg-neutral-800/60 text-neutral-700 dark:text-neutral-300",children:""}),y.jsx("div",{className:"flex gap-0.5 desk:gap-1 py-2 desk:p-2 flex-row-reverse",children:t.map((C,G)=>{const H=C.gz.charAt(0),V=C.gz.charAt(1),W=N4(n,C.at),re=G===u,ee=V1(H,"stem",m),q=V1(V,"branch",m),te=K1(H,"stem"),oe=K1(V,"branch"),Se=p&&te?"font-thin":"font-bold",X=p&&oe?"font-thin":"font-bold",ae=N(V),J=D(V);return y.jsxs("div",{onClick:()=>l(C,""),className:`flex-1 rounded-sm desk:rounded-lg bg-white dark:bg-neutral-900 overflow-hidden cursor-pointer ${re?"border border-yellow-500":"border border-neutral-200 dark:border-neutral-800 hover:border-yellow-500"}`,title:`${C.gz}  ${C.at.toLocaleDateString()}`,children:[y.jsx("div",{className:"desk:px-2 py-1 text-center text-[10px] bg-neutral-50 dark:bg-neutral-800/60 text-neutral-600 dark:text-neutral-300",children:W}),y.jsxs("div",{className:"p-2 flex flex-col items-center gap-0.5",children:[b&&y.jsx("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-nowrap",children:kr(s,{stem:H})}),y.jsx("div",{className:`w-8 h-8 md:w-10 md:h-10 rounded-sm md:rounded-lg flex items-center justify-center border border-neutral-200 dark:border-neutral-800 ${di(H,"stem",f)}`,children:y.jsx("span",{className:`text-[20px] md:text-xl ${Se}`,children:ee})}),y.jsx("div",{className:`w-8 h-8 md:w-10 md:h-10 rounded-sm md:rounded-lg flex items-center justify-center border border-neutral-200 dark:border-neutral-800 ${di(V,"branch",f)}`,children:y.jsx("span",{className:`text-[20px] md:text-xl ${X}`,children:q})}),b&&y.jsx("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-nowrap",children:kr(s,{branch:V})}),(_||x)&&y.jsxs("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 mt-1 text-center space-y-0.5 text-nowrap",children:[_&&y.jsx("div",{children:ae}),x&&y.jsx("div",{children:J})]})]})]},`${C.gz}-${G}`)})})]})}function N4(e,t){const s=(t.getTime()-e.getTime())/(365.2425*24*60*60*1e3);return Math.max(0,Math.round(s))}function Um(e,t){const n=e,s=typeof n.isUnknownTime=="boolean"?n.isUnknownTime:!1,o=typeof n.birthTime=="string"&&/^(?:\d{4}|\d{2}:\d{2})$/.test(n.birthTime),l=typeof n.birthHour=="number",u=typeof n.birthMinute=="number";if(s||!(o||l||u)){const m=new Date(t);return m.setDate(m.getDate()+1),m.setHours(4,30,0,0),m}return t}const Pk={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},$k={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},O4=Object.fromEntries(Object.entries(Pk).map(([e,t])=>[t,e])),D4=Object.fromEntries(Object.entries($k).map(([e,t])=>[t,e]));function X1(e,t,n){return n===""?t==="stem"?Pk[e]??e:$k[e]??e:t==="stem"?O4[e]??e:D4[e]??e}const M4=new Set(["","","","","","","","","",""]),C4=new Set(["","","","","","","","","","","",""]);function J1(e,t){return t==="stem"?M4.has(e):C4.has(e)}function R4(e){return typeof e=="object"&&e!==null}function L4(e){return R4(e)&&("Classic"in e||"Modern"in e||"classic"in e||"modern"in e)}function B4(e){const t=ul;return L4(t)?e==="classic"?t.Classic:t.Modern:e}function Tg(e){return new Date(e,6,2,12,0,0,0)}function P4(e,t){return t-e+1}const $4=!1,Q1=e=>e<10?`0${e}`:`${e}`;function I4(e){const t=e,n=typeof t.birthDay=="string"?t.birthDay:"",s=typeof t.calendarType=="string"?t.calendarType:"solar";if(n.length<8)return e;const o=Number(n.slice(0,4)),l=Number(n.slice(4,6)),u=Number(n.slice(6,8)),f=["isLeap","isLeapMonth","leapMonth","leap","lunarLeap"];let m=!1;for(const p of f){const b=t[p];if(typeof b=="boolean"){m=b;break}if(typeof b=="number"){m=b===1;break}if(typeof b=="string"){m=b==="1"||b.toLowerCase()==="true";break}}if(s==="lunar")try{const p=pr(o,l,u,0,0),b=`${p.getFullYear()}${Q1(p.getMonth()+1)}${Q1(p.getDate())}`;return{...e,birthDay:b,calendarType:"solar"}}catch{return e}return e}function z4({data:e,list:t,onSelect:n}){const s=br(H=>H.settings),{date:o,setFromEvent:l}=hi(),[u,f]=P.useState(()=>t);P.useEffect(()=>{t&&t.length>0&&f(t)},[t]);const m=Xa(e),p=P.useMemo(()=>Um(e,m),[e,m]),b=P.useMemo(()=>p.getFullYear(),[p]),_=!e.birthPlace||e.birthPlace.name===""||e.birthPlace.lon===0?127.5:e.birthPlace.lon,x=P.useMemo(()=>{if(!o)return[];const H=o.getFullYear(),V=Tg(H),W=ut(V,_);return[{at:V,gz:W}]},[o,_]),S=t.length>0?t:u.length>0?u:x,T=P.useMemo(()=>[...S].sort((H,V)=>H.at.getTime()-V.at.getTime()),[S]),k=P.useMemo(()=>{if(T.length===0)return 0;const H=zm(T,o);return H<0?0:H>=T.length?T.length-1:H},[T,o]),[A,M]=P.useState(null);P.useEffect(()=>{M(null)},[o,T]);const R=A??k,N=P.useMemo(()=>{const H=I4(e);return Xa(H)},[e]),D=e.mingSikType??"/",C=P.useMemo(()=>_t(N,D).charAt(0),[N,D]),G=P.useMemo(()=>s.sinsalBase===""?_t(p,D).charAt(1):ut(p,_).charAt(1),[p,D,_,s.sinsalBase]);return y.jsxs("div",{className:"w-full max-w-[640px] mx-auto rounded-xl bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 overflow-hidden",children:[y.jsx("div",{className:"px-3 py-2 text-sm font-semibold tracking-wider bg-neutral-50 dark:bg-neutral-800/60 text-neutral-700 dark:text-neutral-300",children:""}),y.jsx("div",{className:"flex gap-0.5 desk:gap-1 py-2 desk:p-2 flex-row-reverse",children:T.map((H,V)=>{const W=H.at.getFullYear(),re=Tg(W),ee=ut(re,_),q=ee.charAt(0),te=ee.charAt(1),oe=V===R,Se=X1(q,"stem",s.charType),X=X1(te,"branch",s.charType),ae=J1(q,"stem"),J=J1(te,"branch"),ye=s.thinEum&&ae?"font-thin":"font-bold",K=s.thinEum&&J?"font-thin":"font-bold",U=s.showSibiUnseong?Xt(C,te):null,$=s.showSibiSinsal?Jt({baseBranch:G,targetBranch:te,era:B4(s.sinsalMode),gaehwa:!!s.sinsalBloom}):null,F=P4(b,W);return y.jsxs("div",{onClick:()=>{if(V===0){M(V);return}M(V);const Z=Tg(W),B=ut(Z,_);l({at:Z,gz:B},""),n&&(typeof queueMicrotask<"u"?queueMicrotask(()=>n(W)):Promise.resolve().then(()=>n(W)))},className:`flex-1 rounded-sm desk:rounded-lg bg-white dark:bg-neutral-900 overflow-hidden cursor-pointer ${oe?"border border-yellow-500":"border border-neutral-200 dark:border-neutral-800 hover:border-yellow-500"}`,title:`${ee}  ${H.at.toLocaleDateString()}  ${F}`,children:[y.jsxs("div",{className:"desk:px-2 py-1 text-center text-[10px] bg-neutral-100 dark:bg-neutral-800/60 text-neutral-700 dark:text-neutral-200",children:[F,""]}),y.jsx("div",{className:"desk:px-2 py-1 text-center text-[10px] bg-neutral-50 dark:bg-neutral-800/60 text-neutral-600 dark:text-neutral-300",children:W}),y.jsxs("div",{className:"p-2 flex flex-col items-center gap-1",children:[s.showSipSin&&y.jsx("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-nowrap",children:kr(C,{stem:q})}),y.jsx("div",{className:`w-8 h-8 md:w-10 md:h-10 rounded-sm md:rounded-lg flex items-center justify-center border ${di(q,"stem",s)}`,children:y.jsx("span",{className:`text-[20px] md:text-xl ${ye}`,children:Se})}),y.jsx("div",{className:`w-8 h-8 md:w-10 md:h-10 rounded-sm md:rounded-lg flex items-center justify-center border ${di(te,"branch",s)}`,children:y.jsx("span",{className:`text-[20px] md:text-xl ${K}`,children:X})}),s.showSipSin&&y.jsx("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-nowrap",children:kr(C,{branch:te})}),(s.showSibiUnseong||s.showSibiSinsal)&&y.jsxs("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-center text-nowrap",children:[s.showSibiUnseong&&U&&y.jsx("div",{children:U}),s.showSibiSinsal&&$&&y.jsx("div",{children:$})]})]})]},`${W}-${H.gz||V}`)})})]})}const U4=new Set(["","","","","","","","","","","",""]);function H4(e){const t=new Date(e.getFullYear(),e.getMonth()+1),n=t.getFullYear(),o=[...as(new Date(n-1,5,15,12,0))??[],...as(new Date(n,5,15,12,0))??[],...as(new Date(n+1,5,15,12,0))??[]].map(m=>({name:String(m.name),date:new Date(m.date)})).sort((m,p)=>m.date.getTime()-p.date.getTime()).filter(m=>U4.has(m.name));let l=o.findIndex((m,p)=>o[p].date<=t&&t<o[p+1]?.date);l<0&&(l=0);const u=o[l],f=o[l+1];return{start:new Date(u.date.getFullYear(),u.date.getMonth(),u.date.getDate(),0,0,0,0),end:new Date(f.date.getFullYear(),f.date.getMonth(),f.date.getDate(),0,0,0,0),cur:u,next:f}}const Ik={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},zk={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},G4=Object.fromEntries(Object.entries(Ik).map(([e,t])=>[t,e])),F4=Object.fromEntries(Object.entries(zk).map(([e,t])=>[t,e]));function eS(e,t,n){return n===""?t==="stem"?Ik[e]??e:zk[e]??e:t==="stem"?G4[e]??e:F4[e]??e}const Y4=new Set(["","","","","","","","","",""]),q4=new Set(["","","","","","","","","","","",""]);function tS(e,t){return t==="stem"?Y4.has(e):q4.has(e)}function Z4(e){return typeof e=="object"&&e!==null}function V4(e){return Z4(e)&&("Classic"in e||"Modern"in e||"classic"in e||"modern"in e)}function K4(e){const t=ul;return V4(t)?e==="classic"?t.Classic:t.Modern:e}const W4=new Set(["","","","","","","","","","","",""]);function X4(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),23,59,0,0)}function J4(e){const t=new Intl.DateTimeFormat("ko-KR",{timeZone:"Asia/Seoul",month:"numeric"}).formatToParts(e);return Number(t.find(n=>n.type==="month")?.value??e.getMonth()+1)}function kg(e){return new Date(e,5,15,12,0,0,0)}function Q4(e){const n=[...as(kg(e-1))??[],...as(kg(e))??[],...as(kg(e+1))??[]].map(f=>({name:String(f.name),date:new Date(f.date)})).sort((f,m)=>f.date.getTime()-m.date.getTime()).filter(f=>W4.has(f.name)),s=new Date(e,0,1,0,0,0,0),o=new Date(e+1,0,1,0,0,0,0),l=n.findIndex(f=>f.name===""&&f.date>=s&&f.date<o);if(l===-1)return[];const u=[];for(let f=0;f<12;f++){const m=n[l+f];if(!m)break;const p=new Date(m.date),b=X4(p);u.push({name:m.name,termAt:p,at00:b})}return u}const eP=!1,nS=e=>e<10?`0${e}`:`${e}`;function tP(e){const t=e,n=typeof t.birthDay=="string"?t.birthDay:"",s=typeof t.calendarType=="string"?t.calendarType:"solar";if(n.length<8)return e;const o=Number(n.slice(0,4)),l=Number(n.slice(4,6)),u=Number(n.slice(6,8)),f=["isLeap","isLeapMonth","leapMonth","leap","lunarLeap"];let m=!1;for(const p of f){const b=t[p];if(typeof b=="boolean"){m=b;break}if(typeof b=="number"){m=b===1;break}if(typeof b=="string"){m=b==="1"||b.toLowerCase()==="true";break}}if(s==="lunar")try{const p=pr(o,l,u,0,0),b=`${p.getFullYear()}${nS(p.getMonth()+1)}${nS(p.getDate())}`;return{...e,birthDay:b,calendarType:"solar"}}catch{return e}return e}function nP({data:e,activeYear:t,onSelect:n,onSelectMonth:s}){const o=br(A=>A.settings),l=!e.birthPlace||e.birthPlace.name===""||e.birthPlace.lon===0?127.5:e.birthPlace.lon,u=Xa(e),f=P.useMemo(()=>Um(e,u),[e,u]),m=P.useMemo(()=>{const A=tP(e);return Xa(A)},[e]),p=e.mingSikType??"/",b=P.useMemo(()=>_t(m,p).charAt(0),[m,p]),_=o.sinsalBase===""?_t(f,p).charAt(1):ut(f,l).charAt(1),x=P.useMemo(()=>t?Q4(t).map(M=>{const R=M.at00,N=new Date(M.at00);N.setDate(N.getDate()+1);const D=At(N,l);return{at:R,gz:D,term:M.name,termAt:M.termAt}}):[],[t,l]),{date:S,setFromEvent:T}=hi(),k=zm(x,S);return y.jsxs("div",{className:"w-full max-w-[640px] mx-auto rounded-xl bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 overflow-hidden",children:[y.jsx("div",{className:"px-3 py-2 text-sm font-semibold tracking-wider bg-neutral-50 dark:bg-neutral-800/60 text-neutral-700 dark:text-neutral-300",children:""}),y.jsx("div",{className:"flex gap-0.5 desk:gap-1 py-2 desk:p-2 flex-row-reverse",children:x.map((A,M)=>{const R=A.gz.charAt(0),N=A.gz.charAt(1),D=`${J4(A.at)}`,C=M===k,G=eS(R,"stem",o.charType),H=eS(N,"branch",o.charType),V=tS(R,"stem"),W=tS(N,"branch"),re=o.thinEum&&V?"font-thin":"font-bold",ee=o.thinEum&&W?"font-thin":"font-bold",q=o.showSibiUnseong?Xt(b,N):null,te=o.showSibiSinsal?Jt({baseBranch:_,targetBranch:N,era:K4(o.sinsalMode),gaehwa:!!o.sinsalBloom}):null;return y.jsxs("div",{onClick:()=>{s(A.at);const oe=new Date(A.at),{start:Se}=H4(oe);n?.(Se.getFullYear(),Se.getMonth()),console.log("[WolwoonList] onSelect ->",Se.getFullYear(),Se.getMonth()),T({at:oe,gz:At(oe,l)},"")},className:`flex-1 rounded-sm desk:rounded-lg bg-white dark:bg-neutral-900 overflow-hidden cursor-pointer ${C?"border border-yellow-500":"border border-neutral-200 dark:border-neutral-800 hover:border-yellow-500"}`,title:`${A.term}   ${A.gz}  ${A.termAt.toLocaleString()}`,children:[y.jsx("div",{className:"desk:px-2 py-1 text-center text-[10px] bg-neutral-50 dark:bg-neutral-800/60 text-neutral-600 dark:text-neutral-300",children:D}),y.jsxs("div",{className:"p-2 flex flex-col items-center gap-1",children:[o.showSipSin&&y.jsx("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-nowrap",children:kr(b,{stem:R})}),y.jsx("div",{className:`w-7 h-7 sm:w-8 sm:h-8 md:w-10 md:h-10 rounded-sm md:rounded-lg flex items-center justify-center border border-neutral-200 dark:border-neutral-800 ${di(R,"stem",o)}`,children:y.jsx("span",{className:`text-base md:text-xl ${re}`,children:G})}),y.jsx("div",{className:`w-7 h-7 sm:w-8 sm:h-8 md:w-10 md:h-10 rounded-sm md:rounded-lg flex items-center justify-center border border-neutral-200 dark:border-neutral-800 ${di(N,"branch",o)}`,children:y.jsx("span",{className:`text-base md:text-xl ${ee}`,children:H})}),o.showSipSin&&y.jsx("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-nowrap",children:kr(b,{branch:N})}),(o.showSibiUnseong||o.showSibiSinsal)&&y.jsxs("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-center text-nowrap",children:[o.showSibiUnseong&&q&&y.jsx("div",{children:q}),o.showSibiSinsal&&te&&y.jsx("div",{children:te})]}),y.jsx("div",{className:"text-[10px] text-neutral-400 dark:text-neutral-500 text-nowrap",children:A.term})]})]},`${A.term}-${A.at.toISOString()}`)})})]})}const Uk={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Hk={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},rP=Object.fromEntries(Object.entries(Uk).map(([e,t])=>[t,e])),iP=Object.fromEntries(Object.entries(Hk).map(([e,t])=>[t,e]));function rS(e,t,n){return n===""?t==="stem"?Uk[e]??e:Hk[e]??e:t==="stem"?rP[e]??e:iP[e]??e}const sP=new Set(["","","","","","","","","",""]),aP=new Set(["","","","","","","","","","","",""]);function iS(e,t){return t==="stem"?sP.has(e):aP.has(e)}function oP(e){return typeof e=="object"&&e!==null}function lP(e){return oP(e)&&("Classic"in e||"Modern"in e||"classic"in e||"modern"in e)}function cP(e){const t=ul;return lP(t)?e==="classic"?t.Classic:t.Modern:e}const uP=!1,sS=e=>e<10?`0${e}`:`${e}`;function dP(e){const t=e,n=typeof t.birthDay=="string"?t.birthDay:"",s=typeof t.calendarType=="string"?t.calendarType:"solar";if(n.length<8)return e;const o=Number(n.slice(0,4)),l=Number(n.slice(4,6)),u=Number(n.slice(6,8));if(s==="lunar")try{const f=pr(o,l,u,0,0),m=`${f.getFullYear()}${sS(f.getMonth()+1)}${sS(f.getDate())}`;return{...e,birthDay:m,calendarType:"solar"}}catch{return e}return e}function hP(e,t){return new Date(e,t,15,12,0,0,0)}function Ag(e){const t=new Date(e);return t.setHours(23,59,0,0),t}const fP=new Set(["","","","","","","","","","","",""]);function Gk(e){return[...as(new Date(e-1,5,15,12,0))??[],...as(new Date(e,5,15,12,0))??[],...as(new Date(e+1,5,15,12,0))??[]].map(n=>({name:String(n.name),date:new Date(n.date)})).sort((n,s)=>n.date.getTime()-s.date.getTime())}function mP(e){const t=Gk(e.getFullYear()),n=t.filter(u=>fP.has(u.name));if(n.length<12){const u=t.findIndex(p=>p.date>e),f=t[Math.max(0,u-1)],m=t[Math.min(t.length-1,u)];return{start:new Date(f.date),end:new Date(m.date),cur:f,next:m}}let s=n.findIndex(u=>u.date>e)-1;s<0&&(s=n.length-1);const o=n[s],l=n[(s+1)%n.length];return{start:new Date(o.date),end:new Date(l.date),cur:o,next:l}}function pP({data:e,year:t,month:n,selectedMonth:s}){const o=br(W=>W.settings),l=o.ilunRule||"/",u=e?Xa(e):null,f=e&&u?Um(e,u):null,m=P.useMemo(()=>{const W=dP(e);return Xa(W)},[e]),p=P.useMemo(()=>m?_t(m,l).charAt(0):void 0,[m,l]),b=e&&e.birthPlace&&e.birthPlace.name!==""&&e.birthPlace.lon!==0?e.birthPlace.lon:127.5,_=e&&f?o.sinsalBase===""?_t(f,l).charAt(1):ut(f,b).charAt(1):null,{date:x,setFromEvent:S}=hi(),T=P.useMemo(()=>hP(t,n),[t,n]),k=P.useMemo(()=>x?Ag(new Date(x)):null,[x]),A=P.useMemo(()=>s?Ag(s):null,[s]),M=P.useMemo(()=>k??A??T,[k,A,T]),{start:R,end:N,cur:D,next:C}=P.useMemo(()=>mP(M),[M]),G=P.useMemo(()=>{const W=[],re=new Date(R);for(;re<N;)W.push(new Date(re)),re.setDate(re.getDate()+1);return W},[R,N]),H=P.useMemo(()=>{const W=Gk(M.getFullYear()),re=W.filter(q=>q.date>=R&&q.date<N),ee=W.find(q=>q.date>=N);return ee?[...re,ee]:re},[M,R,N]),V=P.useMemo(()=>{const W=[];let re=[];const ee=new Date(R).getDay();for(let q=0;q<ee;q++)re.push(null);for(const q of G)re.length===7&&(W.push(re),re=[]),re.push(q);for(;re.length<7;)re.push(null);return W.push(re),W},[G,R]);return y.jsxs("div",{className:"w-full max-w-[800px] mx-auto mb-4 rounded-xl bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 overflow-hidden",children:[y.jsx("div",{className:"flex justify-center items-center px-2 desk:px-4 py-2 bg-neutral-50 dark:bg-neutral-800/60",children:y.jsxs("div",{className:"text-center text-[11px] desk:text-sm font-semibold text-neutral-700 dark:text-neutral-200",children:[D?.name?y.jsxs(y.Fragment,{children:[D.name," ~ ",C?.name??""]}):`${t} ${n}`,H.length>0&&y.jsxs("div",{className:"mt-0.5 text-[10px] desk:text-xs font-normal text-neutral-500 dark:text-neutral-400",children:["[",H.map((W,re)=>y.jsxs("span",{children:[W.name," ",gP(W.date),re<H.length-1?"  ":""]},`${W.name}_${W.date.getTime()}_${re}`)),"]"]})]})}),y.jsx("div",{className:"grid grid-cols-7 text-center text-xs bg-neutral-100 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-300",children:["","","","","","",""].map(W=>y.jsx("div",{className:"py-1",children:W},W))}),y.jsx("div",{className:"grid grid-cols-7 gap-px bg-neutral-200 dark:bg-neutral-800",children:V.map((W,re)=>W.map((ee,q)=>{if(!ee)return y.jsx("div",{className:"bg-white dark:bg-neutral-900"},`${re}-${q}`);const te=Ag(ee),oe=new Date,Se=te.getFullYear()===oe.getFullYear()&&te.getMonth()===oe.getMonth()&&te.getDate()===oe.getDate(),ae=!!k&&te.getFullYear()===k.getFullYear()&&te.getMonth()===k.getMonth()&&te.getDate()===k.getDate()||!k&&Se,J=NO(te,l),ye=J.charAt(0),K=J.charAt(1),U=rS(ye,"stem",o.charType),$=rS(K,"branch",o.charType),F=o.thinEum&&iS(ye,"stem")?"font-thin":"font-bold",Z=o.thinEum&&iS(K,"branch")?"font-thin":"font-bold",B=!!p&&o.showSipSin,Y=!!p&&o.showSibiUnseong,ie=!!p&&_!=null&&o.showSibiSinsal,fe=B?kr(p,{stem:ye}):"",ce=B?kr(p,{branch:K}):"",xe=Y?Xt(p,K):"",ke=ie?Jt({baseBranch:_,targetBranch:K,era:cP(o.sinsalMode),gaehwa:!!o.sinsalBloom}):"",je=H.find(Me=>Me.date.getFullYear()===te.getFullYear()&&Me.date.getMonth()===te.getMonth()&&Me.date.getDate()===te.getDate());return y.jsxs("div",{onClick:()=>S({at:te},""),className:`space-y-1 bg-white dark:bg-neutral-900 flex flex-col items-center justify-start p-1 text-xs border cursor-pointer ${ae?"border-yellow-500":"border-neutral-200 dark:border-neutral-800"}`,title:`${J} (${te.toLocaleDateString()})`,children:[y.jsxs("div",{className:"text-neutral-600 dark:text-neutral-400 flex items-center gap-1",children:[y.jsx("span",{children:te.getDate()}),je&&y.jsx("span",{className:"text-[10px] text-nowrap px-1 rounded bg-amber-100 text-amber-700 dark:bg-amber-900/40 dark:text-amber-200",children:je.name})]}),B&&y.jsx("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400",children:fe}),y.jsx("div",{className:`w-8 h-8 rounded flex items-center justify-center text-base ${di(ye,"stem",o)}`,children:y.jsx("span",{className:F,children:U})}),y.jsx("div",{className:`w-8 h-8 rounded flex items-center justify-center text-base ${di(K,"branch",o)}`,children:y.jsx("span",{className:Z,children:$})}),B&&y.jsx("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400",children:ce}),(Y||ie)&&y.jsxs("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-center space-y-0.5",children:[Y&&xe&&y.jsx("div",{children:xe}),ie&&ke&&y.jsx("div",{children:ke})]})]},ee.toISOString())}))})]})}function gP(e){if(!e)return null;const t=new Intl.DateTimeFormat("ko-KR",{timeZone:"Asia/Seoul",month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1}).formatToParts(e);let n="",s="",o="",l="";for(const u of t)u.type==="month"&&(n=u.value),u.type==="day"&&(s=u.value),u.type==="hour"&&(o=u.value),u.type==="minute"&&(l=u.value);return`${n}/${s} ${o}:${l}`}function aS(e,t){const n=e.at.getFullYear(),s=t?t.at.getFullYear():n+10,o=[];for(let l=n;l<s;l++){const u=Hn(l,315);let f=l;new Date<u&&(f=l-1);const p=ut(new Date(f,1,10));o.push({at:u,gz:p})}return o}function bP({data:e}){const t=wd(e),[n,s]=P.useState(null),[o,l]=P.useState(null),[u,f]=P.useState("il"),[m,p]=P.useState(null);P.useEffect(()=>{if(!t.length)return;const T=new Date,k=t.findIndex((A,M)=>{const R=t[M+1]?.at;return T>=A.at&&(!R||T<R)});k!==-1&&s(k)},[t]),P.useEffect(()=>{if(n===null)return;const T=t[n],k=t[n+1];if(!T)return;const A=aS(T,k),M=new Date;A.findIndex((N,D)=>{const C=A[D+1]?.at;return M>=N.at&&(!C||M<C)})!==-1&&l({year:M.getFullYear(),month:M.getMonth()})},[n,t]);const b=By(e),{date:_}=hi(),x=_.getMonth()+1===1?_.getFullYear()-1:_.getFullYear(),S=P.useMemo(()=>{if(!b?.dae?.gz)return[];const T=t.findIndex((M,R)=>{const N=t[R+1]?.at;return b.dae.at>=M.at&&(!N||b.dae.at<N)});if(T===-1)return[];const k=t[T],A=t[T+1];return aS(k,A)},[t,b?.dae]);return y.jsxs("div",{className:"w-full space-y-4",children:[y.jsx(j4,{data:e}),u==="se"||u==="wol"||u==="il"?y.jsx(z4,{data:e,list:S,onSelect:()=>{f("wol")}}):null,u==="wol"||u==="il"?y.jsx(nP,{data:e,activeYear:x,onSelect:(T,k)=>{l({year:T,month:k}),f("il")},onSelectMonth:p}):null,u==="il"&&o&&y.jsx(pP,{data:e,year:o.year,month:o.month+1,hourTable:e?.mingSikType,selectedMonth:m})]})}const yP=new Set(gO),vP=new Set(bO);function oS(e){return typeof e=="string"&&e.length>=2&&yP.has(e[0])&&vP.has(e[1])}function ni(e,...t){if(oS(e))return e;for(const n of t)if(oS(n))return n;return""}const _P={:0,:2,:4,:6,:8,:10,:12,:14,:16,:18,:20,:22},Fk={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},xP={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};function lS(e){return!!e&&Li..includes(e)}function wP(e){return Fk[e]??e}function cS(e){return xP[e]??e}function SP(e){if(lS(e))return e;const t=Fk[e];return lS(t)?t:""}function EP(e){return typeof e=="object"&&e!==null&&("Classic"in e||"Modern"in e||"classic"in e||"modern"in e)}function TP(e){const t=ul;return EP(t)?e==="classic"?t.Classic??t.classic:t.Modern??t.modern:e}function cf(e,t){let n=null;const s=t.getTime();for(const o of e)if(o.at.getTime()<=s)n=o;else break;return n}function kP({data:e}){const t=br(re=>re.settings),{manualHour:n}=pd(),{showSibiUnseong:s,showSibiSinsal:o,sinsalBase:l,sinsalMode:u,sinsalBloom:f}=t,{date:m}=hi(),p=P.useMemo(()=>Ly(e),[e]),b=P.useMemo(()=>Im(p),[p]),_=P.useMemo(()=>Cy(p,"/"),[p]),x=P.useMemo(()=>SP(_.day?.charAt(0)??""),[_.day]),S=!e.birthTime||e.birthTime==="",T=P.useMemo(()=>Dk(b,_.hour,e.dir??"forward",120,"/"),[b,_.hour,e.dir]),k=P.useMemo(()=>Ck(T,_.day,e.dir??"forward",""),[T,_.day,e.dir]),A=P.useMemo(()=>xd(b,_.month,e.dir??"forward",120,p.birthPlace?.lon??127.5),[b,_.month,e.dir,p.birthPlace?.lon]),M=P.useMemo(()=>Rk(A,_.year,e.dir??"forward","",b),[A,_.year,e.dir,b]),R=P.useMemo(()=>{const re=T?.events?.[0];return re?{at:re.at,from:ni(_.hour),to:ni(re.gz)}:null},[T?.events,_.hour]),N=P.useMemo(()=>{const re=A?.events?.[0];return A?.firstChange?{at:A.firstChange,from:ni(_.month),to:ni(re?.gz??_.month)}:null},[A?.firstChange,A?.events,_.month]),D=P.useMemo(()=>{const re=S?n?n.stem+n.branch:"":ni(cf(T.events,m)?.gz,_.hour);let ee;if(S&&n){const q=m.getFullYear(),te=m.getMonth(),oe=m.getDate(),Se=_P[n.branch]??0,X=new Date(q,te,oe,Se,0),ae=_t(X,e.mingSikType??"/");ee=ni(ae,_.day)}else ee=ni(cf(k.events,m)?.gz,_.day);return{si:re,il:ee,wl:ni(cf(A.events,m)?.gz,_.month),yn:ni(cf(M.events,m)?.gz,_.year)}},[m,T.events,k.events,A.events,M.events,_,S,n,e.mingSikType]),C=P.useMemo(()=>({si:ni(Pi(m,"/")),il:ni(_t(m,"/")),wl:ni(At(m)),yn:ni(ut(m))}),[m]),G=P.useMemo(()=>l===""?_.day.charAt(1):_.year.charAt(1),[l,_.day,_.year]),H=P.useMemo(()=>TP(u),[u]),V=re=>{if(!re)return{unseong:"",shinsal:""};const ee=wP(x),q=cS(re.charAt(1)),te=cS(G);return{unseong:s&&Xt(ee,q)||"",shinsal:o&&Jt({baseBranch:te,targetBranch:q,era:H,gaehwa:!!f})||""}},W=(re,ee,q="myoun")=>{const te=ee,{unseong:oe,shinsal:Se}=ee?V(ee):{unseong:"",shinsal:""},X=q==="myoun"&&S&&(re===""||re==="");return y.jsx(cc,{label:re,gz:te,dayStem:x,settings:t,unseongText:ee?oe:"",shinsalText:ee?Se:"",hideBranchSipSin:!0,size:"sm",isUnknownTime:X},`${q}-${re}`)};return y.jsxs("div",{className:"w-full max-w-[640px] mx-auto mb-4 px-2 py-4 desk:p-4 bg-white dark:bg-neutral-950 text-neutral-900 dark:text-neutral-100 rounded-xl shadow border border-neutral-200 dark:border-neutral-800",children:[y.jsx("header",{className:"flex flex-wrap items-center gap-3 justify-between mb-4",children:y.jsxs("div",{className:"font-semibold text-xs desk:text-sm",children:[" +   "," ",y.jsxs("span",{className:"text-neutral-500 dark:text-neutral-400",children:["(: ",Xu(b),")"]})]})}),y.jsxs("div",{className:"grid grid-cols-2 gap-2 desk:gap-4 mb-6",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-xs mb-2 text-neutral-600 dark:text-neutral-300",children:""}),y.jsxs("div",{className:"grid grid-cols-4 gap-1 desk:gap-2",children:[W("",D.si,"myoun"),W("",D.il,"myoun"),W("",D.wl,"myoun"),W("",D.yn,"myoun")]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-xs mb-2 text-neutral-600 dark:text-neutral-300",children:" "}),y.jsxs("div",{className:"grid grid-cols-4 gap-1 desk:gap-2",children:[W("",C.si,"live"),W("",C.il,"live"),W("",C.wl,"live"),W("",C.yn,"live")]})]})]}),y.jsxs("div",{className:"mt-4 text-xs text-neutral-700 dark:text-neutral-300 space-y-1",children:[y.jsx("div",{className:"font-semibold",children:"  "}),y.jsxs("div",{children:[":"," ",R?`${Xu(R.at)} (${R.from}  ${R.to})`:" "]}),y.jsxs("div",{children:[":"," ",N?`${Xu(N.at)} (${N.from}  ${N.to})`:" "]})]})]})}const uS=["","","","","","","","","",""],AP={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},jP={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},NP={:"",:"",:"",:"",:""},OP={:"",:"",:"",:"",:""},DP={:"",:"",:"",:"",:""},MP={:"",:"",:"",:"",:""};function CP(e,t){switch(e){case"":return t;case"":return NP[t];case"":return DP[t];case"":return MP[t];case"":return OP[t];default:return t}}function RP({data:e,perStemElementScaled:t,elementPercent:n,dayStem:s,width:o=280,height:l=280,revKey:u}){const f=o,m=l,p=f/2,b=m/2,_=Math.min(f,m)*.37,x=P.useMemo(()=>{const N=(s??"").charAt(0);return jP[N]??null},[s]),S=N=>Math.PI/2+2*-Math.PI*N/5,T=P.useMemo(()=>e.map((N,D)=>({...N,x:p+_*Math.cos(S(D)),y:b-_*Math.sin(S(D))})),[e,p,b,_]),[k,A]=P.useState(0),M=P.useRef(""),R=P.useMemo(()=>{const N=e.map(G=>`${G.name}:${G.value}`).join(","),D=uS.map(G=>`${G}:${t?.[G]??0}`).join(","),C=n?`:${n.??0},:${n.??0},:${n.??0},:${n.??0},:${n.??0}`:"el:none";return[u??"",N,D,C,s??""].join("||")},[u,e,t,s,n]);return P.useEffect(()=>{R!==M.current&&(M.current=R,A(N=>N+1))},[R]),y.jsx("div",{className:"w-full",children:y.jsxs("svg",{width:f,height:m,className:"mx-auto pt-2",children:[T.map((N,D)=>{const C=T[(D+2)%5];return y.jsx("line",{x1:N.x,y1:N.y,x2:C.x,y2:C.y,stroke:"#94a3b8",strokeWidth:1},`line-${D}`)}),T.map((N,D)=>{const C=T[(D+1)%5],G=(N.x+C.x)/2,H=(N.y+C.y)/2,V=G-p,W=H-b,re=1.5,ee=p+V*re,q=b+W*re;return y.jsx("path",{d:`M${N.x},${N.y} Q${ee},${q} ${C.x},${C.y}`,stroke:"#ef4444",strokeWidth:1.5,fill:"none",markerEnd:"url(#arrow)"},`curve-${D}`)}),y.jsx("defs",{children:y.jsx("marker",{id:"arrow",markerWidth:"6",markerHeight:"6",refX:"5",refY:"3",orient:"auto",children:y.jsx("path",{d:"M0,0 L6,3 L0,6 Z",fill:"#ef4444"})})}),T.map(N=>{const D=N.name,C=x?CP(D,x):null,G=C?uS.filter(H=>AP[H]===C).map(H=>[H,t?.[H]??0]):[];return y.jsxs("g",{transform:`translate(${N.x},${N.y})`,children:[y.jsx("circle",{r:33,fill:N.color??"#334155",opacity:N.value===0?.7:1}),y.jsxs("text",{textAnchor:"middle",dy:"-6",fontSize:14,className:"fill-white font-semibold",children:[N.name," ",N.value]}),G.map(([H,V],W)=>y.jsxs("text",{textAnchor:"middle",dy:8+W*11,fontSize:10,className:"fill-white",children:[H," ",Math.round(V)]},H))]},`${N.name}-${N.value}`)})]},k)})}const LP=[{name:"",min:0,max:10},{name:"",min:10,max:20},{name:"",min:20,max:35},{name:"",min:35,max:45},{name:"",min:45,max:55},{name:"",min:55,max:65},{name:"",min:65,max:80},{name:"",min:80,max:100.0001}];function Iy(e){return Math.max(0,Math.min(100,e))}function Yk(e){const t=Iy(e);return LP.find(s=>t>=s.min&&t<s.max)?.name??""}const BP=[10,20,35,45,55,65,80];function PP({value:e}){const t=P.useMemo(()=>Iy(e),[e]),n=P.useMemo(()=>Yk(t),[t]);return y.jsxs("div",{className:"w-full mx-auto p-2 desk:p-4 bg-neutral-100 dark:bg-neutral-800 rounded-xl",children:[y.jsxs("div",{className:"flex justify-between text-[11px] text-neutral-400 mb-1",children:[y.jsx("span",{children:""}),y.jsx("span",{children:""}),y.jsx("span",{children:""})]}),y.jsxs("div",{className:"relative h-4 rounded bg-gradient-to-r from-blue-500 via-yellow-400 to-red-500",children:[BP.map(s=>y.jsx("div",{className:"absolute top-0 h-4 w-[1px] bg-black/30",style:{left:`${s}%`},title:`${s}%`},s)),y.jsx("div",{className:"absolute top-0 h-4 w-[1px] bg-black/40",style:{left:"50%"},title:"50%"}),y.jsx("div",{className:"absolute -top-1 h-6 w-2 bg-white rounded shadow-sm",style:{left:`${t}%`,transform:"translateX(-50%)"},"aria-label":`  ${t}%`})]}),y.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[y.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs border border-neutral-600 text-neutral-700 dark:text-neutral-200",children:n}),y.jsxs("span",{className:"text-xs text-neutral-400",children:[t.toFixed(1),"%"]})]})]})}const Js=["","","",""],uf={year:0,month:1,day:2,hour:3},jg="",$P={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},qk={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};function He(e){if(!e)return"";const t=e.replace(/[()[\]{}]/g,"").replace(/\s+/g,"").replace(/[:\-_.]/g,""),n=t.match(/([]).*?([])/);if(n)return`${n[1]}${n[2]}`;const s=t.match(/([]).*?([])/);if(s){const o=$P[s[1]]??s[1],l=qk[s[2]]??s[2];return`${o}${l}`}return""}const cm=e=>e&&e.length>=1?e[0]:"",Qs=e=>e&&e.length>=2?e[1]:"",zy=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],Uy=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],Hy=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],Gy=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],Fy=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],Yy=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],qy=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],Zy=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],dS=[{name:"",members:["","",""]},{name:"",members:["","",""]}],Vy=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],Ky=[{pair:["",""],label:""}],IP=new Set(["","","",""]),od=new Set(["","","",""]),Hm=[{name:"",members:["","",""],out:"",wang:""},{name:"",members:["","",""],out:"",wang:""},{name:"",members:["","",""],out:"",wang:""},{name:"",members:["","",""],out:"",wang:""}],Gm=[{name:"",members:["","",""],out:"",wang:""},{name:"",members:["","",""],out:"",wang:""},{name:"",members:["","",""],out:"",wang:""},{name:"",members:["","",""],out:"",wang:""}];function wn(e,t,n){for(const{pair:[s,o],label:l}of e)if(t===s&&n===o||t===o&&n===s)return l;return null}function Kt(e,t){e.includes(t)||e.push(t)}const Yo=e=>[...e].sort((t,n)=>t-n).map(t=>Js[t]).join("X"),Ng=(e,t)=>e===0&&t===3||e===3&&t===0;function hS(e,t){const n=[];for(const s of e)for(const o of t){if(s===o)continue;const l=Math.min(s,o),u=Math.max(s,o);l===0&&u===3||n.push([l,u])}return n.sort((s,o)=>{const l=Math.abs(s[0]-s[1]),u=Math.abs(o[0]-o[1]);return l!==u?l-u:0})}function zP(e){const t=[],n=[...e].sort((s,o)=>s-o);for(let s=0;s<n.length;s++)for(let o=s+1;o<n.length;o++){const l=n[s],u=n[o];l===0&&u===3||t.push([l,u])}return t}const Zk=e=>{switch(e){case"":return"";case"":return"";case"":return"";case"":return""}};function UP(e){if(!e)return!1;const t=e.normalize("NFC").trim();return/^#\s*$/u.test(t)}const HP=["cheonganHap","cheonganChung","jijiSamhap","jijiBanhap","jijiBanghap","jijiYukhap","jijiChung","jijiHyeong","jijiPa","jijiHae","jijiWonjin","jijiGwimun","amhap","ganjiAmhap"];function Vk(e){for(const t of HP){const s=(e[t]??[]).map(o=>o&&o.normalize("NFKC")).filter(o=>!!o&&!UP(o));e[t]=Array.from(new Set(s))}return e.jijiHyeong=Kk(e.jijiHyeong),e}const fS=["","","",""];function Kk(e){if(!e||e.length===0)return e;const t=Array.from(new Set(e.map(o=>o?.normalize("NFKC")??""))).filter(Boolean),n=t.some(o=>o.includes("")||o.includes("()")),s=t.some(o=>o.includes("")||o.includes("()"));return t.filter(o=>!(n&&(o.includes("")||o.includes("")||o.includes(""))||s&&(o.includes("")||o.includes("")||o.includes(""))))}function Wy(e,t={}){const{emitGanjiAmhap:n=!0}=t,s=e.map(He),o=s.map(x=>cm(x)),l=s.map(x=>Qs(x)),f={title:s.map((x,S)=>`${x}${["","","",""][S]}`).join(" "),cheonganHap:[],cheonganChung:[],jijiSamhap:[],jijiBanhap:[],jijiBanghap:[],jijiYukhap:[],jijiChung:[],jijiHyeong:[],jijiPa:[],jijiHae:[],jijiWonjin:[],jijiGwimun:[],amhap:[],ganjiAmhap:[]},m=(x,S,T,k)=>{const A=o.flatMap((R,N)=>R===x?[N]:[]),M=o.flatMap((R,N)=>R===S?[N]:[]);for(const R of A)for(const N of M)R!==N&&Math.abs(R-N)===1&&Kt(k,`#${Yo([R,N])}_${T}`)};zy.forEach(({pair:[x,S],label:T})=>m(x,S,T,f.cheonganHap)),Uy.forEach(({pair:[x,S],label:T})=>m(x,S,T,f.cheonganChung));const p=x=>{const S=new Set,T=[];for(const k of x)for(let A=0;A<l.length;A++)if(l[A]===k&&!S.has(A)){S.add(A),T.push(A);break}return T};Hm.forEach(({name:x,members:S,wang:T})=>{const k=S.filter(M=>l.includes(M)),A=new Set(k).size;if(A===3){const M=p(S);M.length===3&&Kt(f.jijiSamhap,`#${Yo(M)}_${x}`)}else if(A===2){if(!k.includes(T))return;const[M,R]=k,N=l.flatMap((H,V)=>H===M?[V]:[]),D=l.flatMap((H,V)=>H===R?[V]:[]),C=hS(N,D),G=C.length>1;for(const[H,V]of C){const W=Ng(H,V),re=`#${Yo([H,V])}_${M}${R}${G?"":W?`_${jg}`:""}`;Kt(f.jijiSamhap,re)}}}),Gm.forEach(({name:x,members:S})=>{const T=S.filter(A=>l.includes(A));if(new Set(T).size===3){const A=p(S);A.length===3&&Kt(f.jijiBanghap,`#${Yo(A)}_${x}`)}});const b=(x,S,T,k)=>{const A=l.flatMap((D,C)=>D===x?[C]:[]),M=l.flatMap((D,C)=>D===S?[C]:[]),R=hS(A,M),N=R.length>1;for(const[D,C]of R){const G=Ng(D,C),H=`#${Yo([D,C])}_${T}${N?"":G?`_${jg}`:""}`;Kt(k,H)}};if(Hy.forEach(({pair:[x,S],label:T})=>b(x,S,T,f.jijiYukhap)),Gy.forEach(({pair:[x,S],label:T})=>b(x,S,T,f.jijiChung)),Fy.forEach(({pair:[x,S],label:T})=>b(x,S,T,f.jijiPa)),Yy.forEach(({pair:[x,S],label:T})=>b(x,S,T,f.jijiHae)),qy.forEach(({pair:[x,S],label:T})=>b(x,S,T,f.jijiWonjin)),Zy.forEach(({pair:[x,S],label:T})=>b(x,S,T,f.jijiGwimun)),[["","",""],["","",""]].forEach(x=>{const S=[],T=new Set;if(x.forEach(k=>{l.forEach((A,M)=>{A===k&&(S.push(M),T.add(k))})}),T.size===3){const k=Array.from(new Set(S)).sort((A,M)=>A-M);Kt(f.jijiHyeong,`#${Yo(k)}_${x.join("")}`)}}),Vy.forEach(({pair:[x,S],label:T})=>b(x,S,T,f.jijiHyeong)),Ky.forEach(({pair:[x,S],label:T})=>b(x,S,T,f.jijiHyeong)),["","","",""].forEach(x=>{const S=l.flatMap((A,M)=>A===x?[M]:[]),T=zP(S),k=T.length>1;for(const[A,M]of T){const R=Ng(A,M),N=`#${Yo([A,M])}_${x}${x}${k?"":R?`_${jg}`:""}`;Kt(f.jijiHyeong,N)}}),[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}].forEach(({pair:[x,S],label:T})=>b(x,S,T,f.amhap)),n)for(let x=0;x<4;x++){const S=s[x]??"";if(S.length<2)continue;const T=`${S[0]}${S[1]}`;od.has(T)&&Kt(f.ganjiAmhap,`#${Zk(Js[x])}_${T}`)}return f.jijiHyeong=Kk(f.jijiHyeong),Vk(f)}function mr(e,t={}){const{emitNatalGanjiAmhap:n=!1}=t,s=[He(e.natal[0]??""),He(e.natal[1]??""),He(e.natal[2]??""),He(e.natal[3]??"")],l=[He(e.daewoon??""),He(e.sewoon??""),He(e.wolwoon??"")].some(b=>b.length>=2),u={cheonganHap:[],cheonganChung:[],jijiSamhap:[],jijiBanhap:[],jijiBanghap:[],jijiYukhap:[],jijiChung:[],jijiHyeong:[],jijiPa:[],jijiHae:[],jijiWonjin:[],jijiGwimun:[],amhap:[],ganjiAmhap:[]};if(n&&l)for(let b=0;b<4;b++){const _=s[b]??"";if(_.length<2)continue;const x=`${_[0]}${_[1]}`;od.has(x)&&Kt(u.ganjiAmhap,`#${Zk(Js[b])}_${x}`)}const f=[["",e.daewoon],["",e.sewoon],["",e.wolwoon],["",e.ilwoon]];let m=!1,p=!1;for(const[b,_]of f){if(!_)continue;const x=He(_);if(!x||x.length<2)continue;const S=cm(x),T=Qs(x);{const M=`${S}${T}`;od.has(M)&&Kt(u.ganjiAmhap,`#${b}_${M}`)}for(let M=0;M<4;M++){const R=s[M]??"";if(R.length<2)continue;const N=Js[M],D=cm(R),C=Qs(R),G=wn(zy,S,D);G&&Kt(u.cheonganHap,`#${b}X${N}_${G}`);const H=wn(Uy,S,D);H&&Kt(u.cheonganChung,`#${b}X${N}_${H}`);const V=wn(Hy,T,C);V&&Kt(u.jijiYukhap,`#${b}X${N}_${V}`);const W=wn(Gy,T,C);W&&Kt(u.jijiChung,`#${b}X${N}_${W}`);const re=wn(Fy,T,C);re&&Kt(u.jijiPa,`#${b}X${N}_${re}`);const ee=wn(Yy,T,C);ee&&Kt(u.jijiHae,`#${b}X${N}_${ee}`);const q=wn(qy,T,C);q&&Kt(u.jijiWonjin,`#${b}X${N}_${q}`);const te=wn(Zy,T,C);te&&Kt(u.jijiGwimun,`#${b}X${N}_${te}`);const oe=wn(Vy,T,C);if(oe)Kt(u.jijiHyeong,`#${b}X${N}_${oe}`);else{const ae=wn(Ky,T,C);ae?Kt(u.jijiHyeong,`#${b}X${N}_${ae}`):T===C&&IP.has(T)&&Kt(u.jijiHyeong,`#${b}X${N}_${T}${C}`)}const X=wn([{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],T,C);X&&Kt(u.amhap,`#${b}X${N}_${X}`)}const k=s.map(M=>{const R=Qs(M??"");return qk[R]??R});for(const M of Hm){if(!M.members.includes(T))continue;const R=M.members.filter(D=>D!==T),N=k.map((D,C)=>({b:D,pos:Js[C]})).filter(D=>R.includes(D.b));if(new Set(N.map(D=>D.b)).size===2){const[D,C]=N.map(G=>G.pos).sort((G,H)=>["","","",""].indexOf(G)-["","","",""].indexOf(H));Kt(u.jijiSamhap,`#${b}X${D}X${C}_(${M.name})`)}}const A=[...s.map((M,R)=>({b:Qs(M),pos:Js[R]}))];for(const M of Gm){const R=A.filter(N=>M.members.includes(N.b));if(new Set(R.map(N=>N.b)).size===3){const N=R.map(D=>D.pos).join("X");Kt(u.jijiBanghap,`#${N}_(${M.name})`)}}for(const M of dS){if(!M.members.includes(T))continue;const R=M.members.filter(D=>D!==T),N=k.map((D,C)=>({b:D,pos:Js[C]})).filter(D=>R.includes(D.b));if(new Set(N.map(D=>D.b)).size===2){const[D,C]=N.map(G=>G.pos).sort((G,H)=>["","","",""].indexOf(G)-["","","",""].indexOf(H));Kt(u.jijiHyeong,`#${b}X${D}X${C}_${M.name}`),M.name===""&&(m=!0),M.name===""&&(p=!0)}}}{const b=[],_=[["",e.daewoon],["",e.sewoon],["",e.wolwoon],["",e.ilwoon]];for(const[x,S]of _){const T=He(S??"");T.length>=2&&b.push({kind:x,b:Qs(T)})}if(b.length>=2){const x=s.map((S,T)=>({pos:Js[T],b:Qs(S)}));for(const S of dS)for(let T=0;T<b.length;T++)for(let k=T+1;k<b.length;k++){const A=b[T],M=b[k];for(const R of x){const N=new Set([R.b,A.b,M.b]);if(N.size===3&&S.members.every(D=>N.has(D))){const D=[A.kind,M.kind].sort((G,H)=>fS.indexOf(G)-fS.indexOf(H)).join("X"),C=`${R.pos}X${D}`;Kt(u.jijiHyeong,`#${C}_${S.name}`),S.name===""&&(m=!0),S.name===""&&(p=!0)}}}}}return(m||p)&&(u.jijiHyeong=u.jijiHyeong.filter(b=>!(m&&/(||)/.test(b)||p&&/(||)/.test(b)))),Vk(u)}function GP(e,t){const s=e.map(He).map(m=>Qs(m)),o=uf.month,l=s[o],u=m=>{const p=[];for(let b=0;b<4;b++){const _=s[b];_&&m.has(_)&&p.push(b)}return p},f=m=>{const p=[...m].sort((b,_)=>b-_);return p.length===3&&p[0]+1===p[1]&&p[1]+1===p[2]};for(const m of Hm){const p=new Set(m.members),b=u(p);if(b.length===3){const _=b.includes(o),x=l===m.wang;_?f(b)?t[m.out]+=x?10:8:t[m.out]+=5:t[m.out]+=3}if(b.length===2&&b.includes(o)){const _=b[0]===o?b[1]:b[0],x=l===m.wang;_===uf.day&&x?t[m.out]+=8:_===uf.year&&x?t[m.out]+=6:_===uf.hour&&(t[m.out]+=x?4:2)}}for(const m of Gm){const p=new Set(m.members),b=u(p);if(b.length===3){const _=b.includes(o),x=l===m.wang;_?f(b)?t[m.out]+=x?8:6:t[m.out]+=4:t[m.out]+=2}}}function mS(e){const t=["","","",""],n=e.map(He),s=n.map(f=>cm(f)),o=n.map(f=>Qs(f)),l=new Map,u=new Map;for(let f=0;f<4;f++){const m=s[f],p=o[f];m.includes(m)&&l.set(m,[...l.get(m)??[],f]),p.includes(p)&&u.set(p,[...u.get(p)??[],f])}return{stemsByPos:s,brsByPos:o,stemPos:l,brPos:u,names:t}}function Gt(e){return Js[e]}function fr(e,t){t&&(e.includes(t)||e.push(t))}function FP(e,t){const n=mS(e),s=mS(t),o={:[],:[],:[],:[],:[],:[],:[],:[],:[],:[],:[],:[],:[],:[]};for(let f=0;f<4;f++){const m=n.stemsByPos[f],p=n.brsByPos[f];for(let b=0;b<4;b++){const _=s.stemsByPos[b],x=s.brsByPos[b],S=wn(zy,m,_);S&&fr(o.,`${Gt(f)}X${Gt(b)} ${S}`);const T=wn(Uy,m,_);T&&fr(o.,`${Gt(f)}X${Gt(b)} ${T}`);const k=wn(Hy,p,x);k&&fr(o.,`${Gt(f)}X${Gt(b)} ${k}`);const A=wn(Gy,p,x);A&&fr(o.,`${Gt(f)}X${Gt(b)} ${A}`);const M=wn(Fy,p,x);M&&fr(o.,`${Gt(f)}X${Gt(b)} ${M}`);const R=wn(Yy,p,x);R&&fr(o.,`${Gt(f)}X${Gt(b)} ${R}`);const N=wn(qy,p,x);N&&fr(o.,`${Gt(f)}X${Gt(b)} ${N}`);const D=wn(Zy,p,x);D&&fr(o.,`${Gt(f)}X${Gt(b)} ${D}`);const G=wn([{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],p,x);G&&fr(o.,`${Gt(f)}X${Gt(b)} ${G}`);const H=`${m}${x}`,V=`${_}${p}`;od.has(H)&&fr(o.,`${Gt(f)}X${Gt(b)} ${H}`),od.has(V)&&fr(o.,`${Gt(b)}X${Gt(f)} ${V}`);const W=wn(Vy,p,x);if(W)fr(o.,`${Gt(f)}X${Gt(b)} ${W}`);else{const re=wn(Ky,p,x);re&&fr(o.,`${Gt(f)}X${Gt(b)} ${re}`)}}}const l=new Set(n.brsByPos.filter(Boolean)),u=new Set(s.brsByPos.filter(Boolean));for(const f of Hm){if(f.members.every(b=>l.has(b)||u.has(b))){const b=f.members.filter(x=>l.has(x)).length,_=f.members.filter(x=>u.has(x)).length;b>=1&&_>=1&&fr(o.,`${f.name}`)}const p=f.members.filter(b=>l.has(b)||u.has(b));if(p.length===2&&p.includes(f.wang)){const b=p.some(x=>l.has(x)),_=p.some(x=>u.has(x));if(b&&_){const[x,S]=p.sort(),T=n.brPos.get(x)?.[0]??n.brPos.get(S)?.[0],k=s.brPos.get(x)?.[0]??s.brPos.get(S)?.[0];T!=null&&k!=null&&fr(o.,`${Gt(T)}X${Gt(k)} ${x}${S}`)}}}for(const f of Gm)if(f.members.every(p=>l.has(p)||u.has(p))){const p=f.members.filter(_=>l.has(_)).length,b=f.members.filter(_=>u.has(_)).length;p>=1&&b>=1&&fr(o.,`${f.name}`)}return Object.keys(o).forEach(f=>o[f].sort()),o}function Pu(e,t){if(e==="#")return"bg-neutral-100 text-neutral-500 border-neutral-200 dark:bg-neutral-900 dark:text-neutral-500 dark:border-neutral-700";switch(t){case"natal":return"bg-violet-100 text-violet-800 border-violet-200 dark:bg-violet-900/30 dark:text-violet-200 dark:border-violet-800";case"dae":return"bg-blue-100 text-blue-800 border-blue-200 dark:bg-blue-900/30 dark:text-blue-200 dark:border-blue-800";case"se":return"bg-green-100 text-green-800 border-green-200 dark:bg-green-900/30 dark:text-green-200 dark:border-green-800";case"wol":return"bg-orange-100 text-orange-800 border-orange-200 dark:bg-orange-900/30 dark:text-orange-200 dark:border-orange-800";case"il":return"bg-red-100 text-red-800 border-red-200 dark:bg-red-900/30 dark:text-red-200 dark:border-red-800";default:return""}}function Xi({label:e,natal:t,dae:n,se:s,wol:o,il:l}){const u=n.length+s.length+o.length+l.length>0,f=t.length>0?t:["#"],m=u?f.filter(_=>_!=="#"):f,b=m.some(_=>_!=="#")||n.length>0||s.length>0||o.length>0||l.length>0?"shrink-0 w-20 text-xs font-semibold text-orange-700 dark:text-orange-300 mt-1":"shrink-0 w-20 text-xs font-semibold text-neutral-700 dark:text-neutral-400 mt-1";return y.jsxs("div",{className:"flex items-start gap-3 border border-gray-700 dark:border-gray-200 p-2 rounded-sm",children:[y.jsx("div",{className:b,children:e}),y.jsxs("div",{className:"flex flex-wrap gap-2",children:[m.map((_,x)=>y.jsx("span",{className:"text-xs px-2 py-1 rounded-full border whitespace-nowrap "+Pu(_,"natal"),children:_},`natal-${x}`)),n.map((_,x)=>y.jsx("span",{className:"text-xs px-2 py-1 rounded-full border whitespace-nowrap "+Pu(_,"dae"),children:_},`dae-${x}`)),s.map((_,x)=>y.jsx("span",{className:"text-xs px-2 py-1 rounded-full border whitespace-nowrap "+Pu(_,"se"),children:_},`se-${x}`)),o.map((_,x)=>y.jsx("span",{className:"text-xs px-2 py-1 rounded-full border whitespace-nowrap "+Pu(_,"wol"),children:_},`wol-${x}`)),l.map((_,x)=>y.jsx("span",{className:"text-xs px-2 py-1 rounded-full border whitespace-nowrap "+Pu(_,"il"),children:_},`il-${x}`))]})]})}function Pb(e){return Array.isArray(e)?e:[]}function df(e,t){const n=new Set(Pb(e));return Pb(t).filter(o=>!n.has(o))}function YP({pillars:e,daewoon:t,sewoon:n,wolwoon:s,ilwoon:o,tab:l=""}){const u=Wy(e),f=mr({natal:e}),m=t?mr({natal:e,daewoon:t}):f,p=n?mr({natal:e,daewoon:t,sewoon:n}):m,b=s?mr({natal:e,daewoon:t,sewoon:n,wolwoon:s}):p,_=o?mr({natal:e,daewoon:t,sewoon:n,wolwoon:s,ilwoon:o}):b,x=k=>({natal:Pb(u[k]),dae:df(f[k],m[k]),se:df(m[k],p[k]),wol:df(p[k],b[k]),il:df(b[k],_[k])}),S={cheonganHap:x("cheonganHap"),cheonganChung:x("cheonganChung"),jijiSamhap:x("jijiSamhap"),jijiBanghap:x("jijiBanghap"),jijiYukhap:x("jijiYukhap"),amhap:x("amhap"),ganjiAmhap:x("ganjiAmhap"),jijiChung:x("jijiChung"),jijiHyeong:x("jijiHyeong"),jijiPa:x("jijiPa"),jijiHae:x("jijiHae")},T=k=>l===""?{natal:k.natal,dae:[],se:[],wol:[],il:[]}:l===""?{natal:k.natal,dae:k.dae,se:[],wol:[],il:[]}:l===""?{natal:k.natal,dae:k.dae,se:k.se,wol:[],il:[]}:l===""?{natal:k.natal,dae:k.dae,se:k.se,wol:k.wol,il:[]}:l===""?{natal:k.natal,dae:k.dae,se:k.se,wol:k.wol,il:k.il}:{natal:[],dae:[],se:[],wol:[],il:[]};return y.jsxs("div",{className:"rounded-xl p-4 bg-neutral-100 dark:bg-neutral-900 text-neutral-900 dark:text-neutral-100 space-y-2",children:[y.jsx("div",{className:"text-base font-bold mb-1",children:""}),y.jsx(Xi,{label:"",...T(S.cheonganHap)}),y.jsx(Xi,{label:"",...T(S.cheonganChung)}),y.jsx("div",{className:"border-t border-neutral-200 dark:border-neutral-800 my-2"}),y.jsx(Xi,{label:"",...T(S.jijiSamhap)}),y.jsx(Xi,{label:"",...T(S.jijiBanghap)}),y.jsx(Xi,{label:"",...T(S.jijiYukhap)}),y.jsx(Xi,{label:"",...T(S.amhap)}),y.jsx(Xi,{label:"",...T(S.ganjiAmhap)}),y.jsx(Xi,{label:"",...T(S.jijiChung)}),y.jsx(Xi,{label:"",...T(S.jijiHyeong)}),y.jsx(Xi,{label:"",...T(S.jijiPa)}),y.jsx(Xi,{label:"",...T(S.jijiHae)})]})}const qP={:{:"#13B713",:"#DC143C",:"#F0B100",:"#a0a0a0",:"#353535"},:{:"#DC143C",:"#F0B100",:"#a0a0a0",:"#353535",:"#13B713"},:{:"#F0B100",:"#a0a0a0",:"#353535",:"#13B713",:"#DC143C"},:{:"#a0a0a0",:"#353535",:"#13B713",:"#DC143C",:"#F0B100"},:{:"#353535",:"#13B713",:"#DC143C",:"#F0B100",:"#a0a0a0"}},ZP={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};function Wk(e){const t=ZP[e]??"";return qP[t]}const Xk={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},VP={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Sd={:"",:"",:"",:"",:""},ld={:"",:"",:"",:"",:""},Oc={:"",:"",:"",:"",:""},KP=[{name:"",min:0,max:10},{name:"",min:10,max:20},{name:"",min:20,max:35},{name:"",min:35,max:45},{name:"",min:45,max:55},{name:"",min:55,max:65},{name:"",min:65,max:80},{name:"",min:80,max:100.0001}],WP={:{temp:"cold",wet:"wet"},:{temp:"cold",wet:"wet"},:{temp:"cold",wet:"wet"},:{temp:"mild",wet:"normal"},:{temp:"mild",wet:"normal"},:{temp:"mild",wet:"wet"},:{temp:"hot",wet:"normal"},:{temp:"hot",wet:"dry"},:{temp:"hot",wet:"wet"},:{temp:"mild",wet:"dry"},:{temp:"mild",wet:"dry"},:{temp:"mild",wet:"dry"}};function Xy(e){return Math.max(0,Math.min(100,e))}function Sc(e,t,n){return Math.max(t,Math.min(n,e))}function XP(e){const t=Xy(e);return KP.find(n=>t>=n.min&&t<n.max)?.name??""}function JP(e){const t=e?.[2]?.charAt(0)??"";return Xk[t]??null}function QP(e){return(e?.[1]?.charAt(1)??"")||null}function Fm(e){const t=Object.entries(Oc);for(const[n,s]of t)if(s===e)return n;return""}function e9(e){return e?{peer:e,resource:ld[e],leak:Sd[e],wealth:Oc[e],officer:Fm(e)}:null}function t9(e){const t={:0,:0,:0,:0,:0};for(const n of e){if(!n)continue;const s=n.charAt(0),o=n.charAt(1),l=Xk[s],u=VP[o];l&&(t[l]+=10),u&&(t[u]+=6)}return t}function n9(e){const t=Object.values(e).reduce((s,o)=>s+o,0);if(t<=0)return{:20,:20,:20,:20,:20};const n={:0,:0,:0,:0,:0};return Object.keys(e).forEach(s=>{n[s]=e[s]/t*100}),n}function r9(e){if(!e||e.length===0)return null;const t=e.reduce((s,o)=>s+(o?.value??0),0)||0;if(t<=0)return null;const n=s=>e.find(o=>o.name===s)?.value??0;return Xy((n("")+n(""))/t*100)}function i9(e,t){return!e||!t?null:t===e?"":Sd[e]===t?"":Oc[e]===t?"":Fm(e)===t?"":ld[e]===t?"":null}const Og=24,s9=[[60,0],[55,.01],[50,.03],[45,.06],[40,.1],[35,.18],[30,.32],[27,.48],[24,.62]];function a9(e){for(const[t,n]of s9)if(e>=t)return n;return 1}const um=20,pS=(e,t)=>Sc((um-(t[e]??0))/um,0,1),gS=(e,t)=>Sc(((t[e]??0)-um)/um,0,1);function o9(e,t,n,s){const o=i9(e,n);if(!e||!o)return 0;const l=Sc((50-t)/50,0,1),u=Sc((t-50)/50,0,1),f=pS(n,s),m=gS(n,s),p=pS(e,s),b=gS(e,s),_=6.5;let x=0;if(l>0)switch(o){case"":x=+(.3+.4*p+.15*f)*l;break;case"":x=+(.18+.45*p)*l;break;case"":x=-(.08+.2*(1-f)+.1*b)*l;break;case"":x=-(.22+.25*(1-f)+.1*(1-p))*l;break;case"":x=-(.35+.25*(1-f)+.1*(1-p))*l;break}else if(u>0)switch(o){case"":x=-(.25+.25*(1-f)+.2*b)*u;break;case"":x=-(.28+.2*b)*u;break;case"":x=+(.18+.2*f+.15*b)*u;break;case"":x=+(.22+.25*f+.1*b)*u;break;case"":x=+(.2+.2*f)*u;break}else switch(o){case"":x=.08*(p+f);break;case"":x=.05*p-.03*b;break;case"":x=.02*f-.02*m;break;case"":x=.01*f-.06*m;break;case"":x=-.05*(1-f);break}return Math.round(_*x*10)/10}function l9(e,t,n,s){const o=["","",""].includes(t),l=["","","",""].includes(t),u={:0,:0,:0,:0,:0};if(o){const f=Sd[e],m=Oc[e],p=Fm(e);u[f]+=28,u[m]+=22,u[p]+=20,s.get(f)?.push(":    ()"),s.get(m)?.push(":     "),s.get(p)?.push(":     ")}if(l){const f=ld[e],m=e;u[f]+=28,u[m]+=22,s.get(f)?.push(":     "),s.get(m)?.push(":     ")}return u}function bS(e,t){if(!e)return{:0,:0,:0,:0,:0};const n=WP[e]??{temp:"mild",wet:"normal"},s={:0,:0,:0,:0,:0};return n.temp==="cold"?(s.+=16,s.+=6,t.get("")?.push(":   "),t.get("")?.push(":  ")):n.temp==="hot"&&(s.+=14,s.+=6,t.get("")?.push(":   "),t.get("")?.push(":  ")),n.wet==="wet"?(s.+=8,s.+=4,t.get("")?.push(":   "),t.get("")?.push(":  ")):n.wet==="dry"&&(s.+=8,s.+=4,t.get("")?.push(":   "),t.get("")?.push(":  ")),s}function yS(e,t){const n={:0,:0,:0,:0,:0},s=["","","","",""];for(const o of s){const l=Oc[o],u=Math.max(0,(e[o]??0)-(e[l]??0));if(u<=0)continue;const f=Sd[o],m=Math.round(u*.35);m>0&&(n[f]+=m,t.get(f)?.push(`: ${o}${l} `))}return n}function vS(e,t){const n={:0,:0,:0,:0,:0},s=Object.entries(e),o=Math.min(...s.map(([,u])=>u)),l=s.filter(([,u])=>u<=Math.max(6,o));for(const[u]of l)n[u]+=12,t.get(u)?.push(":  ");return n}function _S(e,t){const n=JP(e),s=QP(e),o=t9(e),l=n9(o);let u=r9(t);if(u==null)if(!n)u=50;else{const ee=n,q=ld[n],te=Object.values(o).reduce((oe,Se)=>oe+Se,0)||1;u=Xy(((o[ee]??0)+(o[q]??0))/te*100)}const f=XP(u),m={:0,:0,:0,:0,:0},p=new Map(["","","","",""].map(ee=>[ee,[]]));if(n){const ee=l9(n,f,o,p);Object.keys(m).forEach(q=>{m[q]+=ee[q]??0})}const b=bS(s,p);Object.keys(m).forEach(ee=>{m[ee]+=b[ee]??0});const _=yS(o,p);Object.keys(m).forEach(ee=>{m[ee]+=_[ee]??0});const x=vS(o,p);Object.keys(m).forEach(ee=>{m[ee]+=x[ee]??0});const S=e9(n),T={:0,:0,:0,:0,:0};if(Array.isArray(t))for(const ee of t)T[ee.name]=ee.value;if(u>=45&&u<=55&&S){const ee=T.>=30||T.>=Math.max(T.,T.,T.,T.)+5;u<=50?(m[S.resource]+=14,p.get(S.resource)?.push(": -"),m[S.peer]+=10,p.get(S.peer)?.push(": -"),m[S.leak]+=6,p.get(S.leak)?.push(": -"),m[S.wealth]+=3,p.get(S.wealth)?.push(": -"),ee&&S.officer&&(m[S.officer]=Math.round(m[S.officer]*.8*10)/10,p.get(S.officer)?.push(":   "))):(m[S.leak]+=14,p.get(S.leak)?.push(": -"),m[S.wealth]+=10,p.get(S.wealth)?.push(": -"),S.officer&&(m[S.officer]+=6,p.get(S.officer)?.push(": -")),m[S.resource]+=3,p.get(S.resource)?.push(": -"))}["","","","",""].forEach(ee=>{const q=o9(n,u,ee,l);m[ee]=Sc(Math.round((m[ee]+q)*10)/10,0,999)});const A=u<50;["","","","",""].forEach(ee=>{const q=l[ee]??0,te=A&&n===ee;if(q>=Og&&!te){const oe=a9(q);m[ee]=Math.round(m[ee]*oe*10)/10;const Se=Math.min(14,Math.max(0,Math.ceil((q-Og)*.5)));Se>0&&(m[ee]=Sc(m[ee]-Se,0,999)),p.get(ee)?.push(" ()")}});const M={:[],:[],:[],:[],:[]};if(n){const ee=Sd[n],q=Oc[n],te=Fm(n),oe=n,Se=ld[n];M[ee].push(""),M[q].push(""),M[te].push(""),M[oe].push(""),M[Se].push("")}const R={:(o.??0)>0,:(o.??0)>0,:(o.??0)>0,:(o.??0)>0,:(o.??0)>0},N=ee=>{const q=l[ee]??0;return q>=Og&&!(A&&n===ee)?q>=55?4:q>=45?3:2:R[ee]?0:1},D=bS(s,new Map),C=yS(o,new Map),G=vS(o,new Map),H=Object.keys(m).map(ee=>({element:ee,score:Math.round(m[ee]*10)/10,via:c9(ee,D,C,G),reasons:(p.get(ee)??[]).slice(),tenGodHints:M[ee]})).sort((ee,q)=>{const te=N(ee.element),oe=N(q.element);return te!==oe?te-oe:q.score!==ee.score?q.score-ee.score:ee.element.localeCompare(q.element)}),V=u9(f,D,C,G),W={:0,:0,:0,:0,:0},re=t?t.reduce((ee,q)=>(ee[q.name]=q.value,ee),{...W}):void 0;return{chosenType:V,ordered:H,debug:{band:f,overallPct:u,elementScore:o,tenGodTotals:re,monthBranch:s??void 0}}}function c9(e,t,n,s){const o=[];return(t[e]??0)>0&&o.push(""),(n[e]??0)>0&&o.push(""),(s[e]??0)>0&&o.push(""),o.length===0&&o.push(""),o}function u9(e,t,n,s){if(["","","",""].includes(e))return"";const l=p=>Object.values(p).reduce((b,_)=>b+_,0),u=l(t),f=l(n),m=l(s);return u>Math.max(f,m)?"":f>=m?"":""}const d9=Object.fromEntries(fi..map((e,t)=>[e,Ar[t]])),h9=Object.fromEntries(Ar.map((e,t)=>[e,fi.[t]])),f9=Object.fromEntries(fi..map((e,t)=>[e,Fr[t]])),m9=Object.fromEntries(Fr.map((e,t)=>[e,fi.[t]])),p9=e=>d9[e]??e,g9=e=>f9[e]??e,b9=e=>h9[e]??e,y9=e=>m9[e]??e;function v9(e){const t={...e};for(const n of Object.keys(e)){const s=/[]/.test(n)?p9(n):b9(n);s&&t[s]===void 0&&(t[s]=e[n])}return t}function Jy(e){const t={...e};for(const n of Object.keys(e)){const s=/[]/.test(n)?g9(n):y9(n);s&&t[s]===void 0&&(t[s]=e[n])}return t}const _9={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},x9={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Jk={:[{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}]},w9={...Jk,:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.2},{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.2},{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}]},xS=v9(_9),wS=Jy(x9);Jy(Jk);Jy(w9);const S9=["","","","",""],fn={2:4,1:3,3:2,0:1};function hf(e,t,n="classic"){const s=ai(t),o=Wt(t),l=(n==="hgc"?wm:xm)[o]??[];return[s,...l].includes(e)}const dc={1:4,2:3,0:2,3:1},Qk=new Set(Object.keys(_m)),eA=new Set(Object.keys(Zb)),E9=e=>e.slice(0,1),T9=e=>e.slice(-1);function ea(e){return vm.has(e)?e:Qk.has(e)?_m[e]??e:e}function gr(e){return qb.has(e)?e:eA.has(e)?Zb[e]??e:e}function ai(e){return ea(E9(e))}function Wt(e){return gr(T9(e))}const Te={year:0,month:1,day:2,hour:3};function Dg(e,t){const n=gr(e),s=[Te.day,Te.month,Te.hour,Te.year];for(const o of s)if(Wt(t[o])===n)return{pos:o,weight:fn[o]??0};return null}function Qy(e,t,n){return Wt(t[n])===gr(e)?{pos:n,weight:fn[n]}:null}function k9(e,t){const n=ea(e),s=[Te.day,Te.month,Te.hour,Te.year];for(const o of s)if(ai(t[o])===n)return{pos:o,weight:fn[o]??0};return null}const A9=/^#(|||)X\1_/,j9=e=>A9.test(e);function SS(e){const t=new Map;for(const n of e){if(j9(n.name))continue;const s=`${n.name}@${n.pos}`,o=t.get(s);(!o||n.weight>o.weight)&&t.set(s,n)}return Array.from(t.values()).sort((n,s)=>s.weight!==n.weight?s.weight-n.weight:n.name.localeCompare(s.name,"ko"))}function ff(e){return e===3?"si":e===2?"il":e===1?"wol":"yeon"}const ol=e=>e===0?"":e===1?"":e===2?"":"",Dc=e=>e==="dae"?"":e==="se"?"":e==="wol"?"":"",N9=(e,t)=>`#X${ol(t)}_${e}`,tA=(e,t)=>t===Te.month?`#_${e}`:`#X${ol(t)}_${e}`,gc=(e,t,n)=>`#${ol(t)}X${ol(n)}_${e}`,O9=(e,t)=>`#${e==="day"?"":""}X${ol(t)}_`,xs=e=>`#_${e}`,mf=(e,t)=>`#${ol(t)}_${e}`,nc=(e,t)=>`#X${Dc(t)}_${e}`,$u=(e,t)=>`#X${Dc(t)}_${e}`,Mg=(e,t,n)=>`#${Dc(t)}X${ol(n)}_${e}`,D9=(e,t)=>`#${t==="day"?"":""}X${Dc(e)}_`,M9=(e,t)=>`#${t==="day"?"":""}X${Dc(e)}_`,ES=(e,t)=>`#X${Dc(e)}_${t}`;function C9(e){if(!e)return null;const t=Array.from(String(e));let n=null,s=null;for(const o of t)!n&&(vm.has(o)||Qk.has(o))&&(n=ea(o)),(qb.has(o)||eA.has(o))&&(s=gr(o));return n&&s?{stem:n,branch:s}:null}function Cg(e){return e.map(Wt)}const pn=e=>Object.fromEntries(Object.entries(e).map(([t,n])=>[gr(t),(Array.isArray(n)?n:[n]).map(gr)])),R9=pn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),nA=pn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),L9=pn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),B9=pn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),P9=pn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),rA=pn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),$9=pn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),I9=pn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),z9=pn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),U9=pn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),H9=pn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),iA=pn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),G9=pn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),F9=pn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Y9=pn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),q9=pn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Z9=pn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),V9=pn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),sA=pn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),K9=iA,W9=nA,X9=sA,J9=pn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Q9=rA,e6=pn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),t6=pn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),n6=pn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),aA=e=>(Array.isArray(e)?e:String(e).split("")).map(t=>gr(t.trim())).filter(Boolean),$i=e=>Object.fromEntries(Object.entries(e).map(([t,n])=>[gr(t),(Array.isArray(n)?n:[n]).map(s=>gr(s))])),TS={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},kS={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},AS={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},jS={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},r6=$i({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),NS=$i({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Ym=e=>Object.fromEntries(Object.entries(e).map(([t,n])=>[gr(t),aA(n)])),i6=Ym({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),s6=Ym({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),a6=Ym({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),o6=Ym({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),l6=$i({:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""]}),c6=$i({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),u6=$i({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),d6=$i({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),h6=$i({:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""]}),OS=$i({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),f6=$i({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),m6=$i({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),p6=$i({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),g6=$i({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),cn=e=>Object.fromEntries(Object.entries(e).map(([t,n])=>[ea(t),aA(n)])),b6=cn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),DS=cn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),y6=cn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),v6=cn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),_6=cn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),x6=cn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),w6=cn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),MS=cn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),S6=cn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),E6=cn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),T6=cn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),k6=cn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),A6=cn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),CS=cn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),j6=cn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),N6=cn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),RS=cn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),O6=cn({:"",:"",:"",:""}),D6=cn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),LS=cn({:"",:"",:""}),BS=cn({:"",:"",:""}),M6=cn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),PS=cn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),$S=cn({:"",:"",:"",:"",:"",:"",:""}),Rg=[["",""],["",""],["",""],["",""],["",""],["",""]],Lg=[["",""],["",""],["",""],["",""],["",""],["",""]],C6=new Set(["","","",""]),IS=[["",""],["",""]],R6=[{set:new Set(["","","","","","","","","",""]),voids:["",""]},{set:new Set(["","","","","","","","","",""]),voids:["",""]},{set:new Set(["","","","","","","","","",""]),voids:["",""]},{set:new Set(["","","","","","","","","",""]),voids:["",""]},{set:new Set(["","","","","","","","","",""]),voids:["",""]},{set:new Set(["","","","","","","","","",""]),voids:["",""]}];function Iu(e,t,n){const s=gr(t),o=gr(n);for(const[l,u]of e)if(l===s&&u===o||l===o&&u===s)return!0;return!1}function zS(e,t,n){const s=gr(t),o=gr(n);for(const[l,u]of e)if(l===s&&u===o||l===o&&u===s)return`${l}${u}`;return`${s}${o}`}function pf(e){for(const t of R6)if(t.set.has(e))return t.voids;return null}function Bg(e){const t=gr(e),n=[{group:new Set(["","",""]),years:new Set(["","",""])},{group:new Set(["","",""]),years:new Set(["","",""])},{group:new Set(["","",""]),years:new Set(["","",""])},{group:new Set(["","",""]),years:new Set(["","",""])}];for(const s of n)if(s.group.has(t))return Array.from(s.years);return null}function Ed(e,t){e.push(t)}function Pg(e,t,n,s,o=0){const l=dc[n]>=dc[s]?n:s,u=gc(t,n,s);e.push({name:u,weight:fn[l]+o,pos:l})}function tn(e,t,n,s,o){const l=Wt(e[Te.year]),u=t[l];if(!u)return;const f=n==="MONTH"?[Te.month]:n==="DAY"?[Te.day]:n==="HOUR"?[Te.hour]:[Te.year,Te.month,Te.day,Te.hour];for(const m of u)for(const p of f){const b=Qy(m,e,p);b&&Ed(o,{name:gc(s,Te.year,p),weight:b.weight,pos:p})}}function gf(e,t,n,s){const o=Wt(e[Te.month]),l=t[o];if(!l)return;const u=ea(l),f=k9(u,e);f&&Ed(s,{name:tA(n,f.pos),weight:f.weight,pos:f.pos})}function ri(e,t,n,s,o="ALL"){const l=Wt(e[Te.month]),u=t[l];if(!u)return;const f=o==="YEAR"?[Te.year]:o==="DAY"?[Te.day]:o==="HOUR"?[Te.hour]:o==="DAY_HOUR"?[Te.day,Te.hour]:[Te.year,Te.month,Te.day,Te.hour];for(const m of u)for(const p of f){const b=Qy(m,e,p);if(!b)continue;const _=p===Te.month?`#_${n}`:tA(n,p);Ed(s,{name:_,weight:b.weight,pos:p})}}function bf(e,t,n,s){const o=Wt(e[Te.month]),l=t[o];if(!l)return;const u=e[Te.day];l.includes(u)&&Ed(s,{name:gc(n,Te.month,Te.day),weight:fn[Te.day],pos:Te.day})}function Zt(e,t,n,s,o){const l=ai(e[Te.day]),u=t[l];if(!u)return;const f=o==="DAY"?[Te.day]:o==="HOUR"?[Te.hour]:[Te.year,Te.month,Te.day,Te.hour];for(const m of u)for(const p of f){const b=Qy(m,e,p);b&&Ed(s,{name:N9(n,p),weight:b.weight,pos:p})}}function Hr({natal:e,daewoon:t,sewoon:n,wolwoon:s,ilwoon:o,basis:l}){const u=ai(e[Te.day]),f=Wt(e[Te.day]),m=Wt(e[Te.month]),p=Wt(e[Te.year]),b=Cg(e),_=[],x=[],S=new Set(["","","",""]);if(tn(e,R9,"MONTH","",x),tn(e,nA,"DAY","",x),tn(e,B9,"MONTH","",x),tn(e,P9,"MONTH","",x),tn(e,$9,"ALL","",x),tn(e,I9,"HOUR","",x),tn(e,z9,"ALL","",x),tn(e,U9,"ALL","",x),tn(e,H9,"ALL","",x),tn(e,iA,"ALL","",x),tn(e,G9,"ALL","",x),tn(e,F9,"ALL","",x),tn(e,Y9,"ALL","",x),tn(e,q9,"ALL","",x),tn(e,Z9,"ALL","",x),tn(e,V9,"ALL","",x),tn(e,sA,"ALL","",x),tn(e,K9,"ALL","",x),tn(e,W9,"ALL","",x),tn(e,X9,"ALL","",x),tn(e,J9,"ALL","",x),tn(e,Q9,"ALL","",x),tn(e,e6,"ALL","",x),tn(e,t6,"ALL","",x),tn(e,n6,"ALL","",x),gf(e,TS,"",_),gf(e,kS,"",_),gf(e,AS,"",_),gf(e,jS,"",_),ri(e,r6,"",x,"ALL"),ri(e,NS,"",x,"YEAR"),ri(e,NS,"",x,"DAY"),bf(e,i6,"",_),bf(e,s6,"",x),bf(e,a6,"",x),bf(e,o6,"",_),ri(e,l6,"",x,"ALL"),ri(e,c6,"",x,"ALL"),ri(e,u6,"",x,"ALL"),ri(e,d6,"",x,"ALL"),ri(e,h6,"",x,"ALL"),ri(e,OS,"",_,"ALL"),ri(e,f6,"",_,"DAY_HOUR"),ri(e,m6,"",_,"DAY_HOUR"),ri(e,p6,"",_,"ALL"),ri(e,g6,"",_,"ALL"),Zt(e,b6,"",_,"ALL"),Zt(e,DS,"",_,"ALL"),Zt(e,y6,"",_,"ALL"),Zt(e,v6,"",_,"ALL"),Zt(e,_6,"",_,"ALL"),Zt(e,x6,"",_,"ALL"),Zt(e,w6,"",_,"ALL"),Zt(e,MS,"",_,"ALL"),Zt(e,S6,"",_,"ALL"),Zt(e,E6,"",_,"ALL"),Zt(e,T6,"",_,"ALL"),Zt(e,k6,"",_,"ALL"),Zt(e,A6,"",_,"ALL"),Zt(e,CS,"",x,"ALL"),Zt(e,j6,"",x,"ALL"),Zt(e,N6,"",x,"ALL"),Zt(e,RS,"",x,"DAY"),Zt(e,RS,"",x,"HOUR"),Zt(e,LS,"",x,"DAY"),Zt(e,LS,"",x,"HOUR"),Zt(e,BS,"",x,"DAY"),Zt(e,BS,"",x,"HOUR"),Zt(e,O6,"",x,"DAY"),Zt(e,D6,"",x,"ALL"),Zt(e,M6,"",_,"ALL"),Zt(e,PS,"",x,"ALL"),S.has(e[Te.day])){x.push({name:xs(""),weight:fn[Te.day],pos:Te.day});for(const K of[Te.year,Te.month,Te.hour])e[K]===e[Te.day]&&x.push({name:mf("",K),weight:fn[K],pos:K})}const k=$S[u];if(k)for(const K of[Te.year,Te.month,Te.day,Te.hour]){const U=ai(e[K]),$=Wt(e[K]);U===u&&k.includes($)&&x.push({name:mf("",K),weight:fn[K],pos:K})}for(const[K,U]of IS){const $=Dg(K,e),F=Dg(U,e);$&&F&&Pg(x,"",$.pos,F.pos)}{const K=new Set(["",""]),U=new Set(["","","",""]);for(let $=0;$<=3;$++){const F=ai(e[$]),Z=Wt(e[$]);(K.has(F)||U.has(Z))&&x.push({name:mf("",$),weight:fn[$],pos:$})}}{const K=ai(e[Te.day]),U=e[Te.hour],$=(F,Z)=>F.includes(K)&&Z.includes(U);$(["",""],["",""])&&x.push({name:xs(""),weight:fn[Te.hour],pos:Te.hour}),$(["",""],["",""])&&x.push({name:xs(""),weight:fn[Te.hour],pos:Te.hour}),$(["",""],["",""])&&x.push({name:xs(""),weight:fn[Te.hour],pos:Te.hour}),$(["",""],["",""])&&x.push({name:xs(""),weight:fn[Te.hour],pos:Te.hour}),$(["",""],["",""])&&x.push({name:xs(""),weight:fn[Te.hour],pos:Te.hour})}{const K=Cg(e);["","","",""].every($=>K.includes($))&&_.push({name:xs(""),weight:fn[Te.day],pos:Te.day})}{const K=e[Te.day],U=e[Te.hour];(K===""&&U===""||K===""&&U==="")&&x.push({name:gc("",Te.day,Te.hour),weight:fn[Te.hour],pos:Te.hour})}{const K=Wt(e[Te.year]),U=new Set(Cg(e).slice(1)),$=(F,Z)=>F.every(B=>U.has(B))&&K===Z;($(["","",""],"")||$(["","",""],"")||$(["","",""],"")||$(["","",""],""))&&_.push({name:xs(""),weight:fn[Te.day],pos:Te.day})}["",""].includes(e[Te.day])&&_.push({name:xs(""),weight:fn[Te.day],pos:Te.day});{const K=ai(e[Te.day]),$={:{rok:"",group:["","",""],ma:"",maStem:""},:{rok:"",group:["","",""],ma:"",maStem:""},:{rok:"",group:["","",""],ma:"",maStem:""},:{rok:"",group:["","",""],ma:"",maStem:""},:{rok:"",group:["","",""],ma:"",maStem:""},:{rok:"",group:["","",""],ma:"",maStem:""},:{rok:"",group:["","",""],ma:"",maStem:""},:{rok:"",group:["","",""],ma:"",maStem:""},:{rok:"",group:["","",""],ma:"",maStem:""},:{rok:"",group:["","",""],ma:"",maStem:""}}[K],F=e.some(Y=>Wt(Y)===$.rok),B=ai(e[Te.hour])===$.maStem;F&&B&&_.push({name:gc("",Te.day,Te.hour),weight:fn[Te.hour],pos:Te.hour})}{const K=ai(e[Te.day]),U=Wt(e[Te.day]),$=Wt(e[Te.hour]),Z={:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""}}[K];if(Z){const B=U===Z.rok,Y=$===Z.ma,ie=hf(Z.rokStem,e[Te.day],"classic")||hf(Z.rokStem,e[Te.hour],"classic"),fe=hf(Z.maStem,e[Te.day],"classic")||hf(Z.maStem,e[Te.hour],"classic");B&&Y&&(ie||fe)&&_.push({name:gc("",Te.day,Te.hour),weight:fn[Te.hour],pos:Te.hour})}}{const K=new Set(["","","","","",""]),U=e.map(ai),$=e.map(Wt),F=U.concat($).filter(ie=>K.has(ie)).length,Z=t?ai(t):"",B=t?Wt(t):"",Y=K.has(Z)||K.has(B);(F>=4||F===3&&Y)&&x.push({name:xs(""),weight:fn[Te.day],pos:Te.day})}{const K=new Set(["",""]),U=new Set(["",""]);for(let $=0;$<=3;$++){const F=ai(e[$]),Z=Wt(e[$]);(K.has(F)||U.has(Z))&&x.push({name:mf("",$),weight:fn[$],pos:$})}}{const K=[[Te.year,Te.month],[Te.year,Te.day],[Te.month,Te.day],[Te.month,Te.hour],[Te.day,Te.hour]];for(const[U,$]of K){const F=Wt(e[U]),Z=Wt(e[$]);if(Iu(Rg,F,Z)){const B=zS(Rg,F,Z);Pg(x,`${B}`,U,$)}}}{const K=[[Te.year,Te.month,0],[Te.month,Te.day,1],[Te.month,Te.hour,0],[Te.day,Te.hour,0]];for(const[U,$,F]of K){const Z=Wt(e[U]),B=Wt(e[$]);if(Iu(Lg,Z,B)){const Y=zS(Lg,Z,B),ie=(F?1:0)+(C6.has(Z+B)?1:0);Pg(x,`${Y}`,U,$,ie)}}}function A(K){const U=K.lastIndexOf("_");return U>=0?K.slice(U+1):K}const M=new Set(["",""]);function R(K){return M.has(K)?!0:K.endsWith("")||K.endsWith("")}function N(K){const U=new Map;for(const F of K){const Z=A(F.name);U.has(Z)||U.set(Z,[]),U.get(Z).push(F)}const $=[];for(const[F,Z]of U)if(R(F))$.push(...Z);else{const B=Z.sort((Y,ie)=>dc[Y.pos]!==dc[ie.pos]?dc[ie.pos]-dc[Y.pos]:ie.weight-Y.weight)[0];$.push(B)}return $}const D=pf(e[Te.day]),C=pf(e[Te.year]);{const K=(l?.voidBasis??"day")==="day"?D:C;if(K){const[U,$]=K.map(gr),F=[Te.year,Te.month,Te.day,Te.hour];for(const Z of F){const B=Wt(e[Z]);(B===U||B===$)&&x.push({name:O9(l?.voidBasis??"day",Z),weight:fn[Z],pos:Z})}}}const G=N(SS(_)),H=N(SS(x)),V={si:[],il:[],yeon:[],wol:[]},W={si:[],il:[],yeon:[],wol:[]};for(const K of G)V[ff(K.pos)].push(K.name);for(const K of H)W[ff(K.pos)].push(K.name);const re=[],ee=[],q=[],te=[],oe=[],Se=[],X=[],ae=[];function J(K,U){K.includes(U)||K.push(U)}function ye(K,U){const $=C9(U);if(!$)return;const F=$.branch,Z=$.stem;let B,Y;switch(K){case"dae":B=re,Y=oe;break;case"se":B=ee,Y=Se;break;case"wol":B=q,Y=X;break;case"il":B=te,Y=ae;break;default:return}ea(TS[m])===Z&&J(B,$u("",K)),ea(kS[m])===Z&&J(B,$u("",K)),ea(AS[m])===Z&&J(B,$u("",K)),ea(jS[m])===Z&&J(B,$u("",K)),OS[m]?.includes(F)&&J(B,$u("",K)),DS[u]?.includes(F)&&J(B,nc("",K)),MS[u]?.includes(F)&&J(B,nc("",K)),CS[u]?.includes(F)&&J(Y,nc("",K)),PS[u]?.includes(F)&&J(Y,nc("",K)),$S[u]?.includes(F)&&J(Y,nc("",K)),K==="se"&&(L9[p]?.includes(F)&&J(Y,ES(K,"")),rA[p]?.includes(F)&&J(Y,ES(K,"")));for(const fe of b)if(Iu(IS,F,fe)){const ce=Dg(fe,e)?.pos;ce!==void 0&&J(Y,Mg("",K,ce));break}new Set(["",""]).has(u)&&new Set(["","","",""]).has(F)&&J(Y,nc("",K));const ie=(l?.voidBasis??"day")==="day"?D:C;ie&&(F===ie[0]||F===ie[1])&&J(Y,D9(K,l?.voidBasis??"day"));for(let fe=0;fe<=3;fe++){const ce=Wt(e[fe]);Iu(Rg,F,ce)&&J(Y,Mg("",K,fe)),Iu(Lg,F,ce)&&J(Y,Mg("",K,fe))}if(K==="se"){const fe=(l?.samjaeBasis??"day")==="day"?f:p,ce=fe?Bg(fe):null;ce&&ce.includes(F)&&J(Y,M9(K,l?.samjaeBasis??"day"))}}return ye("dae",t??null),ye("se",n??null),ye("wol",s??null),ye("il",o??null),{good:{si:[],il:[],yeon:[],wol:[],...(()=>{const K={si:[],il:[],yeon:[],wol:[]};for(const U of G)K[ff(U.pos)].push(U.name);return K})(),dae:re,se:ee,wolun:q,ilun:te},bad:{si:[],il:[],yeon:[],wol:[],...(()=>{const K={si:[],il:[],yeon:[],wol:[]};for(const U of H)K[ff(U.pos)].push(U.name);return K})(),dae:oe,se:Se,wolun:X,ilun:ae},meta:{voidPair:{day:pf(e[Te.day])??void 0,year:pf(e[Te.year])??void 0},samjaeYears:{day:Bg(f)??void 0,year:Bg(p)??void 0},currentBasis:{voidBasis:l?.voidBasis??"day",samjaeBasis:l?.samjaeBasis??"day"}}}}function L6(e,t){if(e==="#")return"bg-neutral-100 text-neutral-500 border-neutral-200 dark:bg-neutral-900 dark:text-neutral-500 dark:border-neutral-700";switch(t){case"natal":return"bg-violet-100 text-violet-800 border-violet-200 dark:bg-violet-900/30 dark:text-violet-200 dark:border-violet-800";case"dae":return"bg-blue-100 text-blue-800 border-blue-200 dark:bg-blue-900/30 dark:text-blue-200 dark:border-blue-800";case"se":return"bg-green-100 text-green-800 border-green-200 dark:bg-green-900/30 dark:text-green-200 dark:border-green-800";case"wol":return"bg-orange-100 text-orange-800 border-orange-200 dark:bg-orange-900/30 dark:text-orange-200 dark:border-orange-800";case"il":return"bg-red-100 text-red-800 border-red-200 dark:bg-red-900/30 dark:text-red-200 dark:border-red-800";default:return""}}function B6({items:e,source:t}){const n=e.length>0?e:["#"];return y.jsx("div",{className:"flex flex-wrap gap-2",children:n.map((s,o)=>y.jsx("span",{className:"text-xs px-2 py-1 rounded-full border whitespace-nowrap "+L6(s,t),children:s},`${t}-${o}-${s}`))})}function US({title:e,rows:t}){return y.jsxs("div",{className:"space-y-2 desk:flex-1 desk:px-1",children:[y.jsx("div",{className:"text-md font-bold text-neutral-800 dark:text-neutral-200 mt-2",children:e}),t.map(n=>{const o=n.items.some(l=>l!=="#")?"shrink-0 w-12 text-xs font-semibold text-orange-700 dark:text-orange-300 mt-1":"shrink-0 w-12 text-xs font-semibold text-neutral-700 dark:text-neutral-300 mt-1";return y.jsxs("div",{className:"flex items-start gap-3 border border-gray-700 dark:border-gray-400 p-2 rounded-sm",children:[y.jsx("div",{className:o,children:n.label}),y.jsx(B6,{items:n.items.length>0?n.items:["#"],source:n.source})]},`${e}-${n.label}`)})]})}function P6({pillars:e,daewoon:t,sewoon:n,wolwoon:s,ilwoon:o,tab:l=""}){const{settings:u}=br(),[f,m]=P.useState(""),[p,b]=P.useState("");P.useEffect(()=>{u.sinsalBase===""?(m(""),b("")):(m(""),b(""))},[u.sinsalBase]);const _=P.useMemo(()=>({voidBasis:f===""?"day":"year",samjaeBasis:p===""?"day":"year"}),[f,p]),x=P.useMemo(()=>Hr({natal:e,daewoon:t,sewoon:n,wolwoon:s,ilwoon:o,basis:_}),[e,t,n,s,o,_]),{good:S,bad:T,meta:k}=x,A=re=>re.map(ee=>ee==="#"?ee:` ${ee}`),M=(re,ee)=>{const q=["natal"];return ee===""&&q.push("natal"),ee===""&&q.push("natal","dae"),ee===""&&q.push("natal","dae","se"),ee===""&&q.push("natal","dae","se","wol"),ee===""&&q.push("natal","dae","se","wol","il"),re.filter(te=>q.includes(te.source))},R=[{label:"",items:A(S.si),source:"natal"},{label:"",items:A(S.il),source:"natal"},{label:"",items:A(S.wol),source:"natal"},{label:"",items:A(S.yeon),source:"natal"},{label:"",items:S.dae,source:"dae"},{label:"",items:S.se,source:"se"},{label:"",items:S.wolun,source:"wol"},{label:"",items:S.ilun,source:"il"}],N=[{label:"",items:A(T.si),source:"natal"},{label:"",items:A(T.il),source:"natal"},{label:"",items:A(T.wol),source:"natal"},{label:"",items:A(T.yeon),source:"natal"},{label:"",items:T.dae,source:"dae"},{label:"",items:T.se,source:"se"},{label:"",items:T.wolun,source:"wol"},{label:"",items:T.ilun,source:"il"}],D=M(R,l),C=M(N,l),G=k.voidPair.day?`(${k.voidPair.day.join("")})`:"()",H=k.voidPair.year?`(${k.voidPair.year.join("")})`:"()",V=k.samjaeYears.day?`(${k.samjaeYears.day.join("")})`:"()",W=k.samjaeYears.year?`(${k.samjaeYears.year.join("")})`:"()";return y.jsxs("div",{className:"rounded-xl p-4 bg-neutral-100 dark:bg-neutral-900 text-neutral-900 dark:text-neutral-100 space-y-2",children:[y.jsx("div",{className:"text-base font-bold mb-1",children:"(/)"}),y.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-xs",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("label",{className:"text-neutral-600 dark:text-neutral-300",children:" "}),y.jsxs("select",{value:f,onChange:re=>m(re.target.value),className:"px-2 h-30 rounded border border-neutral-300 dark:border-neutral-700 bg-white dark:bg-neutral-800",children:[y.jsx("option",{value:"",children:G}),y.jsx("option",{value:"",children:H})]})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("label",{className:"text-neutral-600 dark:text-neutral-300",children:" "}),y.jsxs("select",{value:p,onChange:re=>b(re.target.value),className:"px-2 h-30 rounded border border-neutral-300 dark:border-neutral-700 bg-white dark:bg-neutral-800",children:[y.jsx("option",{value:"",children:V}),y.jsx("option",{value:"",children:W})]})]})]}),y.jsxs("div",{className:"desk:flex",children:[y.jsx(US,{title:"()",rows:D}),y.jsx("div",{className:"block desk:hidden border-t border-neutral-200 dark:border-neutral-800 mt-4 mb-3"}),y.jsx(US,{title:"()",rows:C})]})]})}const Mi={year:0,month:1,day:2,hour:3},oA={[Mi.year]:.3,[Mi.month]:.5,[Mi.day]:.3,[Mi.hour]:.3},lA={[Mi.year]:.15,[Mi.month]:.2,[Mi.day]:0,[Mi.hour]:.15},$6=e=>qb.has(e)?e:Zb[e]??e,I6=e=>vm.has(e)?e:_m[e]??e,z6=e=>typeof e=="string"&&e.length>=2?$6(e.slice(-1)):"",U6=e=>typeof e=="string"&&e.length>=1?I6(e.slice(0,1)):"",xn=(e,t,n,s)=>({han:e,nan:t,jo:n,seup:s}),H6={:xn(2,0,.5,2),:xn(2,0,0,2),:xn(2,0,0,2),:xn(0,2,2,0),:xn(0,2,2,0),:xn(0,2,1,2),:xn(0,2,2,.5),:xn(0,2,2,0),:xn(0,2,2,1),:xn(2,0,0,2),:xn(2,0,0,2),:xn(2,0,1,1)},G6={:xn(0,1,1,0),:xn(0,1,1,0),:xn(0,2,2,0),:xn(0,2,2,0),:xn(0,0,1,0),:xn(0,0,0,1),:xn(1,0,0,1),:xn(1,0,0,1),:xn(2,0,0,2),:xn(2,0,0,2)},HS=e=>Math.max(0,Math.min(100,e));function GS(e,t){const n=Math.max(0,e),s=Math.max(0,t),o=n+s;return o<=0?50:s/o*100}function F6(e){let t=0,n=0,s=0,o=0;return[Mi.year,Mi.month,Mi.day,Mi.hour].forEach(l=>{const u=H6[z6(e[l])],f=G6[U6(e[l])],m=oA[l],p=lA[l];m>0&&u&&(t+=u.han*m,n+=u.nan*m,s+=u.jo*m,o+=u.seup*m),p>0&&f&&(t+=f.han*p,n+=f.nan*p,s+=f.jo*p,o+=f.seup*p)}),{han:t,nan:n,jo:s,seup:o}}function Y6(e){const t=Array.isArray(e)?e.slice(0,4):[];for(;t.length<4;)t.push("");return t.map(n=>typeof n=="string"?n:"")}function q6(e){const t=Y6(e);return P.useMemo(()=>{const{han:n,nan:s,jo:o,seup:l}=F6(t),u=GS(n,s),f=GS(l,o);return{hanNanPct:HS(u),joSeupPct:HS(f),raw:{han:n,nan:s,jo:o,seup:l},weights:{branch:oA,stem:lA}}},[t])}function FS({label:e,percent:t,leftHint:n,midHint:s,rightHint:o}){const l=P.useMemo(()=>Math.max(0,Math.min(100,t)),[t]),u=[10,20,35,45,55,65,80];return y.jsxs("div",{className:"w-full mx-auto p-2 desk:p-4 bg-neutral-100 dark:bg-neutral-800 rounded-xl",children:[y.jsxs("div",{className:"flex justify-between text-[11px] text-neutral-400 mb-1",children:[y.jsx("span",{children:n}),y.jsx("span",{children:s}),y.jsx("span",{children:o})]}),y.jsxs("div",{className:"relative h-4 rounded bg-gradient-to-r from-blue-500 via-yellow-400 to-red-500",children:[u.map(f=>y.jsx("div",{className:"absolute top-0 h-4 w-[1px] bg-black/30",style:{left:`${f}%`},title:`${f}%`},f)),y.jsx("div",{className:"absolute top-0 h-4 w-[1px] bg-black/40",style:{left:"50%"},title:"50%"}),y.jsx("div",{className:"absolute -top-1 h-6 w-2 bg-white rounded shadow-sm",style:{left:`${l}%`,transform:"translateX(-50%)"},"aria-label":`${e} ${l.toFixed(1)}%`})]}),y.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[y.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs border border-neutral-600 text-neutral-700 dark:text-neutral-200",children:e}),y.jsxs("span",{className:"text-xs text-neutral-400",children:[l.toFixed(1),"%"]})]})]})}function Z6({natal:e}){const{hanNanPct:t,joSeupPct:n}=q6(e);return y.jsxs("div",{className:"flex gap-2",children:[y.jsx(FS,{label:"",percent:t,leftHint:"",midHint:"",rightHint:""}),y.jsx(FS,{label:"",percent:n,leftHint:"",midHint:"",rightHint:""})]})}const V6=Object.fromEntries(fi..map((e,t)=>[e,Ar[t]])),K6=Object.fromEntries(Ar.map((e,t)=>[e,fi.[t]])),W6=Object.fromEntries(fi..map((e,t)=>[e,Fr[t]])),X6=Object.fromEntries(Fr.map((e,t)=>[e,fi.[t]])),J6=e=>V6[e]??e,Q6=e=>W6[e]??e,e$=e=>K6[e]??e,t$=e=>X6[e]??e;function cA(e){const t={...e};for(const n of Object.keys(e)){if(n.length<2)continue;const s=n.charAt(0),o=n.charAt(1),l=/[]/.test(s)||/[]/.test(o)?`${J6(s)}${Q6(o)}`:`${e$(s)}${t$(o)}`;t[l]===void 0&&(t[l]=e[n])}return t}const uA={:1,:.2,:1,:1,:.5,:.7,:0,:.5,:1,:1,:0,:1,:0,:0,:.3,:0,:.5,:.3,:0,:0,:.3,:0,:.8,:.3,:0,:.5,:0,:0,:.3,:.3,:0,:.3,:0,:0,:.8,:0,:0,:.8,:0,:0,:.5,:0,:1,:.5,:0,:0,:.7,:0,:1,:.5,:.7,:0,:.2,:.7,:1,:.7,:.7,:1,:.2,:.7},n$={...uA,:.8,:.3,:.5,:.5,:.2,:.2,:.8,:.2},r$=cA(uA),i$=cA(n$),s$={:"",:"",:"",:"",:""},a$={:"",:"",:"",:"",:""},o$={:"",:"",:"",:"",:""},l$={:"",:"",:"",:"",:""},c$={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},u$={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},d$=e=>c$[e]??e,h$=e=>u$[e]??e;function dA(e){return!e||e.length<2?"":`${d$(e[0])}${h$(e[1])}`}const hA=e=>e&&e.length>=1?e[0]:"",fA=e=>e&&e.length>=2?e[1]:"";function mA(e){return{:e,:s$[e],:a$[e],:o$[e],:l$[e]}}const pA={:["","","","","","","",""],:["","","","","","","",""],:["","","","","","","",""],:["","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","",""],:["","","","","","","",""]};function f$(e,t){const n=(e??[]).slice(0,4).map(dA);if(n.length!==4||n.some(x=>x.length<2))return{flags:{:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1}},monthBranch:"",dayEl:""};const s=hA(n[2]),o=s===""||s===""?"":s===""||s===""?"":s===""||s===""?"":s===""||s===""?"":"",l=n.map(x=>fA(x)),u={:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1}},f=pA[s]??[],m=l[1];f.includes(m)&&(u..=!0,u..=!0);const p=l[2];f.includes(p)&&(u..=!0,u..=!0);const b=mA(o).,_=t[b]??0;return u..=_>=30,{flags:u,monthBranch:m,dayEl:o}}function gA(e,t){const n=(e??[]).slice(0,4).map(dA);if(n.length<3||n[0].length<2||n[1].length<2||n[2].length<2){const T={:!1,:!1,:!1};return{flags:{:{...T},:{...T},:{...T},:{...T},:{...T},:{...T},:{...T},:{...T},:{...T},:{...T}},monthBranch:"",dayEl:""}}const s=hA(n[2]),o=s===""||s===""?"":s===""||s===""?"":s===""||s===""?"":s===""||s===""?"":"",l=n.map(T=>fA(T)),u={:!1,:!1,:!1},f={:{...u},:{...u},:{...u},:{...u},:{...u},:{...u},:{...u},:{...u},:{...u},:{...u}},m=pA[s]??[],p=l[1];m.includes(p)&&(f..=!0,f..=!0,f..=!0,f..=!0);const b=l[2];m.includes(b)&&(f..=!0,f..=!0,f..=!0,f..=!0);const _=mA(o).;return(t[_]??0)>=30&&(f..=!0,f..=!0,f..=!0,f..=!0),{flags:f,monthBranch:p,dayEl:o}}const m$={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},p$={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},g$={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},b$={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},y$=e=>m$[e]??e,v$=e=>p$[e]??e;function _$(e){return!e||e.length<2?"":`${y$(e[0])}${v$(e[1])}`}function qo(e){return xS[e]??xS[g$[e]??""]}function Zo(e){return wS[e]??wS[b$[e]??""]}const $g=["year","month","day","hour"],x$={year:{stem:10,branch:10},month:{stem:15,branch:30},day:{stem:25,branch:25},hour:{stem:15,branch:15}},w$={year:{stem:10,branch:10},month:{stem:15,branch:45},day:{stem:25,branch:40},hour:{stem:15,branch:12.5}},S$=new Set(["","","","",""]),E$=new Set(["","","","","",""]),T$=new Set(["","","",""]),Ig=e=>S$.has(e)?"":"",zg=e=>{const t=E$.has(e)?"":"";return T$.has(e)?t===""?"":"":t};function YS(e){const t=e.reduce((f,m)=>f+m,0);if(t<=0)return e.map(()=>0);const n=e.map(f=>f*100/t),s=n.map(f=>Math.floor(f+.5)),o=100-s.reduce((f,m)=>f+m,0);if(o===0)return s;const l=n.map((f,m)=>({i:m,frac:f-Math.floor(f+.5)})).sort((f,m)=>m.frac-f.frac),u=s.slice();if(o>0)for(let f=0;f<o;f++)u[l[f].i]+=1;else for(let f=0;f<-o;f++)u[l[l.length-1-f].i]-=1;return u}function k$(e,t){return e===0?t?1:.8:e===1?t?.6:.5:t?.3:.2}const yf={:.15,:.1,:-.15,:-.2,:-.25},dm={:"",:"",:"",:"",:""},bA={:"",:"",:"",:"",:""},cd={:"",:"",:"",:"",:""},A$={:"",:"",:"",:"",:""};function vf(e,t){return e===t?"":dm[t]===e?"":dm[e]===t?"":cd[e]===t?"":cd[t]===e?"":""}const Ga=e=>e&&e.length>=1?e[0]:"",Vo=e=>e&&e.length>=2?e[1]:"";function j$(e,t){const n=e.reduce((m,p)=>m+p,0);if(n<=0||t<=0)return new Array(e.length).fill(0);const s=e.map(m=>m/n*t),o=s.map(m=>Math.floor(m));let l=t-o.reduce((m,p)=>m+p,0);const u=s.map((m,p)=>({i:p,frac:m-Math.floor(m)})).sort((m,p)=>p.frac-m.frac),f=o.slice();for(let m=0;m<u.length&&l>0;m++)f[u[m].i]+=1,l-=1;return f}function qS(e,t){switch(e){case"":return t;case"":return dm[t];case"":return cd[t];case"":return A$[t];case"":return bA[t];default:return t}}function $b(e){const{pillars:t,dayStem:n,mode:s,debug:o,useHarmonyOverlay:l,criteriaMode:u,luck:f}=e,m=u==="modern"?x$:w$,p=s==="classic"?i$:r$,b={:0,:0,:0,:0,:0},_={},x={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},S=(t??[]).slice(0,4).map(_$),T=S.length===4&&S[0]&&S[0].length>=2&&S[1]&&S[1].length>=2&&S[2]&&S[2].length>=2,k={totalsSub:{:0,:0,:0,:0,:0,:0,:0,:0,:0,:0},perStemAugBare:{},perStemAugFull:{}};if(!T){const B=["","","","",""].map(Y=>({name:Y,value:0,color:"#999999"}));return{overlay:k,totals:B,perTenGod:{:{a:"",b:"",aVal:0,bVal:0},:{a:"",b:"",aVal:0,bVal:0},:{a:"",b:"",aVal:0,bVal:0},:{a:"",b:"",aVal:0,bVal:0},:{a:"",b:"",aVal:0,bVal:0}},PerTenGodSub:{:0,:0,:0,:0,:0,:0,:0,:0,:0,:0},elementScoreRaw:b,deukFlags:{:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1}},perStemElement:{},perStemElementScaled:{},stemScoreRaw:{},elementPercent100:{:0,:0,:0,:0,:0}}}const A=Ga(S[2]),M=n??A,R=M===""||M===""?"":M===""||M===""?"":M===""||M===""?"":M===""||M===""?"":"",N=[{val:0},{val:0},{val:0},{val:0}],D=[[],[],[],[]];for(const B of S){if(!B)continue;const Y=B.charAt(0),ie=B.charAt(1);_[Y]=(_[Y]??0)+50;const fe=x[ie];fe&&(_[fe]=(_[fe]??0)+50)}for(let B=0;B<4;B++){const Y=S[B];if(!Y||Y.length<2)continue;const ie=$g[B],fe=Ga(Y),ce=Vo(Y),xe=m[ie],ke=qo(fe);ke&&(b[ke]+=xe.stem,N[B]={stem:fe,el:ke,pol:Ig(fe),val:xe.stem});const je=Zo(ce);je&&(b[je]+=xe.branch,D[B].push({el:je,pol:zg(ce),val:xe.branch}))}for(let B=0;B<4;B++){const Y=S[B];if(!Y||Y.length<2)continue;const ie=$g[B],fe=p[Y]??0;if(fe===0)continue;const ce=Ga(Y),xe=qo(ce);if(!xe)continue;const ke=m[ie].stem*fe;b[xe]+=ke,N[B].val+=ke}for(let B=0;B<4;B++){const Y=S[B];if(!Y||Y.length<2)continue;const ie=Vo(Y),fe=Zo(ie);if(!fe)continue;const ce=m[$g[B]].branch,xe=zg(ie);let ke=0;const je=[B];B-1>=0&&je.push(B-1),B+1<=3&&je.push(B+1),B-2>=0&&je.push(B-2),B+2<=3&&je.push(B+2);const Me=Array.from(new Set(je));for(const Ee of Me){if(!S[Ee]||S[Ee].length<2)continue;const Be=Ga(S[Ee]),Ce=qo(Be);if(!Ce||Ce!==fe)continue;const Le=Ig(Be)===xe,Ue=Math.abs(Ee-B),me=k$(Ue,Le);ke+=ce*me}ke!==0&&(b[fe]+=ke,D[B].push({el:fe,pol:xe,val:ke}))}for(let B=0;B<4;B++){const Y=S[B];if(!Y||Y.length<2)continue;const ie=Ga(Y),fe=qo(ie);if(!fe)continue;let ce=0;const xe=Vo(S[B]),ke=Zo(xe);ke&&(ce+=yf[vf(fe,ke)]);const je=B===0?[1]:B===3?[2]:[B-1,B+1];for(const Ee of je){const Be=Ga(S[Ee]),Ce=qo(Be);Ce&&(ce+=yf[vf(fe,Ce)])}const Me=N[B].val;if(Me!==0&&ce!==0){const Ee=Math.round(Me*(1+ce)*10)/10,Be=Ee-Me;b[fe]+=Be,N[B].val=Ee}}for(let B=0;B<4;B++){const Y=S[B];if(!Y||Y.length<2)continue;const ie=Vo(Y),fe=Zo(ie);if(!fe)continue;let ce=0;const xe=Ga(S[B]),ke=qo(xe);ke&&(ce+=yf[vf(fe,ke)]);const je=B===0?[1]:B===3?[2]:[B-1,B+1];for(const Ee of je){if(!S[Ee]||S[Ee].length<2)continue;const Be=Vo(S[Ee]),Ce=Zo(Be);Ce&&(ce+=yf[vf(fe,Ce)])}const Me=D[B].reduce((Ee,Be)=>Ee+Be.val,0);if(Me!==0&&ce!==0){const Be=Math.round(Me*(1+ce)*10)/10-Me;b[fe]+=Be,D[B].length>0&&(D[B][0].val+=Be)}}l&&GP(S,b);const C={dae:{stem:.04,branch:.04},se:{stem:.03,branch:.03},wol:{stem:.02,branch:.02},il:{stem:.01,branch:.01}},G=[];if(!(!f||f.tab==="")){let B=function(Y,ie){const fe=Y?He(Y):"";if(!fe||fe.length<2)return;const ce=Ga(fe),xe=Vo(fe),ke=qo(ce),je=Zo(xe),Me=Math.max(1,(b.??0)+(b.??0)+(b.??0)+(b.??0)+(b.??0)),Ee=C[ie];if(ke){const Be=Math.round(Me*Ee.stem);b[ke]+=Be,G.push({stem:ce,el:ke,pol:Ig(ce),val:Be})}if(je){const Be=Math.round(Me*Ee.branch);b[je]+=Be,G.push({el:je,pol:zg(xe),val:Be})}};B(f.dae,"dae"),(f.tab===""||f.tab===""||f.tab==="")&&B(f.se,"se"),(f.tab===""||f.tab==="")&&B(f.wol,"wol"),f.tab===""&&B(f.il,"il")}const H={:0,:0,:0,:0,:0};Object.entries(b).forEach(([B,Y])=>{const ie=te(B,R);H[ie]+=Y});const V=["","","","",""],W=YS(V.map(B=>H[B])),re=Wk(M),ee=V.map((B,Y)=>({name:B,value:W[Y],color:re[B]})),q={:0,:0,:0,:0,:0,:0,:0,:0,:0,:0};function te(B,Y){return B===Y?"":dm[Y]===B?"":cd[Y]===B?"":cd[B]===Y?"":bA[Y]===B?"":""}function oe(B,Y){switch(te(B,R)){case"":q.+=Y*.5,q.+=Y*.5;break;case"":q.+=Y*.5,q.+=Y*.5;break;case"":q.+=Y*.5,q.+=Y*.5;break;case"":q.+=Y*.5,q.+=Y*.5;break;case"":q.+=Y*.5,q.+=Y*.5;break}}Object.entries(b).forEach(([B,Y])=>{Y>0&&oe(B,Y)});const Se={:{a:"",b:"",aVal:0,bVal:0},:{a:"",b:"",aVal:0,bVal:0},:{a:"",b:"",aVal:0,bVal:0},:{a:"",b:"",aVal:0,bVal:0},:{a:"",b:"",aVal:0,bVal:0}};for(const B of V){const Y=ee.find(je=>je.name===B)?.value??0,ie=Se[B].a,fe=Se[B].b,ce=q[ie]??0,xe=q[fe]??0,ke=ce+xe;if(ke>0){const je=Math.floor(Y*ce/ke+.5),Me=Y-je;Se[B].aVal=je,Se[B].bVal=Me}else Se[B].aVal=Math.floor(Y/2+.5),Se[B].bVal=Y-Se[B].aVal}const{flags:X}=f$(S,b),ae={};N.forEach(B=>{if(B.stem&&B.el&&B.val){const Y=`${B.stem}${B.el}`;ae[Y]=(ae[Y]??0)+B.val}});for(let B=0;B<4;B++){const Y=S[B];if(!Y||Y.length<2)continue;const ie=Vo(Y),fe=x[ie],ce=Zo(ie);if(!fe||!ce)continue;const xe=`${fe}${ce}`,ke=D[B].reduce((je,Me)=>je+Me.val,0);ae[xe]=(ae[xe]??0)+ke}const J=["","","","","","","","","",""],ye={};J.forEach(B=>{ye[B]=0}),V.forEach(B=>{const Y=ee.find(Me=>Me.name===B)?.value??0,ie=qS(B,R),fe=Object.entries(ae).filter(([Me])=>Me.endsWith(ie)),ce=fe.map(([Me])=>Me),xe=fe.map(([,Me])=>Me),ke=Math.max(0,Math.round(Y*10)),je=j$(xe.length?xe:[1,1],ke);if(ce.length===2)ye[ce[0]]=(je[0]??Math.round(ke/2))/10,ye[ce[1]]=(je[1]??ke-(je[0]??0))/10;else if(ce.length===1)ye[ce[0]]=ke/10;else{const Me=ie===""?["",""]:ie===""?["",""]:ie===""?["",""]:ie===""?["",""]:["",""],Ee=Math.floor(ke/2),Be=ke-Ee;ye[Me[0]]+=Ee/10,ye[Me[1]]+=Be/10}});const K=["","","","",""],U={:0,:0,:0,:0,:0};for(const B of ee){const Y=qS(B.name,R);U[Y]+=B.value}const $=YS(K.map(B=>U[B])),F={:$[0],:$[1],:$[2],:$[3],:$[4]};return o&&console.log({elementScore:b,totals:ee,perTenGod:Se,perStemRaw:ae,perStemElementScaled:ye,elementPercent100:F}),{overlay:{totalsSub:q,perStemAugBare:ae,perStemAugFull:ye},totals:ee,perTenGod:Se,PerTenGodSub:q,stemScoreRaw:_,elementScoreRaw:b,deukFlags:X,perStemElement:ae,perStemElementScaled:ye,elementPercent100:F}}function N$(e){const t=e.reduce((f,m)=>f+m,0);if(t<=0)return e.map(()=>0);const n=e.map(f=>f*100/t),s=n.map(f=>Math.round(f));let l=100-s.reduce((f,m)=>f+m,0);const u=n.map((f,m)=>({i:m,f:f-Math.round(f)})).sort((f,m)=>m.f-f.f);for(let f=0;f<u.length&&l>0;f++)s[u[f].i]+=1,l-=1;return s}const ZS=["","","","",""];function O$(e,t){const n=[He(e[0]??""),He(e[1]??""),He(e[2]??""),He(e[3]??"")],{elementScoreRaw:s}=$b({pillars:n,criteriaMode:t?.criteriaMode??"modern",useHarmonyOverlay:t?.useHarmonyOverlay??!0,luck:void 0}),o=ZS.map(f=>s[f]??0),l=N$(o),u={:0,:0,:0,:0,:0};return ZS.forEach((f,m)=>{u[f]=l[m]}),u}function yA(e,t){const n=O$(e,t),s=He(e[2]??"").charAt(0),l={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}[s];if(!l)return 0;const u={:"",:"",:"",:"",:""},f=n[l]??0,m=n[u[l]]??0;return f+m*.7}const _f={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},xf={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},wf={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},D$=["","","","",""];function VS(e){return D$.includes(e)}const M$={:"",:"",:"",:"",:""},C$={:"",:"",:"",:"",:""},R$={:"",:"",:"",:"",:""},L$={:"",:"",:"",:"",:""},Ib={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},B$=["","","","","","","","","",""],P$={natal:50,dae:30,se:20,wol:7,il:3};function hm(e){if(!e)return null;const t=e.trim();if(["","","","","","","","","",""].includes(t))return t;if(_f[t])return _f[t];if(["","","","","","","","","","","",""].includes(t))return wf[t]??null;if(xf[t])return wf[xf[t]]??null;const n=t.charAt(0);return _f[n]?_f[n]:["","","","","","","","","",""].includes(n)?n:xf[n]?wf[xf[n]]??null:["","","","","","","","","","","",""].includes(n)?wf[n]??null:null}function $$(e,t){const n=Ib[e],s=Ib[t];if(!n||!s)return"";let o;s===n?o="":s===M$[n]?o="":s===C$[n]?o="":s===R$[n]?o="":s===L$[n]?o="":o="";const l=VS(e)===VS(t);switch(o){case"":return l?"":"";case"":return l?"":"";case"":return l?"":"";case"":return l?"":"";case"":return l?"":""}}function fm(e){const t=Object.entries(e),n=t.reduce((p,[,b])=>p+(b>0?b:0),0);if(n<=0)return Object.fromEntries(t.map(([p])=>[p,0]));const s=t.map(([p,b])=>[p,(b>0?b:0)*100/n]),o=s.map(([p,b])=>[p,Math.round(b)]);let l=o.reduce((p,[,b])=>p+b,0);const u=s.map(([p,b])=>[p,b-Math.round(b)]).sort((p,b)=>b[1]-p[1]),f=Object.fromEntries(o.map(([p,b])=>[p,b]));let m=0;for(;l<100&&m<u.length;)f[u[m][0]]+=1,l+=1,m+=1;return f}function KS(e,t){const n={:0,:0,:0,:0,:0,:0,:0,:0,:0,:0};for(const[s,o]of Object.entries(e??{})){if(o<=0)continue;const l=hm(s);if(!l)continue;const u=$$(t,l);n[u]+=o}return fm(n)}function I$(e){return{:{a:"",b:"",aVal:e.,bVal:e.},:{a:"",b:"",aVal:e.,bVal:e.},:{a:"",b:"",aVal:e.,bVal:e.},:{a:"",b:"",aVal:e.,bVal:e.},:{a:"",b:"",aVal:e.,bVal:e.}}}function WS(e){const t={};for(const[n,s]of Object.entries(e??{})){if(s<=0)continue;const o=hm(n);o&&(t[o]=(t[o]??0)+s)}return t}function XS(e){const n={...{:0,:0,:0,:0,:0,:0,:0,:0,:0,:0}};for(const s of B$){const o=Ib[s],l=`${s}${o}`;n[l]=Math.max(0,Math.round(e[s]??0))}return n}function JS(e){const t=["","","","",""],n={:0,:0,:0,:0,:0};for(const s of t)typeof e[s]=="number"&&(n[s]=e[s]);return n}function z$(e,t){const n=t?.dae?Sf(t.dae):{},s=t?.se?Sf(t.se):{},o=t?.wol?Sf(t.wol):{},l=t?.il?Sf(t.il):{},u={},f=[{kind:"natal",bare:e},{kind:"dae",bare:n},{kind:"se",bare:s},{kind:"wol",bare:o},{kind:"il",bare:l}];for(const{kind:p,bare:b}of f){const _=P$[p];if(!b||Object.keys(b).length===0)continue;const x=fm(b);for(const[S,T]of Object.entries(x))u[S]=(u[S]??0)+T*_}const m=Object.values(u).reduce((p,b)=>p+b,0);if(m>0)for(const p of Object.keys(u))u[p]=u[p]/m*100;return u}function U$(e){if(!e)return[];const t=hm(e.charAt(0)),n=hm(e.charAt(1));return[t,n].filter(Boolean)}function Sf(e){const t=U$(e),n={};for(const s of t)n[s]=(n[s]??0)+1;return n}function vA(e){const{natal:t,tab:n,chain:s,hourKey:o="unified"}=e,l=[He(t[0]??""),He(t[1]??""),He(t[2]??""),He(t[3]??"")],u=l[2]?.charAt(0)??"",{hiddenStemMode:f,hiddenStem:m}=ib,p=f==="classic"?"classic":"hgc",b=s?{tab:n,dae:s.dae?He(s.dae):void 0,se:(n===""||n===""||n==="")&&s.se?He(s.se):void 0,wol:(n===""||n==="")&&s.wol?He(s.wol):void 0,il:n===""&&s.il?He(s.il):void 0}:{tab:n},_=$b({pillars:l,dayStem:u,mode:p,criteriaMode:"modern",useHarmonyOverlay:!0,luck:b}),x=$b({pillars:l,dayStem:u,mode:p,criteriaMode:"modern",useHarmonyOverlay:!0,luck:{tab:"",dae:void 0,se:void 0,wol:void 0,il:void 0}}),S=WS(_.perStemElementScaled),T=n===""?S:z$(S,s),k=fm(T),A=KS(T,u),M=I$(A),R=XS(k),N=WS(x.perStemElementScaled),D=KS(N,u),C=fm(N),G=XS(C);return{elementScoreRaw:_.elementScoreRaw,elementPercent100:_.elementPercent100,totals:_.totals,perStemElementScaled:_.perStemElementScaled,dayStem:u,mergedStems:k,perTenGodSub:A,perTenGod:M,overlay:{totalsSub:A,perStemAugBare:T,perStemAugFull:R},natalFixed:{elementScoreRaw:JS(x.elementScoreRaw),elementPercent100:JS(x.elementPercent100),totalsSub:D,overlay:{totalsSub:D,perStemAugBare:N,perStemAugFull:G}}}}const Ci={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Ts={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},H$={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};function Ri(e){return["","","","",""].includes(e)}function G$(e){return["","","","","",""].includes(e)}const _A={:"",:"",:"",:"",:""},ev={:"",:"",:"",:"",:""},xA={:"",:"",:"",:"",:""},wA={:"",:"",:"",:"",:""},Ug=e=>({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""})[e]??e,Oi=e=>e&&e.length>=1?e.charAt(0):"",Nn=e=>e&&e.length>=2?e.charAt(1):"",F$=e=>Array.from(new Set(e)),Y$={:{:{stem:"",w:10},:{stem:"",w:20}},:{:{stem:"",w:9},:{stem:"",w:3},:{stem:"",w:18}},:{:{stem:"",w:10},:{stem:"",w:7},:{stem:"",w:16}},:{:{stem:"",w:9},:{stem:"",w:20}},:{:{stem:"",w:7},:{stem:"",w:3},:{stem:"",w:18}},:{:{stem:"",w:10},:{stem:"",w:7},:{stem:"",w:16}},:{:{stem:"",w:10},:{stem:"",w:9},:{stem:"",w:11}},:{:{stem:"",w:9},:{stem:"",w:3},:{stem:"",w:18}},:{:{stem:"",w:10},:{stem:"",w:7},:{stem:"",w:16}},:{:{stem:"",w:9},:{stem:"",w:20}},:{:{stem:"",w:7},:{stem:"",w:3},:{stem:"",w:18}},:{:{stem:"",w:16},:{stem:"",w:7},:{stem:"",w:16}}},q$={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};function Z$(e,t){const n=q$[e];if(!n)return!1;const o=as(t).find(f=>f.name===n);if(!o)return!1;const l=new Date(o.date);return Math.floor((t.getTime()-l.getTime())/(1e3*60*60*24))<=12}const V$={:["","",""],:["","",""],:["","",""],:["","",""]};function K$(e,t){const n=V$[e];return n?n.filter(s=>s!==e).every(s=>t.includes(s)):!1}function rs(e,t){const n=Ci[e],s=Ci[t];if(!n||!s)return"";let o;s===n?o="":s===_A[n]?o="":s===ev[n]?o="":s===xA[n]?o="":s===wA[n]?o="":o="";const l=Ri(e)===Ri(t);switch(o){case"":return l?"":"";case"":return l?"":"";case"":return l?"":"";case"":return l?"":"";case"":return l?"":""}}function W$(e,t){const n=Ci[e],s=Ts[t];if(!n||!s)return"";let o;s===n?o="":s===_A[n]?o="":s===ev[n]?o="":s===xA[n]?o="":s===wA[n]?o="":o="";const l=Ri(e)===G$(t);switch(o){case"":return l?"":"";case"":return l?"":"";case"":return l?"":"";case"":return l?"":"";case"":return l?"":""}}function X$(e){return{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}[e]??""}function zb(e,t){const n=X$(e),s=Ri(e),o={:"",:"",:"",:"",:""},l={:"",:"",:"",:"",:""};let u;t===n?u="":o[n]===t?u="":o[t]===n?u="":l[n]===t?u="":l[t]===n?u="":u="";const f=s===Ri(J$(t));switch(u){case"":return f?"":"";case"":return f?"":"";case"":return f?"":"";case"":return f?"":"";case"":return f?"":""}}function J$(e){return{:"",:"",:"",:"",:""}[e]}const Hg={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},SA={:"",:"",:"",:"",:""},EA={:"",:"",:"",:""},Q$=[{a:"",b:"",to:""},{a:"",b:"",to:""},{a:"",b:"",to:""},{a:"",b:"",to:""},{a:"",b:"",to:""}],e8=e=>{const t={:0,:0,:0,:0,:0};for(const n of e){const s=Oi(n),o=Nn(n),l=Ci[s],u=Ts[o];l&&(t[l]+=10),u&&(t[u]+=6)}return t};function t8(e){const{pillars:t,dayStem:n,monthBranch:s,mapping:o}=e,[l,u,f,m]=(t??[]).slice(0,4),p=[Oi(l),Oi(u),Oi(f),Oi(m)].filter(Boolean),b=[Nn(l),Nn(u),Nn(f),Nn(m)].filter(Boolean),_=Ci[n],x=p.map(he=>rs(n,he)),S=[],T=he=>p.filter(Pe=>Pe===he).length,k=he=>b.filter(Pe=>Pe===he).length,A=he=>he.every(Pe=>b.includes(Pe)),M=he=>x.some(Pe=>he.includes(Pe)),R=Oi(u),N=he=>Ri(he),D=()=>{const he=p.map(Pe=>Ci[Pe]);return he.length===4&&he.every(Pe=>Pe===he[0])},C=()=>{if(p.length!==4)return!1;const he=p.map(N),Pe=he[0]&&!he[1]&&he[2]&&!he[3],Fe=!he[0]&&he[1]&&!he[2]&&he[3];return Pe||Fe};Ri(n)&&SA[n]===s&&S.push("");const G=[["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""]];for(const[he,Pe]of G)if(n===he&&s===Pe){S.push("");break}!Ri(n)&&EA[n]===s&&S.push("");const H=Hg[n];H&&Nn(f)===H&&_===Ts[Nn(f)]&&S.push(""),H&&Nn(m)===H&&_===Ts[Nn(m)]&&S.push("");const V=[l,u,f,m].map(c8),W=[l,u,f,m].map(u8);for(const he of V);for(const he of W);const re=o==="hgc"?wm:xm;function ee(he){return(re[he]??[]).filter(Pe=>["","","","","","","","","",""].includes(Pe))}const q=[l,u,f,m].filter(Boolean),oe=q.flatMap(he=>[he.charAt(0),he.charAt(1)]).flatMap(he=>{try{if(["","","","","","","","","",""].includes(he))return[rs(n,he)];if(["","","","","","","","","","","",""].includes(he)){const Pe=W$(n,he),Fe=ee(he).map(Ge=>rs(n,Ge));return[Pe,...Fe]}return[]}catch{return[]}}),Se=he=>oe.some(Pe=>he.includes(Pe)),X=(he,Pe)=>{const Fe=[],Ge=[];for(const et of q){const qt=et.charAt(0),Sn=et.charAt(1);Fe.push(rs(n,qt));const En=Ts[Sn];En?Ge.push(zb(n,En)):Ge.push(null)}const st=(et,qt)=>!!et&&!!qt&&(he.includes(et)&&Pe.includes(qt)||Pe.includes(et)&&he.includes(qt));for(let et=0;et<Fe.length;et++)if(st(Fe[et],Ge[et]))return!0;for(let et=0;et<Fe.length-1;et++)if(st(Fe[et],Fe[et+1])||st(Ge[et],Ge[et+1]))return!0;return!1},ae={:["",""],:["",""],:["",""],:["",""]};Se([...ae.])&&Se([...ae.])&&X([...ae.],[...ae.])&&S.push(""),Se([...ae.])&&Se([...ae.])&&X([...ae.],[...ae.])&&S.push("");const J=he=>x.filter(Pe=>he.includes(Pe)).length,ye=J(["",""]),K=J([""]),U=J([""]),$=J(["",""]),F=J(["",""]),Z=J(["",""]);K>=1&&ye>=1&&ye>=K&&U<=K&&S.push("");const B=J([""]);B>=1&&$>=1&&B>=$&&S.push(""),x.includes("")&&$>=1&&S.push("");const ie=e8(t),fe=Object.entries(ie).sort((he,Pe)=>Pe[1]-he[1]),ce=fe[0];if(ce&&ce[1]>=60&&S.push(`(${ce[0]})`),fe.length>=2){const[he,Pe]=fe[0],[,Fe]=fe[1];Pe>=75&&Pe-Fe>=12&&_!==he&&S.push(`(${he})`)}for(const he of Q$){const Pe=p.includes(he.a),Fe=p.includes(he.b);if(!Pe||!Fe)continue;const Ge=he.to,st=ie[Ge]??0,et=Ci[he.a],qt=Ci[he.b],Sn=Math.max(ie[et]??0,ie[qt]??0),En=Ts[s]===Ge,yr=Object.entries(ie).sort((Mt,gn)=>gn[1]-Mt[1])[0]?.[0]===Ge;let un=!1;st>=60&&(En||yr)&&Sn<=20&&st-Sn>=20&&(S.push(`(${Ge})`),un=!0),!un&&st>=50&&(En||yr)&&Sn<=25&&(S.push(`(${Ge})`),un=!0),!un&&st>=35&&S.push(`(${Ge})`)}const xe=`${Oi(m)}${Nn(m)}`;["",""].includes(n)&&["","",""].includes(xe)&&S.push(""),["","","",""].includes(Nn(m))&&S.push(""),["",""].includes(n)&&(Nn(f)===""||Nn(u)==="")&&!b.includes("")&&S.push("");const ke=p.some(he=>he===""||he===""),je=b.some(he=>he===""||he==="");["",""].includes(Nn(f))&&!ke&&!je&&S.push(""),["","",""].every(he=>p.includes(he))&&S.push(""),["","",""].every(he=>p.includes(he))&&S.push(""),["","",""].every(he=>p.includes(he))&&S.push("");const Me=Object.values(ie).sort((he,Pe)=>Pe-he);Me.length>=3&&Me[0]-Me[2]<=8&&Me[0]+Me[1]+Me[2]>=80&&S.push(""),F>=1&&Z>=1&&Math.abs(F-Z)<=1&&S.push(""),A(["","","",""])&&S.push(""),A(["","","",""])&&S.push(""),A(["","","",""])&&S.push(""),b.length===4&&b.every(he=>he===b[0])&&S.push(""),p.length===4&&D()&&C()&&S.push(""),t.every(he=>he&&he===t[0])&&S.push(""),p.length===4&&p.every(he=>he===p[0])&&b.length===4&&b.every(he=>he===b[0])&&S.push(""),ye>=1&&(Nn(f)===Hg[n]||Nn(m)===Hg[n])&&S.push(""),T("")>=3&&A(["","",""])&&["","",""].includes(Nn(f))&&S.push("");const Be=n===""||n==="",Ce=[["","",""],["","",""]],Le=[["","",""],["","",""]];Be&&(Ce.some(he=>A(he))||Le.some(he=>A(he)))&&S.push("");const Ue=new Set(["","","","","",""]),me=`${Oi(f)}${Nn(f)}`;if(Ue.has(me)&&k("")>=2&&(M(["",""])||b.includes("")||b.includes("")||M(["",""])||S.push("")),new Set(["","","","","",""]).has(me)&&k("")>=2&&b.includes("")&&S.push(""),n===""&&`${Oi(m)}${Nn(m)}`==""){const he=rs(n,R);!["","","",""].includes(he)&&M(["",""])&&!b.includes("")&&!b.includes("")&&S.push("")}return new Set(["","",""]).has(me)&&`${Oi(m)}${Nn(m)}`==""&&!b.includes("")&&!M(["",""])&&S.push(""),me===""&&k("")+k("")>=2&&S.push(""),(me===""||me==="")&&k("")>=2&&!M(["",""])&&!b.includes("")&&S.push(""),n===""&&A(["","",""])&&S.push(""),me===""&&`${Oi(m)}${Nn(m)}`==""&&S.push(""),F$(S)}function n8(e){const{dayStem:t,monthBranch:n,date:s,pillars:o,emittedStems:l=[],otherBranches:u=[],isNeutralized:f,mapping:m}=e,p=[],b=Y$[n];if(!b)return{:"-",:"-",:"-",:"-",:"-",:[],reason:["  "]};const _={:b.?{stem:Ug(b..stem),w:b..w}:void 0,:b.?{stem:Ug(b..stem),w:b..w}:void 0,:{stem:Ug(b..stem),w:b..w}},x=_..stem;let S=x;if(["","","",""].includes(n))S=_..stem,p.push(":   ");else if(["","","",""].includes(n)){const V=[];_.&&V.push({from:"",stem:_..stem,w:_..w,emitted:l.includes(_..stem)}),_.&&V.push({from:"",stem:_..stem,w:_..w,emitted:l.includes(_..stem)}),V.push({from:"",stem:_..stem,w:_..w,emitted:l.includes(_..stem)});const W=V.filter(re=>re.emitted);W.length===1?(S=W[0].stem,p.push(`: ${W[0].from}  `)):W.length>1?(W.sort((re,ee)=>ee.w-re.w),S=W[0].stem,p.push(`:      ${W[0].from} `)):(S=_..stem,p.push(":    "))}else["","","",""].includes(n)&&(K$(n,u)&&_.?(S=_..stem,p.push(":     ")):Z$(n,s)&&_.?(S=_..stem,p.push(":  +12    ")):(S=_..stem,p.push(":  +12    ")));const T=S;let k="";const A=Ci[T];if(A){const V=Object.entries(ev).find(([,W])=>W===A)?.[0]??null;V&&(k=Object.entries(Ci).find(([re,ee])=>ee===V&&Ri(re)===Ri(T))?.[0]??"")}f?.(T)&&p.push(":   / ");let M="-";const R=rs(t,T),D=[["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""]].some(([V,W])=>V===t&&W===n),C=Ri(t)&&SA[t]===n,G=!Ri(t)&&EA[t]===n;R===""||R===""?D?(M="",p.push(": /   ")):C?(M="",p.push(":    ")):G?(M="",p.push(":    ")):p.push(": /  "):R===""?M="()":M={:"",:"",:"",:"",:"",:"",:"",:""}[R]??"-";const H=t8({pillars:o,dayStem:t,monthBranch:n,mapping:m});return{:x,:S,:T,:k,:M,:H,reason:p}}const Re=(e,t)=>`${e}+${t}`,Er=(e,t,n)=>`${e}+${t}+${n}`,r8={[Re("","")]:[""],[Er("","","")]:void 0,[Re("","")]:["",""],[Re("","")]:["",""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:["",""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Er("","","")]:["",""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:["",""],[Re("","")]:["",""],[Re("","")]:[""],[Re("","")]:["",""],[Re("","")]:["",""],[Re("","")]:["",""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:["",""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:["",""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""]},i8={[Er("","","")]:[""],[Er("","","")]:[""],[Er("","","")]:[""],[Er("","","")]:[""],[Er("","","")]:[""],[Er("","","")]:[""],[Er("","","")]:[""],[Er("","","")]:[""],[Er("","","")]:[""],[Er("","","")]:[""],[Er("","","")]:["",""]};function s8(){const e={},t={},n=/[]/g;for(const[s,o]of Object.entries(r8)){if(!o)continue;const l=s.match(n);if(!l||l.length<2)continue;const[u,f]=l;e[s]=o.map(m=>`${u}X${f}_${m}`)}for(const[s,o]of Object.entries(i8)){if(!o)continue;const l=s.match(n);if(!l||l.length<3)continue;const[u,f,m]=l;t[s]=o.map(p=>`${u}X${f}X${m}_${p}`)}return{newPairs:e,newTris:t}}const{newPairs:Gg,newTris:Fg}=s8();function a8(e){const[t,n,s,o]=e,l=S=>Oi(S),u=l(o),f=l(s),m=l(n),p=l(t),b=[],_=[[u,f],[f,m],[m,p]];for(const[S,T]of _){if(!S||!T)continue;const k=Re(S,T),A=Gg[k];A&&A.length&&b.push(...A);const M=Re(T,S);M!==k&&Gg[M]&&b.push(...Gg[M])}const x=[[u,f,m],[f,m,p]];for(const[S,T,k]of x){if(!S||!T||!k)continue;const A=Er(S,T,k),M=Fg[A];M&&M.length&&b.push(...M);const R=Er(k,T,S);R!==A&&Fg[R]&&b.push(...Fg[R])}return Array.from(new Set(b))}const o8={:!0,:!1,:!0,:!1,:!0,:!1,:!0,:!1,:!0,:!1},l8={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};function c8(e){return e?.charAt(0)??""}function u8(e){return e?.charAt(1)??""}function d8(e,t,n){const[s,o,l,u]=(e??[]).slice(0,4),f=le=>(le?.length??0)>=1?le.charAt(0):"",m=le=>(le?.length??0)>=2?le.charAt(1):"",p=[s,o,l,u].map(f).filter(Boolean),b=[s,o,l,u].map(m).filter(Boolean),_=f(l),x=o8[_]??!1,S=new Set,T=t==="classic"?xm:wm,k=new Set(["","","","","","","","","",""]),A=le=>(T[le]??[]).filter(he=>k.has(he)),M=(le,he)=>{const Pe=Ts[he];if(!Pe)throw new Error(`Unknown branch main element: ${he}`);return zb(le,Pe)},R={:0,:0,:0,:0,:0};for(const le of p){const he=Ci[le];he&&(R[he]+=10)}const N=[];for(const le of b){const he=H$[le];he&&N.push(he);const Pe=Ts[le];Pe&&(R[Pe]+=6)}const C=[...p,...N].map(le=>rs(_,le)),G={:["",""],:["",""],:["",""],:["",""],:["",""]},H=le=>C.filter(he=>he===le).length,V=le=>C.filter(he=>G[le].includes(he)).length,W=b[1],re=!!_&&l8[_]===W,ee=n.elementPercent100;ee.>=20&&ee.>=20&&ee.>=15&&S.add("");const q=[s,o,l,u].filter(Boolean),te=[];for(const le of q){const he=le.charAt(0),Pe=le.charAt(1);te.push(rs(_,he)),te.push(M(_,Pe))}const oe=(le,he)=>{const Pe=(Fe,Ge)=>!!Fe&&!!Ge&&le.includes(Fe)&&he.includes(Ge)||he.includes(Fe)&&le.includes(Ge);for(let Fe=0;Fe+1<te.length;Fe+=2)if(Pe(te[Fe],te[Fe+1]))return!0;return!1},Se=le=>te.some(he=>le.includes(he)),X=H("")+H(""),ae=H(""),J=V(""),ye=V(""),K=oe(["",""],["",""]);if((ae>=1||X>=2)&&J>=1&&X>J&&ye<=1&&K&&S.add(""),Se(G.)&&Se(G.)&&oe(G.,G.)){const le=C.includes("");S.add(le?"":"")}V("")>=2&&V("")>=2&&Math.abs(V("")-V(""))<=1&&V("")<=1&&V("")<=1&&S.add("");const U=H(""),$=H(""),F=H("")+H(""),Z=H("")+H(""),B=V("");$>=2&&F>=1&&R.+R.>=20&&S.add(""),$>=2&&Z>=1&&R.+R.>=20&&S.add(""),$>=2&&Z>=1&&R.+R.>=20&&oe([""],["",""])&&B<=1&&S.add(""),U>=2&&Z>=1&&R.+R.>=20&&oe([""],["",""])&&B<=1&&S.add("");const Y=(le,he)=>{const Pe=Ci[le],Fe=Ts[he];return!!Pe&&!!Fe&&Pe===Fe},ie=[s,o,l,u].filter(Boolean),fe=m(l),ce=Y(_,fe),xe=ie.map(le=>le.charAt(0)).filter(le=>["",""].includes(rs(_,le)));let ke=!1;for(const le of ie){const he=le.charAt(0),Pe=le.charAt(1);if(xe.includes(he)&&Y(he,Pe)){ke=!0;break}}ce&&ke&&S.add(""),V("")>=3&&V("")>=.5*(V("")+V("")+V("")+V(""))&&S.add(""),V("")>=3&&V("")>=.5*(V("")+V("")+V("")+V(""))&&S.add(""),V("")>=3&&V("")>=1&&S.add(""),V("")>=3&&V("")+V("")<=1&&S.add("");const je=H("");V("")+V("")>=2&&je===1&&V("")>=1&&S.add(""),je>=2&&F+V("")>=3&&S.add("");const Me=U+$;(U>=2||Me>=2)&&Z>=1&&Me>Z&&S.add(""),$>=2&&Z>=1&&Me>Z&&S.add("");const Ee=H(""),Be=H("");Ee>=2&&je+Be>=1&&S.add(""),Ee>=2&&je+Be===0&&S.add(""),x&&Ee>=2&&je>=1&&S.add(""),!x&&Ee>=2&&je>=1&&S.add(""),H("")>=2&&H("")>=1&&S.add(""),H("")>=1&&H("")>=1&&oe([""],[""])&&S.add(""),re&&je>=1&&V("")+V("")>=2&&S.add("");const Ce=[m(s),m(o),m(l),m(u)].filter(Boolean),Le=[s?.charAt(0),o?.charAt(0),u?.charAt(0)].filter(Boolean),Ue=new Set(Le.map(le=>rs(_,le))),me=new Set(Ce.flatMap(le=>{const he=Ts[le];return he?[zb(_,he)]:[]})),Ie=new Set(Ce.flatMap(le=>A(le).map(he=>rs(_,he))));return["","","","",""].forEach(le=>{const he=G[le],Pe=he.some(st=>Ue.has(st)),Fe=he.some(st=>me.has(st)),Ge=he.some(st=>Ie.has(st));!Pe&&!Fe&&!Ge?S.add(`${le}`):!Pe&&!Fe&&Ge&&S.add(`${le}`)}),Array.from(S)}function h8(e){const{pillars:t,tab:n,birthDate:s,emittedStems:o,otherBranches:l,isNeutralized:u,mapping:f,unified:m}=e,[p,b,_,x]=t,S=oe=>oe&&oe.length>=1?oe.charAt(0):"",T=oe=>oe&&oe.length>=2?oe.charAt(1):"",k=T(b),A=S(_),M=s instanceof Date&&!Number.isNaN(s.getTime())?s:new Date,R=[S(p),S(b),S(_),S(x)].filter(oe=>!!(oe&&oe.length===1)),N=[T(p),T(_),T(x)].filter(oe=>!!(oe&&oe.length===1)),D=n8({dayStem:A,monthBranch:k,date:M,pillars:t,emittedStems:o??R,otherBranches:l??N,isNeutralized:u,mapping:f}),C=[` : ${D.||"-"}`,` : ${D.||"-"}`,` : ${D.||"-"}`,` : ${D.||"-"}`],G=[` : ${D.||"-"}`],H=Array.isArray(D.)&&D..length>0?D..map(oe=>` : ${oe}`):[" : -"],V=a8(t),W=[...V.length?V.map(oe=>`${oe}`):[]],ee=[...d8(t,f,m)],q=({text:oe,color:Se})=>{const X={violet:"bg-violet-100 text-violet-800 border-violet-200 dark:bg-violet-900/30 dark:text-violet-200 dark:border-violet-800",amber:"bg-amber-100 text-amber-800 border-amber-200 dark:bg-amber-900/30 dark:text-amber-200 dark:border-amber-800",blue:"bg-blue-100 text-blue-800 border-blue-200 dark:bg-blue-900/30 dark:text-blue-200 dark:border-blue-800",green:"bg-green-100 text-green-800 border-green-200 dark:bg-green-900/30 dark:text-green-200 dark:border-green-800",red:"bg-red-100 text-red-800 border-red-200 dark:bg-red-900/30 dark:text-red-200 dark:border-red-800"};return y.jsx("span",{className:`inline-block text-xs px-2 py-1 rounded-full border whitespace-nowrap ${X[Se]}`,title:oe,children:oe})},te=({children:oe})=>y.jsx("li",{className:"!flex flex-wrap gap-1 border border-gray-700 dark:border-gray-200 p-2 rounded-sm",children:oe});return y.jsxs("div",{className:"p-4 rounded-xl bg-neutral-100 dark:bg-neutral-900 space-y-3 text-sm","data-revkey":`gyeok:${n}|${t.join("")}|${C.join(",")}|${G.join(",")}|${H.join(",")}`,children:[y.jsx("div",{className:"font-bold text-base",children:"   "}),y.jsxs("ul",{className:"space-y-1",children:[y.jsx(te,{children:C.map(oe=>y.jsx(q,{text:oe,color:"violet"},oe))}),y.jsx(te,{children:G.map(oe=>y.jsx(q,{text:oe,color:"amber"},oe))}),y.jsx(te,{children:H.map(oe=>y.jsx(q,{text:oe,color:"blue"},oe))}),y.jsx(te,{children:W.map(oe=>y.jsx(q,{text:oe,color:"green"},oe))}),y.jsx(te,{children:ee.map(oe=>y.jsx(q,{text:oe,color:"red"},oe))})]}),D.reason.length>0&&y.jsxs("div",{className:"mt-2 text-xs text-neutral-600 dark:text-neutral-400",children:[" ",D.reason.join(" / ")]})]})}const hc={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},fc={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Ec={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},TA={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Ef={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},f8=["","","","",""];function QS(e){return f8.includes(e)}const m8={:"",:"",:"",:"",:""},p8={:"",:"",:"",:"",:""},g8={:"",:"",:"",:"",:""},b8={:"",:"",:"",:"",:""};function ud(e){if(!e)return null;const t=e.trim();if(["","","","","","","","","",""].includes(t))return t;if(hc[t])return hc[t];if(["","","","","","","","","","","",""].includes(t))return Ef[t]??null;if(fc[t])return Ef[fc[t]]??null;const n=t.charAt(0);return hc[n]?hc[n]:["","","","","","","","","",""].includes(n)?n:fc[n]?Ef[fc[n]]??null:["","","","","","","","","","","",""].includes(n)?Ef[n]??null:null}function y8(e,t){const n=Ec[e],s=Ec[t];if(!n||!s)return"";let o;s===n?o="":s===m8[n]?o="":s===p8[n]?o="":s===g8[n]?o="":s===b8[n]?o="":o="";const l=QS(e)===QS(t);switch(o){case"":return l?"":"";case"":return l?"":"";case"":return l?"":"";case"":return l?"":"";case"":return l?"":""}}function v8(e){switch(e){case"":case"":return"";case"":case"":return"";case"":case"":return"";case"":case"":return"";case"":case"":return""}}function qm(e){const t=Object.entries(e),n=t.reduce((p,[,b])=>p+(b>0?b:0),0);if(n<=0)return Object.fromEntries(t.map(([p])=>[p,0]));const s=t.map(([p,b])=>[p,(b>0?b:0)*100/n]),o=s.map(([p,b])=>[p,Math.floor(b)]);let l=o.reduce((p,[,b])=>p+b,0);const u=s.map(([p,b])=>[p,b-Math.floor(b)]).sort((p,b)=>b[1]-p[1]),f=Object.fromEntries(o.map(([p,b])=>[p,b]));let m=0;for(;l<100&&m<u.length;)f[u[m][0]]+=1,l+=1,m+=1;return f}function _8(e){const t={:0,:0,:0,:0,:0};for(const[n,s]of Object.entries(e??{})){const o=Ec[ud(n)];o&&s>0&&(t[o]+=s)}return qm(t)}function x8(e,t){const n={:0,:0,:0,:0,:0,:0,:0,:0,:0,:0};for(const[s,o]of Object.entries(e??{})){if(o<=0)continue;const l=ud(s);if(!l)continue;const u=y8(t,l);n[u]+=o}return n}function w8(e){const t={:0,:0,:0,:0,:0};for(const[n,s]of Object.entries(e)){const o=v8(n);t[o]+=s}return qm(t)}function Yg(e){if(!e)return"";const t=e.replace(/[()[\]{}]/g,"").replace(/\s+/g,"").replace(/[:\-_.]/g,""),n=t.match(/([]).*?([])/);if(n)return`${n[1]}${n[2]}`;const s=t.match(/([]).*?([])/);return s?`${hc[s[1]]}${fc[s[2]]}`:""}function e2(e){const t=Array.isArray(e)?e.slice(0,4):[];for(;t.length<4;)t.push("");return t.map((n,s)=>{if(!n)return"";const o=n.replace(/[()[\]{}]/g,"").replace(/\s+/g,"").replace(/[:\-_.]/g,""),l=o.match(/([]).*?([])/);if(l)return`${l[1]}${l[2]}`;const u=o.match(/([]).*?([])/);return u?`${hc[u[1]]}${fc[u[2]]}`:s<=2?"--":""})}function S8(e,t){const n={:!1,:!1,:!1,:!1,:!1};for(const s of e){if(!s)continue;const o=Ec[s.charAt(0)];o&&(n[o]=!0);{const l=TA[s.charAt(1)];l&&(n[l]=!0)}}return n}function E8(e){const t={:0,:0,:0,:0,:0};for(const n of e){if(!n)continue;const s=Ec[n.charAt(0)],o=TA[n.charAt(1)];s&&(t[s]+=10),o&&(t[o]+=6)}return t}function qg(e){return e[0]?.length===2&&e[1]?.length===2&&e[2]?.length===2}const T8=["","","","","","","","","",""];function k8(e){const t={};for(const[n,s]of Object.entries(e??{})){if(s<=0)continue;const o=ud(n);o&&(t[o]=(t[o]??0)+s)}return t}function A8(e){const n={...{:0,:0,:0,:0,:0,:0,:0,:0,:0,:0}};for(const s of T8){const o=Ec[s],l=`${s}${o}`;n[l]=Math.max(0,Math.round(e[s]??0))}return n}const j8={natal:50,dae:30,se:20,wol:7,il:3};function N8(e){const t={};for(const{kind:s,bare:o}of e){const l=j8[s]??0;if(l<=0)continue;const u=qm(o);for(const[f,m]of Object.entries(u))t[f]=(t[f]??0)+m*l}const n=Object.values(t).reduce((s,o)=>s+o,0);if(n>0)for(const s of Object.keys(t))t[s]=t[s]/n*100;return t}function O8(e){if(!e)return[];const t=ud(e.charAt(0)),n=ud(e.charAt(1));return[t,n].filter(Boolean)}function Tf(e){const t=O8(e),n={};for(const s of t)n[s]=(n[s]??0)+1;return n}function D8({data:e,pillars:t,lunarPillars:n,daewoonGz:s}){const o=br(Ee=>Ee.settings),[l,u]=P.useState("   "),[f,m]=P.useState(""),[p,b]=P.useState(!0),{date:_,yearGZ:x,monthGZ:S,dayGZ:T}=hi(),k=P.useMemo(()=>He(x),[x]),A=P.useMemo(()=>He(S),[S]),M=P.useMemo(()=>He(T),[T]),R=wd(e,e?.mingSikType),N=P.useMemo(()=>{if(!R?.length)return 0;const Ee=R.findIndex((Be,Ce)=>{const Le=R[Ce+1]?.at;return _>=Be.at&&(!Le||_<Le)});return Ee!==-1?Ee:_<R[0].at?0:R.length-1},[R,_]),D=P.useMemo(()=>{const Ee=s??R?.[N]?.gz??"";return He(Ee)||null},[s,R,N]),{manualHour:C}=pd(),G=e.mingSikType??"/",H=P.useMemo(()=>e2(t),[t]),V=P.useMemo(()=>e2(n),[n]),W=P.useMemo(()=>{const Ee=[...H];return(!Ee[3]||Ee[3]==="")&&C&&(Ee[3]=C.stem+C.branch),Ee},[H,C]),re=P.useMemo(()=>{const Ee=[...V];return(!Ee[3]||Ee[3]==="")&&C&&(Ee[3]=C.stem+C.branch),Ee},[V,C]),ee=P.useMemo(()=>{const Ee=Number(e.birthDay?.slice(0,4)),Be=Number(e.birthDay?.slice(4,6)),Ce=Number(e.birthDay?.slice(6,8));if(!Number.isFinite(Ee)||!Number.isFinite(Be)||!Number.isFinite(Ce))return null;const Le=new Date(Ee,Be-1,Ce,12,0,0,0),Ue=Yg(ut(Le)||""),me=Yg(At(Le)||""),Ie=Yg(_t(Le,G)||"");return[Ue,me,Ie,""]},[e.birthDay,G]),q=qg(W),te=qg(re),[oe]=P.useState("solar"),Se=oe==="lunar"?te?"lunar":q?"solar":"lunar":q?"solar":te?"lunar":"solar",X=P.useMemo(()=>{const Be=[...Se==="lunar"?te?re:q?W:ee??["","","",""]:q?W:te?re:ee??["","","",""]];return(!Be[3]||Be[3]==="")&&C&&(Be[3]=C.stem+C.branch),Be},[Se,q,te,W,re,ee,C]),ae=P.useMemo(()=>C?C.stem+C.branch:X[3]||"",[C,X]),J=P.useMemo(()=>({dae:f!==""?D??null:null,se:f===""||f===""||f===""?k??null:null,wol:f===""||f===""?A??null:null,il:f===""?M??null:null}),[f,D,k,A,M]),ye=P.useMemo(()=>vA({natal:X,tab:f,chain:J,hourKey:ae}),[X,f,J,ae]),K=P.useMemo(()=>{if(!ye)return null;const Ee=k8(ye.perStemElementScaled),Be=J.dae?Tf(J.dae):{},Ce=J.se?Tf(J.se):{},Le=J.wol?Tf(J.wol):{},Ue=J.il?Tf(J.il):{},me=N8([{kind:"natal",bare:Ee},{kind:"dae",bare:Be},{kind:"se",bare:Ce},{kind:"wol",bare:Le},{kind:"il",bare:Ue}]),Ie=qm(me),le=A8(Ie),he=x8(me,ye.dayStem),Pe=w8(he),Fe=_8(me);return{perStemAugBare:me,perStemAugFull:le,elemPct100:Fe,totalsMain:Pe,totalsSub:he}},[ye,J]),U=P.useMemo(()=>S8(X),[X]),$=P.useMemo(()=>["","","","",""].some(Ee=>!U[Ee]),[U]),F=K?.elemPct100??ye?.elementPercent100??E8(X),Z=P.useMemo(()=>{if(!ye||!K)return[];const Ee=Wk(ye.dayStem);return Object.entries(K.totalsMain).map(([Be,Ce])=>({name:Be,value:Ce,color:Ee[Be]}))},[ye,K]),B=K?.elemPct100??{:0,:0,:0,:0,:0},Y=K?.totalsSub??null,ie=P.useMemo(()=>C?C.stem+C.branch:X[3]||"",[C,X]),fe=P.useMemo(()=>[f,D??"",k??"",A??"",M??"",_?.toISOString?.()??"",ie].join("|"),[f,D,k,A,M,_,ie]),ce=P.useMemo(()=>{const Ee=Y?Object.entries(Y).sort(([Ce],[Le])=>Ce.localeCompare(Le)).map(([Ce,Le])=>`${Ce}:${Le}`).join(","):"none",Be=Z.map(Ce=>`${Ce.name}:${Ce.value}`).join(",");return`${fe}||${X.join("")}||${Be}||${Ee}`},[fe,X,Z,Y]),xe=typeof _S=="function"?_S(X,ye?.totals):null,ke=P.useMemo(()=>{const Be=(xe?.ordered??[]).map(Ue=>{const me=Ue.element??"",Ie=/||wood/i.test(me)?"":/||fire/i.test(me)?"":/||earth/i.test(me)?"":/||metal/i.test(me)?"":/||water/i.test(me)?"":null,le=typeof Ue.score=="number"?Ue.score:Ie?F[Ie]??0:0,he=Array.isArray(Ue.reasons)?Ue.reasons:[];return{element:me,elNorm:Ie,score:le,reasons:he}}),Ce=Ue=>Ue?U[Ue]:!1,Le=p?Be.map(Ue=>Ue.elNorm&&!Ce(Ue.elNorm)?{...Ue,score:0,reasons:[...Ue.reasons,":    0"]}:Ue):Be;return Le.sort((Ue,me)=>{const Ie=Ce(Ue.elNorm)?1:0,le=Ce(me.elNorm)?1:0;return p&&Ie!==le?le-Ie:(me.score??0)!==(Ue.score??0)?(me.score??0)-(Ue.score??0):(Ue.elNorm??Ue.element).localeCompare(me.elNorm??me.element)}),Le},[xe,p,F,U]),je=P.useMemo(()=>Math.max(0,...ke.map(Ee=>Number.isFinite(Ee.score)?Ee.score:0)),[ke]);function Me(Ee){return yA(Ee,{criteriaMode:"modern",useHarmonyOverlay:!0})}return qg(X)?y.jsxs("div",{className:"space-y-4 mb-4",children:[y.jsx("div",{className:"flex gap-2 justify-center flex-wrap",children:S9.map(Ee=>y.jsx("button",{onClick:()=>m(Ee),className:"px-2 py-1 text-xs rounded border cursor-pointer "+(f===Ee?"bg-yellow-500 text-black border-yellow-600":"bg-neutral-400 dark:bg-neutral-900 text-neutral-100 dark:text-neutral-300 border-neutral-400 dark:border-neutral-700"),children:Ee},Ee))}),y.jsx("div",{className:"flex gap-2 mb-4 justify-center flex-wrap",children:["  ","   ","",""].map(Ee=>y.jsx("button",{onClick:()=>u(Ee),className:"px-3 py-1 text-sm rounded border cursor-pointer "+(l===Ee?"bg-violet-500 text-white border-violet-600":"bg-neutral-400 dark:bg-neutral-900 text-neutral-100 dark:text-neutral-300 border-neutral-400 dark:border-neutral-700"),children:Ee},Ee))}),l===""&&y.jsx(YP,{pillars:X,daewoon:D||void 0,sewoon:k||void 0,wolwoon:A||void 0,ilwoon:M||void 0,tab:f},`harm-${f}-${ie}`),l==="   "&&y.jsxs("div",{className:"space-y-4",children:[y.jsx(RP,{data:Z,revKey:ce,perStemElementScaled:K?.perStemAugFull,elementPercent:B,dayStem:X[2]?.charAt(0)??null},`pentagon-${ce}`),y.jsx(PP,{value:Me(X)}),y.jsx(Z6,{natal:X}),y.jsxs("div",{className:"w-full p-4 rounded-xl bg-neutral-100 dark:bg-neutral-900 space-y-3",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("div",{className:"text-sm font-bold",children:" "}),$&&y.jsxs("button",{type:"button",onClick:()=>b(Ee=>!Ee),className:`text-xs px-2 py-1 rounded-lg border transition cursor-pointer
                    ${p?"bg-violet-100 text-violet-800 border-violet-200 whitespace-nowrap dark:bg-violet-900/30 dark:text-violet-200 dark:border-violet-800":"bg-white text-neutral-700 border-neutral-300 hover:bg-neutral-50 dark:bg-neutral-800 dark:text-neutral-200 dark:border-neutral-700"}`,"aria-pressed":p,children:[": ",p?"ON":"OFF"]})]}),y.jsx("ul",{className:"space-y-2",children:ke.map((Ee,Be)=>y.jsxs("li",{className:"flex items-start justify-between gap-3 rounded-lg border border-neutral-200 dark:border-neutral-800 p-2",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsxs("span",{className:"text-xs px-2 py-0.5 rounded-full bg-neutral-200 dark:bg-neutral-800 text-neutral-800 dark:text-neutral-200",children:[Be+1,""]}),y.jsx("span",{className:"text-sm font-semibold",children:Ee.element})]}),y.jsxs("div",{className:"flex-1",children:[y.jsx("div",{className:"mt-1 h-1.5 w-full rounded bg-neutral-300 dark:bg-neutral-800 overflow-hidden",children:y.jsx("div",{className:"h-1.5 rounded bg-white dark:bg-neutral-100",style:{width:`${je>0?Math.max(2,Math.min(100,Math.round((Ee.score??0)/je*100))):12}%`},title:` ${Ee.score}`})}),y.jsx("div",{className:"mt-2 flex flex-wrap gap-1.5",children:(Ee.reasons??[]).map((Ce,Le)=>y.jsx("span",{className:"text-[11px] px-2 py-0.5 rounded-full bg-neutral-200 dark:bg-neutral-800 text-neutral-700 dark:text-neutral-300",children:Ce},Le))})]})]},Ee.elNorm??Ee.element))})]})]}),l===""&&y.jsx(P6,{pillars:X,daewoon:D||void 0,sewoon:k||void 0,wolwoon:A||void 0,ilwoon:M||void 0,tab:f},`shin-${f}-${ie}`),l==="  "&&y.jsx(h8,{unified:ye,pillars:X,tab:f,mapping:o.hiddenStemMode},`gyeok-${f}-${ie}`)]}):y.jsx("div",{className:"p-4 rounded-xl bg-neutral-100 dark:bg-neutral-900 text-sm",children:"   ."})}const M8=!1,t2=e=>e<10?`0${e}`:`${e}`,C8=e=>typeof e=="string"&&e.length>=2,R8=e=>Array.isArray(e)&&e.length===4&&e.every(C8);function L8(e){const t=e,n=typeof t.birthDay=="string"?t.birthDay:"",s=typeof t.calendarType=="string"?t.calendarType:"solar";if(n.length<8)return e;const o=Number(n.slice(0,4)),l=Number(n.slice(4,6)),u=Number(n.slice(6,8)),f=["isLeap","isLeapMonth","leapMonth","leap","lunarLeap"];let m=!1;for(const p of f){const b=t[p];if(typeof b=="boolean"){m=b;break}if(typeof b=="number"){m=b===1;break}if(typeof b=="string"){m=b==="1"||b.toLowerCase()==="true";break}}if(s==="lunar")try{const p=pr(o,l,u,0,0),b=`${p.getFullYear()}${t2(p.getMonth()+1)}${t2(p.getDate())}`;return{...e,birthDay:b,calendarType:"solar"}}catch{return e}return e}function B8({data:e}){const[t,n]=P.useState("un"),s=P.useMemo(()=>{try{const f=L8(e);return Xa(f)}catch{return new Date}},[e]),o=P.useMemo(()=>Um(e,s),[e,s]),l=!e.birthTime||e.birthTime==="",u=P.useMemo(()=>{try{const f=ut(o,e.birthPlace?.lon),m=At(o,e.birthPlace?.lon),p=_t(o,e.mingSikType),b=l?"":Pi(o,e.mingSikType);return[f,m,p,b]}catch{return[]}},[o,e?.mingSikType,e?.birthPlace?.lon,l]);return y.jsxs("div",{className:"w-[96%] max-w-[640px] mx-auto",children:[y.jsxs("div",{className:"flex border-b border-neutral-700 mb-4",children:[y.jsx("button",{onClick:()=>n("un"),className:`px-2 desk:px-4 py-2 text-xs desk:text-sm cursor-pointer border-b hover:border-purple-500 hover:text-purple-500 font-bold ${t==="un"?"border-purple-500 text-purple-500":"border-transparent text-neutral-400"}`,children:" "}),y.jsx("button",{onClick:()=>n("myoun"),className:`px-2 desk:px-4 py-2 text-xs desk:text-sm cursor-pointer border-b hover:border-purple-500 hover:text-purple-500 font-bold ${t==="myoun"?"border-purple-500 text-purple-500":"border-transparent text-neutral-400"}`,children:" "}),y.jsx("button",{onClick:()=>n("report"),className:`px-2 desk:px-4 py-2 text-xs desk:text-sm cursor-pointer border-b hover:border-purple-500 hover:text-purple-500 font-bold ${t==="report"?"border-purple-500 text-purple-500":"border-transparent text-neutral-400"}`,children:" "})]}),t==="un"&&y.jsx(bP,{data:e}),t==="myoun"&&y.jsx(kP,{data:e}),t==="report"&&y.jsx(D8,{data:e,pillars:R8(u)?u:[]})]})}/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P8=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),$8=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,s)=>s?s.toUpperCase():n.toLowerCase()),n2=e=>{const t=$8(e);return t.charAt(0).toUpperCase()+t.slice(1)},kA=(...e)=>e.filter((t,n,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===n).join(" ").trim(),I8=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var z8={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U8=P.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:o="",children:l,iconNode:u,...f},m)=>P.createElement("svg",{ref:m,...z8,width:t,height:t,stroke:e,strokeWidth:s?Number(n)*24/Number(t):n,className:kA("lucide",o),...!l&&!I8(f)&&{"aria-hidden":"true"},...f},[...u.map(([p,b])=>P.createElement(p,b)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ii=(e,t)=>{const n=P.forwardRef(({className:s,...o},l)=>P.createElement(U8,{ref:l,iconNode:t,className:kA(`lucide-${P8(n2(e))}`,`lucide-${e}`,s),...o}));return n.displayName=n2(e),n};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H8=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],G8=Ii("chevron-down",H8);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F8=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Y8=Ii("chevron-up",F8);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q8=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Z8=Ii("circle-x",q8);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V8=[["path",{d:"M19.414 14.414C21 12.828 22 11.5 22 9.5a5.5 5.5 0 0 0-9.591-3.676.6.6 0 0 1-.818.001A5.5 5.5 0 0 0 2 9.5c0 2.3 1.5 4 3 5.5l5.535 5.362a2 2 0 0 0 2.879.052 2.12 2.12 0 0 0-.004-3 2.124 2.124 0 1 0 3-3 2.124 2.124 0 0 0 3.004 0 2 2 0 0 0 0-2.828l-1.881-1.882a2.41 2.41 0 0 0-3.409 0l-1.71 1.71a2 2 0 0 1-2.828 0 2 2 0 0 1 0-2.828l2.823-2.762",key:"17lmqv"}]],K8=Ii("heart-handshake",V8);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W8=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],X8=Ii("house",W8);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J8=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],Q8=Ii("menu",J8);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eI=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],tI=Ii("plus",eI);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nI=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],rI=Ii("settings",nI);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iI=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 21v-2a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2",key:"1m6ac2"}]],sI=Ii("square-user",iI);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aI=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],r2=Ii("star",aI);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oI=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],lI=Ii("user-plus",oI);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cI=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],AA=Ii("x",cI);function uI({onOpenSidebar:e,onAddNew:t,onOpenCustom:n}){return y.jsx("header",{className:"fixed min-w-[320px] top-0 left-0 right-0 bg-white dark:bg-neutral-950 border-b border-neutral-200 dark:border-neutral-800 z-55 px-2 desk:px-3 transition-colors",children:y.jsxs("div",{className:"relative max-w-[640px] w-full mx-auto h-12 sm:h-14 flex justify-between items-center",children:[y.jsx("button",{type:"button",onClick:e,"aria-label":" ",className:"p-2 rounded-full text-neutral-700 dark:text-neutral-200 hover:bg-neutral-100 dark:hover:bg-neutral-800 hover:text-purple-600 dark:hover:text-purple-400 focus:outline-none focus:ring-2 focus:ring-purple-500 cursor-pointer transition-colors",children:y.jsx(Q8,{size:22})}),y.jsx("h1",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 mx-auto text-base sm:text-lg font-bold tracking-tight text-neutral-900 dark:text-neutral-100",children:""}),y.jsxs("div",{className:"flex gap-2",children:[y.jsx("button",{type:"button",onClick:t,"aria-label":" ",className:"w-8 h-8 sm:w-10 sm:h-10 flex items-center justify-center rounded-md bg-purple-600 text-white hover:bg-purple-700 dark:bg-purple-600 dark:hover:bg-purple-500 focus:outline-none focus:ring-2 focus:ring-purple-500 cursor-pointer transition-colors",children:y.jsx(lI,{size:18})}),y.jsx("button",{type:"button",onClick:n,"aria-label":" ",className:"w-8 h-8 sm:w-10 sm:h-10 flex items-center justify-center rounded-md bg-orange-600 text-white hover:bg-orange-700 dark:bg-orange-600 dark:hover:bg-orange-500 focus:outline-none focus:ring-2 focus:ring-purple-500 cursor-pointer transition-colors",children:y.jsx(sI,{size:18})})]})]})})}function dI(e){P.useEffect(()=>{const t=e??T2()??(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");k2(t),e&&eb(e)},[e])}const jA=["theme","hiddenStem","hiddenStemMode","sinsalMode","sinsalBase","sinsalBloom","exposure","charType","thinEum","visibility","difficultyMode"];function hI(e){return typeof e=="string"&&jA.includes(e)}function i2(e){const t=Array.isArray(e)?e.filter(hI):[],n=jA.filter(s=>!t.includes(s));return[...t,...n]}function fI({open:e,onClose:t}){const{settings:n,setSettings:s}=br(),o=P.useMemo(()=>i2(n.sectionOrder),[n.sectionOrder]),[l,u]=P.useState(o),[f,m]=P.useState(n),[p,b]=P.useState(null);dI(f.theme??"dark"),P.useEffect(()=>{e&&(m(n),u(i2(n.sectionOrder)))},[e,n]);const _=(k,A)=>{m(M=>{const R={...M,[k]:A};return k==="theme"&&eb(A),R})},x=()=>{s({...f,sectionOrder:l}),f.theme&&eb(f.theme),b(" "),t()},S=k=>{const{destination:A,source:M}=k;if(!A||A.index===M.index)return;const R=Array.from(l),[N]=R.splice(M.index,1);R.splice(A.index,0,N),u(R)},T=k=>{switch(k){case"theme":return y.jsx(Ji,{title:"",children:y.jsx(mI,{value:f.theme??"dark",onChange:A=>_("theme",A)})});case"hiddenStem":return y.jsx(Ji,{title:"  ",children:y.jsx(rc,{value:f.hiddenStem,onChange:A=>_("hiddenStem",A),options:[{label:"",value:"all"},{label:" ",value:"regular"}]})});case"hiddenStemMode":return y.jsx(Ji,{title:" ",children:y.jsx(rc,{value:f.hiddenStemMode,onChange:A=>_("hiddenStemMode",A),options:[{label:"",value:"classic"},{label:"",value:"hgc"}]})});case"sinsalMode":return y.jsx(Ji,{title:"",children:y.jsx(rc,{value:f.sinsalMode,onChange:A=>_("sinsalMode",A),options:[{label:"",value:"classic"},{label:"",value:"modern"}]})});case"sinsalBase":return y.jsx(Ji,{title:"",children:y.jsx(rc,{value:f.sinsalBase,onChange:A=>_("sinsalBase",A),options:[{label:"",value:""},{label:"",value:""}]})});case"sinsalBloom":return y.jsx(Ji,{title:" ",children:y.jsx(Ko,{label:" ",checked:!!f.sinsalBloom,onChange:A=>_("sinsalBloom",A)})});case"exposure":return y.jsx(Ji,{title:" ",children:y.jsx(rc,{value:f.exposure,onChange:A=>_("exposure",A),options:[{label:"",value:""},{label:"",value:""},{label:"",value:""},{label:"",value:""}]})});case"charType":return y.jsx(Ji,{title:" ",children:y.jsx(rc,{value:f.charType,onChange:A=>_("charType",A),options:[{label:"",value:""},{label:"",value:""}]})});case"thinEum":return y.jsx(Ji,{title:" ",children:y.jsx(Ko,{label:" ",checked:!!f.thinEum,onChange:A=>_("thinEum",A)})});case"visibility":return y.jsx(Ji,{title:" ",children:y.jsxs("div",{className:"space-y-2 w-full max-w-[180px] mx-auto",children:[y.jsx(Ko,{label:" ",checked:!!f.showSipSin,onChange:A=>_("showSipSin",A)}),y.jsx(Ko,{label:" ",checked:!!f.showSibiUnseong,onChange:A=>_("showSibiUnseong",A)}),y.jsx(Ko,{label:" ",checked:!!f.showSibiSinsal,onChange:A=>_("showSibiSinsal",A)}),y.jsx(Ko,{label:" ",checked:!!f.showNabeum,onChange:A=>_("showNabeum",A)})]})});case"difficultyMode":return y.jsx(Ji,{title:" UP ver.",children:y.jsx(Ko,{label:" UP ",checked:!!f.difficultyMode,onChange:A=>_("difficultyMode",A)})});default:return null}};return y.jsxs(y.Fragment,{children:[y.jsx("style",{children:"[data-rbd-drag-handle-context-id]{touch-action:none!important}"}),y.jsx("div",{className:`fixed inset-0 bg-black/60 transition-opacity duration-300 z-90 ${e?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,onClick:t}),y.jsxs("div",{className:`fixed inset-x-0 mx-auto w-full max-w-[640px] h-[88dvh] bg-white text-neutral-900 dark:bg-neutral-950 dark:text-white shadow-lg rounded-t-2xl transition-bottom duration-300 z-99 ${e?"bottom-0":"bottom-[-88dvh]"}`,children:[y.jsx("div",{className:"flex justify-between items-center p-4 border-b border-neutral-200 dark:border-neutral-800",children:y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("h2",{className:"text-lg font-bold",children:""}),y.jsx("button",{onClick:x,className:"px-3 py-1 rounded bg-indigo-600 hover:bg-indigo-500 text-white text-sm cursor-pointer",children:""})]})}),e&&y.jsx(yd,{onDragEnd:S,children:y.jsx(il,{droppableId:"settings-sections",children:k=>y.jsxs("ul",{ref:k.innerRef,...k.droppableProps,className:"flex flex-col gap-2 p-4 overflow-y-auto max-h-[80dvh] list-none",children:[l.map((A,M)=>y.jsx(_c,{draggableId:A,index:M,children:R=>y.jsxs("li",{ref:R.innerRef,...R.draggableProps,...R.dragHandleProps,className:"!flex justify-between items-center bg-white dark:bg-neutral-800 p-2 rounded border text-sm desk:text-base select-none cursor-grab active:cursor-grabbing",children:[y.jsx("span",{className:"mr-2 select-none",children:""}),y.jsx("div",{className:"flex-1 min-w-0",children:T(A)})]})},A)),k.placeholder]})})})]}),p&&y.jsx(kk,{message:p,onClose:()=>b(null),ms:1800})]})}function mI({value:e,onChange:t}){const n=e==="dark";return y.jsxs("button",{"data-no-drag":!0,onClick:()=>t(n?"light":"dark"),className:"flex items-center gap-2 px-3 py-1.5 rounded-md border text-sm cursor-pointer border-neutral-300 bg-white hover:bg-neutral-100 text-neutral-700 dark:border-neutral-700 dark:bg-neutral-900 dark:hover:bg-neutral-800 dark:text-neutral-200",title:"/ ","aria-pressed":n,children:[y.jsx("span",{className:"inline-block w-10 h-5 bg-neutral-300 rounded-full relative after:content-[''] after:w-4 after:h-4 after:bg-white after:rounded-full after:absolute after:top-0.5 after:left-0.5 after:transition-all dark:bg-neutral-700"}),y.jsx("span",{children:n?"":""})]})}function Ji({title:e,children:t}){return y.jsxs("div",{className:"p-3 rounded-lg bg-neutral-50 border border-neutral-200 text-neutral-900 dark:bg-neutral-900 dark:border-neutral-800 dark:text-neutral-100 space-y-3",children:[y.jsx("h3",{className:"text-sm font-semibold text-center",children:e}),y.jsx("div",{className:"flex justify-center",children:t})]})}function rc({value:e,onChange:t,options:n}){return y.jsx("div",{"data-no-drag":!0,className:"inline-flex rounded-md overflow-hidden border border-neutral-300 bg-white dark:border-neutral-700 dark:bg-neutral-800",onMouseDown:s=>s.stopPropagation(),onTouchStart:s=>s.stopPropagation(),children:n.map(s=>{const o=e===s.value;return y.jsx("button",{type:"button",onClick:()=>t(s.value),className:`px-3 py-1 text-sm transition-colors ${o?"bg-indigo-600 text-white":"text-neutral-700 hover:bg-neutral-100 dark:text-neutral-300 dark:hover:bg-neutral-700 cursor-pointer"}`,children:s.label},s.value)})})}function Ko({label:e,checked:t,onChange:n}){const s=`switch-${e}`;return y.jsxs("label",{"data-no-drag":!0,htmlFor:s,className:"flex items-center justify-between w-full max-w-[180px] text-sm cursor-pointer",children:[y.jsx("span",{children:e}),y.jsx("input",{id:s,type:"checkbox",checked:t,onChange:o=>n(o.target.checked),className:"peer hidden"}),y.jsx("span",{className:"w-10 h-5 bg-neutral-300 rounded-full relative after:content-[''] after:w-4 after:h-4 after:bg-white after:rounded-full after:absolute after:top-0.5 after:left-0.5 after:transition-all peer-checked:bg-green-600 peer-checked:after:translate-x-5 dark:bg-neutral-700 dark:peer-checked:bg-green-600"})]})}function pI({onShowToday:e,onShowCouple:t}){const[n,s]=P.useState(!1);return y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"fixed min-w-[320px] h-[64px] bottom-0 left-0 right-0 bg-white border-t border-neutral-200 py-2 text-xs sm:text-sm z-50 dark:bg-neutral-950 dark:border-neutral-800",children:y.jsxs("nav",{className:"flex justify-around items-center max-w-[640px] w-full mx-auto",children:[y.jsx(Zg,{icon:y.jsx(X8,{size:22}),label:" ",onClick:e}),y.jsx(Zg,{icon:y.jsx(K8,{size:22}),label:"",onClick:t}),y.jsx(Zg,{icon:y.jsx(rI,{size:22}),label:"",onClick:()=>s(!0)})]})}),y.jsx(fI,{open:n,onClose:()=>s(!1)})]})}function Zg({icon:e,label:t,onClick:n}){return y.jsxs("button",{onClick:n,className:"flex flex-col items-center justify-center text-neutral-600 hover:text-purple-600 transition-colors cursor-pointer dark:text-neutral-300 dark:hover:text-purple-400",children:[e,y.jsx("span",{className:"mt-1",children:t})]})}function gI(e,t){const[n,s]=P.useState(()=>{if(typeof window>"u")return{};try{const R=localStorage.getItem(I1);return R?JSON.parse(R):{}}catch{return{}}});P.useEffect(()=>{if(!(typeof window>"u"))try{localStorage.setItem(I1,JSON.stringify(n))}catch{}},[n]);const[o,l]=P.useState({}),[u,f]=P.useState({}),[m,p]=P.useState(""),[b,_]=P.useState(()=>{const R=Cb(),N=Rb();return N.length?Lb(R,N):R}),x=P.useRef(!1);P.useEffect(()=>{if(typeof window>"u")return;const R=()=>{if(x.current){x.current=!1;return}const N=Cb(),D=Rb(),C=D.length?Lb(N,D):N;_(C)};return window.addEventListener(Wa,R),()=>window.removeEventListener(Wa,R)},[]),P.useEffect(()=>{l(R=>{const N={...R};for(const D of b)N[D]===void 0&&(N[D]=!0);return N})},[b]);const{grouped:S,unassignedItems:T}=P.useMemo(()=>{const R={};b.forEach(C=>{R[C]=[]});const N=[],D=new Set;for(const C of e){if(!C.id||D.has(C.id))continue;const G=C.folder;G&&b.includes(G)?R[G].push(C):N.push(C),D.add(C.id)}return{grouped:R,unassignedItems:N}},[e,b]),k=P.useCallback(R=>{const{source:N,destination:D,type:C}=R;if(!D||C!=="FOLDER")return;const G=N.index,H=D.index;G!==H&&_(V=>{if(!V.length)return V;const W=[...V],[re]=W.splice(G,1);return W.splice(H,0,re),x.current=!0,Wu(W),W})},[]);return{folderFavMap:n,setFolderFavMap:s,folderOpenMap:o,setFolderOpenMap:l,memoOpenMap:u,setMemoOpenMap:f,newFolderName:m,setNewFolderName:p,orderedFolders:b,grouped:S,unassignedItems:T,handleDragEnd:k,createFolder:R=>{const N=R.trim();!N||N===mn||(Tk(N),_(D=>{if(D.includes(N))return D;const C=[...D,N];return Wu(C),C}))},deleteFolder:R=>{e.forEach(N=>{N.folder===R&&t(N.id,{folder:void 0})}),s(N=>{const D={...N};return delete D[R],D}),_(N=>{const D=N.filter(C=>C!==R);return Wu(D),D}),Sk.includes(R)?VB(R):ZB(R)},UNASSIGNED_LABEL:mn}}function s2(e,t){if(!/^\d{8}$/.test(e))return e||"";const n=e.slice(0,4),s=e.slice(4,6),o=e.slice(6,8);return t&&/^\d{4}$/.test(t)?`${n} ${s} ${o} ${t.slice(0,2)}:${t.slice(2,4)}`:t===""?`${n} ${s} ${o} ( )`:`${n} ${s} ${o}`}function bI(e){if(!e)return"";const t=e.split(/[\s,]+/).filter(Boolean);if(t.length===0)return"";const n=u=>t.find(f=>u.some(m=>f.endsWith(m))),s=n(["","",""]),o=n(["","","",""]);return t.length===1||!n(["","","","","","",""])&&!n(["","","","",""])?e:s&&o?`${s} ${o}`:s||e}function Ub(e){return(e.ganji??"").replace(/\r\n/g,`
`).replace(/\s*null\s*/gi,"").trim()}const yI="list:__unassigned__",vI=e=>`list:${e}`,a2=e=>{if(!e.startsWith("list:"))return;const t=e.slice(5);return t==="__unassigned__"?void 0:t},_I="myeoun:folder-updated",o2=()=>{typeof window>"u"||window.dispatchEvent(new Event(_I))};function xI(e){const t=Ub(e),n=String(e.birthDay??"").trim();if(!/^\d{8}$/.test(n))return t;const s=Number(n.slice(0,4)),o=Number(n.slice(4,6)),l=Number(n.slice(6,8));if(!om(s,o,l)||!e.birthTime||e.birthTime==="")return t;const u=Number(e.birthTime.slice(0,2)),f=e.birthTime.slice(2,4),m=u-1<0?23:u-1,p=String(m).padStart(2,"0")+f,b=e.corrected instanceof Date?e.corrected:new Date(e.corrected);if(Number.isNaN(b.getTime()))return t;new Date(b.getTime()-3600*1e3);const _=Lm({...e,birthTime:p});return Ub({...e,..._})}function wI({open:e,onClose:t,onView:n,onAddNew:s,onEdit:o,onDeleteView:l}){const{list:u,remove:f,update:m,reorder:p}=ss(),{folderFavMap:b,setFolderFavMap:_,folderOpenMap:x,setFolderOpenMap:S,memoOpenMap:T,setMemoOpenMap:k,newFolderName:A,setNewFolderName:M,orderedFolders:R,grouped:N,unassignedItems:D,handleDragEnd:C,createFolder:G,deleteFolder:H,UNASSIGNED_LABEL:V}=gI(u,m),[W,re]=P.useState(""),[ee,q]=P.useState("name"),te=/\S/.test(W),{filteredUnassigned:oe,filteredGrouped:Se,totalMatches:X}=P.useMemo(()=>{const $=ce=>ce.toLowerCase().replace(/\s+/g," ").trim();if(!te)return{filteredUnassigned:D,filteredGrouped:N,totalMatches:D.length+Object.values(N).reduce((ce,xe)=>ce+xe.length,0)};const F=$(W),Z=ce=>{const xe=String(ce.birthDay??"").trim();let ke="",je="",Me="";if(/^\d{8}$/.test(xe))ke=xe.slice(0,4),je=xe.slice(4,6),Me=xe.slice(6,8);else{const Ue=new Date(xe);if(!Number.isNaN(Ue.getTime())){const me=Ue.getFullYear(),Ie=Ue.getMonth()+1,le=Ue.getDate();ke=String(me).padStart(4,"0"),je=String(Ie).padStart(2,"0"),Me=String(le).padStart(2,"0")}}const Ee=ke&&je&&Me?`${ke}${je}${Me}`:"",Be=ke&&je&&Me?`${ke}-${je}-${Me}`:"",Ce=ke&&je&&Me?`${ke}.${je}.${Me}`:"",Le=s2(ce.birthDay,ce.birthTime);return $([Ee,Be,Ce,Le].filter(Boolean).join(" "))},B=ce=>ee==="name"?$(ce.name??"").includes(F):ee==="ganji"?$(Ub(ce)??"").includes(F):Z(ce).includes(F),Y=D.filter(B),ie={};let fe=Y.length;for(const ce of R){const xe=(N[ce]||[]).filter(B);ie[ce]=xe,fe+=xe.length}return{filteredUnassigned:Y,filteredGrouped:ie,totalMatches:fe}},[W,ee,te,D,N,R]),ae=P.useRef(null),J=P.useRef(null);P.useEffect(()=>{if(J.current==null)return;const $=ae.current;$&&($.scrollTop=J.current,J.current=null)},[u,R]);const ye=$=>({...$,transition:$?.transform?"transform 0.15s ease":"none"}),K=($,F)=>{const Z=xI($),B=bI($.birthPlace?.name),Y=`item:${$.id}`,ie=!!T[$.id],fe=$.gender===""?"":$.gender===""?"":$.gender,ce=new Date($.corrected),xe=!$.birthTime||$.birthTime==="",ke=String($.birthDay).trim();let je=NaN;if(/^\d{8}$/.test(ke)){const Ce=`${ke.slice(0,4)}-${ke.slice(4,6)}-${ke.slice(6,8)}`,Le=new Date(Ce);Number.isNaN(Le.getTime())||(je=Le.getFullYear())}else{const Ce=new Date(ke);Number.isNaN(Ce.getTime())||(je=Ce.getFullYear())}function Me(Ce,Le){return Number.isNaN(Ce)?0:Le-Ce+1}const Ee=new Date().getFullYear(),Be=Me(je,Ee);return y.jsx(_c,{draggableId:Y,index:F,isDragDisabled:te,children:Ce=>y.jsx("li",{ref:Ce.innerRef,...Ce.draggableProps,...Ce.dragHandleProps,style:ye(Ce.draggableProps.style),className:`list-none select-none rounded-xl border
                       bg-white dark:bg-neutral-900
                       border-neutral-200 dark:border-neutral-800
                       text-neutral-900 dark:text-neutral-100
                       cursor-grab active:cursor-grabbing`,children:y.jsxs("div",{className:"p-3",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsxs("div",{className:"font-semibold text-sm desk:text-base",children:[$.name," (",Be,", ",fe,")"]}),y.jsx("span",{className:"opacity-40",children:""}),y.jsx("div",{className:"text-sm text-neutral-600 dark:text-neutral-300",children:$.relationship?$.relationship:" "}),y.jsx("span",{className:"ml-auto opacity-50 select-none",children:""})]}),y.jsxs("div",{className:"text-sm text-neutral-600 dark:text-neutral-300 mt-1",children:[s2($.birthDay,$.birthTime),","," ",$.calendarType==="lunar"?"":""]}),(B||ce)&&y.jsxs("div",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:[B,ce&&y.jsxs("span",{className:"opacity-70",children:[" "," "," ",xe?"":J7(ce)]})]}),Z&&y.jsx("div",{className:"text-sm text-neutral-800 dark:text-neutral-200 mt-1 whitespace-pre-wrap break-keep",children:Z}),$.memo&&$.memo.trim()!==""&&y.jsxs("div",{children:[y.jsx("button",{type:"button",className:"text-xs text-neutral-500 dark:text-neutral-400 hover:text-neutral-800 dark:hover:text-neutral-200 inline-flex items-center gap-1 cursor-pointer",onClick:Le=>{Le.stopPropagation(),k(Ue=>({...Ue,[$.id]:!Ue[$.id]}))},children:ie?" ":" "}),y.jsx("div",{className:ie?"mt-1 text-sm text-neutral-800 dark:text-neutral-200 whitespace-pre-wrap":"hidden",children:$.memo})]}),y.jsxs("div",{className:"flex flex-wrap gap-2 mt-3",children:[y.jsx("select",{className:`h-30 text-xs rounded px-2 py-1 cursor-pointer
                             bg-white dark:bg-neutral-900
                             border border-neutral-300 dark:border-neutral-700
                             text-neutral-900 dark:text-neutral-100
                             focus:outline-none focus:ring-2 focus:ring-amber-500/40`,value:$.folder??V,onClick:Le=>Le.stopPropagation(),onChange:Le=>{Le.stopPropagation();const Ue=Le.target.value,me=Ue===V?void 0:Ue;m($.id,{folder:me})},children:[V,...R].map(Le=>y.jsx("option",{value:Le,children:Le},Le))}),y.jsxs("select",{className:`h-30 text-xs rounded px-2 py-1 cursor-pointer
                             bg-white dark:bg-neutral-900
                             border border-neutral-300 dark:border-neutral-700
                             text-neutral-900 dark:text-neutral-100
                             focus:outline-none focus:ring-2 focus:ring-amber-500/40`,value:$.mingSikType??"/",onClick:Le=>Le.stopPropagation(),onChange:Le=>{Le.stopPropagation();const Ue=Le.target.value,me={...$,mingSikType:Ue},Ie=Lm(me);m($.id,{mingSikType:Ue,...Ie}),n({...me,...Ie}),t()},children:[y.jsx("option",{value:"",children:""}),y.jsx("option",{value:"/",children:"/"}),y.jsx("option",{value:"",children:""})]})]}),y.jsxs("div",{className:"flex gap-2 mt-3",children:[y.jsx("button",{onClick:Le=>{Le.stopPropagation(),n($),t()},className:`px-3 py-1 rounded text-white text-sm cursor-pointer
                             bg-indigo-600 hover:bg-indigo-500`,children:""}),y.jsx("button",{onClick:Le=>{Le.stopPropagation(),o?.($)},className:`px-3 py-1 rounded text-white text-sm cursor-pointer
                             bg-amber-600 hover:bg-amber-500`,children:""}),y.jsx("button",{onClick:Le=>{Le.stopPropagation(),confirm(`'${$.name}'  ?`)&&(f($.id),l&&l())},className:`px-3 py-1 rounded text-white text-sm cursor-pointer
                             bg-red-600 hover:bg-red-500`,children:""}),y.jsx("button",{type:"button",onClick:Le=>{Le.stopPropagation();const Ue=!$.favorite;m($.id,{favorite:Ue})},className:`ml-auto p-1 rounded cursor-pointer ${$.favorite?"text-yellow-400":"text-neutral-400"} hover:text-yellow-400`,children:y.jsx(r2,{size:16,fill:$.favorite?"currentColor":"none"})})]})]})})},Y)},U=$=>{const{type:F,source:Z,destination:B,draggableId:Y}=$;if(!B||te)return;const ie=ae.current;if(ie&&(J.current=ie.scrollTop),F==="FOLDER"){C($);return}if(F==="ITEM"){if(!Y.replace(/^item:/,""))return;const ce=a2(Z.droppableId),xe=a2(B.droppableId),ke=ce??"__unassigned__",je=xe??"__unassigned__",Me={__unassigned__:[...D]};R.forEach(me=>{Me[me]=[...N[me]||[]]});const Ee=Me[ke]??[];if(!Ee[Z.index])return;const[Be]=Ee.splice(Z.index,1),Ce={...Be,folder:xe??void 0},Le=Me[je]??[];Le.splice(B.index,0,Ce),Me[ke]=Ee,Me[je]=Le;const Ue=[...Me.__unassigned__,...R.flatMap(me=>Me[me]??[])];p(Ue)}};return y.jsxs(y.Fragment,{children:[y.jsx("div",{className:`fixed inset-0 bg-black/70 transition-opacity duration-300 z-90 ${e?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,onClick:t}),y.jsxs("div",{className:`fixed top-0 left-0 h-[100dvh] min-w-[320px] w-full desk:w-1/3
                    bg-white dark:bg-neutral-950
                    text-neutral-900 dark:text-white
                    shadow-lg z-99 transition-[left] duration-300
                    overflow-hidden
                    ${e?"left-0":"left-[-100%]"}`,children:[y.jsxs("div",{className:"flex justify-between items-center w-full h-12 desk:h-16 p-4 border-b border-neutral-200 dark:border-neutral-800",children:[y.jsx("h2",{className:"text-lg font-bold",children:" "}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsxs("button",{type:"button",onClick:()=>{s(),t()},className:`inline-flex items-center gap-1 px-3 py-1.5 rounded text-sm cursor-pointer
                         bg-purple-600 hover:bg-purple-500 text-white`,children:[y.jsx(tI,{size:16})," "]}),y.jsx("button",{onClick:t,className:"p-1 rounded cursor-pointer hover:bg-neutral-100 dark:hover:bg-neutral-900",children:y.jsx(AA,{size:22})})]})]}),y.jsx(yd,{onDragEnd:U,children:y.jsxs("div",{ref:ae,className:"p-4 h-[calc(100%-56px)] overflow-y-auto overscroll-contain",style:{touchAction:"pan-y"},children:[y.jsx("div",{className:"mb-3 sticky top-[-16px] z-10 pb-2 pt-2 bg-white dark:bg-neutral-950 z-50",children:y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsxs("select",{value:ee,onChange:$=>q($.target.value),className:`h-30 text-xs rounded px-2 py-1 cursor-pointer
                             bg-white dark:bg-neutral-900
                             border border-neutral-300 dark:border-neutral-700
                             text-neutral-900 dark:text-neutral-100
                             focus:outline-none focus:ring-2 focus:ring-amber-500/40`,children:[y.jsx("option",{value:"name",children:""}),y.jsx("option",{value:"ganji",children:""}),y.jsx("option",{value:"birth",children:""})]}),y.jsxs("div",{className:"relative flex-1",children:[y.jsx("input",{type:"text",value:W,onChange:$=>re($.target.value),placeholder:ee==="name"?" ":ee==="ganji"?"  (: )":"  (: 19961229, 1996-12-29)",className:`w-full pl-7 pr-8 py-1 h-30 rounded
                               bg-white dark:bg-neutral-900
                               border border-neutral-300 dark:border-neutral-700
                               text-[16px] text-neutral-900 dark:text-neutral-100
                               placeholder-neutral-400 dark:placeholder-neutral-500
                               focus:outline-none focus:ring-2 focus:ring-amber-500/40`}),W&&y.jsx("button",{type:"button",onClick:()=>re(""),className:"absolute right-2 top-1/2 -translate-y-1/2 opacity-60 hover:opacity-100","aria-label":" ",title:" ",children:y.jsx(Z8,{size:16})})]}),te&&y.jsxs("span",{className:"text-xs text-neutral-500 dark:text-neutral-400 whitespace-nowrap",children:[X,""]})]})}),y.jsxs("div",{className:"flex items-center mb-2 gap-2",children:[y.jsx("input",{type:"text",value:A,onChange:$=>M($.target.value),placeholder:"  ",className:`flex-1 w-[60%] px-2 py-1 rounded h-30
                           bg-white dark:bg-neutral-900
                           border border-neutral-300 dark:border-neutral-700
                           text-sm text-neutral-900 dark:text-neutral-100
                           placeholder-neutral-400 dark:placeholder-neutral-500`,onClick:$=>$.stopPropagation()}),y.jsx("button",{type:"button",className:`px-3 rounded h-30 text-sm cursor-pointer
                           bg-neutral-100 hover:bg-neutral-200
                           dark:bg-neutral-800 dark:hover:bg-neutral-700
                           text-neutral-900 dark:text-neutral-100
                           border border-neutral-200 dark:border-neutral-700`,onClick:$=>{$.stopPropagation();const F=A.trim();F&&(G(F),M(""),o2())},children:""})]}),y.jsx("p",{className:"text-xs text-neutral-600 dark:text-neutral-400 mb-2",children:te?"   .":"/      ."}),y.jsx(il,{droppableId:yI,type:"ITEM",direction:"vertical",ignoreContainerClipping:!0,isDropDisabled:te,children:$=>{const F=oe;return y.jsx("div",{ref:$.innerRef,...$.droppableProps,className:"mb-6",children:y.jsxs("ul",{className:"flex flex-col gap-2",children:[F.map((Z,B)=>K(Z,B)),$.placeholder]})})}}),y.jsx(il,{droppableId:"folders:root",type:"FOLDER",direction:"vertical",ignoreContainerClipping:!0,isDropDisabled:te,children:$=>y.jsxs("div",{ref:$.innerRef,...$.droppableProps,children:[R.map((F,Z)=>{const B=vI(F),Y=Se[F]||[],ie=!!x[F],fe=!!b[F];return y.jsx(_c,{draggableId:`folder-${F}`,index:Z,isDragDisabled:te,children:ce=>y.jsxs("div",{ref:ce.innerRef,...ce.draggableProps,...ce.dragHandleProps,className:"mb-4 cursor-grab active:cursor-grabbing select-none",children:[y.jsxs("div",{className:`flex items-center justify-between px-2 py-2 rounded
                                         bg-neutral-50 dark:bg-neutral-900/70
                                         border border-neutral-200 dark:border-neutral-800
                                         text-neutral-800 dark:text-neutral-200`,children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsxs("button",{type:"button",onClick:xe=>{xe.stopPropagation(),S(ke=>({...ke,[F]:!ie}))},className:"inline-flex items-center gap-1 text-sm font-semibold cursor-pointer",children:[ie?y.jsx(Y8,{size:16}):y.jsx(G8,{size:16}),y.jsx("span",{className:"text-sm font-semibold",children:F})]}),y.jsx("button",{type:"button",onClick:xe=>{xe.stopPropagation(),_(ke=>({...ke,[F]:!ke[F]}))},className:`p-1 rounded cursor-pointer ${fe?"text-yellow-400":"text-neutral-400"} hover:text-yellow-400`,children:y.jsx(r2,{size:16,fill:fe?"currentColor":"none"})})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsxs("span",{className:"opacity-60 text-xs",children:[Y.length,""]}),y.jsx("button",{type:"button",onClick:xe=>{if(xe.stopPropagation(),b[F]){alert(`'${F}'    .
   .`);return}confirm(`'${F}'  ?
(   )`)&&(H(F),o2())},className:`px-2 py-1 rounded text-xs cursor-pointer
                                             border border-red-300 dark:border-red-700
                                             text-red-700 dark:text-red-300
                                             hover:bg-red-50 dark:hover:bg-red-900/30`,children:""})]})]}),ie&&y.jsx(il,{droppableId:B,type:"ITEM",direction:"vertical",ignoreContainerClipping:!0,isDropDisabled:te,children:xe=>y.jsx("div",{ref:xe.innerRef,...xe.droppableProps,className:"mt-2",children:y.jsxs("ul",{className:"flex flex-col gap-2",children:[Y.map((ke,je)=>K(ke,je)),xe.placeholder]})})})]})},`folder-${F}`)}),$.placeholder]})})]})})]})]})}const l2="ms_folders",Vg="w-full rounded p-2 border transition-colors duration-200 bg-white text-neutral-900 placeholder-neutral-400 border-neutral-300 focus:outline-none focus:ring-2 focus:ring-violet-500 focus:border-transparent dark:bg-neutral-900 dark:text-neutral-100 dark:placeholder-neutral-500 dark:border-neutral-700 dark:focus:ring-violet-400",SI="w-full rounded p-2 border transition-colors duration-200 bg-white text-neutral-900 border-neutral-300 focus:outline-none focus:ring-2 focus:ring-violet-500 focus:border-transparent dark:bg-neutral-900 dark:text-neutral-100 dark:border-neutral-700 dark:focus:ring-violet-400",EI="w-full rounded p-2 border min-h-28 transition-colors duration-200 bg-white text-neutral-900 placeholder-neutral-400 border-neutral-300 focus:outline-none focus:ring-2 focus:ring-violet-500 focus:border-transparent dark:bg-neutral-900 dark:text-neutral-100 dark:placeholder-neutral-500 dark:border-neutral-700 dark:focus:ring-violet-400",Ws="block text-sm mb-1 font-medium text-neutral-800 dark:text-neutral-200",TI="text-xs text-neutral-500 dark:text-neutral-400",kf="accent-violet-600 dark:accent-violet-400",c2="accent-violet-600 dark:accent-violet-400",Zm="px-3 py-1.5 rounded text-sm font-medium transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-neutral-900",kI=`${Zm} bg-amber-600 text-white hover:bg-amber-500 dark:bg-amber-600 dark:hover:bg-amber-500 cursor-pointer`,AI=`${Zm} bg-red-600 text-white hover:bg-red-500 dark:bg-red-600 dark:hover:bg-red-500 cursor-pointer`,u2=`${Zm} bg-neutral-800 text-white hover:bg-neutral-700 dark:bg-neutral-700 dark:hover:bg-neutral-600 cursor-pointer`,jI=`${Zm} bg-green-600 text-white hover:bg-green-500 dark:bg-green-600 dark:hover:bg-green-500 cursor-pointer`;function NI({item:e,onClose:t}){const{list:n,update:s,remove:o}=ss(),[l,u]=P.useState(!1),[f,m]=P.useState({...e,calendarType:e.calendarType??"solar"}),[p,b]=P.useState(!e.birthTime||e.birthTime===""),[_,x]=P.useState(!e.birthPlace||e.birthPlace.name===""),S=P.useMemo(()=>["","","","","",""],[]),[T,k]=P.useState([]);P.useEffect(()=>{try{const C=JSON.parse(localStorage.getItem(l2)||"[]");Array.isArray(C)&&k(C)}catch{}},[]);const A=P.useMemo(()=>{const C=Array.from(new Set(n.map(V=>V.folder).filter(Boolean))),G=new Set([...S,...T,...C]),H=Array.from(G).sort((V,W)=>V.localeCompare(W));return[mn,...H]},[n,T,S]),M=()=>{m({...e,calendarType:e.calendarType??"solar"}),b(!e.birthTime||e.birthTime===""),x(!e.birthPlace||e.birthPlace.name==="")},R=()=>{if(!f.name||f.name.trim()==="")return" .";if(!f.birthDay||!/^\d{8}$/.test(f.birthDay))return" YYYYMMDD  .";const C=Number(f.birthDay.slice(0,4)),G=Number(f.birthDay.slice(4,6)),H=Number(f.birthDay.slice(6,8));if(f.calendarType==="lunar")try{pr(C,G,H)}catch(V){return V instanceof Error?V.message:"   ."}else{const V=new Date(C,G-1,H);if(V.getFullYear()!==C||V.getMonth()+1!==G||V.getDate()!==H)return"   ."}if(!p){if(!f.birthTime||!/^\d{4}$/.test(f.birthTime))return"  00002359 (4) .";const V=Number(f.birthTime.slice(0,2)),W=Number(f.birthTime.slice(2,4));if(V<0||V>23||W<0||W>59)return"  00002359  ."}return!_&&!f.birthPlace?"   '' .":null},N=()=>{const C=R();if(C){alert(C);return}const G=Number(f.birthDay.slice(0,4)),H=Number(f.birthDay.slice(4,6)),V=Number(f.birthDay.slice(6,8));let W=G,re=H,ee=V;if(f.calendarType==="lunar"){const ie=pr(G,H,V);W=ie.getFullYear(),re=ie.getMonth()+1,ee=ie.getDate()}const q=p?4:Number((f.birthTime??"0430").slice(0,2)),te=p?30:Number((f.birthTime??"0430").slice(2,4)),oe=_||!f.birthPlace||f.birthPlace.lon===0?127.5:f.birthPlace.lon,Se=new Date(W,re-1,ee,q,te,0,0),X=!f.birthPlace||typeof f.birthPlace=="object"&&f.birthPlace.name==="",ae=cl(Se,oe,X),ye=ut(ae,oe).charAt(0),U=((ie,fe)=>{const xe=["","","","","","","","","",""].includes(ie),ke=(fe??"")==="";return xe?ke?"forward":"backward":ke?"backward":"forward"})(ye,f.gender??""),$=sl(f.folder===mn?void 0:f.folder),F={...e,name:(f.name??"").trim()||"",birthDay:f.birthDay,birthTime:p?"":f.birthTime??"0430",gender:f.gender??"",birthPlace:_?{name:"",lat:0,lon:127.5}:f.birthPlace??{name:"",lat:0,lon:127.5},relationship:f.relationship??"",memo:f.memo??"",folder:$,calendarType:f.calendarType??"solar",mingSikType:f.mingSikType??"/",DayChangeRule:(f.mingSikType??"/")===""?"":"",dir:U,corrected:ae,correctedLocal:"",ganji:""},{correctedLocal:Z,ganji:B}=Lm(F),Y={...F,correctedLocal:Z,ganji:B};if(Y.folder&&!S.includes(Y.folder)&&!T.includes(Y.folder)){const ie=[...T,Y.folder];k(ie),localStorage.setItem(l2,JSON.stringify(ie))}s(e.id,Y),u(!1),t&&t()},D=()=>{confirm(`'${e.name}'  ?`)&&o(e.id)};return l?y.jsxs("div",{className:"space-y-4 max-h-[calc(90dvh_-_40px)] overflow-auto transition-colors duration-200 bg-white text-neutral-900 dark:bg-neutral-950 dark:text-neutral-100 p-4 rounded-xl",children:[y.jsx("h3",{className:"text-lg font-bold",children:" "}),y.jsxs("div",{children:[y.jsx("label",{className:Ws,children:""}),y.jsx("input",{className:Vg,value:f.name||"",onChange:C=>m({...f,name:C.target.value}),placeholder:""})]}),y.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[y.jsxs("div",{children:[y.jsx("label",{className:Ws,children:" (YYYYMMDD)"}),y.jsx("input",{className:Vg,value:f.birthDay||"",onChange:C=>m({...f,birthDay:C.target.value.replace(/\D/g,"").slice(0,8)}),inputMode:"numeric",maxLength:8,placeholder:": 19900101"}),y.jsxs("div",{className:"flex gap-4 mt-2 items-center justify-between",children:[y.jsxs("div",{className:"flex gap-4",children:[y.jsxs("span",{className:"inline-flex items-center gap-1",children:[y.jsx("input",{type:"radio",className:kf,name:"calendarType",checked:f.calendarType==="solar",onChange:()=>m({...f,calendarType:"solar"}),id:"editor_calendar_solar"}),y.jsx("label",{htmlFor:"editor_calendar_solar",className:"inline-flex items-center gap-1 text-sm text-neutral-800 dark:text-neutral-200 cursor-pointer",children:""})]}),y.jsxs("span",{className:"inline-flex items-center gap-1",children:[y.jsx("input",{type:"radio",className:kf,name:"calendarType",checked:f.calendarType==="lunar",onChange:()=>m({...f,calendarType:"lunar"}),id:"editor_calendar_lunar"}),y.jsx("label",{htmlFor:"editor_calendar_lunar",className:"inline-flex items-center gap-1 text-sm text-neutral-800 dark:text-neutral-200 cursor-pointer",children:""})]})]}),f.calendarType==="lunar"&&f.birthDay?.length===8&&y.jsx("span",{className:TI,children:(()=>{try{const C=Number(f.birthDay.slice(0,4)),G=Number(f.birthDay.slice(4,6)),H=Number(f.birthDay.slice(6,8)),V=pr(C,G,H);return`  ${V.getFullYear()}-${String(V.getMonth()+1).padStart(2,"0")}-${String(V.getDate()).padStart(2,"0")}`}catch(C){const G=C instanceof Error?C.message:void 0;return`  ${G?`: ${G}`:""}`}})()})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:Ws,children:"  (HHMM)"}),y.jsx("input",{className:`${Vg} disabled:opacity-50`,value:p?"":f.birthTime||"",onChange:C=>m({...f,birthTime:C.target.value.replace(/\D/g,"").slice(0,4)}),inputMode:"numeric",maxLength:4,placeholder:": 1524",disabled:p}),y.jsxs("div",{className:"mt-1 text-sm flex items-center gap-2",children:[y.jsx("input",{type:"checkbox",className:c2,checked:p,onChange:C=>b(C.target.checked),id:"editor_birthTimeX"}),y.jsx("label",{htmlFor:"editor_birthTimeX",className:"text-neutral-800 dark:text-neutral-200 cursor-pointer",children:""})]})]})]}),y.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[y.jsxs("div",{children:[y.jsx("label",{className:Ws,children:" "}),y.jsx("div",{className:"flex gap-4 text-sm",children:["","/",""].map(C=>{const G=`editor_ming_${C}`;return y.jsxs("span",{className:"inline-flex items-center gap-1",children:[y.jsx("input",{type:"radio",className:kf,name:"mingSikType",checked:(f.mingSikType??"")===C,onChange:()=>m({...f,mingSikType:C}),id:G}),y.jsx("label",{htmlFor:G,className:"text-neutral-800 dark:text-neutral-200 cursor-pointer",children:C})]},C)})})]}),y.jsxs("div",{children:[y.jsx("label",{className:Ws,children:""}),y.jsx("div",{className:"flex gap-4 text-sm",children:["",""].map(C=>{const G=`editor_gender_${C}`;return y.jsxs("span",{className:"inline-flex items-center gap-1",children:[y.jsx("input",{type:"radio",className:kf,name:"gender",value:C,checked:f.gender===C,onChange:H=>m({...f,gender:H.target.value}),id:G}),y.jsx("label",{htmlFor:G,className:"text-neutral-800 dark:text-neutral-200 cursor-pointer",children:C})]},C)})})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:Ws,children:" "}),y.jsx(Z2,{onSelect:C=>m({...f,birthPlace:C}),value:_?"":f.birthPlace?.name??""}),y.jsxs("div",{className:"mt-1 text-sm flex items-center gap-2",children:[y.jsx("input",{type:"checkbox",className:c2,checked:_,onChange:C=>x(C.target.checked),id:"editor_birthPlaceX"}),y.jsx("label",{htmlFor:"editor_birthPlaceX",className:"text-neutral-800 dark:text-neutral-200 cursor-pointer",children:""})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:Ws,children:""}),y.jsx(wk,{value:f.relationship||"",onChange:C=>m({...f,relationship:C})})]}),y.jsxs("div",{children:[y.jsx("label",{className:Ws,children:""}),y.jsx("select",{className:SI,value:f.folder??mn,onChange:C=>{const G=C.target.value;m(G===mn?{...f,folder:void 0}:{...f,folder:G})},children:A.map(C=>y.jsx("option",{value:C===mn?mn:C,children:C},C))})]}),y.jsxs("div",{children:[y.jsx("label",{className:Ws,children:""}),y.jsx("textarea",{className:EI,value:f.memo||"",onChange:C=>m({...f,memo:C.target.value}),placeholder:" "})]}),y.jsxs("div",{className:"flex gap-2 justify-end",children:[y.jsx("button",{className:u2,onClick:()=>{M(),u(!1)},children:""}),y.jsx("button",{className:jI,onClick:N,children:""})]})]}):y.jsxs("div",{className:"p-4 space-y-3 transition-colors duration-200 bg-white text-neutral-900 dark:bg-neutral-950 dark:text-neutral-100",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("h3",{className:"text-lg font-bold",children:[" ",e.name," "]}),y.jsxs("div",{className:"flex gap-2",children:[y.jsx("button",{className:kI,onClick:()=>u(!0),children:""}),y.jsx("button",{className:AI,onClick:D,children:""}),t&&y.jsx("button",{className:u2,onClick:t,children:""})]})]}),y.jsxs("div",{className:"text-sm text-neutral-700 dark:text-neutral-300",children:[y.jsxs("div",{children:[": ",e.gender]}),y.jsxs("div",{children:["/: ",e.birthDay," ",e.birthTime===""?"( )":e.birthTime,","," ",e.calendarType==="lunar"?"":""]}),y.jsxs("div",{children:[": ",e.correctedLocal||"-"]}),y.jsxs("div",{children:[": ",e.birthPlace?.name||"-"]}),y.jsxs("div",{children:[": ",e.relationship||"-"]}),y.jsxs("div",{children:[": ",e.folder??mn]})]}),e.ganji&&y.jsx("div",{className:"text-sm text-red-500 whitespace-pre-wrap",children:e.ganji}),e.memo&&y.jsxs("div",{className:"text-sm whitespace-pre-wrap text-neutral-800 dark:text-neutral-200",children:[y.jsx("p",{className:"mb-1 font-semibold",children:""}),e.memo]})]})}function OI({pillarsA:e,pillarsB:t}){const n=FP(e,t);return y.jsxs("div",{className:"rounded-xl p-4 bg-neutral-100 dark:bg-neutral-900 text-neutral-900 dark:text-neutral-100 space-y-2",children:[y.jsx("div",{className:"text-sm font-bold mb-3",children:"   "}),Object.entries(n).map(([s,o])=>o.length>0?y.jsxs("div",{className:"flex gap-2 text-xs",children:[y.jsx("span",{className:"shrink-0 w-20 text-xs font-semibold text-neutral-700 dark:text-neutral-400 mt-1",children:s}),y.jsx("div",{className:"flex flex-wrap gap-2",children:o.map((l,u)=>y.jsx("span",{className:"text-xs px-2 py-1 rounded-full border whitespace-nowrap bg-violet-100 text-violet-800 border-violet-200 dark:bg-violet-900/30 dark:text-violet-200 dark:border-violet-800",children:l},u))})]},s):null)]})}function DI(e){return typeof e=="object"&&e!==null}const MI=["","","","","","","","","","","","","","","","","","","",""],CI=["","","","","","","","","","","","","","","","","","","","","","","",""],RI=new Set(MI),LI=new Set(CI);function d2(e){return typeof e=="string"&&e.length>=2&&RI.has(e[0])&&LI.has(e[1])}function ln(e,...t){if(d2(e))return e;for(const n of t)if(d2(n))return n;return""}function Af(e,t){let n=null;const s=t.getTime();for(const o of e)if(o.at.getTime()<=s)n=o;else break;return n}function BI(e){const t=n=>String(n).padStart(2,"0");return`${e.getFullYear()}-${t(e.getMonth()+1)}-${t(e.getDate())}T${t(e.getHours())}:${t(e.getMinutes())}`}function h2(e){if(!e)return null;const t=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2})$/.exec(e);if(!t)return null;const[,n,s,o,l,u]=t,f=new Date(+n,+s-1,+o,+l,+u);return Number.isNaN(f.getTime())?null:f}function mm(e){const t=e;return typeof t.name=="string"&&t.name?t.name:typeof t.title=="string"&&t.title?t.title:typeof t.memo=="string"&&t.memo?t.memo:" "}function PI(e){const t=Number(e.birthDay.slice(0,4)),n=Number(e.birthDay.slice(4,6)),s=Number(e.birthDay.slice(6,8));let o=0,l=0;const u=e;return typeof u.birthTime=="string"&&u.birthTime.length>=4&&(o=Number(u.birthTime.slice(0,2)),l=Number(u.birthTime.slice(2,4))),{y:t,m:n,d:s,hh:o,mm:l}}function Vm(e){const{y:t,m:n,d:s}=PI(e),o=e.corrected.getHours(),l=e.corrected.getMinutes();return e.calendarType==="lunar"?pr(t,n,s,o,l):new Date(t,n-1,s,o,l)}function $I(e){const t=Vm(e);return`${mm(e)}-${t.toISOString()}`}function zu(e){const t=e;return typeof t.id=="string"&&t.id?t.id:$I(e)}function II(e){return DI(e)&&("Classic"in e||"Modern"in e||"classic"in e||"modern"in e)}function zI(e){const t=ul;return II(t)?e==="classic"?t.Classic:t.Modern:e}const Kg="people_picker_order_v1";function UI(e,t,n){const s=e.slice(),[o]=s.splice(t,1);return s.splice(n,0,o),s}function f2({open:e,list:t,onSelect:n,onClose:s}){const[o,l]=P.useState("");P.useEffect(()=>{e||l("")},[e]);const u=P.useMemo(()=>t.map(zu),[t]),f=P.useMemo(()=>new Set(u),[u]),[m,p]=P.useState([]);P.useEffect(()=>{const k=localStorage.getItem(Kg),A=k?JSON.parse(k):[],M=A.filter(N=>f.has(N)),R=[...M,...u.filter(N=>!M.includes(N))];p(R),JSON.stringify(R)!==JSON.stringify(A)&&localStorage.setItem(Kg,JSON.stringify(R))},[u,f]);const b=k=>{p(k),localStorage.setItem(Kg,JSON.stringify(k))},_=P.useMemo(()=>{const k=new Map(t.map(M=>[zu(M),M])),A=[];for(const M of m){const R=k.get(M);R&&A.push(R)}return k.forEach((M,R)=>{m.includes(R)||A.push(M)}),A},[t,m]),x=P.useMemo(()=>{const k=o.trim().toLowerCase();return k?_.filter(A=>mm(A).toLowerCase().includes(k)):_},[_,o]),S=o.trim()==="",T=k=>{const{destination:A,source:M}=k;if(!A||!S||A.index===M.index)return;const R=x.map(zu),N=UI(R,M.index,A.index),C=_.map(zu).filter(H=>!R.includes(H)),G=[...N,...C].filter((H,V,W)=>W.indexOf(H)===V);b(G)};return y.jsxs(y.Fragment,{children:[y.jsx("style",{children:"[data-rbd-drag-handle-context-id]{touch-action:none!important}"}),y.jsx("div",{className:`fixed inset-0 bg-black/60 transition-opacity duration-200 z-[1000] ${e?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,onClick:s}),y.jsxs("div",{className:`fixed bottom-0 inset-x-0 mx-auto w-full max-w-[640px] max-h-[80dvh] bg-white dark:bg-neutral-950 rounded-t-2xl border border-neutral-200 dark:border-neutral-800 p-4 overflow-auto transition-transform duration-300 z-[1001] ${e?"translate-y-0":"translate-y-full"}`,children:[y.jsxs("div",{className:"flex items-center justify-between mb-3",children:[y.jsx("h3",{className:"text-sm font-semibold text-neutral-900 dark:text-neutral-200",children:" "}),y.jsx("button",{onClick:s,className:"text-neutral-500 hover:text-neutral-900 dark:text-neutral-400 dark:hover:text-white text-sm cursor-pointer",children:""})]}),y.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[y.jsx("input",{placeholder:" ",value:o,onChange:k=>l(k.target.value),className:"flex-1 px-3 py-2 rounded bg-white dark:bg-neutral-900 border border-neutral-300 dark:border-neutral-700 text-sm text-neutral-900 dark:text-neutral-100"}),!S&&y.jsx("span",{className:"text-[11px] text-neutral-500 dark:text-neutral-400 whitespace-nowrap",children:"    "})]}),y.jsx(yd,{onDragEnd:T,children:y.jsx(il,{droppableId:"peopleList",children:k=>y.jsxs("ul",{ref:k.innerRef,...k.droppableProps,className:"flex flex-col gap-2 max-h-[60vh] overflow-y-auto",children:[x.map((A,M)=>{const R=String(zu(A)),N=Vm(A);return y.jsx(_c,{draggableId:R,index:M,children:D=>y.jsx("li",{ref:D.innerRef,...D.draggableProps,...D.dragHandleProps,onClick:()=>n(A),className:"w-full text-left p-3 rounded border bg-white dark:bg-neutral-900 border-neutral-300 dark:border-neutral-800 cursor-grab select-none active:cursor-grabbing",children:y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:"mr-2 select-none",children:""}),y.jsxs("div",{className:"flex-1 min-w-0",children:[y.jsx("div",{className:"text-neutral-900 dark:text-neutral-50 text-sm truncate",children:mm(A)}),y.jsx("div",{className:"text-neutral-500 dark:text-neutral-400 text-xs",children:Xu(N)})]})]})})},R)}),k.placeholder]})})})]})]})}function Wg({label:e,gzHour:t,gzDay:n,gzMonth:s,gzYear:o,dayStem:l,cardSettings:u,sinsalBaseBranch:f,sinsalMode:m,sinsalBloom:p}){const b=k=>{const A=u.showSibiUnseong?Xt(l,k):"",M=u.showSibiSinsal?Jt({baseBranch:f,targetBranch:k,era:zI(m),gaehwa:!!p}):"";return{unseongText:A||void 0,shinsalText:M||void 0}},_=ln(t).charAt(1),x=ln(n).charAt(1),S=ln(s).charAt(1),T=ln(o).charAt(1);return y.jsxs("div",{className:"rounded-lg border bg-white dark:bg-neutral-900 border-neutral-200 dark:border-neutral-800 py-2 desk:p-2",children:[y.jsx("div",{className:"px-2 py-1 text-xs text-neutral-600 dark:text-neutral-300",children:e}),y.jsx("div",{className:"grid grid-cols-4 gap-1 text-neutral-900 dark:text-white",children:[["",ln(t),_],["",ln(n),x],["",ln(s),S],["",ln(o),T]].map(([k,A,M])=>{const{unseongText:R,shinsalText:N}=b(M);return y.jsx(cc,{label:k,gz:A,dayStem:l,settings:br.getState().settings,unseongText:R,shinsalText:N,hideBranchSipSin:!0,size:"sm"},`${e}-${k}`)})})]})}function HI(e){if(!e)return"";const t=e,n=f=>typeof t[f]=="string"?String(t[f]).trim().toLowerCase():null,s=f=>typeof t[f]=="boolean"?t[f]:null,o=[n("gender"),n("sex"),n("genderType"),n(""),n("sexType"),n("g")].filter(f=>!!f);for(const f of o){if(["","","male","m","boy","man"].includes(f))return"";if(["","","female","f","girl","woman"].includes(f))return""}const l=s("isMale"),u=s("isFemale");return l===!0?"":u===!0?"":""}function ic({label:e,data:t,mode:n,effectiveDate:s,onPick:o}){const l=br(C=>C.settings),u=P.useMemo(()=>t?Vm(t):null,[t]),f=ln(u?Pi(u,"/"):void 0),m=ln(u?_t(u,"/"):void 0),p=ln(u?At(u):void 0),b=ln(u?ut(u):void 0),_=P.useMemo(()=>m.charAt(0)||"",[m]),x=u,S=P.useMemo(()=>{const C=t?.birthPlace;return!C||C.name===""||!C.lon?127.5:C.lon},[t]),T=t?.mingSikType??"/",k=P.useMemo(()=>{const C=x?_t(x,T).charAt(1):m.charAt(1)||"",G=x?ut(x,S).charAt(1):b.charAt(1)||"";return(l.sinsalBase??"")===""?C:G},[l.sinsalBase,x,T,S,m,b]),A=P.useMemo(()=>{if(n!==""||!u||!t)return null;try{const C=Dk(u,f,t.dir,120,t.mingSikType),G=Ck(C,m,t.dir,t.DayChangeRule),H=xd(u,p,t.dir,120,t?.birthPlace?.lon??127.5),V=Rk(H,b,t.dir,t.DayChangeRule,u),W=s;return{si:ln(Af(C.events,W)?.gz,f),il:ln(Af(G.events,W)?.gz,m),wl:ln(Af(H.events,W)?.gz,p),yn:ln(Af(V.events,W)?.gz,b)}}catch{return null}},[n,u,f,m,p,b,s,t]),M=P.useMemo(()=>{if(n!=="")return null;const C=s;return{si:ln(Pi(C,"/")),il:ln(_t(C,"/")),wl:ln(At(C)),yn:ln(ut(C))}},[n,s]),R=t?mm(t):"",N=u?Xu(u):"",D=t?HI(t):"";return t?y.jsxs("div",{className:"space-y-2",children:[y.jsx("button",{onClick:o,className:"px-3 py-1 rounded text-xs bg-neutral-900 dark:bg-white text-white dark:text-neutral-900 border border-neutral-900 dark:border-white hover:opacity-90 cursor-pointer",title:" ",children:" "}),y.jsxs("div",{className:"text-[11px] text-neutral-600 dark:text-neutral-300",children:[y.jsx("span",{className:"font-semibold text-neutral-900 dark:text-neutral-200",children:e}),y.jsx("span",{className:"ml-2 text-neutral-900 dark:text-neutral-50",children:R}),D&&y.jsxs("span",{className:"ml-1 text-neutral-500 dark:text-neutral-400",children:[" ",D]}),N&&y.jsx("span",{className:"block desk:inline-block mt-1 text-neutral-500 dark:text-neutral-400 text-[10px]",children:N})]}),n===""&&y.jsx(Wg,{label:"",gzHour:f,gzDay:m,gzMonth:p,gzYear:b,dayStem:_,cardSettings:l,sinsalBaseBranch:k,sinsalMode:l.sinsalMode,sinsalBloom:!!l.sinsalBloom}),n===""&&A&&y.jsx(Wg,{label:"",gzHour:A.si,gzDay:A.il,gzMonth:A.wl,gzYear:A.yn,dayStem:_,cardSettings:l,sinsalBaseBranch:k,sinsalMode:l.sinsalMode,sinsalBloom:!!l.sinsalBloom}),n===""&&M&&y.jsx(Wg,{label:"",gzHour:M.si,gzDay:M.il,gzMonth:M.wl,gzYear:M.yn,dayStem:_,cardSettings:l,sinsalBaseBranch:k,sinsalMode:l.sinsalMode,sinsalBloom:!!l.sinsalBloom})]}):y.jsx("div",{className:"flex items-center justify-center h-48 rounded-lg border border-dashed bg-white dark:bg-neutral-900 border-neutral-300 dark:border-neutral-700",children:y.jsx("button",{onClick:o,className:"px-3 py-2 rounded bg-neutral-900 dark:bg-white text-white dark:text-neutral-900 text-sm hover:opacity-90 cursor-pointer",children:" "})})}function GI({people:e=[]}){const[t,n]=P.useState(),[s,o]=P.useState(),[l,u]=P.useState(!1),[f,m]=P.useState(!1),p=P.useRef(new Date),[b,_]=P.useState(()=>BI(p.current)),x=P.useRef(h2(b)??p.current),S=P.useMemo(()=>{const N=h2(b);return N&&(x.current=N),x.current},[b]),[T,k]=P.useState(!1),[A,M]=P.useState(!1);function R(N){if(!N)return["","","",""];try{const D=Vm(N),C={hour:ln(Pi(D,"/")),day:ln(_t(D,"/")),month:ln(At(D)),year:ln(ut(D))};return[C.year,C.month,C.day,C.hour]}catch{return["","","",""]}}return y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"w-[96%] max-w-[640px] mx-auto bg-white dark:bg-neutral-950 text-neutral-900 dark:text-neutral-100 rounded-xl shadow border border-neutral-200 dark:border-neutral-800 px-2 py-4 desk:p-4",children:[y.jsxs("header",{className:"flex gap-3 justify-between items-center mb-4",children:[y.jsx("div",{className:"font-semibold text-sm text-neutral-900 dark:text-neutral-200",children:" "}),y.jsxs("div",{className:"flex items-center gap-4 text-xs text-neutral-600 dark:text-neutral-400",children:[y.jsxs("label",{className:"flex items-center gap-1 cursor-pointer",children:[y.jsx("input",{type:"checkbox",checked:l,onChange:N=>u(N.target.checked),className:"accent-indigo-500"})," "]}),y.jsx("button",{onClick:()=>m(N=>!N),className:"px-2 py-1 rounded border border-neutral-300 dark:border-neutral-700 hover:border-indigo-500 text-neutral-700 dark:text-neutral-300 bg-white dark:bg-neutral-900 cursor-pointer",children:f?"  ":"  "})]})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-2 desk:gap-4",children:[y.jsx(ic,{label:" A",data:t,mode:"",effectiveDate:S,onPick:()=>k(!0)}),y.jsx(ic,{label:" B",data:s,mode:"",effectiveDate:S,onPick:()=>M(!0)}),l&&t&&y.jsx(ic,{label:" A",data:t,mode:"",effectiveDate:S,onPick:()=>k(!0)}),l&&s&&y.jsx(ic,{label:" B",data:s,mode:"",effectiveDate:S,onPick:()=>M(!0)}),f&&t&&y.jsx(ic,{label:" A",data:t,mode:"",effectiveDate:S,onPick:()=>k(!0)}),f&&s&&y.jsx(ic,{label:" B",data:s,mode:"",effectiveDate:S,onPick:()=>M(!0)})]}),t&&s&&y.jsx("div",{className:"mt-4",children:y.jsx(OI,{pillarsA:R(t),pillarsB:R(s)})}),y.jsxs("div",{className:"mt-4 max-w-[260px] mx-auto text-center",children:[y.jsx("label",{className:"min-w-0 block text-xs text-neutral-600 dark:text-neutral-400 mb-2",children:"/ "}),y.jsx("input",{type:"datetime-local",value:b,onChange:N=>_(N.target.value),className:"min-w-0 bg-white dark:bg-neutral-900 border border-neutral-300 dark:border-neutral-700 rounded px-3 py-1 text-xs w-[260px] max-w-[260px] box-border overflow-x-hidden text-neutral-900 dark:text-neutral-100 h-30",min:"1900-01-01T00:00",max:"2100-12-31T23:59"})]})]}),y.jsx(f2,{open:T,list:e||[],onSelect:N=>{n(N),k(!1)},onClose:()=>k(!1)}),y.jsx(f2,{open:A,list:e||[],onSelect:N=>{o(N),M(!1)},onClose:()=>M(!1)})]})}function FI(){return y.jsx("footer",{className:"py-8 px-4 border-t border-neutral-200 dark:border-neutral-700 ",children:y.jsx("p",{className:"text-center text-[12px] text-orange-600 dark:text-orange-300",children:"Copyright  2025 Hwarim96. All rights reserved."})})}function YI({ms:e}){const{date:t,setDate:n}=hi();P.useEffect(()=>{n(new Date)},[e]);const s=By(e),o=P.useMemo(()=>{const f=t??new Date,m=f.getFullYear(),p=String(f.getMonth()+1).padStart(2,"0"),b=String(f.getDate()).padStart(2,"0");return`${m}-${p}-${b}`},[t]),l=f=>{if(!f)return;const[m,p,b]=f.split("-"),_=Number(m),x=Number(p),S=Number(b);if(!Number.isFinite(_)||!Number.isFinite(x)||!Number.isFinite(S))return;const T=t??new Date,k=T.getHours(),A=T.getMinutes(),M=new Date(_,x,0).getDate(),R=Math.min(S,M),N=new Date(_,x-1,R,k,A,0,0);Number.isNaN(N.getTime())||n(N)},u=P.useMemo(()=>{const f=e.ganji,m=s?.dae?.gz?`${s.dae.gz}`:null,p=s?.se?.gz?`${s.se.gz}`:null,b=s?.wol?.gz?`${s.wol.gz}`:null,_=[m,p,b].filter(Boolean).join(" ");return[f,_].filter(Boolean).join(" + ")},[e,s]);return y.jsxs("div",{className:"max-w-[640px] mx-auto mb-4 rounded-xl border border-neutral-200 dark:border-neutral-800 bg-white dark:bg-neutral-950 p-3 space-y-3",children:[u&&y.jsx("div",{className:"text-center text-sm font-medium text-neutral-800 dark:text-neutral-200",children:u}),y.jsx("div",{className:"grid grid-cols-1 gap-3",children:y.jsxs("label",{className:"w-full flex justify-center items-center",children:[y.jsx("span",{className:"text-sm text-neutral-500 mr-4",children:""}),y.jsx("input",{type:"date",value:o,onChange:f=>l(f.target.value),min:"1900-01-01",max:"2100-12-31",className:"w rounded-md border border-neutral-300 dark:border-neutral-700 bg-transparent px-2 py-1 text-sm"})]})})]})}const qI=["23:0000:59","01:0002:59","03:0004:59","05:0006:59","07:0008:59","09:0010:59","11:0012:59","13:0014:59","15:0016:59","17:0018:59","19:0020:59","21:0022:59"];function ZI(e){const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),s=String(e.getDate()).padStart(2,"0");return`${t}-${n}-${s}`}function jf(e,t){return e&&t?`${e}${t}`:null}function m2(e){return!!(e.yearStem&&e.yearBranch&&e.monthStem&&e.monthBranch&&e.dayStem&&e.dayBranch&&e.hourStem&&e.hourBranch)}const VI={:0,:1,:2,:3,:4,:5,:6,:7,:8,:9},KI=Li.,WI=["","","","","","","","","","","",""];function p2(e,t){let n;e===""||e===""?n="":e===""||e===""?n="":e===""||e===""?n="":e===""||e===""?n="":n="";const s=VI[n],o=WI.indexOf(t),l=(s+(o>=0?o:0))%10;return KI[l]}const XI=Li..slice(),JI=["","","","","","","","","","","",""];function sc(e,t){const s=(t===""?L2:Kb)[e],o=t===""?XI:JI,l=Li..reduce((u,f)=>(u[f]="",u),{});for(let u=0;u<12;u++)l[o[u]]=s[u];return l}const QI={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},ez={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};function tz({open:e,onClose:t,onSave:n}){const{settings:s}=br(),[o,l]=P.useState(null),[u,f]=P.useState({}),[m,p]=P.useState(null),[b,_]=P.useState(!0),[x,S]=P.useState(!0),[T,k]=P.useState(""),[A,M]=P.useState("male"),[R,N]=P.useState(null),[D,C]=P.useState(!1),[,G]=P.useState(null),[H,V]=P.useState(null),[W,re]=P.useState({gender:"",mingSikType:"/",DayChangeRule:"",calendarType:"solar"}),[ee,q]=P.useState(!1),[te,oe]=P.useState(null),Se=me=>{oe(me),setTimeout(()=>oe(null),1800)},[X,ae]=P.useState(!1),[J,ye]=P.useState(!1);P.useEffect(()=>{if(X){const me=setTimeout(()=>ae(!1),2e3);return()=>clearTimeout(me)}},[X]),P.useEffect(()=>{if(J){const me=setTimeout(()=>ye(!1),2e3);return()=>clearTimeout(me)}},[J]);const K=()=>{const me=H!==null?R?.filter((Tn,On)=>On===H)??[]:[];if(me.length===0){alert("  .");return}const Ie=T===""?"/":"",le=me[0],[he,Pe,Fe]=le.date.split("-").map(Number),Ge={:{hh:0,mi:0},:{hh:2,mi:0},:{hh:4,mi:0},:{hh:6,mi:0},:{hh:8,mi:0},:{hh:10,mi:0},:{hh:12,mi:0},:{hh:14,mi:0},:{hh:16,mi:0},:{hh:18,mi:0},:{hh:20,mi:0},:{hh:22,mi:0}};let st=0,et=0;if(le.hourSlots.length>0){const Tn=le.hourSlots[0].branch,On=Ge[Tn];On&&(st=On.hh,et=On.mi)}const qt=new Date(he,Pe-1,Fe,st,et),Sn=new Date(qt.getTime()-30*6e4),En=Sn.toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit",hour12:!1}),ar=A==="male"?"":"";function yr(Tn,On){const jr=["","","","","","","","","",""].includes(Tn),or=On==="";return jr?or?"forward":"backward":or?"backward":"forward"}const un=yr(le.year.charAt(0),ar),Mt=ut(Sn,127.5),gn=At(Sn,127.5),dn=_t(Sn,Ie),Yr=Pi(Sn,Ie),ra=[` : ${Mt} ${gn} ${dn}`,Yr?`${Yr}`:null].filter(Boolean).join(" "),zi={id:q2(),name:"",birthDay:`${he}${String(Pe).padStart(2,"0")}${String(Fe).padStart(2,"0")}`,birthTime:`${String(st).padStart(2,"0")}${String(et).padStart(2,"0")}`,gender:ar,birthPlace:ee?{name:"",lat:0,lon:127.5}:W.birthPlace??{name:"",lat:0,lon:127.5},relationship:W.relationship??"",memo:W.memo??"",folder:sl(W.folder),mingSikType:W.mingSikType??"/",DayChangeRule:W.mingSikType===""?"":"",calendarType:W.calendarType??"solar",yearGZ:le.year,monthGZ:le.month,dayGZ:le.day,hourGZ:le.hour,ganjiText:` : ${le.year} ${le.month} ${le.day} ${le.hour}`,ganji:ra,dayStem:le.day.charAt(0),dateObj:qt,corrected:Sn,correctedLocal:En,dir:un};Sm.flushSync(()=>{ss.getState().add(zi)}),n(zi),oe(" !"),re({gender:"",mingSikType:"/",calendarType:"solar"}),q(!1),t()},U=b||x,$=!!(u.yearStem&&u.yearBranch),F=!!(u.dayStem&&u.dayBranch),Z=!U||$||F,B=!!m&&m.endsWith("Stem"),Y=!!m&&m.endsWith("Branch");function ie(me){return me==="yearStem"?"yearBranch":me==="yearBranch"?"yearStem":me==="monthStem"?"monthBranch":me==="monthBranch"?"monthStem":me==="dayStem"?"dayBranch":me==="dayBranch"?"dayStem":me==="hourStem"?"hourBranch":"hourStem"}const fe=P.useCallback((me,Ie)=>{if(!b||!me.yearStem)return me;const le={...me},he=Kb[me.yearStem];if(!he)return le;const Pe=Ge=>he.filter(st=>st.startsWith(Ge)),Fe=Ge=>he.find(st=>st.endsWith(Ge));if(Ie==="monthStem"&&le.monthStem){const Ge=Pe(le.monthStem).map(st=>st.slice(1));return Ge.length>=2?(l(Ge.slice(0,2)),p("monthBranch"),le):(Ge.length===1&&(le.monthBranch=Ge[0],l(null)),le)}if(Ie==="monthBranch"&&le.monthBranch){const Ge=Fe(le.monthBranch);return Ge&&(le.monthStem=Ge.slice(0,1),l(null)),le}if(Ie==="yearStem"){if(le.monthStem&&!le.monthBranch){const Ge=Pe(le.monthStem).map(st=>st.slice(1));if(Ge.length>=2)return l(Ge.slice(0,2)),p("monthBranch"),le;Ge.length===1&&(le.monthBranch=Ge[0])}else if(le.monthBranch&&!le.monthStem){const Ge=Fe(le.monthBranch);Ge&&(le.monthStem=Ge.slice(0,1))}}return le},[b,p]),ce=P.useCallback((me,Ie)=>{if(!x||!me.dayStem)return me;const le={...me},he=sc(me.dayStem,T),Pe=Ge=>Object.entries(he).find(([,st])=>st.startsWith(Ge)),Fe=Ge=>he[Ge];if(Ie==="hourStem"&&le.hourStem){const Ge=Pe(le.hourStem);return Ge&&(le.hourBranch=Ge[0]),le}if(Ie==="hourBranch"&&le.hourBranch){const Ge=Fe(le.hourBranch);return Ge&&(le.hourStem=Ge.slice(0,1)),le}if(Ie==="dayStem"){if(le.hourStem&&!le.hourBranch){const Ge=Pe(le.hourStem);Ge&&(le.hourBranch=Ge[0])}else if(le.hourBranch&&!le.hourStem){const Ge=Fe(le.hourBranch);Ge&&(le.hourStem=Ge.slice(0,1))}}return le},[x,T]),xe=P.useCallback(me=>!b||!me.yearStem?!1:me.monthBranch&&me.monthStem?p2(me.yearStem,me.monthBranch)!==me.monthStem:!1,[b]),ke=P.useCallback(me=>{if(!x||!me.dayStem)return!1;if(me.hourBranch&&me.hourStem){const le=sc(me.dayStem,T)[me.hourBranch];return le?le.slice(0,1)!==me.hourStem:!1}return!1},[x,T]);P.useEffect(()=>{if(!(!x||!u.dayStem||!u.hourBranch)&&(u.hourBranch===""||u.hourBranch==="")){const Ie=sc(u.dayStem,T)[u.hourBranch];Ie&&f(le=>({...le,hourStem:Ie.slice(0,1)}))}},[T,x,u.dayStem,u.hourBranch]);const je=P.useCallback(me=>{if(!m)return;if(!Z&&!(m==="yearStem"||m==="yearBranch"||m==="dayStem"||m==="dayBranch")){G("/  :    ."),setTimeout(()=>G(null),1500);return}let le={...u,[m]:me};(m==="yearStem"||m==="monthStem"||m==="monthBranch")&&(le=fe(le,m)),(m==="dayStem"||m==="hourStem"||m==="hourBranch")&&(le=ce(le,m)),f(le);let he=!1;xe(le)&&(_(!1),he=!0),ke(le)&&(S(!1),he=!0),he&&Se("/  .   ."),f(le),N(null);const Pe=ie(m);p(Pe),setTimeout(()=>{const Fe={...le};if(Fe.yearStem&&Fe.yearBranch&&!Fe.monthStem){p("monthStem");return}if(Fe.monthStem&&Fe.monthBranch&&!Fe.dayStem){p("dayStem");return}if(Fe.dayStem&&Fe.dayBranch&&!Fe.hourStem){p("hourStem");return}},0)},[m,u,Z,fe,ce,xe,ke]),Me=m2(u),Ee=P.useCallback(async()=>{if(N(null),G(null),!m2(u)){G("   .");return}const me=jf(u.yearStem,u.yearBranch),Ie=jf(u.monthStem,u.monthBranch),le=jf(u.dayStem,u.dayBranch),he=jf(u.hourStem,u.hourBranch),Pe=300,Fe=[];C(!0);try{const Ge=new Date(1900,0,1,12,0,0),st=new Date(2100,11,31,12,0,0);for(let et=Ge.getTime();et<=st.getTime();et+=24*3600*1e3){const qt=new Date(et),Sn=T===""?"/":"",En=ut(qt);if(En!==me)continue;const ar=At(qt);if(ar!==Ie)continue;const yr=_t(qt,Sn);if(yr!==le)continue;const un=sc(u.dayStem,T),Mt=[];for(let gn=0;gn<12;gn++){const dn=Li.[gn];un[dn]===he&&Mt.push({branch:dn,time:qI[gn]})}if(Mt.length!==0&&(Fe.push({date:ZI(qt),year:En,month:ar,day:yr,hour:he,hourSlots:Mt}),Fe.length>=Pe))break}Fe.length===0&&G("  . (: 19002100)"),N(Fe)}catch(Ge){Ge instanceof Error?G(Ge.message):G(String(Ge))}finally{C(!1)}},[u,T]),Be=()=>{f({}),N(null),G(null),p(null)},Ce=me=>{N(null),me&&f(Ie=>{const le={...Ie};return le.yearStem&&le.monthBranch&&(le.monthStem=p2(le.yearStem,le.monthBranch)),le}),_(me)},Le=me=>{N(null),me&&f(Ie=>{const le={...Ie};if(le.dayStem&&le.hourBranch){const Pe=sc(le.dayStem,T)[le.hourBranch];Pe&&(le.hourStem=Pe.slice(0,1))}return le}),S(me)};if(!e)return null;const Ue=me=>{if(N(null),k(me),x&&u.dayStem&&u.hourBranch&&(u.hourBranch===""||u.hourBranch==="")){const le=sc(u.dayStem,me)[u.hourBranch];le&&f(he=>({...he,hourStem:le.slice(0,1)}))}};return y.jsx("div",{className:"fixed min-w-[320px] inset-0 z-[1000] flex items-center justify-center bg-black/50",children:y.jsxs("div",{className:"bg-white max-w-[360px] dark:bg-neutral-900 rounded-xl shadow-xl w-full max-w-5xl p-4 relative",children:[y.jsx("button",{onClick:t,className:"absolute top-3 right-3 text-neutral-500 hover:text-neutral-800 dark:hover:text-neutral-200 cursor-pointer","aria-label":"",children:y.jsx(AA,{size:20})}),y.jsx("h2",{className:"text-lg font-semibold mb-4",children:"  "}),y.jsxs("div",{className:"flex flex-wrap items-center gap-6 mb-4",children:[y.jsxs("div",{children:[y.jsx("p",{className:"font-medium mb-2",children:"/"}),y.jsxs("span",{className:"mr-3 chkContainer",children:[y.jsx("input",{type:"checkbox",id:"useWoldu",checked:b,onChange:me=>Ce(me.target.checked)}),y.jsx("label",{htmlFor:"useWoldu",className:"ml-1",children:" "})]}),y.jsxs("span",{className:"chkContainer",children:[y.jsx("input",{type:"checkbox",id:"useSidu",checked:x,onChange:me=>Le(me.target.checked)}),y.jsx("label",{htmlFor:"useSidu",className:"ml-1",children:" "})]})]}),y.jsxs("div",{children:[y.jsx("p",{className:"font-medium mb-2",children:" "}),y.jsxs("span",{className:"mr-3 chkContainer",children:[y.jsx("input",{type:"radio",id:"jasi",checked:T==="",onChange:()=>Ue("")}),y.jsx("label",{htmlFor:"jasi",className:"ml-1",children:""})]}),y.jsxs("span",{className:"chkContainer",children:[y.jsx("input",{type:"radio",id:"insi",checked:T==="",onChange:()=>Ue("")}),y.jsx("label",{htmlFor:"insi",className:"ml-1",children:""})]})]}),y.jsxs("div",{children:[y.jsx("p",{className:"font-medium mb-2",children:""}),y.jsxs("span",{className:"mr-3 chkContainer",children:[y.jsx("input",{type:"radio",id:"male",checked:A==="male",onChange:()=>M("male")}),y.jsx("label",{htmlFor:"male",className:"ml-1",children:""})]}),y.jsxs("span",{className:"chkContainer",children:[y.jsx("input",{type:"radio",id:"female",checked:A==="female",onChange:()=>M("female")}),y.jsx("label",{htmlFor:"female",className:"ml-1",children:""})]})]})]}),U&&!Z&&y.jsxs("div",{className:"mb-3 text-sm text-orange-700 bg-orange-50 dark:text-orange-300 dark:bg-orange-900/30 rounded p-2 text-center",children:["/  . ",y.jsx("br",{}),y.jsx("b",{children:""}),"  ",y.jsx("b",{children:""}),"  ."]}),y.jsx("div",{className:"grid grid-cols-4 gap-2 mb-4",children:[["hourStem",""],["dayStem",""],["monthStem",""],["yearStem",""],["hourBranch",""],["dayBranch",""],["monthBranch",""],["yearBranch",""]].map(([me,Ie])=>{const le=!Z&&!(me==="yearStem"||me==="yearBranch"||me==="dayStem"||me==="dayBranch"),he=m===me;return y.jsxs("button",{onClick:()=>!le&&p(me),disabled:le,className:["border rounded p-2 text-center cursor-pointer",he?"border-purple-500 bg-purple-100 dark:bg-purple-900/30":"border-neutral-300 dark:border-neutral-700",le?"opacity-50 cursor-not-allowed":""].join(" "),children:[Ie,y.jsx("br",{}),y.jsx("span",{className:"font-bold",children:u[me]??"-"})]},me)})}),o&&o.length>0&&y.jsxs("div",{className:"mb-3",children:[y.jsx("p",{className:"text-sm mb-1",children:"  :"}),y.jsx("div",{className:"flex gap-2",children:o.map(me=>y.jsx("button",{onClick:()=>{let Ie={...u,monthBranch:me};l(null),Ie=fe(Ie,"monthBranch"),f(Ie),p("dayStem")},className:"flex-1 px-2 py-1 border rounded hover:bg-orange-100 dark:hover:bg-orange-800 cursor-pointer",children:me},me))})]}),y.jsx("div",{className:"flex w-full flex-wrap gap-6 mb-4",children:m?y.jsxs("div",{className:"w-full",children:[B&&y.jsxs("div",{children:[y.jsx("p",{className:"font-medium mb-2",children:""}),y.jsx("div",{className:"grid grid-cols-5 gap-2",children:Li..map(me=>y.jsx("button",{onClick:()=>je(me),className:`border rounded px-2 py-1 cursor-pointer ${di(me,"stem",s)}`,children:me},me))})]}),Y&&y.jsxs("div",{children:[y.jsx("p",{className:"font-medium mb-2",children:""}),y.jsx("div",{className:"grid grid-cols-6 gap-2",children:Li..filter(me=>{const Ie=ie(m),le=u[Ie];return le?ez[me]===QI[le]:!0}).map(me=>y.jsx("button",{onClick:()=>je(me),className:`border rounded px-2 py-1 cursor-pointer ${di(me,"branch",s)}`,children:me},me))})]})]}):y.jsx("div",{className:"text-sm text-neutral-500 p-2 border rounded w-full text-center",children:"    ."})}),y.jsxs("div",{className:"flex justify-between items-center gap-3 mb-4",children:[y.jsx("span",{children:y.jsx("button",{type:"button",onClick:()=>{if(!Me){ae(!0);return}Ee()},disabled:D,className:"px-2 py-1 rounded-md bg-blue-600 text-white disabled:opacity-50 cursor-pointer",children:D?" ...":""})}),y.jsxs("span",{className:"flex items-center gap-2",children:[y.jsx("button",{type:"button",onClick:Be,className:"px-2 py-1 rounded-md bg-red-600 border border-neutral-300 dark:border-neutral-700 cursor-pointer",children:""}),y.jsx("button",{type:"button",onClick:()=>{if((H!==null?R?.filter((Ie,le)=>le===H)??[]:[]).length===0){ye(!0);return}K()},className:"px-2 py-1 rounded-md border bg-yellow-600 border-neutral-300 dark:border-neutral-700 cursor-pointer",children:""})]})]}),y.jsx("div",{className:"max-h-[40vh] overflow-auto rounded border border-neutral-200 dark:border-neutral-800",children:R?R.length===0?y.jsx("div",{className:"p-4 text-neutral-500",children:"  ."}):y.jsxs("table",{className:"w-full text-xs",children:[y.jsx("thead",{className:"sticky top-0 bg-neutral-50 dark:bg-neutral-800",children:y.jsxs("tr",{children:[y.jsx("th",{className:"p-1 text-center",children:""}),y.jsx("th",{className:"p-1 text-center",children:""}),y.jsx("th",{className:"p-1 text-center",children:""}),y.jsx("th",{className:"p-1 text-center",children:""}),y.jsx("th",{className:"p-1 text-center",children:""}),y.jsx("th",{className:"p-1 text-center",children:""}),y.jsx("th",{className:"p-1 text-center",children:""})]})}),y.jsx("tbody",{children:R.map((me,Ie)=>y.jsxs("tr",{className:"border-t border-neutral-200 dark:border-neutral-800",children:[y.jsx("td",{className:"p-1 text-center",children:y.jsxs("span",{className:"chkContainer",children:[y.jsx("input",{type:"radio",name:"selectRow",id:`selectRow-${Ie}`,checked:H===Ie,onChange:()=>V(Ie)}),y.jsx("label",{htmlFor:`selectRow-${Ie}`,children:"ON"})]})}),y.jsx("td",{className:"p-1 text-center",children:me.date}),y.jsx("td",{className:"p-1 text-center",children:me.year}),y.jsx("td",{className:"p-1 text-center",children:me.month}),y.jsx("td",{className:"p-1 text-center",children:me.day}),y.jsx("td",{className:"p-1 text-center",children:y.jsx("div",{className:"flex flex-wrap gap-1",children:me.hourSlots.map((le,he)=>y.jsx("span",{className:"inline-flex items-center mx-auto gap-1 px-1 py-0.5 rounded bg-neutral-100 dark:bg-neutral-800 border border-neutral-200 dark:border-neutral-700",children:y.jsx("b",{children:le.branch})},he))})}),y.jsx("td",{className:"p-1 text-center",children:A==="male"?"":""})]},`${me.date}-${Ie}`))})]}):y.jsx("div",{className:"p-2 text-neutral-500 text-sm text-center",children:"   ."})}),te&&y.jsx("div",{className:"pointer-events-none fixed left-1/2 -translate-x-1/2 top-6 z-[1100] border border-white/30",children:y.jsx("div",{className:"px-4 py-2 rounded-md bg-black/80 text-white text-sm shadow-lg",children:te})}),X&&y.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-[2000]",children:y.jsx("div",{className:"bg-black text-white px-4 py-2 rounded-lg shadow-lg",children:" 4  ."})}),J&&y.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-[2000]",children:y.jsxs("div",{className:"bg-black text-white px-4 py-2 rounded-lg shadow-lg text-center",children:[" .",y.jsx("br",{})," ,  ."]})})]})})}const NA=md(e=>({shinsalBase:"",shinsalEra:"",shinsalGaehwa:!1,hiddenStemMode:"hgc",setShinsalBase:t=>e({shinsalBase:t}),setShinsalEra:t=>e({shinsalEra:t}),setShinsalGaehwa:t=>e({shinsalGaehwa:t}),setHiddenStemMode:t=>e({hiddenStemMode:t})}));function pm(e){if(!e)return["","","",""];let t=Number(e.birthDay?.slice(0,4)??2e3),n=Number(e.birthDay?.slice(4,6)??1),s=Number(e.birthDay?.slice(6,8)??1);if(e.calendarType==="lunar"){const N=pr(t,n,s);t=N.getFullYear(),n=N.getMonth()+1,s=N.getDate()}const o=!e.birthTime||e.birthTime==="",l=o?4:Number(e.birthTime.slice(0,2)),u=o?30:Number(e.birthTime.slice(2,4)),f=new Date(t,n-1,s,l,u,0,0),m=!e.birthPlace||e.birthPlace.name===""||!e.birthPlace.lon?127.5:e.birthPlace.lon,p=cl(f,m,o),b=e.mingSikType??"/",_=ut(p,m),x=At(p,m),S=_t(p,b),T=o?null:Pi(p,b),k=He(_),A=He(x),M=He(S),R=T?He(T):"";return[k,A,M,R]}function OA(e){const t=new Date(e.corrected),n=pm(e),s=n[0].charAt(0),l=["","","","",""].includes(s),u=e.gender==="",f=u&&l||!u&&!l?"forward":"backward",m=xd(t,n[1],f,120,e.birthPlace?.lon??127.5),p=m.firstChange;if(!p)return[];const b=[];let _=He(m.events[0]?.gz??n[1]);for(let x=0;x<10;x++){const S=new Date(p);if(S.setFullYear(S.getFullYear()+x*10),x>0){const T=m.events[x];T&&(_=He(T.gz))}b.push(`${S.getFullYear()} ${String(S.getMonth()+1).padStart(2,"0")} ${_}  `)}return b}const nz=!1,g2=e=>e<10?`0${e}`:`${e}`;function DA(e){const t=e,n=typeof t.birthDay=="string"?t.birthDay:"",s=typeof t.calendarType=="string"?t.calendarType:"solar";if(n.length<8)return e;const o=Number(n.slice(0,4)),l=Number(n.slice(4,6)),u=Number(n.slice(6,8));if(s==="lunar")try{const f=pr(o,l,u,0,0),m=`${f.getFullYear()}${g2(f.getMonth()+1)}${g2(f.getDate())}`;return{...e,birthDay:m,calendarType:"solar"}}catch{return e}return e}const Yu={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},qu={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},dd={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Nf={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},rz=["","","","",""];function b2(e){return rz.includes(e)}const MA={:"",:"",:"",:"",:""},CA={:"",:"",:"",:"",:""},RA={:"",:"",:"",:"",:""},LA={:"",:"",:"",:"",:""};function Hb(e){if(!e)return null;const t=e.trim();if(["","","","","","","","","",""].includes(t))return t;if(Yu[t])return Yu[t];if(["","","","","","","","","","","",""].includes(t))return Nf[t]??null;if(qu[t])return Nf[qu[t]]??null;const n=t.charAt(0);return Yu[n]?Yu[n]:["","","","","","","","","",""].includes(n)?n:qu[n]?Nf[qu[n]]??null:["","","","","","","","","","","",""].includes(n)?Nf[n]??null:null}function iz(e,t){const n=dd[e],s=dd[t];if(!n||!s)return"";let o;s===n?o="":s===MA[n]?o="":s===CA[n]?o="":s===RA[n]?o="":s===LA[n]?o="":o="";const l=b2(e)===b2(t);switch(o){case"":return l?"":"";case"":return l?"":"";case"":return l?"":"";case"":return l?"":"";case"":return l?"":""}}function BA(e){const t=Object.entries(e),n=t.reduce((p,[,b])=>p+(b>0?b:0),0);if(n<=0)return Object.fromEntries(t.map(([p])=>[p,0]));const s=t.map(([p,b])=>[p,(b>0?b:0)*100/n]),o=s.map(([p,b])=>[p,Math.floor(b)]);let l=o.reduce((p,[,b])=>p+b,0);const u=s.map(([p,b])=>[p,b-Math.floor(b)]).sort((p,b)=>b[1]-p[1]),f=Object.fromEntries(o.map(([p,b])=>[p,b]));let m=0;for(;l<100&&m<u.length;)f[u[m][0]]+=1,l+=1,m+=1;return f}function sz(e){const t={};for(const[n,s]of Object.entries(e??{})){if(s<=0)continue;const o=Hb(n);o&&(t[o]=(t[o]??0)+s)}return t}function az(e){if(!e)return[];const t=Hb(e.charAt(0)),n=Hb(e.charAt(1));return[t,n].filter(Boolean)}function Of(e){const t=az(e),n={};for(const s of t)n[s]=(n[s]??0)+1;return n}function si(e,t){return t===e?"":t===MA[e]?"":t===CA[e]?"":t===RA[e]?"":t===LA[e]?"":""}const oz={:{name:"",element:"",brief:"  ",keywords:" "},:{name:"",element:"",brief:"  ",keywords:" "},:{name:"",element:"",brief:"  ",keywords:" "},:{name:"",element:"",brief:"  ",keywords:" "},:{name:"",element:"",brief:"  ",keywords:""},:{name:"",element:"",brief:"  ",keywords:""},:{name:"",element:"",brief:" ",keywords:"/"},:{name:"",element:"",brief:" ",keywords:"/"},:{name:"",element:"",brief:" ",keywords:""},:{name:"",element:"",brief:" ",keywords:""},:{name:"",element:"",brief:" ()",keywords:""},:{name:"",element:"",brief:" ()",keywords:""},:{name:"",element:"",brief:"  ",keywords:" "},:{name:"",element:"",brief:"  ",keywords:" "},:{name:"",element:"",brief:" ",keywords:"/"},:{name:"",element:"",brief:" ",keywords:"/"},:{name:"",element:"",brief:"   ",keywords:"  "},:{name:"",element:"",brief:"   ",keywords:"  "},:{name:"",element:"",brief:"",keywords:""},:{name:"",element:"",brief:"",keywords:""},:{name:"",element:"",brief:"/ ",keywords:""},:{name:"",element:"",brief:"/ ",keywords:""},:{name:"",element:"",brief:"  ",keywords:"  /"},:{name:"",element:"",brief:"  ",keywords:"  /"},:{name:"",element:"",brief:"",keywords:"/"},:{name:"",element:"",brief:"",keywords:"/"},:{name:"",element:"",brief:"",keywords:""},:{name:"",element:"",brief:"",keywords:""},:{name:"",element:"",brief:"  ",keywords:""},:{name:"",element:"",brief:"  ",keywords:""},:{name:"",element:"",brief:" ",keywords:"/ "},:{name:"",element:"",brief:" ",keywords:"/ "},:{name:"",element:"",brief:"  ",keywords:"/"},:{name:"",element:"",brief:"  ",keywords:"/"},:{name:"",element:"",brief:" ",keywords:" "},:{name:"",element:"",brief:" ",keywords:" "},:{name:"",element:"",brief:"  ()",keywords:"/"},:{name:"",element:"",brief:"  ()",keywords:"/"},:{name:"",element:"",brief:"()",keywords:" "},:{name:"",element:"",brief:"()",keywords:" "},:{name:"",element:"",brief:"( )",keywords:" "},:{name:"",element:"",brief:"( )",keywords:" "},:{name:"",element:"",brief:" ()",keywords:"  "},:{name:"",element:"",brief:" ()",keywords:"  "},:{name:"",element:"",brief:"/ ",keywords:" "},:{name:"",element:"",brief:"/ ",keywords:" "},:{name:"",element:"",brief:" ",keywords:"/"},:{name:"",element:"",brief:" ",keywords:"/"},:{name:"",element:"",brief:"",keywords:""},:{name:"",element:"",brief:"",keywords:""},:{name:"",element:"",brief:"  ",keywords:" "},:{name:"",element:"",brief:"  ",keywords:" "},:{name:"",element:"",brief:"",keywords:" "},:{name:"",element:"",brief:"",keywords:" "},:{name:"",element:"",brief:" ()",keywords:""},:{name:"",element:"",brief:" ()",keywords:""},:{name:"",element:"",brief:"",keywords:""},:{name:"",element:"",brief:"",keywords:""},:{name:"",element:"",brief:"  ",keywords:"/"},:{name:"",element:"",brief:"  ",keywords:"/"}};function lz(e){if(!e||e.length<2)return e;const t=e.charAt(0),n=e.charAt(1),s=Yu[t]??t,o=qu[n]??n;return`${s}${o}`}function ir(e){const t=lz(e),n=oz[t];return n?{...n,code:t}:null}function cz(e){const t={:0,:0,:0,:0,:0};for(const[n,s]of Object.entries(e)){const o=dd[n];o&&(t[o]+=s)}return t}function uz(e,t){const n={:0,:0,:0,:0,:0,:0,:0,:0,:0,:0};for(const[s,o]of Object.entries(e)){if(o<=0)continue;const l=iz(t,s);n[l]+=o}return n}function dz(e){return{:e.+e.,:e.+e.,:e.+e.,:e.+e.,:e.+e.}}const hz={natal:50,dae:30,se:20,wol:7,il:3};function fz(e){const t={};for(const{kind:s,bare:o}of e){const l=hz[s]??0;if(l<=0)continue;const u=BA(o);for(const[f,m]of Object.entries(u))t[f]=(t[f]??0)+m*l}const n=Object.values(t).reduce((s,o)=>s+o,0);if(n>0)for(const s of Object.keys(t))t[s]=t[s]/n*100;return t}function es(e,t,n){const s=sz(e.perStemElementScaled),o=t!==""&&n?.dae?Of(n.dae):{},l=(t===""||t===""||t==="")&&n?.se?Of(n.se):{},u=(t===""||t==="")&&n?.wol?Of(n.wol):{},f=t===""&&n?.il?Of(n.il):{},m=fz([{kind:"natal",bare:s},{kind:"dae",bare:o},{kind:"se",bare:l},{kind:"wol",bare:u},{kind:"il",bare:f}]),p=BA(m),b=cz(p),_=uz(p,e.dayStem),x=dz(_);return{perStemAugBare:p,elementPercent:b,totalsSub:_,totalsMain:x}}function mz(e,t){return e[3]&&e[3]!==""?["","","",!t.birthTime||t.birthTime===""?"()":""]:["","",""]}const Xg=e=>typeof e=="object"&&e!==null&&!Array.isArray(e),Gb=e=>{if(Array.isArray(e)){const t=e.map(Gb).filter(n=>!(n==null||Array.isArray(n)&&n.length===0||Xg(n)&&Object.keys(n).length===0));return t.length>0?t:void 0}if(Xg(e)){const t={};for(const[n,s]of Object.entries(e)){const o=Gb(s);o!==void 0&&(Array.isArray(o)&&o.length===0||Xg(o)&&Object.keys(o).length===0||(t[n]=o))}return Object.keys(t).length>0?t:void 0}if(e!=null)return e},pz=e=>{const t=Gb(e);return t===void 0?"":typeof t=="string"||typeof t=="number"||typeof t=="boolean"?String(t):["```json",JSON.stringify(t,null,2),"```"].join(`
`)},ii=(e,t)=>{const n=pz(t);return n?`## ${e}
${n}`:""};function gz(e){const{ms:t,natal:n,chain:s,basis:o,tab:l,unified:u,percent:f,category:m,topic:p,subTopic:b,relationMode:_,teacherMode:x}=e,S=[He(n[0]??""),He(n[1]??""),He(n[2]??""),He(n[3]??"")],T=OA(t).slice(0,10),k=mr({natal:S,daewoon:l!==""?s?.dae??void 0:void 0,sewoon:l===""||l===""||l===""?s?.se??void 0:void 0,wolwoon:l===""||l===""?s?.wol??void 0:void 0,ilwoon:l===""?s?.il??void 0:void 0}),A=Hr({natal:S,daewoon:l!==""?s?.dae??void 0:void 0,sewoon:l===""||l===""||l===""?s?.se??void 0:void 0,wolwoon:l===""||l===""?s?.wol??void 0:void 0,ilwoon:l===""?s?.il??void 0:void 0}),{shinsalEra:M,shinsalGaehwa:R,shinsalBase:N}=NA.getState(),D=N===""?S[0]?.charAt(1)??"":S[2]?.charAt(1)??"",C=es(u,l,s),G=C.elementPercent,H=C.totalsSub,{flags:V}=gA(S,u.elementScoreRaw),W=`${m} (${f.toFixed(1)}%)  ${[` ${V..||V..||V..||V..?"":""}`,` ${V..||V..||V..||V..?"":""}`,` ${V..||V..?"":""}`].join(", ")}`,re=!t.birthTime||t.birthTime==="";function ee($){const Z=DA($).birthDay??"",B=Z.slice(0,4),Y=Z.slice(4,6),ie=Z.slice(6,8);let fe="";if($.corrected instanceof Date&&!isNaN($.corrected.getTime())){const ce=String($.corrected.getHours()).padStart(2,"0"),xe=String($.corrected.getMinutes()).padStart(2,"0");fe=re?"":`${ce}:${xe}`}return`${B} ${Y} ${ie}  ${fe}`}function q($,F){if(!F)return"()";const Z=[];return($===""||$===""||$===""||$==="")&&F.dae&&Z.push(`:${He(F.dae)}`),($===""||$===""||$==="")&&F.se&&Z.push(`:${He(F.se)}`),($===""||$==="")&&F.wol&&Z.push(`:${He(F.wol)}`),$===""&&F.il&&Z.push(`:${He(F.il)}`),Z.length>0?Z.join(" / "):"()"}const te=mz(S,t),oe=u.dayStem,Se=dd[oe],X=[` : ${t.name??""} (${ee(t)}) : ${t.gender}`,` ${S[0]} ${S[1]} ${S[2]}`+(S[3]?` ${S[3]}${!t.birthTime||t.birthTime===""?"()":""}`:""),`: ${q(l,s)}`].join(`
`),ae=[];if(ae.push(ii("  (10)",T)),ae.push(ii("",W)),ae.push(ii("(  )",Object.fromEntries(Object.entries(u.natalFixed.elementPercent100).map(([$,F])=>[`${$}(${si(Se,$)})`,F])))),l!==""&&ae.push(ii(`(=${l})`,Object.fromEntries(Object.entries(G).map(([$,F])=>[`${$}(${si(Se,$)})`,F])))),ae.push(ii(" ( 10 100)",u.natalFixed.totalsSub)),l!==""&&ae.push(ii(` ( 10=${l} 100)`,H)),ae.push(ii("(+ )",l===""?S.map(($,F)=>!$||F>=te.length?null:{pos:te[F],gz:$,unseong:Xt(S[2]?.charAt(0)??"",$.charAt(1))}).filter(Boolean):[...S.map(($,F)=>!$||F>=te.length?null:{pos:te[F],gz:$,unseong:Xt(S[2]?.charAt(0)??"",$.charAt(1))}).filter(Boolean),...s?.dae?[{pos:"",gz:s.dae,unseong:Xt(S[2]?.charAt(0)??"",s.dae.charAt(1))}]:[],...(l===""||l===""||l==="")&&s?.se?[{pos:"",gz:s.se,unseong:Xt(S[2]?.charAt(0)??"",s.se.charAt(1))}]:[],...(l===""||l==="")&&s?.wol?[{pos:"",gz:s.wol,unseong:Xt(S[2]?.charAt(0)??"",s.wol.charAt(1))}]:[],...l===""&&s?.il?[{pos:"",gz:s.il,unseong:Xt(S[2]?.charAt(0)??"",s.il.charAt(1))}]:[]].filter(Boolean))),ae.push(ii("(+  )",l===""?S.map(($,F)=>!$||F>=te.length?null:{pos:te[F],gz:$,shinsal:Jt({baseBranch:D,targetBranch:$.charAt(1),era:M,gaehwa:R})}).filter(Boolean):[...S.map(($,F)=>!$||F>=te.length?null:{pos:te[F],gz:$,shinsal:Jt({baseBranch:D,targetBranch:$.charAt(1),era:M,gaehwa:R})}).filter(Boolean),...s?.dae?[{pos:"",gz:s.dae,shinsal:Jt({baseBranch:D,targetBranch:s.dae.charAt(1),era:M,gaehwa:R})}]:[],...(l===""||l===""||l==="")&&s?.se?[{pos:"",gz:s.se,shinsal:Jt({baseBranch:D,targetBranch:s.se.charAt(1),era:M,gaehwa:R})}]:[],...(l===""||l==="")&&s?.wol?[{pos:"",gz:s.wol,shinsal:Jt({baseBranch:D,targetBranch:s.wol.charAt(1),era:M,gaehwa:R})}]:[],...l===""&&s?.il?[{pos:"",gz:s.il,shinsal:Jt({baseBranch:D,targetBranch:s.il.charAt(1),era:M,gaehwa:R})}]:[]].filter(Boolean))),ae.push(ii("(+ )",l===""?S.map(($,F)=>{if(!$||F>=te.length)return null;const Z=ir($);return Z?{pos:te[F],gz:$,nabeum:Z.name,element:Z.element,code:Z.code}:{pos:te[F],gz:$,nabeum:null}}).filter(Boolean):[...S.map(($,F)=>{if(!$||F>=te.length)return null;const Z=ir($);return Z?{pos:te[F],gz:$,nabeum:Z.name,element:Z.element,code:Z.code}:{pos:te[F],gz:$,nabeum:null}}).filter(Boolean),...s?.dae?(()=>{const $=ir(s.dae);return $?[{pos:"",gz:s.dae,nabeum:$.name,element:$.element,code:$.code}]:[]})():[],...(l===""||l===""||l==="")&&s?.se?(()=>{const $=ir(s.se);return $?[{pos:"",gz:s.se,nabeum:$.name,element:$.element,code:$.code}]:[]})():[],...(l===""||l==="")&&s?.wol?(()=>{const $=ir(s.wol);return $?[{pos:"",gz:s.wol,nabeum:$.name,element:$.element,code:$.code}]:[]})():[],...l===""&&s?.il?(()=>{const $=ir(s.il);return $?[{pos:"",gz:s.il,nabeum:$.name,element:$.element,code:$.code}]:[]})():[]].filter(Boolean))),ae.push(ii("()",Wy(S.filter(($,F)=>F<te.length)))),ae.push(ii("( :  )",k)),l===""){const $=Hr({natal:S,daewoon:null,sewoon:null,wolwoon:null,ilwoon:null,basis:o});ae.push(ii("( )",{good:$.good,bad:$.bad,meta:$.meta}))}else ae.push(ii(`( =${l})`,A));const J=ae.filter($=>$&&$.trim().length>0).join(`

`),ye=UA({topic:p,subTopic:b,timeMode:"single",tab:l,relationMode:_,teacherMode:x}),K=["-----","  ","","1.       (////)  .","2.  ,        ."];ye&&K.push("","  ( )",ye);const U=K.join(`
`);return[X,J,U].join(`

`)}function bz(e,t){return e[3]&&e[3]!==""?["","","",!t.birthTime||t.birthTime===""?"()":""]:["","",""]}const yz=e=>typeof e=="object"&&e!==null&&!Array.isArray(e);function tv(e){return new Date(e.startYear,(e.startMonth??1)-1,e.startDay??1)}function PA(e,t){const n=e[t],s=e[t+1];return s?tv(s):new Date(n.endYear+1,0,1)}function $A(e,t,n,s){return e<s&&t>n}function IA(e,t,n){const s=new Date(t,0,1),o=new Date(n+1,0,1),l=[];for(let u=0;u<e.length;u++){const f=e[u],m=tv(f),p=PA(e,u);$A(m,p,s,o)&&(l.some(b=>b.gz===f.gz&&b.startYear===f.startYear)||l.push(f))}return l}function y2(e,t){return IA(e,t,t)}function Df(e,t,n){const s=new Date(t,n-1,1),o=new Date(t,n,1),l=[];for(let u=0;u<e.length;u++){const f=e[u],m=tv(f),p=PA(e,u);$A(m,p,s,o)&&(l.some(b=>b.gz===f.gz&&b.startYear===f.startYear)||l.push(f))}return l}function zA(e){const t=315569259747e-1,o=Date.UTC(1900,1,4,7,15,0)+(e-1900)*t+3*t/24,l=new Date(o);return new Date(l.getTime()+540*60*1e3)}function Mf(e,t){const n=[],s=new Date(e,t-1,15,0,0,0),o=new Date(e,t,1,15,0,0),l=zA(e),u=ut(new Date(e-1,5,15)),f=ut(new Date(e,5,15)),m=ut(new Date(e+1,5,15));if(o<=l)u&&n.push(He(u));else if(s>=l)f&&n.push(He(f));else if(u&&n.push(He(u)),f){const p=He(f);n.includes(p)||n.push(p)}if(t===12&&m){const p=He(m);n.includes(p)||n.push(p)}return n}function vz(e,t){const n=zA(e),s=new Date(e,t-1,1),o=[];return s<n&&o.push(e-1),s>=n&&o.push(e),t===12&&o.push(e+1),o}const ws=(e,t)=>{if(!e)return{};const n=t,s=f=>{if(!f)return;const m={};for(const[p,b]of Object.entries(f)){if(!Array.isArray(b))continue;const _=b.filter(x=>typeof x=="string"&&x.includes(n));_.length>0&&(m[p]=_)}if(Object.keys(m).length!==0)return m},o=s(e.good),l=s(e.bad),u={};return o&&(u.good=o),l&&(u.bad=l),u};function Fb(e){if(e!=null){if(Array.isArray(e)){const t=e.map(n=>Fb(n)).filter(n=>n!==void 0);return t.length>0?t:void 0}if(yz(e)){const t={};for(const[n,s]of Object.entries(e)){const o=Fb(s);o!==void 0&&(t[n]=o)}return Object.keys(t).length>0?t:void 0}return e}}const _z=e=>e==null?"":typeof e=="string"?e:JSON.stringify(e,null,2),qn=(e,t)=>{const n=Fb(t);if(n===void 0)return"";const s=_z(n);return s.trim()?`## ${e}
${s}`:""},Xs=(e,t)=>{const n={};if(!e||typeof e!="object")return n;for(const[s,o]of Object.entries(e)){if(!Array.isArray(o))continue;const l=Array.from(new Set(o.filter(u=>typeof u=="string"&&u.includes(t))));l.length>0&&(n[s]=l)}return n};function xz(e){const{ms:t,natal:n,basis:s,unified:o,percent:l,category:u,selectedDaeList:f,daeList:m,seYears:p,wolMonths:b,ilDays:_,topic:x,subTopic:S,teacherMode:T}=e,k=[He(n[0]??""),He(n[1]??""),He(n[2]??""),He(n[3]??"")],A=!t.birthTime||t.birthTime==="",M=bz(k,t),R=o.dayStem,N=dd[R],{shinsalEra:D,shinsalGaehwa:C,shinsalBase:G}=NA.getState(),H=G===""?k[0]?.charAt(1)??"":k[2]?.charAt(1)??"",{flags:V}=gA(k,o.elementScoreRaw),W=`${u} (${l.toFixed(1)}%)  ${[` ${V..||V..||V..||V..?"":""}`,` ${V..||V..||V..||V..?"":""}`,` ${V..||V..?"":""}`].join(", ")}`;function re(J){const K=DA(J).birthDay??"",U=K.slice(0,4),$=K.slice(4,6),F=K.slice(6,8);let Z="";if(J.corrected instanceof Date&&!isNaN(J.corrected.getTime())){const B=String(J.corrected.getHours()).padStart(2,"0"),Y=String(J.corrected.getMinutes()).padStart(2,"0");Z=A?"":`${B}:${Y}`}return`${U} ${$} ${F}  ${Z}`}const ee=[` : ${t.name??""} (${re(t)}) : ${t.gender}`,` ${k[0]} ${k[1]} ${k[2]}`+(k[3]?` ${k[3]}${!t.birthTime||t.birthTime===""?"()":""}`:"")].join(`
`),q=[];q.push(qn("",W)),q.push(qn("()",Object.fromEntries(Object.entries(o.natalFixed.elementPercent100).map(([J,ye])=>[`${J}(${si(N,J)})`,ye])))),q.push(qn(" ( 10 100)",o.natalFixed.totalsSub)),q.push(qn("()",Wy(k.filter((J,ye)=>ye<M.length))));const te=Hr({natal:k,daewoon:null,sewoon:null,wolwoon:null,ilwoon:null,basis:s});if(q.push(qn("()",{good:te.good,bad:te.bad,meta:te.meta})),q.push(qn("()",k.map((J,ye)=>{if(!J||ye>=M.length)return null;const K=ir(J);return K?{pos:M[ye],gz:J,nabeum:K.name,element:K.element,code:K.code}:{pos:M[ye],gz:J,nabeum:null}}).filter(Boolean))),q.push(qn("()",k.map((J,ye)=>!J||ye>=M.length?null:{pos:M[ye],gz:J,unseong:Xt(k[2]?.charAt(0)??"",J.charAt(1))}).filter(Boolean))),q.push(qn("()",k.map((J,ye)=>!J||ye>=M.length?null:{pos:M[ye],gz:J,shinsal:Jt({baseBranch:H,targetBranch:J.charAt(1),era:D,gaehwa:C})}).filter(Boolean))),m.length>0)for(const J of f){const ye={dae:J.gz,se:null,wol:null,il:null},K=es(o,"",ye),U=mr({natal:k,daewoon:J.gz,sewoon:void 0,wolwoon:void 0,ilwoon:void 0}),$=Hr({natal:k,daewoon:J.gz,sewoon:void 0,wolwoon:void 0,ilwoon:void 0,basis:s}),F=ir(J.gz),Z=Xt(k[2]?.charAt(0)??"",J.gz.charAt(1)),B=Jt({baseBranch:H,targetBranch:J.gz.charAt(1),era:D,gaehwa:C});q.push(qn(`${J.age} ${J.gz} (${J.startYear}~${J.endYear})`,{:Object.fromEntries(Object.entries(K.elementPercent).map(([Y,ie])=>[`${Y}(${si(N,Y)})`,ie])),:K.totalsSub,:U,:ws($,""),:F?{gz:J.gz,nabeum:F.name,element:F.element,code:F.code}:null,:{pos:"",gz:J.gz,unseong:Z},:{pos:"",gz:J.gz,shinsal:B}}))}if(p.length>0){const J=p[0],ye=p[p.length-1],K=IA(m,J,ye);if(K.length>0){const U=J,$=ut(new Date(U,5,15)),F=He($||""),Z={:K.map(B=>{const Y={dae:B.gz,se:F||null,wol:null,il:null},ie=es(o,"",Y),fe=mr({natal:k,daewoon:B.gz,sewoon:F||void 0,wolwoon:void 0,ilwoon:void 0}),ce=Hr({natal:k,daewoon:B.gz,sewoon:F||void 0,wolwoon:void 0,ilwoon:void 0,basis:s}),xe=ir(B.gz),ke=Xt(k[2]?.charAt(0)??"",B.gz.charAt(1)),je=Jt({baseBranch:H,targetBranch:B.gz.charAt(1),era:D,gaehwa:C});return{:`${B.age} ${B.gz} (${B.startYear}~${B.endYear})`,:B.gz,:Object.fromEntries(Object.entries(ie.elementPercent).map(([Me,Ee])=>[`${Me}(${si(N,Me)})`,Ee])),:ie.totalsSub,:Xs(fe,""),:ws(ce,""),:xe?{gz:B.gz,nabeum:xe.name,element:xe.element,code:xe.code}:null,:{pos:"",gz:B.gz,unseong:ke},:{pos:"",gz:B.gz,shinsal:je}}})};q.push(qn("",Z))}for(const U of p){const $=ut(new Date(U,5,15)),F=y2(m,U),Z=F.length>0?F[0]:null,B={dae:Z?Z.gz:null,se:He($||""),wol:null,il:null},Y=es(o,"",B),ie=mr({natal:k,daewoon:Z?.gz,sewoon:He($||""),wolwoon:void 0,ilwoon:void 0}),fe=Hr({natal:k,daewoon:Z?.gz,sewoon:He($||""),wolwoon:void 0,ilwoon:void 0,basis:s}),ce=ir(He($||"")),xe=Xt(k[2]?.charAt(0)??"",($||"").charAt(1)),ke=Jt({baseBranch:H,targetBranch:($||"").charAt(1),era:D,gaehwa:C}),je={:{:`${U} ${He($||"")}`,:He($||""),:Object.fromEntries(Object.entries(Y.elementPercent).map(([Me,Ee])=>[`${Me}(${si(N,Me)})`,Ee])),:Y.totalsSub,:Xs(ie,""),:ws(fe,""),:ce?{gz:He($||""),nabeum:ce.name,element:ce.element,code:ce.code}:null,:{pos:"",gz:He($||""),unseong:xe},:{pos:"",gz:He($||""),shinsal:ke}}};q.push(qn(` ${U}`,je))}}if(b.length>0){const J=[],ye=new Map;for(const Z of b){const[B,Y]=Z.split("-").map(Number);Df(m,B,Y).forEach(xe=>{J.some(ke=>ke.gz===xe.gz&&ke.startYear===xe.startYear)||J.push(xe)});const fe=vz(B,Y);Mf(B,Y).forEach((xe,ke)=>{const je=fe[ke]??fe[fe.length-1];ye.has(xe)||ye.set(xe,{year:je,month:Y})})}const[K]=b[0].split("-").map(Number),U=ut(new Date(K,5,15)),$=He(U||"");if(J.length>0){const Z={:J.map(B=>{const Y={dae:B.gz,se:$||null,wol:null,il:null},ie=es(o,"",Y),fe=mr({natal:k,daewoon:B.gz,sewoon:$||void 0,wolwoon:void 0,ilwoon:void 0}),ce=Hr({natal:k,daewoon:B.gz,sewoon:$||void 0,wolwoon:void 0,ilwoon:void 0,basis:s}),xe=ir(B.gz),ke=Xt(k[2]?.charAt(0)??"",B.gz.charAt(1)),je=Jt({baseBranch:H,targetBranch:B.gz.charAt(1),era:D,gaehwa:C});return{:`${B.age} ${B.gz} (${B.startYear}~${B.endYear})`,:B.gz,:Object.fromEntries(Object.entries(ie.elementPercent).map(([Me,Ee])=>[`${Me}(${si(N,Me)})`,Ee])),:ie.totalsSub,:Xs(fe,""),:ws(ce,""),:xe?{gz:B.gz,nabeum:xe.name,element:xe.element,code:xe.code}:null,:{pos:"",gz:B.gz,unseong:ke},:{pos:"",gz:B.gz,shinsal:je}}})};q.push(qn("",Z))}const F=Array.from(ye.keys());if(F.length>0){const Z={:F.map(B=>{const ie=ye.get(B).year,ce=y2(m,ie)[0]??J[0]??null,xe={dae:ce?ce.gz:null,se:B,wol:null,il:null},ke=es(o,"",xe),je=mr({natal:k,daewoon:ce?.gz,sewoon:B,wolwoon:void 0,ilwoon:void 0}),Me=Hr({natal:k,daewoon:ce?.gz,sewoon:B,wolwoon:void 0,ilwoon:void 0,basis:s}),Ee=ir(B),Be=Xt(k[2]?.charAt(0)??"",B.charAt(1)),Ce=Jt({baseBranch:H,targetBranch:B.charAt(1),era:D,gaehwa:C});return{:`${ie} ${B}`,:B,:Object.fromEntries(Object.entries(ke.elementPercent).map(([Le,Ue])=>[`${Le}(${si(N,Le)})`,Ue])),:ke.totalsSub,:Xs(je,""),:ws(Me,""),:Ee?{gz:B,nabeum:Ee.name,element:Ee.element,code:Ee.code}:null,:{pos:"",gz:B,unseong:Be},:{pos:"",gz:B,shinsal:Ce}}})};q.push(qn("",Z))}for(const Z of b){const[B,Y]=Z.split("-").map(Number),ie=new Date(B,Y-1,15),fe=At(ie),ce=Df(m,B,Y),xe=ce.length>0?ce[0]:null,ke=Mf(B,Y),je=ke.length>0?ke[ke.length-1]:"",Me={dae:xe?xe.gz:null,se:je||null,wol:He(fe||""),il:null},Ee=es(o,"",Me),Be=mr({natal:k,daewoon:xe?.gz,sewoon:je||void 0,wolwoon:He(fe||""),ilwoon:void 0}),Ce=Hr({natal:k,daewoon:xe?.gz,sewoon:je||void 0,wolwoon:He(fe||""),ilwoon:void 0,basis:s}),Le=ir(He(fe||"")),Ue=Xt(k[2]?.charAt(0)??"",(fe||"").charAt(1)),me=Jt({baseBranch:H,targetBranch:(fe||"").charAt(1),era:D,gaehwa:C}),Ie={:{:`${Z} ${He(fe||"")}`,:He(fe||""),:Object.fromEntries(Object.entries(Ee.elementPercent).map(([le,he])=>[`${le}(${si(N,le)})`,he])),:Ee.totalsSub,:Xs(Be,""),:ws(Ce,""),:Le?{gz:He(fe||""),nabeum:Le.name,element:Le.element,code:Le.code}:null,:{pos:"",gz:He(fe||""),unseong:Ue},:{pos:"",gz:He(fe||""),shinsal:me}}};q.push(qn(` ${Z}`,Ie))}}if(_.length>0){const J=t.mingSikType??"/",[ye,K,U]=_[0].split("-").map(Number),$=new Date(ye,K-1,U,4,0);if(!isNaN($.getTime())){const F=Df(m,ye,K),Z=F.length>0?F[0]:null,B=Mf(ye,K),Y=B.length>0?B[B.length-1]:"",ie=At(new Date(ye,K-1,15)),fe=_t($,J),ce=He(ie||""),xe=He(Y||""),ke=He(fe||"");if(Z){const je={dae:Z.gz,se:xe,wol:ce,il:ke},Me=es(o,"",je),Ee=mr({natal:k,daewoon:Z.gz,sewoon:xe,wolwoon:ce,ilwoon:ke}),Be=Hr({natal:k,daewoon:Z.gz,sewoon:xe,wolwoon:ce,ilwoon:ke,basis:s}),Ce=ir(Z.gz),Le=Xt(k[2]?.charAt(0)??"",Z.gz.charAt(1)),Ue=Jt({baseBranch:H,targetBranch:Z.gz.charAt(1),era:D,gaehwa:C});q.push(qn("",{:`${Z.age} ${Z.gz} (${Z.startYear}~${Z.endYear})`,:Z.gz,:Object.fromEntries(Object.entries(Me.elementPercent).map(([me,Ie])=>[`${me}(${si(N,me)})`,Ie])),:Me.totalsSub,:Xs(Ee,""),:ws(Be,""),:Ce?{gz:Z.gz,nabeum:Ce.name,element:Ce.element,code:Ce.code}:null,:{pos:"",gz:Z.gz,unseong:Le},:{pos:"",gz:Z.gz,shinsal:Ue}}))}if(xe){const je={dae:Z?Z.gz:null,se:xe,wol:ce,il:ke},Me=es(o,"",je),Ee=mr({natal:k,daewoon:Z?.gz,sewoon:xe,wolwoon:ce,ilwoon:ke}),Be=Hr({natal:k,daewoon:Z?.gz,sewoon:xe,wolwoon:ce,ilwoon:ke,basis:s}),Ce=ir(xe),Le=Xt(k[2]?.charAt(0)??"",xe.charAt(1)),Ue=Jt({baseBranch:H,targetBranch:xe.charAt(1),era:D,gaehwa:C});q.push(qn("",{:`${ye} ${xe}`,:xe,:Object.fromEntries(Object.entries(Me.elementPercent).map(([me,Ie])=>[`${me}(${si(N,me)})`,Ie])),:Me.totalsSub,:Xs(Ee,""),:ws(Be,""),:Ce?{gz:xe,nabeum:Ce.name,element:Ce.element,code:Ce.code}:null,:{pos:"",gz:xe,unseong:Le},:{pos:"",gz:xe,shinsal:Ue}}))}if(ce){const je={dae:Z?Z.gz:null,se:xe,wol:ce,il:ke},Me=es(o,"",je),Ee=mr({natal:k,daewoon:Z?.gz,sewoon:xe,wolwoon:ce,ilwoon:ke}),Be=Hr({natal:k,daewoon:Z?.gz,sewoon:xe,wolwoon:ce,ilwoon:ke,basis:s}),Ce=ir(ce),Le=Xt(k[2]?.charAt(0)??"",ce.charAt(1)),Ue=Jt({baseBranch:H,targetBranch:ce.charAt(1),era:D,gaehwa:C});q.push(qn("",{:`${ye}-${String(K).padStart(2,"0")} ${ce}`,:ce,:Object.fromEntries(Object.entries(Me.elementPercent).map(([me,Ie])=>[`${me}(${si(N,me)})`,Ie])),:Me.totalsSub,:Xs(Ee,""),:ws(Be,""),:Ce?{gz:ce,nabeum:Ce.name,element:Ce.element,code:Ce.code}:null,:{pos:"",gz:ce,unseong:Le},:{pos:"",gz:ce,shinsal:Ue}}))}}for(const F of _){const[Z,B,Y]=F.split("-").map(Number),ie=new Date(Z,B-1,Y,4,0);if(isNaN(ie.getTime()))continue;const fe=Df(m,Z,B),ce=fe.length>0?fe[0]:null,xe=Mf(Z,B),ke=xe.length>0?xe[xe.length-1]:"",je=At(new Date(Z,B-1,15)),Me=_t(ie,J),Ee=He(je||""),Be=He(ke||""),Ce=He(Me||""),Le={dae:ce?ce.gz:null,se:Be||null,wol:Ee,il:Ce},Ue=es(o,"",Le),me=mr({natal:k,daewoon:ce?.gz,sewoon:Be||void 0,wolwoon:Ee||void 0,ilwoon:Ce||void 0}),Ie=Hr({natal:k,daewoon:ce?.gz,sewoon:Be||void 0,wolwoon:Ee||void 0,ilwoon:Ce||void 0,basis:s}),le=ir(Ce),he=Xt(k[2]?.charAt(0)??"",Ce.charAt(1)),Pe=Jt({baseBranch:H,targetBranch:Ce.charAt(1),era:D,gaehwa:C}),Fe={:{:`${F} ${Ce}`,:Ce,:Object.fromEntries(Object.entries(Ue.elementPercent).map(([Ge,st])=>[`${Ge}(${si(N,Ge)})`,st])),:Ue.totalsSub,:Xs(me,""),:ws(Ie,""),:le?{gz:Ce,nabeum:le.name,element:le.element,code:le.code}:null,:{pos:"",gz:Ce,unseong:he},:{pos:"",gz:Ce,shinsal:Pe}}};q.push(qn(` ${F}`,Fe))}}const oe=q.filter(J=>J.trim().length>0).join(`

`),Se=UA({topic:x,subTopic:S,timeMode:"single",teacherMode:T}),X=["-----","  ","","1.       (////)  .","2.  ,        ."];Se&&X.push("","  ( )",Se);const ae=X.join(`
`);return[ee,oe,ae].join(`

`)}function UA(e){const{topic:t,subTopic:n,timeMode:s="single",tab:o,relationMode:l,teacherMode:u}=e;if(!t)return"";const f=[];switch(u===!0?f.push("-   ,     (, ,   )  .","-         ,   .","-    .    .","-  ,     .","-    ,    .","- JSON/  ,     ."):f.push("- AI     ,      . (, ,   )","-   ,  . (     )","-  /    .","- , , , ,       ,    .","-     , (~, ~  ) .","-    .","-  JSON/      .","-       .","-         .","-   ,    ."),s==="single"?o?f.push(`-    (${o})   ,         .`,"-   ,             ."):f.push("-    ,          ."):f.push("-  (///)  ,           .","-      ,    ,           ."),t){case"personality":{f.push("-    /  .","-  ,       ."),(!n||n==="overview"||n==="personality_basic")&&f.push("-        .","  1)   : /, , /,        ,      .","  2)   :    VS   ,   VS   ,  VS      .","  3) /:   ,     , /        .","  4)   : //  ,    ,       .","  5)  :     ,    ,       .","-          ."),n==="personality_shadow"&&f.push("-     ,              .","-           ."),n==="personality_relationshipStyle"&&f.push("-    ,   ,       /    ."),n==="personality_workStyle"&&f.push("-     ,     /      ."),n==="personality_stressPattern"&&f.push("-   ,    vs       .","-      (, , ) .");break}case"lifeFlow":{f.push("-         .","-   ,      .","-  , 20, 30    ,       .","-    ,        ."),n==="lifeFlow_turningPoint"&&f.push("-       ,        .");break}case"love":{f.push("-   //   .","-  ,   ,      ."),(!n||n==="overview"||n==="love_pattern")&&f.push("-      ,     ,       ."),n==="love_timing"&&f.push("-     ,    ,       ."),n==="love_partner"&&f.push("-    ,        ."),n==="love_current"&&f.push("-       ,     ,     ."),n==="love_breakup"&&f.push("- /   ,      ,     ."),n==="love_marriageChange"&&f.push("-          ."),l==="solo"?f.push("-  ' ,  /   ' .","-     ,      .","-    , /     ."):l==="couple"&&f.push("-  '  ,      ' .","-            .","-      /   .","-      ,        .");break}case"career":{f.push("-   ///  .","-    ,      ,     ."),(!n||n==="overview")&&f.push("-  / VS       ,    .","-    VS          ."),n==="career_aptitude"&&f.push("-   (: , ,  ,  )    ."),n==="career_mode"&&f.push("- , , ,        ."),n==="career_jobChange"&&f.push("- /   ,    ,    ."),n==="career_promotion"&&f.push("-     ,    (, ,  )  ."),(n==="career_study"||n==="career_exam")&&f.push("- /   ,        .");break}case"money":{f.push("-   //  .","-     ,  ,   ,   ."),(!n||n==="overview"||n==="money_flow")&&f.push("-   ( ,  ,  )   ."),n==="money_income"&&f.push("- , ,        ( , ,  )  ."),n==="money_spending"&&f.push("-   ,   ,        ."),(n==="money_saving"||n==="money_asset")&&f.push("-   ,        ,   ."),n==="money_debt"&&f.push("- /      ,       ."),n==="money_invest"&&f.push("- /   ,          ."),n==="money_bigEvent"&&f.push("- , ,         ,      .");break}case"family":{f.push("-   /   .","- ()  ()        ."),(!n||n==="overview"||n==="family_current")&&f.push("-        ,     ."),(n==="family_origin"||n==="family_parents")&&f.push("-     (, ,  )     ."),n==="family_siblings"&&f.push("-   (  , / ) ."),n==="family_children"&&f.push("-   ,            .");break}case"health":{f.push("-   /  .","-    ,   (, , ,  ) ."),(!n||n==="overview"||n==="health_overall")&&f.push("-   (:   /     )   ."),n==="health_physical"&&f.push("-    (, ,   )   ."),n==="health_mental"&&f.push("-    (, ,  ) ,        ."),n==="health_stress"&&f.push("-      ,      ."),n==="health_accident"&&f.push("- /   ,    ,   (, ,  )  .");break}case"move":{f.push("-   /  .","-    , ,     ."),(!n||n==="overview"||n==="move_chance")&&f.push("-    ,         ."),n==="move_timing"&&f.push("-    ,           ."),n==="move_targetHouse"&&f.push("-     ,   ,      ,      ."),n==="move_environment"&&f.push("- / (, ,  )     ."),n==="move_finance"&&f.push("- //      ,       .");break}case"social":{f.push("-   //  .","-  ,  ,      ."),(!n||n==="overview"||n==="social_overall")&&f.push("-       ."),n==="social_friend"&&f.push("-      ,      ."),n==="social_workspace"&&f.push("-      (, ,  ) ."),n==="social_network"&&f.push("-   (  vs   )    ,    ."),n==="social_conflict"&&f.push("-    ,  ,      ,    .");break}case"compat":{f.push("-   /   .","-  /  ,        ."),(!n||n==="overview"||n==="compat_overall")&&f.push("-     , //      ."),(n==="compat_love"||n==="compat_marriage")&&f.push("- /  ,  ,        ."),n==="compat_work"&&f.push("- /   ,  ,     ."),(n==="compat_family"||n==="compat_friend")&&f.push("- /       ,       .");break}case"risk":{f.push("-   /   .","-  ,        ."),(!n||n==="overview")&&f.push("- , , ,           ."),n==="risk_money"&&f.push("-   ( , ,   ) ,       ."),n==="risk_relationship"&&f.push("-      (, ,   )  ."),n==="risk_health"&&f.push("- /  ,        ."),n==="risk_lawsuit"&&f.push("-  //     ,         ."),n==="risk_burnout"&&f.push("- /    ,          .");break}case"meta":{f.push("-         .","-    ,         ,     ."),(n==="meta_structure"||!n||n==="overview")&&f.push("-     / ,     ."),n==="meta_cycle"&&f.push("- /   ,     ."),n==="meta_trigger"&&f.push("- , ,           ,   ."),n==="meta_usage"&&f.push("-         ,        .");break}}return f.join(`
`)}function wz({date:e,onChange:t,min:n="1900-01-01",max:s="2100-12-31"}){const o=P.useMemo(()=>{const u=e.getFullYear(),f=String(e.getMonth()+1).padStart(2,"0"),m=String(e.getDate()).padStart(2,"0");return`${u}-${f}-${m}`},[e]),l=u=>{if(!u)return;const[f,m,p]=u.split("-"),b=Number(f),_=Number(m),x=Number(p),S=e.getHours(),T=e.getMinutes(),k=new Date(b,_,0).getDate(),A=Math.min(x,k),M=new Date(b,_-1,A,S,T);Number.isNaN(M.getTime())||t(M)};return y.jsx("input",{type:"date",value:o,onChange:u=>l(u.target.value),min:n,max:s,className:"w rounded-md border border-neutral-300 dark:border-neutral-700 bg-transparent px-2 py-1 text-sm"})}const Jg={analysis:{label:"",desc:`-   ,   
- "     "  
- ST   `},teacher:{label:"",desc:`-   
-    
- ,     `},mentor:{label:"",desc:`-        
-   X,   X
-    ~~  `},speed:{label:"",desc:`-   
- 2~4  
-    `},dryHumor:{label:"",desc:`-   +  
-           `},softWarm:{label:"",desc:`-      
-    `},ect:{label:"",desc:"-    "}},Sz=["","","","",""],HA={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},GA={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},v2={personality:{label:"     "},lifeFlow:{label:"    "},love:{label:"    "},career:{label:"      "},money:{label:"      "},family:{label:"      "},health:{label:"      "},move:{label:"       "},social:{label:"     "},compat:{label:"   "},risk:{label:"    "},meta:{label:"    "},etc:{label:"  "}},_2={personality:[{key:"overview",label:"  "},{key:"personality_basic",label:"  "},{key:"personality_shadow",label:" "},{key:"personality_relationshipStyle",label:"  "},{key:"personality_workStyle",label:"  "},{key:"personality_stressPattern",label:" "}],lifeFlow:[{key:"overview",label:"  "},{key:"lifeFlow_cycle",label:" "},{key:"lifeFlow_turningPoint",label:""},{key:"lifeFlow_peak",label:""},{key:"lifeFlow_down",label:""},{key:"lifeFlow_theme",label:"  "}],love:[{key:"love_pattern",label:" "},{key:"love_timing",label:" /"},{key:"love_partner",label:" "},{key:"love_current",label:" / "},{key:"love_breakup",label:"/ "},{key:"love_marriageChange",label:" "}],career:[{key:"career_aptitude",label:" "},{key:"career_mode",label:" vs /"},{key:"career_jobChange",label:"/ "},{key:"career_promotion",label:""},{key:"career_study",label:""},{key:"career_exam",label:""}],money:[{key:"overview",label:"  "},{key:"money_flow",label:"  "},{key:"money_income",label:""},{key:"money_spending",label:" "},{key:"money_saving",label:" "},{key:"money_asset",label:" "},{key:"money_debt",label:" "},{key:"money_invest",label:" "},{key:"money_bigEvent",label:"  "}],family:[{key:"overview",label:"  "},{key:"family_origin",label:"()"},{key:"family_current",label:" "},{key:"family_parents",label:" "},{key:"family_siblings",label:" "},{key:"family_children",label:""},{key:"family_care",label:" "}],health:[{key:"overview",label:" "},{key:"health_overall",label:" "},{key:"health_physical",label:" "},{key:"health_mental",label:" "},{key:"health_stress",label:" "},{key:"health_accident",label:" "}],move:[{key:"overview",label:"  "},{key:"move_timing",label:" "},{key:"move_chance",label:"  "},{key:"move_targetHouse",label:"   "},{key:"move_environment",label:" "},{key:"move_finance",label:" "}],social:[{key:"overview",label:" "},{key:"social_overall",label:"  "},{key:"social_friend",label:"  "},{key:"social_workspace",label:"  "},{key:"social_network",label:""},{key:"social_conflict",label:" "}],compat:[{key:"overview",label:"  "},{key:"compat_overall",label:"  "},{key:"compat_love",label:" "},{key:"compat_marriage",label:"  "},{key:"compat_work",label:" "},{key:"compat_family",label:"  "},{key:"compat_friend",label:" "}],risk:[{key:"overview",label:" "},{key:"risk_money",label:" "},{key:"risk_relationship",label:" "},{key:"risk_health",label:" "},{key:"risk_lawsuit",label:" "},{key:"risk_burnout",label:" "}],meta:[{key:"overview",label:"  "},{key:"meta_structure",label:"  "},{key:"meta_cycle",label:"  "},{key:"meta_trigger",label:"  "},{key:"meta_usage",label:"  "}],etc:[]};function ac(e){if(!e)return"";if(e.length===2)return e;const t=e.replace(/[()[\]{}]/g,"").replace(/\s+/g,"").replace(/[:\-_.]/g,""),n=t.match(/([]).*?([])/);if(n)return`${n[1]}${n[2]}`;const s=t.match(/([]).*?([])/);if(s){const o=HA[s[1]],l=GA[s[2]];return o&&l?`${o}${l}`:""}return""}function x2(e){return e[0]?.length===2&&e[1]?.length===2&&e[2]?.length===2}function w2(e){const t=Array.isArray(e)?e.slice(0,4):[];for(;t.length<4;)t.push("");return t.map((n,s)=>{if(!n)return"";const o=n.replace(/[()[\]{}]/g,"").replace(/\s+/g,"").replace(/[:\-_.]/g,""),l=o.match(/([]).*?([])/);if(l)return`${l[1]}${l[2]}`;const u=o.match(/([]).*?([])/);return u?`${HA[u[1]]}${GA[u[2]]}`:s<=2?"--":""})}function Ez({ms:e,natal:t,chain:n,basis:s,lunarPillars:o,includeTenGod:l=!1}){const[u,f]=P.useState("analysis"),[m,p]=P.useState(!1),[b,_]=P.useState(!1),[x,S]=P.useState(()=>new Date),{list:T,currentId:k}=ss.getState(),[A,M]=P.useState(""),[R,N]=P.useState("personality"),[D,C]=P.useState("overview"),G=P.useMemo(()=>A?T.find(pe=>pe.id===A)??null:null,[A,T]),[H,V]=P.useState(""),[W,re]=P.useState("solo");P.useEffect(()=>{R!=="love"&&R!=="compat"&&(re("solo"),M(""))},[R]);const[ee,q]=P.useState(!1),[te,oe]=P.useState(""),[Se,X]=P.useState([]),[ae,J]=P.useState(new Date().getFullYear()),[ye,K]=P.useState(new Date().getFullYear()),[U,$]=P.useState(()=>{const pe=new Date;return`${pe.getFullYear()}-${String(pe.getMonth()+1).padStart(2,"0")}`}),[F,Z]=P.useState(()=>{const pe=new Date;return`${pe.getFullYear()}-${String(pe.getMonth()+1).padStart(2,"0")}`}),[B,Y]=P.useState(()=>{const pe=new Date,Ye=pe.getFullYear(),lt=String(pe.getMonth()+1).padStart(2,"0"),pt=String(pe.getDate()).padStart(2,"0");return`${Ye}-${lt}-${pt}`}),[ie,fe]=P.useState(()=>{const pe=new Date,Ye=pe.getFullYear(),lt=String(pe.getMonth()+1).padStart(2,"0"),pt=String(pe.getDate()).padStart(2,"0");return`${Ye}-${lt}-${pt}`}),ce=1e3*60*60*24;function xe(pe,Ye){return(Ye.getFullYear()-pe.getFullYear())*12+(Ye.getMonth()-pe.getMonth())}function ke(pe){return`${pe.getFullYear()}-${String(pe.getMonth()+1).padStart(2,"0")}`}function je(pe){return`${pe.getFullYear()}-${String(pe.getMonth()+1).padStart(2,"0")}-${String(pe.getDate()).padStart(2,"0")}`}const Me=pe=>{J(pe)},Ee=pe=>{K(pe)},Be=()=>{const pe=ae;let Ye=ye;Ye<pe&&(Ye=pe),Ye-pe>9&&(Ye=pe+9),K(Ye)},Ce=()=>{let pe=ae;const Ye=ye;Ye<pe&&(pe=Ye),Ye-pe>9&&(pe=Ye-9),J(pe)},Le=pe=>{$(pe)},Ue=()=>{const[pe,Ye]=U.split("-").map(Number),[lt,pt]=F.split("-").map(Number),tt=new Date(pe,Ye-1),dt=new Date(lt,pt-1);if(dt<tt){Z(ke(tt));return}if(xe(tt,dt)>11){const mt=new Date(tt);mt.setMonth(tt.getMonth()+11),Z(ke(mt))}},me=pe=>{Z(pe)},Ie=()=>{const[pe,Ye]=U.split("-").map(Number),[lt,pt]=F.split("-").map(Number),tt=new Date(pe,Ye-1),dt=new Date(lt,pt-1);if(dt<tt){$(ke(dt));return}if(xe(tt,dt)>11){const mt=new Date(dt);mt.setMonth(dt.getMonth()-11),$(ke(mt))}},le=pe=>{Y(pe)},he=()=>{if(!B||!ie)return;const[pe,Ye,lt]=B.split("-").map(Number),[pt,tt,dt]=ie.split("-").map(Number),xt=new Date(pe,Ye-1,lt,4,0,0),mt=new Date(pt,tt-1,dt,4,0,0);if(mt<xt){fe(je(xt));return}if(Math.floor((mt.getTime()-xt.getTime())/ce)>7){const wt=new Date(xt);wt.setDate(xt.getDate()+6),fe(je(wt))}},Pe=pe=>{fe(pe)},Fe=()=>{if(!B||!ie)return;const[pe,Ye,lt]=B.split("-").map(Number),[pt,tt,dt]=ie.split("-").map(Number),xt=new Date(pe,Ye-1,lt,4,0,0),mt=new Date(pt,tt-1,dt,4,0,0);if(xt>mt){Y(je(mt));return}if(Math.floor((mt.getTime()-xt.getTime())/ce)>7){const wt=new Date(mt);wt.setDate(mt.getDate()-6),Y(je(wt))}},Ge=e.mingSikType??"/",st=P.useMemo(()=>{if(n)return{dae:n.dae??null,se:n.se??null,wol:n.wol??null,il:n.il??null};const pe=x??new Date,Ye=ac(ut(pe)||""),lt=ac(At(pe)||""),pt=ac(_t(pe,Ge)||"");return{dae:null,se:Ye||null,wol:lt||null,il:pt||null}},[n,x,Ge]),et=pd.getState().manualHour,qt=P.useMemo(()=>w2(t),[t]),Sn=P.useMemo(()=>w2(o),[o]),En=P.useMemo(()=>{const pe=[...qt];return(!pe[3]||pe[3]==="")&&et&&(pe[3]=et.stem+et.branch),pe},[qt,et]),ar=P.useMemo(()=>{const pe=[...Sn];return(!pe[3]||pe[3]==="")&&et&&(pe[3]=et.stem+et.branch),pe},[Sn,et]),yr=P.useMemo(()=>{const pe=Number(e.birthDay?.slice(0,4)),Ye=Number(e.birthDay?.slice(4,6)),lt=Number(e.birthDay?.slice(6,8));if(!Number.isFinite(pe)||!Number.isFinite(Ye)||!Number.isFinite(lt))return null;const pt=new Date(pe,Ye-1,lt,12,4,0,0),tt=ac(ut(pt)||""),dt=ac(At(pt)||""),xt=ac(_t(pt,Ge)||"");return[tt,dt,xt,""]},[e.birthDay,Ge]),un=x2(En),Mt=x2(ar),[gn]=P.useState("solar"),dn=gn==="lunar"?Mt?"lunar":un?"solar":"lunar":un?"solar":Mt?"lunar":"solar",Yr=P.useMemo(()=>{const Ye=[...dn==="lunar"?Mt?ar:un?En:yr??["","","",""]:un?En:Mt?ar:yr??["","","",""]];return(!Ye[3]||Ye[3]==="")&&et&&(Ye[3]=et.stem+et.branch),Ye},[dn,un,Mt,En,ar,yr,et]),ra=P.useMemo(()=>et?et.stem+et.branch:Yr[3]||"",[et,Yr]);(!t||t.length===0)&&(t=pm(e));const zi=et?et.stem+et.branch:"",Tn=P.useMemo(()=>{const pe=pm(e);return zi&&zi.length===2&&(pe[3]=zi),pe},[e,zi]),On=P.useMemo(()=>vA({natal:Tn,tab:H,chain:st,hourKey:ra}),[Tn,H,st,ra]);function os(pe){return yA(pe,{criteriaMode:"modern",useHarmonyOverlay:!0})}const jr=os(Tn),or=P.useMemo(()=>Iy(jr),[jr]),mi=P.useMemo(()=>Yk(or),[or]),ia=P.useMemo(()=>{const pe=OA(e).slice(0,10),Ye=e.birthDay?Number(e.birthDay.slice(0,4)):0;return pe.map((lt,pt)=>{const tt=lt.match(/(\d{4})\s+(\d{1,2})\s+([-]{2})\s+/),dt=tt?Number(tt[1]):0,xt=tt?Number(tt[2]):1,mt=1,$n=tt?tt[3]:"",wt=Ye>0?Tz(Ye,dt):pt*10;return{gz:$n,age:wt,startYear:dt,startMonth:xt,startDay:mt,endYear:dt+10}})},[e]),Qa=_2[R],eo=P.useMemo(()=>e?gz({ms:e,natal:Tn,chain:st,basis:s,tab:H,unified:On,percent:or,category:mi,topic:R,subTopic:D,relationMode:W,teacherMode:b}):"",[e,s,l,H,st,On,or,mi,Tn,R,D,W,G,b]),Ui=P.useMemo(()=>{if(!e||!ee)return"";const pe=Se.map(tt=>ia[tt]).filter(tt=>tt),Ye=te===""?(()=>{const tt=[];for(let dt=ae;dt<=ye&&tt.length<10;dt++)tt.push(dt);return tt})():[],lt=te===""?(()=>{const tt=[],[dt,xt]=U.split("-").map(Number),[mt,$n]=F.split("-").map(Number),wt=new Date(dt,xt-1),aa=new Date(mt,$n-1);for(;wt<=aa&&tt.length<12;)tt.push(`${wt.getFullYear()}-${String(wt.getMonth()+1).padStart(2,"0")}`),wt.setMonth(wt.getMonth()+1);return tt})():[],pt=te===""?(()=>{const tt=[],[dt,xt,mt]=B.split("-").map(Number),[$n,wt,aa]=ie.split("-").map(Number),io=new Date(dt,xt-1,mt,4,0,0),gi=new Date($n,wt-1,aa,4,0,0);if(isNaN(io.getTime())||isNaN(gi.getTime()))return tt;const Wn=new Date(io);for(;Wn<=gi&&tt.length<31;){const As=Wn.getFullYear(),so=String(Wn.getMonth()+1).padStart(2,"0"),ao=String(Wn.getDate()).padStart(2,"0");tt.push(`${As}-${so}-${ao}`),Wn.setDate(Wn.getDate()+1)}return tt})():[];return xz({ms:e,natal:Tn,basis:s,unified:On,percent:or,category:mi,selectedDaeList:pe,daeList:ia,seYears:Ye,wolMonths:lt,ilDays:pt,topic:R,subTopic:D,teacherMode:b})},[e,ee,te,Se,ia,ae,ye,U,F,B,ie,Tn,s,l,On,or,mi,R,D,W,G,b]),to=P.useMemo(()=>{if(W!=="couple"||!G)return"";const pe=G.name||"";let Ye="";if(G.birthDay&&G.birthDay.length===8){const dt=G.birthDay.slice(0,4),xt=G.birthDay.slice(4,6),mt=G.birthDay.slice(6,8);Ye=`${dt}-${xt}-${mt}`}else G.birthDay&&(Ye=G.birthDay);let lt="";if(G.birthTime&&G.birthTime.trim().length>0){const xt=G.birthTime.trim().padEnd(4,"0").slice(0,4),mt=xt.slice(0,2),$n=xt.slice(2,4);lt=`${mt}:${$n}`}let pt="";G.birthPlace&&typeof G.birthPlace=="object"&&(pt=G.birthPlace.name||"");const tt=G.ganji||G.ganjiText||"";return["","","[  - () ]"," ",`-  : ${pe}`,`-  : ${Ye}`,`-   : ${lt}`,`-   : ${pt}`,`- ${tt}`,""," //,       ,","           .",""].join(`
`)},[W,G]),sa=ee?Ui:eo,no=P.useMemo(()=>{switch(u){case"analysis":return`     .
`;case"teacher":return`    '' .
`;case"mentor":return`      .
`;case"speed":return`     .
`;case"dryHumor":return`   ,    .
`;case"softWarm":return`    .
`;default:return""}},[u]),ro=m?`   ,   .
`:"",Pn=P.useMemo(()=>sa||to?`${sa}${to}
${no}${ro}`:"",[no,ro,sa,to]),[Ve,ks]=P.useState(""),[Nr,lr]=P.useState([]);P.useEffect(()=>{ks(""),lr([])},[e.id]);const rn=P.useMemo(()=>{if(!Pn)return"";if(Nr.length===0)return Pn;const pe=["","-----","     ","",...Nr.map((Ye,lt)=>`${lt+1}. ${Ye}`)];return`${Pn}
${pe.join(`
`)}`},[Pn,Nr]),[kn,qr]=P.useState(!1);async function pi(){if(rn)try{await navigator.clipboard.writeText(rn),qr(!0),setTimeout(()=>qr(!1),1200)}catch{qr(!1)}}return e?y.jsxs("div",{className:"rounded-xl border border-neutral-200 dark:border-neutral-800 bg-white dark:bg-neutral-900 p-3 space-y-3",children:[y.jsxs("div",{className:"flex items-center justify-between gap-2",children:[y.jsx("div",{className:"text-sm font-semibold text-neutral-700 dark:text-neutral-200",children:"GPT  "}),y.jsx("button",{onClick:pi,className:`px-3 py-1 rounded-md text-xs cursor-pointer ${kn?"bg-green-600 text-white":"bg-neutral-900 text-white dark:bg-yellow-500 dark:text-black"}`,children:kn?"!":" "})]}),y.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[y.jsxs("div",{className:"w-full mt-2 p-2 border rounded-md bg-neutral-50 dark:bg-neutral-800",children:[y.jsx("div",{className:"text-xs font-semibold mb-1 text-neutral-700 dark:text-neutral-200",children:"  "}),y.jsx("div",{className:"flex gap-1.5 mb-2",children:Object.keys(Jg).map(pe=>y.jsx("button",{onClick:()=>f(pe),className:`flex-1 px-2 py-1 text-[10px] rounded border cursor-pointer ${u===pe?"bg-neutral-900 text-white dark:bg-yellow-500 dark:text-black":"bg-white dark:bg-neutral-700 text-neutral-700 dark:text-neutral-200"}`,children:Jg[pe].label},pe))}),y.jsx("div",{className:"text-[11px] whitespace-pre-line text-neutral-600 dark:text-neutral-300 leading-4",children:Jg[u].desc}),y.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[y.jsxs("div",{className:"mr-1 flex items-center gap-2",children:[y.jsx("input",{type:"checkbox",id:"friendMode",checked:m,onChange:pe=>p(pe.target.checked),className:"w-3 h-3"}),y.jsx("label",{htmlFor:"friendMode",className:"text-[11px] text-neutral-700 dark:text-neutral-200 cursor-pointer",children:""})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("input",{type:"checkbox",id:"teacherMode",checked:b,onChange:pe=>_(pe.target.checked),className:"w-3 h-3"}),y.jsx("label",{htmlFor:"teacherMode",className:"text-[11px] text-neutral-700 dark:text-neutral-200 cursor-pointer",children:"(/)"})]})]})]}),y.jsx("select",{value:R,onChange:pe=>{const Ye=pe.target.value;N(Ye);const lt=_2[Ye];lt.length>0?C(lt[0].key):C("overview"),Ye!=="love"&&Ye!=="compat"&&re("solo")},className:"px-2.5 h-30 h-8 text-[11px] rounded-md border bg-white dark:bg-neutral-800 text-neutral-700 dark:text-neutral-200 border-neutral-200 dark:border-neutral-700",children:Object.keys(v2).map(pe=>{const Ye=v2[pe];return y.jsx("option",{value:pe,children:Ye.label},pe)})}),Qa.length>0&&y.jsx("select",{value:D,onChange:pe=>C(pe.target.value),className:"px-2.5 h-30 h-8 text-[11px] rounded-md border bg-white dark:bg-neutral-800 text-neutral-700 dark:text-neutral-200 border-neutral-200 dark:border-neutral-700",children:Qa.map(pe=>y.jsx("option",{value:pe.key,children:pe.label},pe.key))})]}),(R==="love"||R==="compat")&&y.jsxs("div",{className:"flex flex-col gap-1.5 text-[11px] text-neutral-700 dark:text-neutral-200",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:"font-semibold",children:" "}),y.jsxs("div",{className:"inline-flex rounded-full border border-neutral-200 dark:border-neutral-700 overflow-hidden",children:[y.jsx("button",{type:"button",onClick:()=>re("solo"),className:`px-3 py-1 cursor-pointer ${W==="solo"?"bg-neutral-900 text-white dark:bg-yellow-500 dark:text-black":"bg-neutral-50 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-300"}`,children:" "}),y.jsx("button",{type:"button",onClick:()=>re("couple"),className:`px-3 py-1 cursor-pointer ${W==="couple"?"bg-neutral-900 text-white dark:bg-yellow-500 dark:text-black":"bg-neutral-50 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-300"}`,children:" "})]})]}),W==="couple"&&y.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[y.jsx("span",{className:"font-semibold",children:"  "}),y.jsxs("select",{value:A,onChange:pe=>M(pe.target.value),className:"min-w-[180px] h-30 px-2 py-1 border rounded bg-white dark:bg-neutral-800",children:[y.jsx("option",{value:"",children:"  "}),T.filter(pe=>pe.id!==k).map(pe=>y.jsxs("option",{value:pe.id,children:[pe.name||" "," ",pe.birthDay?`(${pe.birthDay})`:""]},pe.id))]})]})]}),y.jsxs("div",{className:"flex gap-2",children:[y.jsx("button",{onClick:()=>q(!1),className:`px-3 py-1.5 text-xs rounded-md border cursor-pointer ${ee?"bg-neutral-100 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-300":"bg-neutral-900 text-white dark:bg-yellow-500 dark:text-black"}`,children:" "}),y.jsx("button",{onClick:()=>q(!0),className:`px-3 py-1.5 text-xs rounded-md border cursor-pointer ${ee?"bg-neutral-900 text-white dark:bg-yellow-500 dark:text-black":"bg-neutral-100 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-300"}`,children:""})]}),!ee&&y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"flex desk:justify-between flex-col desk:flex-row gap-2",children:[y.jsx("div",{className:"flex gap-1 flex-wrap",children:Sz.map(pe=>y.jsx("button",{onClick:()=>V(pe),className:`px-2 py-1 text-xs rounded-md border cursor-pointer ${H===pe?"bg-neutral-900 text-white dark:bg-yellow-500 dark:text-black":"bg-neutral-100 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-300"}`,children:pe},pe))}),y.jsx(wz,{date:x,onChange:S})]}),y.jsxs("div",{className:"text-[11px] text-neutral-500 dark:text-neutral-400",children:[y.jsx("p",{children:"     ."}),y.jsx("p",{children:"  ,  ."}),y.jsx("p",{children:"   ,   ."})]})]}),ee&&y.jsxs("div",{className:"space-y-3 p-3 bg-neutral-50 dark:bg-neutral-800 rounded-lg",children:[y.jsx("div",{className:"flex gap-1.5 border-b pb-2",children:["","","",""].map(pe=>y.jsx("button",{onClick:()=>oe(pe),className:`px-3 py-1.5 text-xs rounded-md cursor-pointer transition-colors ${te===pe?"bg-blue-600 text-white font-semibold":"bg-white dark:bg-neutral-700 text-neutral-600 dark:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-neutral-600"}`,children:pe},pe))}),te===""&&y.jsxs("div",{children:[y.jsx("div",{className:"text-xs font-semibold mb-2 text-neutral-700 dark:text-neutral-200",children:"  (  )"}),y.jsx("div",{className:"grid grid-cols-2 gap-1.5",children:ia.map((pe,Ye)=>y.jsxs("button",{onClick:()=>{X(lt=>lt.includes(Ye)?lt.filter(pt=>pt!==Ye):[...lt,Ye])},className:`px-2 py-1.5 text-xs rounded border cursor-pointer text-left ${Se.includes(Ye)?"bg-blue-600 text-white border-blue-600":"bg-white dark:bg-neutral-700 border-neutral-300 dark:border-neutral-600"}`,children:[y.jsx("div",{className:"font-mono",children:pe.gz}),y.jsxs("div",{className:"text-[10px] opacity-80",children:[pe.age," (",pe.startYear,"~",pe.endYear,")"]})]},Ye))})]}),te===""&&y.jsxs("div",{children:[y.jsx("div",{className:"text-xs font-semibold mb-2 text-neutral-700 dark:text-neutral-200",children:"  ( 10)"}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("input",{type:"number",value:ae,onChange:pe=>Me(Number(pe.target.value)),onBlur:Be,className:"w-24 h-30 px-2 text-[16px] desk:text-xs border rounded bg-white dark:bg-neutral-700",placeholder:""}),y.jsx("span",{className:"text-xs",children:"~"}),y.jsx("input",{type:"number",value:ye,onChange:pe=>Ee(Number(pe.target.value)),onBlur:Ce,className:"w-24 h-30 px-2 text-[16px] desk:text-xs border rounded bg-white dark:bg-neutral-700",placeholder:""})]}),y.jsxs("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 mt-1",children:[" :"," ",ye-ae+1,""]})]}),te===""&&y.jsxs("div",{children:[y.jsx("div",{className:"text-xs font-semibold mb-2 text-neutral-700 dark:text-neutral-200",children:"  ( 12)"}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("input",{type:"month",value:U,onChange:pe=>Le(pe.target.value),onBlur:Ue,className:"px-2 py-1 text-xs border rounded bg-white dark:bg-neutral-700"}),y.jsx("span",{className:"text-xs",children:"~"}),y.jsx("input",{type:"month",value:F,onChange:pe=>me(pe.target.value),onBlur:Ie,className:"px-2 py-1 text-xs border rounded bg-white dark:bg-neutral-700"})]}),y.jsxs("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 mt-1",children:[" :"," ",(()=>{const[pe,Ye]=U.split("-").map(Number),[lt,pt]=F.split("-").map(Number);return(lt-pe)*12+(pt-Ye)+1})(),""]})]}),te===""&&y.jsxs("div",{children:[y.jsx("div",{className:"text-xs font-semibold mb-2 text-neutral-700 dark:text-neutral-200",children:"  ( 7)"}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("input",{type:"date",value:B,onChange:pe=>le(pe.target.value),onBlur:he,className:"px-2 py-1 text-xs border rounded bg-white dark:bg-neutral-700"}),y.jsx("span",{className:"text-xs",children:"~"}),y.jsx("input",{type:"date",value:ie,onChange:pe=>Pe(pe.target.value),onBlur:Fe,className:"px-2 py-1 text-xs border rounded bg-white dark:bg-neutral-700"})]}),y.jsxs("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 mt-1",children:[" :"," ",(()=>{const[pe,Ye,lt]=B.split("-").map(Number),[pt,tt,dt]=ie.split("-").map(Number),xt=new Date(pe,Ye-1,lt,4,0,0),mt=new Date(pt,tt-1,dt,4,0,0);return isNaN(xt.getTime())||isNaN(mt.getTime())||mt<xt?0:Math.floor((mt.getTime()-xt.getTime())/ce)+1})(),""]})]}),y.jsxs("div",{className:"text-[11px] text-neutral-500 dark:text-neutral-400",children:[y.jsxs("p",{children:[" ",te,"   ."]}),y.jsx("p",{children:"    ."})]})]}),y.jsxs("div",{className:"space-y-1",children:[y.jsxs("div",{className:"flex items-center justify-between gap-2",children:[y.jsx("div",{className:"text-xs font-semibold text-neutral-700 dark:text-neutral-200",children:"   ()"}),Nr.length>0&&y.jsx("button",{type:"button",onClick:()=>lr([]),className:"px-2 py-1 text-[10px] rounded-md border border-neutral-300 dark:border-neutral-600 text-neutral-500 dark:text-neutral-300 cursor-pointer",children:" "})]}),y.jsx("textarea",{value:Ve,onChange:pe=>ks(pe.target.value),placeholder:" GPT     , ' '  .",rows:3,className:"w-full text-xs rounded-md border bg-white dark:bg-neutral-800 p-2"}),y.jsxs("div",{className:"mb-4 text-center",children:[y.jsx("button",{type:"button",onClick:()=>{const pe=Ve.trim();pe&&(lr(Ye=>[...Ye,pe]),ks(""))},className:"w-full desk:max-w-[160px] px-1 py-1.5 text-xs rounded-md border bg-neutral-900 text-white dark:bg-yellow-500 dark:text-black cursor-pointer",children:" "}),Nr.length>0&&y.jsxs("div",{className:"flex-1 text-[11px] text-neutral-500 dark:text-neutral-400 text-right",children:[" "," ",Nr.length,""]})]}),Nr.length>0&&y.jsx("ul",{className:"mt-1 space-y-1 max-h-24 overflow-y-auto text-[11px] text-neutral-700 dark:text-neutral-200",children:Nr.map((pe,Ye)=>y.jsxs("li",{className:"flex gap-1 items-start",children:[y.jsxs("span",{className:"shrink-0",children:[Ye+1,"."]}),y.jsx("span",{className:"whitespace-pre-wrap break-words flex-1",children:pe}),y.jsx("button",{type:"button",onClick:()=>{lr(lt=>lt.filter((pt,tt)=>tt!==Ye))},className:"shrink-0 ml-2 text-[10px] text-red-500 hover:underline",children:""})]},Ye))})]}),y.jsx("textarea",{readOnly:!0,value:rn,placeholder:"   .",className:"w-full min-h-[320px] text-xs font-mono rounded-md border bg-neutral-50 dark:bg-neutral-800 p-2"})]}):y.jsx("div",{className:"p-4 border rounded bg-neutral-50 dark:bg-neutral-900 text-sm text-neutral-500",children:"   ."})}function Tz(e,t){return t-e+1}function kz(e){const t=hi(o=>o.date),n=hi(o=>o.rule),s=wd(e);return P.useMemo(()=>{if(!e)return{dae:null,se:null,wol:null,il:null};const o=zm(s,t),l=o>=0?s[o]?.gz??null:null,u=ut(t),f=At(t),m=_t(t,n);return{dae:l,se:u,wol:f,il:m}},[e,s,t,n])}function Az(){const e=async()=>{if(typeof window>"u")return;const{error:t}=await Ni.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/`}});t&&(console.error("Google Login Error:",t),alert("   ."))};return y.jsx("main",{className:"flex min-h-screen items-center justify-center bg-neutral-950 text-white px-4",children:y.jsxs("div",{className:"w-full max-w-sm rounded-2xl bg-neutral-900 p-8 shadow-xl border border-neutral-800",children:[y.jsx("h1",{className:"mb-2 text-2xl font-bold tracking-tight text-white text-center",children:""}),y.jsxs("p",{className:"mb-6 text-sm text-neutral-400 text-center leading-relaxed",children:["  .",y.jsx("br",{}),"    "]}),y.jsxs("button",{type:"button",onClick:e,className:`flex items-center justify-center gap-3 w-full py-3 rounded-lg 
                     bg-white text-black font-medium text-sm shadow 
                     hover:bg-neutral-100 active:scale-[0.98] transition-all cursor-pointer`,children:[y.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",alt:"Google Logo",className:"w-5 h-5"}),y.jsx("span",{children:"  "})]})]})})}const jz={id:"empty",name:"",birthDay:"",birthTime:"",gender:"",birthPlace:{name:"",lat:0,lon:0},relationship:"",memo:"",folder:"",mingSikType:"",DayChangeRule:"",favorite:!1,dateObj:new Date,corrected:new Date,correctedLocal:"",dayStem:"",ganjiText:"",ganji:"",calendarType:"solar",dir:"forward"};function Nz(){const[e,t]=P.useState(!1),[n,s]=P.useState(!1),o=ss(f=>f.migrateLocalToServer),l=ss(f=>f.loadFromServer),u=ss(f=>f.loading);return P.useEffect(()=>{let f=!1;return(async()=>{try{const{data:m,error:p}=await Ni.auth.getSession();if(p){console.error("Supabase getSession error:",p.message),f||(s(!1),t(!0));return}const b=m.session;f||(s(!!b?.user),t(!0))}catch(m){console.error("Supabase auth check unexpected error:",m),f||(s(!1),t(!0))}})(),()=>{f=!0}},[]),P.useEffect(()=>{n&&(async()=>(await o(),await l()))()},[n,o,l]),e?n?u?y.jsx("main",{className:"flex min-h-screen items-center justify-center",children:y.jsx("p",{className:"text-sm text-neutral-500",children:"  ..."})}):y.jsx(Oz,{}):y.jsx(Az,{}):y.jsx("main",{className:"flex min-h-screen items-center justify-center",children:y.jsx("p",{className:"text-sm text-neutral-500",children:"   ..."})})}function Oz(){const{list:e}=ss(),[t,n]=P.useState(()=>e.length>0?e[0].id:""),[s,o]=P.useState(!1),[l,u]=P.useState(!1),[f,m]=P.useState(null),[p,b]=P.useState(!1),[_,x]=P.useState(!1),[S,T]=P.useState(!1);P.useEffect(()=>{b(!0),x(!1)},[]);const k=P.useMemo(()=>e.find(re=>re.id===t)??e[0],[e,t]),A=e.length>0&&!!k&&typeof k.birthDay=="string",M=A?k:jz,R=P.useMemo(()=>pm(M),[M]),N=kz(M),D=re=>typeof re=="string"&&re.length>=2,C=re=>Array.isArray(re)&&re.length===4&&re.every(D),G=()=>o(!0),{settings:H}=br(),V=H.sinsalBase===""?"day":"year",W=H.sinsalBase===""?"day":"year";return y.jsxs("div",{className:"min-h-screen pb-16",children:[y.jsx(uI,{onOpenSidebar:()=>u(!0),onAddNew:G,onOpenCustom:()=>T(!0)}),y.jsx(tz,{open:S,onClose:()=>T(!1),onSave:re=>{n(re.id),b(!1),x(!1),u(!1)}}),y.jsx(nO,{position:"top-center"}),y.jsx(wI,{open:l,onClose:()=>u(!1),onView:re=>{n(re.id),u(!1),b(!1),x(!1);const ee=new Date;ee.setHours(12,0,0,0),hi.getState().setDate(ee),A&&k.id===re.id?(b(!1),x(!1),u(!1)):(n(re.id),u(!1),b(!1),x(!1))},onAddNew:G,onEdit:re=>{m(re),n(re.id),u(!1),b(!1),x(!1)},onDeleteView:()=>{const re=ss.getState().list[0]?.id??"";n(re),b(!0),x(!1)}}),p&&y.jsx(VO,{}),s&&y.jsxs(y.Fragment,{children:[y.jsx("div",{id:"wizard-dim",className:"bg-black opacity-80 fixed inset-0 w-full min-h-full z-99"}),y.jsx("div",{className:"absolute inset-0 transition-opacity duration-150 opacity-100 z-100",children:y.jsx("div",{className:"py-6 pb-16 overflow-y-auto min-h-[100dvh]",children:y.jsx(r7,{onSave:re=>{n(re.id),b(!1),x(!1),u(!1),requestAnimationFrame(()=>o(!1))},onClose:()=>o(!1)})})})]}),A&&!p&&!_&&y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"pt-18 pb-4",children:y.jsx(g4,{data:k,hourTable:k.mingSikType??"/"})}),y.jsx(YI,{ms:k}),y.jsx("div",{children:y.jsx(B8,{data:k})}),y.jsx("div",{className:"max-w-[640px] mx-auto mb-8",children:y.jsx(Ez,{ms:k,natal:C(R)?R:[],chain:N,basis:{voidBasis:V,samjaeBasis:W},includeTenGod:!0,lunarPillars:[]})})]}),_&&y.jsx("div",{className:"pt-18 pb-4",children:y.jsx(GI,{people:e})}),f&&y.jsx("div",{className:"fixed inset-0 z-55 flex items-center justify-center bg-black/60",children:y.jsx("div",{className:"bg-white dark:bg-neutral-950 p-4 rounded-xl w-full max-h-[90dvh] max-w-xl shadow-lg",children:y.jsx(NI,{item:f,onClose:()=>{m(null)}})})}),y.jsx(pI,{onShowToday:()=>{b(!0),x(!1)},onShowCouple:()=>{x(!0),b(!1)}}),y.jsx(FI,{})]})}mN.createRoot(document.getElementById("root")).render(y.jsx(P.StrictMode,{children:y.jsx(Nz,{})}));
