function A2(e,t){for(var n=0;n<t.length;n++){const i=t[n];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in e)){const l=Object.getOwnPropertyDescriptor(i,o);l&&Object.defineProperty(e,o,l.get?l:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}})();function cl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function pd(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var n=function i(){var o=!1;try{o=this instanceof i}catch{}return o?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(i){var o=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(n,i,o.get?o:{enumerable:!0,get:function(){return e[i]}})}),n}var Z0={exports:{}},Ou={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qx;function hN(){if(Qx)return Ou;Qx=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(i,o,l){var u=null;if(l!==void 0&&(u=""+l),o.key!==void 0&&(u=""+o.key),"key"in o){l={};for(var f in o)f!=="key"&&(l[f]=o[f])}else l=o;return o=l.ref,{$$typeof:e,type:i,key:u,ref:o!==void 0?o:null,props:l}}return Ou.Fragment=t,Ou.jsx=n,Ou.jsxs=n,Ou}var ew;function fN(){return ew||(ew=1,Z0.exports=hN()),Z0.exports}var g=fN();const j2="harim.theme",ab="harim.settings.v1";function N2(){try{const e=localStorage.getItem(j2);if(e==="dark"||e==="light")return e;const t=localStorage.getItem(ab);if(t){const i=JSON.parse(t)?.theme;if(i==="dark"||i==="light")return i}return null}catch{return null}}function $f(e){try{localStorage.setItem(j2,e);const t=localStorage.getItem(ab),n=t?JSON.parse(t):{};localStorage.setItem(ab,JSON.stringify({...n,theme:e}))}catch{}}function O2(e){const t=document.documentElement;t.classList.toggle("dark",e==="dark"),t.style.setProperty("color-scheme",e)}(function(){try{const e=N2()??(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");O2(e)}catch{}})();var V0={exports:{}},ot={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tw;function mN(){if(tw)return ot;tw=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),x=Symbol.iterator;function S(G){return G===null||typeof G!="object"?null:(G=x&&G[x]||G["@@iterator"],typeof G=="function"?G:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,j={};function C(G,B,q){this.props=G,this.context=B,this.refs=j,this.updater=q||T}C.prototype.isReactComponent={},C.prototype.setState=function(G,B){if(typeof G!="object"&&typeof G!="function"&&G!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,G,B,"setState")},C.prototype.forceUpdate=function(G){this.updater.enqueueForceUpdate(this,G,"forceUpdate")};function P(){}P.prototype=C.prototype;function N(G,B,q){this.props=G,this.context=B,this.refs=j,this.updater=q||T}var M=N.prototype=new P;M.constructor=N,k(M,C.prototype),M.isPureReactComponent=!0;var D=Array.isArray;function $(){}var z={H:null,A:null,T:null,S:null},F=Object.prototype.hasOwnProperty;function K(G,B,q){var V=q.ref;return{$$typeof:e,type:G,key:B,ref:V!==void 0?V:null,props:q}}function oe(G,B){return K(G.type,B,G.props)}function Q(G){return typeof G=="object"&&G!==null&&G.$$typeof===e}function Y(G){var B={"=":"=0",":":"=2"};return"$"+G.replace(/[=:]/g,function(q){return B[q]})}var ne=/\/+/g;function ie(G,B){return typeof G=="object"&&G!==null&&G.key!=null?Y(""+G.key):B.toString(36)}function Se(G){switch(G.status){case"fulfilled":return G.value;case"rejected":throw G.reason;default:switch(typeof G.status=="string"?G.then($,$):(G.status="pending",G.then(function(B){G.status==="pending"&&(G.status="fulfilled",G.value=B)},function(B){G.status==="pending"&&(G.status="rejected",G.reason=B)})),G.status){case"fulfilled":return G.value;case"rejected":throw G.reason}}throw G}function J(G,B,q,V,H){var X=typeof G;(X==="undefined"||X==="boolean")&&(G=null);var W=!1;if(G===null)W=!0;else switch(X){case"bigint":case"string":case"number":W=!0;break;case"object":switch(G.$$typeof){case e:case t:W=!0;break;case y:return W=G._init,J(W(G._payload),B,q,V,H)}}if(W)return H=H(G),W=V===""?"."+ie(G,0):V,D(H)?(q="",W!=null&&(q=W.replace(ne,"$&/")+"/"),J(H,B,q,"",function(ve){return ve})):H!=null&&(Q(H)&&(H=oe(H,q+(H.key==null||G&&G.key===H.key?"":(""+H.key).replace(ne,"$&/")+"/")+W)),B.push(H)),1;W=0;var he=V===""?".":V+":";if(D(G))for(var se=0;se<G.length;se++)V=G[se],X=he+ie(V,se),W+=J(V,B,q,X,H);else if(se=S(G),typeof se=="function")for(G=se.call(G),se=0;!(V=G.next()).done;)V=V.value,X=he+ie(V,se++),W+=J(V,B,q,X,H);else if(X==="object"){if(typeof G.then=="function")return J(Se(G),B,q,V,H);throw B=String(G),Error("Objects are not valid as a React child (found: "+(B==="[object Object]"?"object with keys {"+Object.keys(G).join(", ")+"}":B)+"). If you meant to render a collection of children, use an array instead.")}return W}function le(G,B,q){if(G==null)return G;var V=[],H=0;return J(G,V,"","",function(X){return B.call(q,X,H++)}),V}function te(G){if(G._status===-1){var B=G._result;B=B(),B.then(function(q){(G._status===0||G._status===-1)&&(G._status=1,G._result=q)},function(q){(G._status===0||G._status===-1)&&(G._status=2,G._result=q)}),G._status===-1&&(G._status=0,G._result=B)}if(G._status===1)return G._result.default;throw G._result}var be=typeof reportError=="function"?reportError:function(G){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var B=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof G=="object"&&G!==null&&typeof G.message=="string"?String(G.message):String(G),error:G});if(!window.dispatchEvent(B))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",G);return}console.error(G)},Z={map:le,forEach:function(G,B,q){le(G,function(){B.apply(this,arguments)},q)},count:function(G){var B=0;return le(G,function(){B++}),B},toArray:function(G){return le(G,function(B){return B})||[]},only:function(G){if(!Q(G))throw Error("React.Children.only expected to receive a single React element child.");return G}};return ot.Activity=_,ot.Children=Z,ot.Component=C,ot.Fragment=n,ot.Profiler=o,ot.PureComponent=N,ot.StrictMode=i,ot.Suspense=m,ot.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=z,ot.__COMPILER_RUNTIME={__proto__:null,c:function(G){return z.H.useMemoCache(G)}},ot.cache=function(G){return function(){return G.apply(null,arguments)}},ot.cacheSignal=function(){return null},ot.cloneElement=function(G,B,q){if(G==null)throw Error("The argument must be a React element, but you passed "+G+".");var V=k({},G.props),H=G.key;if(B!=null)for(X in B.key!==void 0&&(H=""+B.key),B)!F.call(B,X)||X==="key"||X==="__self"||X==="__source"||X==="ref"&&B.ref===void 0||(V[X]=B[X]);var X=arguments.length-2;if(X===1)V.children=q;else if(1<X){for(var W=Array(X),he=0;he<X;he++)W[he]=arguments[he+2];V.children=W}return K(G.type,H,V)},ot.createContext=function(G){return G={$$typeof:u,_currentValue:G,_currentValue2:G,_threadCount:0,Provider:null,Consumer:null},G.Provider=G,G.Consumer={$$typeof:l,_context:G},G},ot.createElement=function(G,B,q){var V,H={},X=null;if(B!=null)for(V in B.key!==void 0&&(X=""+B.key),B)F.call(B,V)&&V!=="key"&&V!=="__self"&&V!=="__source"&&(H[V]=B[V]);var W=arguments.length-2;if(W===1)H.children=q;else if(1<W){for(var he=Array(W),se=0;se<W;se++)he[se]=arguments[se+2];H.children=he}if(G&&G.defaultProps)for(V in W=G.defaultProps,W)H[V]===void 0&&(H[V]=W[V]);return K(G,X,H)},ot.createRef=function(){return{current:null}},ot.forwardRef=function(G){return{$$typeof:f,render:G}},ot.isValidElement=Q,ot.lazy=function(G){return{$$typeof:y,_payload:{_status:-1,_result:G},_init:te}},ot.memo=function(G,B){return{$$typeof:p,type:G,compare:B===void 0?null:B}},ot.startTransition=function(G){var B=z.T,q={};z.T=q;try{var V=G(),H=z.S;H!==null&&H(q,V),typeof V=="object"&&V!==null&&typeof V.then=="function"&&V.then($,be)}catch(X){be(X)}finally{B!==null&&q.types!==null&&(B.types=q.types),z.T=B}},ot.unstable_useCacheRefresh=function(){return z.H.useCacheRefresh()},ot.use=function(G){return z.H.use(G)},ot.useActionState=function(G,B,q){return z.H.useActionState(G,B,q)},ot.useCallback=function(G,B){return z.H.useCallback(G,B)},ot.useContext=function(G){return z.H.useContext(G)},ot.useDebugValue=function(){},ot.useDeferredValue=function(G,B){return z.H.useDeferredValue(G,B)},ot.useEffect=function(G,B){return z.H.useEffect(G,B)},ot.useEffectEvent=function(G){return z.H.useEffectEvent(G)},ot.useId=function(){return z.H.useId()},ot.useImperativeHandle=function(G,B,q){return z.H.useImperativeHandle(G,B,q)},ot.useInsertionEffect=function(G,B){return z.H.useInsertionEffect(G,B)},ot.useLayoutEffect=function(G,B){return z.H.useLayoutEffect(G,B)},ot.useMemo=function(G,B){return z.H.useMemo(G,B)},ot.useOptimistic=function(G,B){return z.H.useOptimistic(G,B)},ot.useReducer=function(G,B,q){return z.H.useReducer(G,B,q)},ot.useRef=function(G){return z.H.useRef(G)},ot.useState=function(G){return z.H.useState(G)},ot.useSyncExternalStore=function(G,B,q){return z.H.useSyncExternalStore(G,B,q)},ot.useTransition=function(){return z.H.useTransition()},ot.version="19.2.1",ot}var nw;function Em(){return nw||(nw=1,V0.exports=mN()),V0.exports}var R=Em();const rn=cl(R);var K0={exports:{}},Du={},W0={exports:{}},X0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rw;function pN(){return rw||(rw=1,(function(e){function t(J,le){var te=J.length;J.push(le);e:for(;0<te;){var be=te-1>>>1,Z=J[be];if(0<o(Z,le))J[be]=le,J[te]=Z,te=be;else break e}}function n(J){return J.length===0?null:J[0]}function i(J){if(J.length===0)return null;var le=J[0],te=J.pop();if(te!==le){J[0]=te;e:for(var be=0,Z=J.length,G=Z>>>1;be<G;){var B=2*(be+1)-1,q=J[B],V=B+1,H=J[V];if(0>o(q,te))V<Z&&0>o(H,q)?(J[be]=H,J[V]=te,be=V):(J[be]=q,J[B]=te,be=B);else if(V<Z&&0>o(H,te))J[be]=H,J[V]=te,be=V;else break e}}return le}function o(J,le){var te=J.sortIndex-le.sortIndex;return te!==0?te:J.id-le.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var u=Date,f=u.now();e.unstable_now=function(){return u.now()-f}}var m=[],p=[],y=1,_=null,x=3,S=!1,T=!1,k=!1,j=!1,C=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function M(J){for(var le=n(p);le!==null;){if(le.callback===null)i(p);else if(le.startTime<=J)i(p),le.sortIndex=le.expirationTime,t(m,le);else break;le=n(p)}}function D(J){if(k=!1,M(J),!T)if(n(m)!==null)T=!0,$||($=!0,Y());else{var le=n(p);le!==null&&Se(D,le.startTime-J)}}var $=!1,z=-1,F=5,K=-1;function oe(){return j?!0:!(e.unstable_now()-K<F)}function Q(){if(j=!1,$){var J=e.unstable_now();K=J;var le=!0;try{e:{T=!1,k&&(k=!1,P(z),z=-1),S=!0;var te=x;try{t:{for(M(J),_=n(m);_!==null&&!(_.expirationTime>J&&oe());){var be=_.callback;if(typeof be=="function"){_.callback=null,x=_.priorityLevel;var Z=be(_.expirationTime<=J);if(J=e.unstable_now(),typeof Z=="function"){_.callback=Z,M(J),le=!0;break t}_===n(m)&&i(m),M(J)}else i(m);_=n(m)}if(_!==null)le=!0;else{var G=n(p);G!==null&&Se(D,G.startTime-J),le=!1}}break e}finally{_=null,x=te,S=!1}le=void 0}}finally{le?Y():$=!1}}}var Y;if(typeof N=="function")Y=function(){N(Q)};else if(typeof MessageChannel<"u"){var ne=new MessageChannel,ie=ne.port2;ne.port1.onmessage=Q,Y=function(){ie.postMessage(null)}}else Y=function(){C(Q,0)};function Se(J,le){z=C(function(){J(e.unstable_now())},le)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(J){J.callback=null},e.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<J?Math.floor(1e3/J):5},e.unstable_getCurrentPriorityLevel=function(){return x},e.unstable_next=function(J){switch(x){case 1:case 2:case 3:var le=3;break;default:le=x}var te=x;x=le;try{return J()}finally{x=te}},e.unstable_requestPaint=function(){j=!0},e.unstable_runWithPriority=function(J,le){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var te=x;x=J;try{return le()}finally{x=te}},e.unstable_scheduleCallback=function(J,le,te){var be=e.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?be+te:be):te=be,J){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=te+Z,J={id:y++,callback:le,priorityLevel:J,startTime:te,expirationTime:Z,sortIndex:-1},te>be?(J.sortIndex=te,t(p,J),n(m)===null&&J===n(p)&&(k?(P(z),z=-1):k=!0,Se(D,te-be))):(J.sortIndex=Z,t(m,J),T||S||(T=!0,$||($=!0,Y()))),J},e.unstable_shouldYield=oe,e.unstable_wrapCallback=function(J){var le=x;return function(){var te=x;x=le;try{return J.apply(this,arguments)}finally{x=te}}}})(X0)),X0}var iw;function gN(){return iw||(iw=1,W0.exports=pN()),W0.exports}var J0={exports:{}},fr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sw;function bN(){if(sw)return fr;sw=1;var e=Em();function t(m){var p="https://react.dev/errors/"+m;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)p+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+m+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function l(m,p,y){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:_==null?null:""+_,children:m,containerInfo:p,implementation:y}}var u=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(m,p){if(m==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return fr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,fr.createPortal=function(m,p){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return l(m,p,null,y)},fr.flushSync=function(m){var p=u.T,y=i.p;try{if(u.T=null,i.p=2,m)return m()}finally{u.T=p,i.p=y,i.d.f()}},fr.preconnect=function(m,p){typeof m=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(m,p))},fr.prefetchDNS=function(m){typeof m=="string"&&i.d.D(m)},fr.preinit=function(m,p){if(typeof m=="string"&&p&&typeof p.as=="string"){var y=p.as,_=f(y,p.crossOrigin),x=typeof p.integrity=="string"?p.integrity:void 0,S=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;y==="style"?i.d.S(m,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:_,integrity:x,fetchPriority:S}):y==="script"&&i.d.X(m,{crossOrigin:_,integrity:x,fetchPriority:S,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},fr.preinitModule=function(m,p){if(typeof m=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var y=f(p.as,p.crossOrigin);i.d.M(m,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(m)},fr.preload=function(m,p){if(typeof m=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var y=p.as,_=f(y,p.crossOrigin);i.d.L(m,y,{crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},fr.preloadModule=function(m,p){if(typeof m=="string")if(p){var y=f(p.as,p.crossOrigin);i.d.m(m,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(m)},fr.requestFormReset=function(m){i.d.r(m)},fr.unstable_batchedUpdates=function(m,p){return m(p)},fr.useFormState=function(m,p,y){return u.H.useFormState(m,p,y)},fr.useFormStatus=function(){return u.H.useHostTransitionStatus()},fr.version="19.2.1",fr}var aw;function D2(){if(aw)return J0.exports;aw=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),J0.exports=bN(),J0.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ow;function yN(){if(ow)return Du;ow=1;var e=gN(),t=Em(),n=D2();function i(r){var s="https://react.dev/errors/"+r;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)s+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function l(r){var s=r,c=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(c=s.return),r=s.return;while(r)}return s.tag===3?c:null}function u(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function f(r){if(r.tag===31){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function m(r){if(l(r)!==r)throw Error(i(188))}function p(r){var s=r.alternate;if(!s){if(s=l(r),s===null)throw Error(i(188));return s!==r?null:r}for(var c=r,h=s;;){var v=c.return;if(v===null)break;var w=v.alternate;if(w===null){if(h=v.return,h!==null){c=h;continue}break}if(v.child===w.child){for(w=v.child;w;){if(w===c)return m(v),r;if(w===h)return m(v),s;w=w.sibling}throw Error(i(188))}if(c.return!==h.return)c=v,h=w;else{for(var O=!1,U=v.child;U;){if(U===c){O=!0,c=v,h=w;break}if(U===h){O=!0,h=v,c=w;break}U=U.sibling}if(!O){for(U=w.child;U;){if(U===c){O=!0,c=w,h=v;break}if(U===h){O=!0,h=w,c=v;break}U=U.sibling}if(!O)throw Error(i(189))}}if(c.alternate!==h)throw Error(i(190))}if(c.tag!==3)throw Error(i(188));return c.stateNode.current===c?r:s}function y(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r;for(r=r.child;r!==null;){if(s=y(r),s!==null)return s;r=r.sibling}return null}var _=Object.assign,x=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),T=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),P=Symbol.for("react.consumer"),N=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),$=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),F=Symbol.for("react.lazy"),K=Symbol.for("react.activity"),oe=Symbol.for("react.memo_cache_sentinel"),Q=Symbol.iterator;function Y(r){return r===null||typeof r!="object"?null:(r=Q&&r[Q]||r["@@iterator"],typeof r=="function"?r:null)}var ne=Symbol.for("react.client.reference");function ie(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===ne?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case k:return"Fragment";case C:return"Profiler";case j:return"StrictMode";case D:return"Suspense";case $:return"SuspenseList";case K:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case T:return"Portal";case N:return r.displayName||"Context";case P:return(r._context.displayName||"Context")+".Consumer";case M:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case z:return s=r.displayName||null,s!==null?s:ie(r.type)||"Memo";case F:s=r._payload,r=r._init;try{return ie(r(s))}catch{}}return null}var Se=Array.isArray,J=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te={pending:!1,data:null,method:null,action:null},be=[],Z=-1;function G(r){return{current:r}}function B(r){0>Z||(r.current=be[Z],be[Z]=null,Z--)}function q(r,s){Z++,be[Z]=r.current,r.current=s}var V=G(null),H=G(null),X=G(null),W=G(null);function he(r,s){switch(q(X,s),q(H,r),q(V,null),s.nodeType){case 9:case 11:r=(r=s.documentElement)&&(r=r.namespaceURI)?wx(r):0;break;default:if(r=s.tagName,s=s.namespaceURI)s=wx(s),r=Sx(s,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}B(V),q(V,r)}function se(){B(V),B(H),B(X)}function ve(r){r.memoizedState!==null&&q(W,r);var s=V.current,c=Sx(s,r.type);s!==c&&(q(H,r),q(V,c))}function ke(r){H.current===r&&(B(V),B(H)),W.current===r&&(B(W),ku._currentValue=te)}var je,Me;function Ee(r){if(je===void 0)try{throw Error()}catch(c){var s=c.stack.trim().match(/\n( *(at )?)/);je=s&&s[1]||"",Me=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+je+r+Me}var Ie=!1;function Pe(r,s){if(!r||Ie)return"";Ie=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(s){var De=function(){throw Error()};if(Object.defineProperty(De.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(De,[])}catch(we){var xe=we}Reflect.construct(r,[],De)}else{try{De.call()}catch(we){xe=we}r.call(De.prototype)}}else{try{throw Error()}catch(we){xe=we}(De=r())&&typeof De.catch=="function"&&De.catch(function(){})}}catch(we){if(we&&xe&&typeof we.stack=="string")return[we.stack,xe.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=h.DetermineComponentFrameRoot(),O=w[0],U=w[1];if(O&&U){var re=O.split(`
`),ye=U.split(`
`);for(v=h=0;h<re.length&&!re[h].includes("DetermineComponentFrameRoot");)h++;for(;v<ye.length&&!ye[v].includes("DetermineComponentFrameRoot");)v++;if(h===re.length||v===ye.length)for(h=re.length-1,v=ye.length-1;1<=h&&0<=v&&re[h]!==ye[v];)v--;for(;1<=h&&0<=v;h--,v--)if(re[h]!==ye[v]){if(h!==1||v!==1)do if(h--,v--,0>v||re[h]!==ye[v]){var Ae=`
`+re[h].replace(" at new "," at ");return r.displayName&&Ae.includes("<anonymous>")&&(Ae=Ae.replace("<anonymous>",r.displayName)),Ae}while(1<=h&&0<=v);break}}}finally{Ie=!1,Error.prepareStackTrace=c}return(c=r?r.displayName||r.name:"")?Ee(c):""}function Ye(r,s){switch(r.tag){case 26:case 27:case 5:return Ee(r.type);case 16:return Ee("Lazy");case 13:return r.child!==s&&s!==null?Ee("Suspense Fallback"):Ee("Suspense");case 19:return Ee("SuspenseList");case 0:case 15:return Pe(r.type,!1);case 11:return Pe(r.type.render,!1);case 1:return Pe(r.type,!0);case 31:return Ee("Activity");default:return""}}function Re(r){try{var s="",c=null;do s+=Ye(r,c),c=r,r=r.return;while(r);return s}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}var fe=Object.prototype.hasOwnProperty,Le=e.unstable_scheduleCallback,ce=e.unstable_cancelCallback,me=e.unstable_shouldYield,$e=e.unstable_requestPaint,He=e.unstable_now,Be=e.unstable_getCurrentPriorityLevel,tt=e.unstable_ImmediatePriority,et=e.unstable_UserBlockingPriority,Zt=e.unstable_NormalPriority,On=e.unstable_LowPriority,En=e.unstable_IdlePriority,lr=e.log,vr=e.unstable_setDisableYieldValue,dn=null,Ct=null;function bn(r){if(typeof lr=="function"&&vr(r),Ct&&typeof Ct.setStrictMode=="function")try{Ct.setStrictMode(dn,r)}catch{}}var hn=Math.clz32?Math.clz32:zi,qr=Math.log,ra=Math.LN2;function zi(r){return r>>>=0,r===0?32:31-(qr(r)/ra|0)|0}var Tn=256,Dn=262144,os=4194304;function Nr(r){var s=r&42;if(s!==0)return s;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function cr(r,s,c){var h=r.pendingLanes;if(h===0)return 0;var v=0,w=r.suspendedLanes,O=r.pingedLanes;r=r.warmLanes;var U=h&134217727;return U!==0?(h=U&~w,h!==0?v=Nr(h):(O&=U,O!==0?v=Nr(O):c||(c=U&~r,c!==0&&(v=Nr(c))))):(U=h&~w,U!==0?v=Nr(U):O!==0?v=Nr(O):c||(c=h&~r,c!==0&&(v=Nr(c)))),v===0?0:s!==0&&s!==v&&(s&w)===0&&(w=v&-v,c=s&-s,w>=c||w===32&&(c&4194048)!==0)?s:v}function gi(r,s){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&s)===0}function ia(r,s){switch(r){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Qa(){var r=os;return os<<=1,(os&62914560)===0&&(os=4194304),r}function eo(r){for(var s=[],c=0;31>c;c++)s.push(r);return s}function Ui(r,s){r.pendingLanes|=s,s!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function to(r,s,c,h,v,w){var O=r.pendingLanes;r.pendingLanes=c,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=c,r.entangledLanes&=c,r.errorRecoveryDisabledLanes&=c,r.shellSuspendCounter=0;var U=r.entanglements,re=r.expirationTimes,ye=r.hiddenUpdates;for(c=O&~c;0<c;){var Ae=31-hn(c),De=1<<Ae;U[Ae]=0,re[Ae]=-1;var xe=ye[Ae];if(xe!==null)for(ye[Ae]=null,Ae=0;Ae<xe.length;Ae++){var we=xe[Ae];we!==null&&(we.lane&=-536870913)}c&=~De}h!==0&&sa(r,h,0),w!==0&&v===0&&r.tag!==0&&(r.suspendedLanes|=w&~(O&~s))}function sa(r,s,c){r.pendingLanes|=s,r.suspendedLanes&=~s;var h=31-hn(s);r.entangledLanes|=s,r.entanglements[h]=r.entanglements[h]|1073741824|c&261930}function no(r,s){var c=r.entangledLanes|=s;for(r=r.entanglements;c;){var h=31-hn(c),v=1<<h;v&s|r[h]&s&&(r[h]|=s),c&=~v}}function ro(r,s){var c=s&-s;return c=(c&42)!==0?1:$n(c),(c&(r.suspendedLanes|s))!==0?0:c}function $n(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function Ve(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function ks(){var r=le.p;return r!==0?r:(r=window.event,r===void 0?32:qx(r.type))}function Or(r,s){var c=le.p;try{return le.p=r,s()}finally{le.p=c}}var ur=Math.random().toString(36).slice(2),sn="__reactFiber$"+ur,kn="__reactProps$"+ur,Zr="__reactContainer$"+ur,bi="__reactEvents$"+ur,pe="__reactListeners$"+ur,Fe="__reactHandles$"+ur,lt="__reactResources$"+ur,pt="__reactMarker$"+ur;function nt(r){delete r[sn],delete r[kn],delete r[bi],delete r[pe],delete r[Fe]}function dt(r){var s=r[sn];if(s)return s;for(var c=r.parentNode;c;){if(s=c[Zr]||c[sn]){if(c=s.alternate,s.child!==null||c!==null&&c.child!==null)for(r=Ox(r);r!==null;){if(c=r[sn])return c;r=Ox(r)}return s}r=c,c=r.parentNode}return null}function xt(r){if(r=r[sn]||r[Zr]){var s=r.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return r}return null}function mt(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r.stateNode;throw Error(i(33))}function In(r){var s=r[lt];return s||(s=r[lt]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function wt(r){r[pt]=!0}var aa=new Set,io={};function yi(r,s){Jn(r,s),Jn(r+"Capture",s)}function Jn(r,s){for(io[r]=s,r=0;r<s.length;r++)aa.add(s[r])}var As=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),so={},ao={};function oo(r){return fe.call(ao,r)?!0:fe.call(so,r)?!1:As.test(r)?ao[r]=!0:(so[r]=!0,!1)}function gt(r,s,c){if(oo(s))if(c===null)r.removeAttribute(s);else{switch(typeof c){case"undefined":case"function":case"symbol":r.removeAttribute(s);return;case"boolean":var h=s.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){r.removeAttribute(s);return}}r.setAttribute(s,""+c)}}function zt(r,s,c){if(c===null)r.removeAttribute(s);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(s);return}r.setAttribute(s,""+c)}}function Dr(r,s,c,h){if(h===null)r.removeAttribute(c);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(c);return}r.setAttributeNS(s,c,""+h)}}function zn(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function js(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Rc(r,s,c){var h=Object.getOwnPropertyDescriptor(r.constructor.prototype,s);if(!r.hasOwnProperty(s)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var v=h.get,w=h.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return v.call(this)},set:function(O){c=""+O,w.call(this,O)}}),Object.defineProperty(r,s,{enumerable:h.enumerable}),{getValue:function(){return c},setValue:function(O){c=""+O},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function at(r){if(!r._valueTracker){var s=js(r)?"checked":"value";r._valueTracker=Rc(r,s,""+r[s])}}function an(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var c=s.getValue(),h="";return r&&(h=js(r)?r.checked?"true":"false":r.value),r=h,r!==c?(s.setValue(r),!0):!1}function oa(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var hl=/[\n"\\]/g;function en(r){return r.replace(hl,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Lc(r,s,c,h,v,w,O,U){r.name="",O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?r.type=O:r.removeAttribute("type"),s!=null?O==="number"?(s===0&&r.value===""||r.value!=s)&&(r.value=""+zn(s)):r.value!==""+zn(s)&&(r.value=""+zn(s)):O!=="submit"&&O!=="reset"||r.removeAttribute("value"),s!=null?Hi(r,O,zn(s)):c!=null?Hi(r,O,zn(c)):h!=null&&r.removeAttribute("value"),v==null&&w!=null&&(r.defaultChecked=!!w),v!=null&&(r.checked=v&&typeof v!="function"&&typeof v!="symbol"),U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"?r.name=""+zn(U):r.removeAttribute("name")}function lo(r,s,c,h,v,w,O,U){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(r.type=w),s!=null||c!=null){if(!(w!=="submit"&&w!=="reset"||s!=null)){at(r);return}c=c!=null?""+zn(c):"",s=s!=null?""+zn(s):c,U||s===r.value||(r.value=s),r.defaultValue=s}h=h??v,h=typeof h!="function"&&typeof h!="symbol"&&!!h,r.checked=U?r.checked:!!h,r.defaultChecked=!!h,O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"&&(r.name=O),at(r)}function Hi(r,s,c){s==="number"&&oa(r.ownerDocument)===r||r.defaultValue===""+c||(r.defaultValue=""+c)}function Yt(r,s,c,h){if(r=r.options,s){s={};for(var v=0;v<c.length;v++)s["$"+c[v]]=!0;for(c=0;c<r.length;c++)v=s.hasOwnProperty("$"+r[c].value),r[c].selected!==v&&(r[c].selected=v),v&&h&&(r[c].defaultSelected=!0)}else{for(c=""+zn(c),s=null,v=0;v<r.length;v++){if(r[v].value===c){r[v].selected=!0,h&&(r[v].defaultSelected=!0);return}s!==null||r[v].disabled||(s=r[v])}s!==null&&(s.selected=!0)}}function ls(r,s,c){if(s!=null&&(s=""+zn(s),s!==r.value&&(r.value=s),c==null)){r.defaultValue!==s&&(r.defaultValue=s);return}r.defaultValue=c!=null?""+zn(c):""}function la(r,s,c,h){if(s==null){if(h!=null){if(c!=null)throw Error(i(92));if(Se(h)){if(1<h.length)throw Error(i(93));h=h[0]}c=h}c==null&&(c=""),s=c}c=zn(s),r.defaultValue=c,h=r.textContent,h===c&&h!==""&&h!==null&&(r.value=h),at(r)}function vi(r,s){if(s){var c=r.firstChild;if(c&&c===r.lastChild&&c.nodeType===3){c.nodeValue=s;return}}r.textContent=s}var Bc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ca(r,s,c){var h=s.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?h?r.setProperty(s,""):s==="float"?r.cssFloat="":r[s]="":h?r.setProperty(s,c):typeof c!="number"||c===0||Bc.has(s)?s==="float"?r.cssFloat=c:r[s]=(""+c).trim():r[s]=c+"px"}function fl(r,s,c){if(s!=null&&typeof s!="object")throw Error(i(62));if(r=r.style,c!=null){for(var h in c)!c.hasOwnProperty(h)||s!=null&&s.hasOwnProperty(h)||(h.indexOf("--")===0?r.setProperty(h,""):h==="float"?r.cssFloat="":r[h]="");for(var v in s)h=s[v],s.hasOwnProperty(v)&&c[v]!==h&&ca(r,v,h)}else for(var w in s)s.hasOwnProperty(w)&&ca(r,w,s[w])}function co(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ml=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Pc=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ua(r){return Pc.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function Mr(){}var pl=null;function uo(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var da=null,st=null;function Vr(r){var s=xt(r);if(s&&(r=s.stateNode)){var c=r[kn]||null;e:switch(r=s.stateNode,s.type){case"input":if(Lc(r,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),s=c.name,c.type==="radio"&&s!=null){for(c=r;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+en(""+s)+'"][type="radio"]'),s=0;s<c.length;s++){var h=c[s];if(h!==r&&h.form===r.form){var v=h[kn]||null;if(!v)throw Error(i(90));Lc(h,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(s=0;s<c.length;s++)h=c[s],h.form===r.form&&an(h)}break e;case"textarea":ls(r,c.value,c.defaultValue);break e;case"select":s=c.value,s!=null&&Yt(r,!!c.multiple,s,!1)}}}var Bt=!1;function $c(r,s,c){if(Bt)return r(s,c);Bt=!0;try{var h=r(s);return h}finally{if(Bt=!1,(da!==null||st!==null)&&(Sh(),da&&(s=da,r=st,st=da=null,Vr(s),r)))for(s=0;s<r.length;s++)Vr(r[s])}}function Ns(r,s){var c=r.stateNode;if(c===null)return null;var h=c[kn]||null;if(h===null)return null;c=h[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(r=r.type,h=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!h;break e;default:r=!1}if(r)return null;if(c&&typeof c!="function")throw Error(i(231,s,typeof c));return c}var Kr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ho=!1;if(Kr)try{var Wr={};Object.defineProperty(Wr,"passive",{get:function(){ho=!0}}),window.addEventListener("test",Wr,Wr),window.removeEventListener("test",Wr,Wr)}catch{ho=!1}var _i=null,Os=null,yn=null;function cs(){if(yn)return yn;var r,s=Os,c=s.length,h,v="value"in _i?_i.value:_i.textContent,w=v.length;for(r=0;r<c&&s[r]===v[r];r++);var O=c-r;for(h=1;h<=O&&s[c-h]===v[w-h];h++);return yn=v.slice(r,1<h?1-h:void 0)}function fo(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function mo(){return!0}function jd(){return!1}function Qn(r){function s(c,h,v,w,O){this._reactName=c,this._targetInst=v,this.type=h,this.nativeEvent=w,this.target=O,this.currentTarget=null;for(var U in r)r.hasOwnProperty(U)&&(c=r[U],this[U]=c?c(w):w[U]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?mo:jd,this.isPropagationStopped=jd,this}return _(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=mo)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=mo)},persist:function(){},isPersistent:mo}),s}var Gi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gl=Qn(Gi),ha=_({},Gi,{view:0,detail:0}),St=Qn(ha),Ic,_r,Fi,po=_({},ha,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yc,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Fi&&(Fi&&r.type==="mousemove"?(Ic=r.screenX-Fi.screenX,_r=r.screenY-Fi.screenY):_r=Ic=0,Fi=r),Ic)},movementY:function(r){return"movementY"in r?r.movementY:_r}}),Nd=Qn(po),zc=_({},po,{dataTransfer:0}),rp=Qn(zc),Od=_({},ha,{relatedTarget:0}),Uc=Qn(Od),ip=_({},Gi,{animationName:0,elapsedTime:0,pseudoElement:0}),Hc=Qn(ip),sp=_({},Gi,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),xi=Qn(sp),ap=_({},Gi,{data:0}),Gc=Qn(ap),us={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Dd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Md={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Fc(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=Md[r])?!!s[r]:!1}function Yc(){return Fc}var Cd=_({},ha,{key:function(r){if(r.key){var s=us[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=fo(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Dd[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yc,charCode:function(r){return r.type==="keypress"?fo(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?fo(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Rd=Qn(Cd),op=_({},po,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ld=Qn(op),qc=_({},ha,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yc}),lp=Qn(qc),Bd=_({},Gi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Pd=Qn(Bd),bl=_({},po,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Ds=Qn(bl),cp=_({},Gi,{newState:0,oldState:0}),go=Qn(cp),Cr=[9,13,27,32],yl=Kr&&"CompositionEvent"in window,fa=null;Kr&&"documentMode"in document&&(fa=document.documentMode);var up=Kr&&"TextEvent"in window&&!fa,vl=Kr&&(!yl||fa&&8<fa&&11>=fa),_l=" ",$d=!1;function Id(r,s){switch(r){case"keyup":return Cr.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zc(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var ma=!1;function Xr(r,s){switch(r){case"compositionend":return Zc(s);case"keypress":return s.which!==32?null:($d=!0,_l);case"textInput":return r=s.data,r===_l&&$d?null:r;default:return null}}function pa(r,s){if(ma)return r==="compositionend"||!yl&&Id(r,s)?(r=cs(),yn=Os=_i=null,ma=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return vl&&s.locale!=="ko"?null:s.data;default:return null}}var dp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wi(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!dp[r.type]:s==="textarea"}function zd(r,s,c,h){da?st?st.push(h):st=[h]:da=h,s=Oh(s,"onChange"),0<s.length&&(c=new gl("onChange","change",null,c,h),r.push({event:c,listeners:s}))}var Si=null,bo=null;function yo(r){gx(r,0)}function vo(r){var s=mt(r);if(an(s))return r}function _o(r,s){if(r==="change")return s}var Ud=!1;if(Kr){var Ei;if(Kr){var ga="oninput"in document;if(!ga){var Hd=document.createElement("div");Hd.setAttribute("oninput","return;"),ga=typeof Hd.oninput=="function"}Ei=ga}else Ei=!1;Ud=Ei&&(!document.documentMode||9<document.documentMode)}function xl(){Si&&(Si.detachEvent("onpropertychange",Gd),bo=Si=null)}function Gd(r){if(r.propertyName==="value"&&vo(bo)){var s=[];zd(s,bo,r,uo(r)),$c(yo,s)}}function Yi(r,s,c){r==="focusin"?(xl(),Si=s,bo=c,Si.attachEvent("onpropertychange",Gd)):r==="focusout"&&xl()}function hp(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return vo(bo)}function ba(r,s){if(r==="click")return vo(s)}function fp(r,s){if(r==="input"||r==="change")return vo(s)}function qi(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var Yn=typeof Object.is=="function"?Object.is:qi;function ya(r,s){if(Yn(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var c=Object.keys(r),h=Object.keys(s);if(c.length!==h.length)return!1;for(h=0;h<c.length;h++){var v=c[h];if(!fe.call(s,v)||!Yn(r[v],s[v]))return!1}return!0}function wl(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function xo(r,s){var c=wl(r);r=0;for(var h;c;){if(c.nodeType===3){if(h=r+c.textContent.length,r<=s&&h>=s)return{node:c,offset:s-r};r=h}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=wl(c)}}function Sl(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?Sl(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function wo(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var s=oa(r.document);s instanceof r.HTMLIFrameElement;){try{var c=typeof s.contentWindow.location.href=="string"}catch{c=!1}if(c)r=s.contentWindow;else break;s=oa(r.document)}return s}function ds(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}var El=Kr&&"documentMode"in document&&11>=document.documentMode,hs=null,Tl=null,So=null,va=!1;function Fd(r,s,c){var h=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;va||hs==null||hs!==oa(h)||(h=hs,"selectionStart"in h&&ds(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),So&&ya(So,h)||(So=h,h=Oh(Tl,"onSelect"),0<h.length&&(s=new gl("onSelect","select",null,s,c),r.push({event:s,listeners:h}),s.target=hs)))}function fs(r,s){var c={};return c[r.toLowerCase()]=s.toLowerCase(),c["Webkit"+r]="webkit"+s,c["Moz"+r]="moz"+s,c}var _a={animationend:fs("Animation","AnimationEnd"),animationiteration:fs("Animation","AnimationIteration"),animationstart:fs("Animation","AnimationStart"),transitionrun:fs("Transition","TransitionRun"),transitionstart:fs("Transition","TransitionStart"),transitioncancel:fs("Transition","TransitionCancel"),transitionend:fs("Transition","TransitionEnd")},kl={},Yd={};Kr&&(Yd=document.createElement("div").style,"AnimationEvent"in window||(delete _a.animationend.animation,delete _a.animationiteration.animation,delete _a.animationstart.animation),"TransitionEvent"in window||delete _a.transitionend.transition);function qn(r){if(kl[r])return kl[r];if(!_a[r])return r;var s=_a[r],c;for(c in s)if(s.hasOwnProperty(c)&&c in Yd)return kl[r]=s[c];return r}var Eo=qn("animationend"),qd=qn("animationiteration"),To=qn("animationstart"),mp=qn("transitionrun"),Zd=qn("transitionstart"),pp=qn("transitioncancel"),xa=qn("transitionend"),Vd=new Map,ms="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ms.push("scrollEnd");function Rr(r,s){Vd.set(r,s),yi(s,[r])}var ko=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},Lr=[],dr=0,Al=0;function Ao(){for(var r=dr,s=Al=dr=0;s<r;){var c=Lr[s];Lr[s++]=null;var h=Lr[s];Lr[s++]=null;var v=Lr[s];Lr[s++]=null;var w=Lr[s];if(Lr[s++]=null,h!==null&&v!==null){var O=h.pending;O===null?v.next=v:(v.next=O.next,O.next=v),h.pending=v}w!==0&&wa(c,v,w)}}function ps(r,s,c,h){Lr[dr++]=r,Lr[dr++]=s,Lr[dr++]=c,Lr[dr++]=h,Al|=h,r.lanes|=h,r=r.alternate,r!==null&&(r.lanes|=h)}function Vc(r,s,c,h){return ps(r,s,c,h),jo(r)}function Ti(r,s){return ps(r,null,null,s),jo(r)}function wa(r,s,c){r.lanes|=c;var h=r.alternate;h!==null&&(h.lanes|=c);for(var v=!1,w=r.return;w!==null;)w.childLanes|=c,h=w.alternate,h!==null&&(h.childLanes|=c),w.tag===22&&(r=w.stateNode,r===null||r._visibility&1||(v=!0)),r=w,w=w.return;return r.tag===3?(w=r.stateNode,v&&s!==null&&(v=31-hn(c),r=w.hiddenUpdates,h=r[v],h===null?r[v]=[s]:h.push(s),s.lane=c|536870912),w):null}function jo(r){if(50<vu)throw vu=0,b0=null,Error(i(185));for(var s=r.return;s!==null;)r=s,s=r.return;return r.tag===3?r.stateNode:null}var Ms={};function gp(r,s,c,h){this.tag=r,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hr(r,s,c,h){return new gp(r,s,c,h)}function jl(r){return r=r.prototype,!(!r||!r.isReactComponent)}function ki(r,s){var c=r.alternate;return c===null?(c=hr(r.tag,s,r.key,r.mode),c.elementType=r.elementType,c.type=r.type,c.stateNode=r.stateNode,c.alternate=r,r.alternate=c):(c.pendingProps=s,c.type=r.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=r.flags&65011712,c.childLanes=r.childLanes,c.lanes=r.lanes,c.child=r.child,c.memoizedProps=r.memoizedProps,c.memoizedState=r.memoizedState,c.updateQueue=r.updateQueue,s=r.dependencies,c.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},c.sibling=r.sibling,c.index=r.index,c.ref=r.ref,c.refCleanup=r.refCleanup,c}function Kc(r,s){r.flags&=65011714;var c=r.alternate;return c===null?(r.childLanes=0,r.lanes=s,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=c.childLanes,r.lanes=c.lanes,r.child=c.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=c.memoizedProps,r.memoizedState=c.memoizedState,r.updateQueue=c.updateQueue,r.type=c.type,s=c.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),r}function No(r,s,c,h,v,w){var O=0;if(h=r,typeof r=="function")jl(r)&&(O=1);else if(typeof r=="string")O=eN(r,c,V.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case K:return r=hr(31,c,s,v),r.elementType=K,r.lanes=w,r;case k:return Cs(c.children,v,w,s);case j:O=8,v|=24;break;case C:return r=hr(12,c,s,v|2),r.elementType=C,r.lanes=w,r;case D:return r=hr(13,c,s,v),r.elementType=D,r.lanes=w,r;case $:return r=hr(19,c,s,v),r.elementType=$,r.lanes=w,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case N:O=10;break e;case P:O=9;break e;case M:O=11;break e;case z:O=14;break e;case F:O=16,h=null;break e}O=29,c=Error(i(130,r===null?"null":typeof r,"")),h=null}return s=hr(O,c,s,v),s.elementType=r,s.type=h,s.lanes=w,s}function Cs(r,s,c,h){return r=hr(7,r,h,s),r.lanes=c,r}function Nl(r,s,c){return r=hr(6,r,null,s),r.lanes=c,r}function Wc(r){var s=hr(18,null,null,0);return s.stateNode=r,s}function Xc(r,s,c){return s=hr(4,r.children!==null?r.children:[],r.key,s),s.lanes=c,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}var a=new WeakMap;function d(r,s){if(typeof r=="object"&&r!==null){var c=a.get(r);return c!==void 0?c:(s={value:r,source:s,stack:Re(s)},a.set(r,s),s)}return{value:r,source:s,stack:Re(s)}}var b=[],E=0,A=null,I=0,ee=[],de=0,_e=null,Oe=1,Ue="";function Xe(r,s){b[E++]=I,b[E++]=A,A=r,I=s}function ht(r,s,c){ee[de++]=Oe,ee[de++]=Ue,ee[de++]=_e,_e=r;var h=Oe;r=Ue;var v=32-hn(h)-1;h&=~(1<<v),c+=1;var w=32-hn(s)+v;if(30<w){var O=v-v%5;w=(h&(1<<O)-1).toString(32),h>>=O,v-=O,Oe=1<<32-hn(s)+v|c<<v|h,Ue=w+r}else Oe=1<<w|c<<v|h,Ue=r}function Un(r){r.return!==null&&(Xe(r,1),ht(r,1,0))}function vn(r){for(;r===A;)A=b[--E],b[E]=null,I=b[--E],b[E]=null;for(;r===_e;)_e=ee[--de],ee[de]=null,Ue=ee[--de],ee[de]=null,Oe=ee[--de],ee[de]=null}function xr(r,s){ee[de++]=Oe,ee[de++]=Ue,ee[de++]=_e,Oe=s.id,Ue=s.overflow,_e=r}var Nt=null,Ot=null,bt=!1,gs=null,Br=!1,Ol=Error(i(519));function bs(r){var s=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Oo(d(s,r)),Ol}function Jc(r){var s=r.stateNode,c=r.type,h=r.memoizedProps;switch(s[sn]=r,s[kn]=h,c){case"dialog":vt("cancel",s),vt("close",s);break;case"iframe":case"object":case"embed":vt("load",s);break;case"video":case"audio":for(c=0;c<xu.length;c++)vt(xu[c],s);break;case"source":vt("error",s);break;case"img":case"image":case"link":vt("error",s),vt("load",s);break;case"details":vt("toggle",s);break;case"input":vt("invalid",s),lo(s,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0);break;case"select":vt("invalid",s);break;case"textarea":vt("invalid",s),la(s,h.value,h.defaultValue,h.children)}c=h.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||s.textContent===""+c||h.suppressHydrationWarning===!0||_x(s.textContent,c)?(h.popover!=null&&(vt("beforetoggle",s),vt("toggle",s)),h.onScroll!=null&&vt("scroll",s),h.onScrollEnd!=null&&vt("scrollend",s),h.onClick!=null&&(s.onclick=Mr),s=!0):s=!1,s||bs(r,!0)}function fn(r){for(Nt=r.return;Nt;)switch(Nt.tag){case 5:case 31:case 13:Br=!1;return;case 27:case 3:Br=!0;return;default:Nt=Nt.return}}function Zi(r){if(r!==Nt)return!1;if(!bt)return fn(r),bt=!0,!1;var s=r.tag,c;if((c=s!==3&&s!==27)&&((c=s===5)&&(c=r.type,c=!(c!=="form"&&c!=="button")||M0(r.type,r.memoizedProps)),c=!c),c&&Ot&&bs(r),fn(r),s===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));Ot=Nx(r)}else if(s===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));Ot=Nx(r)}else s===27?(s=Ot,Ba(r.type)?(r=P0,P0=null,Ot=r):Ot=s):Ot=Nt?ji(r.stateNode.nextSibling):null;return!0}function Rs(){Ot=Nt=null,bt=!1}function Qc(){var r=gs;return r!==null&&(zr===null?zr=r:zr.push.apply(zr,r),gs=null),r}function Oo(r){gs===null?gs=[r]:gs.push(r)}var Do=G(null),ys=null,Vi=null;function Sa(r,s,c){q(Do,s._currentValue),s._currentValue=c}function Ls(r){r._currentValue=Do.current,B(Do)}function bp(r,s,c){for(;r!==null;){var h=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,h!==null&&(h.childLanes|=s)):h!==null&&(h.childLanes&s)!==s&&(h.childLanes|=s),r===c)break;r=r.return}}function yp(r,s,c,h){var v=r.child;for(v!==null&&(v.return=r);v!==null;){var w=v.dependencies;if(w!==null){var O=v.child;w=w.firstContext;e:for(;w!==null;){var U=w;w=v;for(var re=0;re<s.length;re++)if(U.context===s[re]){w.lanes|=c,U=w.alternate,U!==null&&(U.lanes|=c),bp(w.return,c,r),h||(O=null);break e}w=U.next}}else if(v.tag===18){if(O=v.return,O===null)throw Error(i(341));O.lanes|=c,w=O.alternate,w!==null&&(w.lanes|=c),bp(O,c,r),O=null}else O=v.child;if(O!==null)O.return=v;else for(O=v;O!==null;){if(O===r){O=null;break}if(v=O.sibling,v!==null){v.return=O.return,O=v;break}O=O.return}v=O}}function Dl(r,s,c,h){r=null;for(var v=s,w=!1;v!==null;){if(!w){if((v.flags&524288)!==0)w=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var O=v.alternate;if(O===null)throw Error(i(387));if(O=O.memoizedProps,O!==null){var U=v.type;Yn(v.pendingProps.value,O.value)||(r!==null?r.push(U):r=[U])}}else if(v===W.current){if(O=v.alternate,O===null)throw Error(i(387));O.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(r!==null?r.push(ku):r=[ku])}v=v.return}r!==null&&yp(s,r,c,h),s.flags|=262144}function Kd(r){for(r=r.firstContext;r!==null;){if(!Yn(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function Mo(r){ys=r,Vi=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function er(r){return sv(ys,r)}function Wd(r,s){return ys===null&&Mo(r),sv(r,s)}function sv(r,s){var c=s._currentValue;if(s={context:s,memoizedValue:c,next:null},Vi===null){if(r===null)throw Error(i(308));Vi=s,r.dependencies={lanes:0,firstContext:s},r.flags|=524288}else Vi=Vi.next=s;return c}var WA=typeof AbortController<"u"?AbortController:function(){var r=[],s=this.signal={aborted:!1,addEventListener:function(c,h){r.push(h)}};this.abort=function(){s.aborted=!0,r.forEach(function(c){return c()})}},XA=e.unstable_scheduleCallback,JA=e.unstable_NormalPriority,Mn={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function vp(){return{controller:new WA,data:new Map,refCount:0}}function eu(r){r.refCount--,r.refCount===0&&XA(JA,function(){r.controller.abort()})}var tu=null,_p=0,Ml=0,Cl=null;function QA(r,s){if(tu===null){var c=tu=[];_p=0,Ml=S0(),Cl={status:"pending",value:void 0,then:function(h){c.push(h)}}}return _p++,s.then(av,av),s}function av(){if(--_p===0&&tu!==null){Cl!==null&&(Cl.status="fulfilled");var r=tu;tu=null,Ml=0,Cl=null;for(var s=0;s<r.length;s++)(0,r[s])()}}function ej(r,s){var c=[],h={status:"pending",value:null,reason:null,then:function(v){c.push(v)}};return r.then(function(){h.status="fulfilled",h.value=s;for(var v=0;v<c.length;v++)(0,c[v])(s)},function(v){for(h.status="rejected",h.reason=v,v=0;v<c.length;v++)(0,c[v])(void 0)}),h}var ov=J.S;J.S=function(r,s){F_=He(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&QA(r,s),ov!==null&&ov(r,s)};var Co=G(null);function xp(){var r=Co.current;return r!==null?r:qt.pooledCache}function Xd(r,s){s===null?q(Co,Co.current):q(Co,s.pool)}function lv(){var r=xp();return r===null?null:{parent:Mn._currentValue,pool:r}}var Rl=Error(i(460)),wp=Error(i(474)),Jd=Error(i(542)),Qd={then:function(){}};function cv(r){return r=r.status,r==="fulfilled"||r==="rejected"}function uv(r,s,c){switch(c=r[c],c===void 0?r.push(s):c!==s&&(s.then(Mr,Mr),s=c),s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,hv(r),r;default:if(typeof s.status=="string")s.then(Mr,Mr);else{if(r=qt,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=s,r.status="pending",r.then(function(h){if(s.status==="pending"){var v=s;v.status="fulfilled",v.value=h}},function(h){if(s.status==="pending"){var v=s;v.status="rejected",v.reason=h}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,hv(r),r}throw Lo=s,Rl}}function Ro(r){try{var s=r._init;return s(r._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(Lo=c,Rl):c}}var Lo=null;function dv(){if(Lo===null)throw Error(i(459));var r=Lo;return Lo=null,r}function hv(r){if(r===Rl||r===Jd)throw Error(i(483))}var Ll=null,nu=0;function eh(r){var s=nu;return nu+=1,Ll===null&&(Ll=[]),uv(Ll,r,s)}function ru(r,s){s=s.props.ref,r.ref=s!==void 0?s:null}function th(r,s){throw s.$$typeof===x?Error(i(525)):(r=Object.prototype.toString.call(s),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r)))}function fv(r){function s(ue,ae){if(r){var ge=ue.deletions;ge===null?(ue.deletions=[ae],ue.flags|=16):ge.push(ae)}}function c(ue,ae){if(!r)return null;for(;ae!==null;)s(ue,ae),ae=ae.sibling;return null}function h(ue){for(var ae=new Map;ue!==null;)ue.key!==null?ae.set(ue.key,ue):ae.set(ue.index,ue),ue=ue.sibling;return ae}function v(ue,ae){return ue=ki(ue,ae),ue.index=0,ue.sibling=null,ue}function w(ue,ae,ge){return ue.index=ge,r?(ge=ue.alternate,ge!==null?(ge=ge.index,ge<ae?(ue.flags|=67108866,ae):ge):(ue.flags|=67108866,ae)):(ue.flags|=1048576,ae)}function O(ue){return r&&ue.alternate===null&&(ue.flags|=67108866),ue}function U(ue,ae,ge,Ne){return ae===null||ae.tag!==6?(ae=Nl(ge,ue.mode,Ne),ae.return=ue,ae):(ae=v(ae,ge),ae.return=ue,ae)}function re(ue,ae,ge,Ne){var Qe=ge.type;return Qe===k?Ae(ue,ae,ge.props.children,Ne,ge.key):ae!==null&&(ae.elementType===Qe||typeof Qe=="object"&&Qe!==null&&Qe.$$typeof===F&&Ro(Qe)===ae.type)?(ae=v(ae,ge.props),ru(ae,ge),ae.return=ue,ae):(ae=No(ge.type,ge.key,ge.props,null,ue.mode,Ne),ru(ae,ge),ae.return=ue,ae)}function ye(ue,ae,ge,Ne){return ae===null||ae.tag!==4||ae.stateNode.containerInfo!==ge.containerInfo||ae.stateNode.implementation!==ge.implementation?(ae=Xc(ge,ue.mode,Ne),ae.return=ue,ae):(ae=v(ae,ge.children||[]),ae.return=ue,ae)}function Ae(ue,ae,ge,Ne,Qe){return ae===null||ae.tag!==7?(ae=Cs(ge,ue.mode,Ne,Qe),ae.return=ue,ae):(ae=v(ae,ge),ae.return=ue,ae)}function De(ue,ae,ge){if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return ae=Nl(""+ae,ue.mode,ge),ae.return=ue,ae;if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case S:return ge=No(ae.type,ae.key,ae.props,null,ue.mode,ge),ru(ge,ae),ge.return=ue,ge;case T:return ae=Xc(ae,ue.mode,ge),ae.return=ue,ae;case F:return ae=Ro(ae),De(ue,ae,ge)}if(Se(ae)||Y(ae))return ae=Cs(ae,ue.mode,ge,null),ae.return=ue,ae;if(typeof ae.then=="function")return De(ue,eh(ae),ge);if(ae.$$typeof===N)return De(ue,Wd(ue,ae),ge);th(ue,ae)}return null}function xe(ue,ae,ge,Ne){var Qe=ae!==null?ae.key:null;if(typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint")return Qe!==null?null:U(ue,ae,""+ge,Ne);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case S:return ge.key===Qe?re(ue,ae,ge,Ne):null;case T:return ge.key===Qe?ye(ue,ae,ge,Ne):null;case F:return ge=Ro(ge),xe(ue,ae,ge,Ne)}if(Se(ge)||Y(ge))return Qe!==null?null:Ae(ue,ae,ge,Ne,null);if(typeof ge.then=="function")return xe(ue,ae,eh(ge),Ne);if(ge.$$typeof===N)return xe(ue,ae,Wd(ue,ge),Ne);th(ue,ge)}return null}function we(ue,ae,ge,Ne,Qe){if(typeof Ne=="string"&&Ne!==""||typeof Ne=="number"||typeof Ne=="bigint")return ue=ue.get(ge)||null,U(ae,ue,""+Ne,Qe);if(typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case S:return ue=ue.get(Ne.key===null?ge:Ne.key)||null,re(ae,ue,Ne,Qe);case T:return ue=ue.get(Ne.key===null?ge:Ne.key)||null,ye(ae,ue,Ne,Qe);case F:return Ne=Ro(Ne),we(ue,ae,ge,Ne,Qe)}if(Se(Ne)||Y(Ne))return ue=ue.get(ge)||null,Ae(ae,ue,Ne,Qe,null);if(typeof Ne.then=="function")return we(ue,ae,ge,eh(Ne),Qe);if(Ne.$$typeof===N)return we(ue,ae,ge,Wd(ae,Ne),Qe);th(ae,Ne)}return null}function qe(ue,ae,ge,Ne){for(var Qe=null,Dt=null,Ke=ae,ft=ae=0,Tt=null;Ke!==null&&ft<ge.length;ft++){Ke.index>ft?(Tt=Ke,Ke=null):Tt=Ke.sibling;var Mt=xe(ue,Ke,ge[ft],Ne);if(Mt===null){Ke===null&&(Ke=Tt);break}r&&Ke&&Mt.alternate===null&&s(ue,Ke),ae=w(Mt,ae,ft),Dt===null?Qe=Mt:Dt.sibling=Mt,Dt=Mt,Ke=Tt}if(ft===ge.length)return c(ue,Ke),bt&&Xe(ue,ft),Qe;if(Ke===null){for(;ft<ge.length;ft++)Ke=De(ue,ge[ft],Ne),Ke!==null&&(ae=w(Ke,ae,ft),Dt===null?Qe=Ke:Dt.sibling=Ke,Dt=Ke);return bt&&Xe(ue,ft),Qe}for(Ke=h(Ke);ft<ge.length;ft++)Tt=we(Ke,ue,ft,ge[ft],Ne),Tt!==null&&(r&&Tt.alternate!==null&&Ke.delete(Tt.key===null?ft:Tt.key),ae=w(Tt,ae,ft),Dt===null?Qe=Tt:Dt.sibling=Tt,Dt=Tt);return r&&Ke.forEach(function(Ua){return s(ue,Ua)}),bt&&Xe(ue,ft),Qe}function rt(ue,ae,ge,Ne){if(ge==null)throw Error(i(151));for(var Qe=null,Dt=null,Ke=ae,ft=ae=0,Tt=null,Mt=ge.next();Ke!==null&&!Mt.done;ft++,Mt=ge.next()){Ke.index>ft?(Tt=Ke,Ke=null):Tt=Ke.sibling;var Ua=xe(ue,Ke,Mt.value,Ne);if(Ua===null){Ke===null&&(Ke=Tt);break}r&&Ke&&Ua.alternate===null&&s(ue,Ke),ae=w(Ua,ae,ft),Dt===null?Qe=Ua:Dt.sibling=Ua,Dt=Ua,Ke=Tt}if(Mt.done)return c(ue,Ke),bt&&Xe(ue,ft),Qe;if(Ke===null){for(;!Mt.done;ft++,Mt=ge.next())Mt=De(ue,Mt.value,Ne),Mt!==null&&(ae=w(Mt,ae,ft),Dt===null?Qe=Mt:Dt.sibling=Mt,Dt=Mt);return bt&&Xe(ue,ft),Qe}for(Ke=h(Ke);!Mt.done;ft++,Mt=ge.next())Mt=we(Ke,ue,ft,Mt.value,Ne),Mt!==null&&(r&&Mt.alternate!==null&&Ke.delete(Mt.key===null?ft:Mt.key),ae=w(Mt,ae,ft),Dt===null?Qe=Mt:Dt.sibling=Mt,Dt=Mt);return r&&Ke.forEach(function(dN){return s(ue,dN)}),bt&&Xe(ue,ft),Qe}function Gt(ue,ae,ge,Ne){if(typeof ge=="object"&&ge!==null&&ge.type===k&&ge.key===null&&(ge=ge.props.children),typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case S:e:{for(var Qe=ge.key;ae!==null;){if(ae.key===Qe){if(Qe=ge.type,Qe===k){if(ae.tag===7){c(ue,ae.sibling),Ne=v(ae,ge.props.children),Ne.return=ue,ue=Ne;break e}}else if(ae.elementType===Qe||typeof Qe=="object"&&Qe!==null&&Qe.$$typeof===F&&Ro(Qe)===ae.type){c(ue,ae.sibling),Ne=v(ae,ge.props),ru(Ne,ge),Ne.return=ue,ue=Ne;break e}c(ue,ae);break}else s(ue,ae);ae=ae.sibling}ge.type===k?(Ne=Cs(ge.props.children,ue.mode,Ne,ge.key),Ne.return=ue,ue=Ne):(Ne=No(ge.type,ge.key,ge.props,null,ue.mode,Ne),ru(Ne,ge),Ne.return=ue,ue=Ne)}return O(ue);case T:e:{for(Qe=ge.key;ae!==null;){if(ae.key===Qe)if(ae.tag===4&&ae.stateNode.containerInfo===ge.containerInfo&&ae.stateNode.implementation===ge.implementation){c(ue,ae.sibling),Ne=v(ae,ge.children||[]),Ne.return=ue,ue=Ne;break e}else{c(ue,ae);break}else s(ue,ae);ae=ae.sibling}Ne=Xc(ge,ue.mode,Ne),Ne.return=ue,ue=Ne}return O(ue);case F:return ge=Ro(ge),Gt(ue,ae,ge,Ne)}if(Se(ge))return qe(ue,ae,ge,Ne);if(Y(ge)){if(Qe=Y(ge),typeof Qe!="function")throw Error(i(150));return ge=Qe.call(ge),rt(ue,ae,ge,Ne)}if(typeof ge.then=="function")return Gt(ue,ae,eh(ge),Ne);if(ge.$$typeof===N)return Gt(ue,ae,Wd(ue,ge),Ne);th(ue,ge)}return typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint"?(ge=""+ge,ae!==null&&ae.tag===6?(c(ue,ae.sibling),Ne=v(ae,ge),Ne.return=ue,ue=Ne):(c(ue,ae),Ne=Nl(ge,ue.mode,Ne),Ne.return=ue,ue=Ne),O(ue)):c(ue,ae)}return function(ue,ae,ge,Ne){try{nu=0;var Qe=Gt(ue,ae,ge,Ne);return Ll=null,Qe}catch(Ke){if(Ke===Rl||Ke===Jd)throw Ke;var Dt=hr(29,Ke,null,ue.mode);return Dt.lanes=Ne,Dt.return=ue,Dt}finally{}}}var Bo=fv(!0),mv=fv(!1),Ea=!1;function Sp(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ep(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Ta(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function ka(r,s,c){var h=r.updateQueue;if(h===null)return null;if(h=h.shared,(Rt&2)!==0){var v=h.pending;return v===null?s.next=s:(s.next=v.next,v.next=s),h.pending=s,s=jo(r),wa(r,null,c),s}return ps(r,h,s,c),jo(r)}function iu(r,s,c){if(s=s.updateQueue,s!==null&&(s=s.shared,(c&4194048)!==0)){var h=s.lanes;h&=r.pendingLanes,c|=h,s.lanes=c,no(r,c)}}function Tp(r,s){var c=r.updateQueue,h=r.alternate;if(h!==null&&(h=h.updateQueue,c===h)){var v=null,w=null;if(c=c.firstBaseUpdate,c!==null){do{var O={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};w===null?v=w=O:w=w.next=O,c=c.next}while(c!==null);w===null?v=w=s:w=w.next=s}else v=w=s;c={baseState:h.baseState,firstBaseUpdate:v,lastBaseUpdate:w,shared:h.shared,callbacks:h.callbacks},r.updateQueue=c;return}r=c.lastBaseUpdate,r===null?c.firstBaseUpdate=s:r.next=s,c.lastBaseUpdate=s}var kp=!1;function su(){if(kp){var r=Cl;if(r!==null)throw r}}function au(r,s,c,h){kp=!1;var v=r.updateQueue;Ea=!1;var w=v.firstBaseUpdate,O=v.lastBaseUpdate,U=v.shared.pending;if(U!==null){v.shared.pending=null;var re=U,ye=re.next;re.next=null,O===null?w=ye:O.next=ye,O=re;var Ae=r.alternate;Ae!==null&&(Ae=Ae.updateQueue,U=Ae.lastBaseUpdate,U!==O&&(U===null?Ae.firstBaseUpdate=ye:U.next=ye,Ae.lastBaseUpdate=re))}if(w!==null){var De=v.baseState;O=0,Ae=ye=re=null,U=w;do{var xe=U.lane&-536870913,we=xe!==U.lane;if(we?(Et&xe)===xe:(h&xe)===xe){xe!==0&&xe===Ml&&(kp=!0),Ae!==null&&(Ae=Ae.next={lane:0,tag:U.tag,payload:U.payload,callback:null,next:null});e:{var qe=r,rt=U;xe=s;var Gt=c;switch(rt.tag){case 1:if(qe=rt.payload,typeof qe=="function"){De=qe.call(Gt,De,xe);break e}De=qe;break e;case 3:qe.flags=qe.flags&-65537|128;case 0:if(qe=rt.payload,xe=typeof qe=="function"?qe.call(Gt,De,xe):qe,xe==null)break e;De=_({},De,xe);break e;case 2:Ea=!0}}xe=U.callback,xe!==null&&(r.flags|=64,we&&(r.flags|=8192),we=v.callbacks,we===null?v.callbacks=[xe]:we.push(xe))}else we={lane:xe,tag:U.tag,payload:U.payload,callback:U.callback,next:null},Ae===null?(ye=Ae=we,re=De):Ae=Ae.next=we,O|=xe;if(U=U.next,U===null){if(U=v.shared.pending,U===null)break;we=U,U=we.next,we.next=null,v.lastBaseUpdate=we,v.shared.pending=null}}while(!0);Ae===null&&(re=De),v.baseState=re,v.firstBaseUpdate=ye,v.lastBaseUpdate=Ae,w===null&&(v.shared.lanes=0),Da|=O,r.lanes=O,r.memoizedState=De}}function pv(r,s){if(typeof r!="function")throw Error(i(191,r));r.call(s)}function gv(r,s){var c=r.callbacks;if(c!==null)for(r.callbacks=null,r=0;r<c.length;r++)pv(c[r],s)}var Bl=G(null),nh=G(0);function bv(r,s){r=Fs,q(nh,r),q(Bl,s),Fs=r|s.baseLanes}function Ap(){q(nh,Fs),q(Bl,Bl.current)}function jp(){Fs=nh.current,B(Bl),B(nh)}var Jr=G(null),Ai=null;function Aa(r){var s=r.alternate;q(An,An.current&1),q(Jr,r),Ai===null&&(s===null||Bl.current!==null||s.memoizedState!==null)&&(Ai=r)}function Np(r){q(An,An.current),q(Jr,r),Ai===null&&(Ai=r)}function yv(r){r.tag===22?(q(An,An.current),q(Jr,r),Ai===null&&(Ai=r)):ja()}function ja(){q(An,An.current),q(Jr,Jr.current)}function Qr(r){B(Jr),Ai===r&&(Ai=null),B(An)}var An=G(0);function rh(r){for(var s=r;s!==null;){if(s.tag===13){var c=s.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||L0(c)||B0(c)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Bs=0,ct=null,Ut=null,Cn=null,ih=!1,Pl=!1,Po=!1,sh=0,ou=0,$l=null,tj=0;function _n(){throw Error(i(321))}function Op(r,s){if(s===null)return!1;for(var c=0;c<s.length&&c<r.length;c++)if(!Yn(r[c],s[c]))return!1;return!0}function Dp(r,s,c,h,v,w){return Bs=w,ct=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,J.H=r===null||r.memoizedState===null?t_:qp,Po=!1,w=c(h,v),Po=!1,Pl&&(w=_v(s,c,h,v)),vv(r),w}function vv(r){J.H=uu;var s=Ut!==null&&Ut.next!==null;if(Bs=0,Cn=Ut=ct=null,ih=!1,ou=0,$l=null,s)throw Error(i(300));r===null||Rn||(r=r.dependencies,r!==null&&Kd(r)&&(Rn=!0))}function _v(r,s,c,h){ct=r;var v=0;do{if(Pl&&($l=null),ou=0,Pl=!1,25<=v)throw Error(i(301));if(v+=1,Cn=Ut=null,r.updateQueue!=null){var w=r.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}J.H=n_,w=s(c,h)}while(Pl);return w}function nj(){var r=J.H,s=r.useState()[0];return s=typeof s.then=="function"?lu(s):s,r=r.useState()[0],(Ut!==null?Ut.memoizedState:null)!==r&&(ct.flags|=1024),s}function Mp(){var r=sh!==0;return sh=0,r}function Cp(r,s,c){s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~c}function Rp(r){if(ih){for(r=r.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}ih=!1}Bs=0,Cn=Ut=ct=null,Pl=!1,ou=sh=0,$l=null}function wr(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Cn===null?ct.memoizedState=Cn=r:Cn=Cn.next=r,Cn}function jn(){if(Ut===null){var r=ct.alternate;r=r!==null?r.memoizedState:null}else r=Ut.next;var s=Cn===null?ct.memoizedState:Cn.next;if(s!==null)Cn=s,Ut=r;else{if(r===null)throw ct.alternate===null?Error(i(467)):Error(i(310));Ut=r,r={memoizedState:Ut.memoizedState,baseState:Ut.baseState,baseQueue:Ut.baseQueue,queue:Ut.queue,next:null},Cn===null?ct.memoizedState=Cn=r:Cn=Cn.next=r}return Cn}function ah(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function lu(r){var s=ou;return ou+=1,$l===null&&($l=[]),r=uv($l,r,s),s=ct,(Cn===null?s.memoizedState:Cn.next)===null&&(s=s.alternate,J.H=s===null||s.memoizedState===null?t_:qp),r}function oh(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return lu(r);if(r.$$typeof===N)return er(r)}throw Error(i(438,String(r)))}function Lp(r){var s=null,c=ct.updateQueue;if(c!==null&&(s=c.memoCache),s==null){var h=ct.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(s={data:h.data.map(function(v){return v.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),c===null&&(c=ah(),ct.updateQueue=c),c.memoCache=s,c=s.data[s.index],c===void 0)for(c=s.data[s.index]=Array(r),h=0;h<r;h++)c[h]=oe;return s.index++,c}function Ps(r,s){return typeof s=="function"?s(r):s}function lh(r){var s=jn();return Bp(s,Ut,r)}function Bp(r,s,c){var h=r.queue;if(h===null)throw Error(i(311));h.lastRenderedReducer=c;var v=r.baseQueue,w=h.pending;if(w!==null){if(v!==null){var O=v.next;v.next=w.next,w.next=O}s.baseQueue=v=w,h.pending=null}if(w=r.baseState,v===null)r.memoizedState=w;else{s=v.next;var U=O=null,re=null,ye=s,Ae=!1;do{var De=ye.lane&-536870913;if(De!==ye.lane?(Et&De)===De:(Bs&De)===De){var xe=ye.revertLane;if(xe===0)re!==null&&(re=re.next={lane:0,revertLane:0,gesture:null,action:ye.action,hasEagerState:ye.hasEagerState,eagerState:ye.eagerState,next:null}),De===Ml&&(Ae=!0);else if((Bs&xe)===xe){ye=ye.next,xe===Ml&&(Ae=!0);continue}else De={lane:0,revertLane:ye.revertLane,gesture:null,action:ye.action,hasEagerState:ye.hasEagerState,eagerState:ye.eagerState,next:null},re===null?(U=re=De,O=w):re=re.next=De,ct.lanes|=xe,Da|=xe;De=ye.action,Po&&c(w,De),w=ye.hasEagerState?ye.eagerState:c(w,De)}else xe={lane:De,revertLane:ye.revertLane,gesture:ye.gesture,action:ye.action,hasEagerState:ye.hasEagerState,eagerState:ye.eagerState,next:null},re===null?(U=re=xe,O=w):re=re.next=xe,ct.lanes|=De,Da|=De;ye=ye.next}while(ye!==null&&ye!==s);if(re===null?O=w:re.next=U,!Yn(w,r.memoizedState)&&(Rn=!0,Ae&&(c=Cl,c!==null)))throw c;r.memoizedState=w,r.baseState=O,r.baseQueue=re,h.lastRenderedState=w}return v===null&&(h.lanes=0),[r.memoizedState,h.dispatch]}function Pp(r){var s=jn(),c=s.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=r;var h=c.dispatch,v=c.pending,w=s.memoizedState;if(v!==null){c.pending=null;var O=v=v.next;do w=r(w,O.action),O=O.next;while(O!==v);Yn(w,s.memoizedState)||(Rn=!0),s.memoizedState=w,s.baseQueue===null&&(s.baseState=w),c.lastRenderedState=w}return[w,h]}function xv(r,s,c){var h=ct,v=jn(),w=bt;if(w){if(c===void 0)throw Error(i(407));c=c()}else c=s();var O=!Yn((Ut||v).memoizedState,c);if(O&&(v.memoizedState=c,Rn=!0),v=v.queue,zp(Ev.bind(null,h,v,r),[r]),v.getSnapshot!==s||O||Cn!==null&&Cn.memoizedState.tag&1){if(h.flags|=2048,Il(9,{destroy:void 0},Sv.bind(null,h,v,c,s),null),qt===null)throw Error(i(349));w||(Bs&127)!==0||wv(h,s,c)}return c}function wv(r,s,c){r.flags|=16384,r={getSnapshot:s,value:c},s=ct.updateQueue,s===null?(s=ah(),ct.updateQueue=s,s.stores=[r]):(c=s.stores,c===null?s.stores=[r]:c.push(r))}function Sv(r,s,c,h){s.value=c,s.getSnapshot=h,Tv(s)&&kv(r)}function Ev(r,s,c){return c(function(){Tv(s)&&kv(r)})}function Tv(r){var s=r.getSnapshot;r=r.value;try{var c=s();return!Yn(r,c)}catch{return!0}}function kv(r){var s=Ti(r,2);s!==null&&Ur(s,r,2)}function $p(r){var s=wr();if(typeof r=="function"){var c=r;if(r=c(),Po){bn(!0);try{c()}finally{bn(!1)}}}return s.memoizedState=s.baseState=r,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ps,lastRenderedState:r},s}function Av(r,s,c,h){return r.baseState=c,Bp(r,Ut,typeof h=="function"?h:Ps)}function rj(r,s,c,h,v){if(dh(r))throw Error(i(485));if(r=s.action,r!==null){var w={payload:v,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(O){w.listeners.push(O)}};J.T!==null?c(!0):w.isTransition=!1,h(w),c=s.pending,c===null?(w.next=s.pending=w,jv(s,w)):(w.next=c.next,s.pending=c.next=w)}}function jv(r,s){var c=s.action,h=s.payload,v=r.state;if(s.isTransition){var w=J.T,O={};J.T=O;try{var U=c(v,h),re=J.S;re!==null&&re(O,U),Nv(r,s,U)}catch(ye){Ip(r,s,ye)}finally{w!==null&&O.types!==null&&(w.types=O.types),J.T=w}}else try{w=c(v,h),Nv(r,s,w)}catch(ye){Ip(r,s,ye)}}function Nv(r,s,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(h){Ov(r,s,h)},function(h){return Ip(r,s,h)}):Ov(r,s,c)}function Ov(r,s,c){s.status="fulfilled",s.value=c,Dv(s),r.state=c,s=r.pending,s!==null&&(c=s.next,c===s?r.pending=null:(c=c.next,s.next=c,jv(r,c)))}function Ip(r,s,c){var h=r.pending;if(r.pending=null,h!==null){h=h.next;do s.status="rejected",s.reason=c,Dv(s),s=s.next;while(s!==h)}r.action=null}function Dv(r){r=r.listeners;for(var s=0;s<r.length;s++)(0,r[s])()}function Mv(r,s){return s}function Cv(r,s){if(bt){var c=qt.formState;if(c!==null){e:{var h=ct;if(bt){if(Ot){t:{for(var v=Ot,w=Br;v.nodeType!==8;){if(!w){v=null;break t}if(v=ji(v.nextSibling),v===null){v=null;break t}}w=v.data,v=w==="F!"||w==="F"?v:null}if(v){Ot=ji(v.nextSibling),h=v.data==="F!";break e}}bs(h)}h=!1}h&&(s=c[0])}}return c=wr(),c.memoizedState=c.baseState=s,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mv,lastRenderedState:s},c.queue=h,c=Jv.bind(null,ct,h),h.dispatch=c,h=$p(!1),w=Yp.bind(null,ct,!1,h.queue),h=wr(),v={state:s,dispatch:null,action:r,pending:null},h.queue=v,c=rj.bind(null,ct,v,w,c),v.dispatch=c,h.memoizedState=r,[s,c,!1]}function Rv(r){var s=jn();return Lv(s,Ut,r)}function Lv(r,s,c){if(s=Bp(r,s,Mv)[0],r=lh(Ps)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var h=lu(s)}catch(O){throw O===Rl?Jd:O}else h=s;s=jn();var v=s.queue,w=v.dispatch;return c!==s.memoizedState&&(ct.flags|=2048,Il(9,{destroy:void 0},ij.bind(null,v,c),null)),[h,w,r]}function ij(r,s){r.action=s}function Bv(r){var s=jn(),c=Ut;if(c!==null)return Lv(s,c,r);jn(),s=s.memoizedState,c=jn();var h=c.queue.dispatch;return c.memoizedState=r,[s,h,!1]}function Il(r,s,c,h){return r={tag:r,create:c,deps:h,inst:s,next:null},s=ct.updateQueue,s===null&&(s=ah(),ct.updateQueue=s),c=s.lastEffect,c===null?s.lastEffect=r.next=r:(h=c.next,c.next=r,r.next=h,s.lastEffect=r),r}function Pv(){return jn().memoizedState}function ch(r,s,c,h){var v=wr();ct.flags|=r,v.memoizedState=Il(1|s,{destroy:void 0},c,h===void 0?null:h)}function uh(r,s,c,h){var v=jn();h=h===void 0?null:h;var w=v.memoizedState.inst;Ut!==null&&h!==null&&Op(h,Ut.memoizedState.deps)?v.memoizedState=Il(s,w,c,h):(ct.flags|=r,v.memoizedState=Il(1|s,w,c,h))}function $v(r,s){ch(8390656,8,r,s)}function zp(r,s){uh(2048,8,r,s)}function sj(r){ct.flags|=4;var s=ct.updateQueue;if(s===null)s=ah(),ct.updateQueue=s,s.events=[r];else{var c=s.events;c===null?s.events=[r]:c.push(r)}}function Iv(r){var s=jn().memoizedState;return sj({ref:s,nextImpl:r}),function(){if((Rt&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}function zv(r,s){return uh(4,2,r,s)}function Uv(r,s){return uh(4,4,r,s)}function Hv(r,s){if(typeof s=="function"){r=r();var c=s(r);return function(){typeof c=="function"?c():s(null)}}if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function Gv(r,s,c){c=c!=null?c.concat([r]):null,uh(4,4,Hv.bind(null,s,r),c)}function Up(){}function Fv(r,s){var c=jn();s=s===void 0?null:s;var h=c.memoizedState;return s!==null&&Op(s,h[1])?h[0]:(c.memoizedState=[r,s],r)}function Yv(r,s){var c=jn();s=s===void 0?null:s;var h=c.memoizedState;if(s!==null&&Op(s,h[1]))return h[0];if(h=r(),Po){bn(!0);try{r()}finally{bn(!1)}}return c.memoizedState=[h,s],h}function Hp(r,s,c){return c===void 0||(Bs&1073741824)!==0&&(Et&261930)===0?r.memoizedState=s:(r.memoizedState=c,r=q_(),ct.lanes|=r,Da|=r,c)}function qv(r,s,c,h){return Yn(c,s)?c:Bl.current!==null?(r=Hp(r,c,h),Yn(r,s)||(Rn=!0),r):(Bs&42)===0||(Bs&1073741824)!==0&&(Et&261930)===0?(Rn=!0,r.memoizedState=c):(r=q_(),ct.lanes|=r,Da|=r,s)}function Zv(r,s,c,h,v){var w=le.p;le.p=w!==0&&8>w?w:8;var O=J.T,U={};J.T=U,Yp(r,!1,s,c);try{var re=v(),ye=J.S;if(ye!==null&&ye(U,re),re!==null&&typeof re=="object"&&typeof re.then=="function"){var Ae=ej(re,h);cu(r,s,Ae,ni(r))}else cu(r,s,h,ni(r))}catch(De){cu(r,s,{then:function(){},status:"rejected",reason:De},ni())}finally{le.p=w,O!==null&&U.types!==null&&(O.types=U.types),J.T=O}}function aj(){}function Gp(r,s,c,h){if(r.tag!==5)throw Error(i(476));var v=Vv(r).queue;Zv(r,v,s,te,c===null?aj:function(){return Kv(r),c(h)})}function Vv(r){var s=r.memoizedState;if(s!==null)return s;s={memoizedState:te,baseState:te,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ps,lastRenderedState:te},next:null};var c={};return s.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ps,lastRenderedState:c},next:null},r.memoizedState=s,r=r.alternate,r!==null&&(r.memoizedState=s),s}function Kv(r){var s=Vv(r);s.next===null&&(s=r.alternate.memoizedState),cu(r,s.next.queue,{},ni())}function Fp(){return er(ku)}function Wv(){return jn().memoizedState}function Xv(){return jn().memoizedState}function oj(r){for(var s=r.return;s!==null;){switch(s.tag){case 24:case 3:var c=ni();r=Ta(c);var h=ka(s,r,c);h!==null&&(Ur(h,s,c),iu(h,s,c)),s={cache:vp()},r.payload=s;return}s=s.return}}function lj(r,s,c){var h=ni();c={lane:h,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},dh(r)?Qv(s,c):(c=Vc(r,s,c,h),c!==null&&(Ur(c,r,h),e_(c,s,h)))}function Jv(r,s,c){var h=ni();cu(r,s,c,h)}function cu(r,s,c,h){var v={lane:h,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(dh(r))Qv(s,v);else{var w=r.alternate;if(r.lanes===0&&(w===null||w.lanes===0)&&(w=s.lastRenderedReducer,w!==null))try{var O=s.lastRenderedState,U=w(O,c);if(v.hasEagerState=!0,v.eagerState=U,Yn(U,O))return ps(r,s,v,0),qt===null&&Ao(),!1}catch{}finally{}if(c=Vc(r,s,v,h),c!==null)return Ur(c,r,h),e_(c,s,h),!0}return!1}function Yp(r,s,c,h){if(h={lane:2,revertLane:S0(),gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},dh(r)){if(s)throw Error(i(479))}else s=Vc(r,c,h,2),s!==null&&Ur(s,r,2)}function dh(r){var s=r.alternate;return r===ct||s!==null&&s===ct}function Qv(r,s){Pl=ih=!0;var c=r.pending;c===null?s.next=s:(s.next=c.next,c.next=s),r.pending=s}function e_(r,s,c){if((c&4194048)!==0){var h=s.lanes;h&=r.pendingLanes,c|=h,s.lanes=c,no(r,c)}}var uu={readContext:er,use:oh,useCallback:_n,useContext:_n,useEffect:_n,useImperativeHandle:_n,useLayoutEffect:_n,useInsertionEffect:_n,useMemo:_n,useReducer:_n,useRef:_n,useState:_n,useDebugValue:_n,useDeferredValue:_n,useTransition:_n,useSyncExternalStore:_n,useId:_n,useHostTransitionStatus:_n,useFormState:_n,useActionState:_n,useOptimistic:_n,useMemoCache:_n,useCacheRefresh:_n};uu.useEffectEvent=_n;var t_={readContext:er,use:oh,useCallback:function(r,s){return wr().memoizedState=[r,s===void 0?null:s],r},useContext:er,useEffect:$v,useImperativeHandle:function(r,s,c){c=c!=null?c.concat([r]):null,ch(4194308,4,Hv.bind(null,s,r),c)},useLayoutEffect:function(r,s){return ch(4194308,4,r,s)},useInsertionEffect:function(r,s){ch(4,2,r,s)},useMemo:function(r,s){var c=wr();s=s===void 0?null:s;var h=r();if(Po){bn(!0);try{r()}finally{bn(!1)}}return c.memoizedState=[h,s],h},useReducer:function(r,s,c){var h=wr();if(c!==void 0){var v=c(s);if(Po){bn(!0);try{c(s)}finally{bn(!1)}}}else v=s;return h.memoizedState=h.baseState=v,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:v},h.queue=r,r=r.dispatch=lj.bind(null,ct,r),[h.memoizedState,r]},useRef:function(r){var s=wr();return r={current:r},s.memoizedState=r},useState:function(r){r=$p(r);var s=r.queue,c=Jv.bind(null,ct,s);return s.dispatch=c,[r.memoizedState,c]},useDebugValue:Up,useDeferredValue:function(r,s){var c=wr();return Hp(c,r,s)},useTransition:function(){var r=$p(!1);return r=Zv.bind(null,ct,r.queue,!0,!1),wr().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,s,c){var h=ct,v=wr();if(bt){if(c===void 0)throw Error(i(407));c=c()}else{if(c=s(),qt===null)throw Error(i(349));(Et&127)!==0||wv(h,s,c)}v.memoizedState=c;var w={value:c,getSnapshot:s};return v.queue=w,$v(Ev.bind(null,h,w,r),[r]),h.flags|=2048,Il(9,{destroy:void 0},Sv.bind(null,h,w,c,s),null),c},useId:function(){var r=wr(),s=qt.identifierPrefix;if(bt){var c=Ue,h=Oe;c=(h&~(1<<32-hn(h)-1)).toString(32)+c,s="_"+s+"R_"+c,c=sh++,0<c&&(s+="H"+c.toString(32)),s+="_"}else c=tj++,s="_"+s+"r_"+c.toString(32)+"_";return r.memoizedState=s},useHostTransitionStatus:Fp,useFormState:Cv,useActionState:Cv,useOptimistic:function(r){var s=wr();s.memoizedState=s.baseState=r;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=c,s=Yp.bind(null,ct,!0,c),c.dispatch=s,[r,s]},useMemoCache:Lp,useCacheRefresh:function(){return wr().memoizedState=oj.bind(null,ct)},useEffectEvent:function(r){var s=wr(),c={impl:r};return s.memoizedState=c,function(){if((Rt&2)!==0)throw Error(i(440));return c.impl.apply(void 0,arguments)}}},qp={readContext:er,use:oh,useCallback:Fv,useContext:er,useEffect:zp,useImperativeHandle:Gv,useInsertionEffect:zv,useLayoutEffect:Uv,useMemo:Yv,useReducer:lh,useRef:Pv,useState:function(){return lh(Ps)},useDebugValue:Up,useDeferredValue:function(r,s){var c=jn();return qv(c,Ut.memoizedState,r,s)},useTransition:function(){var r=lh(Ps)[0],s=jn().memoizedState;return[typeof r=="boolean"?r:lu(r),s]},useSyncExternalStore:xv,useId:Wv,useHostTransitionStatus:Fp,useFormState:Rv,useActionState:Rv,useOptimistic:function(r,s){var c=jn();return Av(c,Ut,r,s)},useMemoCache:Lp,useCacheRefresh:Xv};qp.useEffectEvent=Iv;var n_={readContext:er,use:oh,useCallback:Fv,useContext:er,useEffect:zp,useImperativeHandle:Gv,useInsertionEffect:zv,useLayoutEffect:Uv,useMemo:Yv,useReducer:Pp,useRef:Pv,useState:function(){return Pp(Ps)},useDebugValue:Up,useDeferredValue:function(r,s){var c=jn();return Ut===null?Hp(c,r,s):qv(c,Ut.memoizedState,r,s)},useTransition:function(){var r=Pp(Ps)[0],s=jn().memoizedState;return[typeof r=="boolean"?r:lu(r),s]},useSyncExternalStore:xv,useId:Wv,useHostTransitionStatus:Fp,useFormState:Bv,useActionState:Bv,useOptimistic:function(r,s){var c=jn();return Ut!==null?Av(c,Ut,r,s):(c.baseState=r,[r,c.queue.dispatch])},useMemoCache:Lp,useCacheRefresh:Xv};n_.useEffectEvent=Iv;function Zp(r,s,c,h){s=r.memoizedState,c=c(h,s),c=c==null?s:_({},s,c),r.memoizedState=c,r.lanes===0&&(r.updateQueue.baseState=c)}var Vp={enqueueSetState:function(r,s,c){r=r._reactInternals;var h=ni(),v=Ta(h);v.payload=s,c!=null&&(v.callback=c),s=ka(r,v,h),s!==null&&(Ur(s,r,h),iu(s,r,h))},enqueueReplaceState:function(r,s,c){r=r._reactInternals;var h=ni(),v=Ta(h);v.tag=1,v.payload=s,c!=null&&(v.callback=c),s=ka(r,v,h),s!==null&&(Ur(s,r,h),iu(s,r,h))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var c=ni(),h=Ta(c);h.tag=2,s!=null&&(h.callback=s),s=ka(r,h,c),s!==null&&(Ur(s,r,c),iu(s,r,c))}};function r_(r,s,c,h,v,w,O){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(h,w,O):s.prototype&&s.prototype.isPureReactComponent?!ya(c,h)||!ya(v,w):!0}function i_(r,s,c,h){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(c,h),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(c,h),s.state!==r&&Vp.enqueueReplaceState(s,s.state,null)}function $o(r,s){var c=s;if("ref"in s){c={};for(var h in s)h!=="ref"&&(c[h]=s[h])}if(r=r.defaultProps){c===s&&(c=_({},c));for(var v in r)c[v]===void 0&&(c[v]=r[v])}return c}function s_(r){ko(r)}function a_(r){console.error(r)}function o_(r){ko(r)}function hh(r,s){try{var c=r.onUncaughtError;c(s.value,{componentStack:s.stack})}catch(h){setTimeout(function(){throw h})}}function l_(r,s,c){try{var h=r.onCaughtError;h(c.value,{componentStack:c.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function Kp(r,s,c){return c=Ta(c),c.tag=3,c.payload={element:null},c.callback=function(){hh(r,s)},c}function c_(r){return r=Ta(r),r.tag=3,r}function u_(r,s,c,h){var v=c.type.getDerivedStateFromError;if(typeof v=="function"){var w=h.value;r.payload=function(){return v(w)},r.callback=function(){l_(s,c,h)}}var O=c.stateNode;O!==null&&typeof O.componentDidCatch=="function"&&(r.callback=function(){l_(s,c,h),typeof v!="function"&&(Ma===null?Ma=new Set([this]):Ma.add(this));var U=h.stack;this.componentDidCatch(h.value,{componentStack:U!==null?U:""})})}function cj(r,s,c,h,v){if(c.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(s=c.alternate,s!==null&&Dl(s,c,v,!0),c=Jr.current,c!==null){switch(c.tag){case 31:case 13:return Ai===null?Eh():c.alternate===null&&xn===0&&(xn=3),c.flags&=-257,c.flags|=65536,c.lanes=v,h===Qd?c.flags|=16384:(s=c.updateQueue,s===null?c.updateQueue=new Set([h]):s.add(h),_0(r,h,v)),!1;case 22:return c.flags|=65536,h===Qd?c.flags|=16384:(s=c.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([h])},c.updateQueue=s):(c=s.retryQueue,c===null?s.retryQueue=new Set([h]):c.add(h)),_0(r,h,v)),!1}throw Error(i(435,c.tag))}return _0(r,h,v),Eh(),!1}if(bt)return s=Jr.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=v,h!==Ol&&(r=Error(i(422),{cause:h}),Oo(d(r,c)))):(h!==Ol&&(s=Error(i(423),{cause:h}),Oo(d(s,c))),r=r.current.alternate,r.flags|=65536,v&=-v,r.lanes|=v,h=d(h,c),v=Kp(r.stateNode,h,v),Tp(r,v),xn!==4&&(xn=2)),!1;var w=Error(i(520),{cause:h});if(w=d(w,c),yu===null?yu=[w]:yu.push(w),xn!==4&&(xn=2),s===null)return!0;h=d(h,c),c=s;do{switch(c.tag){case 3:return c.flags|=65536,r=v&-v,c.lanes|=r,r=Kp(c.stateNode,h,r),Tp(c,r),!1;case 1:if(s=c.type,w=c.stateNode,(c.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Ma===null||!Ma.has(w))))return c.flags|=65536,v&=-v,c.lanes|=v,v=c_(v),u_(v,r,c,h),Tp(c,v),!1}c=c.return}while(c!==null);return!1}var Wp=Error(i(461)),Rn=!1;function tr(r,s,c,h){s.child=r===null?mv(s,null,c,h):Bo(s,r.child,c,h)}function d_(r,s,c,h,v){c=c.render;var w=s.ref;if("ref"in h){var O={};for(var U in h)U!=="ref"&&(O[U]=h[U])}else O=h;return Mo(s),h=Dp(r,s,c,O,w,v),U=Mp(),r!==null&&!Rn?(Cp(r,s,v),$s(r,s,v)):(bt&&U&&Un(s),s.flags|=1,tr(r,s,h,v),s.child)}function h_(r,s,c,h,v){if(r===null){var w=c.type;return typeof w=="function"&&!jl(w)&&w.defaultProps===void 0&&c.compare===null?(s.tag=15,s.type=w,f_(r,s,w,h,v)):(r=No(c.type,null,h,s,s.mode,v),r.ref=s.ref,r.return=s,s.child=r)}if(w=r.child,!i0(r,v)){var O=w.memoizedProps;if(c=c.compare,c=c!==null?c:ya,c(O,h)&&r.ref===s.ref)return $s(r,s,v)}return s.flags|=1,r=ki(w,h),r.ref=s.ref,r.return=s,s.child=r}function f_(r,s,c,h,v){if(r!==null){var w=r.memoizedProps;if(ya(w,h)&&r.ref===s.ref)if(Rn=!1,s.pendingProps=h=w,i0(r,v))(r.flags&131072)!==0&&(Rn=!0);else return s.lanes=r.lanes,$s(r,s,v)}return Xp(r,s,c,h,v)}function m_(r,s,c,h){var v=h.children,w=r!==null?r.memoizedState:null;if(r===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.mode==="hidden"){if((s.flags&128)!==0){if(w=w!==null?w.baseLanes|c:c,r!==null){for(h=s.child=r.child,v=0;h!==null;)v=v|h.lanes|h.childLanes,h=h.sibling;h=v&~w}else h=0,s.child=null;return p_(r,s,w,c,h)}if((c&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},r!==null&&Xd(s,w!==null?w.cachePool:null),w!==null?bv(s,w):Ap(),yv(s);else return h=s.lanes=536870912,p_(r,s,w!==null?w.baseLanes|c:c,c,h)}else w!==null?(Xd(s,w.cachePool),bv(s,w),ja(),s.memoizedState=null):(r!==null&&Xd(s,null),Ap(),ja());return tr(r,s,v,c),s.child}function du(r,s){return r!==null&&r.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function p_(r,s,c,h,v){var w=xp();return w=w===null?null:{parent:Mn._currentValue,pool:w},s.memoizedState={baseLanes:c,cachePool:w},r!==null&&Xd(s,null),Ap(),yv(s),r!==null&&Dl(r,s,h,!0),s.childLanes=v,null}function fh(r,s){return s=ph({mode:s.mode,children:s.children},r.mode),s.ref=r.ref,r.child=s,s.return=r,s}function g_(r,s,c){return Bo(s,r.child,null,c),r=fh(s,s.pendingProps),r.flags|=2,Qr(s),s.memoizedState=null,r}function uj(r,s,c){var h=s.pendingProps,v=(s.flags&128)!==0;if(s.flags&=-129,r===null){if(bt){if(h.mode==="hidden")return r=fh(s,h),s.lanes=536870912,du(null,r);if(Np(s),(r=Ot)?(r=jx(r,Br),r=r!==null&&r.data==="&"?r:null,r!==null&&(s.memoizedState={dehydrated:r,treeContext:_e!==null?{id:Oe,overflow:Ue}:null,retryLane:536870912,hydrationErrors:null},c=Wc(r),c.return=s,s.child=c,Nt=s,Ot=null)):r=null,r===null)throw bs(s);return s.lanes=536870912,null}return fh(s,h)}var w=r.memoizedState;if(w!==null){var O=w.dehydrated;if(Np(s),v)if(s.flags&256)s.flags&=-257,s=g_(r,s,c);else if(s.memoizedState!==null)s.child=r.child,s.flags|=128,s=null;else throw Error(i(558));else if(Rn||Dl(r,s,c,!1),v=(c&r.childLanes)!==0,Rn||v){if(h=qt,h!==null&&(O=ro(h,c),O!==0&&O!==w.retryLane))throw w.retryLane=O,Ti(r,O),Ur(h,r,O),Wp;Eh(),s=g_(r,s,c)}else r=w.treeContext,Ot=ji(O.nextSibling),Nt=s,bt=!0,gs=null,Br=!1,r!==null&&xr(s,r),s=fh(s,h),s.flags|=4096;return s}return r=ki(r.child,{mode:h.mode,children:h.children}),r.ref=s.ref,s.child=r,r.return=s,r}function mh(r,s){var c=s.ref;if(c===null)r!==null&&r.ref!==null&&(s.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(i(284));(r===null||r.ref!==c)&&(s.flags|=4194816)}}function Xp(r,s,c,h,v){return Mo(s),c=Dp(r,s,c,h,void 0,v),h=Mp(),r!==null&&!Rn?(Cp(r,s,v),$s(r,s,v)):(bt&&h&&Un(s),s.flags|=1,tr(r,s,c,v),s.child)}function b_(r,s,c,h,v,w){return Mo(s),s.updateQueue=null,c=_v(s,h,c,v),vv(r),h=Mp(),r!==null&&!Rn?(Cp(r,s,w),$s(r,s,w)):(bt&&h&&Un(s),s.flags|=1,tr(r,s,c,w),s.child)}function y_(r,s,c,h,v){if(Mo(s),s.stateNode===null){var w=Ms,O=c.contextType;typeof O=="object"&&O!==null&&(w=er(O)),w=new c(h,w),s.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=Vp,s.stateNode=w,w._reactInternals=s,w=s.stateNode,w.props=h,w.state=s.memoizedState,w.refs={},Sp(s),O=c.contextType,w.context=typeof O=="object"&&O!==null?er(O):Ms,w.state=s.memoizedState,O=c.getDerivedStateFromProps,typeof O=="function"&&(Zp(s,c,O,h),w.state=s.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(O=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),O!==w.state&&Vp.enqueueReplaceState(w,w.state,null),au(s,h,w,v),su(),w.state=s.memoizedState),typeof w.componentDidMount=="function"&&(s.flags|=4194308),h=!0}else if(r===null){w=s.stateNode;var U=s.memoizedProps,re=$o(c,U);w.props=re;var ye=w.context,Ae=c.contextType;O=Ms,typeof Ae=="object"&&Ae!==null&&(O=er(Ae));var De=c.getDerivedStateFromProps;Ae=typeof De=="function"||typeof w.getSnapshotBeforeUpdate=="function",U=s.pendingProps!==U,Ae||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(U||ye!==O)&&i_(s,w,h,O),Ea=!1;var xe=s.memoizedState;w.state=xe,au(s,h,w,v),su(),ye=s.memoizedState,U||xe!==ye||Ea?(typeof De=="function"&&(Zp(s,c,De,h),ye=s.memoizedState),(re=Ea||r_(s,c,re,h,xe,ye,O))?(Ae||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(s.flags|=4194308)):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=h,s.memoizedState=ye),w.props=h,w.state=ye,w.context=O,h=re):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),h=!1)}else{w=s.stateNode,Ep(r,s),O=s.memoizedProps,Ae=$o(c,O),w.props=Ae,De=s.pendingProps,xe=w.context,ye=c.contextType,re=Ms,typeof ye=="object"&&ye!==null&&(re=er(ye)),U=c.getDerivedStateFromProps,(ye=typeof U=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(O!==De||xe!==re)&&i_(s,w,h,re),Ea=!1,xe=s.memoizedState,w.state=xe,au(s,h,w,v),su();var we=s.memoizedState;O!==De||xe!==we||Ea||r!==null&&r.dependencies!==null&&Kd(r.dependencies)?(typeof U=="function"&&(Zp(s,c,U,h),we=s.memoizedState),(Ae=Ea||r_(s,c,Ae,h,xe,we,re)||r!==null&&r.dependencies!==null&&Kd(r.dependencies))?(ye||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(h,we,re),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(h,we,re)),typeof w.componentDidUpdate=="function"&&(s.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof w.componentDidUpdate!="function"||O===r.memoizedProps&&xe===r.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||O===r.memoizedProps&&xe===r.memoizedState||(s.flags|=1024),s.memoizedProps=h,s.memoizedState=we),w.props=h,w.state=we,w.context=re,h=Ae):(typeof w.componentDidUpdate!="function"||O===r.memoizedProps&&xe===r.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||O===r.memoizedProps&&xe===r.memoizedState||(s.flags|=1024),h=!1)}return w=h,mh(r,s),h=(s.flags&128)!==0,w||h?(w=s.stateNode,c=h&&typeof c.getDerivedStateFromError!="function"?null:w.render(),s.flags|=1,r!==null&&h?(s.child=Bo(s,r.child,null,v),s.child=Bo(s,null,c,v)):tr(r,s,c,v),s.memoizedState=w.state,r=s.child):r=$s(r,s,v),r}function v_(r,s,c,h){return Rs(),s.flags|=256,tr(r,s,c,h),s.child}var Jp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Qp(r){return{baseLanes:r,cachePool:lv()}}function e0(r,s,c){return r=r!==null?r.childLanes&~c:0,s&&(r|=ti),r}function __(r,s,c){var h=s.pendingProps,v=!1,w=(s.flags&128)!==0,O;if((O=w)||(O=r!==null&&r.memoizedState===null?!1:(An.current&2)!==0),O&&(v=!0,s.flags&=-129),O=(s.flags&32)!==0,s.flags&=-33,r===null){if(bt){if(v?Aa(s):ja(),(r=Ot)?(r=jx(r,Br),r=r!==null&&r.data!=="&"?r:null,r!==null&&(s.memoizedState={dehydrated:r,treeContext:_e!==null?{id:Oe,overflow:Ue}:null,retryLane:536870912,hydrationErrors:null},c=Wc(r),c.return=s,s.child=c,Nt=s,Ot=null)):r=null,r===null)throw bs(s);return B0(r)?s.lanes=32:s.lanes=536870912,null}var U=h.children;return h=h.fallback,v?(ja(),v=s.mode,U=ph({mode:"hidden",children:U},v),h=Cs(h,v,c,null),U.return=s,h.return=s,U.sibling=h,s.child=U,h=s.child,h.memoizedState=Qp(c),h.childLanes=e0(r,O,c),s.memoizedState=Jp,du(null,h)):(Aa(s),t0(s,U))}var re=r.memoizedState;if(re!==null&&(U=re.dehydrated,U!==null)){if(w)s.flags&256?(Aa(s),s.flags&=-257,s=n0(r,s,c)):s.memoizedState!==null?(ja(),s.child=r.child,s.flags|=128,s=null):(ja(),U=h.fallback,v=s.mode,h=ph({mode:"visible",children:h.children},v),U=Cs(U,v,c,null),U.flags|=2,h.return=s,U.return=s,h.sibling=U,s.child=h,Bo(s,r.child,null,c),h=s.child,h.memoizedState=Qp(c),h.childLanes=e0(r,O,c),s.memoizedState=Jp,s=du(null,h));else if(Aa(s),B0(U)){if(O=U.nextSibling&&U.nextSibling.dataset,O)var ye=O.dgst;O=ye,h=Error(i(419)),h.stack="",h.digest=O,Oo({value:h,source:null,stack:null}),s=n0(r,s,c)}else if(Rn||Dl(r,s,c,!1),O=(c&r.childLanes)!==0,Rn||O){if(O=qt,O!==null&&(h=ro(O,c),h!==0&&h!==re.retryLane))throw re.retryLane=h,Ti(r,h),Ur(O,r,h),Wp;L0(U)||Eh(),s=n0(r,s,c)}else L0(U)?(s.flags|=192,s.child=r.child,s=null):(r=re.treeContext,Ot=ji(U.nextSibling),Nt=s,bt=!0,gs=null,Br=!1,r!==null&&xr(s,r),s=t0(s,h.children),s.flags|=4096);return s}return v?(ja(),U=h.fallback,v=s.mode,re=r.child,ye=re.sibling,h=ki(re,{mode:"hidden",children:h.children}),h.subtreeFlags=re.subtreeFlags&65011712,ye!==null?U=ki(ye,U):(U=Cs(U,v,c,null),U.flags|=2),U.return=s,h.return=s,h.sibling=U,s.child=h,du(null,h),h=s.child,U=r.child.memoizedState,U===null?U=Qp(c):(v=U.cachePool,v!==null?(re=Mn._currentValue,v=v.parent!==re?{parent:re,pool:re}:v):v=lv(),U={baseLanes:U.baseLanes|c,cachePool:v}),h.memoizedState=U,h.childLanes=e0(r,O,c),s.memoizedState=Jp,du(r.child,h)):(Aa(s),c=r.child,r=c.sibling,c=ki(c,{mode:"visible",children:h.children}),c.return=s,c.sibling=null,r!==null&&(O=s.deletions,O===null?(s.deletions=[r],s.flags|=16):O.push(r)),s.child=c,s.memoizedState=null,c)}function t0(r,s){return s=ph({mode:"visible",children:s},r.mode),s.return=r,r.child=s}function ph(r,s){return r=hr(22,r,null,s),r.lanes=0,r}function n0(r,s,c){return Bo(s,r.child,null,c),r=t0(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function x_(r,s,c){r.lanes|=s;var h=r.alternate;h!==null&&(h.lanes|=s),bp(r.return,s,c)}function r0(r,s,c,h,v,w){var O=r.memoizedState;O===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:h,tail:c,tailMode:v,treeForkCount:w}:(O.isBackwards=s,O.rendering=null,O.renderingStartTime=0,O.last=h,O.tail=c,O.tailMode=v,O.treeForkCount=w)}function w_(r,s,c){var h=s.pendingProps,v=h.revealOrder,w=h.tail;h=h.children;var O=An.current,U=(O&2)!==0;if(U?(O=O&1|2,s.flags|=128):O&=1,q(An,O),tr(r,s,h,c),h=bt?I:0,!U&&r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&x_(r,c,s);else if(r.tag===19)x_(r,c,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(v){case"forwards":for(c=s.child,v=null;c!==null;)r=c.alternate,r!==null&&rh(r)===null&&(v=c),c=c.sibling;c=v,c===null?(v=s.child,s.child=null):(v=c.sibling,c.sibling=null),r0(s,!1,v,c,w,h);break;case"backwards":case"unstable_legacy-backwards":for(c=null,v=s.child,s.child=null;v!==null;){if(r=v.alternate,r!==null&&rh(r)===null){s.child=v;break}r=v.sibling,v.sibling=c,c=v,v=r}r0(s,!0,c,null,w,h);break;case"together":r0(s,!1,null,null,void 0,h);break;default:s.memoizedState=null}return s.child}function $s(r,s,c){if(r!==null&&(s.dependencies=r.dependencies),Da|=s.lanes,(c&s.childLanes)===0)if(r!==null){if(Dl(r,s,c,!1),(c&s.childLanes)===0)return null}else return null;if(r!==null&&s.child!==r.child)throw Error(i(153));if(s.child!==null){for(r=s.child,c=ki(r,r.pendingProps),s.child=c,c.return=s;r.sibling!==null;)r=r.sibling,c=c.sibling=ki(r,r.pendingProps),c.return=s;c.sibling=null}return s.child}function i0(r,s){return(r.lanes&s)!==0?!0:(r=r.dependencies,!!(r!==null&&Kd(r)))}function dj(r,s,c){switch(s.tag){case 3:he(s,s.stateNode.containerInfo),Sa(s,Mn,r.memoizedState.cache),Rs();break;case 27:case 5:ve(s);break;case 4:he(s,s.stateNode.containerInfo);break;case 10:Sa(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Np(s),null;break;case 13:var h=s.memoizedState;if(h!==null)return h.dehydrated!==null?(Aa(s),s.flags|=128,null):(c&s.child.childLanes)!==0?__(r,s,c):(Aa(s),r=$s(r,s,c),r!==null?r.sibling:null);Aa(s);break;case 19:var v=(r.flags&128)!==0;if(h=(c&s.childLanes)!==0,h||(Dl(r,s,c,!1),h=(c&s.childLanes)!==0),v){if(h)return w_(r,s,c);s.flags|=128}if(v=s.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),q(An,An.current),h)break;return null;case 22:return s.lanes=0,m_(r,s,c,s.pendingProps);case 24:Sa(s,Mn,r.memoizedState.cache)}return $s(r,s,c)}function S_(r,s,c){if(r!==null)if(r.memoizedProps!==s.pendingProps)Rn=!0;else{if(!i0(r,c)&&(s.flags&128)===0)return Rn=!1,dj(r,s,c);Rn=(r.flags&131072)!==0}else Rn=!1,bt&&(s.flags&1048576)!==0&&ht(s,I,s.index);switch(s.lanes=0,s.tag){case 16:e:{var h=s.pendingProps;if(r=Ro(s.elementType),s.type=r,typeof r=="function")jl(r)?(h=$o(r,h),s.tag=1,s=y_(null,s,r,h,c)):(s.tag=0,s=Xp(null,s,r,h,c));else{if(r!=null){var v=r.$$typeof;if(v===M){s.tag=11,s=d_(null,s,r,h,c);break e}else if(v===z){s.tag=14,s=h_(null,s,r,h,c);break e}}throw s=ie(r)||r,Error(i(306,s,""))}}return s;case 0:return Xp(r,s,s.type,s.pendingProps,c);case 1:return h=s.type,v=$o(h,s.pendingProps),y_(r,s,h,v,c);case 3:e:{if(he(s,s.stateNode.containerInfo),r===null)throw Error(i(387));h=s.pendingProps;var w=s.memoizedState;v=w.element,Ep(r,s),au(s,h,null,c);var O=s.memoizedState;if(h=O.cache,Sa(s,Mn,h),h!==w.cache&&yp(s,[Mn],c,!0),su(),h=O.element,w.isDehydrated)if(w={element:h,isDehydrated:!1,cache:O.cache},s.updateQueue.baseState=w,s.memoizedState=w,s.flags&256){s=v_(r,s,h,c);break e}else if(h!==v){v=d(Error(i(424)),s),Oo(v),s=v_(r,s,h,c);break e}else{switch(r=s.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(Ot=ji(r.firstChild),Nt=s,bt=!0,gs=null,Br=!0,c=mv(s,null,h,c),s.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(Rs(),h===v){s=$s(r,s,c);break e}tr(r,s,h,c)}s=s.child}return s;case 26:return mh(r,s),r===null?(c=Rx(s.type,null,s.pendingProps,null))?s.memoizedState=c:bt||(c=s.type,r=s.pendingProps,h=Dh(X.current).createElement(c),h[sn]=s,h[kn]=r,nr(h,c,r),wt(h),s.stateNode=h):s.memoizedState=Rx(s.type,r.memoizedProps,s.pendingProps,r.memoizedState),null;case 27:return ve(s),r===null&&bt&&(h=s.stateNode=Dx(s.type,s.pendingProps,X.current),Nt=s,Br=!0,v=Ot,Ba(s.type)?(P0=v,Ot=ji(h.firstChild)):Ot=v),tr(r,s,s.pendingProps.children,c),mh(r,s),r===null&&(s.flags|=4194304),s.child;case 5:return r===null&&bt&&((v=h=Ot)&&(h=Uj(h,s.type,s.pendingProps,Br),h!==null?(s.stateNode=h,Nt=s,Ot=ji(h.firstChild),Br=!1,v=!0):v=!1),v||bs(s)),ve(s),v=s.type,w=s.pendingProps,O=r!==null?r.memoizedProps:null,h=w.children,M0(v,w)?h=null:O!==null&&M0(v,O)&&(s.flags|=32),s.memoizedState!==null&&(v=Dp(r,s,nj,null,null,c),ku._currentValue=v),mh(r,s),tr(r,s,h,c),s.child;case 6:return r===null&&bt&&((r=c=Ot)&&(c=Hj(c,s.pendingProps,Br),c!==null?(s.stateNode=c,Nt=s,Ot=null,r=!0):r=!1),r||bs(s)),null;case 13:return __(r,s,c);case 4:return he(s,s.stateNode.containerInfo),h=s.pendingProps,r===null?s.child=Bo(s,null,h,c):tr(r,s,h,c),s.child;case 11:return d_(r,s,s.type,s.pendingProps,c);case 7:return tr(r,s,s.pendingProps,c),s.child;case 8:return tr(r,s,s.pendingProps.children,c),s.child;case 12:return tr(r,s,s.pendingProps.children,c),s.child;case 10:return h=s.pendingProps,Sa(s,s.type,h.value),tr(r,s,h.children,c),s.child;case 9:return v=s.type._context,h=s.pendingProps.children,Mo(s),v=er(v),h=h(v),s.flags|=1,tr(r,s,h,c),s.child;case 14:return h_(r,s,s.type,s.pendingProps,c);case 15:return f_(r,s,s.type,s.pendingProps,c);case 19:return w_(r,s,c);case 31:return uj(r,s,c);case 22:return m_(r,s,c,s.pendingProps);case 24:return Mo(s),h=er(Mn),r===null?(v=xp(),v===null&&(v=qt,w=vp(),v.pooledCache=w,w.refCount++,w!==null&&(v.pooledCacheLanes|=c),v=w),s.memoizedState={parent:h,cache:v},Sp(s),Sa(s,Mn,v)):((r.lanes&c)!==0&&(Ep(r,s),au(s,null,null,c),su()),v=r.memoizedState,w=s.memoizedState,v.parent!==h?(v={parent:h,cache:h},s.memoizedState=v,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=v),Sa(s,Mn,h)):(h=w.cache,Sa(s,Mn,h),h!==v.cache&&yp(s,[Mn],c,!0))),tr(r,s,s.pendingProps.children,c),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function Is(r){r.flags|=4}function s0(r,s,c,h,v){if((s=(r.mode&32)!==0)&&(s=!1),s){if(r.flags|=16777216,(v&335544128)===v)if(r.stateNode.complete)r.flags|=8192;else if(W_())r.flags|=8192;else throw Lo=Qd,wp}else r.flags&=-16777217}function E_(r,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!Ix(s))if(W_())r.flags|=8192;else throw Lo=Qd,wp}function gh(r,s){s!==null&&(r.flags|=4),r.flags&16384&&(s=r.tag!==22?Qa():536870912,r.lanes|=s,Gl|=s)}function hu(r,s){if(!bt)switch(r.tailMode){case"hidden":s=r.tail;for(var c=null;s!==null;)s.alternate!==null&&(c=s),s=s.sibling;c===null?r.tail=null:c.sibling=null;break;case"collapsed":c=r.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:h.sibling=null}}function tn(r){var s=r.alternate!==null&&r.alternate.child===r.child,c=0,h=0;if(s)for(var v=r.child;v!==null;)c|=v.lanes|v.childLanes,h|=v.subtreeFlags&65011712,h|=v.flags&65011712,v.return=r,v=v.sibling;else for(v=r.child;v!==null;)c|=v.lanes|v.childLanes,h|=v.subtreeFlags,h|=v.flags,v.return=r,v=v.sibling;return r.subtreeFlags|=h,r.childLanes=c,s}function hj(r,s,c){var h=s.pendingProps;switch(vn(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tn(s),null;case 1:return tn(s),null;case 3:return c=s.stateNode,h=null,r!==null&&(h=r.memoizedState.cache),s.memoizedState.cache!==h&&(s.flags|=2048),Ls(Mn),se(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(r===null||r.child===null)&&(Zi(s)?Is(s):r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Qc())),tn(s),null;case 26:var v=s.type,w=s.memoizedState;return r===null?(Is(s),w!==null?(tn(s),E_(s,w)):(tn(s),s0(s,v,null,h,c))):w?w!==r.memoizedState?(Is(s),tn(s),E_(s,w)):(tn(s),s.flags&=-16777217):(r=r.memoizedProps,r!==h&&Is(s),tn(s),s0(s,v,r,h,c)),null;case 27:if(ke(s),c=X.current,v=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==h&&Is(s);else{if(!h){if(s.stateNode===null)throw Error(i(166));return tn(s),null}r=V.current,Zi(s)?Jc(s):(r=Dx(v,h,c),s.stateNode=r,Is(s))}return tn(s),null;case 5:if(ke(s),v=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==h&&Is(s);else{if(!h){if(s.stateNode===null)throw Error(i(166));return tn(s),null}if(w=V.current,Zi(s))Jc(s);else{var O=Dh(X.current);switch(w){case 1:w=O.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:w=O.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":w=O.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":w=O.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":w=O.createElement("div"),w.innerHTML="<script><\/script>",w=w.removeChild(w.firstChild);break;case"select":w=typeof h.is=="string"?O.createElement("select",{is:h.is}):O.createElement("select"),h.multiple?w.multiple=!0:h.size&&(w.size=h.size);break;default:w=typeof h.is=="string"?O.createElement(v,{is:h.is}):O.createElement(v)}}w[sn]=s,w[kn]=h;e:for(O=s.child;O!==null;){if(O.tag===5||O.tag===6)w.appendChild(O.stateNode);else if(O.tag!==4&&O.tag!==27&&O.child!==null){O.child.return=O,O=O.child;continue}if(O===s)break e;for(;O.sibling===null;){if(O.return===null||O.return===s)break e;O=O.return}O.sibling.return=O.return,O=O.sibling}s.stateNode=w;e:switch(nr(w,v,h),v){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}h&&Is(s)}}return tn(s),s0(s,s.type,r===null?null:r.memoizedProps,s.pendingProps,c),null;case 6:if(r&&s.stateNode!=null)r.memoizedProps!==h&&Is(s);else{if(typeof h!="string"&&s.stateNode===null)throw Error(i(166));if(r=X.current,Zi(s)){if(r=s.stateNode,c=s.memoizedProps,h=null,v=Nt,v!==null)switch(v.tag){case 27:case 5:h=v.memoizedProps}r[sn]=s,r=!!(r.nodeValue===c||h!==null&&h.suppressHydrationWarning===!0||_x(r.nodeValue,c)),r||bs(s,!0)}else r=Dh(r).createTextNode(h),r[sn]=s,s.stateNode=r}return tn(s),null;case 31:if(c=s.memoizedState,r===null||r.memoizedState!==null){if(h=Zi(s),c!==null){if(r===null){if(!h)throw Error(i(318));if(r=s.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(557));r[sn]=s}else Rs(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;tn(s),r=!1}else c=Qc(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=c),r=!0;if(!r)return s.flags&256?(Qr(s),s):(Qr(s),null);if((s.flags&128)!==0)throw Error(i(558))}return tn(s),null;case 13:if(h=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(v=Zi(s),h!==null&&h.dehydrated!==null){if(r===null){if(!v)throw Error(i(318));if(v=s.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(i(317));v[sn]=s}else Rs(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;tn(s),v=!1}else v=Qc(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=v),v=!0;if(!v)return s.flags&256?(Qr(s),s):(Qr(s),null)}return Qr(s),(s.flags&128)!==0?(s.lanes=c,s):(c=h!==null,r=r!==null&&r.memoizedState!==null,c&&(h=s.child,v=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(v=h.alternate.memoizedState.cachePool.pool),w=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(w=h.memoizedState.cachePool.pool),w!==v&&(h.flags|=2048)),c!==r&&c&&(s.child.flags|=8192),gh(s,s.updateQueue),tn(s),null);case 4:return se(),r===null&&A0(s.stateNode.containerInfo),tn(s),null;case 10:return Ls(s.type),tn(s),null;case 19:if(B(An),h=s.memoizedState,h===null)return tn(s),null;if(v=(s.flags&128)!==0,w=h.rendering,w===null)if(v)hu(h,!1);else{if(xn!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(w=rh(r),w!==null){for(s.flags|=128,hu(h,!1),r=w.updateQueue,s.updateQueue=r,gh(s,r),s.subtreeFlags=0,r=c,c=s.child;c!==null;)Kc(c,r),c=c.sibling;return q(An,An.current&1|2),bt&&Xe(s,h.treeForkCount),s.child}r=r.sibling}h.tail!==null&&He()>xh&&(s.flags|=128,v=!0,hu(h,!1),s.lanes=4194304)}else{if(!v)if(r=rh(w),r!==null){if(s.flags|=128,v=!0,r=r.updateQueue,s.updateQueue=r,gh(s,r),hu(h,!0),h.tail===null&&h.tailMode==="hidden"&&!w.alternate&&!bt)return tn(s),null}else 2*He()-h.renderingStartTime>xh&&c!==536870912&&(s.flags|=128,v=!0,hu(h,!1),s.lanes=4194304);h.isBackwards?(w.sibling=s.child,s.child=w):(r=h.last,r!==null?r.sibling=w:s.child=w,h.last=w)}return h.tail!==null?(r=h.tail,h.rendering=r,h.tail=r.sibling,h.renderingStartTime=He(),r.sibling=null,c=An.current,q(An,v?c&1|2:c&1),bt&&Xe(s,h.treeForkCount),r):(tn(s),null);case 22:case 23:return Qr(s),jp(),h=s.memoizedState!==null,r!==null?r.memoizedState!==null!==h&&(s.flags|=8192):h&&(s.flags|=8192),h?(c&536870912)!==0&&(s.flags&128)===0&&(tn(s),s.subtreeFlags&6&&(s.flags|=8192)):tn(s),c=s.updateQueue,c!==null&&gh(s,c.retryQueue),c=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),h=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(h=s.memoizedState.cachePool.pool),h!==c&&(s.flags|=2048),r!==null&&B(Co),null;case 24:return c=null,r!==null&&(c=r.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),Ls(Mn),tn(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function fj(r,s){switch(vn(s),s.tag){case 1:return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return Ls(Mn),se(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 26:case 27:case 5:return ke(s),null;case 31:if(s.memoizedState!==null){if(Qr(s),s.alternate===null)throw Error(i(340));Rs()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 13:if(Qr(s),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(i(340));Rs()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return B(An),null;case 4:return se(),null;case 10:return Ls(s.type),null;case 22:case 23:return Qr(s),jp(),r!==null&&B(Co),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 24:return Ls(Mn),null;case 25:return null;default:return null}}function T_(r,s){switch(vn(s),s.tag){case 3:Ls(Mn),se();break;case 26:case 27:case 5:ke(s);break;case 4:se();break;case 31:s.memoizedState!==null&&Qr(s);break;case 13:Qr(s);break;case 19:B(An);break;case 10:Ls(s.type);break;case 22:case 23:Qr(s),jp(),r!==null&&B(Co);break;case 24:Ls(Mn)}}function fu(r,s){try{var c=s.updateQueue,h=c!==null?c.lastEffect:null;if(h!==null){var v=h.next;c=v;do{if((c.tag&r)===r){h=void 0;var w=c.create,O=c.inst;h=w(),O.destroy=h}c=c.next}while(c!==v)}}catch(U){It(s,s.return,U)}}function Na(r,s,c){try{var h=s.updateQueue,v=h!==null?h.lastEffect:null;if(v!==null){var w=v.next;h=w;do{if((h.tag&r)===r){var O=h.inst,U=O.destroy;if(U!==void 0){O.destroy=void 0,v=s;var re=c,ye=U;try{ye()}catch(Ae){It(v,re,Ae)}}}h=h.next}while(h!==w)}}catch(Ae){It(s,s.return,Ae)}}function k_(r){var s=r.updateQueue;if(s!==null){var c=r.stateNode;try{gv(s,c)}catch(h){It(r,r.return,h)}}}function A_(r,s,c){c.props=$o(r.type,r.memoizedProps),c.state=r.memoizedState;try{c.componentWillUnmount()}catch(h){It(r,s,h)}}function mu(r,s){try{var c=r.ref;if(c!==null){switch(r.tag){case 26:case 27:case 5:var h=r.stateNode;break;case 30:h=r.stateNode;break;default:h=r.stateNode}typeof c=="function"?r.refCleanup=c(h):c.current=h}}catch(v){It(r,s,v)}}function vs(r,s){var c=r.ref,h=r.refCleanup;if(c!==null)if(typeof h=="function")try{h()}catch(v){It(r,s,v)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(v){It(r,s,v)}else c.current=null}function j_(r){var s=r.type,c=r.memoizedProps,h=r.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":c.autoFocus&&h.focus();break e;case"img":c.src?h.src=c.src:c.srcSet&&(h.srcset=c.srcSet)}}catch(v){It(r,r.return,v)}}function a0(r,s,c){try{var h=r.stateNode;Lj(h,r.type,c,s),h[kn]=s}catch(v){It(r,r.return,v)}}function N_(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&Ba(r.type)||r.tag===4}function o0(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||N_(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&Ba(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function l0(r,s,c){var h=r.tag;if(h===5||h===6)r=r.stateNode,s?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(r,s):(s=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,s.appendChild(r),c=c._reactRootContainer,c!=null||s.onclick!==null||(s.onclick=Mr));else if(h!==4&&(h===27&&Ba(r.type)&&(c=r.stateNode,s=null),r=r.child,r!==null))for(l0(r,s,c),r=r.sibling;r!==null;)l0(r,s,c),r=r.sibling}function bh(r,s,c){var h=r.tag;if(h===5||h===6)r=r.stateNode,s?c.insertBefore(r,s):c.appendChild(r);else if(h!==4&&(h===27&&Ba(r.type)&&(c=r.stateNode),r=r.child,r!==null))for(bh(r,s,c),r=r.sibling;r!==null;)bh(r,s,c),r=r.sibling}function O_(r){var s=r.stateNode,c=r.memoizedProps;try{for(var h=r.type,v=s.attributes;v.length;)s.removeAttributeNode(v[0]);nr(s,h,c),s[sn]=r,s[kn]=c}catch(w){It(r,r.return,w)}}var zs=!1,Ln=!1,c0=!1,D_=typeof WeakSet=="function"?WeakSet:Set,Zn=null;function mj(r,s){if(r=r.containerInfo,O0=$h,r=wo(r),ds(r)){if("selectionStart"in r)var c={start:r.selectionStart,end:r.selectionEnd};else e:{c=(c=r.ownerDocument)&&c.defaultView||window;var h=c.getSelection&&c.getSelection();if(h&&h.rangeCount!==0){c=h.anchorNode;var v=h.anchorOffset,w=h.focusNode;h=h.focusOffset;try{c.nodeType,w.nodeType}catch{c=null;break e}var O=0,U=-1,re=-1,ye=0,Ae=0,De=r,xe=null;t:for(;;){for(var we;De!==c||v!==0&&De.nodeType!==3||(U=O+v),De!==w||h!==0&&De.nodeType!==3||(re=O+h),De.nodeType===3&&(O+=De.nodeValue.length),(we=De.firstChild)!==null;)xe=De,De=we;for(;;){if(De===r)break t;if(xe===c&&++ye===v&&(U=O),xe===w&&++Ae===h&&(re=O),(we=De.nextSibling)!==null)break;De=xe,xe=De.parentNode}De=we}c=U===-1||re===-1?null:{start:U,end:re}}else c=null}c=c||{start:0,end:0}}else c=null;for(D0={focusedElem:r,selectionRange:c},$h=!1,Zn=s;Zn!==null;)if(s=Zn,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,Zn=r;else for(;Zn!==null;){switch(s=Zn,w=s.alternate,r=s.flags,s.tag){case 0:if((r&4)!==0&&(r=s.updateQueue,r=r!==null?r.events:null,r!==null))for(c=0;c<r.length;c++)v=r[c],v.ref.impl=v.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&w!==null){r=void 0,c=s,v=w.memoizedProps,w=w.memoizedState,h=c.stateNode;try{var qe=$o(c.type,v);r=h.getSnapshotBeforeUpdate(qe,w),h.__reactInternalSnapshotBeforeUpdate=r}catch(rt){It(c,c.return,rt)}}break;case 3:if((r&1024)!==0){if(r=s.stateNode.containerInfo,c=r.nodeType,c===9)R0(r);else if(c===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":R0(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=s.sibling,r!==null){r.return=s.return,Zn=r;break}Zn=s.return}}function M_(r,s,c){var h=c.flags;switch(c.tag){case 0:case 11:case 15:Hs(r,c),h&4&&fu(5,c);break;case 1:if(Hs(r,c),h&4)if(r=c.stateNode,s===null)try{r.componentDidMount()}catch(O){It(c,c.return,O)}else{var v=$o(c.type,s.memoizedProps);s=s.memoizedState;try{r.componentDidUpdate(v,s,r.__reactInternalSnapshotBeforeUpdate)}catch(O){It(c,c.return,O)}}h&64&&k_(c),h&512&&mu(c,c.return);break;case 3:if(Hs(r,c),h&64&&(r=c.updateQueue,r!==null)){if(s=null,c.child!==null)switch(c.child.tag){case 27:case 5:s=c.child.stateNode;break;case 1:s=c.child.stateNode}try{gv(r,s)}catch(O){It(c,c.return,O)}}break;case 27:s===null&&h&4&&O_(c);case 26:case 5:Hs(r,c),s===null&&h&4&&j_(c),h&512&&mu(c,c.return);break;case 12:Hs(r,c);break;case 31:Hs(r,c),h&4&&L_(r,c);break;case 13:Hs(r,c),h&4&&B_(r,c),h&64&&(r=c.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(c=Sj.bind(null,c),Gj(r,c))));break;case 22:if(h=c.memoizedState!==null||zs,!h){s=s!==null&&s.memoizedState!==null||Ln,v=zs;var w=Ln;zs=h,(Ln=s)&&!w?Gs(r,c,(c.subtreeFlags&8772)!==0):Hs(r,c),zs=v,Ln=w}break;case 30:break;default:Hs(r,c)}}function C_(r){var s=r.alternate;s!==null&&(r.alternate=null,C_(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&nt(s)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var on=null,Pr=!1;function Us(r,s,c){for(c=c.child;c!==null;)R_(r,s,c),c=c.sibling}function R_(r,s,c){if(Ct&&typeof Ct.onCommitFiberUnmount=="function")try{Ct.onCommitFiberUnmount(dn,c)}catch{}switch(c.tag){case 26:Ln||vs(c,s),Us(r,s,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Ln||vs(c,s);var h=on,v=Pr;Ba(c.type)&&(on=c.stateNode,Pr=!1),Us(r,s,c),Su(c.stateNode),on=h,Pr=v;break;case 5:Ln||vs(c,s);case 6:if(h=on,v=Pr,on=null,Us(r,s,c),on=h,Pr=v,on!==null)if(Pr)try{(on.nodeType===9?on.body:on.nodeName==="HTML"?on.ownerDocument.body:on).removeChild(c.stateNode)}catch(w){It(c,s,w)}else try{on.removeChild(c.stateNode)}catch(w){It(c,s,w)}break;case 18:on!==null&&(Pr?(r=on,kx(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,c.stateNode),Xl(r)):kx(on,c.stateNode));break;case 4:h=on,v=Pr,on=c.stateNode.containerInfo,Pr=!0,Us(r,s,c),on=h,Pr=v;break;case 0:case 11:case 14:case 15:Na(2,c,s),Ln||Na(4,c,s),Us(r,s,c);break;case 1:Ln||(vs(c,s),h=c.stateNode,typeof h.componentWillUnmount=="function"&&A_(c,s,h)),Us(r,s,c);break;case 21:Us(r,s,c);break;case 22:Ln=(h=Ln)||c.memoizedState!==null,Us(r,s,c),Ln=h;break;default:Us(r,s,c)}}function L_(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{Xl(r)}catch(c){It(s,s.return,c)}}}function B_(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Xl(r)}catch(c){It(s,s.return,c)}}function pj(r){switch(r.tag){case 31:case 13:case 19:var s=r.stateNode;return s===null&&(s=r.stateNode=new D_),s;case 22:return r=r.stateNode,s=r._retryCache,s===null&&(s=r._retryCache=new D_),s;default:throw Error(i(435,r.tag))}}function yh(r,s){var c=pj(r);s.forEach(function(h){if(!c.has(h)){c.add(h);var v=Ej.bind(null,r,h);h.then(v,v)}})}function $r(r,s){var c=s.deletions;if(c!==null)for(var h=0;h<c.length;h++){var v=c[h],w=r,O=s,U=O;e:for(;U!==null;){switch(U.tag){case 27:if(Ba(U.type)){on=U.stateNode,Pr=!1;break e}break;case 5:on=U.stateNode,Pr=!1;break e;case 3:case 4:on=U.stateNode.containerInfo,Pr=!0;break e}U=U.return}if(on===null)throw Error(i(160));R_(w,O,v),on=null,Pr=!1,w=v.alternate,w!==null&&(w.return=null),v.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)P_(s,r),s=s.sibling}var Ki=null;function P_(r,s){var c=r.alternate,h=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:$r(s,r),Ir(r),h&4&&(Na(3,r,r.return),fu(3,r),Na(5,r,r.return));break;case 1:$r(s,r),Ir(r),h&512&&(Ln||c===null||vs(c,c.return)),h&64&&zs&&(r=r.updateQueue,r!==null&&(h=r.callbacks,h!==null&&(c=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=c===null?h:c.concat(h))));break;case 26:var v=Ki;if($r(s,r),Ir(r),h&512&&(Ln||c===null||vs(c,c.return)),h&4){var w=c!==null?c.memoizedState:null;if(h=r.memoizedState,c===null)if(h===null)if(r.stateNode===null){e:{h=r.type,c=r.memoizedProps,v=v.ownerDocument||v;t:switch(h){case"title":w=v.getElementsByTagName("title")[0],(!w||w[pt]||w[sn]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=v.createElement(h),v.head.insertBefore(w,v.querySelector("head > title"))),nr(w,h,c),w[sn]=r,wt(w),h=w;break e;case"link":var O=Px("link","href",v).get(h+(c.href||""));if(O){for(var U=0;U<O.length;U++)if(w=O[U],w.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&w.getAttribute("rel")===(c.rel==null?null:c.rel)&&w.getAttribute("title")===(c.title==null?null:c.title)&&w.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){O.splice(U,1);break t}}w=v.createElement(h),nr(w,h,c),v.head.appendChild(w);break;case"meta":if(O=Px("meta","content",v).get(h+(c.content||""))){for(U=0;U<O.length;U++)if(w=O[U],w.getAttribute("content")===(c.content==null?null:""+c.content)&&w.getAttribute("name")===(c.name==null?null:c.name)&&w.getAttribute("property")===(c.property==null?null:c.property)&&w.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&w.getAttribute("charset")===(c.charSet==null?null:c.charSet)){O.splice(U,1);break t}}w=v.createElement(h),nr(w,h,c),v.head.appendChild(w);break;default:throw Error(i(468,h))}w[sn]=r,wt(w),h=w}r.stateNode=h}else $x(v,r.type,r.stateNode);else r.stateNode=Bx(v,h,r.memoizedProps);else w!==h?(w===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):w.count--,h===null?$x(v,r.type,r.stateNode):Bx(v,h,r.memoizedProps)):h===null&&r.stateNode!==null&&a0(r,r.memoizedProps,c.memoizedProps)}break;case 27:$r(s,r),Ir(r),h&512&&(Ln||c===null||vs(c,c.return)),c!==null&&h&4&&a0(r,r.memoizedProps,c.memoizedProps);break;case 5:if($r(s,r),Ir(r),h&512&&(Ln||c===null||vs(c,c.return)),r.flags&32){v=r.stateNode;try{vi(v,"")}catch(qe){It(r,r.return,qe)}}h&4&&r.stateNode!=null&&(v=r.memoizedProps,a0(r,v,c!==null?c.memoizedProps:v)),h&1024&&(c0=!0);break;case 6:if($r(s,r),Ir(r),h&4){if(r.stateNode===null)throw Error(i(162));h=r.memoizedProps,c=r.stateNode;try{c.nodeValue=h}catch(qe){It(r,r.return,qe)}}break;case 3:if(Rh=null,v=Ki,Ki=Mh(s.containerInfo),$r(s,r),Ki=v,Ir(r),h&4&&c!==null&&c.memoizedState.isDehydrated)try{Xl(s.containerInfo)}catch(qe){It(r,r.return,qe)}c0&&(c0=!1,$_(r));break;case 4:h=Ki,Ki=Mh(r.stateNode.containerInfo),$r(s,r),Ir(r),Ki=h;break;case 12:$r(s,r),Ir(r);break;case 31:$r(s,r),Ir(r),h&4&&(h=r.updateQueue,h!==null&&(r.updateQueue=null,yh(r,h)));break;case 13:$r(s,r),Ir(r),r.child.flags&8192&&r.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(_h=He()),h&4&&(h=r.updateQueue,h!==null&&(r.updateQueue=null,yh(r,h)));break;case 22:v=r.memoizedState!==null;var re=c!==null&&c.memoizedState!==null,ye=zs,Ae=Ln;if(zs=ye||v,Ln=Ae||re,$r(s,r),Ln=Ae,zs=ye,Ir(r),h&8192)e:for(s=r.stateNode,s._visibility=v?s._visibility&-2:s._visibility|1,v&&(c===null||re||zs||Ln||Io(r)),c=null,s=r;;){if(s.tag===5||s.tag===26){if(c===null){re=c=s;try{if(w=re.stateNode,v)O=w.style,typeof O.setProperty=="function"?O.setProperty("display","none","important"):O.display="none";else{U=re.stateNode;var De=re.memoizedProps.style,xe=De!=null&&De.hasOwnProperty("display")?De.display:null;U.style.display=xe==null||typeof xe=="boolean"?"":(""+xe).trim()}}catch(qe){It(re,re.return,qe)}}}else if(s.tag===6){if(c===null){re=s;try{re.stateNode.nodeValue=v?"":re.memoizedProps}catch(qe){It(re,re.return,qe)}}}else if(s.tag===18){if(c===null){re=s;try{var we=re.stateNode;v?Ax(we,!0):Ax(re.stateNode,!1)}catch(qe){It(re,re.return,qe)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===r)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;c===s&&(c=null),s=s.return}c===s&&(c=null),s.sibling.return=s.return,s=s.sibling}h&4&&(h=r.updateQueue,h!==null&&(c=h.retryQueue,c!==null&&(h.retryQueue=null,yh(r,c))));break;case 19:$r(s,r),Ir(r),h&4&&(h=r.updateQueue,h!==null&&(r.updateQueue=null,yh(r,h)));break;case 30:break;case 21:break;default:$r(s,r),Ir(r)}}function Ir(r){var s=r.flags;if(s&2){try{for(var c,h=r.return;h!==null;){if(N_(h)){c=h;break}h=h.return}if(c==null)throw Error(i(160));switch(c.tag){case 27:var v=c.stateNode,w=o0(r);bh(r,w,v);break;case 5:var O=c.stateNode;c.flags&32&&(vi(O,""),c.flags&=-33);var U=o0(r);bh(r,U,O);break;case 3:case 4:var re=c.stateNode.containerInfo,ye=o0(r);l0(r,ye,re);break;default:throw Error(i(161))}}catch(Ae){It(r,r.return,Ae)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function $_(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var s=r;$_(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),r=r.sibling}}function Hs(r,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)M_(r,s.alternate,s),s=s.sibling}function Io(r){for(r=r.child;r!==null;){var s=r;switch(s.tag){case 0:case 11:case 14:case 15:Na(4,s,s.return),Io(s);break;case 1:vs(s,s.return);var c=s.stateNode;typeof c.componentWillUnmount=="function"&&A_(s,s.return,c),Io(s);break;case 27:Su(s.stateNode);case 26:case 5:vs(s,s.return),Io(s);break;case 22:s.memoizedState===null&&Io(s);break;case 30:Io(s);break;default:Io(s)}r=r.sibling}}function Gs(r,s,c){for(c=c&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var h=s.alternate,v=r,w=s,O=w.flags;switch(w.tag){case 0:case 11:case 15:Gs(v,w,c),fu(4,w);break;case 1:if(Gs(v,w,c),h=w,v=h.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(ye){It(h,h.return,ye)}if(h=w,v=h.updateQueue,v!==null){var U=h.stateNode;try{var re=v.shared.hiddenCallbacks;if(re!==null)for(v.shared.hiddenCallbacks=null,v=0;v<re.length;v++)pv(re[v],U)}catch(ye){It(h,h.return,ye)}}c&&O&64&&k_(w),mu(w,w.return);break;case 27:O_(w);case 26:case 5:Gs(v,w,c),c&&h===null&&O&4&&j_(w),mu(w,w.return);break;case 12:Gs(v,w,c);break;case 31:Gs(v,w,c),c&&O&4&&L_(v,w);break;case 13:Gs(v,w,c),c&&O&4&&B_(v,w);break;case 22:w.memoizedState===null&&Gs(v,w,c),mu(w,w.return);break;case 30:break;default:Gs(v,w,c)}s=s.sibling}}function u0(r,s){var c=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),r=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),r!==c&&(r!=null&&r.refCount++,c!=null&&eu(c))}function d0(r,s){r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&eu(r))}function Wi(r,s,c,h){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)I_(r,s,c,h),s=s.sibling}function I_(r,s,c,h){var v=s.flags;switch(s.tag){case 0:case 11:case 15:Wi(r,s,c,h),v&2048&&fu(9,s);break;case 1:Wi(r,s,c,h);break;case 3:Wi(r,s,c,h),v&2048&&(r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&eu(r)));break;case 12:if(v&2048){Wi(r,s,c,h),r=s.stateNode;try{var w=s.memoizedProps,O=w.id,U=w.onPostCommit;typeof U=="function"&&U(O,s.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(re){It(s,s.return,re)}}else Wi(r,s,c,h);break;case 31:Wi(r,s,c,h);break;case 13:Wi(r,s,c,h);break;case 23:break;case 22:w=s.stateNode,O=s.alternate,s.memoizedState!==null?w._visibility&2?Wi(r,s,c,h):pu(r,s):w._visibility&2?Wi(r,s,c,h):(w._visibility|=2,zl(r,s,c,h,(s.subtreeFlags&10256)!==0||!1)),v&2048&&u0(O,s);break;case 24:Wi(r,s,c,h),v&2048&&d0(s.alternate,s);break;default:Wi(r,s,c,h)}}function zl(r,s,c,h,v){for(v=v&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var w=r,O=s,U=c,re=h,ye=O.flags;switch(O.tag){case 0:case 11:case 15:zl(w,O,U,re,v),fu(8,O);break;case 23:break;case 22:var Ae=O.stateNode;O.memoizedState!==null?Ae._visibility&2?zl(w,O,U,re,v):pu(w,O):(Ae._visibility|=2,zl(w,O,U,re,v)),v&&ye&2048&&u0(O.alternate,O);break;case 24:zl(w,O,U,re,v),v&&ye&2048&&d0(O.alternate,O);break;default:zl(w,O,U,re,v)}s=s.sibling}}function pu(r,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var c=r,h=s,v=h.flags;switch(h.tag){case 22:pu(c,h),v&2048&&u0(h.alternate,h);break;case 24:pu(c,h),v&2048&&d0(h.alternate,h);break;default:pu(c,h)}s=s.sibling}}var gu=8192;function Ul(r,s,c){if(r.subtreeFlags&gu)for(r=r.child;r!==null;)z_(r,s,c),r=r.sibling}function z_(r,s,c){switch(r.tag){case 26:Ul(r,s,c),r.flags&gu&&r.memoizedState!==null&&tN(c,Ki,r.memoizedState,r.memoizedProps);break;case 5:Ul(r,s,c);break;case 3:case 4:var h=Ki;Ki=Mh(r.stateNode.containerInfo),Ul(r,s,c),Ki=h;break;case 22:r.memoizedState===null&&(h=r.alternate,h!==null&&h.memoizedState!==null?(h=gu,gu=16777216,Ul(r,s,c),gu=h):Ul(r,s,c));break;default:Ul(r,s,c)}}function U_(r){var s=r.alternate;if(s!==null&&(r=s.child,r!==null)){s.child=null;do s=r.sibling,r.sibling=null,r=s;while(r!==null)}}function bu(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var c=0;c<s.length;c++){var h=s[c];Zn=h,G_(h,r)}U_(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)H_(r),r=r.sibling}function H_(r){switch(r.tag){case 0:case 11:case 15:bu(r),r.flags&2048&&Na(9,r,r.return);break;case 3:bu(r);break;case 12:bu(r);break;case 22:var s=r.stateNode;r.memoizedState!==null&&s._visibility&2&&(r.return===null||r.return.tag!==13)?(s._visibility&=-3,vh(r)):bu(r);break;default:bu(r)}}function vh(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var c=0;c<s.length;c++){var h=s[c];Zn=h,G_(h,r)}U_(r)}for(r=r.child;r!==null;){switch(s=r,s.tag){case 0:case 11:case 15:Na(8,s,s.return),vh(s);break;case 22:c=s.stateNode,c._visibility&2&&(c._visibility&=-3,vh(s));break;default:vh(s)}r=r.sibling}}function G_(r,s){for(;Zn!==null;){var c=Zn;switch(c.tag){case 0:case 11:case 15:Na(8,c,s);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var h=c.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:eu(c.memoizedState.cache)}if(h=c.child,h!==null)h.return=c,Zn=h;else e:for(c=r;Zn!==null;){h=Zn;var v=h.sibling,w=h.return;if(C_(h),h===c){Zn=null;break e}if(v!==null){v.return=w,Zn=v;break e}Zn=w}}}var gj={getCacheForType:function(r){var s=er(Mn),c=s.data.get(r);return c===void 0&&(c=r(),s.data.set(r,c)),c},cacheSignal:function(){return er(Mn).controller.signal}},bj=typeof WeakMap=="function"?WeakMap:Map,Rt=0,qt=null,yt=null,Et=0,$t=0,ei=null,Oa=!1,Hl=!1,h0=!1,Fs=0,xn=0,Da=0,zo=0,f0=0,ti=0,Gl=0,yu=null,zr=null,m0=!1,_h=0,F_=0,xh=1/0,wh=null,Ma=null,Hn=0,Ca=null,Fl=null,Ys=0,p0=0,g0=null,Y_=null,vu=0,b0=null;function ni(){return(Rt&2)!==0&&Et!==0?Et&-Et:J.T!==null?S0():ks()}function q_(){if(ti===0)if((Et&536870912)===0||bt){var r=Dn;Dn<<=1,(Dn&3932160)===0&&(Dn=262144),ti=r}else ti=536870912;return r=Jr.current,r!==null&&(r.flags|=32),ti}function Ur(r,s,c){(r===qt&&($t===2||$t===9)||r.cancelPendingCommit!==null)&&(Yl(r,0),Ra(r,Et,ti,!1)),Ui(r,c),((Rt&2)===0||r!==qt)&&(r===qt&&((Rt&2)===0&&(zo|=c),xn===4&&Ra(r,Et,ti,!1)),_s(r))}function Z_(r,s,c){if((Rt&6)!==0)throw Error(i(327));var h=!c&&(s&127)===0&&(s&r.expiredLanes)===0||gi(r,s),v=h?_j(r,s):v0(r,s,!0),w=h;do{if(v===0){Hl&&!h&&Ra(r,s,0,!1);break}else{if(c=r.current.alternate,w&&!yj(c)){v=v0(r,s,!1),w=!1;continue}if(v===2){if(w=s,r.errorRecoveryDisabledLanes&w)var O=0;else O=r.pendingLanes&-536870913,O=O!==0?O:O&536870912?536870912:0;if(O!==0){s=O;e:{var U=r;v=yu;var re=U.current.memoizedState.isDehydrated;if(re&&(Yl(U,O).flags|=256),O=v0(U,O,!1),O!==2){if(h0&&!re){U.errorRecoveryDisabledLanes|=w,zo|=w,v=4;break e}w=zr,zr=v,w!==null&&(zr===null?zr=w:zr.push.apply(zr,w))}v=O}if(w=!1,v!==2)continue}}if(v===1){Yl(r,0),Ra(r,s,0,!0);break}e:{switch(h=r,w=v,w){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:Ra(h,s,ti,!Oa);break e;case 2:zr=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(v=_h+300-He(),10<v)){if(Ra(h,s,ti,!Oa),cr(h,0,!0)!==0)break e;Ys=s,h.timeoutHandle=Ex(V_.bind(null,h,c,zr,wh,m0,s,ti,zo,Gl,Oa,w,"Throttled",-0,0),v);break e}V_(h,c,zr,wh,m0,s,ti,zo,Gl,Oa,w,null,-0,0)}}break}while(!0);_s(r)}function V_(r,s,c,h,v,w,O,U,re,ye,Ae,De,xe,we){if(r.timeoutHandle=-1,De=s.subtreeFlags,De&8192||(De&16785408)===16785408){De={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Mr},z_(s,w,De);var qe=(w&62914560)===w?_h-He():(w&4194048)===w?F_-He():0;if(qe=nN(De,qe),qe!==null){Ys=w,r.cancelPendingCommit=qe(nx.bind(null,r,s,w,c,h,v,O,U,re,Ae,De,null,xe,we)),Ra(r,w,O,!ye);return}}nx(r,s,w,c,h,v,O,U,re)}function yj(r){for(var s=r;;){var c=s.tag;if((c===0||c===11||c===15)&&s.flags&16384&&(c=s.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var h=0;h<c.length;h++){var v=c[h],w=v.getSnapshot;v=v.value;try{if(!Yn(w(),v))return!1}catch{return!1}}if(c=s.child,s.subtreeFlags&16384&&c!==null)c.return=s,s=c;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ra(r,s,c,h){s&=~f0,s&=~zo,r.suspendedLanes|=s,r.pingedLanes&=~s,h&&(r.warmLanes|=s),h=r.expirationTimes;for(var v=s;0<v;){var w=31-hn(v),O=1<<w;h[w]=-1,v&=~O}c!==0&&sa(r,c,s)}function Sh(){return(Rt&6)===0?(_u(0),!1):!0}function y0(){if(yt!==null){if($t===0)var r=yt.return;else r=yt,Vi=ys=null,Rp(r),Ll=null,nu=0,r=yt;for(;r!==null;)T_(r.alternate,r),r=r.return;yt=null}}function Yl(r,s){var c=r.timeoutHandle;c!==-1&&(r.timeoutHandle=-1,$j(c)),c=r.cancelPendingCommit,c!==null&&(r.cancelPendingCommit=null,c()),Ys=0,y0(),qt=r,yt=c=ki(r.current,null),Et=s,$t=0,ei=null,Oa=!1,Hl=gi(r,s),h0=!1,Gl=ti=f0=zo=Da=xn=0,zr=yu=null,m0=!1,(s&8)!==0&&(s|=s&32);var h=r.entangledLanes;if(h!==0)for(r=r.entanglements,h&=s;0<h;){var v=31-hn(h),w=1<<v;s|=r[v],h&=~w}return Fs=s,Ao(),c}function K_(r,s){ct=null,J.H=uu,s===Rl||s===Jd?(s=dv(),$t=3):s===wp?(s=dv(),$t=4):$t=s===Wp?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,ei=s,yt===null&&(xn=1,hh(r,d(s,r.current)))}function W_(){var r=Jr.current;return r===null?!0:(Et&4194048)===Et?Ai===null:(Et&62914560)===Et||(Et&536870912)!==0?r===Ai:!1}function X_(){var r=J.H;return J.H=uu,r===null?uu:r}function J_(){var r=J.A;return J.A=gj,r}function Eh(){xn=4,Oa||(Et&4194048)!==Et&&Jr.current!==null||(Hl=!0),(Da&134217727)===0&&(zo&134217727)===0||qt===null||Ra(qt,Et,ti,!1)}function v0(r,s,c){var h=Rt;Rt|=2;var v=X_(),w=J_();(qt!==r||Et!==s)&&(wh=null,Yl(r,s)),s=!1;var O=xn;e:do try{if($t!==0&&yt!==null){var U=yt,re=ei;switch($t){case 8:y0(),O=6;break e;case 3:case 2:case 9:case 6:Jr.current===null&&(s=!0);var ye=$t;if($t=0,ei=null,ql(r,U,re,ye),c&&Hl){O=0;break e}break;default:ye=$t,$t=0,ei=null,ql(r,U,re,ye)}}vj(),O=xn;break}catch(Ae){K_(r,Ae)}while(!0);return s&&r.shellSuspendCounter++,Vi=ys=null,Rt=h,J.H=v,J.A=w,yt===null&&(qt=null,Et=0,Ao()),O}function vj(){for(;yt!==null;)Q_(yt)}function _j(r,s){var c=Rt;Rt|=2;var h=X_(),v=J_();qt!==r||Et!==s?(wh=null,xh=He()+500,Yl(r,s)):Hl=gi(r,s);e:do try{if($t!==0&&yt!==null){s=yt;var w=ei;t:switch($t){case 1:$t=0,ei=null,ql(r,s,w,1);break;case 2:case 9:if(cv(w)){$t=0,ei=null,ex(s);break}s=function(){$t!==2&&$t!==9||qt!==r||($t=7),_s(r)},w.then(s,s);break e;case 3:$t=7;break e;case 4:$t=5;break e;case 7:cv(w)?($t=0,ei=null,ex(s)):($t=0,ei=null,ql(r,s,w,7));break;case 5:var O=null;switch(yt.tag){case 26:O=yt.memoizedState;case 5:case 27:var U=yt;if(O?Ix(O):U.stateNode.complete){$t=0,ei=null;var re=U.sibling;if(re!==null)yt=re;else{var ye=U.return;ye!==null?(yt=ye,Th(ye)):yt=null}break t}}$t=0,ei=null,ql(r,s,w,5);break;case 6:$t=0,ei=null,ql(r,s,w,6);break;case 8:y0(),xn=6;break e;default:throw Error(i(462))}}xj();break}catch(Ae){K_(r,Ae)}while(!0);return Vi=ys=null,J.H=h,J.A=v,Rt=c,yt!==null?0:(qt=null,Et=0,Ao(),xn)}function xj(){for(;yt!==null&&!me();)Q_(yt)}function Q_(r){var s=S_(r.alternate,r,Fs);r.memoizedProps=r.pendingProps,s===null?Th(r):yt=s}function ex(r){var s=r,c=s.alternate;switch(s.tag){case 15:case 0:s=b_(c,s,s.pendingProps,s.type,void 0,Et);break;case 11:s=b_(c,s,s.pendingProps,s.type.render,s.ref,Et);break;case 5:Rp(s);default:T_(c,s),s=yt=Kc(s,Fs),s=S_(c,s,Fs)}r.memoizedProps=r.pendingProps,s===null?Th(r):yt=s}function ql(r,s,c,h){Vi=ys=null,Rp(s),Ll=null,nu=0;var v=s.return;try{if(cj(r,v,s,c,Et)){xn=1,hh(r,d(c,r.current)),yt=null;return}}catch(w){if(v!==null)throw yt=v,w;xn=1,hh(r,d(c,r.current)),yt=null;return}s.flags&32768?(bt||h===1?r=!0:Hl||(Et&536870912)!==0?r=!1:(Oa=r=!0,(h===2||h===9||h===3||h===6)&&(h=Jr.current,h!==null&&h.tag===13&&(h.flags|=16384))),tx(s,r)):Th(s)}function Th(r){var s=r;do{if((s.flags&32768)!==0){tx(s,Oa);return}r=s.return;var c=hj(s.alternate,s,Fs);if(c!==null){yt=c;return}if(s=s.sibling,s!==null){yt=s;return}yt=s=r}while(s!==null);xn===0&&(xn=5)}function tx(r,s){do{var c=fj(r.alternate,r);if(c!==null){c.flags&=32767,yt=c;return}if(c=r.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!s&&(r=r.sibling,r!==null)){yt=r;return}yt=r=c}while(r!==null);xn=6,yt=null}function nx(r,s,c,h,v,w,O,U,re){r.cancelPendingCommit=null;do kh();while(Hn!==0);if((Rt&6)!==0)throw Error(i(327));if(s!==null){if(s===r.current)throw Error(i(177));if(w=s.lanes|s.childLanes,w|=Al,to(r,c,w,O,U,re),r===qt&&(yt=qt=null,Et=0),Fl=s,Ca=r,Ys=c,p0=w,g0=v,Y_=h,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,Tj(Zt,function(){return ox(),null})):(r.callbackNode=null,r.callbackPriority=0),h=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||h){h=J.T,J.T=null,v=le.p,le.p=2,O=Rt,Rt|=4;try{mj(r,s,c)}finally{Rt=O,le.p=v,J.T=h}}Hn=1,rx(),ix(),sx()}}function rx(){if(Hn===1){Hn=0;var r=Ca,s=Fl,c=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||c){c=J.T,J.T=null;var h=le.p;le.p=2;var v=Rt;Rt|=4;try{P_(s,r);var w=D0,O=wo(r.containerInfo),U=w.focusedElem,re=w.selectionRange;if(O!==U&&U&&U.ownerDocument&&Sl(U.ownerDocument.documentElement,U)){if(re!==null&&ds(U)){var ye=re.start,Ae=re.end;if(Ae===void 0&&(Ae=ye),"selectionStart"in U)U.selectionStart=ye,U.selectionEnd=Math.min(Ae,U.value.length);else{var De=U.ownerDocument||document,xe=De&&De.defaultView||window;if(xe.getSelection){var we=xe.getSelection(),qe=U.textContent.length,rt=Math.min(re.start,qe),Gt=re.end===void 0?rt:Math.min(re.end,qe);!we.extend&&rt>Gt&&(O=Gt,Gt=rt,rt=O);var ue=xo(U,rt),ae=xo(U,Gt);if(ue&&ae&&(we.rangeCount!==1||we.anchorNode!==ue.node||we.anchorOffset!==ue.offset||we.focusNode!==ae.node||we.focusOffset!==ae.offset)){var ge=De.createRange();ge.setStart(ue.node,ue.offset),we.removeAllRanges(),rt>Gt?(we.addRange(ge),we.extend(ae.node,ae.offset)):(ge.setEnd(ae.node,ae.offset),we.addRange(ge))}}}}for(De=[],we=U;we=we.parentNode;)we.nodeType===1&&De.push({element:we,left:we.scrollLeft,top:we.scrollTop});for(typeof U.focus=="function"&&U.focus(),U=0;U<De.length;U++){var Ne=De[U];Ne.element.scrollLeft=Ne.left,Ne.element.scrollTop=Ne.top}}$h=!!O0,D0=O0=null}finally{Rt=v,le.p=h,J.T=c}}r.current=s,Hn=2}}function ix(){if(Hn===2){Hn=0;var r=Ca,s=Fl,c=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||c){c=J.T,J.T=null;var h=le.p;le.p=2;var v=Rt;Rt|=4;try{M_(r,s.alternate,s)}finally{Rt=v,le.p=h,J.T=c}}Hn=3}}function sx(){if(Hn===4||Hn===3){Hn=0,$e();var r=Ca,s=Fl,c=Ys,h=Y_;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Hn=5:(Hn=0,Fl=Ca=null,ax(r,r.pendingLanes));var v=r.pendingLanes;if(v===0&&(Ma=null),Ve(c),s=s.stateNode,Ct&&typeof Ct.onCommitFiberRoot=="function")try{Ct.onCommitFiberRoot(dn,s,void 0,(s.current.flags&128)===128)}catch{}if(h!==null){s=J.T,v=le.p,le.p=2,J.T=null;try{for(var w=r.onRecoverableError,O=0;O<h.length;O++){var U=h[O];w(U.value,{componentStack:U.stack})}}finally{J.T=s,le.p=v}}(Ys&3)!==0&&kh(),_s(r),v=r.pendingLanes,(c&261930)!==0&&(v&42)!==0?r===b0?vu++:(vu=0,b0=r):vu=0,_u(0)}}function ax(r,s){(r.pooledCacheLanes&=s)===0&&(s=r.pooledCache,s!=null&&(r.pooledCache=null,eu(s)))}function kh(){return rx(),ix(),sx(),ox()}function ox(){if(Hn!==5)return!1;var r=Ca,s=p0;p0=0;var c=Ve(Ys),h=J.T,v=le.p;try{le.p=32>c?32:c,J.T=null,c=g0,g0=null;var w=Ca,O=Ys;if(Hn=0,Fl=Ca=null,Ys=0,(Rt&6)!==0)throw Error(i(331));var U=Rt;if(Rt|=4,H_(w.current),I_(w,w.current,O,c),Rt=U,_u(0,!1),Ct&&typeof Ct.onPostCommitFiberRoot=="function")try{Ct.onPostCommitFiberRoot(dn,w)}catch{}return!0}finally{le.p=v,J.T=h,ax(r,s)}}function lx(r,s,c){s=d(c,s),s=Kp(r.stateNode,s,2),r=ka(r,s,2),r!==null&&(Ui(r,2),_s(r))}function It(r,s,c){if(r.tag===3)lx(r,r,c);else for(;s!==null;){if(s.tag===3){lx(s,r,c);break}else if(s.tag===1){var h=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Ma===null||!Ma.has(h))){r=d(c,r),c=c_(2),h=ka(s,c,2),h!==null&&(u_(c,h,s,r),Ui(h,2),_s(h));break}}s=s.return}}function _0(r,s,c){var h=r.pingCache;if(h===null){h=r.pingCache=new bj;var v=new Set;h.set(s,v)}else v=h.get(s),v===void 0&&(v=new Set,h.set(s,v));v.has(c)||(h0=!0,v.add(c),r=wj.bind(null,r,s,c),s.then(r,r))}function wj(r,s,c){var h=r.pingCache;h!==null&&h.delete(s),r.pingedLanes|=r.suspendedLanes&c,r.warmLanes&=~c,qt===r&&(Et&c)===c&&(xn===4||xn===3&&(Et&62914560)===Et&&300>He()-_h?(Rt&2)===0&&Yl(r,0):f0|=c,Gl===Et&&(Gl=0)),_s(r)}function cx(r,s){s===0&&(s=Qa()),r=Ti(r,s),r!==null&&(Ui(r,s),_s(r))}function Sj(r){var s=r.memoizedState,c=0;s!==null&&(c=s.retryLane),cx(r,c)}function Ej(r,s){var c=0;switch(r.tag){case 31:case 13:var h=r.stateNode,v=r.memoizedState;v!==null&&(c=v.retryLane);break;case 19:h=r.stateNode;break;case 22:h=r.stateNode._retryCache;break;default:throw Error(i(314))}h!==null&&h.delete(s),cx(r,c)}function Tj(r,s){return Le(r,s)}var Ah=null,Zl=null,x0=!1,jh=!1,w0=!1,La=0;function _s(r){r!==Zl&&r.next===null&&(Zl===null?Ah=Zl=r:Zl=Zl.next=r),jh=!0,x0||(x0=!0,Aj())}function _u(r,s){if(!w0&&jh){w0=!0;do for(var c=!1,h=Ah;h!==null;){if(r!==0){var v=h.pendingLanes;if(v===0)var w=0;else{var O=h.suspendedLanes,U=h.pingedLanes;w=(1<<31-hn(42|r)+1)-1,w&=v&~(O&~U),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(c=!0,fx(h,w))}else w=Et,w=cr(h,h===qt?w:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(w&3)===0||gi(h,w)||(c=!0,fx(h,w));h=h.next}while(c);w0=!1}}function kj(){ux()}function ux(){jh=x0=!1;var r=0;La!==0&&Pj()&&(r=La);for(var s=He(),c=null,h=Ah;h!==null;){var v=h.next,w=dx(h,s);w===0?(h.next=null,c===null?Ah=v:c.next=v,v===null&&(Zl=c)):(c=h,(r!==0||(w&3)!==0)&&(jh=!0)),h=v}Hn!==0&&Hn!==5||_u(r),La!==0&&(La=0)}function dx(r,s){for(var c=r.suspendedLanes,h=r.pingedLanes,v=r.expirationTimes,w=r.pendingLanes&-62914561;0<w;){var O=31-hn(w),U=1<<O,re=v[O];re===-1?((U&c)===0||(U&h)!==0)&&(v[O]=ia(U,s)):re<=s&&(r.expiredLanes|=U),w&=~U}if(s=qt,c=Et,c=cr(r,r===s?c:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),h=r.callbackNode,c===0||r===s&&($t===2||$t===9)||r.cancelPendingCommit!==null)return h!==null&&h!==null&&ce(h),r.callbackNode=null,r.callbackPriority=0;if((c&3)===0||gi(r,c)){if(s=c&-c,s===r.callbackPriority)return s;switch(h!==null&&ce(h),Ve(c)){case 2:case 8:c=et;break;case 32:c=Zt;break;case 268435456:c=En;break;default:c=Zt}return h=hx.bind(null,r),c=Le(c,h),r.callbackPriority=s,r.callbackNode=c,s}return h!==null&&h!==null&&ce(h),r.callbackPriority=2,r.callbackNode=null,2}function hx(r,s){if(Hn!==0&&Hn!==5)return r.callbackNode=null,r.callbackPriority=0,null;var c=r.callbackNode;if(kh()&&r.callbackNode!==c)return null;var h=Et;return h=cr(r,r===qt?h:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),h===0?null:(Z_(r,h,s),dx(r,He()),r.callbackNode!=null&&r.callbackNode===c?hx.bind(null,r):null)}function fx(r,s){if(kh())return null;Z_(r,s,!0)}function Aj(){Ij(function(){(Rt&6)!==0?Le(tt,kj):ux()})}function S0(){if(La===0){var r=Ml;r===0&&(r=Tn,Tn<<=1,(Tn&261888)===0&&(Tn=256)),La=r}return La}function mx(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:ua(""+r)}function px(r,s){var c=s.ownerDocument.createElement("input");return c.name=s.name,c.value=s.value,r.id&&c.setAttribute("form",r.id),s.parentNode.insertBefore(c,s),r=new FormData(r),c.parentNode.removeChild(c),r}function jj(r,s,c,h,v){if(s==="submit"&&c&&c.stateNode===v){var w=mx((v[kn]||null).action),O=h.submitter;O&&(s=(s=O[kn]||null)?mx(s.formAction):O.getAttribute("formAction"),s!==null&&(w=s,O=null));var U=new gl("action","action",null,h,v);r.push({event:U,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(La!==0){var re=O?px(v,O):new FormData(v);Gp(c,{pending:!0,data:re,method:v.method,action:w},null,re)}}else typeof w=="function"&&(U.preventDefault(),re=O?px(v,O):new FormData(v),Gp(c,{pending:!0,data:re,method:v.method,action:w},w,re))},currentTarget:v}]})}}for(var E0=0;E0<ms.length;E0++){var T0=ms[E0],Nj=T0.toLowerCase(),Oj=T0[0].toUpperCase()+T0.slice(1);Rr(Nj,"on"+Oj)}Rr(Eo,"onAnimationEnd"),Rr(qd,"onAnimationIteration"),Rr(To,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(mp,"onTransitionRun"),Rr(Zd,"onTransitionStart"),Rr(pp,"onTransitionCancel"),Rr(xa,"onTransitionEnd"),Jn("onMouseEnter",["mouseout","mouseover"]),Jn("onMouseLeave",["mouseout","mouseover"]),Jn("onPointerEnter",["pointerout","pointerover"]),Jn("onPointerLeave",["pointerout","pointerover"]),yi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),yi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),yi("onBeforeInput",["compositionend","keypress","textInput","paste"]),yi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),yi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),yi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Dj=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(xu));function gx(r,s){s=(s&4)!==0;for(var c=0;c<r.length;c++){var h=r[c],v=h.event;h=h.listeners;e:{var w=void 0;if(s)for(var O=h.length-1;0<=O;O--){var U=h[O],re=U.instance,ye=U.currentTarget;if(U=U.listener,re!==w&&v.isPropagationStopped())break e;w=U,v.currentTarget=ye;try{w(v)}catch(Ae){ko(Ae)}v.currentTarget=null,w=re}else for(O=0;O<h.length;O++){if(U=h[O],re=U.instance,ye=U.currentTarget,U=U.listener,re!==w&&v.isPropagationStopped())break e;w=U,v.currentTarget=ye;try{w(v)}catch(Ae){ko(Ae)}v.currentTarget=null,w=re}}}}function vt(r,s){var c=s[bi];c===void 0&&(c=s[bi]=new Set);var h=r+"__bubble";c.has(h)||(bx(s,r,2,!1),c.add(h))}function k0(r,s,c){var h=0;s&&(h|=4),bx(c,r,h,s)}var Nh="_reactListening"+Math.random().toString(36).slice(2);function A0(r){if(!r[Nh]){r[Nh]=!0,aa.forEach(function(c){c!=="selectionchange"&&(Dj.has(c)||k0(c,!1,r),k0(c,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[Nh]||(s[Nh]=!0,k0("selectionchange",!1,s))}}function bx(r,s,c,h){switch(qx(s)){case 2:var v=sN;break;case 8:v=aN;break;default:v=H0}c=v.bind(null,s,c,r),v=void 0,!ho||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(v=!0),h?v!==void 0?r.addEventListener(s,c,{capture:!0,passive:v}):r.addEventListener(s,c,!0):v!==void 0?r.addEventListener(s,c,{passive:v}):r.addEventListener(s,c,!1)}function j0(r,s,c,h,v){var w=h;if((s&1)===0&&(s&2)===0&&h!==null)e:for(;;){if(h===null)return;var O=h.tag;if(O===3||O===4){var U=h.stateNode.containerInfo;if(U===v)break;if(O===4)for(O=h.return;O!==null;){var re=O.tag;if((re===3||re===4)&&O.stateNode.containerInfo===v)return;O=O.return}for(;U!==null;){if(O=dt(U),O===null)return;if(re=O.tag,re===5||re===6||re===26||re===27){h=w=O;continue e}U=U.parentNode}}h=h.return}$c(function(){var ye=w,Ae=uo(c),De=[];e:{var xe=Vd.get(r);if(xe!==void 0){var we=gl,qe=r;switch(r){case"keypress":if(fo(c)===0)break e;case"keydown":case"keyup":we=Rd;break;case"focusin":qe="focus",we=Uc;break;case"focusout":qe="blur",we=Uc;break;case"beforeblur":case"afterblur":we=Uc;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":we=Nd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":we=rp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":we=lp;break;case Eo:case qd:case To:we=Hc;break;case xa:we=Pd;break;case"scroll":case"scrollend":we=St;break;case"wheel":we=Ds;break;case"copy":case"cut":case"paste":we=xi;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":we=Ld;break;case"toggle":case"beforetoggle":we=go}var rt=(s&4)!==0,Gt=!rt&&(r==="scroll"||r==="scrollend"),ue=rt?xe!==null?xe+"Capture":null:xe;rt=[];for(var ae=ye,ge;ae!==null;){var Ne=ae;if(ge=Ne.stateNode,Ne=Ne.tag,Ne!==5&&Ne!==26&&Ne!==27||ge===null||ue===null||(Ne=Ns(ae,ue),Ne!=null&&rt.push(wu(ae,Ne,ge))),Gt)break;ae=ae.return}0<rt.length&&(xe=new we(xe,qe,null,c,Ae),De.push({event:xe,listeners:rt}))}}if((s&7)===0){e:{if(xe=r==="mouseover"||r==="pointerover",we=r==="mouseout"||r==="pointerout",xe&&c!==pl&&(qe=c.relatedTarget||c.fromElement)&&(dt(qe)||qe[Zr]))break e;if((we||xe)&&(xe=Ae.window===Ae?Ae:(xe=Ae.ownerDocument)?xe.defaultView||xe.parentWindow:window,we?(qe=c.relatedTarget||c.toElement,we=ye,qe=qe?dt(qe):null,qe!==null&&(Gt=l(qe),rt=qe.tag,qe!==Gt||rt!==5&&rt!==27&&rt!==6)&&(qe=null)):(we=null,qe=ye),we!==qe)){if(rt=Nd,Ne="onMouseLeave",ue="onMouseEnter",ae="mouse",(r==="pointerout"||r==="pointerover")&&(rt=Ld,Ne="onPointerLeave",ue="onPointerEnter",ae="pointer"),Gt=we==null?xe:mt(we),ge=qe==null?xe:mt(qe),xe=new rt(Ne,ae+"leave",we,c,Ae),xe.target=Gt,xe.relatedTarget=ge,Ne=null,dt(Ae)===ye&&(rt=new rt(ue,ae+"enter",qe,c,Ae),rt.target=ge,rt.relatedTarget=Gt,Ne=rt),Gt=Ne,we&&qe)t:{for(rt=Mj,ue=we,ae=qe,ge=0,Ne=ue;Ne;Ne=rt(Ne))ge++;Ne=0;for(var Qe=ae;Qe;Qe=rt(Qe))Ne++;for(;0<ge-Ne;)ue=rt(ue),ge--;for(;0<Ne-ge;)ae=rt(ae),Ne--;for(;ge--;){if(ue===ae||ae!==null&&ue===ae.alternate){rt=ue;break t}ue=rt(ue),ae=rt(ae)}rt=null}else rt=null;we!==null&&yx(De,xe,we,rt,!1),qe!==null&&Gt!==null&&yx(De,Gt,qe,rt,!0)}}e:{if(xe=ye?mt(ye):window,we=xe.nodeName&&xe.nodeName.toLowerCase(),we==="select"||we==="input"&&xe.type==="file")var Dt=_o;else if(wi(xe))if(Ud)Dt=fp;else{Dt=hp;var Ke=Yi}else we=xe.nodeName,!we||we.toLowerCase()!=="input"||xe.type!=="checkbox"&&xe.type!=="radio"?ye&&co(ye.elementType)&&(Dt=_o):Dt=ba;if(Dt&&(Dt=Dt(r,ye))){zd(De,Dt,c,Ae);break e}Ke&&Ke(r,xe,ye),r==="focusout"&&ye&&xe.type==="number"&&ye.memoizedProps.value!=null&&Hi(xe,"number",xe.value)}switch(Ke=ye?mt(ye):window,r){case"focusin":(wi(Ke)||Ke.contentEditable==="true")&&(hs=Ke,Tl=ye,So=null);break;case"focusout":So=Tl=hs=null;break;case"mousedown":va=!0;break;case"contextmenu":case"mouseup":case"dragend":va=!1,Fd(De,c,Ae);break;case"selectionchange":if(El)break;case"keydown":case"keyup":Fd(De,c,Ae)}var ft;if(yl)e:{switch(r){case"compositionstart":var Tt="onCompositionStart";break e;case"compositionend":Tt="onCompositionEnd";break e;case"compositionupdate":Tt="onCompositionUpdate";break e}Tt=void 0}else ma?Id(r,c)&&(Tt="onCompositionEnd"):r==="keydown"&&c.keyCode===229&&(Tt="onCompositionStart");Tt&&(vl&&c.locale!=="ko"&&(ma||Tt!=="onCompositionStart"?Tt==="onCompositionEnd"&&ma&&(ft=cs()):(_i=Ae,Os="value"in _i?_i.value:_i.textContent,ma=!0)),Ke=Oh(ye,Tt),0<Ke.length&&(Tt=new Gc(Tt,r,null,c,Ae),De.push({event:Tt,listeners:Ke}),ft?Tt.data=ft:(ft=Zc(c),ft!==null&&(Tt.data=ft)))),(ft=up?Xr(r,c):pa(r,c))&&(Tt=Oh(ye,"onBeforeInput"),0<Tt.length&&(Ke=new Gc("onBeforeInput","beforeinput",null,c,Ae),De.push({event:Ke,listeners:Tt}),Ke.data=ft)),jj(De,r,ye,c,Ae)}gx(De,s)})}function wu(r,s,c){return{instance:r,listener:s,currentTarget:c}}function Oh(r,s){for(var c=s+"Capture",h=[];r!==null;){var v=r,w=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||w===null||(v=Ns(r,c),v!=null&&h.unshift(wu(r,v,w)),v=Ns(r,s),v!=null&&h.push(wu(r,v,w))),r.tag===3)return h;r=r.return}return[]}function Mj(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function yx(r,s,c,h,v){for(var w=s._reactName,O=[];c!==null&&c!==h;){var U=c,re=U.alternate,ye=U.stateNode;if(U=U.tag,re!==null&&re===h)break;U!==5&&U!==26&&U!==27||ye===null||(re=ye,v?(ye=Ns(c,w),ye!=null&&O.unshift(wu(c,ye,re))):v||(ye=Ns(c,w),ye!=null&&O.push(wu(c,ye,re)))),c=c.return}O.length!==0&&r.push({event:s,listeners:O})}var Cj=/\r\n?/g,Rj=/\u0000|\uFFFD/g;function vx(r){return(typeof r=="string"?r:""+r).replace(Cj,`
`).replace(Rj,"")}function _x(r,s){return s=vx(s),vx(r)===s}function Ht(r,s,c,h,v,w){switch(c){case"children":typeof h=="string"?s==="body"||s==="textarea"&&h===""||vi(r,h):(typeof h=="number"||typeof h=="bigint")&&s!=="body"&&vi(r,""+h);break;case"className":zt(r,"class",h);break;case"tabIndex":zt(r,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":zt(r,c,h);break;case"style":fl(r,h,w);break;case"data":if(s!=="object"){zt(r,"data",h);break}case"src":case"href":if(h===""&&(s!=="a"||c!=="href")){r.removeAttribute(c);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){r.removeAttribute(c);break}h=ua(""+h),r.setAttribute(c,h);break;case"action":case"formAction":if(typeof h=="function"){r.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(c==="formAction"?(s!=="input"&&Ht(r,s,"name",v.name,v,null),Ht(r,s,"formEncType",v.formEncType,v,null),Ht(r,s,"formMethod",v.formMethod,v,null),Ht(r,s,"formTarget",v.formTarget,v,null)):(Ht(r,s,"encType",v.encType,v,null),Ht(r,s,"method",v.method,v,null),Ht(r,s,"target",v.target,v,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){r.removeAttribute(c);break}h=ua(""+h),r.setAttribute(c,h);break;case"onClick":h!=null&&(r.onclick=Mr);break;case"onScroll":h!=null&&vt("scroll",r);break;case"onScrollEnd":h!=null&&vt("scrollend",r);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(c=h.__html,c!=null){if(v.children!=null)throw Error(i(60));r.innerHTML=c}}break;case"multiple":r.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":r.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){r.removeAttribute("xlink:href");break}c=ua(""+h),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?r.setAttribute(c,""+h):r.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?r.setAttribute(c,""):r.removeAttribute(c);break;case"capture":case"download":h===!0?r.setAttribute(c,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?r.setAttribute(c,h):r.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?r.setAttribute(c,h):r.removeAttribute(c);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?r.removeAttribute(c):r.setAttribute(c,h);break;case"popover":vt("beforetoggle",r),vt("toggle",r),gt(r,"popover",h);break;case"xlinkActuate":Dr(r,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":Dr(r,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":Dr(r,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":Dr(r,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":Dr(r,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":Dr(r,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":Dr(r,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":Dr(r,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":Dr(r,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":gt(r,"is",h);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=ml.get(c)||c,gt(r,c,h))}}function N0(r,s,c,h,v,w){switch(c){case"style":fl(r,h,w);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(c=h.__html,c!=null){if(v.children!=null)throw Error(i(60));r.innerHTML=c}}break;case"children":typeof h=="string"?vi(r,h):(typeof h=="number"||typeof h=="bigint")&&vi(r,""+h);break;case"onScroll":h!=null&&vt("scroll",r);break;case"onScrollEnd":h!=null&&vt("scrollend",r);break;case"onClick":h!=null&&(r.onclick=Mr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!io.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(v=c.endsWith("Capture"),s=c.slice(2,v?c.length-7:void 0),w=r[kn]||null,w=w!=null?w[c]:null,typeof w=="function"&&r.removeEventListener(s,w,v),typeof h=="function")){typeof w!="function"&&w!==null&&(c in r?r[c]=null:r.hasAttribute(c)&&r.removeAttribute(c)),r.addEventListener(s,h,v);break e}c in r?r[c]=h:h===!0?r.setAttribute(c,""):gt(r,c,h)}}}function nr(r,s,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":vt("error",r),vt("load",r);var h=!1,v=!1,w;for(w in c)if(c.hasOwnProperty(w)){var O=c[w];if(O!=null)switch(w){case"src":h=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Ht(r,s,w,O,c,null)}}v&&Ht(r,s,"srcSet",c.srcSet,c,null),h&&Ht(r,s,"src",c.src,c,null);return;case"input":vt("invalid",r);var U=w=O=v=null,re=null,ye=null;for(h in c)if(c.hasOwnProperty(h)){var Ae=c[h];if(Ae!=null)switch(h){case"name":v=Ae;break;case"type":O=Ae;break;case"checked":re=Ae;break;case"defaultChecked":ye=Ae;break;case"value":w=Ae;break;case"defaultValue":U=Ae;break;case"children":case"dangerouslySetInnerHTML":if(Ae!=null)throw Error(i(137,s));break;default:Ht(r,s,h,Ae,c,null)}}lo(r,w,U,re,ye,O,v,!1);return;case"select":vt("invalid",r),h=O=w=null;for(v in c)if(c.hasOwnProperty(v)&&(U=c[v],U!=null))switch(v){case"value":w=U;break;case"defaultValue":O=U;break;case"multiple":h=U;default:Ht(r,s,v,U,c,null)}s=w,c=O,r.multiple=!!h,s!=null?Yt(r,!!h,s,!1):c!=null&&Yt(r,!!h,c,!0);return;case"textarea":vt("invalid",r),w=v=h=null;for(O in c)if(c.hasOwnProperty(O)&&(U=c[O],U!=null))switch(O){case"value":h=U;break;case"defaultValue":v=U;break;case"children":w=U;break;case"dangerouslySetInnerHTML":if(U!=null)throw Error(i(91));break;default:Ht(r,s,O,U,c,null)}la(r,h,v,w);return;case"option":for(re in c)if(c.hasOwnProperty(re)&&(h=c[re],h!=null))switch(re){case"selected":r.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:Ht(r,s,re,h,c,null)}return;case"dialog":vt("beforetoggle",r),vt("toggle",r),vt("cancel",r),vt("close",r);break;case"iframe":case"object":vt("load",r);break;case"video":case"audio":for(h=0;h<xu.length;h++)vt(xu[h],r);break;case"image":vt("error",r),vt("load",r);break;case"details":vt("toggle",r);break;case"embed":case"source":case"link":vt("error",r),vt("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ye in c)if(c.hasOwnProperty(ye)&&(h=c[ye],h!=null))switch(ye){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Ht(r,s,ye,h,c,null)}return;default:if(co(s)){for(Ae in c)c.hasOwnProperty(Ae)&&(h=c[Ae],h!==void 0&&N0(r,s,Ae,h,c,void 0));return}}for(U in c)c.hasOwnProperty(U)&&(h=c[U],h!=null&&Ht(r,s,U,h,c,null))}function Lj(r,s,c,h){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,w=null,O=null,U=null,re=null,ye=null,Ae=null;for(we in c){var De=c[we];if(c.hasOwnProperty(we)&&De!=null)switch(we){case"checked":break;case"value":break;case"defaultValue":re=De;default:h.hasOwnProperty(we)||Ht(r,s,we,null,h,De)}}for(var xe in h){var we=h[xe];if(De=c[xe],h.hasOwnProperty(xe)&&(we!=null||De!=null))switch(xe){case"type":w=we;break;case"name":v=we;break;case"checked":ye=we;break;case"defaultChecked":Ae=we;break;case"value":O=we;break;case"defaultValue":U=we;break;case"children":case"dangerouslySetInnerHTML":if(we!=null)throw Error(i(137,s));break;default:we!==De&&Ht(r,s,xe,we,h,De)}}Lc(r,O,U,re,ye,Ae,w,v);return;case"select":we=O=U=xe=null;for(w in c)if(re=c[w],c.hasOwnProperty(w)&&re!=null)switch(w){case"value":break;case"multiple":we=re;default:h.hasOwnProperty(w)||Ht(r,s,w,null,h,re)}for(v in h)if(w=h[v],re=c[v],h.hasOwnProperty(v)&&(w!=null||re!=null))switch(v){case"value":xe=w;break;case"defaultValue":U=w;break;case"multiple":O=w;default:w!==re&&Ht(r,s,v,w,h,re)}s=U,c=O,h=we,xe!=null?Yt(r,!!c,xe,!1):!!h!=!!c&&(s!=null?Yt(r,!!c,s,!0):Yt(r,!!c,c?[]:"",!1));return;case"textarea":we=xe=null;for(U in c)if(v=c[U],c.hasOwnProperty(U)&&v!=null&&!h.hasOwnProperty(U))switch(U){case"value":break;case"children":break;default:Ht(r,s,U,null,h,v)}for(O in h)if(v=h[O],w=c[O],h.hasOwnProperty(O)&&(v!=null||w!=null))switch(O){case"value":xe=v;break;case"defaultValue":we=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(i(91));break;default:v!==w&&Ht(r,s,O,v,h,w)}ls(r,xe,we);return;case"option":for(var qe in c)if(xe=c[qe],c.hasOwnProperty(qe)&&xe!=null&&!h.hasOwnProperty(qe))switch(qe){case"selected":r.selected=!1;break;default:Ht(r,s,qe,null,h,xe)}for(re in h)if(xe=h[re],we=c[re],h.hasOwnProperty(re)&&xe!==we&&(xe!=null||we!=null))switch(re){case"selected":r.selected=xe&&typeof xe!="function"&&typeof xe!="symbol";break;default:Ht(r,s,re,xe,h,we)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var rt in c)xe=c[rt],c.hasOwnProperty(rt)&&xe!=null&&!h.hasOwnProperty(rt)&&Ht(r,s,rt,null,h,xe);for(ye in h)if(xe=h[ye],we=c[ye],h.hasOwnProperty(ye)&&xe!==we&&(xe!=null||we!=null))switch(ye){case"children":case"dangerouslySetInnerHTML":if(xe!=null)throw Error(i(137,s));break;default:Ht(r,s,ye,xe,h,we)}return;default:if(co(s)){for(var Gt in c)xe=c[Gt],c.hasOwnProperty(Gt)&&xe!==void 0&&!h.hasOwnProperty(Gt)&&N0(r,s,Gt,void 0,h,xe);for(Ae in h)xe=h[Ae],we=c[Ae],!h.hasOwnProperty(Ae)||xe===we||xe===void 0&&we===void 0||N0(r,s,Ae,xe,h,we);return}}for(var ue in c)xe=c[ue],c.hasOwnProperty(ue)&&xe!=null&&!h.hasOwnProperty(ue)&&Ht(r,s,ue,null,h,xe);for(De in h)xe=h[De],we=c[De],!h.hasOwnProperty(De)||xe===we||xe==null&&we==null||Ht(r,s,De,xe,h,we)}function xx(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Bj(){if(typeof performance.getEntriesByType=="function"){for(var r=0,s=0,c=performance.getEntriesByType("resource"),h=0;h<c.length;h++){var v=c[h],w=v.transferSize,O=v.initiatorType,U=v.duration;if(w&&U&&xx(O)){for(O=0,U=v.responseEnd,h+=1;h<c.length;h++){var re=c[h],ye=re.startTime;if(ye>U)break;var Ae=re.transferSize,De=re.initiatorType;Ae&&xx(De)&&(re=re.responseEnd,O+=Ae*(re<U?1:(U-ye)/(re-ye)))}if(--h,s+=8*(w+O)/(v.duration/1e3),r++,10<r)break}}if(0<r)return s/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var O0=null,D0=null;function Dh(r){return r.nodeType===9?r:r.ownerDocument}function wx(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Sx(r,s){if(r===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&s==="foreignObject"?0:r}function M0(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var C0=null;function Pj(){var r=window.event;return r&&r.type==="popstate"?r===C0?!1:(C0=r,!0):(C0=null,!1)}var Ex=typeof setTimeout=="function"?setTimeout:void 0,$j=typeof clearTimeout=="function"?clearTimeout:void 0,Tx=typeof Promise=="function"?Promise:void 0,Ij=typeof queueMicrotask=="function"?queueMicrotask:typeof Tx<"u"?function(r){return Tx.resolve(null).then(r).catch(zj)}:Ex;function zj(r){setTimeout(function(){throw r})}function Ba(r){return r==="head"}function kx(r,s){var c=s,h=0;do{var v=c.nextSibling;if(r.removeChild(c),v&&v.nodeType===8)if(c=v.data,c==="/$"||c==="/&"){if(h===0){r.removeChild(v),Xl(s);return}h--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")h++;else if(c==="html")Su(r.ownerDocument.documentElement);else if(c==="head"){c=r.ownerDocument.head,Su(c);for(var w=c.firstChild;w;){var O=w.nextSibling,U=w.nodeName;w[pt]||U==="SCRIPT"||U==="STYLE"||U==="LINK"&&w.rel.toLowerCase()==="stylesheet"||c.removeChild(w),w=O}}else c==="body"&&Su(r.ownerDocument.body);c=v}while(c);Xl(s)}function Ax(r,s){var c=r;r=0;do{var h=c.nextSibling;if(c.nodeType===1?s?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(s?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),h&&h.nodeType===8)if(c=h.data,c==="/$"){if(r===0)break;r--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||r++;c=h}while(c)}function R0(r){var s=r.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var c=s;switch(s=s.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":R0(c),nt(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}r.removeChild(c)}}function Uj(r,s,c,h){for(;r.nodeType===1;){var v=c;if(r.nodeName.toLowerCase()!==s.toLowerCase()){if(!h&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(h){if(!r[pt])switch(s){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(w=r.getAttribute("rel"),w==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(w!==v.rel||r.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||r.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||r.getAttribute("title")!==(v.title==null?null:v.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(w=r.getAttribute("src"),(w!==(v.src==null?null:v.src)||r.getAttribute("type")!==(v.type==null?null:v.type)||r.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&w&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(s==="input"&&r.type==="hidden"){var w=v.name==null?null:""+v.name;if(v.type==="hidden"&&r.getAttribute("name")===w)return r}else return r;if(r=ji(r.nextSibling),r===null)break}return null}function Hj(r,s,c){if(s==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!c||(r=ji(r.nextSibling),r===null))return null;return r}function jx(r,s){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!s||(r=ji(r.nextSibling),r===null))return null;return r}function L0(r){return r.data==="$?"||r.data==="$~"}function B0(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function Gj(r,s){var c=r.ownerDocument;if(r.data==="$~")r._reactRetry=s;else if(r.data!=="$?"||c.readyState!=="loading")s();else{var h=function(){s(),c.removeEventListener("DOMContentLoaded",h)};c.addEventListener("DOMContentLoaded",h),r._reactRetry=h}}function ji(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return r}var P0=null;function Nx(r){r=r.nextSibling;for(var s=0;r;){if(r.nodeType===8){var c=r.data;if(c==="/$"||c==="/&"){if(s===0)return ji(r.nextSibling);s--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||s++}r=r.nextSibling}return null}function Ox(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var c=r.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(s===0)return r;s--}else c!=="/$"&&c!=="/&"||s++}r=r.previousSibling}return null}function Dx(r,s,c){switch(s=Dh(c),r){case"html":if(r=s.documentElement,!r)throw Error(i(452));return r;case"head":if(r=s.head,!r)throw Error(i(453));return r;case"body":if(r=s.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function Su(r){for(var s=r.attributes;s.length;)r.removeAttributeNode(s[0]);nt(r)}var Ni=new Map,Mx=new Set;function Mh(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var qs=le.d;le.d={f:Fj,r:Yj,D:qj,C:Zj,L:Vj,m:Kj,X:Xj,S:Wj,M:Jj};function Fj(){var r=qs.f(),s=Sh();return r||s}function Yj(r){var s=xt(r);s!==null&&s.tag===5&&s.type==="form"?Kv(s):qs.r(r)}var Vl=typeof document>"u"?null:document;function Cx(r,s,c){var h=Vl;if(h&&typeof s=="string"&&s){var v=en(s);v='link[rel="'+r+'"][href="'+v+'"]',typeof c=="string"&&(v+='[crossorigin="'+c+'"]'),Mx.has(v)||(Mx.add(v),r={rel:r,crossOrigin:c,href:s},h.querySelector(v)===null&&(s=h.createElement("link"),nr(s,"link",r),wt(s),h.head.appendChild(s)))}}function qj(r){qs.D(r),Cx("dns-prefetch",r,null)}function Zj(r,s){qs.C(r,s),Cx("preconnect",r,s)}function Vj(r,s,c){qs.L(r,s,c);var h=Vl;if(h&&r&&s){var v='link[rel="preload"][as="'+en(s)+'"]';s==="image"&&c&&c.imageSrcSet?(v+='[imagesrcset="'+en(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(v+='[imagesizes="'+en(c.imageSizes)+'"]')):v+='[href="'+en(r)+'"]';var w=v;switch(s){case"style":w=Kl(r);break;case"script":w=Wl(r)}Ni.has(w)||(r=_({rel:"preload",href:s==="image"&&c&&c.imageSrcSet?void 0:r,as:s},c),Ni.set(w,r),h.querySelector(v)!==null||s==="style"&&h.querySelector(Eu(w))||s==="script"&&h.querySelector(Tu(w))||(s=h.createElement("link"),nr(s,"link",r),wt(s),h.head.appendChild(s)))}}function Kj(r,s){qs.m(r,s);var c=Vl;if(c&&r){var h=s&&typeof s.as=="string"?s.as:"script",v='link[rel="modulepreload"][as="'+en(h)+'"][href="'+en(r)+'"]',w=v;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=Wl(r)}if(!Ni.has(w)&&(r=_({rel:"modulepreload",href:r},s),Ni.set(w,r),c.querySelector(v)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Tu(w)))return}h=c.createElement("link"),nr(h,"link",r),wt(h),c.head.appendChild(h)}}}function Wj(r,s,c){qs.S(r,s,c);var h=Vl;if(h&&r){var v=In(h).hoistableStyles,w=Kl(r);s=s||"default";var O=v.get(w);if(!O){var U={loading:0,preload:null};if(O=h.querySelector(Eu(w)))U.loading=5;else{r=_({rel:"stylesheet",href:r,"data-precedence":s},c),(c=Ni.get(w))&&$0(r,c);var re=O=h.createElement("link");wt(re),nr(re,"link",r),re._p=new Promise(function(ye,Ae){re.onload=ye,re.onerror=Ae}),re.addEventListener("load",function(){U.loading|=1}),re.addEventListener("error",function(){U.loading|=2}),U.loading|=4,Ch(O,s,h)}O={type:"stylesheet",instance:O,count:1,state:U},v.set(w,O)}}}function Xj(r,s){qs.X(r,s);var c=Vl;if(c&&r){var h=In(c).hoistableScripts,v=Wl(r),w=h.get(v);w||(w=c.querySelector(Tu(v)),w||(r=_({src:r,async:!0},s),(s=Ni.get(v))&&I0(r,s),w=c.createElement("script"),wt(w),nr(w,"link",r),c.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},h.set(v,w))}}function Jj(r,s){qs.M(r,s);var c=Vl;if(c&&r){var h=In(c).hoistableScripts,v=Wl(r),w=h.get(v);w||(w=c.querySelector(Tu(v)),w||(r=_({src:r,async:!0,type:"module"},s),(s=Ni.get(v))&&I0(r,s),w=c.createElement("script"),wt(w),nr(w,"link",r),c.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},h.set(v,w))}}function Rx(r,s,c,h){var v=(v=X.current)?Mh(v):null;if(!v)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(s=Kl(c.href),c=In(v).hoistableStyles,h=c.get(s),h||(h={type:"style",instance:null,count:0,state:null},c.set(s,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){r=Kl(c.href);var w=In(v).hoistableStyles,O=w.get(r);if(O||(v=v.ownerDocument||v,O={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(r,O),(w=v.querySelector(Eu(r)))&&!w._p&&(O.instance=w,O.state.loading=5),Ni.has(r)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},Ni.set(r,c),w||Qj(v,r,c,O.state))),s&&h===null)throw Error(i(528,""));return O}if(s&&h!==null)throw Error(i(529,""));return null;case"script":return s=c.async,c=c.src,typeof c=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Wl(c),c=In(v).hoistableScripts,h=c.get(s),h||(h={type:"script",instance:null,count:0,state:null},c.set(s,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function Kl(r){return'href="'+en(r)+'"'}function Eu(r){return'link[rel="stylesheet"]['+r+"]"}function Lx(r){return _({},r,{"data-precedence":r.precedence,precedence:null})}function Qj(r,s,c,h){r.querySelector('link[rel="preload"][as="style"]['+s+"]")?h.loading=1:(s=r.createElement("link"),h.preload=s,s.addEventListener("load",function(){return h.loading|=1}),s.addEventListener("error",function(){return h.loading|=2}),nr(s,"link",c),wt(s),r.head.appendChild(s))}function Wl(r){return'[src="'+en(r)+'"]'}function Tu(r){return"script[async]"+r}function Bx(r,s,c){if(s.count++,s.instance===null)switch(s.type){case"style":var h=r.querySelector('style[data-href~="'+en(c.href)+'"]');if(h)return s.instance=h,wt(h),h;var v=_({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return h=(r.ownerDocument||r).createElement("style"),wt(h),nr(h,"style",v),Ch(h,c.precedence,r),s.instance=h;case"stylesheet":v=Kl(c.href);var w=r.querySelector(Eu(v));if(w)return s.state.loading|=4,s.instance=w,wt(w),w;h=Lx(c),(v=Ni.get(v))&&$0(h,v),w=(r.ownerDocument||r).createElement("link"),wt(w);var O=w;return O._p=new Promise(function(U,re){O.onload=U,O.onerror=re}),nr(w,"link",h),s.state.loading|=4,Ch(w,c.precedence,r),s.instance=w;case"script":return w=Wl(c.src),(v=r.querySelector(Tu(w)))?(s.instance=v,wt(v),v):(h=c,(v=Ni.get(w))&&(h=_({},c),I0(h,v)),r=r.ownerDocument||r,v=r.createElement("script"),wt(v),nr(v,"link",h),r.head.appendChild(v),s.instance=v);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(h=s.instance,s.state.loading|=4,Ch(h,c.precedence,r));return s.instance}function Ch(r,s,c){for(var h=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=h.length?h[h.length-1]:null,w=v,O=0;O<h.length;O++){var U=h[O];if(U.dataset.precedence===s)w=U;else if(w!==v)break}w?w.parentNode.insertBefore(r,w.nextSibling):(s=c.nodeType===9?c.head:c,s.insertBefore(r,s.firstChild))}function $0(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.title==null&&(r.title=s.title)}function I0(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.integrity==null&&(r.integrity=s.integrity)}var Rh=null;function Px(r,s,c){if(Rh===null){var h=new Map,v=Rh=new Map;v.set(c,h)}else v=Rh,h=v.get(c),h||(h=new Map,v.set(c,h));if(h.has(r))return h;for(h.set(r,null),c=c.getElementsByTagName(r),v=0;v<c.length;v++){var w=c[v];if(!(w[pt]||w[sn]||r==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var O=w.getAttribute(s)||"";O=r+O;var U=h.get(O);U?U.push(w):h.set(O,[w])}}return h}function $x(r,s,c){r=r.ownerDocument||r,r.head.insertBefore(c,s==="title"?r.querySelector("head > title"):null)}function eN(r,s,c){if(c===1||s.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return r=s.disabled,typeof s.precedence=="string"&&r==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Ix(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function tN(r,s,c,h){if(c.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var v=Kl(h.href),w=s.querySelector(Eu(v));if(w){s=w._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(r.count++,r=Lh.bind(r),s.then(r,r)),c.state.loading|=4,c.instance=w,wt(w);return}w=s.ownerDocument||s,h=Lx(h),(v=Ni.get(v))&&$0(h,v),w=w.createElement("link"),wt(w);var O=w;O._p=new Promise(function(U,re){O.onload=U,O.onerror=re}),nr(w,"link",h),c.instance=w}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(c,s),(s=c.state.preload)&&(c.state.loading&3)===0&&(r.count++,c=Lh.bind(r),s.addEventListener("load",c),s.addEventListener("error",c))}}var z0=0;function nN(r,s){return r.stylesheets&&r.count===0&&Ph(r,r.stylesheets),0<r.count||0<r.imgCount?function(c){var h=setTimeout(function(){if(r.stylesheets&&Ph(r,r.stylesheets),r.unsuspend){var w=r.unsuspend;r.unsuspend=null,w()}},6e4+s);0<r.imgBytes&&z0===0&&(z0=62500*Bj());var v=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&Ph(r,r.stylesheets),r.unsuspend)){var w=r.unsuspend;r.unsuspend=null,w()}},(r.imgBytes>z0?50:800)+s);return r.unsuspend=c,function(){r.unsuspend=null,clearTimeout(h),clearTimeout(v)}}:null}function Lh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ph(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Bh=null;function Ph(r,s){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Bh=new Map,s.forEach(rN,r),Bh=null,Lh.call(r))}function rN(r,s){if(!(s.state.loading&4)){var c=Bh.get(r);if(c)var h=c.get(null);else{c=new Map,Bh.set(r,c);for(var v=r.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<v.length;w++){var O=v[w];(O.nodeName==="LINK"||O.getAttribute("media")!=="not all")&&(c.set(O.dataset.precedence,O),h=O)}h&&c.set(null,h)}v=s.instance,O=v.getAttribute("data-precedence"),w=c.get(O)||h,w===h&&c.set(null,v),c.set(O,v),this.count++,h=Lh.bind(this),v.addEventListener("load",h),v.addEventListener("error",h),w?w.parentNode.insertBefore(v,w.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(v,r.firstChild)),s.state.loading|=4}}var ku={$$typeof:N,Provider:null,Consumer:null,_currentValue:te,_currentValue2:te,_threadCount:0};function iN(r,s,c,h,v,w,O,U,re){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=eo(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=eo(0),this.hiddenUpdates=eo(null),this.identifierPrefix=h,this.onUncaughtError=v,this.onCaughtError=w,this.onRecoverableError=O,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=re,this.incompleteTransitions=new Map}function zx(r,s,c,h,v,w,O,U,re,ye,Ae,De){return r=new iN(r,s,c,O,re,ye,Ae,De,U),s=1,w===!0&&(s|=24),w=hr(3,null,null,s),r.current=w,w.stateNode=r,s=vp(),s.refCount++,r.pooledCache=s,s.refCount++,w.memoizedState={element:h,isDehydrated:c,cache:s},Sp(w),r}function Ux(r){return r?(r=Ms,r):Ms}function Hx(r,s,c,h,v,w){v=Ux(v),h.context===null?h.context=v:h.pendingContext=v,h=Ta(s),h.payload={element:c},w=w===void 0?null:w,w!==null&&(h.callback=w),c=ka(r,h,s),c!==null&&(Ur(c,r,s),iu(c,r,s))}function Gx(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var c=r.retryLane;r.retryLane=c!==0&&c<s?c:s}}function U0(r,s){Gx(r,s),(r=r.alternate)&&Gx(r,s)}function Fx(r){if(r.tag===13||r.tag===31){var s=Ti(r,67108864);s!==null&&Ur(s,r,67108864),U0(r,67108864)}}function Yx(r){if(r.tag===13||r.tag===31){var s=ni();s=$n(s);var c=Ti(r,s);c!==null&&Ur(c,r,s),U0(r,s)}}var $h=!0;function sN(r,s,c,h){var v=J.T;J.T=null;var w=le.p;try{le.p=2,H0(r,s,c,h)}finally{le.p=w,J.T=v}}function aN(r,s,c,h){var v=J.T;J.T=null;var w=le.p;try{le.p=8,H0(r,s,c,h)}finally{le.p=w,J.T=v}}function H0(r,s,c,h){if($h){var v=G0(h);if(v===null)j0(r,s,h,Ih,c),Zx(r,h);else if(lN(v,r,s,c,h))h.stopPropagation();else if(Zx(r,h),s&4&&-1<oN.indexOf(r)){for(;v!==null;){var w=xt(v);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var O=Nr(w.pendingLanes);if(O!==0){var U=w;for(U.pendingLanes|=2,U.entangledLanes|=2;O;){var re=1<<31-hn(O);U.entanglements[1]|=re,O&=~re}_s(w),(Rt&6)===0&&(xh=He()+500,_u(0))}}break;case 31:case 13:U=Ti(w,2),U!==null&&Ur(U,w,2),Sh(),U0(w,2)}if(w=G0(h),w===null&&j0(r,s,h,Ih,c),w===v)break;v=w}v!==null&&h.stopPropagation()}else j0(r,s,h,null,c)}}function G0(r){return r=uo(r),F0(r)}var Ih=null;function F0(r){if(Ih=null,r=dt(r),r!==null){var s=l(r);if(s===null)r=null;else{var c=s.tag;if(c===13){if(r=u(s),r!==null)return r;r=null}else if(c===31){if(r=f(s),r!==null)return r;r=null}else if(c===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null)}}return Ih=r,null}function qx(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Be()){case tt:return 2;case et:return 8;case Zt:case On:return 32;case En:return 268435456;default:return 32}default:return 32}}var Y0=!1,Pa=null,$a=null,Ia=null,Au=new Map,ju=new Map,za=[],oN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Zx(r,s){switch(r){case"focusin":case"focusout":Pa=null;break;case"dragenter":case"dragleave":$a=null;break;case"mouseover":case"mouseout":Ia=null;break;case"pointerover":case"pointerout":Au.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":ju.delete(s.pointerId)}}function Nu(r,s,c,h,v,w){return r===null||r.nativeEvent!==w?(r={blockedOn:s,domEventName:c,eventSystemFlags:h,nativeEvent:w,targetContainers:[v]},s!==null&&(s=xt(s),s!==null&&Fx(s)),r):(r.eventSystemFlags|=h,s=r.targetContainers,v!==null&&s.indexOf(v)===-1&&s.push(v),r)}function lN(r,s,c,h,v){switch(s){case"focusin":return Pa=Nu(Pa,r,s,c,h,v),!0;case"dragenter":return $a=Nu($a,r,s,c,h,v),!0;case"mouseover":return Ia=Nu(Ia,r,s,c,h,v),!0;case"pointerover":var w=v.pointerId;return Au.set(w,Nu(Au.get(w)||null,r,s,c,h,v)),!0;case"gotpointercapture":return w=v.pointerId,ju.set(w,Nu(ju.get(w)||null,r,s,c,h,v)),!0}return!1}function Vx(r){var s=dt(r.target);if(s!==null){var c=l(s);if(c!==null){if(s=c.tag,s===13){if(s=u(c),s!==null){r.blockedOn=s,Or(r.priority,function(){Yx(c)});return}}else if(s===31){if(s=f(c),s!==null){r.blockedOn=s,Or(r.priority,function(){Yx(c)});return}}else if(s===3&&c.stateNode.current.memoizedState.isDehydrated){r.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}r.blockedOn=null}function zh(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var c=G0(r.nativeEvent);if(c===null){c=r.nativeEvent;var h=new c.constructor(c.type,c);pl=h,c.target.dispatchEvent(h),pl=null}else return s=xt(c),s!==null&&Fx(s),r.blockedOn=c,!1;s.shift()}return!0}function Kx(r,s,c){zh(r)&&c.delete(s)}function cN(){Y0=!1,Pa!==null&&zh(Pa)&&(Pa=null),$a!==null&&zh($a)&&($a=null),Ia!==null&&zh(Ia)&&(Ia=null),Au.forEach(Kx),ju.forEach(Kx)}function Uh(r,s){r.blockedOn===s&&(r.blockedOn=null,Y0||(Y0=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,cN)))}var Hh=null;function Wx(r){Hh!==r&&(Hh=r,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Hh===r&&(Hh=null);for(var s=0;s<r.length;s+=3){var c=r[s],h=r[s+1],v=r[s+2];if(typeof h!="function"){if(F0(h||c)===null)continue;break}var w=xt(c);w!==null&&(r.splice(s,3),s-=3,Gp(w,{pending:!0,data:v,method:c.method,action:h},h,v))}}))}function Xl(r){function s(re){return Uh(re,r)}Pa!==null&&Uh(Pa,r),$a!==null&&Uh($a,r),Ia!==null&&Uh(Ia,r),Au.forEach(s),ju.forEach(s);for(var c=0;c<za.length;c++){var h=za[c];h.blockedOn===r&&(h.blockedOn=null)}for(;0<za.length&&(c=za[0],c.blockedOn===null);)Vx(c),c.blockedOn===null&&za.shift();if(c=(r.ownerDocument||r).$$reactFormReplay,c!=null)for(h=0;h<c.length;h+=3){var v=c[h],w=c[h+1],O=v[kn]||null;if(typeof w=="function")O||Wx(c);else if(O){var U=null;if(w&&w.hasAttribute("formAction")){if(v=w,O=w[kn]||null)U=O.formAction;else if(F0(v)!==null)continue}else U=O.action;typeof U=="function"?c[h+1]=U:(c.splice(h,3),h-=3),Wx(c)}}}function Xx(){function r(w){w.canIntercept&&w.info==="react-transition"&&w.intercept({handler:function(){return new Promise(function(O){return v=O})},focusReset:"manual",scroll:"manual"})}function s(){v!==null&&(v(),v=null),h||setTimeout(c,20)}function c(){if(!h&&!navigation.transition){var w=navigation.currentEntry;w&&w.url!=null&&navigation.navigate(w.url,{state:w.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var h=!1,v=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(c,100),function(){h=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),v!==null&&(v(),v=null)}}}function q0(r){this._internalRoot=r}Gh.prototype.render=q0.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(i(409));var c=s.current,h=ni();Hx(c,h,r,s,null,null)},Gh.prototype.unmount=q0.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;Hx(r.current,2,null,r,null,null),Sh(),s[Zr]=null}};function Gh(r){this._internalRoot=r}Gh.prototype.unstable_scheduleHydration=function(r){if(r){var s=ks();r={blockedOn:null,target:r,priority:s};for(var c=0;c<za.length&&s!==0&&s<za[c].priority;c++);za.splice(c,0,r),c===0&&Vx(r)}};var Jx=t.version;if(Jx!=="19.2.1")throw Error(i(527,Jx,"19.2.1"));le.findDOMNode=function(r){var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=p(s),r=r!==null?y(r):null,r=r===null?null:r.stateNode,r};var uN={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:J,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fh.isDisabled&&Fh.supportsFiber)try{dn=Fh.inject(uN),Ct=Fh}catch{}}return Du.createRoot=function(r,s){if(!o(r))throw Error(i(299));var c=!1,h="",v=s_,w=a_,O=o_;return s!=null&&(s.unstable_strictMode===!0&&(c=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onUncaughtError!==void 0&&(v=s.onUncaughtError),s.onCaughtError!==void 0&&(w=s.onCaughtError),s.onRecoverableError!==void 0&&(O=s.onRecoverableError)),s=zx(r,1,!1,null,null,c,h,null,v,w,O,Xx),r[Zr]=s.current,A0(r),new q0(s)},Du.hydrateRoot=function(r,s,c){if(!o(r))throw Error(i(299));var h=!1,v="",w=s_,O=a_,U=o_,re=null;return c!=null&&(c.unstable_strictMode===!0&&(h=!0),c.identifierPrefix!==void 0&&(v=c.identifierPrefix),c.onUncaughtError!==void 0&&(w=c.onUncaughtError),c.onCaughtError!==void 0&&(O=c.onCaughtError),c.onRecoverableError!==void 0&&(U=c.onRecoverableError),c.formState!==void 0&&(re=c.formState)),s=zx(r,1,!0,s,c??null,h,v,re,w,O,U,Xx),s.context=Ux(null),c=s.current,h=ni(),h=$n(h),v=Ta(h),v.callback=null,ka(c,v,h),c=h,s.current.lanes=c,Ui(s,c),_s(s),r[Zr]=s.current,A0(r),new Gh(s)},Du.version="19.2.1",Du}var lw;function vN(){if(lw)return K0.exports;lw=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),K0.exports=yN(),K0.exports}var _N=vN();let xN={data:""},wN=e=>typeof window=="object"?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||xN,SN=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,EN=/\/\*[^]*?\*\/|  +/g,cw=/\n+/g,Fa=(e,t)=>{let n="",i="",o="";for(let l in e){let u=e[l];l[0]=="@"?l[1]=="i"?n=l+" "+u+";":i+=l[1]=="f"?Fa(u,l):l+"{"+Fa(u,l[1]=="k"?"":t)+"}":typeof u=="object"?i+=Fa(u,t?t.replace(/([^,])+/g,f=>l.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,m=>/&/.test(m)?m.replace(/&/g,f):f?f+" "+m:m)):l):u!=null&&(l=/^--/.test(l)?l:l.replace(/[A-Z]/g,"-$&").toLowerCase(),o+=Fa.p?Fa.p(l,u):l+":"+u+";")}return n+(t&&o?t+"{"+o+"}":o)+i},Zs={},M2=e=>{if(typeof e=="object"){let t="";for(let n in e)t+=n+M2(e[n]);return t}return e},TN=(e,t,n,i,o)=>{let l=M2(e),u=Zs[l]||(Zs[l]=(m=>{let p=0,y=11;for(;p<m.length;)y=101*y+m.charCodeAt(p++)>>>0;return"go"+y})(l));if(!Zs[u]){let m=l!==e?e:(p=>{let y,_,x=[{}];for(;y=SN.exec(p.replace(EN,""));)y[4]?x.shift():y[3]?(_=y[3].replace(cw," ").trim(),x.unshift(x[0][_]=x[0][_]||{})):x[0][y[1]]=y[2].replace(cw," ").trim();return x[0]})(e);Zs[u]=Fa(o?{["@keyframes "+u]:m}:m,n?"":"."+u)}let f=n&&Zs.g?Zs.g:null;return n&&(Zs.g=Zs[u]),((m,p,y,_)=>{_?p.data=p.data.replace(_,m):p.data.indexOf(m)===-1&&(p.data=y?m+p.data:p.data+m)})(Zs[u],t,i,f),u},kN=(e,t,n)=>e.reduce((i,o,l)=>{let u=t[l];if(u&&u.call){let f=u(n),m=f&&f.props&&f.props.className||/^go/.test(f)&&f;u=m?"."+m:f&&typeof f=="object"?f.props?"":Fa(f,""):f===!1?"":f}return i+o+(u??"")},"");function Tm(e){let t=this||{},n=e.call?e(t.p):e;return TN(n.unshift?n.raw?kN(n,[].slice.call(arguments,1),t.p):n.reduce((i,o)=>Object.assign(i,o&&o.call?o(t.p):o),{}):n,wN(t.target),t.g,t.o,t.k)}let C2,ob,lb;Tm.bind({g:1});let ta=Tm.bind({k:1});function AN(e,t,n,i){Fa.p=t,C2=e,ob=n,lb=i}function Ja(e,t){let n=this||{};return function(){let i=arguments;function o(l,u){let f=Object.assign({},l),m=f.className||o.className;n.p=Object.assign({theme:ob&&ob()},f),n.o=/ *go\d+/.test(m),f.className=Tm.apply(n,i)+(m?" "+m:"");let p=e;return e[0]&&(p=f.as||e,delete f.as),lb&&p[0]&&lb(f),C2(p,f)}return o}}var jN=e=>typeof e=="function",Kf=(e,t)=>jN(e)?e(t):e,NN=(()=>{let e=0;return()=>(++e).toString()})(),R2=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),ON=20,Vb="default",L2=(e,t)=>{let{toastLimit:n}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,n)};case 1:return{...e,toasts:e.toasts.map(u=>u.id===t.toast.id?{...u,...t.toast}:u)};case 2:let{toast:i}=t;return L2(e,{type:e.toasts.find(u=>u.id===i.id)?1:0,toast:i});case 3:let{toastId:o}=t;return{...e,toasts:e.toasts.map(u=>u.id===o||o===void 0?{...u,dismissed:!0,visible:!1}:u)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(u=>u.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let l=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(u=>({...u,pauseDuration:u.pauseDuration+l}))}}},If=[],B2={toasts:[],pausedAt:void 0,settings:{toastLimit:ON}},Es={},P2=(e,t=Vb)=>{Es[t]=L2(Es[t]||B2,e),If.forEach(([n,i])=>{n===t&&i(Es[t])})},$2=e=>Object.keys(Es).forEach(t=>P2(e,t)),DN=e=>Object.keys(Es).find(t=>Es[t].toasts.some(n=>n.id===e)),km=(e=Vb)=>t=>{P2(t,e)},MN={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},CN=(e={},t=Vb)=>{let[n,i]=R.useState(Es[t]||B2),o=R.useRef(Es[t]);R.useEffect(()=>(o.current!==Es[t]&&i(Es[t]),If.push([t,i]),()=>{let u=If.findIndex(([f])=>f===t);u>-1&&If.splice(u,1)}),[t]);let l=n.toasts.map(u=>{var f,m,p;return{...e,...e[u.type],...u,removeDelay:u.removeDelay||((f=e[u.type])==null?void 0:f.removeDelay)||e?.removeDelay,duration:u.duration||((m=e[u.type])==null?void 0:m.duration)||e?.duration||MN[u.type],style:{...e.style,...(p=e[u.type])==null?void 0:p.style,...u.style}}});return{...n,toasts:l}},RN=(e,t="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...n,id:n?.id||NN()}),gd=e=>(t,n)=>{let i=RN(t,e,n);return km(i.toasterId||DN(i.id))({type:2,toast:i}),i.id},Fn=(e,t)=>gd("blank")(e,t);Fn.error=gd("error");Fn.success=gd("success");Fn.loading=gd("loading");Fn.custom=gd("custom");Fn.dismiss=(e,t)=>{let n={type:3,toastId:e};t?km(t)(n):$2(n)};Fn.dismissAll=e=>Fn.dismiss(void 0,e);Fn.remove=(e,t)=>{let n={type:4,toastId:e};t?km(t)(n):$2(n)};Fn.removeAll=e=>Fn.remove(void 0,e);Fn.promise=(e,t,n)=>{let i=Fn.loading(t.loading,{...n,...n?.loading});return typeof e=="function"&&(e=e()),e.then(o=>{let l=t.success?Kf(t.success,o):void 0;return l?Fn.success(l,{id:i,...n,...n?.success}):Fn.dismiss(i),o}).catch(o=>{let l=t.error?Kf(t.error,o):void 0;l?Fn.error(l,{id:i,...n,...n?.error}):Fn.dismiss(i)}),e};var LN=1e3,BN=(e,t="default")=>{let{toasts:n,pausedAt:i}=CN(e,t),o=R.useRef(new Map).current,l=R.useCallback((_,x=LN)=>{if(o.has(_))return;let S=setTimeout(()=>{o.delete(_),u({type:4,toastId:_})},x);o.set(_,S)},[]);R.useEffect(()=>{if(i)return;let _=Date.now(),x=n.map(S=>{if(S.duration===1/0)return;let T=(S.duration||0)+S.pauseDuration-(_-S.createdAt);if(T<0){S.visible&&Fn.dismiss(S.id);return}return setTimeout(()=>Fn.dismiss(S.id,t),T)});return()=>{x.forEach(S=>S&&clearTimeout(S))}},[n,i,t]);let u=R.useCallback(km(t),[t]),f=R.useCallback(()=>{u({type:5,time:Date.now()})},[u]),m=R.useCallback((_,x)=>{u({type:1,toast:{id:_,height:x}})},[u]),p=R.useCallback(()=>{i&&u({type:6,time:Date.now()})},[i,u]),y=R.useCallback((_,x)=>{let{reverseOrder:S=!1,gutter:T=8,defaultPosition:k}=x||{},j=n.filter(N=>(N.position||k)===(_.position||k)&&N.height),C=j.findIndex(N=>N.id===_.id),P=j.filter((N,M)=>M<C&&N.visible).length;return j.filter(N=>N.visible).slice(...S?[P+1]:[0,P]).reduce((N,M)=>N+(M.height||0)+T,0)},[n]);return R.useEffect(()=>{n.forEach(_=>{if(_.dismissed)l(_.id,_.removeDelay);else{let x=o.get(_.id);x&&(clearTimeout(x),o.delete(_.id))}})},[n,l]),{toasts:n,handlers:{updateHeight:m,startPause:f,endPause:p,calculateOffset:y}}},PN=ta`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,$N=ta`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,IN=ta`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,zN=Ja("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${PN} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${$N} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${IN} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,UN=ta`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,HN=Ja("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${UN} 1s linear infinite;
`,GN=ta`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,FN=ta`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,YN=Ja("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${GN} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${FN} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,qN=Ja("div")`
  position: absolute;
`,ZN=Ja("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,VN=ta`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,KN=Ja("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${VN} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,WN=({toast:e})=>{let{icon:t,type:n,iconTheme:i}=e;return t!==void 0?typeof t=="string"?R.createElement(KN,null,t):t:n==="blank"?null:R.createElement(ZN,null,R.createElement(HN,{...i}),n!=="loading"&&R.createElement(qN,null,n==="error"?R.createElement(zN,{...i}):R.createElement(YN,{...i})))},XN=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,JN=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,QN="0%{opacity:0;} 100%{opacity:1;}",eO="0%{opacity:1;} 100%{opacity:0;}",tO=Ja("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,nO=Ja("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,rO=(e,t)=>{let n=e.includes("top")?1:-1,[i,o]=R2()?[QN,eO]:[XN(n),JN(n)];return{animation:t?`${ta(i)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${ta(o)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},iO=R.memo(({toast:e,position:t,style:n,children:i})=>{let o=e.height?rO(e.position||t||"top-center",e.visible):{opacity:0},l=R.createElement(WN,{toast:e}),u=R.createElement(nO,{...e.ariaProps},Kf(e.message,e));return R.createElement(tO,{className:e.className,style:{...o,...n,...e.style}},typeof i=="function"?i({icon:l,message:u}):R.createElement(R.Fragment,null,l,u))});AN(R.createElement);var sO=({id:e,className:t,style:n,onHeightUpdate:i,children:o})=>{let l=R.useCallback(u=>{if(u){let f=()=>{let m=u.getBoundingClientRect().height;i(e,m)};f(),new MutationObserver(f).observe(u,{subtree:!0,childList:!0,characterData:!0})}},[e,i]);return R.createElement("div",{ref:l,className:t,style:n},o)},aO=(e,t)=>{let n=e.includes("top"),i=n?{top:0}:{bottom:0},o=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:R2()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(n?1:-1)}px)`,...i,...o}},oO=Tm`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Yh=16,I2=({reverseOrder:e,position:t="top-center",toastOptions:n,gutter:i,children:o,toasterId:l,containerStyle:u,containerClassName:f})=>{let{toasts:m,handlers:p}=BN(n,l);return R.createElement("div",{"data-rht-toaster":l||"",style:{position:"fixed",zIndex:9999,top:Yh,left:Yh,right:Yh,bottom:Yh,pointerEvents:"none",...u},className:f,onMouseEnter:p.startPause,onMouseLeave:p.endPause},m.map(y=>{let _=y.position||t,x=p.calculateOffset(y,{reverseOrder:e,gutter:i,defaultPosition:t}),S=aO(_,x);return R.createElement(sO,{id:y.id,key:y.id,onHeightUpdate:p.updateHeight,className:y.visible?oO:"",style:S},y.type==="custom"?Kf(y.message,y):o?o(y):R.createElement(iO,{toast:y,position:_}))}))},lO=Fn;function cO(e,t,n,i=0,o=0){t<=2&&(e-=1,t+=12);const l=Math.floor(e/100),u=2-l+Math.floor(l/4),f=n+(i+o/60)/24;return Math.floor(365.25*(e+4716))+Math.floor(30.6001*(t+1))+f+u-1524.5}const uO=864e5;function dO(e){const t=(e-24405875e-1)*uO;return new Date(t)}function hO(e,t=7){const n=e+(t-.5)/12;if(n>=1986&&n<2005){const o=n-2e3;return 63.86+.3345*o-.060374*o*o+.0017275*o**3+651814e-9*o**4+2373599e-11*o**5}if(n>=2005&&n<2050){const o=n-2e3;return 62.92+.32217*o+.005589*o*o}if(n>=2050&&n<=2150){const o=(n-1820)/100;return-20+32*o*o-.5628*(2150-n)}if(n>=1900&&n<1986)return-2.79+1.494119*(n-1900)-.0598939*(n-1900)**2+.0061966*(n-1900)**3-197e-6*(n-1900)**4;if(n>=1800&&n<1900){const o=(n-1800)/100;return 13.72-33.244*o+68.612*o**2-65.3*o**3-1.653*o**4+.3343*o**5-.012125*o**6+1348e-7*o**7-175e-8*o**8}const i=(n-1820)/100;return-20+32*i*i}function fO(e){const t=Math.floor(e+.5),n=e+.5-t;let i=t;if(t>=2299161){const _=Math.floor((t-186721625e-2)/36524.25);i=t+1+_-Math.floor(_/4)}const o=i+1524,l=Math.floor((o-122.1)/365.25),u=Math.floor(365.25*l),f=Math.floor((o-u)/30.6001),m=o-u-Math.floor(30.6001*f)+n;let p=f-1;p>12&&(p-=12);let y=l-4715;return p>2&&(y-=1),[y,p,m]}const Wu=Math.PI,el=Wu/180,mO=180/Wu,pO=86400;function gO(e){return e%=360,e<0?e+360:e}function bO(e,t){return(e-t+540)%360-180}function uw(e,t){for(;e-t>180;)e-=360;for(;e-t<-180;)e+=360;return e}function yO(e){const[t,n]=fO(e);return e+hO(t,Math.round(n))/pO}function dw(e,t){let n=0,i=1;for(let o=0;o<e.length;o++){let l=0;for(const[u,f,m]of e[o])l+=u*Math.cos(f+m*t);n+=l*i,i*=t}return n*1e-8}function vO(e){const t=(e-2451545)/36525,n=(297.85036+445267.11148*t-.0019142*t*t+t*t*t/189474)*el,i=(357.52772+35999.05034*t-1603e-7*t*t-t*t*t/3e5)*el,o=(134.96298+477198.867398*t+.0086972*t*t+t*t*t/56250)*el,l=(93.27191+483202.017538*t-.0036825*t*t+t*t*t/327270)*el,u=(125.04452-1934.136261*t+.0020708*t*t+t*t*t/45e4)*el,f=[[0,0,0,0,1,-171996,-174.2,92025,8.9],[0,0,2,-2,2,-13187,-1.6,5736,-3.1],[0,0,2,0,2,-2274,-.2,977,-.5],[0,0,0,0,2,2062,.2,-895,.5],[0,1,0,0,0,1426,-3.4,54,-.1],[1,0,0,0,0,712,.1,-7,0],[0,1,2,-2,2,-517,1.2,224,-.6],[0,0,2,0,1,-386,-.4,200,0],[1,0,2,0,2,-301,0,129,-.1],[0,-1,2,-2,2,217,-.5,-95,.3]];let m=0,p=0;for(const[y,_,x,S,T,k,j,C,P]of f){const N=y*n+_*i+x*o+S*l+T*u;m+=(k+j*t)*Math.sin(N),p+=(C+P*t)*Math.cos(N)}return m*=1e-4,p*=1e-4,{dpsi:m,deps:p}}function qh(e){const t=yO(e),n=(t-2451545)/365250,i=dw(hw.L,n),o=dw(hw.R,n);let l=i+Wu;l>2*Wu&&(l-=2*Wu);const{dpsi:u}=vO(t),f=u/3600*el,m=20.4898/(3600*o),p=l+f-m*el;return gO(p*mO)}function Gn(e,t,n){const i=(t%360+360)%360,o=cO(e,1,1),l=qh(o);let u=i-l;u<0&&(u+=360);let f=o+u/.98564736;const m=1e-6,p=5e-6;for(let x=0;x<25;x++){const S=qh(f),T=bO(i,S);if(Math.abs(T)<m)break;const k=qh(f+p),j=qh(f-p),C=uw(k,S),P=uw(j,S),N=(C-P)/(2*p);f+=T/N}const y=dO(f),_=new Date(y.getFullYear(),y.getMonth(),y.getDate(),y.getHours(),y.getMinutes(),0,0);if(Number.isFinite(n)){const x=n/15-9;if(Math.abs(x)>1e-12)return new Date(_.getTime()+x*36e5)}return _}const hw={L:[[[175347046,0,0],[3341656,4.6692568,6283.07585],[34894,4.6261,12566.1517],[3497,2.7441,5753.3849],[3418,2.8289,3.5231],[3136,3.6277,77713.7715],[2676,4.4181,7860.4194],[2343,6.1352,3930.2097],[1324,.7425,11506.7698],[1273,2.0371,529.691],[1199,1.1096,1577.3435],[990,5.233,5884.927],[902,2.045,26.298],[857,3.508,398.149],[780,1.179,5223.694],[753,2.533,5507.553],[505,4.583,18849.228],[492,4.205,775.523],[357,2.92,.067],[317,5.849,11790.629]],[[628331966747,0,0],[206059,2.678235,6283.07585],[4303,2.6351,12566.1517],[425,1.59,3.523],[119,5.796,26.298],[109,2.966,1577.344],[93,2.59,18849.23],[72,1.14,529.69],[68,1.87,398.15],[67,4.41,5507.55],[59,2.89,5223.69],[56,2.17,155.42]],[[52919,0,0],[8720,1.0721,6283.0758],[309,.867,12566.152]],[[289,5.844,6283.076],[35,0,0]],[[114,3.142,0],[8,4.13,6283.08]],[[1,3.14,0]]],R:[[[100013989,0,0],[1670700,3.0984635,6283.07585],[13956,3.05525,12566.1517],[3084,5.1985,77713.7715],[1628,1.1739,5753.3849],[1576,2.8469,7860.4194],[925,5.453,11506.77],[542,4.564,3930.21],[472,3.661,5884.927],[346,.964,5507.553],[329,5.9,5223.694]],[[103019,1.10749,6283.07585],[1721,1.0644,12566.1517],[702,3.142,0],[32,1.02,18849.23]],[[4359,5.7846,6283.0758],[124,5.579,12566.152],[12,3.14,0]],[[145,4.273,6283.076]]]},jr=["","","","","","","","","",""],Yr=["","","","","","","","","","","",""],Bi={:["","","","","","","","","",""],:["","","","","","","","","","","",""]},mi={:["","","","","","","","","",""],:["","","","","","","","","","","",""]},_O=["","","","","","","","","",""],xO=["","","","","","","","","","","",""],wO=["","","","","","","","","","","","","","","","","","","",""],SO=["","","","","","","","","","","","","","","","","","","","","","","",""],Am=new Set(jr),Kb=new Set(Yr),jm={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Wb={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Xb=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],Jb={:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""]},z2={:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""]},fw=[{branch:"",hanja:"",start:1380,end:60},{branch:"",hanja:"",start:60,end:180},{branch:"",hanja:"",start:180,end:300},{branch:"",hanja:"",start:300,end:420},{branch:"",hanja:"",start:420,end:540},{branch:"",hanja:"",start:540,end:660},{branch:"",hanja:"",start:660,end:780},{branch:"",hanja:"",start:780,end:900},{branch:"",hanja:"",start:900,end:1020},{branch:"",hanja:"",start:1020,end:1140},{branch:"",hanja:"",start:1140,end:1260},{branch:"",hanja:"",start:1260,end:1380}],EO={:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}},TO={:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}};function kO(e,t=127.5){return(ut(e,t)||"").charAt(0)}const mw=new Map;function U2(e,t=127.5){const n=`${e}@${t}`,i=mw.get(n);if(i)return i;const o=Gn(e,315,t);if(!o)throw new Error(`    : year=${e}, lon=${t}`);return mw.set(n,o),o}const AO=(e,t)=>(e%t+t)%t,H2=e=>e instanceof Date&&!Number.isNaN(e.getTime());function G2(e,t=127.5){if(!H2(e))throw new Error("resolveYearIndex: invalid date");const n=e.getFullYear(),i=U2(n,t),o=e<i?n-1:n,l=AO(o-4,60);return{useYear:o,index60Num:l}}function ut(e,t=127.5){const{index60Num:n}=G2(e,t);return Xb[n]}const jO=[2,4,6,8,0,2,4,6,8,0];function NO(e,t=127.5){const n=new Array(12);return n[0]=U2(e,t),n[1]=Gn(e,345,t),n[2]=Gn(e,15,t),n[3]=Gn(e,45,t),n[4]=Gn(e,75,t),n[5]=Gn(e,105,t),n[6]=Gn(e,135,t),n[7]=Gn(e,165,t),n[8]=Gn(e,195,t),n[9]=Gn(e,225,t),n[10]=Gn(e,255,t),n[11]=Gn(e+1,285,t),n.map(i=>new Date(i.getTime()+1800*1e3))}function OO(e,t=127.5){const{useYear:n}=G2(e,t),i=NO(n,t);let o=0;for(let u=0;u<12;u++)e>=i[u]&&(o=u);return{monthIndex:o+1,useYear:n,boundaries:i}}function DO(e,t=127.5){const n=kO(e,t),i=Bi..indexOf(n);if(i<0)throw new Error(`resolveFirstMonthStemIdx: invalid year stem "${n}"`);return jO[i]}function MO(e,t,n=127.5){return(DO(e,n)+(t-1))%10}function jt(e,t=127.5){if(!H2(e))return"";const{monthIndex:n}=OO(e,t),i=(2+(n-1))%12,o=Bi.[i],l=MO(e,n,t);return Bi.[l]+o}const F2=(e,t)=>(e%t+t)%t;function Y2(e,t,n,i=0,o=0,l=0){t<=2&&(e-=1,t+=12);const u=Math.floor(e/100),f=2-u+Math.floor(u/4),m=(i+o/60+l/3600)/24;return Math.floor(365.25*(e+4716))+Math.floor(30.6001*(t+1))+n+m+f-1524.5}function CO(e,t){const n=e.getHours(),i=e.getMinutes(),o=n*60+i,l=q2(e);return t===""&&l===""?o>=1380?1:0:t===""&&(l===""||l==="")?o<180?-1:0:(o<0,0)}function RO(e,t){const i=e.getHours()*60+e.getMinutes();return t===""?i>=1380?1:0:t===""&&i<180?-1:0}const Wf={JDN:2445731,idx:0};function _t(e,t){const n=CO(e,t),i=new Date(e.getTime());i.setDate(i.getDate()+n);const o=Y2(i.getFullYear(),i.getMonth()+1,i.getDate(),i.getHours(),i.getMinutes()),l=Math.floor(o+.5),u=F2(l-Wf.JDN+Wf.idx,60),f=Xb[u];if(!f)throw new Error(`getDayGanZhi: idx=${u} out of range (jdn=${l}, jd=${o})`);return f}function LO(e,t){const n=new Date(e),i=RO(n,t),o=new Date(e.getTime());o.setDate(o.getDate()+i);const l=Y2(o.getFullYear(),o.getMonth()+1,o.getDate(),o.getHours(),o.getMinutes()),u=Math.floor(l+.5),f=F2(u-Wf.JDN+Wf.idx,60),m=Xb[f];if(!m)throw new Error(`getDayGanZhi: idx=${f} out of range (jdn=${u}, jd=${l})`);return m}function q2(e){e instanceof Date||(e=new Date(e));const t=e.getHours()*60+e.getMinutes();for(let n=0;n<fw.length;n++){const{branch:i,start:o,end:l}=fw[n];if(o<l){if(t>=o&&t<l)return i}else if(t>=o||t<l)return i}return""}function BO(e,t,n,i){const o=jr.indexOf(t);if(o<0)return"";let l=(o%5*2+n)%10;const u=e.getHours();return(i===""||i==="/"&&u>=3)&&(n===0||n===1)&&(l=(l+2)%10),jr[l]}function $i(e,t,n){e instanceof Date||(e=new Date(e));const i=q2(e),o=Yr.indexOf(i),u=(n??_t(e,t)).charAt(0);return BO(e,u,o,t)+i}const pw=e=>{let t;const n=new Set,i=(p,y)=>{const _=typeof p=="function"?p(t):p;if(!Object.is(_,t)){const x=t;t=y??(typeof _!="object"||_===null)?_:Object.assign({},t,_),n.forEach(S=>S(t,x))}},o=()=>t,f={setState:i,getState:o,getInitialState:()=>m,subscribe:p=>(n.add(p),()=>n.delete(p))},m=t=e(i,o,f);return f},PO=(e=>e?pw(e):pw),$O=e=>e;function IO(e,t=$O){const n=rn.useSyncExternalStore(e.subscribe,rn.useCallback(()=>t(e.getState()),[e,t]),rn.useCallback(()=>t(e.getInitialState()),[e,t]));return rn.useDebugValue(n),n}const gw=e=>{const t=PO(e),n=i=>IO(t,i);return Object.assign(n,t),n},bd=(e=>e?gw(e):gw);function zO(e,t){let n;try{n=e()}catch{return}return{getItem:o=>{var l;const u=m=>m===null?null:JSON.parse(m,void 0),f=(l=n.getItem(o))!=null?l:null;return f instanceof Promise?f.then(u):u(f)},setItem:(o,l)=>n.setItem(o,JSON.stringify(l,void 0)),removeItem:o=>n.removeItem(o)}}const cb=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then(i){return cb(i)(n)},catch(i){return this}}}catch(n){return{then(i){return this},catch(i){return cb(i)(n)}}}},UO=(e,t)=>(n,i,o)=>{let l={storage:zO(()=>localStorage),partialize:k=>k,version:0,merge:(k,j)=>({...j,...k}),...t},u=!1;const f=new Set,m=new Set;let p=l.storage;if(!p)return e((...k)=>{console.warn(`[zustand persist middleware] Unable to update item '${l.name}', the given storage is currently unavailable.`),n(...k)},i,o);const y=()=>{const k=l.partialize({...i()});return p.setItem(l.name,{state:k,version:l.version})},_=o.setState;o.setState=(k,j)=>(_(k,j),y());const x=e((...k)=>(n(...k),y()),i,o);o.getInitialState=()=>x;let S;const T=()=>{var k,j;if(!p)return;u=!1,f.forEach(P=>{var N;return P((N=i())!=null?N:x)});const C=((j=l.onRehydrateStorage)==null?void 0:j.call(l,(k=i())!=null?k:x))||void 0;return cb(p.getItem.bind(p))(l.name).then(P=>{if(P)if(typeof P.version=="number"&&P.version!==l.version){if(l.migrate){const N=l.migrate(P.state,P.version);return N instanceof Promise?N.then(M=>[!0,M]):[!0,N]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,P.state];return[!1,void 0]}).then(P=>{var N;const[M,D]=P;if(S=l.merge(D,(N=i())!=null?N:x),n(S,!0),M)return y()}).then(()=>{C?.(S,void 0),S=i(),u=!0,m.forEach(P=>P(S))}).catch(P=>{C?.(void 0,P)})};return o.persist={setOptions:k=>{l={...l,...k},k.storage&&(p=k.storage)},clearStorage:()=>{p?.removeItem(l.name)},getOptions:()=>l,rehydrate:()=>T(),hasHydrated:()=>u,onHydrate:k=>(f.add(k),()=>{f.delete(k)}),onFinishHydration:k=>(m.add(k),()=>{m.delete(k)})},l.skipHydration||T(),S||x},Z2=UO;var Vs={},Zh={},ub=function(e,t){return ub=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},ub(e,t)};function V2(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");ub(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var Xf=function(){return Xf=Object.assign||function(t){for(var n,i=1,o=arguments.length;i<o;i++){n=arguments[i];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(t[l]=n[l])}return t},Xf.apply(this,arguments)};function Ac(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]]);return n}function K2(e,t,n,i){var o=arguments.length,l=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,n):i,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(e,t,n,i);else for(var f=e.length-1;f>=0;f--)(u=e[f])&&(l=(o<3?u(l):o>3?u(t,n,l):u(t,n))||l);return o>3&&l&&Object.defineProperty(t,n,l),l}function W2(e,t){return function(n,i){t(n,i,e)}}function X2(e,t,n,i,o,l){function u(C){if(C!==void 0&&typeof C!="function")throw new TypeError("Function expected");return C}for(var f=i.kind,m=f==="getter"?"get":f==="setter"?"set":"value",p=!t&&e?i.static?e:e.prototype:null,y=t||(p?Object.getOwnPropertyDescriptor(p,i.name):{}),_,x=!1,S=n.length-1;S>=0;S--){var T={};for(var k in i)T[k]=k==="access"?{}:i[k];for(var k in i.access)T.access[k]=i.access[k];T.addInitializer=function(C){if(x)throw new TypeError("Cannot add initializers after decoration has completed");l.push(u(C||null))};var j=(0,n[S])(f==="accessor"?{get:y.get,set:y.set}:y[m],T);if(f==="accessor"){if(j===void 0)continue;if(j===null||typeof j!="object")throw new TypeError("Object expected");(_=u(j.get))&&(y.get=_),(_=u(j.set))&&(y.set=_),(_=u(j.init))&&o.unshift(_)}else(_=u(j))&&(f==="field"?o.unshift(_):y[m]=_)}p&&Object.defineProperty(p,i.name,y),x=!0}function J2(e,t,n){for(var i=arguments.length>2,o=0;o<t.length;o++)n=i?t[o].call(e,n):t[o].call(e);return i?n:void 0}function Q2(e){return typeof e=="symbol"?e:"".concat(e)}function eE(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})}function tE(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function Ze(e,t,n,i){function o(l){return l instanceof n?l:new n(function(u){u(l)})}return new(n||(n=Promise))(function(l,u){function f(y){try{p(i.next(y))}catch(_){u(_)}}function m(y){try{p(i.throw(y))}catch(_){u(_)}}function p(y){y.done?l(y.value):o(y.value).then(f,m)}p((i=i.apply(e,t||[])).next())})}function nE(e,t){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,o,l,u=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return u.next=f(0),u.throw=f(1),u.return=f(2),typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(p){return function(y){return m([p,y])}}function m(p){if(i)throw new TypeError("Generator is already executing.");for(;u&&(u=0,p[0]&&(n=0)),n;)try{if(i=1,o&&(l=p[0]&2?o.return:p[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,p[1])).done)return l;switch(o=0,l&&(p=[p[0]&2,l.value]),p[0]){case 0:case 1:l=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,o=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!l||p[1]>l[0]&&p[1]<l[3])){n.label=p[1];break}if(p[0]===6&&n.label<l[1]){n.label=l[1],l=p;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(p);break}l[2]&&n.ops.pop(),n.trys.pop();continue}p=t.call(e,n)}catch(y){p=[6,y],o=0}finally{i=l=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}var Nm=Object.create?(function(e,t,n,i){i===void 0&&(i=n);var o=Object.getOwnPropertyDescriptor(t,n);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,o)}):(function(e,t,n,i){i===void 0&&(i=n),e[i]=t[n]});function rE(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&Nm(t,e,n)}function Jf(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Qb(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var i=n.call(e),o,l=[],u;try{for(;(t===void 0||t-- >0)&&!(o=i.next()).done;)l.push(o.value)}catch(f){u={error:f}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(u)throw u.error}}return l}function iE(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Qb(arguments[t]));return e}function sE(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var i=Array(e),o=0,t=0;t<n;t++)for(var l=arguments[t],u=0,f=l.length;u<f;u++,o++)i[o]=l[u];return i}function aE(e,t,n){if(n||arguments.length===2)for(var i=0,o=t.length,l;i<o;i++)(l||!(i in t))&&(l||(l=Array.prototype.slice.call(t,0,i)),l[i]=t[i]);return e.concat(l||Array.prototype.slice.call(t))}function vc(e){return this instanceof vc?(this.v=e,this):new vc(e)}function oE(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(e,t||[]),o,l=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),f("next"),f("throw"),f("return",u),o[Symbol.asyncIterator]=function(){return this},o;function u(S){return function(T){return Promise.resolve(T).then(S,_)}}function f(S,T){i[S]&&(o[S]=function(k){return new Promise(function(j,C){l.push([S,k,j,C])>1||m(S,k)})},T&&(o[S]=T(o[S])))}function m(S,T){try{p(i[S](T))}catch(k){x(l[0][3],k)}}function p(S){S.value instanceof vc?Promise.resolve(S.value.v).then(y,_):x(l[0][2],S)}function y(S){m("next",S)}function _(S){m("throw",S)}function x(S,T){S(T),l.shift(),l.length&&m(l[0][0],l[0][1])}}function lE(e){var t,n;return t={},i("next"),i("throw",function(o){throw o}),i("return"),t[Symbol.iterator]=function(){return this},t;function i(o,l){t[o]=e[o]?function(u){return(n=!n)?{value:vc(e[o](u)),done:!1}:l?l(u):u}:l}}function cE(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Jf=="function"?Jf(e):e[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(l){n[l]=e[l]&&function(u){return new Promise(function(f,m){u=e[l](u),o(f,m,u.done,u.value)})}}function o(l,u,f,m){Promise.resolve(m).then(function(p){l({value:p,done:f})},u)}}function uE(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var HO=Object.create?(function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}):function(e,t){e.default=t},db=function(e){return db=Object.getOwnPropertyNames||function(t){var n=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[n.length]=i);return n},db(e)};function dE(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n=db(e),i=0;i<n.length;i++)n[i]!=="default"&&Nm(t,e,n[i]);return HO(t,e),t}function hE(e){return e&&e.__esModule?e:{default:e}}function fE(e,t,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(e):i?i.value:t.get(e)}function mE(e,t,n,i,o){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?o.call(e,n):o?o.value=n:t.set(e,n),n}function pE(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function gE(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var i,o;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");i=t[Symbol.asyncDispose]}if(i===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");i=t[Symbol.dispose],n&&(o=i)}if(typeof i!="function")throw new TypeError("Object not disposable.");o&&(i=function(){try{o.call(this)}catch(l){return Promise.reject(l)}}),e.stack.push({value:t,dispose:i,async:n})}else n&&e.stack.push({async:!0});return t}var GO=typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var i=new Error(n);return i.name="SuppressedError",i.error=e,i.suppressed=t,i};function bE(e){function t(l){e.error=e.hasError?new GO(l,e.error,"An error was suppressed during disposal."):l,e.hasError=!0}var n,i=0;function o(){for(;n=e.stack.pop();)try{if(!n.async&&i===1)return i=0,e.stack.push(n),Promise.resolve().then(o);if(n.dispose){var l=n.dispose.call(n.value);if(n.async)return i|=2,Promise.resolve(l).then(o,function(u){return t(u),o()})}else i|=1}catch(u){t(u)}if(i===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return o()}function yE(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,i,o,l,u){return i?t?".jsx":".js":o&&(!l||!u)?n:o+l+"."+u.toLowerCase()+"js"}):e}const FO={__extends:V2,__assign:Xf,__rest:Ac,__decorate:K2,__param:W2,__esDecorate:X2,__runInitializers:J2,__propKey:Q2,__setFunctionName:eE,__metadata:tE,__awaiter:Ze,__generator:nE,__createBinding:Nm,__exportStar:rE,__values:Jf,__read:Qb,__spread:iE,__spreadArrays:sE,__spreadArray:aE,__await:vc,__asyncGenerator:oE,__asyncDelegator:lE,__asyncValues:cE,__makeTemplateObject:uE,__importStar:dE,__importDefault:hE,__classPrivateFieldGet:fE,__classPrivateFieldSet:mE,__classPrivateFieldIn:pE,__addDisposableResource:gE,__disposeResources:bE,__rewriteRelativeImportExtension:yE},YO=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:gE,get __assign(){return Xf},__asyncDelegator:lE,__asyncGenerator:oE,__asyncValues:cE,__await:vc,__awaiter:Ze,__classPrivateFieldGet:fE,__classPrivateFieldIn:pE,__classPrivateFieldSet:mE,__createBinding:Nm,__decorate:K2,__disposeResources:bE,__esDecorate:X2,__exportStar:rE,__extends:V2,__generator:nE,__importDefault:hE,__importStar:dE,__makeTemplateObject:uE,__metadata:tE,__param:W2,__propKey:Q2,__read:Qb,__rest:Ac,__rewriteRelativeImportExtension:yE,__runInitializers:J2,__setFunctionName:eE,__spread:iE,__spreadArray:aE,__spreadArrays:sE,__values:Jf,default:FO},Symbol.toStringTag,{value:"Module"})),qO=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);let Om=class extends Error{constructor(t,n="FunctionsError",i){super(t),this.name=n,this.context=i}},vE=class extends Om{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}},hb=class extends Om{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}},fb=class extends Om{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}};var Qf;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Qf||(Qf={}));class ZO{constructor(t,{headers:n={},customFetch:i,region:o=Qf.Any}={}){this.url=t,this.headers=n,this.region=o,this.fetch=qO(i)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return Ze(this,arguments,void 0,function*(n,i={}){var o;let l,u;try{const{headers:f,method:m,body:p,signal:y,timeout:_}=i;let x={},{region:S}=i;S||(S=this.region);const T=new URL(`${this.url}/${n}`);S&&S!=="any"&&(x["x-region"]=S,T.searchParams.set("forceFunctionRegion",S));let k;p&&(f&&!Object.prototype.hasOwnProperty.call(f,"Content-Type")||!f)?typeof Blob<"u"&&p instanceof Blob||p instanceof ArrayBuffer?(x["Content-Type"]="application/octet-stream",k=p):typeof p=="string"?(x["Content-Type"]="text/plain",k=p):typeof FormData<"u"&&p instanceof FormData?k=p:(x["Content-Type"]="application/json",k=JSON.stringify(p)):k=p;let j=y;_&&(u=new AbortController,l=setTimeout(()=>u.abort(),_),y?(j=u.signal,y.addEventListener("abort",()=>u.abort())):j=u.signal);const C=yield this.fetch(T.toString(),{method:m||"POST",headers:Object.assign(Object.assign(Object.assign({},x),this.headers),f),body:k,signal:j}).catch(D=>{throw new vE(D)}),P=C.headers.get("x-relay-error");if(P&&P==="true")throw new hb(C);if(!C.ok)throw new fb(C);let N=((o=C.headers.get("Content-Type"))!==null&&o!==void 0?o:"text/plain").split(";")[0].trim(),M;return N==="application/json"?M=yield C.json():N==="application/octet-stream"||N==="application/pdf"?M=yield C.blob():N==="text/event-stream"?M=C:N==="multipart/form-data"?M=yield C.formData():M=yield C.text(),{data:M,error:null,response:C}}catch(f){return{data:null,error:f,response:f instanceof fb||f instanceof hb?f.context:void 0}}finally{l&&clearTimeout(l)}})}}const VO=Object.freeze(Object.defineProperty({__proto__:null,get FunctionRegion(){return Qf},FunctionsClient:ZO,FunctionsError:Om,FunctionsFetchError:vE,FunctionsHttpError:fb,FunctionsRelayError:hb},Symbol.toStringTag,{value:"Module"})),_E=pd(VO);var mr={};const jc=pd(YO);var Vh={},Kh={},Wh={},Xh={},Jh={},Qh={},bw;function xE(){if(bw)return Qh;bw=1,Object.defineProperty(Qh,"__esModule",{value:!0});class e extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return Qh.default=e,Qh}var yw;function wE(){if(yw)return Jh;yw=1,Object.defineProperty(Jh,"__esModule",{value:!0});const t=jc.__importDefault(xE());let n=class{constructor(o){var l,u;this.shouldThrowOnError=!1,this.method=o.method,this.url=o.url,this.headers=new Headers(o.headers),this.schema=o.schema,this.body=o.body,this.shouldThrowOnError=(l=o.shouldThrowOnError)!==null&&l!==void 0?l:!1,this.signal=o.signal,this.isMaybeSingle=(u=o.isMaybeSingle)!==null&&u!==void 0?u:!1,o.fetch?this.fetch=o.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(o,l){return this.headers=new Headers(this.headers),this.headers.set(o,l),this}then(o,l){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const u=this.fetch;let f=u(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async m=>{var p,y,_,x;let S=null,T=null,k=null,j=m.status,C=m.statusText;if(m.ok){if(this.method!=="HEAD"){const D=await m.text();D===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((p=this.headers.get("Accept"))===null||p===void 0)&&p.includes("application/vnd.pgrst.plan+text"))?T=D:T=JSON.parse(D))}const N=(y=this.headers.get("Prefer"))===null||y===void 0?void 0:y.match(/count=(exact|planned|estimated)/),M=(_=m.headers.get("content-range"))===null||_===void 0?void 0:_.split("/");N&&M&&M.length>1&&(k=parseInt(M[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(T)&&(T.length>1?(S={code:"PGRST116",details:`Results contain ${T.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},T=null,k=null,j=406,C="Not Acceptable"):T.length===1?T=T[0]:T=null)}else{const N=await m.text();try{S=JSON.parse(N),Array.isArray(S)&&m.status===404&&(T=[],S=null,j=200,C="OK")}catch{m.status===404&&N===""?(j=204,C="No Content"):S={message:N}}if(S&&this.isMaybeSingle&&(!((x=S?.details)===null||x===void 0)&&x.includes("0 rows"))&&(S=null,j=200,C="OK"),S&&this.shouldThrowOnError)throw new t.default(S)}return{error:S,data:T,count:k,status:j,statusText:C}});return this.shouldThrowOnError||(f=f.catch(m=>{var p,y,_,x,S,T;let k="";const j=m?.cause;if(j){const C=(p=j?.message)!==null&&p!==void 0?p:"",P=(y=j?.code)!==null&&y!==void 0?y:"";k=`${(_=m?.name)!==null&&_!==void 0?_:"FetchError"}: ${m?.message}`,k+=`

Caused by: ${(x=j?.name)!==null&&x!==void 0?x:"Error"}: ${C}`,P&&(k+=` (${P})`),j?.stack&&(k+=`
${j.stack}`)}else k=(S=m?.stack)!==null&&S!==void 0?S:"";return{error:{message:`${(T=m?.name)!==null&&T!==void 0?T:"FetchError"}: ${m?.message}`,details:k,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),f.then(o,l)}returns(){return this}overrideTypes(){return this}};return Jh.default=n,Jh}var vw;function SE(){if(vw)return Xh;vw=1,Object.defineProperty(Xh,"__esModule",{value:!0});const t=jc.__importDefault(wE());let n=class extends t.default{select(o){let l=!1;const u=(o??"*").split("").map(f=>/\s/.test(f)&&!l?"":(f==='"'&&(l=!l),f)).join("");return this.url.searchParams.set("select",u),this.headers.append("Prefer","return=representation"),this}order(o,{ascending:l=!0,nullsFirst:u,foreignTable:f,referencedTable:m=f}={}){const p=m?`${m}.order`:"order",y=this.url.searchParams.get(p);return this.url.searchParams.set(p,`${y?`${y},`:""}${o}.${l?"asc":"desc"}${u===void 0?"":u?".nullsfirst":".nullslast"}`),this}limit(o,{foreignTable:l,referencedTable:u=l}={}){const f=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(f,`${o}`),this}range(o,l,{foreignTable:u,referencedTable:f=u}={}){const m=typeof f>"u"?"offset":`${f}.offset`,p=typeof f>"u"?"limit":`${f}.limit`;return this.url.searchParams.set(m,`${o}`),this.url.searchParams.set(p,`${l-o+1}`),this}abortSignal(o){return this.signal=o,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:o=!1,verbose:l=!1,settings:u=!1,buffers:f=!1,wal:m=!1,format:p="text"}={}){var y;const _=[o?"analyze":null,l?"verbose":null,u?"settings":null,f?"buffers":null,m?"wal":null].filter(Boolean).join("|"),x=(y=this.headers.get("Accept"))!==null&&y!==void 0?y:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${p}; for="${x}"; options=${_};`),p==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(o){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${o}`),this}};return Xh.default=n,Xh}var _w;function ey(){if(_w)return Wh;_w=1,Object.defineProperty(Wh,"__esModule",{value:!0});const t=jc.__importDefault(SE()),n=new RegExp("[,()]");let i=class extends t.default{eq(l,u){return this.url.searchParams.append(l,`eq.${u}`),this}neq(l,u){return this.url.searchParams.append(l,`neq.${u}`),this}gt(l,u){return this.url.searchParams.append(l,`gt.${u}`),this}gte(l,u){return this.url.searchParams.append(l,`gte.${u}`),this}lt(l,u){return this.url.searchParams.append(l,`lt.${u}`),this}lte(l,u){return this.url.searchParams.append(l,`lte.${u}`),this}like(l,u){return this.url.searchParams.append(l,`like.${u}`),this}likeAllOf(l,u){return this.url.searchParams.append(l,`like(all).{${u.join(",")}}`),this}likeAnyOf(l,u){return this.url.searchParams.append(l,`like(any).{${u.join(",")}}`),this}ilike(l,u){return this.url.searchParams.append(l,`ilike.${u}`),this}ilikeAllOf(l,u){return this.url.searchParams.append(l,`ilike(all).{${u.join(",")}}`),this}ilikeAnyOf(l,u){return this.url.searchParams.append(l,`ilike(any).{${u.join(",")}}`),this}regexMatch(l,u){return this.url.searchParams.append(l,`match.${u}`),this}regexIMatch(l,u){return this.url.searchParams.append(l,`imatch.${u}`),this}is(l,u){return this.url.searchParams.append(l,`is.${u}`),this}isDistinct(l,u){return this.url.searchParams.append(l,`isdistinct.${u}`),this}in(l,u){const f=Array.from(new Set(u)).map(m=>typeof m=="string"&&n.test(m)?`"${m}"`:`${m}`).join(",");return this.url.searchParams.append(l,`in.(${f})`),this}contains(l,u){return typeof u=="string"?this.url.searchParams.append(l,`cs.${u}`):Array.isArray(u)?this.url.searchParams.append(l,`cs.{${u.join(",")}}`):this.url.searchParams.append(l,`cs.${JSON.stringify(u)}`),this}containedBy(l,u){return typeof u=="string"?this.url.searchParams.append(l,`cd.${u}`):Array.isArray(u)?this.url.searchParams.append(l,`cd.{${u.join(",")}}`):this.url.searchParams.append(l,`cd.${JSON.stringify(u)}`),this}rangeGt(l,u){return this.url.searchParams.append(l,`sr.${u}`),this}rangeGte(l,u){return this.url.searchParams.append(l,`nxl.${u}`),this}rangeLt(l,u){return this.url.searchParams.append(l,`sl.${u}`),this}rangeLte(l,u){return this.url.searchParams.append(l,`nxr.${u}`),this}rangeAdjacent(l,u){return this.url.searchParams.append(l,`adj.${u}`),this}overlaps(l,u){return typeof u=="string"?this.url.searchParams.append(l,`ov.${u}`):this.url.searchParams.append(l,`ov.{${u.join(",")}}`),this}textSearch(l,u,{config:f,type:m}={}){let p="";m==="plain"?p="pl":m==="phrase"?p="ph":m==="websearch"&&(p="w");const y=f===void 0?"":`(${f})`;return this.url.searchParams.append(l,`${p}fts${y}.${u}`),this}match(l){return Object.entries(l).forEach(([u,f])=>{this.url.searchParams.append(u,`eq.${f}`)}),this}not(l,u,f){return this.url.searchParams.append(l,`not.${u}.${f}`),this}or(l,{foreignTable:u,referencedTable:f=u}={}){const m=f?`${f}.or`:"or";return this.url.searchParams.append(m,`(${l})`),this}filter(l,u,f){return this.url.searchParams.append(l,`${u}.${f}`),this}};return Wh.default=i,Wh}var xw;function EE(){if(xw)return Kh;xw=1,Object.defineProperty(Kh,"__esModule",{value:!0});const t=jc.__importDefault(ey());let n=class{constructor(o,{headers:l={},schema:u,fetch:f}){this.url=o,this.headers=new Headers(l),this.schema=u,this.fetch=f}select(o,l){const{head:u=!1,count:f}=l??{},m=u?"HEAD":"GET";let p=!1;const y=(o??"*").split("").map(_=>/\s/.test(_)&&!p?"":(_==='"'&&(p=!p),_)).join("");return this.url.searchParams.set("select",y),f&&this.headers.append("Prefer",`count=${f}`),new t.default({method:m,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(o,{count:l,defaultToNull:u=!0}={}){var f;const m="POST";if(l&&this.headers.append("Prefer",`count=${l}`),u||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const p=o.reduce((y,_)=>y.concat(Object.keys(_)),[]);if(p.length>0){const y=[...new Set(p)].map(_=>`"${_}"`);this.url.searchParams.set("columns",y.join(","))}}return new t.default({method:m,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}upsert(o,{onConflict:l,ignoreDuplicates:u=!1,count:f,defaultToNull:m=!0}={}){var p;const y="POST";if(this.headers.append("Prefer",`resolution=${u?"ignore":"merge"}-duplicates`),l!==void 0&&this.url.searchParams.set("on_conflict",l),f&&this.headers.append("Prefer",`count=${f}`),m||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const _=o.reduce((x,S)=>x.concat(Object.keys(S)),[]);if(_.length>0){const x=[...new Set(_)].map(S=>`"${S}"`);this.url.searchParams.set("columns",x.join(","))}}return new t.default({method:y,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}update(o,{count:l}={}){var u;const f="PATCH";return l&&this.headers.append("Prefer",`count=${l}`),new t.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}delete({count:o}={}){var l;const u="DELETE";return o&&this.headers.append("Prefer",`count=${o}`),new t.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}};return Kh.default=n,Kh}var ww;function KO(){if(ww)return Vh;ww=1,Object.defineProperty(Vh,"__esModule",{value:!0});const e=jc,t=e.__importDefault(EE()),n=e.__importDefault(ey());let i=class TE{constructor(l,{headers:u={},schema:f,fetch:m}={}){this.url=l,this.headers=new Headers(u),this.schemaName=f,this.fetch=m}from(l){if(!l||typeof l!="string"||l.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const u=new URL(`${this.url}/${l}`);return new t.default(u,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(l){return new TE(this.url,{headers:this.headers,schema:l,fetch:this.fetch})}rpc(l,u={},{head:f=!1,get:m=!1,count:p}={}){var y;let _;const x=new URL(`${this.url}/rpc/${l}`);let S;f||m?(_=f?"HEAD":"GET",Object.entries(u).filter(([k,j])=>j!==void 0).map(([k,j])=>[k,Array.isArray(j)?`{${j.join(",")}}`:`${j}`]).forEach(([k,j])=>{x.searchParams.append(k,j)})):(_="POST",S=u);const T=new Headers(this.headers);return p&&T.set("Prefer",`count=${p}`),new n.default({method:_,url:x,headers:T,schema:this.schemaName,body:S,fetch:(y=this.fetch)!==null&&y!==void 0?y:fetch})}};return Vh.default=i,Vh}var Sw;function kE(){if(Sw)return mr;Sw=1,Object.defineProperty(mr,"__esModule",{value:!0}),mr.PostgrestError=mr.PostgrestBuilder=mr.PostgrestTransformBuilder=mr.PostgrestFilterBuilder=mr.PostgrestQueryBuilder=mr.PostgrestClient=void 0;const e=jc,t=e.__importDefault(KO());mr.PostgrestClient=t.default;const n=e.__importDefault(EE());mr.PostgrestQueryBuilder=n.default;const i=e.__importDefault(ey());mr.PostgrestFilterBuilder=i.default;const o=e.__importDefault(SE());mr.PostgrestTransformBuilder=o.default;const l=e.__importDefault(wE());mr.PostgrestBuilder=l.default;const u=e.__importDefault(xE());return mr.PostgrestError=u.default,mr.default={PostgrestClient:t.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:i.default,PostgrestTransformBuilder:o.default,PostgrestBuilder:l.default,PostgrestError:u.default},mr}class AE{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const i=n.node,o=parseInt(i.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const i=this.getWebSocketConstructor();return new i(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const WO="2.86.2",XO=`realtime-js/${WO}`,jE="1.0.0",JO="2.0.0",Ew=jE,mb=1e4,QO=1e3,eD=100;var tl;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(tl||(tl={}));var Bn;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Bn||(Bn={}));var ns;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(ns||(ns={}));var pb;(function(e){e.websocket="websocket"})(pb||(pb={}));var nl;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(nl||(nl={}));class tD{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,n){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(t));let i=[t.join_ref,t.ref,t.topic,t.event,t.payload];return n(JSON.stringify(i))}_binaryEncodeUserBroadcastPush(t){var n;return this._isArrayBuffer((n=t.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var n,i;const o=(i=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&i!==void 0?i:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,o)}_encodeJsonUserBroadcastPush(t){var n,i;const o=(i=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&i!==void 0?i:{},u=new TextEncoder().encode(JSON.stringify(o)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,u)}_encodeUserBroadcastPush(t,n,i){var o,l;const u=t.topic,f=(o=t.ref)!==null&&o!==void 0?o:"",m=(l=t.join_ref)!==null&&l!==void 0?l:"",p=t.payload.event,y=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},_=Object.keys(y).length===0?"":JSON.stringify(y);if(m.length>255)throw new Error(`joinRef length ${m.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`ref length ${f.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`topic length ${u.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`userEvent length ${p.length} exceeds maximum of 255`);if(_.length>255)throw new Error(`metadata length ${_.length} exceeds maximum of 255`);const x=this.USER_BROADCAST_PUSH_META_LENGTH+m.length+f.length+u.length+p.length+_.length,S=new ArrayBuffer(this.HEADER_LENGTH+x);let T=new DataView(S),k=0;T.setUint8(k++,this.KINDS.userBroadcastPush),T.setUint8(k++,m.length),T.setUint8(k++,f.length),T.setUint8(k++,u.length),T.setUint8(k++,p.length),T.setUint8(k++,_.length),T.setUint8(k++,n),Array.from(m,C=>T.setUint8(k++,C.charCodeAt(0))),Array.from(f,C=>T.setUint8(k++,C.charCodeAt(0))),Array.from(u,C=>T.setUint8(k++,C.charCodeAt(0))),Array.from(p,C=>T.setUint8(k++,C.charCodeAt(0))),Array.from(_,C=>T.setUint8(k++,C.charCodeAt(0)));var j=new Uint8Array(S.byteLength+i.byteLength);return j.set(new Uint8Array(S),0),j.set(new Uint8Array(i),S.byteLength),j.buffer}decode(t,n){if(this._isArrayBuffer(t)){let i=this._binaryDecode(t);return n(i)}if(typeof t=="string"){const i=JSON.parse(t),[o,l,u,f,m]=i;return n({join_ref:o,ref:l,topic:u,event:f,payload:m})}return n({})}_binaryDecode(t){const n=new DataView(t),i=n.getUint8(0),o=new TextDecoder;switch(i){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,n,o)}}_decodeUserBroadcast(t,n,i){const o=n.getUint8(1),l=n.getUint8(2),u=n.getUint8(3),f=n.getUint8(4);let m=this.HEADER_LENGTH+4;const p=i.decode(t.slice(m,m+o));m=m+o;const y=i.decode(t.slice(m,m+l));m=m+l;const _=i.decode(t.slice(m,m+u));m=m+u;const x=t.slice(m,t.byteLength),S=f===this.JSON_ENCODING?JSON.parse(i.decode(x)):x,T={type:this.BROADCAST_EVENT,event:y,payload:S};return u>0&&(T.meta=JSON.parse(_)),{join_ref:null,ref:null,topic:p,event:this.BROADCAST_EVENT,payload:T}}_isArrayBuffer(t){var n;return t instanceof ArrayBuffer||((n=t?.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(t,n){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([i])=>n.includes(i)))}}class NE{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Kt;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Kt||(Kt={}));const Tw=(e,t,n={})=>{var i;const o=(i=n.skipTypes)!==null&&i!==void 0?i:[];return t?Object.keys(t).reduce((l,u)=>(l[u]=nD(u,e,t,o),l),{}):{}},nD=(e,t,n,i)=>{const o=t.find(f=>f.name===e),l=o?.type,u=n[e];return l&&!i.includes(l)?OE(l,u):gb(u)},OE=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return aD(t,n)}switch(e){case Kt.bool:return rD(t);case Kt.float4:case Kt.float8:case Kt.int2:case Kt.int4:case Kt.int8:case Kt.numeric:case Kt.oid:return iD(t);case Kt.json:case Kt.jsonb:return sD(t);case Kt.timestamp:return oD(t);case Kt.abstime:case Kt.date:case Kt.daterange:case Kt.int4range:case Kt.int8range:case Kt.money:case Kt.reltime:case Kt.text:case Kt.time:case Kt.timestamptz:case Kt.timetz:case Kt.tsrange:case Kt.tstzrange:return gb(t);default:return gb(t)}},gb=e=>e,rD=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},iD=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},sD=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},aD=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,i=e[n];if(e[0]==="{"&&i==="}"){let l;const u=e.slice(1,n);try{l=JSON.parse("["+u+"]")}catch{l=u?u.split(","):[]}return l.map(f=>OE(t,f))}return e},oD=e=>typeof e=="string"?e.replace(" ","T"):e,DE=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class Q0{constructor(t,n,i={},o=mb){this.channel=t,this.event=n,this.payload=i,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var i;return this._hasReceived(t)&&n((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(i=>i.status===t).forEach(i=>i.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var bb;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(bb||(bb={}));let ME=class zf{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=n?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},o=>{const{onJoin:l,onLeave:u,onSync:f}=this.caller;this.joinRef=this.channel._joinRef(),this.state=zf.syncState(this.state,o,l,u),this.pendingDiffs.forEach(m=>{this.state=zf.syncDiff(this.state,m,l,u)}),this.pendingDiffs=[],f()}),this.channel._on(i.diff,{},o=>{const{onJoin:l,onLeave:u,onSync:f}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=zf.syncDiff(this.state,o,l,u),f())}),this.onJoin((o,l,u)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:l,newPresences:u})}),this.onLeave((o,l,u)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:l,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,i,o){const l=this.cloneDeep(t),u=this.transformState(n),f={},m={};return this.map(l,(p,y)=>{u[p]||(m[p]=y)}),this.map(u,(p,y)=>{const _=l[p];if(_){const x=y.map(j=>j.presence_ref),S=_.map(j=>j.presence_ref),T=y.filter(j=>S.indexOf(j.presence_ref)<0),k=_.filter(j=>x.indexOf(j.presence_ref)<0);T.length>0&&(f[p]=T),k.length>0&&(m[p]=k)}else f[p]=y}),this.syncDiff(l,{joins:f,leaves:m},i,o)}static syncDiff(t,n,i,o){const{joins:l,leaves:u}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return i||(i=()=>{}),o||(o=()=>{}),this.map(l,(f,m)=>{var p;const y=(p=t[f])!==null&&p!==void 0?p:[];if(t[f]=this.cloneDeep(m),y.length>0){const _=t[f].map(S=>S.presence_ref),x=y.filter(S=>_.indexOf(S.presence_ref)<0);t[f].unshift(...x)}i(f,y,m)}),this.map(u,(f,m)=>{let p=t[f];if(!p)return;const y=m.map(_=>_.presence_ref);p=p.filter(_=>y.indexOf(_.presence_ref)<0),t[f]=p,o(f,p,m),p.length===0&&delete t[f]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(i=>n(i,t[i]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,i)=>{const o=t[i];return"metas"in o?n[i]=o.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):n[i]=o,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var yb;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(yb||(yb={}));var pc;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(pc||(pc={}));var Ss;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Ss||(Ss={}));const lD=Bn;let CE=class RE{constructor(t,n={config:{}},i){var o,l;if(this.topic=t,this.params=n,this.socket=i,this.bindings={},this.state=Bn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Q0(this,ns.join,this.params,this.timeout),this.rejoinTimer=new NE(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Bn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(u=>u.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Bn.closed,this.socket._remove(this)}),this._onError(u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=Bn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Bn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=Bn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ns.reply,{},(u,f)=>{this._trigger(this._replyEventName(f),u)}),this.presence=new ME(this),this.broadcastEndpointURL=DE(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((l=(o=this.params.config)===null||o===void 0?void 0:o.broadcast)===null||l===void 0)&&l.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var i,o,l;if(this.socket.isConnected()||this.socket.connect(),this.state==Bn.closed){const{config:{broadcast:u,presence:f,private:m}}=this.params,p=(o=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(S=>S.filter))!==null&&o!==void 0?o:[],y=!!this.bindings[pc.PRESENCE]&&this.bindings[pc.PRESENCE].length>0||((l=this.params.config.presence)===null||l===void 0?void 0:l.enabled)===!0,_={},x={broadcast:u,presence:Object.assign(Object.assign({},f),{enabled:y}),postgres_changes:p,private:m};this.socket.accessTokenValue&&(_.access_token=this.socket.accessTokenValue),this._onError(S=>t?.(Ss.CHANNEL_ERROR,S)),this._onClose(()=>t?.(Ss.CLOSED)),this.updateJoinPayload(Object.assign({config:x},_)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:S})=>{var T;if(this.socket.setAuth(),S===void 0){t?.(Ss.SUBSCRIBED);return}else{const k=this.bindings.postgres_changes,j=(T=k?.length)!==null&&T!==void 0?T:0,C=[];for(let P=0;P<j;P++){const N=k[P],{filter:{event:M,schema:D,table:$,filter:z}}=N,F=S&&S[P];if(F&&F.event===M&&F.schema===D&&F.table===$&&F.filter===z)C.push(Object.assign(Object.assign({},N),{id:F.id}));else{this.unsubscribe(),this.state=Bn.errored,t?.(Ss.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=C,t&&t(Ss.SUBSCRIBED);return}}).receive("error",S=>{this.state=Bn.errored,t?.(Ss.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(S).join(", ")||"error")))}).receive("timeout",()=>{t?.(Ss.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,i){return this.state===Bn.joined&&t===pc.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,i)}async httpSend(t,n,i={}){var o;const l=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(n==null)return Promise.reject("Payload is required for httpSend()");const u={method:"POST",headers:{Authorization:l,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:n,private:this.private}]})},f=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(o=i.timeout)!==null&&o!==void 0?o:this.timeout);if(f.status===202)return{success:!0};let m=f.statusText;try{const p=await f.json();m=p.error||p.message||m}catch{}return Promise.reject(new Error(m))}async send(t,n={}){var i,o;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:l,payload:u}=t,m={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:u,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,m,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);return await((o=p.body)===null||o===void 0?void 0:o.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var u,f,m;const p=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((m=(f=(u=this.params)===null||u===void 0?void 0:u.config)===null||f===void 0?void 0:f.broadcast)===null||m===void 0)&&m.ack)&&l("ok"),p.receive("ok",()=>l("ok")),p.receive("error",()=>l("error")),p.receive("timeout",()=>l("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Bn.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ns.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(o=>{i=new Q0(this,ns.leave,{},t),i.receive("ok",()=>{n(),o("ok")}).receive("timeout",()=>{n(),o("timed out")}).receive("error",()=>{o("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i?.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Bn.closed,this.bindings={}}async _fetchWithTimeout(t,n,i){const o=new AbortController,l=setTimeout(()=>o.abort(),i),u=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:o.signal}));return clearTimeout(l),u}_push(t,n,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new Q0(this,t,n,i);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>eD){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,i){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,i){var o,l;const u=t.toLocaleLowerCase(),{close:f,error:m,leave:p,join:y}=ns;if(i&&[f,m,p,y].indexOf(u)>=0&&i!==this._joinRef())return;let x=this._onMessage(u,n,i);if(n&&!x)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(S=>{var T,k,j;return((T=S.filter)===null||T===void 0?void 0:T.event)==="*"||((j=(k=S.filter)===null||k===void 0?void 0:k.event)===null||j===void 0?void 0:j.toLocaleLowerCase())===u}).map(S=>S.callback(x,i)):(l=this.bindings[u])===null||l===void 0||l.filter(S=>{var T,k,j,C,P,N;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in S){const M=S.id,D=(T=S.filter)===null||T===void 0?void 0:T.event;return M&&((k=n.ids)===null||k===void 0?void 0:k.includes(M))&&(D==="*"||D?.toLocaleLowerCase()===((j=n.data)===null||j===void 0?void 0:j.type.toLocaleLowerCase()))}else{const M=(P=(C=S?.filter)===null||C===void 0?void 0:C.event)===null||P===void 0?void 0:P.toLocaleLowerCase();return M==="*"||M===((N=n?.event)===null||N===void 0?void 0:N.toLocaleLowerCase())}else return S.type.toLocaleLowerCase()===u}).map(S=>{if(typeof x=="object"&&"ids"in x){const T=x.data,{schema:k,table:j,commit_timestamp:C,type:P,errors:N}=T;x=Object.assign(Object.assign({},{schema:k,table:j,commit_timestamp:C,eventType:P,new:{},old:{},errors:N}),this._getPayloadRecords(T))}S.callback(x,i)})}_isClosed(){return this.state===Bn.closed}_isJoined(){return this.state===Bn.joined}_isJoining(){return this.state===Bn.joining}_isLeaving(){return this.state===Bn.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,i){const o=t.toLocaleLowerCase(),l={type:o,filter:n,callback:i};return this.bindings[o]?this.bindings[o].push(l):this.bindings[o]=[l],this}_off(t,n){const i=t.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(o=>{var l;return!(((l=o.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===i&&RE.isEqual(o.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const i in t)if(t[i]!==n[i])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(ns.close,{},t)}_onError(t){this._on(ns.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Bn.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=Tw(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=Tw(t.columns,t.old_record)),n}};const eg=()=>{},ef={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},cD=[1e3,2e3,5e3,1e4],uD=1e4,dD=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;let hD=class{constructor(t,n){var i;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=mb,this.transport=null,this.heartbeatIntervalMs=ef.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=eg,this.ref=0,this.reconnectTimer=null,this.vsn=Ew,this.logger=eg,this.conn=null,this.sendBuffer=[],this.serializer=new tD,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=o=>o?(...l)=>o(...l):(...l)=>fetch(...l),!(!((i=n?.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${pb.websocket}`,this.httpEndpoint=DE(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=AE.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,i){this.logger(t,n,i)}connectionState(){switch(this.conn&&this.conn.readyState){case tl.connecting:return nl.Connecting;case tl.open:return nl.Open;case tl.closing:return nl.Closing;default:return nl.Closed}}isConnected(){return this.connectionState()===nl.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const i=`realtime:${t}`,o=this.getChannels().find(l=>l.topic===i);if(o)return o;{const l=new CE(`realtime:${t}`,n,this);return this.channels.push(l),l}}push(t){const{topic:n,event:i,payload:o,ref:l}=t,u=()=>{this.encode(t,f=>{var m;(m=this.conn)===null||m===void 0||m.send(f)})};this.log("push",`${n} ${i} (${l})`,o),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(QO,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},ef.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(i=>i.topic===t&&(i._isJoined()||i._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(p){this.log("error","error in heartbeat callback",p)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:i,event:o,payload:l,ref:u}=n,f=u?`(${u})`:"",m=l.status||"";this.log("receive",`${m} ${i} ${o} ${f}`.trim(),l),this.channels.filter(p=>p._isMember(i)).forEach(p=>p._trigger(o,l,u)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){if(this.conn){if(this.conn.readyState===tl.open||this.conn.readyState===tl.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(ns.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const i=t.match(/\?/)?"&":"?",o=new URLSearchParams(n);return`${t}${i}${o}`}_workerObjectUrl(t){let n;if(t)n=t;else{const i=new Blob([dD],{type:"application/javascript"});n=URL.createObjectURL(i)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(i=>{const o={access_token:n,version:XO};n&&i.updateJoinPayload(o),i.joinedOnce&&i._isJoined()&&i._push(ns.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(i=>{try{i(n)}catch(o){this.log("error",`error in ${t} callback`,o)}})}catch(i){this.log("error",`error triggering ${t} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new NE(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ef.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,i,o,l,u,f,m,p,y,_,x,S;switch(this.transport=(n=t?.transport)!==null&&n!==void 0?n:null,this.timeout=(i=t?.timeout)!==null&&i!==void 0?i:mb,this.heartbeatIntervalMs=(o=t?.heartbeatIntervalMs)!==null&&o!==void 0?o:ef.HEARTBEAT_INTERVAL,this.worker=(l=t?.worker)!==null&&l!==void 0?l:!1,this.accessToken=(u=t?.accessToken)!==null&&u!==void 0?u:null,this.heartbeatCallback=(f=t?.heartbeatCallback)!==null&&f!==void 0?f:eg,this.vsn=(m=t?.vsn)!==null&&m!==void 0?m:Ew,t?.params&&(this.params=t.params),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(p=t?.reconnectAfterMs)!==null&&p!==void 0?p:(T=>cD[T-1]||uD),this.vsn){case jE:this.encode=(y=t?.encode)!==null&&y!==void 0?y:((T,k)=>k(JSON.stringify(T))),this.decode=(_=t?.decode)!==null&&_!==void 0?_:((T,k)=>k(JSON.parse(T)));break;case JO:this.encode=(x=t?.encode)!==null&&x!==void 0?x:this.serializer.encode.bind(this.serializer),this.decode=(S=t?.decode)!==null&&S!==void 0?S:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t?.workerUrl}}};const fD=Object.freeze(Object.defineProperty({__proto__:null,REALTIME_CHANNEL_STATES:lD,get REALTIME_LISTEN_TYPES(){return pc},get REALTIME_POSTGRES_CHANGES_LISTEN_EVENT(){return yb},get REALTIME_PRESENCE_LISTEN_EVENTS(){return bb},get REALTIME_SUBSCRIBE_STATES(){return Ss},RealtimeChannel:CE,RealtimeClient:hD,RealtimePresence:ME,WebSocketFactory:AE},Symbol.toStringTag,{value:"Module"})),LE=pd(fD);class yd extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function ln(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class BE extends yd{constructor(t,n,i){super(t),this.name="StorageApiError",this.status=n,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class em extends yd{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}const ty=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),mD=()=>Response,vb=e=>{if(Array.isArray(e))return e.map(n=>vb(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,i])=>{const o=n.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));t[o]=vb(i)}),t},pD=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},gD=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e),tg=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},bD=(e,t,n)=>Ze(void 0,void 0,void 0,function*(){const i=yield mD();e instanceof i&&!n?.noResolveJson?e.json().then(o=>{const l=e.status||500,u=o?.statusCode||l+"";t(new BE(tg(o),l,u))}).catch(o=>{t(new em(tg(o),o))}):t(new em(tg(e),e))}),yD=(e,t,n,i)=>{const o={method:e,headers:t?.headers||{}};return e==="GET"||!i?o:(pD(i)?(o.headers=Object.assign({"Content-Type":"application/json"},t?.headers),o.body=JSON.stringify(i)):o.body=i,t?.duplex&&(o.duplex=t.duplex),Object.assign(Object.assign({},o),n))};function vd(e,t,n,i,o,l){return Ze(this,void 0,void 0,function*(){return new Promise((u,f)=>{e(n,yD(t,i,o,l)).then(m=>{if(!m.ok)throw m;return i?.noResolveJson?m:m.json()}).then(m=>u(m)).catch(m=>bD(m,f,i))})})}function td(e,t,n,i){return Ze(this,void 0,void 0,function*(){return vd(e,"GET",t,n,i)})}function ts(e,t,n,i,o){return Ze(this,void 0,void 0,function*(){return vd(e,"POST",t,i,o,n)})}function _b(e,t,n,i,o){return Ze(this,void 0,void 0,function*(){return vd(e,"PUT",t,i,o,n)})}function vD(e,t,n,i){return Ze(this,void 0,void 0,function*(){return vd(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),i)})}function ny(e,t,n,i,o){return Ze(this,void 0,void 0,function*(){return vd(e,"DELETE",t,i,o,n)})}class _D{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n}then(t,n){return this.execute().then(t,n)}execute(){return Ze(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ln(t))return{data:null,error:t};throw t}})}}var PE;class xD{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n,this[PE]="BlobDownloadBuilder",this.promise=null}asStream(){return new _D(this.downloadFn,this.shouldThrowOnError)}then(t,n){return this.getPromise().then(t,n)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return Ze(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ln(t))return{data:null,error:t};throw t}})}}PE=Symbol.toStringTag;const wD={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},kw={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class SD{constructor(t,n={},i,o){this.shouldThrowOnError=!1,this.url=t,this.headers=n,this.bucketId=i,this.fetch=ty(o)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,n,i,o){return Ze(this,void 0,void 0,function*(){try{let l;const u=Object.assign(Object.assign({},kw),o);let f=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(u.upsert)});const m=u.metadata;typeof Blob<"u"&&i instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),m&&l.append("metadata",this.encodeMetadata(m)),l.append("",i)):typeof FormData<"u"&&i instanceof FormData?(l=i,l.has("cacheControl")||l.append("cacheControl",u.cacheControl),m&&!l.has("metadata")&&l.append("metadata",this.encodeMetadata(m))):(l=i,f["cache-control"]=`max-age=${u.cacheControl}`,f["content-type"]=u.contentType,m&&(f["x-metadata"]=this.toBase64(this.encodeMetadata(m))),(typeof ReadableStream<"u"&&l instanceof ReadableStream||l&&typeof l=="object"&&"pipe"in l&&typeof l.pipe=="function")&&!u.duplex&&(u.duplex="half")),o?.headers&&(f=Object.assign(Object.assign({},f),o.headers));const p=this._removeEmptyFolders(n),y=this._getFinalPath(p),_=yield(t=="PUT"?_b:ts)(this.fetch,`${this.url}/object/${y}`,l,Object.assign({headers:f},u?.duplex?{duplex:u.duplex}:{}));return{data:{path:p,id:_.Id,fullPath:_.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(ln(l))return{data:null,error:l};throw l}})}upload(t,n,i){return Ze(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,i)})}uploadToSignedUrl(t,n,i,o){return Ze(this,void 0,void 0,function*(){const l=this._removeEmptyFolders(t),u=this._getFinalPath(l),f=new URL(this.url+`/object/upload/sign/${u}`);f.searchParams.set("token",n);try{let m;const p=Object.assign({upsert:kw.upsert},o),y=Object.assign(Object.assign({},this.headers),{"x-upsert":String(p.upsert)});typeof Blob<"u"&&i instanceof Blob?(m=new FormData,m.append("cacheControl",p.cacheControl),m.append("",i)):typeof FormData<"u"&&i instanceof FormData?(m=i,m.append("cacheControl",p.cacheControl)):(m=i,y["cache-control"]=`max-age=${p.cacheControl}`,y["content-type"]=p.contentType);const _=yield _b(this.fetch,f.toString(),m,{headers:y});return{data:{path:l,fullPath:_.Key},error:null}}catch(m){if(this.shouldThrowOnError)throw m;if(ln(m))return{data:null,error:m};throw m}})}createSignedUploadUrl(t,n){return Ze(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t);const o=Object.assign({},this.headers);n?.upsert&&(o["x-upsert"]="true");const l=yield ts(this.fetch,`${this.url}/object/upload/sign/${i}`,{},{headers:o}),u=new URL(this.url+l.url),f=u.searchParams.get("token");if(!f)throw new yd("No token returned by API");return{data:{signedUrl:u.toString(),path:t,token:f},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ln(i))return{data:null,error:i};throw i}})}update(t,n,i){return Ze(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,i)})}move(t,n,i){return Ze(this,void 0,void 0,function*(){try{return{data:yield ts(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:i?.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(ln(o))return{data:null,error:o};throw o}})}copy(t,n,i){return Ze(this,void 0,void 0,function*(){try{return{data:{path:(yield ts(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:i?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(ln(o))return{data:null,error:o};throw o}})}createSignedUrl(t,n,i){return Ze(this,void 0,void 0,function*(){try{let o=this._getFinalPath(t),l=yield ts(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:n},i?.transform?{transform:i.transform}:{}),{headers:this.headers});const u=i?.download?`&download=${i.download===!0?"":i.download}`:"";return l={signedUrl:encodeURI(`${this.url}${l.signedURL}${u}`)},{data:l,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(ln(o))return{data:null,error:o};throw o}})}createSignedUrls(t,n,i){return Ze(this,void 0,void 0,function*(){try{const o=yield ts(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),l=i?.download?`&download=${i.download===!0?"":i.download}`:"";return{data:o.map(u=>Object.assign(Object.assign({},u),{signedUrl:u.signedURL?encodeURI(`${this.url}${u.signedURL}${l}`):null})),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(ln(o))return{data:null,error:o};throw o}})}download(t,n){const o=typeof n?.transform<"u"?"render/image/authenticated":"object",l=this.transformOptsToQueryString(n?.transform||{}),u=l?`?${l}`:"",f=this._getFinalPath(t),m=()=>td(this.fetch,`${this.url}/${o}/${f}${u}`,{headers:this.headers,noResolveJson:!0});return new xD(m,this.shouldThrowOnError)}info(t){return Ze(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const i=yield td(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:vb(i),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ln(i))return{data:null,error:i};throw i}})}exists(t){return Ze(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield vD(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ln(i)&&i instanceof em){const o=i.originalError;if([400,404].includes(o?.status))return{data:!1,error:i}}throw i}})}getPublicUrl(t,n){const i=this._getFinalPath(t),o=[],l=n?.download?`download=${n.download===!0?"":n.download}`:"";l!==""&&o.push(l);const f=typeof n?.transform<"u"?"render/image":"object",m=this.transformOptsToQueryString(n?.transform||{});m!==""&&o.push(m);let p=o.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${f}/public/${i}${p}`)}}}remove(t){return Ze(this,void 0,void 0,function*(){try{return{data:yield ny(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ln(n))return{data:null,error:n};throw n}})}list(t,n,i){return Ze(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},wD),n),{prefix:t||""});return{data:yield ts(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},i),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(ln(o))return{data:null,error:o};throw o}})}listV2(t,n){return Ze(this,void 0,void 0,function*(){try{const i=Object.assign({},t);return{data:yield ts(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ln(i))return{data:null,error:i};throw i}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const $E="2.86.2",IE={"X-Client-Info":`storage-js/${$E}`};class ED{constructor(t,n={},i,o){this.shouldThrowOnError=!1;const l=new URL(t);o?.useNewHostname&&/supabase\.(co|in|red)$/.test(l.hostname)&&!l.hostname.includes("storage.supabase.")&&(l.hostname=l.hostname.replace("supabase.","storage.supabase.")),this.url=l.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},IE),n),this.fetch=ty(i)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(t){return Ze(this,void 0,void 0,function*(){try{const n=this.listBucketOptionsToQueryString(t);return{data:yield td(this.fetch,`${this.url}/bucket${n}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ln(n))return{data:null,error:n};throw n}})}getBucket(t){return Ze(this,void 0,void 0,function*(){try{return{data:yield td(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ln(n))return{data:null,error:n};throw n}})}createBucket(t){return Ze(this,arguments,void 0,function*(n,i={public:!1}){try{return{data:yield ts(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:i.type,public:i.public,file_size_limit:i.fileSizeLimit,allowed_mime_types:i.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(ln(o))return{data:null,error:o};throw o}})}updateBucket(t,n){return Ze(this,void 0,void 0,function*(){try{return{data:yield _b(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ln(i))return{data:null,error:i};throw i}})}emptyBucket(t){return Ze(this,void 0,void 0,function*(){try{return{data:yield ts(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ln(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Ze(this,void 0,void 0,function*(){try{return{data:yield ny(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ln(n))return{data:null,error:n};throw n}})}listBucketOptionsToQueryString(t){const n={};return t&&("limit"in t&&(n.limit=String(t.limit)),"offset"in t&&(n.offset=String(t.offset)),t.search&&(n.search=t.search),t.sortColumn&&(n.sortColumn=t.sortColumn),t.sortOrder&&(n.sortOrder=t.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}}var nd=class extends Error{constructor(e,t){super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&t.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function TD(e,t,n){const i=new URL(t,e);if(n)for(const[o,l]of Object.entries(n))l!==void 0&&i.searchParams.set(o,l);return i.toString()}async function kD(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function AD(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:n,path:i,query:o,body:l,headers:u}){const f=TD(e.baseUrl,i,o),m=await kD(e.auth),p=await t(f,{method:n,headers:{...l?{"Content-Type":"application/json"}:{},...m,...u},body:l?JSON.stringify(l):void 0}),y=await p.text(),_=(p.headers.get("content-type")||"").includes("application/json"),x=_&&y?JSON.parse(y):y;if(!p.ok){const S=_?x:void 0,T=S?.error;throw new nd(T?.message??`Request failed with status ${p.status}`,{status:p.status,icebergType:T?.type,icebergCode:T?.code,details:S})}return{status:p.status,headers:p.headers,data:x}}}}function tf(e){return e.join("")}var jD=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:tf(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(i=>({namespace:i}))}async createNamespace(e,t){const n={namespace:e.namespace,properties:t?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${tf(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${tf(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${tf(e.namespace)}`}),!0}catch(t){if(t instanceof nd&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(n){if(n instanceof nd&&n.status===409)return;throw n}}};function Jl(e){return e.join("")}var ND=class{constructor(e,t="",n){this.client=e,this.prefix=t,this.accessDelegation=n}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Jl(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Jl(e.namespace)}/tables`,body:t,headers:n})).data.metadata}async updateTable(e,t){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Jl(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Jl(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String(t?.purge??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Jl(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Jl(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(n){if(n instanceof nd&&n.status===404)return!1;throw n}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(n){if(n instanceof nd&&n.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw n}}},OD=class{constructor(e){let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const n=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=AD({baseUrl:n,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=e.accessDelegation?.join(","),this.namespaceOps=new jD(this.client,t),this.tableOps=new ND(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}};class zE{constructor(t,n={},i){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},IE),n),this.fetch=ty(i)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return Ze(this,void 0,void 0,function*(){try{return{data:yield ts(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ln(n))return{data:null,error:n};throw n}})}listBuckets(t){return Ze(this,void 0,void 0,function*(){try{const n=new URLSearchParams;t?.limit!==void 0&&n.set("limit",t.limit.toString()),t?.offset!==void 0&&n.set("offset",t.offset.toString()),t?.sortColumn&&n.set("sortColumn",t.sortColumn),t?.sortOrder&&n.set("sortOrder",t.sortOrder),t?.search&&n.set("search",t.search);const i=n.toString(),o=i?`${this.url}/bucket?${i}`:`${this.url}/bucket`;return{data:yield td(this.fetch,o,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ln(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Ze(this,void 0,void 0,function*(){try{return{data:yield ny(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ln(n))return{data:null,error:n};throw n}})}from(t){if(!gD(t))throw new yd("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");return new OD({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:()=>Ze(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch})}}const ry={"X-Client-Info":`storage-js/${$E}`,"Content-Type":"application/json"};class iy extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Fr(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}class Uf extends iy{constructor(t,n,i){super(t),this.name="StorageVectorsApiError",this.status=n,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class UE extends iy{constructor(t,n){super(t),this.name="StorageVectorsUnknownError",this.originalError=n}}var xb;(function(e){e.InternalError="InternalError",e.S3VectorConflictException="S3VectorConflictException",e.S3VectorNotFoundException="S3VectorNotFoundException",e.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",e.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",e.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(xb||(xb={}));const Dm=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),DD=()=>Response,HE=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},MD=e=>Array.from(new Float32Array(e)),CD=(e,t)=>{if(t!==void 0&&e.float32.length!==t)throw new Error(`Vector dimension mismatch: expected ${t}, got ${e.float32.length}`)},Aw=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),RD=(e,t,n)=>Ze(void 0,void 0,void 0,function*(){if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!n?.noResolveJson){const o=e.status||500,l=e;if(typeof l.json=="function")l.json().then(u=>{const f=u?.statusCode||u?.code||o+"";t(new Uf(Aw(u),o,f))}).catch(()=>{const u=o+"",f=l.statusText||`HTTP ${o} error`;t(new Uf(f,o,u))});else{const u=o+"",f=l.statusText||`HTTP ${o} error`;t(new Uf(f,o,u))}}else t(new UE(Aw(e),e))}),LD=(e,t,n,i)=>{const o={method:e,headers:t?.headers||{}};return i?(HE(i)?(o.headers=Object.assign({"Content-Type":"application/json"},t?.headers),o.body=JSON.stringify(i)):o.body=i,Object.assign(Object.assign({},o),n)):o};function BD(e,t,n,i,o,l){return Ze(this,void 0,void 0,function*(){return new Promise((u,f)=>{e(n,LD(t,i,o,l)).then(m=>{if(!m.ok)throw m;if(i?.noResolveJson)return m;const p=m.headers.get("content-type");return!p||!p.includes("application/json")?{}:m.json()}).then(m=>u(m)).catch(m=>RD(m,f,i))})})}function li(e,t,n,i,o){return Ze(this,void 0,void 0,function*(){return BD(e,"POST",t,i,o,n)})}class GE{constructor(t,n={},i){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},ry),n),this.fetch=Dm(i)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return Ze(this,void 0,void 0,function*(){try{return{data:(yield li(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Fr(n))return{data:null,error:n};throw n}})}getIndex(t,n){return Ze(this,void 0,void 0,function*(){try{return{data:yield li(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:n},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Fr(i))return{data:null,error:i};throw i}})}listIndexes(t){return Ze(this,void 0,void 0,function*(){try{return{data:yield li(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Fr(n))return{data:null,error:n};throw n}})}deleteIndex(t,n){return Ze(this,void 0,void 0,function*(){try{return{data:(yield li(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:n},{headers:this.headers}))||{},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Fr(i))return{data:null,error:i};throw i}})}}class FE{constructor(t,n={},i){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},ry),n),this.fetch=Dm(i)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return Ze(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield li(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Fr(n))return{data:null,error:n};throw n}})}getVectors(t){return Ze(this,void 0,void 0,function*(){try{return{data:yield li(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Fr(n))return{data:null,error:n};throw n}})}listVectors(t){return Ze(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield li(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Fr(n))return{data:null,error:n};throw n}})}queryVectors(t){return Ze(this,void 0,void 0,function*(){try{return{data:yield li(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Fr(n))return{data:null,error:n};throw n}})}deleteVectors(t){return Ze(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield li(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Fr(n))return{data:null,error:n};throw n}})}}class YE{constructor(t,n={},i){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},ry),n),this.fetch=Dm(i)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return Ze(this,void 0,void 0,function*(){try{return{data:(yield li(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Fr(n))return{data:null,error:n};throw n}})}getBucket(t){return Ze(this,void 0,void 0,function*(){try{return{data:yield li(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Fr(n))return{data:null,error:n};throw n}})}listBuckets(){return Ze(this,arguments,void 0,function*(t={}){try{return{data:yield li(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Fr(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Ze(this,void 0,void 0,function*(){try{return{data:(yield li(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Fr(n))return{data:null,error:n};throw n}})}}class qE extends YE{constructor(t,n={}){super(t,n.headers||{},n.fetch)}from(t){return new ZE(this.url,this.headers,t,this.fetch)}createBucket(t){const n=Object.create(null,{createBucket:{get:()=>super.createBucket}});return Ze(this,void 0,void 0,function*(){return n.createBucket.call(this,t)})}getBucket(t){const n=Object.create(null,{getBucket:{get:()=>super.getBucket}});return Ze(this,void 0,void 0,function*(){return n.getBucket.call(this,t)})}listBuckets(){const t=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return Ze(this,arguments,void 0,function*(n={}){return t.listBuckets.call(this,n)})}deleteBucket(t){const n=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return Ze(this,void 0,void 0,function*(){return n.deleteBucket.call(this,t)})}}class ZE extends GE{constructor(t,n,i,o){super(t,n,o),this.vectorBucketName=i}createIndex(t){const n=Object.create(null,{createIndex:{get:()=>super.createIndex}});return Ze(this,void 0,void 0,function*(){return n.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return Ze(this,arguments,void 0,function*(n={}){return t.listIndexes.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){const n=Object.create(null,{getIndex:{get:()=>super.getIndex}});return Ze(this,void 0,void 0,function*(){return n.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){const n=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return Ze(this,void 0,void 0,function*(){return n.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new VE(this.url,this.headers,this.vectorBucketName,t,this.fetch)}}class VE extends FE{constructor(t,n,i,o,l){super(t,n,l),this.vectorBucketName=i,this.indexName=o}putVectors(t){const n=Object.create(null,{putVectors:{get:()=>super.putVectors}});return Ze(this,void 0,void 0,function*(){return n.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){const n=Object.create(null,{getVectors:{get:()=>super.getVectors}});return Ze(this,void 0,void 0,function*(){return n.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return Ze(this,arguments,void 0,function*(n={}){return t.listVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){const n=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return Ze(this,void 0,void 0,function*(){return n.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){const n=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return Ze(this,void 0,void 0,function*(){return n.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class PD extends ED{constructor(t,n={},i,o){super(t,n,i,o)}from(t){return new SD(this.url,this.headers,t,this.fetch)}get vectors(){return new qE(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new zE(this.url+"/iceberg",this.headers,this.fetch)}}const $D=Object.freeze(Object.defineProperty({__proto__:null,StorageAnalyticsClient:zE,StorageApiError:BE,StorageClient:PD,StorageError:yd,StorageUnknownError:em,StorageVectorsApiError:Uf,StorageVectorsClient:qE,StorageVectorsError:iy,get StorageVectorsErrorCode(){return xb},StorageVectorsUnknownError:UE,VectorBucketApi:YE,VectorBucketScope:ZE,VectorDataApi:FE,VectorIndexApi:GE,VectorIndexScope:VE,isPlainObject:HE,isStorageError:ln,isStorageVectorsError:Fr,normalizeToFloat32:MD,resolveFetch:Dm,resolveResponse:DD,validateVectorDimension:CD},Symbol.toStringTag,{value:"Module"})),ID=pd($D);var ng={},Mu={},jw;function zD(){return jw||(jw=1,Object.defineProperty(Mu,"__esModule",{value:!0}),Mu.version=void 0,Mu.version="2.86.2"),Mu}var Nw;function UD(){return Nw||(Nw=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_REALTIME_OPTIONS=e.DEFAULT_AUTH_OPTIONS=e.DEFAULT_DB_OPTIONS=e.DEFAULT_GLOBAL_OPTIONS=e.DEFAULT_HEADERS=void 0;const t=zD();let n="";typeof Deno<"u"?n="deno":typeof document<"u"?n="web":typeof navigator<"u"&&navigator.product==="ReactNative"?n="react-native":n="node",e.DEFAULT_HEADERS={"X-Client-Info":`supabase-js-${n}/${t.version}`},e.DEFAULT_GLOBAL_OPTIONS={headers:e.DEFAULT_HEADERS},e.DEFAULT_DB_OPTIONS={schema:"public"},e.DEFAULT_AUTH_OPTIONS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},e.DEFAULT_REALTIME_OPTIONS={}})(ng)),ng}var rg={},Ow;function HD(){return Ow||(Ow=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.fetchWithAuth=e.resolveHeadersConstructor=e.resolveFetch=void 0;const t=o=>o?(...l)=>o(...l):(...l)=>fetch(...l);e.resolveFetch=t;const n=()=>Headers;e.resolveHeadersConstructor=n;const i=(o,l,u)=>{const f=(0,e.resolveFetch)(u),m=(0,e.resolveHeadersConstructor)();return async(p,y)=>{var _;const x=(_=await l())!==null&&_!==void 0?_:o;let S=new m(y?.headers);return S.has("apikey")||S.set("apikey",o),S.has("Authorization")||S.set("Authorization",`Bearer ${x}`),f(p,Object.assign(Object.assign({},y),{headers:S}))}};e.fetchWithAuth=i})(rg)),rg}var Ks={},Dw;function GD(){if(Dw)return Ks;Dw=1,Object.defineProperty(Ks,"__esModule",{value:!0}),Ks.isBrowser=void 0,Ks.uuid=e,Ks.ensureTrailingSlash=t,Ks.applySettingDefaults=i,Ks.validateSupabaseUrl=o;function e(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(l){var u=Math.random()*16|0,f=l=="x"?u:u&3|8;return f.toString(16)})}function t(l){return l.endsWith("/")?l:l+"/"}const n=()=>typeof window<"u";Ks.isBrowser=n;function i(l,u){var f,m;const{db:p,auth:y,realtime:_,global:x}=l,{db:S,auth:T,realtime:k,global:j}=u,C={db:Object.assign(Object.assign({},S),p),auth:Object.assign(Object.assign({},T),y),realtime:Object.assign(Object.assign({},k),_),storage:{},global:Object.assign(Object.assign(Object.assign({},j),x),{headers:Object.assign(Object.assign({},(f=j?.headers)!==null&&f!==void 0?f:{}),(m=x?.headers)!==null&&m!==void 0?m:{})}),accessToken:async()=>""};return l.accessToken?C.accessToken=l.accessToken:delete C.accessToken,C}function o(l){const u=l?.trim();if(!u)throw new Error("supabaseUrl is required.");if(!u.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(t(u))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}return Ks}var Cu={};const KE="2.86.2",lc=30*1e3,wb=3,ig=wb*lc,FD="http://localhost:9999",YD="supabase.auth.token",qD={"X-Client-Info":`gotrue-js/${KE}`},Sb="X-Supabase-Api-Version",WE={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},ZD=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,VD=600*1e3;let _c=class extends Error{constructor(t,n,i){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=i}};function We(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}let XE=class extends _c{constructor(t,n,i){super(t,n,i),this.name="AuthApiError",this.status=n,this.code=i}};function JE(e){return We(e)&&e.name==="AuthApiError"}let Ya=class extends _c{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}},na=class extends _c{constructor(t,n,i,o){super(t,i,o),this.name=n,this.status=i}},Hr=class extends na{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function QE(e){return We(e)&&e.name==="AuthSessionMissingError"}let Wo=class extends na{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},Gu=class extends na{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}},Fu=class extends na{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function eT(e){return We(e)&&e.name==="AuthImplicitGrantRedirectError"}let Eb=class extends na{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},tm=class extends na{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}};function Hf(e){return We(e)&&e.name==="AuthRetryableFetchError"}let Tb=class extends na{constructor(t,n,i){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=i}};function KD(e){return We(e)&&e.name==="AuthWeakPasswordError"}let nm=class extends na{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}};const rm="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Mw=` 	
\r=`.split(""),WD=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Mw.length;t+=1)e[Mw[t].charCodeAt(0)]=-2;for(let t=0;t<rm.length;t+=1)e[rm[t].charCodeAt(0)]=t;return e})();function Cw(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const i=t.queue>>t.queuedBits-6&63;n(rm[i]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const i=t.queue>>t.queuedBits-6&63;n(rm[i]),t.queuedBits-=6}}function tT(e,t,n){const i=WD[e];if(i>-1)for(t.queue=t.queue<<6|i,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Rw(e){const t=[],n=u=>{t.push(String.fromCodePoint(u))},i={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},l=u=>{QD(u,i,n)};for(let u=0;u<e.length;u+=1)tT(e.charCodeAt(u),o,l);return t.join("")}function XD(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function JD(e,t){for(let n=0;n<e.length;n+=1){let i=e.charCodeAt(n);if(i>55295&&i<=56319){const o=(i-55296)*1024&65535;i=(e.charCodeAt(n+1)-56320&65535|o)+65536,n+=1}XD(i,t)}}function QD(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let i=1;i<6;i+=1)if((e>>7-i&1)===0){t.utf8seq=i;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function gc(e){const t=[],n={queue:0,queuedBits:0},i=o=>{t.push(o)};for(let o=0;o<e.length;o+=1)tT(e.charCodeAt(o),n,i);return new Uint8Array(t)}function eM(e){const t=[];return JD(e,n=>t.push(n)),new Uint8Array(t)}function rl(e){const t=[],n={queue:0,queuedBits:0},i=o=>{t.push(o)};return e.forEach(o=>Cw(o,n,i)),Cw(null,n,i),t.join("")}function tM(e){return Math.round(Date.now()/1e3)+e}function nM(){return Symbol("auth-callback")}const sr=()=>typeof window<"u"&&typeof document<"u",Uo={tested:!1,writable:!1},nT=()=>{if(!sr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Uo.tested)return Uo.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Uo.tested=!0,Uo.writable=!0}catch{Uo.tested=!0,Uo.writable=!1}return Uo.writable};function rM(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((o,l)=>{t[l]=o})}catch{}return n.searchParams.forEach((i,o)=>{t[o]=i}),t}const rT=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),iM=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",cc=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Ho=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},rr=async(e,t)=>{await e.removeItem(t)};class Mm{constructor(){this.promise=new Mm.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}Mm.promiseConstructor=Promise;function sg(e){const t=e.split(".");if(t.length!==3)throw new nm("Invalid JWT structure");for(let i=0;i<t.length;i++)if(!ZD.test(t[i]))throw new nm("JWT not in base64url format");return{header:JSON.parse(Rw(t[0])),payload:JSON.parse(Rw(t[1])),signature:gc(t[2]),raw:{header:t[0],payload:t[1]}}}async function sM(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function aM(e,t){return new Promise((i,o)=>{(async()=>{for(let l=0;l<1/0;l++)try{const u=await e(l);if(!t(l,null,u)){i(u);return}}catch(u){if(!t(l,u)){o(u);return}}})()})}function oM(e){return("0"+e.toString(16)).substr(-2)}function lM(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=n.length;let o="";for(let l=0;l<56;l++)o+=n.charAt(Math.floor(Math.random()*i));return o}return crypto.getRandomValues(t),Array.from(t,oM).join("")}async function cM(e){const n=new TextEncoder().encode(e),i=await crypto.subtle.digest("SHA-256",n),o=new Uint8Array(i);return Array.from(o).map(l=>String.fromCharCode(l)).join("")}async function uM(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await cM(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ql(e,t,n=!1){const i=lM();let o=i;n&&(o+="/PASSWORD_RECOVERY"),await cc(e,`${t}-code-verifier`,o);const l=await uM(i);return[l,i===l?"plain":"s256"]}const dM=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function hM(e){const t=e.headers.get(Sb);if(!t||!t.match(dM))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function fM(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function mM(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const pM=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ec(e){if(!pM.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function ag(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function gM(e,t){return new Proxy(e,{get:(n,i,o)=>{if(i==="__isInsecureUserWarningProxy")return!0;if(typeof i=="symbol"){const l=i.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)"||l==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,i,o)}return!t.value&&typeof i=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(n,i,o)}})}function Lw(e){return JSON.parse(JSON.stringify(e))}const Xo=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),bM=[502,503,504];async function Bw(e){var t;if(!iM(e))throw new tm(Xo(e),0);if(bM.includes(e.status))throw new tm(Xo(e),e.status);let n;try{n=await e.json()}catch(l){throw new Ya(Xo(l),l)}let i;const o=hM(e);if(o&&o.getTime()>=WE["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?i=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(i=n.error_code),i){if(i==="weak_password")throw new Tb(Xo(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(i==="session_not_found")throw new Hr}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((l,u)=>l&&typeof u=="string",!0))throw new Tb(Xo(n),e.status,n.weak_password.reasons);throw new XE(Xo(n),e.status||500,i)}const yM=(e,t,n,i)=>{const o={method:e,headers:t?.headers||{}};return e==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),o.body=JSON.stringify(i),Object.assign(Object.assign({},o),n))};async function it(e,t,n,i){var o;const l=Object.assign({},i?.headers);l[Sb]||(l[Sb]=WE["2024-01-01"].name),i?.jwt&&(l.Authorization=`Bearer ${i.jwt}`);const u=(o=i?.query)!==null&&o!==void 0?o:{};i?.redirectTo&&(u.redirect_to=i.redirectTo);const f=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",m=await vM(e,t,n+f,{headers:l,noResolveJson:i?.noResolveJson},{},i?.body);return i?.xform?i?.xform(m):{data:Object.assign({},m),error:null}}async function vM(e,t,n,i,o,l){const u=yM(t,i,o,l);let f;try{f=await e(n,Object.assign({},u))}catch(m){throw console.error(m),new tm(Xo(m),0)}if(f.ok||await Bw(f),i?.noResolveJson)return f;try{return await f.json()}catch(m){await Bw(m)}}function Qi(e){var t;let n=null;wM(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=tM(e.expires_in)));const i=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:i},error:null}}function Pw(e){const t=Qi(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,i)=>n&&typeof i=="string",!0)&&(t.data.weak_password=e.weak_password),t}function qa(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function _M(e){return{data:e,error:null}}function xM(e){const{action_link:t,email_otp:n,hashed_token:i,redirect_to:o,verification_type:l}=e,u=Ac(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),f={action_link:t,email_otp:n,hashed_token:i,redirect_to:o,verification_type:l},m=Object.assign({},u);return{data:{properties:f,user:m},error:null}}function $w(e){return e}function wM(e){return e.access_token&&e.refresh_token&&e.expires_in}const Gf=["global","local","others"];let sy=class{constructor({url:t="",headers:n={},fetch:i}){this.url=t,this.headers=n,this.fetch=rT(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=Gf[0]){if(Gf.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Gf.join(", ")}`);try{return await it(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(i){if(We(i))return{data:null,error:i};throw i}}async inviteUserByEmail(t,n={}){try{return await it(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:qa})}catch(i){if(We(i))return{data:{user:null},error:i};throw i}}async generateLink(t){try{const{options:n}=t,i=Ac(t,["options"]),o=Object.assign(Object.assign({},i),n);return"newEmail"in i&&(o.new_email=i?.newEmail,delete o.newEmail),await it(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:xM,redirectTo:n?.redirectTo})}catch(n){if(We(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await it(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:qa})}catch(n){if(We(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,i,o,l,u,f,m;try{const p={nextPage:null,lastPage:0,total:0},y=await it(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(n=t?.page)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:"",per_page:(l=(o=t?.perPage)===null||o===void 0?void 0:o.toString())!==null&&l!==void 0?l:""},xform:$w});if(y.error)throw y.error;const _=await y.json(),x=(u=y.headers.get("x-total-count"))!==null&&u!==void 0?u:0,S=(m=(f=y.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&m!==void 0?m:[];return S.length>0&&(S.forEach(T=>{const k=parseInt(T.split(";")[0].split("=")[1].substring(0,1)),j=JSON.parse(T.split(";")[1].split("=")[1]);p[`${j}Page`]=k}),p.total=parseInt(x)),{data:Object.assign(Object.assign({},_),p),error:null}}catch(p){if(We(p))return{data:{users:[]},error:p};throw p}}async getUserById(t){ec(t);try{return await it(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:qa})}catch(n){if(We(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){ec(t);try{return await it(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:qa})}catch(i){if(We(i))return{data:{user:null},error:i};throw i}}async deleteUser(t,n=!1){ec(t);try{return await it(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:qa})}catch(i){if(We(i))return{data:{user:null},error:i};throw i}}async _listFactors(t){ec(t.userId);try{const{data:n,error:i}=await it(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:n,error:i}}catch(n){if(We(n))return{data:null,error:n};throw n}}async _deleteFactor(t){ec(t.userId),ec(t.id);try{return{data:await it(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(We(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,i,o,l,u,f,m;try{const p={nextPage:null,lastPage:0,total:0},y=await it(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(n=t?.page)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:"",per_page:(l=(o=t?.perPage)===null||o===void 0?void 0:o.toString())!==null&&l!==void 0?l:""},xform:$w});if(y.error)throw y.error;const _=await y.json(),x=(u=y.headers.get("x-total-count"))!==null&&u!==void 0?u:0,S=(m=(f=y.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&m!==void 0?m:[];return S.length>0&&(S.forEach(T=>{const k=parseInt(T.split(";")[0].split("=")[1].substring(0,1)),j=JSON.parse(T.split(";")[1].split("=")[1]);p[`${j}Page`]=k}),p.total=parseInt(x)),{data:Object.assign(Object.assign({},_),p),error:null}}catch(p){if(We(p))return{data:{clients:[]},error:p};throw p}}async _createOAuthClient(t){try{return await it(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(We(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await it(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(We(n))return{data:null,error:n};throw n}}async _updateOAuthClient(t,n){try{return await it(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:n,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(We(i))return{data:null,error:i};throw i}}async _deleteOAuthClient(t){try{return await it(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(We(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await it(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(We(n))return{data:null,error:n};throw n}}};function Iw(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const Jo={debug:!!(globalThis&&nT()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class ay extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}let iT=class extends ay{};class SM extends ay{}async function sT(e,t,n){Jo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const i=new globalThis.AbortController;return t>0&&setTimeout(()=>{i.abort(),Jo.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async o=>{if(o){Jo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,o.name);try{return await n()}finally{Jo.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,o.name)}}else{if(t===0)throw Jo.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new iT(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Jo.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}const zw={};async function EM(e,t,n){var i;const o=(i=zw[e])!==null&&i!==void 0?i:Promise.resolve(),l=Promise.race([o.catch(()=>null),t>=0?new Promise((u,f)=>{setTimeout(()=>{f(new SM(`Acquring process lock with name "${e}" timed out`))},t)}):null].filter(u=>u)).catch(u=>{if(u&&u.isAcquireTimeout)throw u;return null}).then(async()=>await n());return zw[e]=l.catch(async u=>{if(u&&u.isAcquireTimeout)return await o,null;throw u}),await l}function TM(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function aT(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function kM(e){return parseInt(e,16)}function AM(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,i=>i.toString(16).padStart(2,"0")).join("")}function jM(e){var t;const{chainId:n,domain:i,expirationTime:o,issuedAt:l=new Date,nonce:u,notBefore:f,requestId:m,resources:p,scheme:y,uri:_,version:x}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!i)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(u&&u.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${u}`);if(!_)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(x!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${x}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const S=aT(e.address),T=y?`${y}://${i}`:i,k=e.statement?`${e.statement}
`:"",j=`${T} wants you to sign in with your Ethereum account:
${S}

${k}`;let C=`URI: ${_}
Version: ${x}
Chain ID: ${n}${u?`
Nonce: ${u}`:""}
Issued At: ${l.toISOString()}`;if(o&&(C+=`
Expiration Time: ${o.toISOString()}`),f&&(C+=`
Not Before: ${f.toISOString()}`),m&&(C+=`
Request ID: ${m}`),p){let P=`
Resources:`;for(const N of p){if(!N||typeof N!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${N}`);P+=`
- ${N}`}C+=P}return`${j}
${C}`}class Pn extends Error{constructor({message:t,code:n,cause:i,name:o}){var l;super(t,{cause:i}),this.__isWebAuthnError=!0,this.name=(l=o??(i instanceof Error?i.name:void 0))!==null&&l!==void 0?l:"Unknown Error",this.code=n}}class im extends Pn{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}}function NM({error:e,options:t}){var n,i,o;const{publicKey:l}=t;if(!l)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Pn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=l.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Pn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((i=l.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Pn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((o=l.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new Pn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new Pn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new Pn({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return l.pubKeyCredParams.filter(f=>f.type==="public-key").length===0?new Pn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Pn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const u=window.location.hostname;if(oT(u)){if(l.rp.id!==u)return new Pn({message:`The RP ID "${l.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Pn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(l.user.id.byteLength<1||l.user.id.byteLength>64)return new Pn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new Pn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Pn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function OM({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Pn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new Pn({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const i=window.location.hostname;if(oT(i)){if(n.rpId!==i)return new Pn({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Pn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new Pn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Pn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class DM{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const MM=new DM;function CM(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:i}=e,o=Ac(e,["challenge","user","excludeCredentials"]),l=gc(t).buffer,u=Object.assign(Object.assign({},n),{id:gc(n.id).buffer}),f=Object.assign(Object.assign({},o),{challenge:l,user:u});if(i&&i.length>0){f.excludeCredentials=new Array(i.length);for(let m=0;m<i.length;m++){const p=i[m];f.excludeCredentials[m]=Object.assign(Object.assign({},p),{id:gc(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return f}function RM(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,i=Ac(e,["challenge","allowCredentials"]),o=gc(t).buffer,l=Object.assign(Object.assign({},i),{challenge:o});if(n&&n.length>0){l.allowCredentials=new Array(n.length);for(let u=0;u<n.length;u++){const f=n[u];l.allowCredentials[u]=Object.assign(Object.assign({},f),{id:gc(f.id).buffer,type:f.type||"public-key",transports:f.transports})}}return l}function LM(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:rl(new Uint8Array(e.response.attestationObject)),clientDataJSON:rl(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function BM(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e,i=e.getClientExtensionResults(),o=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:rl(new Uint8Array(o.authenticatorData)),clientDataJSON:rl(new Uint8Array(o.clientDataJSON)),signature:rl(new Uint8Array(o.signature)),userHandle:o.userHandle?rl(new Uint8Array(o.userHandle)):void 0},type:"public-key",clientExtensionResults:i,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function oT(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function Uw(){var e,t;return!!(sr()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.get)=="function")}async function PM(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new im("Browser returned unexpected credential type",t)}:{data:null,error:new im("Empty credential response",t)}}catch(t){return{data:null,error:NM({error:t,options:e})}}}async function $M(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new im("Browser returned unexpected credential type",t)}:{data:null,error:new im("Empty credential response",t)}}catch(t){return{data:null,error:OM({error:t,options:e})}}}const IM={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},zM={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function sm(...e){const t=o=>o!==null&&typeof o=="object"&&!Array.isArray(o),n=o=>o instanceof ArrayBuffer||ArrayBuffer.isView(o),i={};for(const o of e)if(o)for(const l in o){const u=o[l];if(u!==void 0)if(Array.isArray(u))i[l]=u;else if(n(u))i[l]=u;else if(t(u)){const f=i[l];t(f)?i[l]=sm(f,u):i[l]=sm(u)}else i[l]=u}return i}function UM(e,t){return sm(IM,e,t||{})}function HM(e,t){return sm(zM,e,t||{})}class GM{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:i,signal:o},l){try{const{data:u,error:f}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!u)return{data:null,error:f};const m=o??MM.createNewAbortSignal();if(u.webauthn.type==="create"){const{user:p}=u.webauthn.credential_options.publicKey;p.name||(p.name=`${p.id}:${i}`),p.displayName||(p.displayName=p.name)}switch(u.webauthn.type){case"create":{const p=UM(u.webauthn.credential_options.publicKey,l?.create),{data:y,error:_}=await PM({publicKey:p,signal:m});return y?{data:{factorId:t,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:y}},error:null}:{data:null,error:_}}case"request":{const p=HM(u.webauthn.credential_options.publicKey,l?.request),{data:y,error:_}=await $M(Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:p,signal:m}));return y?{data:{factorId:t,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:y}},error:null}:{data:null,error:_}}}}catch(u){return We(u)?{data:null,error:u}:{data:null,error:new Ya("Unexpected error in challenge",u)}}}async _verify({challengeId:t,factorId:n,webauthn:i}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:i})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},l){if(!n)return{data:null,error:new _c("rpId is required for WebAuthn authentication")};try{if(!Uw())return{data:null,error:new Ya("Browser does not support WebAuthn",null)};const{data:u,error:f}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:i},signal:o},{request:l});if(!u)return{data:null,error:f};const{webauthn:m}=u;return this._verify({factorId:t,challengeId:u.challengeId,webauthn:{type:m.type,rpId:n,rpOrigins:i,credential_response:m.credential_response}})}catch(u){return We(u)?{data:null,error:u}:{data:null,error:new Ya("Unexpected error in authenticate",u)}}}async _register({friendlyName:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},l){if(!n)return{data:null,error:new _c("rpId is required for WebAuthn registration")};try{if(!Uw())return{data:null,error:new Ya("Browser does not support WebAuthn",null)};const{data:u,error:f}=await this._enroll({friendlyName:t});if(!u)return await this.client.mfa.listFactors().then(y=>{var _;return(_=y.data)===null||_===void 0?void 0:_.all.find(x=>x.factor_type==="webauthn"&&x.friendly_name===t&&x.status!=="unverified")}).then(y=>y?this.client.mfa.unenroll({factorId:y?.id}):void 0),{data:null,error:f};const{data:m,error:p}=await this._challenge({factorId:u.id,friendlyName:u.friendly_name,webauthn:{rpId:n,rpOrigins:i},signal:o},{create:l});return m?this._verify({factorId:u.id,challengeId:m.challengeId,webauthn:{rpId:n,rpOrigins:i,type:m.webauthn.type,credential_response:m.webauthn.credential_response}}):{data:null,error:p}}catch(u){return We(u)?{data:null,error:u}:{data:null,error:new Ya("Unexpected error in register",u)}}}}TM();const FM={url:FD,storageKey:YD,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:qD,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function Hw(e,t,n){return await n()}const tc={};let oy=class kb{get jwks(){var t,n;return(n=(t=tc[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){tc[this.storageKey]=Object.assign(Object.assign({},tc[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=tc[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){tc[this.storageKey]=Object.assign(Object.assign({},tc[this.storageKey]),{cachedAt:t})}constructor(t){var n,i,o;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const l=Object.assign(Object.assign({},FM),t);if(this.storageKey=l.storageKey,this.instanceID=(n=kb.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,kb.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.instanceID>0&&sr()){const u=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(u),this.logDebugMessages&&console.trace(u)}if(this.persistSession=l.persistSession,this.autoRefreshToken=l.autoRefreshToken,this.admin=new sy({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=rT(l.fetch),this.lock=l.lock||Hw,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,this.throwOnError=l.throwOnError,l.lock?this.lock=l.lock:sr()&&(!((i=globalThis?.navigator)===null||i===void 0)&&i.locks)?this.lock=sT:this.lock=Hw,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new GM(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(l.storage?this.storage=l.storage:nT()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Iw(this.memoryStorage)),l.userStorage&&(this.userStorage=l.userStorage)):(this.memoryStorage={},this.storage=Iw(this.memoryStorage)),sr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(u){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",u)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",async u=>{this._debug("received broadcast notification from other tab or client",u),await this._notifyAllSubscribers(u.data.event,u.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${KE}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let n={},i="none";if(sr()&&(n=rM(window.location.href),this._isImplicitGrantCallback(n)?i="implicit":await this._isPKCECallback(n)&&(i="pkce")),sr()&&this.detectSessionInUrl&&i!=="none"){const{data:o,error:l}=await this._getSessionFromURL(n,i);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),eT(l)){const m=(t=l.details)===null||t===void 0?void 0:t.code;if(m==="identity_already_exists"||m==="identity_not_found"||m==="single_identity_not_deletable")return{error:l}}return await this._removeSession(),{error:l}}const{session:u,redirectType:f}=o;return this._debug("#_initialize()","detected session in URL",u,"redirect type",f),await this._saveSession(u),setTimeout(async()=>{f==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return We(n)?this._returnResult({error:n}):this._returnResult({error:new Ya("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,i,o;try{const l=await it(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(n=t?.options)===null||n===void 0?void 0:n.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(o=t?.options)===null||o===void 0?void 0:o.captchaToken}},xform:Qi}),{data:u,error:f}=l;if(f||!u)return this._returnResult({data:{user:null,session:null},error:f});const m=u.session,p=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:p,session:m},error:null})}catch(l){if(We(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signUp(t){var n,i,o;try{let l;if("email"in t){const{email:y,password:_,options:x}=t;let S=null,T=null;this.flowType==="pkce"&&([S,T]=await Ql(this.storage,this.storageKey)),l=await it(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:x?.emailRedirectTo,body:{email:y,password:_,data:(n=x?.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:x?.captchaToken},code_challenge:S,code_challenge_method:T},xform:Qi})}else if("phone"in t){const{phone:y,password:_,options:x}=t;l=await it(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:y,password:_,data:(i=x?.data)!==null&&i!==void 0?i:{},channel:(o=x?.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:x?.captchaToken}},xform:Qi})}else throw new Gu("You must provide either an email or phone number and a password");const{data:u,error:f}=l;if(f||!u)return await rr(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:f});const m=u.session,p=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:p,session:m},error:null})}catch(l){if(await rr(this.storage,`${this.storageKey}-code-verifier`),We(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithPassword(t){try{let n;if("email"in t){const{email:l,password:u,options:f}=t;n=await it(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:u,gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:Pw})}else if("phone"in t){const{phone:l,password:u,options:f}=t;n=await it(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:u,gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:Pw})}else throw new Gu("You must provide either an email or phone number and a password");const{data:i,error:o}=n;if(o)return this._returnResult({data:{user:null,session:null},error:o});if(!i||!i.session||!i.user){const l=new Wo;return this._returnResult({data:{user:null,session:null},error:l})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:o})}catch(n){if(We(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(t){var n,i,o,l;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(i=t.options)===null||i===void 0?void 0:i.scopes,queryParams:(o=t.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(l=t.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,i,o,l,u,f,m,p,y,_,x;let S,T;if("message"in t)S=t.message,T=t.signature;else{const{chain:k,wallet:j,statement:C,options:P}=t;let N;if(sr())if(typeof j=="object")N=j;else{const K=window;if("ethereum"in K&&typeof K.ethereum=="object"&&"request"in K.ethereum&&typeof K.ethereum.request=="function")N=K.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof j!="object"||!P?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");N=j}const M=new URL((n=P?.url)!==null&&n!==void 0?n:window.location.href),D=await N.request({method:"eth_requestAccounts"}).then(K=>K).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!D||D.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const $=aT(D[0]);let z=(i=P?.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!z){const K=await N.request({method:"eth_chainId"});z=kM(K)}const F={domain:M.host,address:$,statement:C,uri:M.href,version:"1",chainId:z,nonce:(o=P?.signInWithEthereum)===null||o===void 0?void 0:o.nonce,issuedAt:(u=(l=P?.signInWithEthereum)===null||l===void 0?void 0:l.issuedAt)!==null&&u!==void 0?u:new Date,expirationTime:(f=P?.signInWithEthereum)===null||f===void 0?void 0:f.expirationTime,notBefore:(m=P?.signInWithEthereum)===null||m===void 0?void 0:m.notBefore,requestId:(p=P?.signInWithEthereum)===null||p===void 0?void 0:p.requestId,resources:(y=P?.signInWithEthereum)===null||y===void 0?void 0:y.resources};S=jM(F),T=await N.request({method:"personal_sign",params:[AM(S),$]})}try{const{data:k,error:j}=await it(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:S,signature:T},!((_=t.options)===null||_===void 0)&&_.captchaToken?{gotrue_meta_security:{captcha_token:(x=t.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:Qi});if(j)throw j;if(!k||!k.session||!k.user){const C=new Wo;return this._returnResult({data:{user:null,session:null},error:C})}return k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("SIGNED_IN",k.session)),this._returnResult({data:Object.assign({},k),error:j})}catch(k){if(We(k))return this._returnResult({data:{user:null,session:null},error:k});throw k}}async signInWithSolana(t){var n,i,o,l,u,f,m,p,y,_,x,S;let T,k;if("message"in t)T=t.message,k=t.signature;else{const{chain:j,wallet:C,statement:P,options:N}=t;let M;if(sr())if(typeof C=="object")M=C;else{const $=window;if("solana"in $&&typeof $.solana=="object"&&("signIn"in $.solana&&typeof $.solana.signIn=="function"||"signMessage"in $.solana&&typeof $.solana.signMessage=="function"))M=$.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof C!="object"||!N?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");M=C}const D=new URL((n=N?.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in M&&M.signIn){const $=await M.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},N?.signInWithSolana),{version:"1",domain:D.host,uri:D.href}),P?{statement:P}:null));let z;if(Array.isArray($)&&$[0]&&typeof $[0]=="object")z=$[0];else if($&&typeof $=="object"&&"signedMessage"in $&&"signature"in $)z=$;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in z&&"signature"in z&&(typeof z.signedMessage=="string"||z.signedMessage instanceof Uint8Array)&&z.signature instanceof Uint8Array)T=typeof z.signedMessage=="string"?z.signedMessage:new TextDecoder().decode(z.signedMessage),k=z.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in M)||typeof M.signMessage!="function"||!("publicKey"in M)||typeof M!="object"||!M.publicKey||!("toBase58"in M.publicKey)||typeof M.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");T=[`${D.host} wants you to sign in with your Solana account:`,M.publicKey.toBase58(),...P?["",P,""]:[""],"Version: 1",`URI: ${D.href}`,`Issued At: ${(o=(i=N?.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((l=N?.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${N.signInWithSolana.notBefore}`]:[],...!((u=N?.signInWithSolana)===null||u===void 0)&&u.expirationTime?[`Expiration Time: ${N.signInWithSolana.expirationTime}`]:[],...!((f=N?.signInWithSolana)===null||f===void 0)&&f.chainId?[`Chain ID: ${N.signInWithSolana.chainId}`]:[],...!((m=N?.signInWithSolana)===null||m===void 0)&&m.nonce?[`Nonce: ${N.signInWithSolana.nonce}`]:[],...!((p=N?.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${N.signInWithSolana.requestId}`]:[],...!((_=(y=N?.signInWithSolana)===null||y===void 0?void 0:y.resources)===null||_===void 0)&&_.length?["Resources",...N.signInWithSolana.resources.map(z=>`- ${z}`)]:[]].join(`
`);const $=await M.signMessage(new TextEncoder().encode(T),"utf8");if(!$||!($ instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");k=$}}try{const{data:j,error:C}=await it(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:T,signature:rl(k)},!((x=t.options)===null||x===void 0)&&x.captchaToken?{gotrue_meta_security:{captcha_token:(S=t.options)===null||S===void 0?void 0:S.captchaToken}}:null),xform:Qi});if(C)throw C;if(!j||!j.session||!j.user){const P=new Wo;return this._returnResult({data:{user:null,session:null},error:P})}return j.session&&(await this._saveSession(j.session),await this._notifyAllSubscribers("SIGNED_IN",j.session)),this._returnResult({data:Object.assign({},j),error:C})}catch(j){if(We(j))return this._returnResult({data:{user:null,session:null},error:j});throw j}}async _exchangeCodeForSession(t){const n=await Ho(this.storage,`${this.storageKey}-code-verifier`),[i,o]=(n??"").split("/");try{const{data:l,error:u}=await it(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:i},xform:Qi});if(await rr(this.storage,`${this.storageKey}-code-verifier`),u)throw u;if(!l||!l.session||!l.user){const f=new Wo;return this._returnResult({data:{user:null,session:null,redirectType:null},error:f})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:Object.assign(Object.assign({},l),{redirectType:o??null}),error:u})}catch(l){if(await rr(this.storage,`${this.storageKey}-code-verifier`),We(l))return this._returnResult({data:{user:null,session:null,redirectType:null},error:l});throw l}}async signInWithIdToken(t){try{const{options:n,provider:i,token:o,access_token:l,nonce:u}=t,f=await it(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:o,access_token:l,nonce:u,gotrue_meta_security:{captcha_token:n?.captchaToken}},xform:Qi}),{data:m,error:p}=f;if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!m||!m.session||!m.user){const y=new Wo;return this._returnResult({data:{user:null,session:null},error:y})}return m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),this._returnResult({data:m,error:p})}catch(n){if(We(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(t){var n,i,o,l,u;try{if("email"in t){const{email:f,options:m}=t;let p=null,y=null;this.flowType==="pkce"&&([p,y]=await Ql(this.storage,this.storageKey));const{error:_}=await it(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:f,data:(n=m?.data)!==null&&n!==void 0?n:{},create_user:(i=m?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:m?.captchaToken},code_challenge:p,code_challenge_method:y},redirectTo:m?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:_})}if("phone"in t){const{phone:f,options:m}=t,{data:p,error:y}=await it(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:f,data:(o=m?.data)!==null&&o!==void 0?o:{},create_user:(l=m?.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:m?.captchaToken},channel:(u=m?.channel)!==null&&u!==void 0?u:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:p?.message_id},error:y})}throw new Gu("You must provide either an email or phone number.")}catch(f){if(await rr(this.storage,`${this.storageKey}-code-verifier`),We(f))return this._returnResult({data:{user:null,session:null},error:f});throw f}}async verifyOtp(t){var n,i;try{let o,l;"options"in t&&(o=(n=t.options)===null||n===void 0?void 0:n.redirectTo,l=(i=t.options)===null||i===void 0?void 0:i.captchaToken);const{data:u,error:f}=await it(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:l}}),redirectTo:o,xform:Qi});if(f)throw f;if(!u)throw new Error("An error occurred on token verification.");const m=u.session,p=u.user;return m?.access_token&&(await this._saveSession(m),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",m)),this._returnResult({data:{user:p,session:m},error:null})}catch(o){if(We(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithSSO(t){var n,i,o,l,u;try{let f=null,m=null;this.flowType==="pkce"&&([f,m]=await Ql(this.storage,this.storageKey));const p=await it(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(i=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&i!==void 0?i:void 0}),!((o=t?.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:f,code_challenge_method:m}),headers:this.headers,xform:_M});return!((l=p.data)===null||l===void 0)&&l.url&&sr()&&!(!((u=t.options)===null||u===void 0)&&u.skipBrowserRedirect)&&window.location.assign(p.data.url),this._returnResult(p)}catch(f){if(await rr(this.storage,`${this.storageKey}-code-verifier`),We(f))return this._returnResult({data:null,error:f});throw f}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:i}=t;if(i)throw i;if(!n)throw new Hr;const{error:o}=await it(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:o})})}catch(t){if(We(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:i,type:o,options:l}=t,{error:u}=await it(this.fetch,"POST",n,{headers:this.headers,body:{email:i,type:o,gotrue_meta_security:{captcha_token:l?.captchaToken}},redirectTo:l?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:u})}else if("phone"in t){const{phone:i,type:o,options:l}=t,{data:u,error:f}=await it(this.fetch,"POST",n,{headers:this.headers,body:{phone:i,type:o,gotrue_meta_security:{captcha_token:l?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:u?.message_id},error:f})}throw new Gu("You must provide either an email or phone number and a type")}catch(n){if(We(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await i,await n()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=n();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await Ho(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const i=t.expires_at?t.expires_at*1e3-Date.now()<ig:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",t.expires_at),!i){if(this.userStorage){const u=await Ho(this.userStorage,this.storageKey+"-user");u?.user?t.user=u.user:t.user=ag()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const u={value:this.suppressGetSessionWarning};t.user=gM(t.user,u),u.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:o,error:l}=await this._callRefreshToken(t.refresh_token);return l?this._returnResult({data:{session:null},error:l}):this._returnResult({data:{session:o},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const n=await this._acquireLock(-1,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(t){try{return t?await it(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:qa}):await this._useSession(async n=>{var i,o,l;const{data:u,error:f}=n;if(f)throw f;return!(!((i=u.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Hr}:await it(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(o=u.session)===null||o===void 0?void 0:o.access_token)!==null&&l!==void 0?l:void 0,xform:qa})})}catch(n){if(We(n))return QE(n)&&(await this._removeSession(),await rr(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async i=>{const{data:o,error:l}=i;if(l)throw l;if(!o.session)throw new Hr;const u=o.session;let f=null,m=null;this.flowType==="pkce"&&t.email!=null&&([f,m]=await Ql(this.storage,this.storageKey));const{data:p,error:y}=await it(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n?.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:f,code_challenge_method:m}),jwt:u.access_token,xform:qa});if(y)throw y;return u.user=p.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),this._returnResult({data:{user:u.user},error:null})})}catch(i){if(await rr(this.storage,`${this.storageKey}-code-verifier`),We(i))return this._returnResult({data:{user:null},error:i});throw i}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Hr;const n=Date.now()/1e3;let i=n,o=!0,l=null;const{payload:u}=sg(t.access_token);if(u.exp&&(i=u.exp,o=i<=n),o){const{data:f,error:m}=await this._callRefreshToken(t.refresh_token);if(m)return this._returnResult({data:{user:null,session:null},error:m});if(!f)return{data:{user:null,session:null},error:null};l=f}else{const{data:f,error:m}=await this._getUser(t.access_token);if(m)throw m;l={access_token:t.access_token,refresh_token:t.refresh_token,user:f.user,token_type:"bearer",expires_in:i-n,expires_at:i},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return this._returnResult({data:{user:l.user,session:l},error:null})}catch(n){if(We(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var i;if(!t){const{data:u,error:f}=n;if(f)throw f;t=(i=u.session)!==null&&i!==void 0?i:void 0}if(!t?.refresh_token)throw new Hr;const{data:o,error:l}=await this._callRefreshToken(t.refresh_token);return l?this._returnResult({data:{user:null,session:null},error:l}):o?this._returnResult({data:{user:o.user,session:o},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(We(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(t,n){try{if(!sr())throw new Fu("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Fu(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Eb("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Fu("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Eb("No code detected.");const{data:P,error:N}=await this._exchangeCodeForSession(t.code);if(N)throw N;const M=new URL(window.location.href);return M.searchParams.delete("code"),window.history.replaceState(window.history.state,"",M.toString()),{data:{session:P.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:o,access_token:l,refresh_token:u,expires_in:f,expires_at:m,token_type:p}=t;if(!l||!f||!u||!p)throw new Fu("No session defined in URL");const y=Math.round(Date.now()/1e3),_=parseInt(f);let x=y+_;m&&(x=parseInt(m));const S=x-y;S*1e3<=lc&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${S}s, should have been closer to ${_}s`);const T=x-_;y-T>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",T,x,y):y-T<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",T,x,y);const{data:k,error:j}=await this._getUser(l);if(j)throw j;const C={provider_token:i,provider_refresh_token:o,access_token:l,expires_in:_,expires_at:x,refresh_token:u,token_type:p,user:k.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:C,redirectType:t.type},error:null})}catch(i){if(We(i))return this._returnResult({data:{session:null,redirectType:null},error:i});throw i}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await Ho(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var i;const{data:o,error:l}=n;if(l)return this._returnResult({error:l});const u=(i=o.session)===null||i===void 0?void 0:i.access_token;if(u){const{error:f}=await this.admin.signOut(u,t);if(f&&!(JE(f)&&(f.status===404||f.status===401||f.status===403)))return this._returnResult({error:f})}return t!=="others"&&(await this._removeSession(),await rr(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const n=nM(),i={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:i}}}async _emitInitialSession(t){return await this._useSession(async n=>{var i,o;try{const{data:{session:l},error:u}=n;if(u)throw u;await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",t,"session",l)}catch(l){await((o=this.stateChangeEmitters.get(t))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",l),console.error(l)}})}async resetPasswordForEmail(t,n={}){let i=null,o=null;this.flowType==="pkce"&&([i,o]=await Ql(this.storage,this.storageKey,!0));try{return await it(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:i,code_challenge_method:o,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(l){if(await rr(this.storage,`${this.storageKey}-code-verifier`),We(l))return this._returnResult({data:null,error:l});throw l}}async getUserIdentities(){var t;try{const{data:n,error:i}=await this.getUser();if(i)throw i;return this._returnResult({data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(n){if(We(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var n;try{const{data:i,error:o}=await this._useSession(async l=>{var u,f,m,p,y;const{data:_,error:x}=l;if(x)throw x;const S=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(u=t.options)===null||u===void 0?void 0:u.redirectTo,scopes:(f=t.options)===null||f===void 0?void 0:f.scopes,queryParams:(m=t.options)===null||m===void 0?void 0:m.queryParams,skipBrowserRedirect:!0});return await it(this.fetch,"GET",S,{headers:this.headers,jwt:(y=(p=_.session)===null||p===void 0?void 0:p.access_token)!==null&&y!==void 0?y:void 0})});if(o)throw o;return sr()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(i?.url),this._returnResult({data:{provider:t.provider,url:i?.url},error:null})}catch(i){if(We(i))return this._returnResult({data:{provider:t.provider,url:null},error:i});throw i}}async linkIdentityIdToken(t){return await this._useSession(async n=>{var i;try{const{error:o,data:{session:l}}=n;if(o)throw o;const{options:u,provider:f,token:m,access_token:p,nonce:y}=t,_=await it(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(i=l?.access_token)!==null&&i!==void 0?i:void 0,body:{provider:f,id_token:m,access_token:p,nonce:y,link_identity:!0,gotrue_meta_security:{captcha_token:u?.captchaToken}},xform:Qi}),{data:x,error:S}=_;return S?this._returnResult({data:{user:null,session:null},error:S}):!x||!x.session||!x.user?this._returnResult({data:{user:null,session:null},error:new Wo}):(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("USER_UPDATED",x.session)),this._returnResult({data:x,error:S}))}catch(o){if(await rr(this.storage,`${this.storageKey}-code-verifier`),We(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}})}async unlinkIdentity(t){try{return await this._useSession(async n=>{var i,o;const{data:l,error:u}=n;if(u)throw u;return await it(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(o=(i=l.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0})})}catch(n){if(We(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const i=Date.now();return await aM(async o=>(o>0&&await sM(200*Math.pow(2,o-1)),this._debug(n,"refreshing attempt",o),await it(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Qi})),(o,l)=>{const u=200*Math.pow(2,o);return l&&Hf(l)&&Date.now()+u-i<lc})}catch(i){if(this._debug(n,"error",i),We(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const i=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",i),sr()&&!n.skipBrowserRedirect&&window.location.assign(i),{data:{provider:t,url:i},error:null}}async _recoverAndRefresh(){var t,n;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const o=await Ho(this.storage,this.storageKey);if(o&&this.userStorage){let u=await Ho(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!u&&(u={user:o.user},await cc(this.userStorage,this.storageKey+"-user",u)),o.user=(t=u?.user)!==null&&t!==void 0?t:ag()}else if(o&&!o.user&&!o.user){const u=await Ho(this.storage,this.storageKey+"-user");u&&u?.user?(o.user=u.user,await rr(this.storage,this.storageKey+"-user"),await cc(this.storage,this.storageKey,o)):o.user=ag()}if(this._debug(i,"session from storage",o),!this._isValidSession(o)){this._debug(i,"session is not valid"),o!==null&&await this._removeSession();return}const l=((n=o.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<ig;if(this._debug(i,`session has${l?"":" not"} expired with margin of ${ig}s`),l){if(this.autoRefreshToken&&o.refresh_token){const{error:u}=await this._callRefreshToken(o.refresh_token);u&&(console.error(u),Hf(u)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:u,error:f}=await this._getUser(o.access_token);!f&&u?.user?(o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(u){console.error("Error getting user data:",u),this._debug(i,"error getting user data, skipping SIGNED_IN notification",u)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(i,"error",o),console.error(o);return}finally{this._debug(i,"end")}}async _callRefreshToken(t){var n,i;if(!t)throw new Hr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new Mm;const{data:l,error:u}=await this._refreshAccessToken(t);if(u)throw u;if(!l.session)throw new Hr;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const f={data:l.session,error:null};return this.refreshingDeferred.resolve(f),f}catch(l){if(this._debug(o,"error",l),We(l)){const u={data:null,error:l};return Hf(l)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(u),u}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(l),l}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(t,n,i=!0){const o=`#_notifyAllSubscribers(${t})`;this._debug(o,"begin",n,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:t,session:n});const l=[],u=Array.from(this.stateChangeEmitters.values()).map(async f=>{try{await f.callback(t,n)}catch(m){l.push(m)}});if(await Promise.all(u),l.length>0){for(let f=0;f<l.length;f+=1)console.error(l[f]);throw l[0]}}finally{this._debug(o,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await rr(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},t),i=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&n.user&&await cc(this.userStorage,this.storageKey+"-user",{user:n.user});const o=Object.assign({},n);delete o.user;const l=Lw(o);await cc(this.storage,this.storageKey,l)}else{const o=Lw(n);await cc(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await rr(this.storage,this.storageKey),await rr(this.storage,this.storageKey+"-code-verifier"),await rr(this.storage,this.storageKey+"-user"),this.userStorage&&await rr(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&sr()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),lc);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:i}}=n;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((i.expires_at*1e3-t)/lc);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${lc}ms, refresh threshold is ${wb} ticks`),o<=wb&&await this._callRefreshToken(i.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof ay)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!sr()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,i){const o=[`provider=${encodeURIComponent(n)}`];if(i?.redirectTo&&o.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i?.scopes&&o.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[l,u]=await Ql(this.storage,this.storageKey),f=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(u)}`});o.push(f.toString())}if(i?.queryParams){const l=new URLSearchParams(i.queryParams);o.push(l.toString())}return i?.skipBrowserRedirect&&o.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${t}?${o.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var i;const{data:o,error:l}=n;return l?this._returnResult({data:null,error:l}):await it(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token})})}catch(n){if(We(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(t){try{return await this._useSession(async n=>{var i,o;const{data:l,error:u}=n;if(u)return this._returnResult({data:null,error:u});const f=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:m,error:p}=await it(this.fetch,"POST",`${this.url}/factors`,{body:f,headers:this.headers,jwt:(i=l?.session)===null||i===void 0?void 0:i.access_token});return p?this._returnResult({data:null,error:p}):(t.factorType==="totp"&&m.type==="totp"&&(!((o=m?.totp)===null||o===void 0)&&o.qr_code)&&(m.totp.qr_code=`data:image/svg+xml;utf-8,${m.totp.qr_code}`),this._returnResult({data:m,error:null}))})}catch(n){if(We(n))return this._returnResult({data:null,error:n});throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var i;const{data:o,error:l}=n;if(l)return this._returnResult({data:null,error:l});const u=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?LM(t.webauthn.credential_response):BM(t.webauthn.credential_response)})}:{code:t.code}),{data:f,error:m}=await it(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:u,headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token});return m?this._returnResult({data:null,error:m}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+f.expires_in},f)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",f),this._returnResult({data:f,error:m}))})}catch(n){if(We(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var i;const{data:o,error:l}=n;if(l)return this._returnResult({data:null,error:l});const u=await it(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token});if(u.error)return u;const{data:f}=u;if(f.type!=="webauthn")return{data:f,error:null};switch(f.webauthn.type){case"create":return{data:Object.assign(Object.assign({},f),{webauthn:Object.assign(Object.assign({},f.webauthn),{credential_options:Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:CM(f.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},f),{webauthn:Object.assign(Object.assign({},f.webauthn),{credential_options:Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:RM(f.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(We(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(t){const{data:n,error:i}=await this._challenge({factorId:t.factorId});return i?this._returnResult({data:null,error:i}):await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){var t;const{data:{user:n},error:i}=await this.getUser();if(i)return{data:null,error:i};const o={all:[],phone:[],totp:[],webauthn:[]};for(const l of(t=n?.factors)!==null&&t!==void 0?t:[])o.all.push(l),l.status==="verified"&&o[l.factor_type].push(l);return{data:o,error:null}}async _getAuthenticatorAssuranceLevel(){var t,n;const{data:{session:i},error:o}=await this.getSession();if(o)return this._returnResult({data:null,error:o});if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=sg(i.access_token);let u=null;l.aal&&(u=l.aal);let f=u;((n=(t=i.user.factors)===null||t===void 0?void 0:t.filter(y=>y.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(f="aal2");const p=l.amr||[];return{data:{currentLevel:u,nextLevel:f,currentAuthenticationMethods:p},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async n=>{const{data:{session:i},error:o}=n;return o?this._returnResult({data:null,error:o}):i?await it(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:i.access_token,xform:l=>({data:l,error:null})}):this._returnResult({data:null,error:new Hr})})}catch(n){if(We(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(t,n){try{return await this._useSession(async i=>{const{data:{session:o},error:l}=i;if(l)return this._returnResult({data:null,error:l});if(!o)return this._returnResult({data:null,error:new Hr});const u=await it(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"approve"},xform:f=>({data:f,error:null})});return u.data&&u.data.redirect_url&&sr()&&!n?.skipBrowserRedirect&&window.location.assign(u.data.redirect_url),u})}catch(i){if(We(i))return this._returnResult({data:null,error:i});throw i}}async _denyAuthorization(t,n){try{return await this._useSession(async i=>{const{data:{session:o},error:l}=i;if(l)return this._returnResult({data:null,error:l});if(!o)return this._returnResult({data:null,error:new Hr});const u=await it(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"deny"},xform:f=>({data:f,error:null})});return u.data&&u.data.redirect_url&&sr()&&!n?.skipBrowserRedirect&&window.location.assign(u.data.redirect_url),u})}catch(i){if(We(i))return this._returnResult({data:null,error:i});throw i}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:n},error:i}=t;return i?this._returnResult({data:null,error:i}):n?await it(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new Hr})})}catch(t){if(We(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async n=>{const{data:{session:i},error:o}=n;return o?this._returnResult({data:null,error:o}):i?(await it(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Hr})})}catch(n){if(We(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(t,n={keys:[]}){let i=n.keys.find(f=>f.kid===t);if(i)return i;const o=Date.now();if(i=this.jwks.keys.find(f=>f.kid===t),i&&this.jwks_cached_at+VD>o)return i;const{data:l,error:u}=await it(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(u)throw u;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=o,i=l.keys.find(f=>f.kid===t),!i)?null:i}async getClaims(t,n={}){try{let i=t;if(!i){const{data:S,error:T}=await this.getSession();if(T||!S.session)return this._returnResult({data:null,error:T});i=S.session.access_token}const{header:o,payload:l,signature:u,raw:{header:f,payload:m}}=sg(i);n?.allowExpired||fM(l.exp);const p=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,n?.keys?{keys:n.keys}:n?.jwks);if(!p){const{error:S}=await this.getUser(i);if(S)throw S;return{data:{claims:l,header:o,signature:u},error:null}}const y=mM(o.alg),_=await crypto.subtle.importKey("jwk",p,y,!0,["verify"]);if(!await crypto.subtle.verify(y,_,u,eM(`${f}.${m}`)))throw new nm("Invalid JWT signature");return{data:{claims:l,header:o,signature:u},error:null}}catch(i){if(We(i))return this._returnResult({data:null,error:i});throw i}}};oy.nextInstanceID={};const YM=sy,qM=oy,ZM=Object.freeze(Object.defineProperty({__proto__:null,AuthAdminApi:YM,AuthApiError:XE,AuthClient:qM,AuthError:_c,AuthImplicitGrantRedirectError:Fu,AuthInvalidCredentialsError:Gu,AuthInvalidJwtError:nm,AuthInvalidTokenResponseError:Wo,AuthPKCEGrantCodeExchangeError:Eb,AuthRetryableFetchError:tm,AuthSessionMissingError:Hr,AuthUnknownError:Ya,AuthWeakPasswordError:Tb,CustomAuthError:na,GoTrueAdminApi:sy,GoTrueClient:oy,NavigatorLockAcquireTimeoutError:iT,SIGN_OUT_SCOPES:Gf,isAuthApiError:JE,isAuthError:We,isAuthImplicitGrantRedirectError:eT,isAuthRetryableFetchError:Hf,isAuthSessionMissingError:QE,isAuthWeakPasswordError:KD,lockInternals:Jo,navigatorLock:sT,processLock:EM},Symbol.toStringTag,{value:"Module"})),lT=pd(ZM);var Gw;function VM(){if(Gw)return Cu;Gw=1,Object.defineProperty(Cu,"__esModule",{value:!0}),Cu.SupabaseAuthClient=void 0;const e=lT;let t=class extends e.AuthClient{constructor(i){super(i)}};return Cu.SupabaseAuthClient=t,Cu}var Fw;function Yw(){if(Fw)return Zh;Fw=1,Object.defineProperty(Zh,"__esModule",{value:!0});const e=_E,t=kE(),n=LE,i=ID,o=UD(),l=HD(),u=GD(),f=VM();class m{constructor(y,_,x){var S,T,k;this.supabaseUrl=y,this.supabaseKey=_;const j=(0,u.validateSupabaseUrl)(y);if(!_)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",j),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",j),this.storageUrl=new URL("storage/v1",j),this.functionsUrl=new URL("functions/v1",j);const C=`sb-${j.hostname.split(".")[0]}-auth-token`,P={db:o.DEFAULT_DB_OPTIONS,realtime:o.DEFAULT_REALTIME_OPTIONS,auth:Object.assign(Object.assign({},o.DEFAULT_AUTH_OPTIONS),{storageKey:C}),global:o.DEFAULT_GLOBAL_OPTIONS},N=(0,u.applySettingDefaults)(x??{},P);this.storageKey=(S=N.auth.storageKey)!==null&&S!==void 0?S:"",this.headers=(T=N.global.headers)!==null&&T!==void 0?T:{},N.accessToken?(this.accessToken=N.accessToken,this.auth=new Proxy({},{get:(M,D)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(D)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((k=N.auth)!==null&&k!==void 0?k:{},this.headers,N.global.fetch),this.fetch=(0,l.fetchWithAuth)(_,this._getAccessToken.bind(this),N.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},N.realtime)),this.accessToken&&this.accessToken().then(M=>this.realtime.setAuth(M)).catch(M=>console.warn("Failed to set initial Realtime auth token:",M)),this.rest=new t.PostgrestClient(new URL("rest/v1",j).href,{headers:this.headers,schema:N.db.schema,fetch:this.fetch}),this.storage=new i.StorageClient(this.storageUrl.href,this.headers,this.fetch,x?.storage),N.accessToken||this._listenForAuthEvents()}get functions(){return new e.FunctionsClient(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(y){return this.rest.from(y)}schema(y){return this.rest.schema(y)}rpc(y,_={},x={head:!1,get:!1,count:void 0}){return this.rest.rpc(y,_,x)}channel(y,_={config:{}}){return this.realtime.channel(y,_)}getChannels(){return this.realtime.getChannels()}removeChannel(y){return this.realtime.removeChannel(y)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var y,_;if(this.accessToken)return await this.accessToken();const{data:x}=await this.auth.getSession();return(_=(y=x.session)===null||y===void 0?void 0:y.access_token)!==null&&_!==void 0?_:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:y,persistSession:_,detectSessionInUrl:x,storage:S,userStorage:T,storageKey:k,flowType:j,lock:C,debug:P,throwOnError:N},M,D){const $={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new f.SupabaseAuthClient({url:this.authUrl.href,headers:Object.assign(Object.assign({},$),M),storageKey:k,autoRefreshToken:y,persistSession:_,detectSessionInUrl:x,storage:S,userStorage:T,flowType:j,lock:C,debug:P,throwOnError:N,fetch:D,hasCustomAuthorizationHeader:Object.keys(this.headers).some(z=>z.toLowerCase()==="authorization")})}_initRealtimeClient(y){return new n.RealtimeClient(this.realtimeUrl.href,Object.assign(Object.assign({},y),{params:Object.assign({apikey:this.supabaseKey},y?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((_,x)=>{this._handleTokenChanged(_,"CLIENT",x?.access_token)})}_handleTokenChanged(y,_,x){(y==="TOKEN_REFRESHED"||y==="SIGNED_IN")&&this.changedAccessToken!==x?(this.changedAccessToken=x,this.realtime.setAuth(x)):y==="SIGNED_OUT"&&(this.realtime.setAuth(),_=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}return Zh.default=m,Zh}var qw;function KM(){return qw||(qw=1,(function(e){var t=Vs&&Vs.__createBinding||(Object.create?(function(y,_,x,S){S===void 0&&(S=x);var T=Object.getOwnPropertyDescriptor(_,x);(!T||("get"in T?!_.__esModule:T.writable||T.configurable))&&(T={enumerable:!0,get:function(){return _[x]}}),Object.defineProperty(y,S,T)}):(function(y,_,x,S){S===void 0&&(S=x),y[S]=_[x]})),n=Vs&&Vs.__exportStar||function(y,_){for(var x in y)x!=="default"&&!Object.prototype.hasOwnProperty.call(_,x)&&t(_,y,x)},i=Vs&&Vs.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(e,"__esModule",{value:!0}),e.createClient=e.SupabaseClient=e.FunctionRegion=e.FunctionsError=e.FunctionsRelayError=e.FunctionsFetchError=e.FunctionsHttpError=e.PostgrestError=void 0;const o=i(Yw());n(lT,e);var l=kE();Object.defineProperty(e,"PostgrestError",{enumerable:!0,get:function(){return l.PostgrestError}});var u=_E;Object.defineProperty(e,"FunctionsHttpError",{enumerable:!0,get:function(){return u.FunctionsHttpError}}),Object.defineProperty(e,"FunctionsFetchError",{enumerable:!0,get:function(){return u.FunctionsFetchError}}),Object.defineProperty(e,"FunctionsRelayError",{enumerable:!0,get:function(){return u.FunctionsRelayError}}),Object.defineProperty(e,"FunctionsError",{enumerable:!0,get:function(){return u.FunctionsError}}),Object.defineProperty(e,"FunctionRegion",{enumerable:!0,get:function(){return u.FunctionRegion}}),n(LE,e);var f=Yw();Object.defineProperty(e,"SupabaseClient",{enumerable:!0,get:function(){return i(f).default}});const m=(y,_,x)=>new o.default(y,_,x);e.createClient=m;function p(){if(typeof window<"u"||typeof process>"u")return!1;const y=process.version;if(y==null)return!1;const _=y.match(/^v(\d+)\./);return _?parseInt(_[1],10)<=18:!1}p()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217")})(Vs)),Vs}var cT=KM();const uT=cl(cT),WM=A2({__proto__:null,default:uT},[cT]),{PostgrestError:dU,FunctionsHttpError:hU,FunctionsFetchError:fU,FunctionsRelayError:mU,FunctionsError:pU,FunctionRegion:gU,SupabaseClient:bU,createClient:XM,GoTrueAdminApi:yU,GoTrueClient:vU,AuthAdminApi:_U,AuthClient:xU,navigatorLock:wU,NavigatorLockAcquireTimeoutError:SU,lockInternals:EU,processLock:TU,SIGN_OUT_SCOPES:kU,AuthError:AU,AuthApiError:jU,AuthUnknownError:NU,CustomAuthError:OU,AuthSessionMissingError:DU,AuthInvalidTokenResponseError:MU,AuthInvalidCredentialsError:CU,AuthImplicitGrantRedirectError:RU,AuthPKCEGrantCodeExchangeError:LU,AuthRetryableFetchError:BU,AuthWeakPasswordError:PU,AuthInvalidJwtError:$U,isAuthError:IU,isAuthApiError:zU,isAuthSessionMissingError:UU,isAuthImplicitGrantRedirectError:HU,isAuthRetryableFetchError:GU,isAuthWeakPasswordError:FU,RealtimePresence:YU,RealtimeChannel:qU,RealtimeClient:ZU,REALTIME_LISTEN_TYPES:VU,REALTIME_POSTGRES_CHANGES_LISTEN_EVENT:KU,REALTIME_PRESENCE_LISTEN_EVENTS:WU,REALTIME_SUBSCRIBE_STATES:XU,REALTIME_CHANNEL_STATES:JU}=uT||WM,kt=XM("https://jouhybyquybxbnqztxum.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpvdWh5YnlxdXlieGJucXp0eHVtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ5NjIwOTgsImV4cCI6MjA4MDUzODA5OH0.qAD7S7yRW8GxcRze_3dyirReIy6HvMr9DeET-djp1Fw",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,storage:localStorage}}),dT="settings_v1",Ab=()=>{try{typeof window<"u"&&window.localStorage.removeItem(dT)}catch{}},il={hiddenStem:"all",hiddenStemMode:"classic",ilunRule:"/",sinsalMode:"classic",sinsalBase:"",sinsalBloom:!1,exposure:"",charType:"",thinEum:!1,showSipSin:!0,showSibiSinsal:!0,showSibiUnseong:!0,showNabeum:!0,theme:"dark",difficultyMode:!1,sectionOrder:["hiddenStem","hiddenStemMode","ilunRule","sinsalMode","sinsalBase","sinsalBloom","exposure","charType","thinEum","visibility","difficultyMode"]},Zw=["theme","hiddenStem","hiddenStemMode","ilunRule","sinsalMode","sinsalBase","sinsalBloom","exposure","charType","thinEum","visibility","difficultyMode"],JM=e=>{const t=Array.isArray(e)?e.filter(i=>typeof i=="string"&&Zw.includes(i)):[],n=Zw.filter(i=>!t.includes(i));return[...t,...n]},bc=e=>({...il,...e,sectionOrder:JM(e.sectionOrder)}),QM=e=>{if(e&&typeof e=="object"){const t=e;if(t.settings&&typeof t.settings=="object")return bc(t.settings);if(t.state&&typeof t.state=="object"){const n=t.state;if(n.settings&&typeof n.settings=="object")return bc(n.settings)}}return bc(e??{})},eC=e=>{if(!e||typeof e!="object")return!1;const t=e;return!!(t.state||t.settings)};Ab();const Wn=bd()(Z2((e,t)=>({settings:il,syncing:!1,loaded:!1,setSettings:n=>e({settings:bc(n)}),setKey:(n,i)=>e({settings:bc({...t().settings,[n]:i})}),reset:()=>e({settings:il}),loadFromServer:async()=>{try{e({syncing:!0}),Ab();const{data:{user:n},error:i}=await kt.auth.getUser();if(i||!n){e({syncing:!1,loaded:!1});return}const{data:o,error:l}=await kt.from("user_settings").select("payload").eq("user_id",n.id).single();if(l&&l.code!=="PGRST116"){console.error("loadFromServer(settings) error:",l),e({syncing:!1,loaded:!0});return}if(o?.payload){const u=QM(o.payload);e({settings:u,syncing:!1,loaded:!0}),eC(o.payload)&&await kt.from("user_settings").upsert({user_id:n.id,payload:u,updated_at:new Date().toISOString()});return}await t().saveToServer(!0),e({syncing:!1,loaded:!0})}catch(n){console.error("loadFromServer(settings) exception:",n),e({syncing:!1,loaded:!0})}},saveToServer:async(n=!1)=>{try{if(!t().loaded&&!n)return;e({syncing:!0}),Ab();const{data:{user:i},error:o}=await kt.auth.getUser();if(o||!i){e({syncing:!1});return}const l=bc(t().settings),{error:u}=await kt.from("user_settings").upsert({user_id:i.id,payload:l,updated_at:new Date().toISOString()});u&&console.error("saveToServer(settings) error:",u),e({syncing:!1,loaded:!0})}catch(i){console.error("saveToServer(settings) exception:",i),e({syncing:!1})}}}),{name:dT,storage:{getItem:()=>null,setItem:()=>null,removeItem:()=>null},merge:(e,t)=>t}));function jb(e){const t=jr.indexOf(e);if(t!==-1)return jr[t];const n=mi..indexOf(e);return n!==-1?jr[n]:null}function hT(e){const t=Yr.indexOf(e);if(t!==-1)return Yr[t];const n=mi..indexOf(e);return n!==-1?Yr[n]:null}function Vw(e,t){if(t?.difficultyMode)return t?.theme==="light"?"bg-white border border-gray-300 text-white":"bg-white text-black";switch(e){case"":return"bg-green-600 text-white";case"":return"bg-red-600 text-white";case"":return"bg-yellow-500 text-white";case"":return"bg-gray-400 text-white";case"":return"bg-black text-white";default:return"bg-neutral-700 text-white"}}function hi(e,t,n){if(t==="stem"){const i=jb(e);if(!i)return console.warn("Invalid stem:",e),"bg-neutral-700";const o=jr.indexOf(i),l=o>=0?_O[o]:void 0;return Vw(l,n)}else{const i=hT(e);if(!i)return console.warn("Invalid branch:",e),"bg-neutral-700";const o=Yr.indexOf(i),l=o>=0?xO[o]:void 0;return Vw(l,n)}}function Ar(e,t){const n=jb(e);if(!n)throw new Error(`getSipSin: invalid dayStem ${e}`);if(t.stem){const i=jb(t.stem);if(!i)throw new Error(`getSipSin: invalid stem ${t.stem}`);return EO[n][i]}if(t.branch){const i=hT(t.branch);if(!i)throw new Error(`getSipSin: invalid branch ${t.branch}`);return TO[n][i]}throw new Error("getSipSin: stem or branch required")}const Cm={:["","(-)",""],:["","",""],:["","",""],:["","(-)",""],:["","",""],:["","",""],:["","",""],:["","",""],:["","",""],:["","(-)",""],:["","",""],:["","",""]},Rm={:["(-)","(-)",""],:["","",""],:["(-)","",""],:["(-)","(-)",""],:["","",""],:["(-)","",""],:["(-)","(-)",""],:["","",""],:["(-)","",""],:["(-)","(-)",""],:["","",""],:["(-)","",""]};function Yu({branch:e,dayStem:t,mode:n="all",mapping:i="classic",variant:o="auto",isUnknownTime:l=!1}){const u=(i==="hgc"?Rm:Cm)[e]??[],f=n==="main"?[u[2]]:u,m=o==="white",p=m?"text-white":"text-neutral-800 dark:text-white",y=m?"border-white":"border-neutral-800 dark: border-neutral-200",_=m?"text-yellow-900":"text-red-600 dark:text-yellow-300";return g.jsx("div",{className:"w-full flex flex-col gap-1 mt-1",children:f.map((x,S)=>x==="(-)"||l?g.jsx("div",{className:`w-full max-w-[80px] mx-auto text-[10px] desk:text-xs text-neutral-500 py-0.5 desk:px-1 border ${y} ${p} rounded text-center text-nowrap`,children:"(-) ()"},S):g.jsxs("div",{className:`w-full max-w-[80px] mx-auto text-[10px] desk:text-xs py-0.5 desk:px-1 border ${y} ${p} rounded text-center text-nowrap 
            ${n==="main"||S===2?`jeonggi bg-neutral-500/50 ${_} font-bold`:""}`,children:[x," (",Ar(t,{stem:x}),")"]},S))})}const _d=bd(e=>({manualHour:null,setManualHour:t=>e({manualHour:t}),clearManualHour:()=>e({manualHour:null})})),ly={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},fT=Object.fromEntries(Object.entries(ly).map(([e,t])=>[t,e])),cy={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},mT=Object.fromEntries(Object.entries(cy).map(([e,t])=>[t,e]));function Kw(e){return Bi..includes(e)}function Ww(e){return Bi..includes(e)}function tC(e){return mi..includes(e)}function nC(e){return mi..includes(e)}function Xw(e,t,n){return n===""?t==="stem"?ly[e]??e:cy[e]??e:t==="stem"?fT[e]??e:mT[e]??e}function Jw(e){const t=fT[e]??e;return tC(t)?t:""}function rC(e){const t=mT[e]??e;return nC(t)?t:""}function iC(e){if(Kw(e))return e;const t=ly[e]??e;return Kw(t)?t:""}function sC(e){if(Ww(e))return e;const t=cy[e]??e;return Ww(t)?t:""}const aC=new Set(["","","","","","","","","",""]),oC=new Set(["","","","","","","","","","","",""]),lC=e=>aC.has(e),cC=e=>oC.has(e);function uc({label:e,gz:t,dayStem:n,settings:i,unseongText:o,shinsalText:l,hideBranchSipSin:u=!0,hideHiddenStems:f=!1,size:m="sm",variant:p="auto",isUnknownTime:y=!1}){const{manualHour:_}=_d(),x=y&&!_,S=t.charAt(0),T=t.charAt(1),k=Xw(S,"stem",i.charType),j=Xw(T,"branch",i.charType),C=Jw(S),P=rC(T),N=Jw(n),M=sC(T),D=iC(n),$=i.showSipSin?Ar(N,{stem:C}):null,z=!u&&i.showSipSin?Ar(N,{branch:P}):null,F=i.thinEum&&lC(S)?"font-thin":"font-bold",K=i.thinEum&&cC(T)?"font-thin":"font-bold",oe={sm:"w-10 h-10 sm:w-12 sm:h-12",md:"w-12 h-12 sm:w-14 sm:h-14 md:w-16 md:h-16",lg:"w-14 h-14 sm:w-16 sm:h-16 md:w-20 md:h-20"},Q=!f&&!!i.hiddenStem,Y=i.hiddenStem==="regular"?"main":"all",ne=i.hiddenStemMode==="hgc"?"hgc":"classic",ie=p==="white",Se=ie?"bg-white text-neutral-900 border border-neutral-200":"bg-white dark:bg-neutral-900 text-neutral-900 dark:text-neutral-100 border border-neutral-200 dark:border-neutral-800",J=ie?"bg-neutral-100 text-neutral-700":"bg-neutral-100 dark:bg-neutral-800/60 text-neutral-700 dark:text-neutral-200",le=ie?"border-neutral-200":"border-neutral-200 dark:border-neutral-800",te=ie?"text-neutral-500":"text-neutral-400",be=ie?"text-neutral-500":"text-neutral-400",{settings:Z}=Wn(),G=x?`bg-white ${le}`:`${hi(C,"stem",Z)} ${le}`,B=x?`bg-white ${le}`:`${hi(P,"branch",Z)} ${le}`,q=x?"text-black":Z.difficultyMode?Z.theme==="light"?"text-neutral-900":"text-black":"text-white",V=x?"text-black":Z.difficultyMode?Z.theme==="light"?"text-neutral-900":"text-black":"text-white";return g.jsxs("div",{className:`rounded-sm desk:rounded-xl overflow-hidden ${Se}`,children:[g.jsx("div",{className:`py-2 text-center text-[10px] desk:text-xs tracking-wider ${J} text-nowrap`,children:e}),g.jsxs("div",{className:"py-3 flex flex-col items-center gap-1",children:[$&&g.jsx("div",{className:`text-[10px] desk:text-xs ${te} text-nowrap`,children:y&&!_?"-":$}),g.jsx("div",{className:`${oe[m]} rounded-sm desk:rounded-lg flex items-center justify-center border ${G}`,children:g.jsx("span",{className:`text-2xl md:text-3xl ${q} ${F}`,children:x?"-":k})}),g.jsx("div",{className:`${oe[m]} rounded-sm desk:rounded-lg flex items-center justify-center border ${B}`,children:g.jsx("span",{className:`text-2xl md:text-3xl ${V} ${K}`,children:x?"-":j})}),Q&&g.jsx(Yu,{branch:M,dayStem:D,mode:Y,mapping:ne,isUnknownTime:y&&!_&&(e===""||e==="")}),z&&g.jsx("div",{className:`text-[10px] desk:text-xs ${be}`,children:y&&!_?"-":z}),i.showSibiUnseong&&g.jsx("div",{className:`text-[10px] desk:text-xs ${be} text-nowrap`,children:y&&!_?"-":o||""}),i.showSibiSinsal&&g.jsx("div",{className:`text-[10px] desk:text-xs ${be} text-nowrap`,children:y&&!_?"-":l||""})]})]})}const uC=new Set(mi.);function dC(e){return Am.has(e)?e:uC.has(e)?jm[e]:""}function hC({label:e,settings:t,hideBranchSipSin:n=!0}){const i=t.showSipSin,o=!!t.hiddenStem,u=(t.hiddenStem==="regular"?"main":"all")==="main"?1:3,f=t.showSipSin&&!n;return g.jsxs("div",{className:"rounded-sm desk:rounded-xl bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 overflow-hidden transition-colors",children:[g.jsx("div",{className:"py-2 text-center text-[10px] desk:text-xs tracking-wider bg-neutral-100 dark:bg-neutral-800/60 text-neutral-700 dark:text-neutral-200 text-nowrap",children:e}),g.jsxs("div",{className:"p-3 flex flex-col items-center gap-1",children:[i&&g.jsx("div",{className:"text-[10px] desk:text-xs text-neutral-500 dark:text-neutral-400 text-nowrap",children:"-"}),g.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-sm desk:rounded-lg flex items-center justify-center border border-neutral-200 dark:border-neutral-800 bg-white",children:g.jsx("span",{className:"text-2xl md:text-3xl font-bold text-neutral-900",children:"-"})}),g.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-sm desk:rounded-lg flex items-center justify-center border border-neutral-200 dark:border-neutral-800 bg-white",children:g.jsx("span",{className:"text-2xl md:text-3xl font-bold text-neutral-900",children:"-"})}),o&&g.jsx("div",{className:"flex flex-col gap-1 mt-1 w-full",children:Array.from({length:u}).map((m,p)=>g.jsx("div",{className:"w-full max-w-[80px] mx-auto text-[10px] desk:text-xs py-0.5 desk:px-1 border border-neutral-200 dark:border-neutral-800 rounded text-center text-nowrap text-neutral-500 dark:text-neutral-400",children:"-"},p))}),f&&g.jsx("div",{className:"text-[10px] desk:text-xs text-neutral-500 dark:text-neutral-400",children:"-"})]})]})}function fC(){const e=Wn(T=>T.settings),[t,n]=R.useState(new Date),[i,o]=R.useState(!0),[l,u]=R.useState("/"),[f,m]=R.useState(!1);R.useEffect(()=>{if(!i)return;const T=setInterval(()=>n(new Date),1e3);return()=>clearInterval(T)},[i]);const p=ut(t),y=jt(t),_=_t(t,l),x=$i(t,"/"),S=dC(_.charAt(0));return g.jsx("div",{className:"flex justify-center items-center mt-12 w-full h-[calc(100dvh_-_112px)] ",children:g.jsxs("div",{className:`w-[96%] max-w-[640px] mx-auto mb-4 p-4
                      bg-white dark:bg-neutral-950
                      text-neutral-900 dark:text-neutral-100
                      rounded-xl shadow border border-neutral-200 dark:border-neutral-800 transition-colors`,children:[g.jsxs("header",{className:"flex flex-col desk:flex-row items-center justify-center desk:justify-between mb-4 gap-2",children:[g.jsxs("div",{className:"font-semibold text-sm desk:text-base",children:[" "," ",g.jsxs("span",{className:"text-neutral-500 dark:text-neutral-400",children:["(",i?"":"",") ",gC(t)]})]}),g.jsxs("div",{className:"flex gap-2 items-center",children:[g.jsxs("select",{value:l,onChange:T=>u(T.target.value),className:`text-xs rounded px-2 py-1 h-30 cursor-pointer
                        bg-white dark:bg-neutral-900
                        border border-neutral-300 dark:border-neutral-700
                        text-neutral-900 dark:text-neutral-100
                        focus:outline-none focus:ring-2 focus:ring-amber-500/40`,children:[g.jsx("option",{value:"",children:" ( 23)"}),g.jsx("option",{value:"/",children:"/ ()"}),g.jsx("option",{value:"",children:" ( 3)"})]}),g.jsx("button",{onClick:()=>o(!i),className:`text-xs px-3 py-1 rounded transition-colors cursor-pointer
                        bg-neutral-100 hover:bg-neutral-200
                        dark:bg-neutral-800 dark:hover:bg-neutral-700
                        text-neutral-900 dark:text-neutral-100
                        border border-neutral-200 dark:border-neutral-700`,children:i?" ":" "})]})]}),g.jsxs("div",{className:"grid grid-cols-4 gap-3 mb-6",children:[f?g.jsx(hC,{label:"",settings:e,hideBranchSipSin:!0}):g.jsx(uc,{label:"",gz:x,dayStem:S,settings:e,hideBranchSipSin:!0}),g.jsx(uc,{label:"",gz:_,dayStem:S,settings:e,hideBranchSipSin:!0}),g.jsx(uc,{label:"",gz:y,dayStem:S,settings:e,hideBranchSipSin:!0}),g.jsx(uc,{label:"",gz:p,dayStem:S,settings:e,hideBranchSipSin:!0})]}),g.jsxs("div",{className:"flex flex-col desk:flex-row gap-2 desk:gap-3 items-center",children:[g.jsx("label",{className:"text-sm text-neutral-600 dark:text-neutral-300",children:"/ "}),g.jsx("input",{type:"datetime-local",value:mC(t),disabled:i,onChange:T=>{const k=pC(T.target.value);k&&n(k)},className:`rounded px-3 py-1 text-sm transition-colors
                        bg-white dark:bg-neutral-900
                        border border-neutral-300 dark:border-neutral-700
                        text-neutral-900 dark:text-neutral-100
                        focus:outline-none focus:ring-2 focus:ring-amber-500/40
                        ${i?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,min:"1900-01-01T00:00",max:"2100-12-31T23:59"}),g.jsx("button",{onClick:()=>m(T=>!T),className:`text-xs px-3 py-1 rounded border transition-colors cursor-pointer
                        ${f?"bg-white text-neutral-900 border-neutral-300 hover:bg-neutral-100":"bg-neutral-100 text-neutral-900 border-neutral-200 hover:bg-neutral-200 dark:bg-neutral-800 dark:text-neutral-100 dark:border-neutral-700 dark:hover:bg-neutral-700"}`,title:"     ",children:f?" ":" "})]})]})})}function mC(e){const t=n=>n.toString().padStart(2,"0");return`${e.getFullYear()}-${t(e.getMonth()+1)}-${t(e.getDate())}T${t(e.getHours())}:${t(e.getMinutes())}`}function pC(e){if(!e)return null;const[t,n]=e.split("T");if(!t||!n)return null;const[i,o,l]=t.split("-").map(Number),[u,f]=n.split(":").map(Number),m=new Date(i,o-1,l,u,f);return Number.isNaN(m.getTime())?null:m}function gC(e){const t=n=>n.toString().padStart(2,"0");return`${t(e.getHours())}:${t(e.getMinutes())}:${t(e.getSeconds())}`}const ir=[];for(let e=0;e<256;++e)ir.push((e+256).toString(16).slice(1));function bC(e,t=0){return(ir[e[t+0]]+ir[e[t+1]]+ir[e[t+2]]+ir[e[t+3]]+"-"+ir[e[t+4]]+ir[e[t+5]]+"-"+ir[e[t+6]]+ir[e[t+7]]+"-"+ir[e[t+8]]+ir[e[t+9]]+"-"+ir[e[t+10]]+ir[e[t+11]]+ir[e[t+12]]+ir[e[t+13]]+ir[e[t+14]]+ir[e[t+15]]).toLowerCase()}let og;const yC=new Uint8Array(16);function vC(){if(!og){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");og=crypto.getRandomValues.bind(crypto)}return og(yC)}const _C=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Qw={randomUUID:_C};function pT(e,t,n){if(Qw.randomUUID&&!e)return Qw.randomUUID();e=e||{};const i=e.random??e.rng?.()??vC();if(i.length<16)throw new Error("Random bytes length must be >= 16");return i[6]=i[6]&15|64,i[8]=i[8]&63|128,bC(i)}var qu={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var xC=qu.exports,e1;function wC(){return e1||(e1=1,(function(e,t){(function(n,i){i(t)})(xC,(function(n){var i="1.9.4";function o(a){var d,b,E,A;for(b=1,E=arguments.length;b<E;b++){A=arguments[b];for(d in A)a[d]=A[d]}return a}var l=Object.create||(function(){function a(){}return function(d){return a.prototype=d,new a}})();function u(a,d){var b=Array.prototype.slice;if(a.bind)return a.bind.apply(a,b.call(arguments,1));var E=b.call(arguments,2);return function(){return a.apply(d,E.length?E.concat(b.call(arguments)):arguments)}}var f=0;function m(a){return"_leaflet_id"in a||(a._leaflet_id=++f),a._leaflet_id}function p(a,d,b){var E,A,I,ee;return ee=function(){E=!1,A&&(I.apply(b,A),A=!1)},I=function(){E?A=arguments:(a.apply(b,arguments),setTimeout(ee,d),E=!0)},I}function y(a,d,b){var E=d[1],A=d[0],I=E-A;return a===E&&b?a:((a-A)%I+I)%I+A}function _(){return!1}function x(a,d){if(d===!1)return a;var b=Math.pow(10,d===void 0?6:d);return Math.round(a*b)/b}function S(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function T(a){return S(a).split(/\s+/)}function k(a,d){Object.prototype.hasOwnProperty.call(a,"options")||(a.options=a.options?l(a.options):{});for(var b in d)a.options[b]=d[b];return a.options}function j(a,d,b){var E=[];for(var A in a)E.push(encodeURIComponent(b?A.toUpperCase():A)+"="+encodeURIComponent(a[A]));return(!d||d.indexOf("?")===-1?"?":"&")+E.join("&")}var C=/\{ *([\w_ -]+) *\}/g;function P(a,d){return a.replace(C,function(b,E){var A=d[E];if(A===void 0)throw new Error("No value provided for variable "+b);return typeof A=="function"&&(A=A(d)),A})}var N=Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"};function M(a,d){for(var b=0;b<a.length;b++)if(a[b]===d)return b;return-1}var D="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function $(a){return window["webkit"+a]||window["moz"+a]||window["ms"+a]}var z=0;function F(a){var d=+new Date,b=Math.max(0,16-(d-z));return z=d+b,window.setTimeout(a,b)}var K=window.requestAnimationFrame||$("RequestAnimationFrame")||F,oe=window.cancelAnimationFrame||$("CancelAnimationFrame")||$("CancelRequestAnimationFrame")||function(a){window.clearTimeout(a)};function Q(a,d,b){if(b&&K===F)a.call(d);else return K.call(window,u(a,d))}function Y(a){a&&oe.call(window,a)}var ne={__proto__:null,extend:o,create:l,bind:u,get lastId(){return f},stamp:m,throttle:p,wrapNum:y,falseFn:_,formatNum:x,trim:S,splitWords:T,setOptions:k,getParamString:j,template:P,isArray:N,indexOf:M,emptyImageUrl:D,requestFn:K,cancelFn:oe,requestAnimFrame:Q,cancelAnimFrame:Y};function ie(){}ie.extend=function(a){var d=function(){k(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},b=d.__super__=this.prototype,E=l(b);E.constructor=d,d.prototype=E;for(var A in this)Object.prototype.hasOwnProperty.call(this,A)&&A!=="prototype"&&A!=="__super__"&&(d[A]=this[A]);return a.statics&&o(d,a.statics),a.includes&&(Se(a.includes),o.apply(null,[E].concat(a.includes))),o(E,a),delete E.statics,delete E.includes,E.options&&(E.options=b.options?l(b.options):{},o(E.options,a.options)),E._initHooks=[],E.callInitHooks=function(){if(!this._initHooksCalled){b.callInitHooks&&b.callInitHooks.call(this),this._initHooksCalled=!0;for(var I=0,ee=E._initHooks.length;I<ee;I++)E._initHooks[I].call(this)}},d},ie.include=function(a){var d=this.prototype.options;return o(this.prototype,a),a.options&&(this.prototype.options=d,this.mergeOptions(a.options)),this},ie.mergeOptions=function(a){return o(this.prototype.options,a),this},ie.addInitHook=function(a){var d=Array.prototype.slice.call(arguments,1),b=typeof a=="function"?a:function(){this[a].apply(this,d)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(b),this};function Se(a){if(!(typeof L>"u"||!L||!L.Mixin)){a=N(a)?a:[a];for(var d=0;d<a.length;d++)a[d]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var J={on:function(a,d,b){if(typeof a=="object")for(var E in a)this._on(E,a[E],d);else{a=T(a);for(var A=0,I=a.length;A<I;A++)this._on(a[A],d,b)}return this},off:function(a,d,b){if(!arguments.length)delete this._events;else if(typeof a=="object")for(var E in a)this._off(E,a[E],d);else{a=T(a);for(var A=arguments.length===1,I=0,ee=a.length;I<ee;I++)A?this._off(a[I]):this._off(a[I],d,b)}return this},_on:function(a,d,b,E){if(typeof d!="function"){console.warn("wrong listener type: "+typeof d);return}if(this._listens(a,d,b)===!1){b===this&&(b=void 0);var A={fn:d,ctx:b};E&&(A.once=!0),this._events=this._events||{},this._events[a]=this._events[a]||[],this._events[a].push(A)}},_off:function(a,d,b){var E,A,I;if(this._events&&(E=this._events[a],!!E)){if(arguments.length===1){if(this._firingCount)for(A=0,I=E.length;A<I;A++)E[A].fn=_;delete this._events[a];return}if(typeof d!="function"){console.warn("wrong listener type: "+typeof d);return}var ee=this._listens(a,d,b);if(ee!==!1){var de=E[ee];this._firingCount&&(de.fn=_,this._events[a]=E=E.slice()),E.splice(ee,1)}}},fire:function(a,d,b){if(!this.listens(a,b))return this;var E=o({},d,{type:a,target:this,sourceTarget:d&&d.sourceTarget||this});if(this._events){var A=this._events[a];if(A){this._firingCount=this._firingCount+1||1;for(var I=0,ee=A.length;I<ee;I++){var de=A[I],_e=de.fn;de.once&&this.off(a,_e,de.ctx),_e.call(de.ctx||this,E)}this._firingCount--}}return b&&this._propagateEvent(E),this},listens:function(a,d,b,E){typeof a!="string"&&console.warn('"string" type argument expected');var A=d;typeof d!="function"&&(E=!!d,A=void 0,b=void 0);var I=this._events&&this._events[a];if(I&&I.length&&this._listens(a,A,b)!==!1)return!0;if(E){for(var ee in this._eventParents)if(this._eventParents[ee].listens(a,d,b,E))return!0}return!1},_listens:function(a,d,b){if(!this._events)return!1;var E=this._events[a]||[];if(!d)return!!E.length;b===this&&(b=void 0);for(var A=0,I=E.length;A<I;A++)if(E[A].fn===d&&E[A].ctx===b)return A;return!1},once:function(a,d,b){if(typeof a=="object")for(var E in a)this._on(E,a[E],d,!0);else{a=T(a);for(var A=0,I=a.length;A<I;A++)this._on(a[A],d,b,!0)}return this},addEventParent:function(a){return this._eventParents=this._eventParents||{},this._eventParents[m(a)]=a,this},removeEventParent:function(a){return this._eventParents&&delete this._eventParents[m(a)],this},_propagateEvent:function(a){for(var d in this._eventParents)this._eventParents[d].fire(a.type,o({layer:a.target,propagatedFrom:a.target},a),!0)}};J.addEventListener=J.on,J.removeEventListener=J.clearAllEventListeners=J.off,J.addOneTimeEventListener=J.once,J.fireEvent=J.fire,J.hasEventListeners=J.listens;var le=ie.extend(J);function te(a,d,b){this.x=b?Math.round(a):a,this.y=b?Math.round(d):d}var be=Math.trunc||function(a){return a>0?Math.floor(a):Math.ceil(a)};te.prototype={clone:function(){return new te(this.x,this.y)},add:function(a){return this.clone()._add(Z(a))},_add:function(a){return this.x+=a.x,this.y+=a.y,this},subtract:function(a){return this.clone()._subtract(Z(a))},_subtract:function(a){return this.x-=a.x,this.y-=a.y,this},divideBy:function(a){return this.clone()._divideBy(a)},_divideBy:function(a){return this.x/=a,this.y/=a,this},multiplyBy:function(a){return this.clone()._multiplyBy(a)},_multiplyBy:function(a){return this.x*=a,this.y*=a,this},scaleBy:function(a){return new te(this.x*a.x,this.y*a.y)},unscaleBy:function(a){return new te(this.x/a.x,this.y/a.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=be(this.x),this.y=be(this.y),this},distanceTo:function(a){a=Z(a);var d=a.x-this.x,b=a.y-this.y;return Math.sqrt(d*d+b*b)},equals:function(a){return a=Z(a),a.x===this.x&&a.y===this.y},contains:function(a){return a=Z(a),Math.abs(a.x)<=Math.abs(this.x)&&Math.abs(a.y)<=Math.abs(this.y)},toString:function(){return"Point("+x(this.x)+", "+x(this.y)+")"}};function Z(a,d,b){return a instanceof te?a:N(a)?new te(a[0],a[1]):a==null?a:typeof a=="object"&&"x"in a&&"y"in a?new te(a.x,a.y):new te(a,d,b)}function G(a,d){if(a)for(var b=d?[a,d]:a,E=0,A=b.length;E<A;E++)this.extend(b[E])}G.prototype={extend:function(a){var d,b;if(!a)return this;if(a instanceof te||typeof a[0]=="number"||"x"in a)d=b=Z(a);else if(a=B(a),d=a.min,b=a.max,!d||!b)return this;return!this.min&&!this.max?(this.min=d.clone(),this.max=b.clone()):(this.min.x=Math.min(d.x,this.min.x),this.max.x=Math.max(b.x,this.max.x),this.min.y=Math.min(d.y,this.min.y),this.max.y=Math.max(b.y,this.max.y)),this},getCenter:function(a){return Z((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,a)},getBottomLeft:function(){return Z(this.min.x,this.max.y)},getTopRight:function(){return Z(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(a){var d,b;return typeof a[0]=="number"||a instanceof te?a=Z(a):a=B(a),a instanceof G?(d=a.min,b=a.max):d=b=a,d.x>=this.min.x&&b.x<=this.max.x&&d.y>=this.min.y&&b.y<=this.max.y},intersects:function(a){a=B(a);var d=this.min,b=this.max,E=a.min,A=a.max,I=A.x>=d.x&&E.x<=b.x,ee=A.y>=d.y&&E.y<=b.y;return I&&ee},overlaps:function(a){a=B(a);var d=this.min,b=this.max,E=a.min,A=a.max,I=A.x>d.x&&E.x<b.x,ee=A.y>d.y&&E.y<b.y;return I&&ee},isValid:function(){return!!(this.min&&this.max)},pad:function(a){var d=this.min,b=this.max,E=Math.abs(d.x-b.x)*a,A=Math.abs(d.y-b.y)*a;return B(Z(d.x-E,d.y-A),Z(b.x+E,b.y+A))},equals:function(a){return a?(a=B(a),this.min.equals(a.getTopLeft())&&this.max.equals(a.getBottomRight())):!1}};function B(a,d){return!a||a instanceof G?a:new G(a,d)}function q(a,d){if(a)for(var b=d?[a,d]:a,E=0,A=b.length;E<A;E++)this.extend(b[E])}q.prototype={extend:function(a){var d=this._southWest,b=this._northEast,E,A;if(a instanceof H)E=a,A=a;else if(a instanceof q){if(E=a._southWest,A=a._northEast,!E||!A)return this}else return a?this.extend(X(a)||V(a)):this;return!d&&!b?(this._southWest=new H(E.lat,E.lng),this._northEast=new H(A.lat,A.lng)):(d.lat=Math.min(E.lat,d.lat),d.lng=Math.min(E.lng,d.lng),b.lat=Math.max(A.lat,b.lat),b.lng=Math.max(A.lng,b.lng)),this},pad:function(a){var d=this._southWest,b=this._northEast,E=Math.abs(d.lat-b.lat)*a,A=Math.abs(d.lng-b.lng)*a;return new q(new H(d.lat-E,d.lng-A),new H(b.lat+E,b.lng+A))},getCenter:function(){return new H((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new H(this.getNorth(),this.getWest())},getSouthEast:function(){return new H(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(a){typeof a[0]=="number"||a instanceof H||"lat"in a?a=X(a):a=V(a);var d=this._southWest,b=this._northEast,E,A;return a instanceof q?(E=a.getSouthWest(),A=a.getNorthEast()):E=A=a,E.lat>=d.lat&&A.lat<=b.lat&&E.lng>=d.lng&&A.lng<=b.lng},intersects:function(a){a=V(a);var d=this._southWest,b=this._northEast,E=a.getSouthWest(),A=a.getNorthEast(),I=A.lat>=d.lat&&E.lat<=b.lat,ee=A.lng>=d.lng&&E.lng<=b.lng;return I&&ee},overlaps:function(a){a=V(a);var d=this._southWest,b=this._northEast,E=a.getSouthWest(),A=a.getNorthEast(),I=A.lat>d.lat&&E.lat<b.lat,ee=A.lng>d.lng&&E.lng<b.lng;return I&&ee},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(a,d){return a?(a=V(a),this._southWest.equals(a.getSouthWest(),d)&&this._northEast.equals(a.getNorthEast(),d)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function V(a,d){return a instanceof q?a:new q(a,d)}function H(a,d,b){if(isNaN(a)||isNaN(d))throw new Error("Invalid LatLng object: ("+a+", "+d+")");this.lat=+a,this.lng=+d,b!==void 0&&(this.alt=+b)}H.prototype={equals:function(a,d){if(!a)return!1;a=X(a);var b=Math.max(Math.abs(this.lat-a.lat),Math.abs(this.lng-a.lng));return b<=(d===void 0?1e-9:d)},toString:function(a){return"LatLng("+x(this.lat,a)+", "+x(this.lng,a)+")"},distanceTo:function(a){return he.distance(this,X(a))},wrap:function(){return he.wrapLatLng(this)},toBounds:function(a){var d=180*a/40075017,b=d/Math.cos(Math.PI/180*this.lat);return V([this.lat-d,this.lng-b],[this.lat+d,this.lng+b])},clone:function(){return new H(this.lat,this.lng,this.alt)}};function X(a,d,b){return a instanceof H?a:N(a)&&typeof a[0]!="object"?a.length===3?new H(a[0],a[1],a[2]):a.length===2?new H(a[0],a[1]):null:a==null?a:typeof a=="object"&&"lat"in a?new H(a.lat,"lng"in a?a.lng:a.lon,a.alt):d===void 0?null:new H(a,d,b)}var W={latLngToPoint:function(a,d){var b=this.projection.project(a),E=this.scale(d);return this.transformation._transform(b,E)},pointToLatLng:function(a,d){var b=this.scale(d),E=this.transformation.untransform(a,b);return this.projection.unproject(E)},project:function(a){return this.projection.project(a)},unproject:function(a){return this.projection.unproject(a)},scale:function(a){return 256*Math.pow(2,a)},zoom:function(a){return Math.log(a/256)/Math.LN2},getProjectedBounds:function(a){if(this.infinite)return null;var d=this.projection.bounds,b=this.scale(a),E=this.transformation.transform(d.min,b),A=this.transformation.transform(d.max,b);return new G(E,A)},infinite:!1,wrapLatLng:function(a){var d=this.wrapLng?y(a.lng,this.wrapLng,!0):a.lng,b=this.wrapLat?y(a.lat,this.wrapLat,!0):a.lat,E=a.alt;return new H(b,d,E)},wrapLatLngBounds:function(a){var d=a.getCenter(),b=this.wrapLatLng(d),E=d.lat-b.lat,A=d.lng-b.lng;if(E===0&&A===0)return a;var I=a.getSouthWest(),ee=a.getNorthEast(),de=new H(I.lat-E,I.lng-A),_e=new H(ee.lat-E,ee.lng-A);return new q(de,_e)}},he=o({},W,{wrapLng:[-180,180],R:6371e3,distance:function(a,d){var b=Math.PI/180,E=a.lat*b,A=d.lat*b,I=Math.sin((d.lat-a.lat)*b/2),ee=Math.sin((d.lng-a.lng)*b/2),de=I*I+Math.cos(E)*Math.cos(A)*ee*ee,_e=2*Math.atan2(Math.sqrt(de),Math.sqrt(1-de));return this.R*_e}}),se=6378137,ve={R:se,MAX_LATITUDE:85.0511287798,project:function(a){var d=Math.PI/180,b=this.MAX_LATITUDE,E=Math.max(Math.min(b,a.lat),-b),A=Math.sin(E*d);return new te(this.R*a.lng*d,this.R*Math.log((1+A)/(1-A))/2)},unproject:function(a){var d=180/Math.PI;return new H((2*Math.atan(Math.exp(a.y/this.R))-Math.PI/2)*d,a.x*d/this.R)},bounds:(function(){var a=se*Math.PI;return new G([-a,-a],[a,a])})()};function ke(a,d,b,E){if(N(a)){this._a=a[0],this._b=a[1],this._c=a[2],this._d=a[3];return}this._a=a,this._b=d,this._c=b,this._d=E}ke.prototype={transform:function(a,d){return this._transform(a.clone(),d)},_transform:function(a,d){return d=d||1,a.x=d*(this._a*a.x+this._b),a.y=d*(this._c*a.y+this._d),a},untransform:function(a,d){return d=d||1,new te((a.x/d-this._b)/this._a,(a.y/d-this._d)/this._c)}};function je(a,d,b,E){return new ke(a,d,b,E)}var Me=o({},he,{code:"EPSG:3857",projection:ve,transformation:(function(){var a=.5/(Math.PI*ve.R);return je(a,.5,-a,.5)})()}),Ee=o({},Me,{code:"EPSG:900913"});function Ie(a){return document.createElementNS("http://www.w3.org/2000/svg",a)}function Pe(a,d){var b="",E,A,I,ee,de,_e;for(E=0,I=a.length;E<I;E++){for(de=a[E],A=0,ee=de.length;A<ee;A++)_e=de[A],b+=(A?"L":"M")+_e.x+" "+_e.y;b+=d?Ve.svg?"z":"x":""}return b||"M0 0"}var Ye=document.documentElement.style,Re="ActiveXObject"in window,fe=Re&&!document.addEventListener,Le="msLaunchUri"in navigator&&!("documentMode"in document),ce=$n("webkit"),me=$n("android"),$e=$n("android 2")||$n("android 3"),He=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Be=me&&$n("Google")&&He<537&&!("AudioNode"in window),tt=!!window.opera,et=!Le&&$n("chrome"),Zt=$n("gecko")&&!ce&&!tt&&!Re,On=!et&&$n("safari"),En=$n("phantom"),lr="OTransition"in Ye,vr=navigator.platform.indexOf("Win")===0,dn=Re&&"transition"in Ye,Ct="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!$e,bn="MozPerspective"in Ye,hn=!window.L_DISABLE_3D&&(dn||Ct||bn)&&!lr&&!En,qr=typeof orientation<"u"||$n("mobile"),ra=qr&&ce,zi=qr&&Ct,Tn=!window.PointerEvent&&window.MSPointerEvent,Dn=!!(window.PointerEvent||Tn),os="ontouchstart"in window||!!window.TouchEvent,Nr=!window.L_NO_TOUCH&&(os||Dn),cr=qr&&tt,gi=qr&&Zt,ia=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Qa=(function(){var a=!1;try{var d=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("testPassiveEventSupport",_,d),window.removeEventListener("testPassiveEventSupport",_,d)}catch{}return a})(),eo=(function(){return!!document.createElement("canvas").getContext})(),Ui=!!(document.createElementNS&&Ie("svg").createSVGRect),to=!!Ui&&(function(){var a=document.createElement("div");return a.innerHTML="<svg/>",(a.firstChild&&a.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),sa=!Ui&&(function(){try{var a=document.createElement("div");a.innerHTML='<v:shape adj="1"/>';var d=a.firstChild;return d.style.behavior="url(#default#VML)",d&&typeof d.adj=="object"}catch{return!1}})(),no=navigator.platform.indexOf("Mac")===0,ro=navigator.platform.indexOf("Linux")===0;function $n(a){return navigator.userAgent.toLowerCase().indexOf(a)>=0}var Ve={ie:Re,ielt9:fe,edge:Le,webkit:ce,android:me,android23:$e,androidStock:Be,opera:tt,chrome:et,gecko:Zt,safari:On,phantom:En,opera12:lr,win:vr,ie3d:dn,webkit3d:Ct,gecko3d:bn,any3d:hn,mobile:qr,mobileWebkit:ra,mobileWebkit3d:zi,msPointer:Tn,pointer:Dn,touch:Nr,touchNative:os,mobileOpera:cr,mobileGecko:gi,retina:ia,passiveEvents:Qa,canvas:eo,svg:Ui,vml:sa,inlineSvg:to,mac:no,linux:ro},ks=Ve.msPointer?"MSPointerDown":"pointerdown",Or=Ve.msPointer?"MSPointerMove":"pointermove",ur=Ve.msPointer?"MSPointerUp":"pointerup",sn=Ve.msPointer?"MSPointerCancel":"pointercancel",kn={touchstart:ks,touchmove:Or,touchend:ur,touchcancel:sn},Zr={touchstart:In,touchmove:mt,touchend:mt,touchcancel:mt},bi={},pe=!1;function Fe(a,d,b){return d==="touchstart"&&xt(),Zr[d]?(b=Zr[d].bind(this,b),a.addEventListener(kn[d],b,!1),b):(console.warn("wrong event specified:",d),_)}function lt(a,d,b){if(!kn[d]){console.warn("wrong event specified:",d);return}a.removeEventListener(kn[d],b,!1)}function pt(a){bi[a.pointerId]=a}function nt(a){bi[a.pointerId]&&(bi[a.pointerId]=a)}function dt(a){delete bi[a.pointerId]}function xt(){pe||(document.addEventListener(ks,pt,!0),document.addEventListener(Or,nt,!0),document.addEventListener(ur,dt,!0),document.addEventListener(sn,dt,!0),pe=!0)}function mt(a,d){if(d.pointerType!==(d.MSPOINTER_TYPE_MOUSE||"mouse")){d.touches=[];for(var b in bi)d.touches.push(bi[b]);d.changedTouches=[d],a(d)}}function In(a,d){d.MSPOINTER_TYPE_TOUCH&&d.pointerType===d.MSPOINTER_TYPE_TOUCH&&yn(d),mt(a,d)}function wt(a){var d={},b,E;for(E in a)b=a[E],d[E]=b&&b.bind?b.bind(a):b;return a=d,d.type="dblclick",d.detail=2,d.isTrusted=!1,d._simulated=!0,d}var aa=200;function io(a,d){a.addEventListener("dblclick",d);var b=0,E;function A(I){if(I.detail!==1){E=I.detail;return}if(!(I.pointerType==="mouse"||I.sourceCapabilities&&!I.sourceCapabilities.firesTouchEvents)){var ee=fo(I);if(!(ee.some(function(_e){return _e instanceof HTMLLabelElement&&_e.attributes.for})&&!ee.some(function(_e){return _e instanceof HTMLInputElement||_e instanceof HTMLSelectElement}))){var de=Date.now();de-b<=aa?(E++,E===2&&d(wt(I))):E=1,b=de}}}return a.addEventListener("click",A),{dblclick:d,simDblclick:A}}function yi(a,d){a.removeEventListener("dblclick",d.dblclick),a.removeEventListener("click",d.simDblclick)}var Jn=lo(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),As=lo(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),so=As==="webkitTransition"||As==="OTransition"?As+"End":"transitionend";function ao(a){return typeof a=="string"?document.getElementById(a):a}function oo(a,d){var b=a.style[d]||a.currentStyle&&a.currentStyle[d];if((!b||b==="auto")&&document.defaultView){var E=document.defaultView.getComputedStyle(a,null);b=E?E[d]:null}return b==="auto"?null:b}function gt(a,d,b){var E=document.createElement(a);return E.className=d||"",b&&b.appendChild(E),E}function zt(a){var d=a.parentNode;d&&d.removeChild(a)}function Dr(a){for(;a.firstChild;)a.removeChild(a.firstChild)}function zn(a){var d=a.parentNode;d&&d.lastChild!==a&&d.appendChild(a)}function js(a){var d=a.parentNode;d&&d.firstChild!==a&&d.insertBefore(a,d.firstChild)}function Rc(a,d){if(a.classList!==void 0)return a.classList.contains(d);var b=hl(a);return b.length>0&&new RegExp("(^|\\s)"+d+"(\\s|$)").test(b)}function at(a,d){if(a.classList!==void 0)for(var b=T(d),E=0,A=b.length;E<A;E++)a.classList.add(b[E]);else if(!Rc(a,d)){var I=hl(a);oa(a,(I?I+" ":"")+d)}}function an(a,d){a.classList!==void 0?a.classList.remove(d):oa(a,S((" "+hl(a)+" ").replace(" "+d+" "," ")))}function oa(a,d){a.className.baseVal===void 0?a.className=d:a.className.baseVal=d}function hl(a){return a.correspondingElement&&(a=a.correspondingElement),a.className.baseVal===void 0?a.className:a.className.baseVal}function en(a,d){"opacity"in a.style?a.style.opacity=d:"filter"in a.style&&Lc(a,d)}function Lc(a,d){var b=!1,E="DXImageTransform.Microsoft.Alpha";try{b=a.filters.item(E)}catch{if(d===1)return}d=Math.round(d*100),b?(b.Enabled=d!==100,b.Opacity=d):a.style.filter+=" progid:"+E+"(opacity="+d+")"}function lo(a){for(var d=document.documentElement.style,b=0;b<a.length;b++)if(a[b]in d)return a[b];return!1}function Hi(a,d,b){var E=d||new te(0,0);a.style[Jn]=(Ve.ie3d?"translate("+E.x+"px,"+E.y+"px)":"translate3d("+E.x+"px,"+E.y+"px,0)")+(b?" scale("+b+")":"")}function Yt(a,d){a._leaflet_pos=d,Ve.any3d?Hi(a,d):(a.style.left=d.x+"px",a.style.top=d.y+"px")}function ls(a){return a._leaflet_pos||new te(0,0)}var la,vi,Bc;if("onselectstart"in document)la=function(){st(window,"selectstart",yn)},vi=function(){Bt(window,"selectstart",yn)};else{var ca=lo(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);la=function(){if(ca){var a=document.documentElement.style;Bc=a[ca],a[ca]="none"}},vi=function(){ca&&(document.documentElement.style[ca]=Bc,Bc=void 0)}}function fl(){st(window,"dragstart",yn)}function co(){Bt(window,"dragstart",yn)}var ml,Pc;function ua(a){for(;a.tabIndex===-1;)a=a.parentNode;a.style&&(Mr(),ml=a,Pc=a.style.outlineStyle,a.style.outlineStyle="none",st(window,"keydown",Mr))}function Mr(){ml&&(ml.style.outlineStyle=Pc,ml=void 0,Pc=void 0,Bt(window,"keydown",Mr))}function pl(a){do a=a.parentNode;while((!a.offsetWidth||!a.offsetHeight)&&a!==document.body);return a}function uo(a){var d=a.getBoundingClientRect();return{x:d.width/a.offsetWidth||1,y:d.height/a.offsetHeight||1,boundingClientRect:d}}var da={__proto__:null,TRANSFORM:Jn,TRANSITION:As,TRANSITION_END:so,get:ao,getStyle:oo,create:gt,remove:zt,empty:Dr,toFront:zn,toBack:js,hasClass:Rc,addClass:at,removeClass:an,setClass:oa,getClass:hl,setOpacity:en,testProp:lo,setTransform:Hi,setPosition:Yt,getPosition:ls,get disableTextSelection(){return la},get enableTextSelection(){return vi},disableImageDrag:fl,enableImageDrag:co,preventOutline:ua,restoreOutline:Mr,getSizedParentNode:pl,getScale:uo};function st(a,d,b,E){if(d&&typeof d=="object")for(var A in d)Kr(a,A,d[A],b);else{d=T(d);for(var I=0,ee=d.length;I<ee;I++)Kr(a,d[I],b,E)}return this}var Vr="_leaflet_events";function Bt(a,d,b,E){if(arguments.length===1)$c(a),delete a[Vr];else if(d&&typeof d=="object")for(var A in d)ho(a,A,d[A],b);else if(d=T(d),arguments.length===2)$c(a,function(de){return M(d,de)!==-1});else for(var I=0,ee=d.length;I<ee;I++)ho(a,d[I],b,E);return this}function $c(a,d){for(var b in a[Vr]){var E=b.split(/\d/)[0];(!d||d(E))&&ho(a,E,null,null,b)}}var Ns={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Kr(a,d,b,E){var A=d+m(b)+(E?"_"+m(E):"");if(a[Vr]&&a[Vr][A])return this;var I=function(de){return b.call(E||a,de||window.event)},ee=I;!Ve.touchNative&&Ve.pointer&&d.indexOf("touch")===0?I=Fe(a,d,I):Ve.touch&&d==="dblclick"?I=io(a,I):"addEventListener"in a?d==="touchstart"||d==="touchmove"||d==="wheel"||d==="mousewheel"?a.addEventListener(Ns[d]||d,I,Ve.passiveEvents?{passive:!1}:!1):d==="mouseenter"||d==="mouseleave"?(I=function(de){de=de||window.event,Gi(a,de)&&ee(de)},a.addEventListener(Ns[d],I,!1)):a.addEventListener(d,ee,!1):a.attachEvent("on"+d,I),a[Vr]=a[Vr]||{},a[Vr][A]=I}function ho(a,d,b,E,A){A=A||d+m(b)+(E?"_"+m(E):"");var I=a[Vr]&&a[Vr][A];if(!I)return this;!Ve.touchNative&&Ve.pointer&&d.indexOf("touch")===0?lt(a,d,I):Ve.touch&&d==="dblclick"?yi(a,I):"removeEventListener"in a?a.removeEventListener(Ns[d]||d,I,!1):a.detachEvent("on"+d,I),a[Vr][A]=null}function Wr(a){return a.stopPropagation?a.stopPropagation():a.originalEvent?a.originalEvent._stopped=!0:a.cancelBubble=!0,this}function _i(a){return Kr(a,"wheel",Wr),this}function Os(a){return st(a,"mousedown touchstart dblclick contextmenu",Wr),a._leaflet_disable_click=!0,this}function yn(a){return a.preventDefault?a.preventDefault():a.returnValue=!1,this}function cs(a){return yn(a),Wr(a),this}function fo(a){if(a.composedPath)return a.composedPath();for(var d=[],b=a.target;b;)d.push(b),b=b.parentNode;return d}function mo(a,d){if(!d)return new te(a.clientX,a.clientY);var b=uo(d),E=b.boundingClientRect;return new te((a.clientX-E.left)/b.x-d.clientLeft,(a.clientY-E.top)/b.y-d.clientTop)}var jd=Ve.linux&&Ve.chrome?window.devicePixelRatio:Ve.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Qn(a){return Ve.edge?a.wheelDeltaY/2:a.deltaY&&a.deltaMode===0?-a.deltaY/jd:a.deltaY&&a.deltaMode===1?-a.deltaY*20:a.deltaY&&a.deltaMode===2?-a.deltaY*60:a.deltaX||a.deltaZ?0:a.wheelDelta?(a.wheelDeltaY||a.wheelDelta)/2:a.detail&&Math.abs(a.detail)<32765?-a.detail*20:a.detail?a.detail/-32765*60:0}function Gi(a,d){var b=d.relatedTarget;if(!b)return!0;try{for(;b&&b!==a;)b=b.parentNode}catch{return!1}return b!==a}var gl={__proto__:null,on:st,off:Bt,stopPropagation:Wr,disableScrollPropagation:_i,disableClickPropagation:Os,preventDefault:yn,stop:cs,getPropagationPath:fo,getMousePosition:mo,getWheelDelta:Qn,isExternalTarget:Gi,addListener:st,removeListener:Bt},ha=le.extend({run:function(a,d,b,E){this.stop(),this._el=a,this._inProgress=!0,this._duration=b||.25,this._easeOutPower=1/Math.max(E||.5,.2),this._startPos=ls(a),this._offset=d.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=Q(this._animate,this),this._step()},_step:function(a){var d=+new Date-this._startTime,b=this._duration*1e3;d<b?this._runFrame(this._easeOut(d/b),a):(this._runFrame(1),this._complete())},_runFrame:function(a,d){var b=this._startPos.add(this._offset.multiplyBy(a));d&&b._round(),Yt(this._el,b),this.fire("step")},_complete:function(){Y(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(a){return 1-Math.pow(1-a,this._easeOutPower)}}),St=le.extend({options:{crs:Me,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(a,d){d=k(this,d),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(a),this._initLayout(),this._onResize=u(this._onResize,this),this._initEvents(),d.maxBounds&&this.setMaxBounds(d.maxBounds),d.zoom!==void 0&&(this._zoom=this._limitZoom(d.zoom)),d.center&&d.zoom!==void 0&&this.setView(X(d.center),d.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=As&&Ve.any3d&&!Ve.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),st(this._proxy,so,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(a,d,b){if(d=d===void 0?this._zoom:this._limitZoom(d),a=this._limitCenter(X(a),d,this.options.maxBounds),b=b||{},this._stop(),this._loaded&&!b.reset&&b!==!0){b.animate!==void 0&&(b.zoom=o({animate:b.animate},b.zoom),b.pan=o({animate:b.animate,duration:b.duration},b.pan));var E=this._zoom!==d?this._tryAnimatedZoom&&this._tryAnimatedZoom(a,d,b.zoom):this._tryAnimatedPan(a,b.pan);if(E)return clearTimeout(this._sizeTimer),this}return this._resetView(a,d,b.pan&&b.pan.noMoveStart),this},setZoom:function(a,d){return this._loaded?this.setView(this.getCenter(),a,{zoom:d}):(this._zoom=a,this)},zoomIn:function(a,d){return a=a||(Ve.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+a,d)},zoomOut:function(a,d){return a=a||(Ve.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-a,d)},setZoomAround:function(a,d,b){var E=this.getZoomScale(d),A=this.getSize().divideBy(2),I=a instanceof te?a:this.latLngToContainerPoint(a),ee=I.subtract(A).multiplyBy(1-1/E),de=this.containerPointToLatLng(A.add(ee));return this.setView(de,d,{zoom:b})},_getBoundsCenterZoom:function(a,d){d=d||{},a=a.getBounds?a.getBounds():V(a);var b=Z(d.paddingTopLeft||d.padding||[0,0]),E=Z(d.paddingBottomRight||d.padding||[0,0]),A=this.getBoundsZoom(a,!1,b.add(E));if(A=typeof d.maxZoom=="number"?Math.min(d.maxZoom,A):A,A===1/0)return{center:a.getCenter(),zoom:A};var I=E.subtract(b).divideBy(2),ee=this.project(a.getSouthWest(),A),de=this.project(a.getNorthEast(),A),_e=this.unproject(ee.add(de).divideBy(2).add(I),A);return{center:_e,zoom:A}},fitBounds:function(a,d){if(a=V(a),!a.isValid())throw new Error("Bounds are not valid.");var b=this._getBoundsCenterZoom(a,d);return this.setView(b.center,b.zoom,d)},fitWorld:function(a){return this.fitBounds([[-90,-180],[90,180]],a)},panTo:function(a,d){return this.setView(a,this._zoom,{pan:d})},panBy:function(a,d){if(a=Z(a).round(),d=d||{},!a.x&&!a.y)return this.fire("moveend");if(d.animate!==!0&&!this.getSize().contains(a))return this._resetView(this.unproject(this.project(this.getCenter()).add(a)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new ha,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),d.noMoveStart||this.fire("movestart"),d.animate!==!1){at(this._mapPane,"leaflet-pan-anim");var b=this._getMapPanePos().subtract(a).round();this._panAnim.run(this._mapPane,b,d.duration||.25,d.easeLinearity)}else this._rawPanBy(a),this.fire("move").fire("moveend");return this},flyTo:function(a,d,b){if(b=b||{},b.animate===!1||!Ve.any3d)return this.setView(a,d,b);this._stop();var E=this.project(this.getCenter()),A=this.project(a),I=this.getSize(),ee=this._zoom;a=X(a),d=d===void 0?ee:d;var de=Math.max(I.x,I.y),_e=de*this.getZoomScale(ee,d),Oe=A.distanceTo(E)||1,Ue=1.42,Xe=Ue*Ue;function ht(fn){var Zi=fn?-1:1,Rs=fn?_e:de,Qc=_e*_e-de*de+Zi*Xe*Xe*Oe*Oe,Oo=2*Rs*Xe*Oe,Do=Qc/Oo,ys=Math.sqrt(Do*Do+1)-Do,Vi=ys<1e-9?-18:Math.log(ys);return Vi}function Un(fn){return(Math.exp(fn)-Math.exp(-fn))/2}function vn(fn){return(Math.exp(fn)+Math.exp(-fn))/2}function xr(fn){return Un(fn)/vn(fn)}var Nt=ht(0);function Ot(fn){return de*(vn(Nt)/vn(Nt+Ue*fn))}function bt(fn){return de*(vn(Nt)*xr(Nt+Ue*fn)-Un(Nt))/Xe}function gs(fn){return 1-Math.pow(1-fn,1.5)}var Br=Date.now(),Ol=(ht(1)-Nt)/Ue,bs=b.duration?1e3*b.duration:1e3*Ol*.8;function Jc(){var fn=(Date.now()-Br)/bs,Zi=gs(fn)*Ol;fn<=1?(this._flyToFrame=Q(Jc,this),this._move(this.unproject(E.add(A.subtract(E).multiplyBy(bt(Zi)/Oe)),ee),this.getScaleZoom(de/Ot(Zi),ee),{flyTo:!0})):this._move(a,d)._moveEnd(!0)}return this._moveStart(!0,b.noMoveStart),Jc.call(this),this},flyToBounds:function(a,d){var b=this._getBoundsCenterZoom(a,d);return this.flyTo(b.center,b.zoom,d)},setMaxBounds:function(a){return a=V(a),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),a.isValid()?(this.options.maxBounds=a,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(a){var d=this.options.minZoom;return this.options.minZoom=a,this._loaded&&d!==a&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(a):this},setMaxZoom:function(a){var d=this.options.maxZoom;return this.options.maxZoom=a,this._loaded&&d!==a&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(a):this},panInsideBounds:function(a,d){this._enforcingBounds=!0;var b=this.getCenter(),E=this._limitCenter(b,this._zoom,V(a));return b.equals(E)||this.panTo(E,d),this._enforcingBounds=!1,this},panInside:function(a,d){d=d||{};var b=Z(d.paddingTopLeft||d.padding||[0,0]),E=Z(d.paddingBottomRight||d.padding||[0,0]),A=this.project(this.getCenter()),I=this.project(a),ee=this.getPixelBounds(),de=B([ee.min.add(b),ee.max.subtract(E)]),_e=de.getSize();if(!de.contains(I)){this._enforcingBounds=!0;var Oe=I.subtract(de.getCenter()),Ue=de.extend(I).getSize().subtract(_e);A.x+=Oe.x<0?-Ue.x:Ue.x,A.y+=Oe.y<0?-Ue.y:Ue.y,this.panTo(this.unproject(A),d),this._enforcingBounds=!1}return this},invalidateSize:function(a){if(!this._loaded)return this;a=o({animate:!1,pan:!0},a===!0?{animate:!0}:a);var d=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var b=this.getSize(),E=d.divideBy(2).round(),A=b.divideBy(2).round(),I=E.subtract(A);return!I.x&&!I.y?this:(a.animate&&a.pan?this.panBy(I):(a.pan&&this._rawPanBy(I),this.fire("move"),a.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(u(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:d,newSize:b}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(a){if(a=this._locateOptions=o({timeout:1e4,watch:!1},a),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var d=u(this._handleGeolocationResponse,this),b=u(this._handleGeolocationError,this);return a.watch?this._locationWatchId=navigator.geolocation.watchPosition(d,b,a):navigator.geolocation.getCurrentPosition(d,b,a),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(a){if(this._container._leaflet_id){var d=a.code,b=a.message||(d===1?"permission denied":d===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:d,message:"Geolocation error: "+b+"."})}},_handleGeolocationResponse:function(a){if(this._container._leaflet_id){var d=a.coords.latitude,b=a.coords.longitude,E=new H(d,b),A=E.toBounds(a.coords.accuracy*2),I=this._locateOptions;if(I.setView){var ee=this.getBoundsZoom(A);this.setView(E,I.maxZoom?Math.min(ee,I.maxZoom):ee)}var de={latlng:E,bounds:A,timestamp:a.timestamp};for(var _e in a.coords)typeof a.coords[_e]=="number"&&(de[_e]=a.coords[_e]);this.fire("locationfound",de)}},addHandler:function(a,d){if(!d)return this;var b=this[a]=new d(this);return this._handlers.push(b),this.options[a]&&b.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),zt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(Y(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var a;for(a in this._layers)this._layers[a].remove();for(a in this._panes)zt(this._panes[a]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(a,d){var b="leaflet-pane"+(a?" leaflet-"+a.replace("Pane","")+"-pane":""),E=gt("div",b,d||this._mapPane);return a&&(this._panes[a]=E),E},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var a=this.getPixelBounds(),d=this.unproject(a.getBottomLeft()),b=this.unproject(a.getTopRight());return new q(d,b)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(a,d,b){a=V(a),b=Z(b||[0,0]);var E=this.getZoom()||0,A=this.getMinZoom(),I=this.getMaxZoom(),ee=a.getNorthWest(),de=a.getSouthEast(),_e=this.getSize().subtract(b),Oe=B(this.project(de,E),this.project(ee,E)).getSize(),Ue=Ve.any3d?this.options.zoomSnap:1,Xe=_e.x/Oe.x,ht=_e.y/Oe.y,Un=d?Math.max(Xe,ht):Math.min(Xe,ht);return E=this.getScaleZoom(Un,E),Ue&&(E=Math.round(E/(Ue/100))*(Ue/100),E=d?Math.ceil(E/Ue)*Ue:Math.floor(E/Ue)*Ue),Math.max(A,Math.min(I,E))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new te(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(a,d){var b=this._getTopLeftPoint(a,d);return new G(b,b.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(a){return this.options.crs.getProjectedBounds(a===void 0?this.getZoom():a)},getPane:function(a){return typeof a=="string"?this._panes[a]:a},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(a,d){var b=this.options.crs;return d=d===void 0?this._zoom:d,b.scale(a)/b.scale(d)},getScaleZoom:function(a,d){var b=this.options.crs;d=d===void 0?this._zoom:d;var E=b.zoom(a*b.scale(d));return isNaN(E)?1/0:E},project:function(a,d){return d=d===void 0?this._zoom:d,this.options.crs.latLngToPoint(X(a),d)},unproject:function(a,d){return d=d===void 0?this._zoom:d,this.options.crs.pointToLatLng(Z(a),d)},layerPointToLatLng:function(a){var d=Z(a).add(this.getPixelOrigin());return this.unproject(d)},latLngToLayerPoint:function(a){var d=this.project(X(a))._round();return d._subtract(this.getPixelOrigin())},wrapLatLng:function(a){return this.options.crs.wrapLatLng(X(a))},wrapLatLngBounds:function(a){return this.options.crs.wrapLatLngBounds(V(a))},distance:function(a,d){return this.options.crs.distance(X(a),X(d))},containerPointToLayerPoint:function(a){return Z(a).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(a){return Z(a).add(this._getMapPanePos())},containerPointToLatLng:function(a){var d=this.containerPointToLayerPoint(Z(a));return this.layerPointToLatLng(d)},latLngToContainerPoint:function(a){return this.layerPointToContainerPoint(this.latLngToLayerPoint(X(a)))},mouseEventToContainerPoint:function(a){return mo(a,this._container)},mouseEventToLayerPoint:function(a){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(a))},mouseEventToLatLng:function(a){return this.layerPointToLatLng(this.mouseEventToLayerPoint(a))},_initContainer:function(a){var d=this._container=ao(a);if(d){if(d._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");st(d,"scroll",this._onScroll,this),this._containerId=m(d)},_initLayout:function(){var a=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ve.any3d,at(a,"leaflet-container"+(Ve.touch?" leaflet-touch":"")+(Ve.retina?" leaflet-retina":"")+(Ve.ielt9?" leaflet-oldie":"")+(Ve.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var d=oo(a,"position");d!=="absolute"&&d!=="relative"&&d!=="fixed"&&d!=="sticky"&&(a.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var a=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Yt(this._mapPane,new te(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(at(a.markerPane,"leaflet-zoom-hide"),at(a.shadowPane,"leaflet-zoom-hide"))},_resetView:function(a,d,b){Yt(this._mapPane,new te(0,0));var E=!this._loaded;this._loaded=!0,d=this._limitZoom(d),this.fire("viewprereset");var A=this._zoom!==d;this._moveStart(A,b)._move(a,d)._moveEnd(A),this.fire("viewreset"),E&&this.fire("load")},_moveStart:function(a,d){return a&&this.fire("zoomstart"),d||this.fire("movestart"),this},_move:function(a,d,b,E){d===void 0&&(d=this._zoom);var A=this._zoom!==d;return this._zoom=d,this._lastCenter=a,this._pixelOrigin=this._getNewPixelOrigin(a),E?b&&b.pinch&&this.fire("zoom",b):((A||b&&b.pinch)&&this.fire("zoom",b),this.fire("move",b)),this},_moveEnd:function(a){return a&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return Y(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(a){Yt(this._mapPane,this._getMapPanePos().subtract(a))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(a){this._targets={},this._targets[m(this._container)]=this;var d=a?Bt:st;d(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&d(window,"resize",this._onResize,this),Ve.any3d&&this.options.transform3DLimit&&(a?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){Y(this._resizeRequest),this._resizeRequest=Q(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var a=this._getMapPanePos();Math.max(Math.abs(a.x),Math.abs(a.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(a,d){for(var b=[],E,A=d==="mouseout"||d==="mouseover",I=a.target||a.srcElement,ee=!1;I;){if(E=this._targets[m(I)],E&&(d==="click"||d==="preclick")&&this._draggableMoved(E)){ee=!0;break}if(E&&E.listens(d,!0)&&(A&&!Gi(I,a)||(b.push(E),A))||I===this._container)break;I=I.parentNode}return!b.length&&!ee&&!A&&this.listens(d,!0)&&(b=[this]),b},_isClickDisabled:function(a){for(;a&&a!==this._container;){if(a._leaflet_disable_click)return!0;a=a.parentNode}},_handleDOMEvent:function(a){var d=a.target||a.srcElement;if(!(!this._loaded||d._leaflet_disable_events||a.type==="click"&&this._isClickDisabled(d))){var b=a.type;b==="mousedown"&&ua(d),this._fireDOMEvent(a,b)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(a,d,b){if(a.type==="click"){var E=o({},a);E.type="preclick",this._fireDOMEvent(E,E.type,b)}var A=this._findEventTargets(a,d);if(b){for(var I=[],ee=0;ee<b.length;ee++)b[ee].listens(d,!0)&&I.push(b[ee]);A=I.concat(A)}if(A.length){d==="contextmenu"&&yn(a);var de=A[0],_e={originalEvent:a};if(a.type!=="keypress"&&a.type!=="keydown"&&a.type!=="keyup"){var Oe=de.getLatLng&&(!de._radius||de._radius<=10);_e.containerPoint=Oe?this.latLngToContainerPoint(de.getLatLng()):this.mouseEventToContainerPoint(a),_e.layerPoint=this.containerPointToLayerPoint(_e.containerPoint),_e.latlng=Oe?de.getLatLng():this.layerPointToLatLng(_e.layerPoint)}for(ee=0;ee<A.length;ee++)if(A[ee].fire(d,_e,!0),_e.originalEvent._stopped||A[ee].options.bubblingMouseEvents===!1&&M(this._mouseEvents,d)!==-1)return}},_draggableMoved:function(a){return a=a.dragging&&a.dragging.enabled()?a:this,a.dragging&&a.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var a=0,d=this._handlers.length;a<d;a++)this._handlers[a].disable()},whenReady:function(a,d){return this._loaded?a.call(d||this,{target:this}):this.on("load",a,d),this},_getMapPanePos:function(){return ls(this._mapPane)||new te(0,0)},_moved:function(){var a=this._getMapPanePos();return a&&!a.equals([0,0])},_getTopLeftPoint:function(a,d){var b=a&&d!==void 0?this._getNewPixelOrigin(a,d):this.getPixelOrigin();return b.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(a,d){var b=this.getSize()._divideBy(2);return this.project(a,d)._subtract(b)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(a,d,b){var E=this._getNewPixelOrigin(b,d);return this.project(a,d)._subtract(E)},_latLngBoundsToNewLayerBounds:function(a,d,b){var E=this._getNewPixelOrigin(b,d);return B([this.project(a.getSouthWest(),d)._subtract(E),this.project(a.getNorthWest(),d)._subtract(E),this.project(a.getSouthEast(),d)._subtract(E),this.project(a.getNorthEast(),d)._subtract(E)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(a){return this.latLngToLayerPoint(a).subtract(this._getCenterLayerPoint())},_limitCenter:function(a,d,b){if(!b)return a;var E=this.project(a,d),A=this.getSize().divideBy(2),I=new G(E.subtract(A),E.add(A)),ee=this._getBoundsOffset(I,b,d);return Math.abs(ee.x)<=1&&Math.abs(ee.y)<=1?a:this.unproject(E.add(ee),d)},_limitOffset:function(a,d){if(!d)return a;var b=this.getPixelBounds(),E=new G(b.min.add(a),b.max.add(a));return a.add(this._getBoundsOffset(E,d))},_getBoundsOffset:function(a,d,b){var E=B(this.project(d.getNorthEast(),b),this.project(d.getSouthWest(),b)),A=E.min.subtract(a.min),I=E.max.subtract(a.max),ee=this._rebound(A.x,-I.x),de=this._rebound(A.y,-I.y);return new te(ee,de)},_rebound:function(a,d){return a+d>0?Math.round(a-d)/2:Math.max(0,Math.ceil(a))-Math.max(0,Math.floor(d))},_limitZoom:function(a){var d=this.getMinZoom(),b=this.getMaxZoom(),E=Ve.any3d?this.options.zoomSnap:1;return E&&(a=Math.round(a/E)*E),Math.max(d,Math.min(b,a))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){an(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(a,d){var b=this._getCenterOffset(a)._trunc();return(d&&d.animate)!==!0&&!this.getSize().contains(b)?!1:(this.panBy(b,d),!0)},_createAnimProxy:function(){var a=this._proxy=gt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(a),this.on("zoomanim",function(d){var b=Jn,E=this._proxy.style[b];Hi(this._proxy,this.project(d.center,d.zoom),this.getZoomScale(d.zoom,1)),E===this._proxy.style[b]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){zt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var a=this.getCenter(),d=this.getZoom();Hi(this._proxy,this.project(a,d),this.getZoomScale(d,1))},_catchTransitionEnd:function(a){this._animatingZoom&&a.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(a,d,b){if(this._animatingZoom)return!0;if(b=b||{},!this._zoomAnimated||b.animate===!1||this._nothingToAnimate()||Math.abs(d-this._zoom)>this.options.zoomAnimationThreshold)return!1;var E=this.getZoomScale(d),A=this._getCenterOffset(a)._divideBy(1-1/E);return b.animate!==!0&&!this.getSize().contains(A)?!1:(Q(function(){this._moveStart(!0,b.noMoveStart||!1)._animateZoom(a,d,!0)},this),!0)},_animateZoom:function(a,d,b,E){this._mapPane&&(b&&(this._animatingZoom=!0,this._animateToCenter=a,this._animateToZoom=d,at(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:a,zoom:d,noUpdate:E}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(u(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&an(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Ic(a,d){return new St(a,d)}var _r=ie.extend({options:{position:"topright"},initialize:function(a){k(this,a)},getPosition:function(){return this.options.position},setPosition:function(a){var d=this._map;return d&&d.removeControl(this),this.options.position=a,d&&d.addControl(this),this},getContainer:function(){return this._container},addTo:function(a){this.remove(),this._map=a;var d=this._container=this.onAdd(a),b=this.getPosition(),E=a._controlCorners[b];return at(d,"leaflet-control"),b.indexOf("bottom")!==-1?E.insertBefore(d,E.firstChild):E.appendChild(d),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(zt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(a){this._map&&a&&a.screenX>0&&a.screenY>0&&this._map.getContainer().focus()}}),Fi=function(a){return new _r(a)};St.include({addControl:function(a){return a.addTo(this),this},removeControl:function(a){return a.remove(),this},_initControlPos:function(){var a=this._controlCorners={},d="leaflet-",b=this._controlContainer=gt("div",d+"control-container",this._container);function E(A,I){var ee=d+A+" "+d+I;a[A+I]=gt("div",ee,b)}E("top","left"),E("top","right"),E("bottom","left"),E("bottom","right")},_clearControlPos:function(){for(var a in this._controlCorners)zt(this._controlCorners[a]);zt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var po=_r.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(a,d,b,E){return b<E?-1:E<b?1:0}},initialize:function(a,d,b){k(this,b),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var E in a)this._addLayer(a[E],E);for(E in d)this._addLayer(d[E],E,!0)},onAdd:function(a){this._initLayout(),this._update(),this._map=a,a.on("zoomend",this._checkDisabledLayers,this);for(var d=0;d<this._layers.length;d++)this._layers[d].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(a){return _r.prototype.addTo.call(this,a),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(a,d){return this._addLayer(a,d),this._map?this._update():this},addOverlay:function(a,d){return this._addLayer(a,d,!0),this._map?this._update():this},removeLayer:function(a){a.off("add remove",this._onLayerChange,this);var d=this._getLayer(m(a));return d&&this._layers.splice(this._layers.indexOf(d),1),this._map?this._update():this},expand:function(){at(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var a=this._map.getSize().y-(this._container.offsetTop+50);return a<this._section.clientHeight?(at(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=a+"px"):an(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return an(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var a="leaflet-control-layers",d=this._container=gt("div",a),b=this.options.collapsed;d.setAttribute("aria-haspopup",!0),Os(d),_i(d);var E=this._section=gt("section",a+"-list");b&&(this._map.on("click",this.collapse,this),st(d,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var A=this._layersLink=gt("a",a+"-toggle",d);A.href="#",A.title="Layers",A.setAttribute("role","button"),st(A,{keydown:function(I){I.keyCode===13&&this._expandSafely()},click:function(I){yn(I),this._expandSafely()}},this),b||this.expand(),this._baseLayersList=gt("div",a+"-base",E),this._separator=gt("div",a+"-separator",E),this._overlaysList=gt("div",a+"-overlays",E),d.appendChild(E)},_getLayer:function(a){for(var d=0;d<this._layers.length;d++)if(this._layers[d]&&m(this._layers[d].layer)===a)return this._layers[d]},_addLayer:function(a,d,b){this._map&&a.on("add remove",this._onLayerChange,this),this._layers.push({layer:a,name:d,overlay:b}),this.options.sortLayers&&this._layers.sort(u(function(E,A){return this.options.sortFunction(E.layer,A.layer,E.name,A.name)},this)),this.options.autoZIndex&&a.setZIndex&&(this._lastZIndex++,a.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Dr(this._baseLayersList),Dr(this._overlaysList),this._layerControlInputs=[];var a,d,b,E,A=0;for(b=0;b<this._layers.length;b++)E=this._layers[b],this._addItem(E),d=d||E.overlay,a=a||!E.overlay,A+=E.overlay?0:1;return this.options.hideSingleBase&&(a=a&&A>1,this._baseLayersList.style.display=a?"":"none"),this._separator.style.display=d&&a?"":"none",this},_onLayerChange:function(a){this._handlingClick||this._update();var d=this._getLayer(m(a.target)),b=d.overlay?a.type==="add"?"overlayadd":"overlayremove":a.type==="add"?"baselayerchange":null;b&&this._map.fire(b,d)},_createRadioElement:function(a,d){var b='<input type="radio" class="leaflet-control-layers-selector" name="'+a+'"'+(d?' checked="checked"':"")+"/>",E=document.createElement("div");return E.innerHTML=b,E.firstChild},_addItem:function(a){var d=document.createElement("label"),b=this._map.hasLayer(a.layer),E;a.overlay?(E=document.createElement("input"),E.type="checkbox",E.className="leaflet-control-layers-selector",E.defaultChecked=b):E=this._createRadioElement("leaflet-base-layers_"+m(this),b),this._layerControlInputs.push(E),E.layerId=m(a.layer),st(E,"click",this._onInputClick,this);var A=document.createElement("span");A.innerHTML=" "+a.name;var I=document.createElement("span");d.appendChild(I),I.appendChild(E),I.appendChild(A);var ee=a.overlay?this._overlaysList:this._baseLayersList;return ee.appendChild(d),this._checkDisabledLayers(),d},_onInputClick:function(){if(!this._preventClick){var a=this._layerControlInputs,d,b,E=[],A=[];this._handlingClick=!0;for(var I=a.length-1;I>=0;I--)d=a[I],b=this._getLayer(d.layerId).layer,d.checked?E.push(b):d.checked||A.push(b);for(I=0;I<A.length;I++)this._map.hasLayer(A[I])&&this._map.removeLayer(A[I]);for(I=0;I<E.length;I++)this._map.hasLayer(E[I])||this._map.addLayer(E[I]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var a=this._layerControlInputs,d,b,E=this._map.getZoom(),A=a.length-1;A>=0;A--)d=a[A],b=this._getLayer(d.layerId).layer,d.disabled=b.options.minZoom!==void 0&&E<b.options.minZoom||b.options.maxZoom!==void 0&&E>b.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var a=this._section;this._preventClick=!0,st(a,"click",yn),this.expand();var d=this;setTimeout(function(){Bt(a,"click",yn),d._preventClick=!1})}}),Nd=function(a,d,b){return new po(a,d,b)},zc=_r.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(a){var d="leaflet-control-zoom",b=gt("div",d+" leaflet-bar"),E=this.options;return this._zoomInButton=this._createButton(E.zoomInText,E.zoomInTitle,d+"-in",b,this._zoomIn),this._zoomOutButton=this._createButton(E.zoomOutText,E.zoomOutTitle,d+"-out",b,this._zoomOut),this._updateDisabled(),a.on("zoomend zoomlevelschange",this._updateDisabled,this),b},onRemove:function(a){a.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(a){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(a.shiftKey?3:1))},_zoomOut:function(a){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(a.shiftKey?3:1))},_createButton:function(a,d,b,E,A){var I=gt("a",b,E);return I.innerHTML=a,I.href="#",I.title=d,I.setAttribute("role","button"),I.setAttribute("aria-label",d),Os(I),st(I,"click",cs),st(I,"click",A,this),st(I,"click",this._refocusOnMap,this),I},_updateDisabled:function(){var a=this._map,d="leaflet-disabled";an(this._zoomInButton,d),an(this._zoomOutButton,d),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||a._zoom===a.getMinZoom())&&(at(this._zoomOutButton,d),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||a._zoom===a.getMaxZoom())&&(at(this._zoomInButton,d),this._zoomInButton.setAttribute("aria-disabled","true"))}});St.mergeOptions({zoomControl:!0}),St.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new zc,this.addControl(this.zoomControl))});var rp=function(a){return new zc(a)},Od=_r.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(a){var d="leaflet-control-scale",b=gt("div",d),E=this.options;return this._addScales(E,d+"-line",b),a.on(E.updateWhenIdle?"moveend":"move",this._update,this),a.whenReady(this._update,this),b},onRemove:function(a){a.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(a,d,b){a.metric&&(this._mScale=gt("div",d,b)),a.imperial&&(this._iScale=gt("div",d,b))},_update:function(){var a=this._map,d=a.getSize().y/2,b=a.distance(a.containerPointToLatLng([0,d]),a.containerPointToLatLng([this.options.maxWidth,d]));this._updateScales(b)},_updateScales:function(a){this.options.metric&&a&&this._updateMetric(a),this.options.imperial&&a&&this._updateImperial(a)},_updateMetric:function(a){var d=this._getRoundNum(a),b=d<1e3?d+" m":d/1e3+" km";this._updateScale(this._mScale,b,d/a)},_updateImperial:function(a){var d=a*3.2808399,b,E,A;d>5280?(b=d/5280,E=this._getRoundNum(b),this._updateScale(this._iScale,E+" mi",E/b)):(A=this._getRoundNum(d),this._updateScale(this._iScale,A+" ft",A/d))},_updateScale:function(a,d,b){a.style.width=Math.round(this.options.maxWidth*b)+"px",a.innerHTML=d},_getRoundNum:function(a){var d=Math.pow(10,(Math.floor(a)+"").length-1),b=a/d;return b=b>=10?10:b>=5?5:b>=3?3:b>=2?2:1,d*b}}),Uc=function(a){return new Od(a)},ip='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Hc=_r.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Ve.inlineSvg?ip+" ":"")+"Leaflet</a>"},initialize:function(a){k(this,a),this._attributions={}},onAdd:function(a){a.attributionControl=this,this._container=gt("div","leaflet-control-attribution"),Os(this._container);for(var d in a._layers)a._layers[d].getAttribution&&this.addAttribution(a._layers[d].getAttribution());return this._update(),a.on("layeradd",this._addAttribution,this),this._container},onRemove:function(a){a.off("layeradd",this._addAttribution,this)},_addAttribution:function(a){a.layer.getAttribution&&(this.addAttribution(a.layer.getAttribution()),a.layer.once("remove",function(){this.removeAttribution(a.layer.getAttribution())},this))},setPrefix:function(a){return this.options.prefix=a,this._update(),this},addAttribution:function(a){return a?(this._attributions[a]||(this._attributions[a]=0),this._attributions[a]++,this._update(),this):this},removeAttribution:function(a){return a?(this._attributions[a]&&(this._attributions[a]--,this._update()),this):this},_update:function(){if(this._map){var a=[];for(var d in this._attributions)this._attributions[d]&&a.push(d);var b=[];this.options.prefix&&b.push(this.options.prefix),a.length&&b.push(a.join(", ")),this._container.innerHTML=b.join(' <span aria-hidden="true">|</span> ')}}});St.mergeOptions({attributionControl:!0}),St.addInitHook(function(){this.options.attributionControl&&new Hc().addTo(this)});var sp=function(a){return new Hc(a)};_r.Layers=po,_r.Zoom=zc,_r.Scale=Od,_r.Attribution=Hc,Fi.layers=Nd,Fi.zoom=rp,Fi.scale=Uc,Fi.attribution=sp;var xi=ie.extend({initialize:function(a){this._map=a},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});xi.addTo=function(a,d){return a.addHandler(d,this),this};var ap={Events:J},Gc=Ve.touch?"touchstart mousedown":"mousedown",us=le.extend({options:{clickTolerance:3},initialize:function(a,d,b,E){k(this,E),this._element=a,this._dragStartTarget=d||a,this._preventOutline=b},enable:function(){this._enabled||(st(this._dragStartTarget,Gc,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(us._dragging===this&&this.finishDrag(!0),Bt(this._dragStartTarget,Gc,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(a){if(this._enabled&&(this._moved=!1,!Rc(this._element,"leaflet-zoom-anim"))){if(a.touches&&a.touches.length!==1){us._dragging===this&&this.finishDrag();return}if(!(us._dragging||a.shiftKey||a.which!==1&&a.button!==1&&!a.touches)&&(us._dragging=this,this._preventOutline&&ua(this._element),fl(),la(),!this._moving)){this.fire("down");var d=a.touches?a.touches[0]:a,b=pl(this._element);this._startPoint=new te(d.clientX,d.clientY),this._startPos=ls(this._element),this._parentScale=uo(b);var E=a.type==="mousedown";st(document,E?"mousemove":"touchmove",this._onMove,this),st(document,E?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(a){if(this._enabled){if(a.touches&&a.touches.length>1){this._moved=!0;return}var d=a.touches&&a.touches.length===1?a.touches[0]:a,b=new te(d.clientX,d.clientY)._subtract(this._startPoint);!b.x&&!b.y||Math.abs(b.x)+Math.abs(b.y)<this.options.clickTolerance||(b.x/=this._parentScale.x,b.y/=this._parentScale.y,yn(a),this._moved||(this.fire("dragstart"),this._moved=!0,at(document.body,"leaflet-dragging"),this._lastTarget=a.target||a.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),at(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(b),this._moving=!0,this._lastEvent=a,this._updatePosition())}},_updatePosition:function(){var a={originalEvent:this._lastEvent};this.fire("predrag",a),Yt(this._element,this._newPos),this.fire("drag",a)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(a){an(document.body,"leaflet-dragging"),this._lastTarget&&(an(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Bt(document,"mousemove touchmove",this._onMove,this),Bt(document,"mouseup touchend touchcancel",this._onUp,this),co(),vi();var d=this._moved&&this._moving;this._moving=!1,us._dragging=!1,d&&this.fire("dragend",{noInertia:a,distance:this._newPos.distanceTo(this._startPos)})}});function Dd(a,d,b){var E,A=[1,4,2,8],I,ee,de,_e,Oe,Ue,Xe,ht;for(I=0,Ue=a.length;I<Ue;I++)a[I]._code=Ds(a[I],d);for(de=0;de<4;de++){for(Xe=A[de],E=[],I=0,Ue=a.length,ee=Ue-1;I<Ue;ee=I++)_e=a[I],Oe=a[ee],_e._code&Xe?Oe._code&Xe||(ht=bl(Oe,_e,Xe,d,b),ht._code=Ds(ht,d),E.push(ht)):(Oe._code&Xe&&(ht=bl(Oe,_e,Xe,d,b),ht._code=Ds(ht,d),E.push(ht)),E.push(_e));a=E}return a}function Md(a,d){var b,E,A,I,ee,de,_e,Oe,Ue;if(!a||a.length===0)throw new Error("latlngs not passed");Cr(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var Xe=X([0,0]),ht=V(a),Un=ht.getNorthWest().distanceTo(ht.getSouthWest())*ht.getNorthEast().distanceTo(ht.getNorthWest());Un<1700&&(Xe=Fc(a));var vn=a.length,xr=[];for(b=0;b<vn;b++){var Nt=X(a[b]);xr.push(d.project(X([Nt.lat-Xe.lat,Nt.lng-Xe.lng])))}for(de=_e=Oe=0,b=0,E=vn-1;b<vn;E=b++)A=xr[b],I=xr[E],ee=A.y*I.x-I.y*A.x,_e+=(A.x+I.x)*ee,Oe+=(A.y+I.y)*ee,de+=ee*3;de===0?Ue=xr[0]:Ue=[_e/de,Oe/de];var Ot=d.unproject(Z(Ue));return X([Ot.lat+Xe.lat,Ot.lng+Xe.lng])}function Fc(a){for(var d=0,b=0,E=0,A=0;A<a.length;A++){var I=X(a[A]);d+=I.lat,b+=I.lng,E++}return X([d/E,b/E])}var Yc={__proto__:null,clipPolygon:Dd,polygonCenter:Md,centroid:Fc};function Cd(a,d){if(!d||!a.length)return a.slice();var b=d*d;return a=lp(a,b),a=Ld(a,b),a}function Rd(a,d,b){return Math.sqrt(go(a,d,b,!0))}function op(a,d,b){return go(a,d,b)}function Ld(a,d){var b=a.length,E=typeof Uint8Array<"u"?Uint8Array:Array,A=new E(b);A[0]=A[b-1]=1,qc(a,A,d,0,b-1);var I,ee=[];for(I=0;I<b;I++)A[I]&&ee.push(a[I]);return ee}function qc(a,d,b,E,A){var I=0,ee,de,_e;for(de=E+1;de<=A-1;de++)_e=go(a[de],a[E],a[A],!0),_e>I&&(ee=de,I=_e);I>b&&(d[ee]=1,qc(a,d,b,E,ee),qc(a,d,b,ee,A))}function lp(a,d){for(var b=[a[0]],E=1,A=0,I=a.length;E<I;E++)cp(a[E],a[A])>d&&(b.push(a[E]),A=E);return A<I-1&&b.push(a[I-1]),b}var Bd;function Pd(a,d,b,E,A){var I=E?Bd:Ds(a,b),ee=Ds(d,b),de,_e,Oe;for(Bd=ee;;){if(!(I|ee))return[a,d];if(I&ee)return!1;de=I||ee,_e=bl(a,d,de,b,A),Oe=Ds(_e,b),de===I?(a=_e,I=Oe):(d=_e,ee=Oe)}}function bl(a,d,b,E,A){var I=d.x-a.x,ee=d.y-a.y,de=E.min,_e=E.max,Oe,Ue;return b&8?(Oe=a.x+I*(_e.y-a.y)/ee,Ue=_e.y):b&4?(Oe=a.x+I*(de.y-a.y)/ee,Ue=de.y):b&2?(Oe=_e.x,Ue=a.y+ee*(_e.x-a.x)/I):b&1&&(Oe=de.x,Ue=a.y+ee*(de.x-a.x)/I),new te(Oe,Ue,A)}function Ds(a,d){var b=0;return a.x<d.min.x?b|=1:a.x>d.max.x&&(b|=2),a.y<d.min.y?b|=4:a.y>d.max.y&&(b|=8),b}function cp(a,d){var b=d.x-a.x,E=d.y-a.y;return b*b+E*E}function go(a,d,b,E){var A=d.x,I=d.y,ee=b.x-A,de=b.y-I,_e=ee*ee+de*de,Oe;return _e>0&&(Oe=((a.x-A)*ee+(a.y-I)*de)/_e,Oe>1?(A=b.x,I=b.y):Oe>0&&(A+=ee*Oe,I+=de*Oe)),ee=a.x-A,de=a.y-I,E?ee*ee+de*de:new te(A,I)}function Cr(a){return!N(a[0])||typeof a[0][0]!="object"&&typeof a[0][0]<"u"}function yl(a){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Cr(a)}function fa(a,d){var b,E,A,I,ee,de,_e,Oe;if(!a||a.length===0)throw new Error("latlngs not passed");Cr(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var Ue=X([0,0]),Xe=V(a),ht=Xe.getNorthWest().distanceTo(Xe.getSouthWest())*Xe.getNorthEast().distanceTo(Xe.getNorthWest());ht<1700&&(Ue=Fc(a));var Un=a.length,vn=[];for(b=0;b<Un;b++){var xr=X(a[b]);vn.push(d.project(X([xr.lat-Ue.lat,xr.lng-Ue.lng])))}for(b=0,E=0;b<Un-1;b++)E+=vn[b].distanceTo(vn[b+1])/2;if(E===0)Oe=vn[0];else for(b=0,I=0;b<Un-1;b++)if(ee=vn[b],de=vn[b+1],A=ee.distanceTo(de),I+=A,I>E){_e=(I-E)/A,Oe=[de.x-_e*(de.x-ee.x),de.y-_e*(de.y-ee.y)];break}var Nt=d.unproject(Z(Oe));return X([Nt.lat+Ue.lat,Nt.lng+Ue.lng])}var up={__proto__:null,simplify:Cd,pointToSegmentDistance:Rd,closestPointOnSegment:op,clipSegment:Pd,_getEdgeIntersection:bl,_getBitCode:Ds,_sqClosestPointOnSegment:go,isFlat:Cr,_flat:yl,polylineCenter:fa},vl={project:function(a){return new te(a.lng,a.lat)},unproject:function(a){return new H(a.y,a.x)},bounds:new G([-180,-90],[180,90])},_l={R:6378137,R_MINOR:6356752314245179e-9,bounds:new G([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(a){var d=Math.PI/180,b=this.R,E=a.lat*d,A=this.R_MINOR/b,I=Math.sqrt(1-A*A),ee=I*Math.sin(E),de=Math.tan(Math.PI/4-E/2)/Math.pow((1-ee)/(1+ee),I/2);return E=-b*Math.log(Math.max(de,1e-10)),new te(a.lng*d*b,E)},unproject:function(a){for(var d=180/Math.PI,b=this.R,E=this.R_MINOR/b,A=Math.sqrt(1-E*E),I=Math.exp(-a.y/b),ee=Math.PI/2-2*Math.atan(I),de=0,_e=.1,Oe;de<15&&Math.abs(_e)>1e-7;de++)Oe=A*Math.sin(ee),Oe=Math.pow((1-Oe)/(1+Oe),A/2),_e=Math.PI/2-2*Math.atan(I*Oe)-ee,ee+=_e;return new H(ee*d,a.x*d/b)}},$d={__proto__:null,LonLat:vl,Mercator:_l,SphericalMercator:ve},Id=o({},he,{code:"EPSG:3395",projection:_l,transformation:(function(){var a=.5/(Math.PI*_l.R);return je(a,.5,-a,.5)})()}),Zc=o({},he,{code:"EPSG:4326",projection:vl,transformation:je(1/180,1,-1/180,.5)}),ma=o({},W,{projection:vl,transformation:je(1,0,-1,0),scale:function(a){return Math.pow(2,a)},zoom:function(a){return Math.log(a)/Math.LN2},distance:function(a,d){var b=d.lng-a.lng,E=d.lat-a.lat;return Math.sqrt(b*b+E*E)},infinite:!0});W.Earth=he,W.EPSG3395=Id,W.EPSG3857=Me,W.EPSG900913=Ee,W.EPSG4326=Zc,W.Simple=ma;var Xr=le.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(a){return a.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(a){return a&&a.removeLayer(this),this},getPane:function(a){return this._map.getPane(a?this.options[a]||a:this.options.pane)},addInteractiveTarget:function(a){return this._map._targets[m(a)]=this,this},removeInteractiveTarget:function(a){return delete this._map._targets[m(a)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(a){var d=a.target;if(d.hasLayer(this)){if(this._map=d,this._zoomAnimated=d._zoomAnimated,this.getEvents){var b=this.getEvents();d.on(b,this),this.once("remove",function(){d.off(b,this)},this)}this.onAdd(d),this.fire("add"),d.fire("layeradd",{layer:this})}}});St.include({addLayer:function(a){if(!a._layerAdd)throw new Error("The provided object is not a Layer.");var d=m(a);return this._layers[d]?this:(this._layers[d]=a,a._mapToAdd=this,a.beforeAdd&&a.beforeAdd(this),this.whenReady(a._layerAdd,a),this)},removeLayer:function(a){var d=m(a);return this._layers[d]?(this._loaded&&a.onRemove(this),delete this._layers[d],this._loaded&&(this.fire("layerremove",{layer:a}),a.fire("remove")),a._map=a._mapToAdd=null,this):this},hasLayer:function(a){return m(a)in this._layers},eachLayer:function(a,d){for(var b in this._layers)a.call(d,this._layers[b]);return this},_addLayers:function(a){a=a?N(a)?a:[a]:[];for(var d=0,b=a.length;d<b;d++)this.addLayer(a[d])},_addZoomLimit:function(a){(!isNaN(a.options.maxZoom)||!isNaN(a.options.minZoom))&&(this._zoomBoundLayers[m(a)]=a,this._updateZoomLevels())},_removeZoomLimit:function(a){var d=m(a);this._zoomBoundLayers[d]&&(delete this._zoomBoundLayers[d],this._updateZoomLevels())},_updateZoomLevels:function(){var a=1/0,d=-1/0,b=this._getZoomSpan();for(var E in this._zoomBoundLayers){var A=this._zoomBoundLayers[E].options;a=A.minZoom===void 0?a:Math.min(a,A.minZoom),d=A.maxZoom===void 0?d:Math.max(d,A.maxZoom)}this._layersMaxZoom=d===-1/0?void 0:d,this._layersMinZoom=a===1/0?void 0:a,b!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var pa=Xr.extend({initialize:function(a,d){k(this,d),this._layers={};var b,E;if(a)for(b=0,E=a.length;b<E;b++)this.addLayer(a[b])},addLayer:function(a){var d=this.getLayerId(a);return this._layers[d]=a,this._map&&this._map.addLayer(a),this},removeLayer:function(a){var d=a in this._layers?a:this.getLayerId(a);return this._map&&this._layers[d]&&this._map.removeLayer(this._layers[d]),delete this._layers[d],this},hasLayer:function(a){var d=typeof a=="number"?a:this.getLayerId(a);return d in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(a){var d=Array.prototype.slice.call(arguments,1),b,E;for(b in this._layers)E=this._layers[b],E[a]&&E[a].apply(E,d);return this},onAdd:function(a){this.eachLayer(a.addLayer,a)},onRemove:function(a){this.eachLayer(a.removeLayer,a)},eachLayer:function(a,d){for(var b in this._layers)a.call(d,this._layers[b]);return this},getLayer:function(a){return this._layers[a]},getLayers:function(){var a=[];return this.eachLayer(a.push,a),a},setZIndex:function(a){return this.invoke("setZIndex",a)},getLayerId:function(a){return m(a)}}),dp=function(a,d){return new pa(a,d)},wi=pa.extend({addLayer:function(a){return this.hasLayer(a)?this:(a.addEventParent(this),pa.prototype.addLayer.call(this,a),this.fire("layeradd",{layer:a}))},removeLayer:function(a){return this.hasLayer(a)?(a in this._layers&&(a=this._layers[a]),a.removeEventParent(this),pa.prototype.removeLayer.call(this,a),this.fire("layerremove",{layer:a})):this},setStyle:function(a){return this.invoke("setStyle",a)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var a=new q;for(var d in this._layers){var b=this._layers[d];a.extend(b.getBounds?b.getBounds():b.getLatLng())}return a}}),zd=function(a,d){return new wi(a,d)},Si=ie.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(a){k(this,a)},createIcon:function(a){return this._createIcon("icon",a)},createShadow:function(a){return this._createIcon("shadow",a)},_createIcon:function(a,d){var b=this._getIconUrl(a);if(!b){if(a==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var E=this._createImg(b,d&&d.tagName==="IMG"?d:null);return this._setIconStyles(E,a),(this.options.crossOrigin||this.options.crossOrigin==="")&&(E.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),E},_setIconStyles:function(a,d){var b=this.options,E=b[d+"Size"];typeof E=="number"&&(E=[E,E]);var A=Z(E),I=Z(d==="shadow"&&b.shadowAnchor||b.iconAnchor||A&&A.divideBy(2,!0));a.className="leaflet-marker-"+d+" "+(b.className||""),I&&(a.style.marginLeft=-I.x+"px",a.style.marginTop=-I.y+"px"),A&&(a.style.width=A.x+"px",a.style.height=A.y+"px")},_createImg:function(a,d){return d=d||document.createElement("img"),d.src=a,d},_getIconUrl:function(a){return Ve.retina&&this.options[a+"RetinaUrl"]||this.options[a+"Url"]}});function bo(a){return new Si(a)}var yo=Si.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(a){return typeof yo.imagePath!="string"&&(yo.imagePath=this._detectIconPath()),(this.options.imagePath||yo.imagePath)+Si.prototype._getIconUrl.call(this,a)},_stripUrl:function(a){var d=function(b,E,A){var I=E.exec(b);return I&&I[A]};return a=d(a,/^url\((['"])?(.+)\1\)$/,2),a&&d(a,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var a=gt("div","leaflet-default-icon-path",document.body),d=oo(a,"background-image")||oo(a,"backgroundImage");if(document.body.removeChild(a),d=this._stripUrl(d),d)return d;var b=document.querySelector('link[href$="leaflet.css"]');return b?b.href.substring(0,b.href.length-11-1):""}}),vo=xi.extend({initialize:function(a){this._marker=a},addHooks:function(){var a=this._marker._icon;this._draggable||(this._draggable=new us(a,a,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),at(a,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&an(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(a){var d=this._marker,b=d._map,E=this._marker.options.autoPanSpeed,A=this._marker.options.autoPanPadding,I=ls(d._icon),ee=b.getPixelBounds(),de=b.getPixelOrigin(),_e=B(ee.min._subtract(de).add(A),ee.max._subtract(de).subtract(A));if(!_e.contains(I)){var Oe=Z((Math.max(_e.max.x,I.x)-_e.max.x)/(ee.max.x-_e.max.x)-(Math.min(_e.min.x,I.x)-_e.min.x)/(ee.min.x-_e.min.x),(Math.max(_e.max.y,I.y)-_e.max.y)/(ee.max.y-_e.max.y)-(Math.min(_e.min.y,I.y)-_e.min.y)/(ee.min.y-_e.min.y)).multiplyBy(E);b.panBy(Oe,{animate:!1}),this._draggable._newPos._add(Oe),this._draggable._startPos._add(Oe),Yt(d._icon,this._draggable._newPos),this._onDrag(a),this._panRequest=Q(this._adjustPan.bind(this,a))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(a){this._marker.options.autoPan&&(Y(this._panRequest),this._panRequest=Q(this._adjustPan.bind(this,a)))},_onDrag:function(a){var d=this._marker,b=d._shadow,E=ls(d._icon),A=d._map.layerPointToLatLng(E);b&&Yt(b,E),d._latlng=A,a.latlng=A,a.oldLatLng=this._oldLatLng,d.fire("move",a).fire("drag",a)},_onDragEnd:function(a){Y(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",a)}}),_o=Xr.extend({options:{icon:new yo,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(a,d){k(this,d),this._latlng=X(a)},onAdd:function(a){this._zoomAnimated=this._zoomAnimated&&a.options.markerZoomAnimation,this._zoomAnimated&&a.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(a){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&a.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(a){var d=this._latlng;return this._latlng=X(a),this.update(),this.fire("move",{oldLatLng:d,latlng:this._latlng})},setZIndexOffset:function(a){return this.options.zIndexOffset=a,this.update()},getIcon:function(){return this.options.icon},setIcon:function(a){return this.options.icon=a,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var a=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(a)}return this},_initIcon:function(){var a=this.options,d="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),b=a.icon.createIcon(this._icon),E=!1;b!==this._icon&&(this._icon&&this._removeIcon(),E=!0,a.title&&(b.title=a.title),b.tagName==="IMG"&&(b.alt=a.alt||"")),at(b,d),a.keyboard&&(b.tabIndex="0",b.setAttribute("role","button")),this._icon=b,a.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&st(b,"focus",this._panOnFocus,this);var A=a.icon.createShadow(this._shadow),I=!1;A!==this._shadow&&(this._removeShadow(),I=!0),A&&(at(A,d),A.alt=""),this._shadow=A,a.opacity<1&&this._updateOpacity(),E&&this.getPane().appendChild(this._icon),this._initInteraction(),A&&I&&this.getPane(a.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Bt(this._icon,"focus",this._panOnFocus,this),zt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&zt(this._shadow),this._shadow=null},_setPos:function(a){this._icon&&Yt(this._icon,a),this._shadow&&Yt(this._shadow,a),this._zIndex=a.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(a){this._icon&&(this._icon.style.zIndex=this._zIndex+a)},_animateZoom:function(a){var d=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center).round();this._setPos(d)},_initInteraction:function(){if(this.options.interactive&&(at(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),vo)){var a=this.options.draggable;this.dragging&&(a=this.dragging.enabled(),this.dragging.disable()),this.dragging=new vo(this),a&&this.dragging.enable()}},setOpacity:function(a){return this.options.opacity=a,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var a=this.options.opacity;this._icon&&en(this._icon,a),this._shadow&&en(this._shadow,a)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var a=this._map;if(a){var d=this.options.icon.options,b=d.iconSize?Z(d.iconSize):Z(0,0),E=d.iconAnchor?Z(d.iconAnchor):Z(0,0);a.panInside(this._latlng,{paddingTopLeft:E,paddingBottomRight:b.subtract(E)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Ud(a,d){return new _o(a,d)}var Ei=Xr.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(a){this._renderer=a.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(a){return k(this,a),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&a&&Object.prototype.hasOwnProperty.call(a,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ga=Ei.extend({options:{fill:!0,radius:10},initialize:function(a,d){k(this,d),this._latlng=X(a),this._radius=this.options.radius},setLatLng:function(a){var d=this._latlng;return this._latlng=X(a),this.redraw(),this.fire("move",{oldLatLng:d,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(a){return this.options.radius=this._radius=a,this.redraw()},getRadius:function(){return this._radius},setStyle:function(a){var d=a&&a.radius||this._radius;return Ei.prototype.setStyle.call(this,a),this.setRadius(d),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var a=this._radius,d=this._radiusY||a,b=this._clickTolerance(),E=[a+b,d+b];this._pxBounds=new G(this._point.subtract(E),this._point.add(E))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(a){return a.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Hd(a,d){return new ga(a,d)}var xl=ga.extend({initialize:function(a,d,b){if(typeof d=="number"&&(d=o({},b,{radius:d})),k(this,d),this._latlng=X(a),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(a){return this._mRadius=a,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var a=[this._radius,this._radiusY||this._radius];return new q(this._map.layerPointToLatLng(this._point.subtract(a)),this._map.layerPointToLatLng(this._point.add(a)))},setStyle:Ei.prototype.setStyle,_project:function(){var a=this._latlng.lng,d=this._latlng.lat,b=this._map,E=b.options.crs;if(E.distance===he.distance){var A=Math.PI/180,I=this._mRadius/he.R/A,ee=b.project([d+I,a]),de=b.project([d-I,a]),_e=ee.add(de).divideBy(2),Oe=b.unproject(_e).lat,Ue=Math.acos((Math.cos(I*A)-Math.sin(d*A)*Math.sin(Oe*A))/(Math.cos(d*A)*Math.cos(Oe*A)))/A;(isNaN(Ue)||Ue===0)&&(Ue=I/Math.cos(Math.PI/180*d)),this._point=_e.subtract(b.getPixelOrigin()),this._radius=isNaN(Ue)?0:_e.x-b.project([Oe,a-Ue]).x,this._radiusY=_e.y-ee.y}else{var Xe=E.unproject(E.project(this._latlng).subtract([this._mRadius,0]));this._point=b.latLngToLayerPoint(this._latlng),this._radius=this._point.x-b.latLngToLayerPoint(Xe).x}this._updateBounds()}});function Gd(a,d,b){return new xl(a,d,b)}var Yi=Ei.extend({options:{smoothFactor:1,noClip:!1},initialize:function(a,d){k(this,d),this._setLatLngs(a)},getLatLngs:function(){return this._latlngs},setLatLngs:function(a){return this._setLatLngs(a),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(a){for(var d=1/0,b=null,E=go,A,I,ee=0,de=this._parts.length;ee<de;ee++)for(var _e=this._parts[ee],Oe=1,Ue=_e.length;Oe<Ue;Oe++){A=_e[Oe-1],I=_e[Oe];var Xe=E(a,A,I,!0);Xe<d&&(d=Xe,b=E(a,A,I))}return b&&(b.distance=Math.sqrt(d)),b},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return fa(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(a,d){return d=d||this._defaultShape(),a=X(a),d.push(a),this._bounds.extend(a),this.redraw()},_setLatLngs:function(a){this._bounds=new q,this._latlngs=this._convertLatLngs(a)},_defaultShape:function(){return Cr(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(a){for(var d=[],b=Cr(a),E=0,A=a.length;E<A;E++)b?(d[E]=X(a[E]),this._bounds.extend(d[E])):d[E]=this._convertLatLngs(a[E]);return d},_project:function(){var a=new G;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,a),this._bounds.isValid()&&a.isValid()&&(this._rawPxBounds=a,this._updateBounds())},_updateBounds:function(){var a=this._clickTolerance(),d=new te(a,a);this._rawPxBounds&&(this._pxBounds=new G([this._rawPxBounds.min.subtract(d),this._rawPxBounds.max.add(d)]))},_projectLatlngs:function(a,d,b){var E=a[0]instanceof H,A=a.length,I,ee;if(E){for(ee=[],I=0;I<A;I++)ee[I]=this._map.latLngToLayerPoint(a[I]),b.extend(ee[I]);d.push(ee)}else for(I=0;I<A;I++)this._projectLatlngs(a[I],d,b)},_clipPoints:function(){var a=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}var d=this._parts,b,E,A,I,ee,de,_e;for(b=0,A=0,I=this._rings.length;b<I;b++)for(_e=this._rings[b],E=0,ee=_e.length;E<ee-1;E++)de=Pd(_e[E],_e[E+1],a,E,!0),de&&(d[A]=d[A]||[],d[A].push(de[0]),(de[1]!==_e[E+1]||E===ee-2)&&(d[A].push(de[1]),A++))}},_simplifyPoints:function(){for(var a=this._parts,d=this.options.smoothFactor,b=0,E=a.length;b<E;b++)a[b]=Cd(a[b],d)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(a,d){var b,E,A,I,ee,de,_e=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(b=0,I=this._parts.length;b<I;b++)for(de=this._parts[b],E=0,ee=de.length,A=ee-1;E<ee;A=E++)if(!(!d&&E===0)&&Rd(a,de[A],de[E])<=_e)return!0;return!1}});function hp(a,d){return new Yi(a,d)}Yi._flat=yl;var ba=Yi.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Md(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(a){var d=Yi.prototype._convertLatLngs.call(this,a),b=d.length;return b>=2&&d[0]instanceof H&&d[0].equals(d[b-1])&&d.pop(),d},_setLatLngs:function(a){Yi.prototype._setLatLngs.call(this,a),Cr(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Cr(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var a=this._renderer._bounds,d=this.options.weight,b=new te(d,d);if(a=new G(a.min.subtract(b),a.max.add(b)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}for(var E=0,A=this._rings.length,I;E<A;E++)I=Dd(this._rings[E],a,!0),I.length&&this._parts.push(I)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(a){var d=!1,b,E,A,I,ee,de,_e,Oe;if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(I=0,_e=this._parts.length;I<_e;I++)for(b=this._parts[I],ee=0,Oe=b.length,de=Oe-1;ee<Oe;de=ee++)E=b[ee],A=b[de],E.y>a.y!=A.y>a.y&&a.x<(A.x-E.x)*(a.y-E.y)/(A.y-E.y)+E.x&&(d=!d);return d||Yi.prototype._containsPoint.call(this,a,!0)}});function fp(a,d){return new ba(a,d)}var qi=wi.extend({initialize:function(a,d){k(this,d),this._layers={},a&&this.addData(a)},addData:function(a){var d=N(a)?a:a.features,b,E,A;if(d){for(b=0,E=d.length;b<E;b++)A=d[b],(A.geometries||A.geometry||A.features||A.coordinates)&&this.addData(A);return this}var I=this.options;if(I.filter&&!I.filter(a))return this;var ee=Yn(a,I);return ee?(ee.feature=El(a),ee.defaultOptions=ee.options,this.resetStyle(ee),I.onEachFeature&&I.onEachFeature(a,ee),this.addLayer(ee)):this},resetStyle:function(a){return a===void 0?this.eachLayer(this.resetStyle,this):(a.options=o({},a.defaultOptions),this._setLayerStyle(a,this.options.style),this)},setStyle:function(a){return this.eachLayer(function(d){this._setLayerStyle(d,a)},this)},_setLayerStyle:function(a,d){a.setStyle&&(typeof d=="function"&&(d=d(a.feature)),a.setStyle(d))}});function Yn(a,d){var b=a.type==="Feature"?a.geometry:a,E=b?b.coordinates:null,A=[],I=d&&d.pointToLayer,ee=d&&d.coordsToLatLng||wl,de,_e,Oe,Ue;if(!E&&!b)return null;switch(b.type){case"Point":return de=ee(E),ya(I,a,de,d);case"MultiPoint":for(Oe=0,Ue=E.length;Oe<Ue;Oe++)de=ee(E[Oe]),A.push(ya(I,a,de,d));return new wi(A);case"LineString":case"MultiLineString":return _e=xo(E,b.type==="LineString"?0:1,ee),new Yi(_e,d);case"Polygon":case"MultiPolygon":return _e=xo(E,b.type==="Polygon"?1:2,ee),new ba(_e,d);case"GeometryCollection":for(Oe=0,Ue=b.geometries.length;Oe<Ue;Oe++){var Xe=Yn({geometry:b.geometries[Oe],type:"Feature",properties:a.properties},d);Xe&&A.push(Xe)}return new wi(A);case"FeatureCollection":for(Oe=0,Ue=b.features.length;Oe<Ue;Oe++){var ht=Yn(b.features[Oe],d);ht&&A.push(ht)}return new wi(A);default:throw new Error("Invalid GeoJSON object.")}}function ya(a,d,b,E){return a?a(d,b):new _o(b,E&&E.markersInheritOptions&&E)}function wl(a){return new H(a[1],a[0],a[2])}function xo(a,d,b){for(var E=[],A=0,I=a.length,ee;A<I;A++)ee=d?xo(a[A],d-1,b):(b||wl)(a[A]),E.push(ee);return E}function Sl(a,d){return a=X(a),a.alt!==void 0?[x(a.lng,d),x(a.lat,d),x(a.alt,d)]:[x(a.lng,d),x(a.lat,d)]}function wo(a,d,b,E){for(var A=[],I=0,ee=a.length;I<ee;I++)A.push(d?wo(a[I],Cr(a[I])?0:d-1,b,E):Sl(a[I],E));return!d&&b&&A.length>0&&A.push(A[0].slice()),A}function ds(a,d){return a.feature?o({},a.feature,{geometry:d}):El(d)}function El(a){return a.type==="Feature"||a.type==="FeatureCollection"?a:{type:"Feature",properties:{},geometry:a}}var hs={toGeoJSON:function(a){return ds(this,{type:"Point",coordinates:Sl(this.getLatLng(),a)})}};_o.include(hs),xl.include(hs),ga.include(hs),Yi.include({toGeoJSON:function(a){var d=!Cr(this._latlngs),b=wo(this._latlngs,d?1:0,!1,a);return ds(this,{type:(d?"Multi":"")+"LineString",coordinates:b})}}),ba.include({toGeoJSON:function(a){var d=!Cr(this._latlngs),b=d&&!Cr(this._latlngs[0]),E=wo(this._latlngs,b?2:d?1:0,!0,a);return d||(E=[E]),ds(this,{type:(b?"Multi":"")+"Polygon",coordinates:E})}}),pa.include({toMultiPoint:function(a){var d=[];return this.eachLayer(function(b){d.push(b.toGeoJSON(a).geometry.coordinates)}),ds(this,{type:"MultiPoint",coordinates:d})},toGeoJSON:function(a){var d=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(d==="MultiPoint")return this.toMultiPoint(a);var b=d==="GeometryCollection",E=[];return this.eachLayer(function(A){if(A.toGeoJSON){var I=A.toGeoJSON(a);if(b)E.push(I.geometry);else{var ee=El(I);ee.type==="FeatureCollection"?E.push.apply(E,ee.features):E.push(ee)}}}),b?ds(this,{geometries:E,type:"GeometryCollection"}):{type:"FeatureCollection",features:E}}});function Tl(a,d){return new qi(a,d)}var So=Tl,va=Xr.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(a,d,b){this._url=a,this._bounds=V(d),k(this,b)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(at(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){zt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(a){return this.options.opacity=a,this._image&&this._updateOpacity(),this},setStyle:function(a){return a.opacity&&this.setOpacity(a.opacity),this},bringToFront:function(){return this._map&&zn(this._image),this},bringToBack:function(){return this._map&&js(this._image),this},setUrl:function(a){return this._url=a,this._image&&(this._image.src=a),this},setBounds:function(a){return this._bounds=V(a),this._map&&this._reset(),this},getEvents:function(){var a={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var a=this._url.tagName==="IMG",d=this._image=a?this._url:gt("img");if(at(d,"leaflet-image-layer"),this._zoomAnimated&&at(d,"leaflet-zoom-animated"),this.options.className&&at(d,this.options.className),d.onselectstart=_,d.onmousemove=_,d.onload=u(this.fire,this,"load"),d.onerror=u(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),a){this._url=d.src;return}d.src=this._url,d.alt=this.options.alt},_animateZoom:function(a){var d=this._map.getZoomScale(a.zoom),b=this._map._latLngBoundsToNewLayerBounds(this._bounds,a.zoom,a.center).min;Hi(this._image,b,d)},_reset:function(){var a=this._image,d=new G(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),b=d.getSize();Yt(a,d.min),a.style.width=b.x+"px",a.style.height=b.y+"px"},_updateOpacity:function(){en(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var a=this.options.errorOverlayUrl;a&&this._url!==a&&(this._url=a,this._image.src=a)},getCenter:function(){return this._bounds.getCenter()}}),Fd=function(a,d,b){return new va(a,d,b)},fs=va.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var a=this._url.tagName==="VIDEO",d=this._image=a?this._url:gt("video");if(at(d,"leaflet-image-layer"),this._zoomAnimated&&at(d,"leaflet-zoom-animated"),this.options.className&&at(d,this.options.className),d.onselectstart=_,d.onmousemove=_,d.onloadeddata=u(this.fire,this,"load"),a){for(var b=d.getElementsByTagName("source"),E=[],A=0;A<b.length;A++)E.push(b[A].src);this._url=b.length>0?E:[d.src];return}N(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(d.style,"objectFit")&&(d.style.objectFit="fill"),d.autoplay=!!this.options.autoplay,d.loop=!!this.options.loop,d.muted=!!this.options.muted,d.playsInline=!!this.options.playsInline;for(var I=0;I<this._url.length;I++){var ee=gt("source");ee.src=this._url[I],d.appendChild(ee)}}});function _a(a,d,b){return new fs(a,d,b)}var kl=va.extend({_initImage:function(){var a=this._image=this._url;at(a,"leaflet-image-layer"),this._zoomAnimated&&at(a,"leaflet-zoom-animated"),this.options.className&&at(a,this.options.className),a.onselectstart=_,a.onmousemove=_}});function Yd(a,d,b){return new kl(a,d,b)}var qn=Xr.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(a,d){a&&(a instanceof H||N(a))?(this._latlng=X(a),k(this,d)):(k(this,a),this._source=d),this.options.content&&(this._content=this.options.content)},openOn:function(a){return a=arguments.length?a:this._source._map,a.hasLayer(this)||a.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(a){return this._map?this.close():(arguments.length?this._source=a:a=this._source,this._prepareOpen(),this.openOn(a._map)),this},onAdd:function(a){this._zoomAnimated=a._zoomAnimated,this._container||this._initLayout(),a._fadeAnimated&&en(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),a._fadeAnimated&&en(this._container,1),this.bringToFront(),this.options.interactive&&(at(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(a){a._fadeAnimated?(en(this._container,0),this._removeTimeout=setTimeout(u(zt,void 0,this._container),200)):zt(this._container),this.options.interactive&&(an(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(a){return this._latlng=X(a),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(a){return this._content=a,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var a={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&zn(this._container),this},bringToBack:function(){return this._map&&js(this._container),this},_prepareOpen:function(a){var d=this._source;if(!d._map)return!1;if(d instanceof wi){d=null;var b=this._source._layers;for(var E in b)if(b[E]._map){d=b[E];break}if(!d)return!1;this._source=d}if(!a)if(d.getCenter)a=d.getCenter();else if(d.getLatLng)a=d.getLatLng();else if(d.getBounds)a=d.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(a),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var a=this._contentNode,d=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof d=="string")a.innerHTML=d;else{for(;a.hasChildNodes();)a.removeChild(a.firstChild);a.appendChild(d)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var a=this._map.latLngToLayerPoint(this._latlng),d=Z(this.options.offset),b=this._getAnchor();this._zoomAnimated?Yt(this._container,a.add(b)):d=d.add(a).add(b);var E=this._containerBottom=-d.y,A=this._containerLeft=-Math.round(this._containerWidth/2)+d.x;this._container.style.bottom=E+"px",this._container.style.left=A+"px"}},_getAnchor:function(){return[0,0]}});St.include({_initOverlay:function(a,d,b,E){var A=d;return A instanceof a||(A=new a(E).setContent(d)),b&&A.setLatLng(b),A}}),Xr.include({_initOverlay:function(a,d,b,E){var A=b;return A instanceof a?(k(A,E),A._source=this):(A=d&&!E?d:new a(E,this),A.setContent(b)),A}});var Eo=qn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(a){return a=arguments.length?a:this._source._map,!a.hasLayer(this)&&a._popup&&a._popup.options.autoClose&&a.removeLayer(a._popup),a._popup=this,qn.prototype.openOn.call(this,a)},onAdd:function(a){qn.prototype.onAdd.call(this,a),a.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Ei||this._source.on("preclick",Wr))},onRemove:function(a){qn.prototype.onRemove.call(this,a),a.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Ei||this._source.off("preclick",Wr))},getEvents:function(){var a=qn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(a.preclick=this.close),this.options.keepInView&&(a.moveend=this._adjustPan),a},_initLayout:function(){var a="leaflet-popup",d=this._container=gt("div",a+" "+(this.options.className||"")+" leaflet-zoom-animated"),b=this._wrapper=gt("div",a+"-content-wrapper",d);if(this._contentNode=gt("div",a+"-content",b),Os(d),_i(this._contentNode),st(d,"contextmenu",Wr),this._tipContainer=gt("div",a+"-tip-container",d),this._tip=gt("div",a+"-tip",this._tipContainer),this.options.closeButton){var E=this._closeButton=gt("a",a+"-close-button",d);E.setAttribute("role","button"),E.setAttribute("aria-label","Close popup"),E.href="#close",E.innerHTML='<span aria-hidden="true">&#215;</span>',st(E,"click",function(A){yn(A),this.close()},this)}},_updateLayout:function(){var a=this._contentNode,d=a.style;d.width="",d.whiteSpace="nowrap";var b=a.offsetWidth;b=Math.min(b,this.options.maxWidth),b=Math.max(b,this.options.minWidth),d.width=b+1+"px",d.whiteSpace="",d.height="";var E=a.offsetHeight,A=this.options.maxHeight,I="leaflet-popup-scrolled";A&&E>A?(d.height=A+"px",at(a,I)):an(a,I),this._containerWidth=this._container.offsetWidth},_animateZoom:function(a){var d=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center),b=this._getAnchor();Yt(this._container,d.add(b))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var a=this._map,d=parseInt(oo(this._container,"marginBottom"),10)||0,b=this._container.offsetHeight+d,E=this._containerWidth,A=new te(this._containerLeft,-b-this._containerBottom);A._add(ls(this._container));var I=a.layerPointToContainerPoint(A),ee=Z(this.options.autoPanPadding),de=Z(this.options.autoPanPaddingTopLeft||ee),_e=Z(this.options.autoPanPaddingBottomRight||ee),Oe=a.getSize(),Ue=0,Xe=0;I.x+E+_e.x>Oe.x&&(Ue=I.x+E-Oe.x+_e.x),I.x-Ue-de.x<0&&(Ue=I.x-de.x),I.y+b+_e.y>Oe.y&&(Xe=I.y+b-Oe.y+_e.y),I.y-Xe-de.y<0&&(Xe=I.y-de.y),(Ue||Xe)&&(this.options.keepInView&&(this._autopanning=!0),a.fire("autopanstart").panBy([Ue,Xe]))}},_getAnchor:function(){return Z(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),qd=function(a,d){return new Eo(a,d)};St.mergeOptions({closePopupOnClick:!0}),St.include({openPopup:function(a,d,b){return this._initOverlay(Eo,a,d,b).openOn(this),this},closePopup:function(a){return a=arguments.length?a:this._popup,a&&a.close(),this}}),Xr.include({bindPopup:function(a,d){return this._popup=this._initOverlay(Eo,this._popup,a,d),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(a){return this._popup&&(this instanceof wi||(this._popup._source=this),this._popup._prepareOpen(a||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(a){return this._popup&&this._popup.setContent(a),this},getPopup:function(){return this._popup},_openPopup:function(a){if(!(!this._popup||!this._map)){cs(a);var d=a.layer||a.target;if(this._popup._source===d&&!(d instanceof Ei)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(a.latlng);return}this._popup._source=d,this.openPopup(a.latlng)}},_movePopup:function(a){this._popup.setLatLng(a.latlng)},_onKeyPress:function(a){a.originalEvent.keyCode===13&&this._openPopup(a)}});var To=qn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(a){qn.prototype.onAdd.call(this,a),this.setOpacity(this.options.opacity),a.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(a){qn.prototype.onRemove.call(this,a),a.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var a=qn.prototype.getEvents.call(this);return this.options.permanent||(a.preclick=this.close),a},_initLayout:function(){var a="leaflet-tooltip",d=a+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=gt("div",d),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+m(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(a){var d,b,E=this._map,A=this._container,I=E.latLngToContainerPoint(E.getCenter()),ee=E.layerPointToContainerPoint(a),de=this.options.direction,_e=A.offsetWidth,Oe=A.offsetHeight,Ue=Z(this.options.offset),Xe=this._getAnchor();de==="top"?(d=_e/2,b=Oe):de==="bottom"?(d=_e/2,b=0):de==="center"?(d=_e/2,b=Oe/2):de==="right"?(d=0,b=Oe/2):de==="left"?(d=_e,b=Oe/2):ee.x<I.x?(de="right",d=0,b=Oe/2):(de="left",d=_e+(Ue.x+Xe.x)*2,b=Oe/2),a=a.subtract(Z(d,b,!0)).add(Ue).add(Xe),an(A,"leaflet-tooltip-right"),an(A,"leaflet-tooltip-left"),an(A,"leaflet-tooltip-top"),an(A,"leaflet-tooltip-bottom"),at(A,"leaflet-tooltip-"+de),Yt(A,a)},_updatePosition:function(){var a=this._map.latLngToLayerPoint(this._latlng);this._setPosition(a)},setOpacity:function(a){this.options.opacity=a,this._container&&en(this._container,a)},_animateZoom:function(a){var d=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center);this._setPosition(d)},_getAnchor:function(){return Z(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),mp=function(a,d){return new To(a,d)};St.include({openTooltip:function(a,d,b){return this._initOverlay(To,a,d,b).openOn(this),this},closeTooltip:function(a){return a.close(),this}}),Xr.include({bindTooltip:function(a,d){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(To,this._tooltip,a,d),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(a){if(!(!a&&this._tooltipHandlersAdded)){var d=a?"off":"on",b={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?b.add=this._openTooltip:(b.mouseover=this._openTooltip,b.mouseout=this.closeTooltip,b.click=this._openTooltip,this._map?this._addFocusListeners():b.add=this._addFocusListeners),this._tooltip.options.sticky&&(b.mousemove=this._moveTooltip),this[d](b),this._tooltipHandlersAdded=!a}},openTooltip:function(a){return this._tooltip&&(this instanceof wi||(this._tooltip._source=this),this._tooltip._prepareOpen(a)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(a){return this._tooltip&&this._tooltip.setContent(a),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(a){var d=typeof a.getElement=="function"&&a.getElement();d&&(st(d,"focus",function(){this._tooltip._source=a,this.openTooltip()},this),st(d,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(a){var d=typeof a.getElement=="function"&&a.getElement();d&&d.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(a){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var d=this;this._map.once("moveend",function(){d._openOnceFlag=!1,d._openTooltip(a)});return}this._tooltip._source=a.layer||a.target,this.openTooltip(this._tooltip.options.sticky?a.latlng:void 0)}},_moveTooltip:function(a){var d=a.latlng,b,E;this._tooltip.options.sticky&&a.originalEvent&&(b=this._map.mouseEventToContainerPoint(a.originalEvent),E=this._map.containerPointToLayerPoint(b),d=this._map.layerPointToLatLng(E)),this._tooltip.setLatLng(d)}});var Zd=Si.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(a){var d=a&&a.tagName==="DIV"?a:document.createElement("div"),b=this.options;if(b.html instanceof Element?(Dr(d),d.appendChild(b.html)):d.innerHTML=b.html!==!1?b.html:"",b.bgPos){var E=Z(b.bgPos);d.style.backgroundPosition=-E.x+"px "+-E.y+"px"}return this._setIconStyles(d,"icon"),d},createShadow:function(){return null}});function pp(a){return new Zd(a)}Si.Default=yo;var xa=Xr.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Ve.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(a){k(this,a)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(a){a._addZoomLimit(this)},onRemove:function(a){this._removeAllTiles(),zt(this._container),a._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(zn(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(js(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(a){return this.options.opacity=a,this._updateOpacity(),this},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var a=this._clampZoom(this._map.getZoom());a!==this._tileZoom&&(this._tileZoom=a,this._updateLevels()),this._update()}return this},getEvents:function(){var a={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=p(this._onMoveEnd,this.options.updateInterval,this)),a.move=this._onMove),this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},createTile:function(){return document.createElement("div")},getTileSize:function(){var a=this.options.tileSize;return a instanceof te?a:new te(a,a)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(a){for(var d=this.getPane().children,b=-a(-1/0,1/0),E=0,A=d.length,I;E<A;E++)I=d[E].style.zIndex,d[E]!==this._container&&I&&(b=a(b,+I));isFinite(b)&&(this.options.zIndex=b+a(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Ve.ielt9){en(this._container,this.options.opacity);var a=+new Date,d=!1,b=!1;for(var E in this._tiles){var A=this._tiles[E];if(!(!A.current||!A.loaded)){var I=Math.min(1,(a-A.loaded)/200);en(A.el,I),I<1?d=!0:(A.active?b=!0:this._onOpaqueTile(A),A.active=!0)}}b&&!this._noPrune&&this._pruneTiles(),d&&(Y(this._fadeFrame),this._fadeFrame=Q(this._updateOpacity,this))}},_onOpaqueTile:_,_initContainer:function(){this._container||(this._container=gt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var a=this._tileZoom,d=this.options.maxZoom;if(a!==void 0){for(var b in this._levels)b=Number(b),this._levels[b].el.children.length||b===a?(this._levels[b].el.style.zIndex=d-Math.abs(a-b),this._onUpdateLevel(b)):(zt(this._levels[b].el),this._removeTilesAtZoom(b),this._onRemoveLevel(b),delete this._levels[b]);var E=this._levels[a],A=this._map;return E||(E=this._levels[a]={},E.el=gt("div","leaflet-tile-container leaflet-zoom-animated",this._container),E.el.style.zIndex=d,E.origin=A.project(A.unproject(A.getPixelOrigin()),a).round(),E.zoom=a,this._setZoomTransform(E,A.getCenter(),A.getZoom()),_(E.el.offsetWidth),this._onCreateLevel(E)),this._level=E,E}},_onUpdateLevel:_,_onRemoveLevel:_,_onCreateLevel:_,_pruneTiles:function(){if(this._map){var a,d,b=this._map.getZoom();if(b>this.options.maxZoom||b<this.options.minZoom){this._removeAllTiles();return}for(a in this._tiles)d=this._tiles[a],d.retain=d.current;for(a in this._tiles)if(d=this._tiles[a],d.current&&!d.active){var E=d.coords;this._retainParent(E.x,E.y,E.z,E.z-5)||this._retainChildren(E.x,E.y,E.z,E.z+2)}for(a in this._tiles)this._tiles[a].retain||this._removeTile(a)}},_removeTilesAtZoom:function(a){for(var d in this._tiles)this._tiles[d].coords.z===a&&this._removeTile(d)},_removeAllTiles:function(){for(var a in this._tiles)this._removeTile(a)},_invalidateAll:function(){for(var a in this._levels)zt(this._levels[a].el),this._onRemoveLevel(Number(a)),delete this._levels[a];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(a,d,b,E){var A=Math.floor(a/2),I=Math.floor(d/2),ee=b-1,de=new te(+A,+I);de.z=+ee;var _e=this._tileCoordsToKey(de),Oe=this._tiles[_e];return Oe&&Oe.active?(Oe.retain=!0,!0):(Oe&&Oe.loaded&&(Oe.retain=!0),ee>E?this._retainParent(A,I,ee,E):!1)},_retainChildren:function(a,d,b,E){for(var A=2*a;A<2*a+2;A++)for(var I=2*d;I<2*d+2;I++){var ee=new te(A,I);ee.z=b+1;var de=this._tileCoordsToKey(ee),_e=this._tiles[de];if(_e&&_e.active){_e.retain=!0;continue}else _e&&_e.loaded&&(_e.retain=!0);b+1<E&&this._retainChildren(A,I,b+1,E)}},_resetView:function(a){var d=a&&(a.pinch||a.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),d,d)},_animateZoom:function(a){this._setView(a.center,a.zoom,!0,a.noUpdate)},_clampZoom:function(a){var d=this.options;return d.minNativeZoom!==void 0&&a<d.minNativeZoom?d.minNativeZoom:d.maxNativeZoom!==void 0&&d.maxNativeZoom<a?d.maxNativeZoom:a},_setView:function(a,d,b,E){var A=Math.round(d);this.options.maxZoom!==void 0&&A>this.options.maxZoom||this.options.minZoom!==void 0&&A<this.options.minZoom?A=void 0:A=this._clampZoom(A);var I=this.options.updateWhenZooming&&A!==this._tileZoom;(!E||I)&&(this._tileZoom=A,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),A!==void 0&&this._update(a),b||this._pruneTiles(),this._noPrune=!!b),this._setZoomTransforms(a,d)},_setZoomTransforms:function(a,d){for(var b in this._levels)this._setZoomTransform(this._levels[b],a,d)},_setZoomTransform:function(a,d,b){var E=this._map.getZoomScale(b,a.zoom),A=a.origin.multiplyBy(E).subtract(this._map._getNewPixelOrigin(d,b)).round();Ve.any3d?Hi(a.el,A,E):Yt(a.el,A)},_resetGrid:function(){var a=this._map,d=a.options.crs,b=this._tileSize=this.getTileSize(),E=this._tileZoom,A=this._map.getPixelWorldBounds(this._tileZoom);A&&(this._globalTileRange=this._pxBoundsToTileRange(A)),this._wrapX=d.wrapLng&&!this.options.noWrap&&[Math.floor(a.project([0,d.wrapLng[0]],E).x/b.x),Math.ceil(a.project([0,d.wrapLng[1]],E).x/b.y)],this._wrapY=d.wrapLat&&!this.options.noWrap&&[Math.floor(a.project([d.wrapLat[0],0],E).y/b.x),Math.ceil(a.project([d.wrapLat[1],0],E).y/b.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(a){var d=this._map,b=d._animatingZoom?Math.max(d._animateToZoom,d.getZoom()):d.getZoom(),E=d.getZoomScale(b,this._tileZoom),A=d.project(a,this._tileZoom).floor(),I=d.getSize().divideBy(E*2);return new G(A.subtract(I),A.add(I))},_update:function(a){var d=this._map;if(d){var b=this._clampZoom(d.getZoom());if(a===void 0&&(a=d.getCenter()),this._tileZoom!==void 0){var E=this._getTiledPixelBounds(a),A=this._pxBoundsToTileRange(E),I=A.getCenter(),ee=[],de=this.options.keepBuffer,_e=new G(A.getBottomLeft().subtract([de,-de]),A.getTopRight().add([de,-de]));if(!(isFinite(A.min.x)&&isFinite(A.min.y)&&isFinite(A.max.x)&&isFinite(A.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Oe in this._tiles){var Ue=this._tiles[Oe].coords;(Ue.z!==this._tileZoom||!_e.contains(new te(Ue.x,Ue.y)))&&(this._tiles[Oe].current=!1)}if(Math.abs(b-this._tileZoom)>1){this._setView(a,b);return}for(var Xe=A.min.y;Xe<=A.max.y;Xe++)for(var ht=A.min.x;ht<=A.max.x;ht++){var Un=new te(ht,Xe);if(Un.z=this._tileZoom,!!this._isValidTile(Un)){var vn=this._tiles[this._tileCoordsToKey(Un)];vn?vn.current=!0:ee.push(Un)}}if(ee.sort(function(Nt,Ot){return Nt.distanceTo(I)-Ot.distanceTo(I)}),ee.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var xr=document.createDocumentFragment();for(ht=0;ht<ee.length;ht++)this._addTile(ee[ht],xr);this._level.el.appendChild(xr)}}}},_isValidTile:function(a){var d=this._map.options.crs;if(!d.infinite){var b=this._globalTileRange;if(!d.wrapLng&&(a.x<b.min.x||a.x>b.max.x)||!d.wrapLat&&(a.y<b.min.y||a.y>b.max.y))return!1}if(!this.options.bounds)return!0;var E=this._tileCoordsToBounds(a);return V(this.options.bounds).overlaps(E)},_keyToBounds:function(a){return this._tileCoordsToBounds(this._keyToTileCoords(a))},_tileCoordsToNwSe:function(a){var d=this._map,b=this.getTileSize(),E=a.scaleBy(b),A=E.add(b),I=d.unproject(E,a.z),ee=d.unproject(A,a.z);return[I,ee]},_tileCoordsToBounds:function(a){var d=this._tileCoordsToNwSe(a),b=new q(d[0],d[1]);return this.options.noWrap||(b=this._map.wrapLatLngBounds(b)),b},_tileCoordsToKey:function(a){return a.x+":"+a.y+":"+a.z},_keyToTileCoords:function(a){var d=a.split(":"),b=new te(+d[0],+d[1]);return b.z=+d[2],b},_removeTile:function(a){var d=this._tiles[a];d&&(zt(d.el),delete this._tiles[a],this.fire("tileunload",{tile:d.el,coords:this._keyToTileCoords(a)}))},_initTile:function(a){at(a,"leaflet-tile");var d=this.getTileSize();a.style.width=d.x+"px",a.style.height=d.y+"px",a.onselectstart=_,a.onmousemove=_,Ve.ielt9&&this.options.opacity<1&&en(a,this.options.opacity)},_addTile:function(a,d){var b=this._getTilePos(a),E=this._tileCoordsToKey(a),A=this.createTile(this._wrapCoords(a),u(this._tileReady,this,a));this._initTile(A),this.createTile.length<2&&Q(u(this._tileReady,this,a,null,A)),Yt(A,b),this._tiles[E]={el:A,coords:a,current:!0},d.appendChild(A),this.fire("tileloadstart",{tile:A,coords:a})},_tileReady:function(a,d,b){d&&this.fire("tileerror",{error:d,tile:b,coords:a});var E=this._tileCoordsToKey(a);b=this._tiles[E],b&&(b.loaded=+new Date,this._map._fadeAnimated?(en(b.el,0),Y(this._fadeFrame),this._fadeFrame=Q(this._updateOpacity,this)):(b.active=!0,this._pruneTiles()),d||(at(b.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:b.el,coords:a})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Ve.ielt9||!this._map._fadeAnimated?Q(this._pruneTiles,this):setTimeout(u(this._pruneTiles,this),250)))},_getTilePos:function(a){return a.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(a){var d=new te(this._wrapX?y(a.x,this._wrapX):a.x,this._wrapY?y(a.y,this._wrapY):a.y);return d.z=a.z,d},_pxBoundsToTileRange:function(a){var d=this.getTileSize();return new G(a.min.unscaleBy(d).floor(),a.max.unscaleBy(d).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var a in this._tiles)if(!this._tiles[a].loaded)return!1;return!0}});function Vd(a){return new xa(a)}var ms=xa.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(a,d){this._url=a,d=k(this,d),d.detectRetina&&Ve.retina&&d.maxZoom>0?(d.tileSize=Math.floor(d.tileSize/2),d.zoomReverse?(d.zoomOffset--,d.minZoom=Math.min(d.maxZoom,d.minZoom+1)):(d.zoomOffset++,d.maxZoom=Math.max(d.minZoom,d.maxZoom-1)),d.minZoom=Math.max(0,d.minZoom)):d.zoomReverse?d.minZoom=Math.min(d.maxZoom,d.minZoom):d.maxZoom=Math.max(d.minZoom,d.maxZoom),typeof d.subdomains=="string"&&(d.subdomains=d.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(a,d){return this._url===a&&d===void 0&&(d=!0),this._url=a,d||this.redraw(),this},createTile:function(a,d){var b=document.createElement("img");return st(b,"load",u(this._tileOnLoad,this,d,b)),st(b,"error",u(this._tileOnError,this,d,b)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(b.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(b.referrerPolicy=this.options.referrerPolicy),b.alt="",b.src=this.getTileUrl(a),b},getTileUrl:function(a){var d={r:Ve.retina?"@2x":"",s:this._getSubdomain(a),x:a.x,y:a.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var b=this._globalTileRange.max.y-a.y;this.options.tms&&(d.y=b),d["-y"]=b}return P(this._url,o(d,this.options))},_tileOnLoad:function(a,d){Ve.ielt9?setTimeout(u(a,this,null,d),0):a(null,d)},_tileOnError:function(a,d,b){var E=this.options.errorTileUrl;E&&d.getAttribute("src")!==E&&(d.src=E),a(b,d)},_onTileRemove:function(a){a.tile.onload=null},_getZoomForUrl:function(){var a=this._tileZoom,d=this.options.maxZoom,b=this.options.zoomReverse,E=this.options.zoomOffset;return b&&(a=d-a),a+E},_getSubdomain:function(a){var d=Math.abs(a.x+a.y)%this.options.subdomains.length;return this.options.subdomains[d]},_abortLoading:function(){var a,d;for(a in this._tiles)if(this._tiles[a].coords.z!==this._tileZoom&&(d=this._tiles[a].el,d.onload=_,d.onerror=_,!d.complete)){d.src=D;var b=this._tiles[a].coords;zt(d),delete this._tiles[a],this.fire("tileabort",{tile:d,coords:b})}},_removeTile:function(a){var d=this._tiles[a];if(d)return d.el.setAttribute("src",D),xa.prototype._removeTile.call(this,a)},_tileReady:function(a,d,b){if(!(!this._map||b&&b.getAttribute("src")===D))return xa.prototype._tileReady.call(this,a,d,b)}});function Rr(a,d){return new ms(a,d)}var ko=ms.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(a,d){this._url=a;var b=o({},this.defaultWmsParams);for(var E in d)E in this.options||(b[E]=d[E]);d=k(this,d);var A=d.detectRetina&&Ve.retina?2:1,I=this.getTileSize();b.width=I.x*A,b.height=I.y*A,this.wmsParams=b},onAdd:function(a){this._crs=this.options.crs||a.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var d=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[d]=this._crs.code,ms.prototype.onAdd.call(this,a)},getTileUrl:function(a){var d=this._tileCoordsToNwSe(a),b=this._crs,E=B(b.project(d[0]),b.project(d[1])),A=E.min,I=E.max,ee=(this._wmsVersion>=1.3&&this._crs===Zc?[A.y,A.x,I.y,I.x]:[A.x,A.y,I.x,I.y]).join(","),de=ms.prototype.getTileUrl.call(this,a);return de+j(this.wmsParams,de,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+ee},setParams:function(a,d){return o(this.wmsParams,a),d||this.redraw(),this}});function Lr(a,d){return new ko(a,d)}ms.WMS=ko,Rr.wms=Lr;var dr=Xr.extend({options:{padding:.1},initialize:function(a){k(this,a),m(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),at(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var a={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(a.zoomanim=this._onAnimZoom),a},_onAnimZoom:function(a){this._updateTransform(a.center,a.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(a,d){var b=this._map.getZoomScale(d,this._zoom),E=this._map.getSize().multiplyBy(.5+this.options.padding),A=this._map.project(this._center,d),I=E.multiplyBy(-b).add(A).subtract(this._map._getNewPixelOrigin(a,d));Ve.any3d?Hi(this._container,I,b):Yt(this._container,I)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var a in this._layers)this._layers[a]._reset()},_onZoomEnd:function(){for(var a in this._layers)this._layers[a]._project()},_updatePaths:function(){for(var a in this._layers)this._layers[a]._update()},_update:function(){var a=this.options.padding,d=this._map.getSize(),b=this._map.containerPointToLayerPoint(d.multiplyBy(-a)).round();this._bounds=new G(b,b.add(d.multiplyBy(1+a*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Al=dr.extend({options:{tolerance:0},getEvents:function(){var a=dr.prototype.getEvents.call(this);return a.viewprereset=this._onViewPreReset,a},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){dr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var a=this._container=document.createElement("canvas");st(a,"mousemove",this._onMouseMove,this),st(a,"click dblclick mousedown mouseup contextmenu",this._onClick,this),st(a,"mouseout",this._handleMouseOut,this),a._leaflet_disable_events=!0,this._ctx=a.getContext("2d")},_destroyContainer:function(){Y(this._redrawRequest),delete this._ctx,zt(this._container),Bt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var a;this._redrawBounds=null;for(var d in this._layers)a=this._layers[d],a._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){dr.prototype._update.call(this);var a=this._bounds,d=this._container,b=a.getSize(),E=Ve.retina?2:1;Yt(d,a.min),d.width=E*b.x,d.height=E*b.y,d.style.width=b.x+"px",d.style.height=b.y+"px",Ve.retina&&this._ctx.scale(2,2),this._ctx.translate(-a.min.x,-a.min.y),this.fire("update")}},_reset:function(){dr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(a){this._updateDashArray(a),this._layers[m(a)]=a;var d=a._order={layer:a,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=d),this._drawLast=d,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(a){this._requestRedraw(a)},_removePath:function(a){var d=a._order,b=d.next,E=d.prev;b?b.prev=E:this._drawLast=E,E?E.next=b:this._drawFirst=b,delete a._order,delete this._layers[m(a)],this._requestRedraw(a)},_updatePath:function(a){this._extendRedrawBounds(a),a._project(),a._update(),this._requestRedraw(a)},_updateStyle:function(a){this._updateDashArray(a),this._requestRedraw(a)},_updateDashArray:function(a){if(typeof a.options.dashArray=="string"){var d=a.options.dashArray.split(/[, ]+/),b=[],E,A;for(A=0;A<d.length;A++){if(E=Number(d[A]),isNaN(E))return;b.push(E)}a.options._dashArray=b}else a.options._dashArray=a.options.dashArray},_requestRedraw:function(a){this._map&&(this._extendRedrawBounds(a),this._redrawRequest=this._redrawRequest||Q(this._redraw,this))},_extendRedrawBounds:function(a){if(a._pxBounds){var d=(a.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new G,this._redrawBounds.extend(a._pxBounds.min.subtract([d,d])),this._redrawBounds.extend(a._pxBounds.max.add([d,d]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var a=this._redrawBounds;if(a){var d=a.getSize();this._ctx.clearRect(a.min.x,a.min.y,d.x,d.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var a,d=this._redrawBounds;if(this._ctx.save(),d){var b=d.getSize();this._ctx.beginPath(),this._ctx.rect(d.min.x,d.min.y,b.x,b.y),this._ctx.clip()}this._drawing=!0;for(var E=this._drawFirst;E;E=E.next)a=E.layer,(!d||a._pxBounds&&a._pxBounds.intersects(d))&&a._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(a,d){if(this._drawing){var b,E,A,I,ee=a._parts,de=ee.length,_e=this._ctx;if(de){for(_e.beginPath(),b=0;b<de;b++){for(E=0,A=ee[b].length;E<A;E++)I=ee[b][E],_e[E?"lineTo":"moveTo"](I.x,I.y);d&&_e.closePath()}this._fillStroke(_e,a)}}},_updateCircle:function(a){if(!(!this._drawing||a._empty())){var d=a._point,b=this._ctx,E=Math.max(Math.round(a._radius),1),A=(Math.max(Math.round(a._radiusY),1)||E)/E;A!==1&&(b.save(),b.scale(1,A)),b.beginPath(),b.arc(d.x,d.y/A,E,0,Math.PI*2,!1),A!==1&&b.restore(),this._fillStroke(b,a)}},_fillStroke:function(a,d){var b=d.options;b.fill&&(a.globalAlpha=b.fillOpacity,a.fillStyle=b.fillColor||b.color,a.fill(b.fillRule||"evenodd")),b.stroke&&b.weight!==0&&(a.setLineDash&&a.setLineDash(d.options&&d.options._dashArray||[]),a.globalAlpha=b.opacity,a.lineWidth=b.weight,a.strokeStyle=b.color,a.lineCap=b.lineCap,a.lineJoin=b.lineJoin,a.stroke())},_onClick:function(a){for(var d=this._map.mouseEventToLayerPoint(a),b,E,A=this._drawFirst;A;A=A.next)b=A.layer,b.options.interactive&&b._containsPoint(d)&&(!(a.type==="click"||a.type==="preclick")||!this._map._draggableMoved(b))&&(E=b);this._fireEvent(E?[E]:!1,a)},_onMouseMove:function(a){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var d=this._map.mouseEventToLayerPoint(a);this._handleMouseHover(a,d)}},_handleMouseOut:function(a){var d=this._hoveredLayer;d&&(an(this._container,"leaflet-interactive"),this._fireEvent([d],a,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(a,d){if(!this._mouseHoverThrottled){for(var b,E,A=this._drawFirst;A;A=A.next)b=A.layer,b.options.interactive&&b._containsPoint(d)&&(E=b);E!==this._hoveredLayer&&(this._handleMouseOut(a),E&&(at(this._container,"leaflet-interactive"),this._fireEvent([E],a,"mouseover"),this._hoveredLayer=E)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,a),this._mouseHoverThrottled=!0,setTimeout(u(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(a,d,b){this._map._fireDOMEvent(d,b||d.type,a)},_bringToFront:function(a){var d=a._order;if(d){var b=d.next,E=d.prev;if(b)b.prev=E;else return;E?E.next=b:b&&(this._drawFirst=b),d.prev=this._drawLast,this._drawLast.next=d,d.next=null,this._drawLast=d,this._requestRedraw(a)}},_bringToBack:function(a){var d=a._order;if(d){var b=d.next,E=d.prev;if(E)E.next=b;else return;b?b.prev=E:E&&(this._drawLast=E),d.prev=null,d.next=this._drawFirst,this._drawFirst.prev=d,this._drawFirst=d,this._requestRedraw(a)}}});function Ao(a){return Ve.canvas?new Al(a):null}var ps=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(a){return document.createElement("<lvml:"+a+' class="lvml">')}}catch{}return function(a){return document.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),Vc={_initContainer:function(){this._container=gt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(dr.prototype._update.call(this),this.fire("update"))},_initPath:function(a){var d=a._container=ps("shape");at(d,"leaflet-vml-shape "+(this.options.className||"")),d.coordsize="1 1",a._path=ps("path"),d.appendChild(a._path),this._updateStyle(a),this._layers[m(a)]=a},_addPath:function(a){var d=a._container;this._container.appendChild(d),a.options.interactive&&a.addInteractiveTarget(d)},_removePath:function(a){var d=a._container;zt(d),a.removeInteractiveTarget(d),delete this._layers[m(a)]},_updateStyle:function(a){var d=a._stroke,b=a._fill,E=a.options,A=a._container;A.stroked=!!E.stroke,A.filled=!!E.fill,E.stroke?(d||(d=a._stroke=ps("stroke")),A.appendChild(d),d.weight=E.weight+"px",d.color=E.color,d.opacity=E.opacity,E.dashArray?d.dashStyle=N(E.dashArray)?E.dashArray.join(" "):E.dashArray.replace(/( *, *)/g," "):d.dashStyle="",d.endcap=E.lineCap.replace("butt","flat"),d.joinstyle=E.lineJoin):d&&(A.removeChild(d),a._stroke=null),E.fill?(b||(b=a._fill=ps("fill")),A.appendChild(b),b.color=E.fillColor||E.color,b.opacity=E.fillOpacity):b&&(A.removeChild(b),a._fill=null)},_updateCircle:function(a){var d=a._point.round(),b=Math.round(a._radius),E=Math.round(a._radiusY||b);this._setPath(a,a._empty()?"M0 0":"AL "+d.x+","+d.y+" "+b+","+E+" 0,"+65535*360)},_setPath:function(a,d){a._path.v=d},_bringToFront:function(a){zn(a._container)},_bringToBack:function(a){js(a._container)}},Ti=Ve.vml?ps:Ie,wa=dr.extend({_initContainer:function(){this._container=Ti("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Ti("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){zt(this._container),Bt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){dr.prototype._update.call(this);var a=this._bounds,d=a.getSize(),b=this._container;(!this._svgSize||!this._svgSize.equals(d))&&(this._svgSize=d,b.setAttribute("width",d.x),b.setAttribute("height",d.y)),Yt(b,a.min),b.setAttribute("viewBox",[a.min.x,a.min.y,d.x,d.y].join(" ")),this.fire("update")}},_initPath:function(a){var d=a._path=Ti("path");a.options.className&&at(d,a.options.className),a.options.interactive&&at(d,"leaflet-interactive"),this._updateStyle(a),this._layers[m(a)]=a},_addPath:function(a){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(a._path),a.addInteractiveTarget(a._path)},_removePath:function(a){zt(a._path),a.removeInteractiveTarget(a._path),delete this._layers[m(a)]},_updatePath:function(a){a._project(),a._update()},_updateStyle:function(a){var d=a._path,b=a.options;d&&(b.stroke?(d.setAttribute("stroke",b.color),d.setAttribute("stroke-opacity",b.opacity),d.setAttribute("stroke-width",b.weight),d.setAttribute("stroke-linecap",b.lineCap),d.setAttribute("stroke-linejoin",b.lineJoin),b.dashArray?d.setAttribute("stroke-dasharray",b.dashArray):d.removeAttribute("stroke-dasharray"),b.dashOffset?d.setAttribute("stroke-dashoffset",b.dashOffset):d.removeAttribute("stroke-dashoffset")):d.setAttribute("stroke","none"),b.fill?(d.setAttribute("fill",b.fillColor||b.color),d.setAttribute("fill-opacity",b.fillOpacity),d.setAttribute("fill-rule",b.fillRule||"evenodd")):d.setAttribute("fill","none"))},_updatePoly:function(a,d){this._setPath(a,Pe(a._parts,d))},_updateCircle:function(a){var d=a._point,b=Math.max(Math.round(a._radius),1),E=Math.max(Math.round(a._radiusY),1)||b,A="a"+b+","+E+" 0 1,0 ",I=a._empty()?"M0 0":"M"+(d.x-b)+","+d.y+A+b*2+",0 "+A+-b*2+",0 ";this._setPath(a,I)},_setPath:function(a,d){a._path.setAttribute("d",d)},_bringToFront:function(a){zn(a._path)},_bringToBack:function(a){js(a._path)}});Ve.vml&&wa.include(Vc);function jo(a){return Ve.svg||Ve.vml?new wa(a):null}St.include({getRenderer:function(a){var d=a.options.renderer||this._getPaneRenderer(a.options.pane)||this.options.renderer||this._renderer;return d||(d=this._renderer=this._createRenderer()),this.hasLayer(d)||this.addLayer(d),d},_getPaneRenderer:function(a){if(a==="overlayPane"||a===void 0)return!1;var d=this._paneRenderers[a];return d===void 0&&(d=this._createRenderer({pane:a}),this._paneRenderers[a]=d),d},_createRenderer:function(a){return this.options.preferCanvas&&Ao(a)||jo(a)}});var Ms=ba.extend({initialize:function(a,d){ba.prototype.initialize.call(this,this._boundsToLatLngs(a),d)},setBounds:function(a){return this.setLatLngs(this._boundsToLatLngs(a))},_boundsToLatLngs:function(a){return a=V(a),[a.getSouthWest(),a.getNorthWest(),a.getNorthEast(),a.getSouthEast()]}});function gp(a,d){return new Ms(a,d)}wa.create=Ti,wa.pointsToPath=Pe,qi.geometryToLayer=Yn,qi.coordsToLatLng=wl,qi.coordsToLatLngs=xo,qi.latLngToCoords=Sl,qi.latLngsToCoords=wo,qi.getFeature=ds,qi.asFeature=El,St.mergeOptions({boxZoom:!0});var hr=xi.extend({initialize:function(a){this._map=a,this._container=a._container,this._pane=a._panes.overlayPane,this._resetStateTimeout=0,a.on("unload",this._destroy,this)},addHooks:function(){st(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Bt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){zt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(a){if(!a.shiftKey||a.which!==1&&a.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),la(),fl(),this._startPoint=this._map.mouseEventToContainerPoint(a),st(document,{contextmenu:cs,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(a){this._moved||(this._moved=!0,this._box=gt("div","leaflet-zoom-box",this._container),at(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(a);var d=new G(this._point,this._startPoint),b=d.getSize();Yt(this._box,d.min),this._box.style.width=b.x+"px",this._box.style.height=b.y+"px"},_finish:function(){this._moved&&(zt(this._box),an(this._container,"leaflet-crosshair")),vi(),co(),Bt(document,{contextmenu:cs,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(a){if(!(a.which!==1&&a.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(u(this._resetState,this),0);var d=new q(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(d).fire("boxzoomend",{boxZoomBounds:d})}},_onKeyDown:function(a){a.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});St.addInitHook("addHandler","boxZoom",hr),St.mergeOptions({doubleClickZoom:!0});var jl=xi.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(a){var d=this._map,b=d.getZoom(),E=d.options.zoomDelta,A=a.originalEvent.shiftKey?b-E:b+E;d.options.doubleClickZoom==="center"?d.setZoom(A):d.setZoomAround(a.containerPoint,A)}});St.addInitHook("addHandler","doubleClickZoom",jl),St.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var ki=xi.extend({addHooks:function(){if(!this._draggable){var a=this._map;this._draggable=new us(a._mapPane,a._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),a.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),a.on("zoomend",this._onZoomEnd,this),a.whenReady(this._onZoomEnd,this))}at(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){an(this._map._container,"leaflet-grab"),an(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var a=this._map;if(a._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var d=V(this._map.options.maxBounds);this._offsetLimit=B(this._map.latLngToContainerPoint(d.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(d.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;a.fire("movestart").fire("dragstart"),a.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(a){if(this._map.options.inertia){var d=this._lastTime=+new Date,b=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(b),this._times.push(d),this._prunePositions(d)}this._map.fire("move",a).fire("drag",a)},_prunePositions:function(a){for(;this._positions.length>1&&a-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var a=this._map.getSize().divideBy(2),d=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=d.subtract(a).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(a,d){return a-(a-d)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var a=this._draggable._newPos.subtract(this._draggable._startPos),d=this._offsetLimit;a.x<d.min.x&&(a.x=this._viscousLimit(a.x,d.min.x)),a.y<d.min.y&&(a.y=this._viscousLimit(a.y,d.min.y)),a.x>d.max.x&&(a.x=this._viscousLimit(a.x,d.max.x)),a.y>d.max.y&&(a.y=this._viscousLimit(a.y,d.max.y)),this._draggable._newPos=this._draggable._startPos.add(a)}},_onPreDragWrap:function(){var a=this._worldWidth,d=Math.round(a/2),b=this._initialWorldOffset,E=this._draggable._newPos.x,A=(E-d+b)%a+d-b,I=(E+d+b)%a-d-b,ee=Math.abs(A+b)<Math.abs(I+b)?A:I;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=ee},_onDragEnd:function(a){var d=this._map,b=d.options,E=!b.inertia||a.noInertia||this._times.length<2;if(d.fire("dragend",a),E)d.fire("moveend");else{this._prunePositions(+new Date);var A=this._lastPos.subtract(this._positions[0]),I=(this._lastTime-this._times[0])/1e3,ee=b.easeLinearity,de=A.multiplyBy(ee/I),_e=de.distanceTo([0,0]),Oe=Math.min(b.inertiaMaxSpeed,_e),Ue=de.multiplyBy(Oe/_e),Xe=Oe/(b.inertiaDeceleration*ee),ht=Ue.multiplyBy(-Xe/2).round();!ht.x&&!ht.y?d.fire("moveend"):(ht=d._limitOffset(ht,d.options.maxBounds),Q(function(){d.panBy(ht,{duration:Xe,easeLinearity:ee,noMoveStart:!0,animate:!0})}))}}});St.addInitHook("addHandler","dragging",ki),St.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Kc=xi.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(a){this._map=a,this._setPanDelta(a.options.keyboardPanDelta),this._setZoomDelta(a.options.zoomDelta)},addHooks:function(){var a=this._map._container;a.tabIndex<=0&&(a.tabIndex="0"),st(a,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Bt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var a=document.body,d=document.documentElement,b=a.scrollTop||d.scrollTop,E=a.scrollLeft||d.scrollLeft;this._map._container.focus(),window.scrollTo(E,b)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(a){var d=this._panKeys={},b=this.keyCodes,E,A;for(E=0,A=b.left.length;E<A;E++)d[b.left[E]]=[-1*a,0];for(E=0,A=b.right.length;E<A;E++)d[b.right[E]]=[a,0];for(E=0,A=b.down.length;E<A;E++)d[b.down[E]]=[0,a];for(E=0,A=b.up.length;E<A;E++)d[b.up[E]]=[0,-1*a]},_setZoomDelta:function(a){var d=this._zoomKeys={},b=this.keyCodes,E,A;for(E=0,A=b.zoomIn.length;E<A;E++)d[b.zoomIn[E]]=a;for(E=0,A=b.zoomOut.length;E<A;E++)d[b.zoomOut[E]]=-a},_addHooks:function(){st(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Bt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(a){if(!(a.altKey||a.ctrlKey||a.metaKey)){var d=a.keyCode,b=this._map,E;if(d in this._panKeys){if(!b._panAnim||!b._panAnim._inProgress)if(E=this._panKeys[d],a.shiftKey&&(E=Z(E).multiplyBy(3)),b.options.maxBounds&&(E=b._limitOffset(Z(E),b.options.maxBounds)),b.options.worldCopyJump){var A=b.wrapLatLng(b.unproject(b.project(b.getCenter()).add(E)));b.panTo(A)}else b.panBy(E)}else if(d in this._zoomKeys)b.setZoom(b.getZoom()+(a.shiftKey?3:1)*this._zoomKeys[d]);else if(d===27&&b._popup&&b._popup.options.closeOnEscapeKey)b.closePopup();else return;cs(a)}}});St.addInitHook("addHandler","keyboard",Kc),St.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var No=xi.extend({addHooks:function(){st(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Bt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(a){var d=Qn(a),b=this._map.options.wheelDebounceTime;this._delta+=d,this._lastMousePos=this._map.mouseEventToContainerPoint(a),this._startTime||(this._startTime=+new Date);var E=Math.max(b-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(u(this._performZoom,this),E),cs(a)},_performZoom:function(){var a=this._map,d=a.getZoom(),b=this._map.options.zoomSnap||0;a._stop();var E=this._delta/(this._map.options.wheelPxPerZoomLevel*4),A=4*Math.log(2/(1+Math.exp(-Math.abs(E))))/Math.LN2,I=b?Math.ceil(A/b)*b:A,ee=a._limitZoom(d+(this._delta>0?I:-I))-d;this._delta=0,this._startTime=null,ee&&(a.options.scrollWheelZoom==="center"?a.setZoom(d+ee):a.setZoomAround(this._lastMousePos,d+ee))}});St.addInitHook("addHandler","scrollWheelZoom",No);var Cs=600;St.mergeOptions({tapHold:Ve.touchNative&&Ve.safari&&Ve.mobile,tapTolerance:15});var Nl=xi.extend({addHooks:function(){st(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Bt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(a){if(clearTimeout(this._holdTimeout),a.touches.length===1){var d=a.touches[0];this._startPos=this._newPos=new te(d.clientX,d.clientY),this._holdTimeout=setTimeout(u(function(){this._cancel(),this._isTapValid()&&(st(document,"touchend",yn),st(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",d))},this),Cs),st(document,"touchend touchcancel contextmenu",this._cancel,this),st(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function a(){Bt(document,"touchend",yn),Bt(document,"touchend touchcancel",a)},_cancel:function(){clearTimeout(this._holdTimeout),Bt(document,"touchend touchcancel contextmenu",this._cancel,this),Bt(document,"touchmove",this._onMove,this)},_onMove:function(a){var d=a.touches[0];this._newPos=new te(d.clientX,d.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(a,d){var b=new MouseEvent(a,{bubbles:!0,cancelable:!0,view:window,screenX:d.screenX,screenY:d.screenY,clientX:d.clientX,clientY:d.clientY});b._simulated=!0,d.target.dispatchEvent(b)}});St.addInitHook("addHandler","tapHold",Nl),St.mergeOptions({touchZoom:Ve.touch,bounceAtZoomLimits:!0});var Wc=xi.extend({addHooks:function(){at(this._map._container,"leaflet-touch-zoom"),st(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){an(this._map._container,"leaflet-touch-zoom"),Bt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(a){var d=this._map;if(!(!a.touches||a.touches.length!==2||d._animatingZoom||this._zooming)){var b=d.mouseEventToContainerPoint(a.touches[0]),E=d.mouseEventToContainerPoint(a.touches[1]);this._centerPoint=d.getSize()._divideBy(2),this._startLatLng=d.containerPointToLatLng(this._centerPoint),d.options.touchZoom!=="center"&&(this._pinchStartLatLng=d.containerPointToLatLng(b.add(E)._divideBy(2))),this._startDist=b.distanceTo(E),this._startZoom=d.getZoom(),this._moved=!1,this._zooming=!0,d._stop(),st(document,"touchmove",this._onTouchMove,this),st(document,"touchend touchcancel",this._onTouchEnd,this),yn(a)}},_onTouchMove:function(a){if(!(!a.touches||a.touches.length!==2||!this._zooming)){var d=this._map,b=d.mouseEventToContainerPoint(a.touches[0]),E=d.mouseEventToContainerPoint(a.touches[1]),A=b.distanceTo(E)/this._startDist;if(this._zoom=d.getScaleZoom(A,this._startZoom),!d.options.bounceAtZoomLimits&&(this._zoom<d.getMinZoom()&&A<1||this._zoom>d.getMaxZoom()&&A>1)&&(this._zoom=d._limitZoom(this._zoom)),d.options.touchZoom==="center"){if(this._center=this._startLatLng,A===1)return}else{var I=b._add(E)._divideBy(2)._subtract(this._centerPoint);if(A===1&&I.x===0&&I.y===0)return;this._center=d.unproject(d.project(this._pinchStartLatLng,this._zoom).subtract(I),this._zoom)}this._moved||(d._moveStart(!0,!1),this._moved=!0),Y(this._animRequest);var ee=u(d._move,d,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=Q(ee,this,!0),yn(a)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,Y(this._animRequest),Bt(document,"touchmove",this._onTouchMove,this),Bt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});St.addInitHook("addHandler","touchZoom",Wc),St.BoxZoom=hr,St.DoubleClickZoom=jl,St.Drag=ki,St.Keyboard=Kc,St.ScrollWheelZoom=No,St.TapHold=Nl,St.TouchZoom=Wc,n.Bounds=G,n.Browser=Ve,n.CRS=W,n.Canvas=Al,n.Circle=xl,n.CircleMarker=ga,n.Class=ie,n.Control=_r,n.DivIcon=Zd,n.DivOverlay=qn,n.DomEvent=gl,n.DomUtil=da,n.Draggable=us,n.Evented=le,n.FeatureGroup=wi,n.GeoJSON=qi,n.GridLayer=xa,n.Handler=xi,n.Icon=Si,n.ImageOverlay=va,n.LatLng=H,n.LatLngBounds=q,n.Layer=Xr,n.LayerGroup=pa,n.LineUtil=up,n.Map=St,n.Marker=_o,n.Mixin=ap,n.Path=Ei,n.Point=te,n.PolyUtil=Yc,n.Polygon=ba,n.Polyline=Yi,n.Popup=Eo,n.PosAnimation=ha,n.Projection=$d,n.Rectangle=Ms,n.Renderer=dr,n.SVG=wa,n.SVGOverlay=kl,n.TileLayer=ms,n.Tooltip=To,n.Transformation=ke,n.Util=ne,n.VideoOverlay=fs,n.bind=u,n.bounds=B,n.canvas=Ao,n.circle=Gd,n.circleMarker=Hd,n.control=Fi,n.divIcon=pp,n.extend=o,n.featureGroup=zd,n.geoJSON=Tl,n.geoJson=So,n.gridLayer=Vd,n.icon=bo,n.imageOverlay=Fd,n.latLng=X,n.latLngBounds=V,n.layerGroup=dp,n.map=Ic,n.marker=Ud,n.point=Z,n.polygon=fp,n.polyline=hp,n.popup=qd,n.rectangle=gp,n.setOptions=k,n.stamp=m,n.svg=jo,n.svgOverlay=Yd,n.tileLayer=Rr,n.tooltip=mp,n.transformation=je,n.version=i,n.videoOverlay=_a;var Xc=window.L;n.noConflict=function(){return window.L=Xc,this},window.L=n}))})(qu,qu.exports)),qu.exports}var SC=wC();const lg=cl(SC),nf=e=>e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;");function Go(e){const t=document.getElementById(e);if(!t)throw new Error(`#${e} not found`);return t}function EC(e){const{buttonId:t,buttonInputId:n,modalId:i,closeMapId:o,mapCloseBtnId:l,searchBoxId:u,suggestionsId:f,mapId:m}=e.ids,p=e.initialCenter??{lat:37.5665,lon:126.978},y=Go(n),_=Go(t),x=Go(i),S=Go(l),T=Go(u),k=Go(f),j=o?Go(o):null;let C=null,P=null,N=null;const M=Y=>Y.code==="Space"||Y.key===" "||Y.key==="Spacebar"||Y.key==="Space",D=Y=>{M(Y)&&document.activeElement!==T&&(Y.preventDefault(),Y.stopPropagation(),T.focus())},$=()=>{x.style.display="flex",C?setTimeout(()=>C?.invalidateSize(),200):setTimeout(()=>{C=lg.map(m,{keyboard:!1}).setView([p.lat,p.lon],11),lg.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:" OpenStreetMap"}).addTo(C),C.invalidateSize()},0),x.addEventListener("keydown",D,!0),x.addEventListener("keyup",D,!0),T.focus()},z=()=>{x.style.display="none",T.value="",k.innerHTML="",N&&(window.clearTimeout(N),N=null),x.removeEventListener("keydown",D,!0),x.removeEventListener("keyup",D,!0)},F=Y=>{const ne=Y.dataset.name??"",ie=Number(Y.dataset.lat??""),Se=Number(Y.dataset.lon??"");!Number.isFinite(ie)||!Number.isFinite(Se)||!C||(P?P.setLatLng([ie,Se]):P=lg.marker([ie,Se]).addTo(C),C.flyTo([ie,Se],14,{duration:.5}),y.value=ne,y.dataset.lat=String(ie),y.dataset.lon=String(Se),e.onSelected?.({name:ne,lat:ie,lon:Se}),k.innerHTML="",z())},K=()=>{N&&window.clearTimeout(N);const Y=T.value.trim();if(!Y){k.innerHTML="";return}N=window.setTimeout(async()=>{try{const ne="https://nominatim.openstreetmap.org/search?format=jsonv2&limit=12&accept-language=ko&addressdetails=1&dedupe=1&email=unique950318@gmail.com&q="+encodeURIComponent(Y),ie=await fetch(ne,{headers:{Accept:"application/json"}});if(!ie.ok)throw new Error(`HTTP ${ie.status}`);const Se=await ie.json();if(!Array.isArray(Se)||Se.length===0){k.innerHTML='<li style="padding:8px"> </li>';return}const J=Se.slice(0,12).map((le,te)=>{const be=le.display_name.split(",").slice(0,3).map(B=>B.trim()).join("  "),Z="padding:8px;cursor:pointer;outline:none;",G=te===0?"background-color:#1f2937;border-radius:4px;":"";return`<li
                    role="option"
                    data-name="${nf(be)}"
                    data-lat="${nf(le.lat)}"
                    data-lon="${nf(le.lon)}"
                    data-active="${te===0?"1":"0"}"
                    style="${Z}${G}"
                  >${nf(be)}</li>`}).join("");k.innerHTML=J}catch(ne){console.error(ne),k.innerHTML='<li style="padding:8px;color:#b91c1c"> </li>'}},250)},oe=Y=>{const ne=Y.target;ne.tagName==="LI"&&F(ne)},Q=Y=>{if(Y.key==="Enter"){const ne=k.querySelector('li[data-active="1"]')??k.querySelector("li");ne&&F(ne)}};return _.addEventListener("click",$),S.addEventListener("click",z),j&&j.addEventListener("click",z),T.addEventListener("input",K),T.addEventListener("keydown",Q),k.addEventListener("click",oe),()=>{_.removeEventListener("click",$),S.removeEventListener("click",z),j&&j.removeEventListener("click",z),T.removeEventListener("input",K),T.removeEventListener("keydown",Q),k.removeEventListener("click",oe),x.removeEventListener("keydown",D,!0),x.removeEventListener("keyup",D,!0),N&&(window.clearTimeout(N),N=null),C&&(C.remove(),C=null)}}function nc(){return document.getElementById("suggestions")}function Ff(e){const t=Array.from(e.querySelectorAll('li, [role="option"]'));return t.forEach((n,i)=>{n.getAttribute("role")||n.setAttribute("role","option"),n.setAttribute("aria-selected",n===document.activeElement?"true":"false"),n.tabIndex=-1,n.id||(n.id=`suggestion-item-${i}`)}),t}function cg(e,t){const n=Ff(e);if(n.length===0)return;const i=n.length;let o=t;o<0&&(o=i-1),o>=i&&(o=0),n.forEach(u=>{u.tabIndex=-1,u.setAttribute("aria-selected","false")});const l=n[o];l.tabIndex=0,l.setAttribute("aria-selected","true"),l.focus()}function gT({onSelect:e,placeholderText:t="",buttonStyle:n,value:i}){const[o,l]=R.useState(t),[u,f]=R.useState(!1),[m,p]=R.useState(i??""),y=R.useRef(null),_=R.useRef(null),x=R.useRef(null),S=R.useRef(null);return R.useEffect(()=>{i!==void 0&&p(i)},[i]),R.useEffect(()=>{if(!u)return;const T=EC({ids:{buttonInputId:"inputBirthPlace",buttonId:"inputBirthPlaceBtn",modalId:"mapModal",closeMapId:"closeMap",mapCloseBtnId:"mapCloseBtn",searchBoxId:"searchBox",suggestionsId:"suggestions",mapId:"map"},onSelected:K=>{l(""),p(K.name),y.current&&(y.current.value=K.name),_.current&&(_.current.value=String(K.lat)),x.current&&(x.current.value=String(K.lon)),e?.(K),f(!1)}}),k=document.getElementById("inputBirthPlaceBtn");k&&k.dispatchEvent(new MouseEvent("click",{bubbles:!0}));const j=document.getElementById("mapModal"),C=document.getElementById("searchBox"),P=nc();setTimeout(()=>C?.focus(),0);const N='button, [href], input:not([type="hidden"]), select, textarea, [tabindex]:not([tabindex="-1"])',M=K=>{if(K.key==="Escape"){K.preventDefault(),f(!1);return}if(K.key!=="Tab")return;const oe=nc();if(oe&&oe.contains(document.activeElement))return;const Q=Array.from(j.querySelectorAll(N)).filter(Se=>!Se.hasAttribute("disabled")&&Se.tabIndex!==-1);if(Q.length===0)return;const Y=Q[0],ne=Q[Q.length-1],ie=document.activeElement;K.shiftKey?(ie===Y||!j.contains(ie))&&(K.preventDefault(),ne.focus()):(ie===ne||!j.contains(ie))&&(K.preventDefault(),Y.focus())};j.addEventListener("keydown",M);const D=K=>{if(K.key!=="ArrowDown")return;const oe=nc();!oe||Ff(oe).length===0||K.preventDefault()};C?.addEventListener("keydown",D);const $=K=>{if(K.target.value.trim()===""){const Q=nc();Q&&(Q.innerHTML="")}};C?.addEventListener("input",$);const z=K=>{const oe=nc();if(!oe)return;const Q=Ff(oe);if(Q.length===0)return;const Y=document.activeElement,ne=Y?Q.indexOf(Y):-1;if(ne===-1)return;const ie=Se=>{K.preventDefault(),cg(oe,ne+Se)};switch(K.key){case"Tab":K.preventDefault(),ie(K.shiftKey?-1:1);break;case"ArrowDown":K.preventDefault(),ie(1);break;case"ArrowUp":K.preventDefault(),ie(-1);break;case"Home":K.preventDefault(),cg(oe,0);break;case"End":K.preventDefault(),cg(oe,Q.length-1);break;case"Enter":case" ":K.preventDefault(),Y.click();break;case"Backspace":K.preventDefault(),oe.innerHTML="",C?.focus();break}K.stopPropagation()};let F=null;return P&&(P.addEventListener("keydown",z),F=new MutationObserver(()=>{const K=nc();!K||Ff(K).length}),F.observe(P,{childList:!0,subtree:!1})),()=>{j.removeEventListener("keydown",M),C?.removeEventListener("keydown",D),C?.removeEventListener("input",$),P&&P.removeEventListener("keydown",z),F?.disconnect(),T?.()}},[u,e]),R.useEffect(()=>{u||setTimeout(()=>S.current?.focus(),0)},[u]),g.jsxs("li",{className:"flex items-center gap-2",children:[g.jsx("input",{className:`w-[60%] desk:w-[70%] mr-2 border rounded-lg p-2
                   bg-white dark:bg-neutral-900
                   border-neutral-300 dark:border-neutral-700
                   text-neutral-900 dark:text-neutral-100
                   placeholder-neutral-400 dark:placeholder-neutral-500`,type:"text",id:"inputBirthPlace",readOnly:!0,"aria-readonly":"true",value:m&&m.trim()!==""?m:t}),g.jsx("button",{ref:S,type:"button",id:"inputBirthPlaceBtn",className:"btn_style text-sm desk:text-base w-[calc(40%_-_8px)] desk:w-[calc(30%_-_8px)] p-0",style:n,onClick:()=>f(!0),"aria-haspopup":"dialog","aria-expanded":u,"aria-controls":"mapModal",children:o}),g.jsx("input",{ref:y,type:"hidden",name:"birthPlace_name",defaultValue:""}),g.jsx("input",{ref:_,type:"hidden",name:"birthPlace_lat",defaultValue:""}),g.jsx("input",{ref:x,type:"hidden",name:"birthPlace_lon",defaultValue:""}),u&&g.jsx("div",{id:"mapModal",role:"dialog","aria-modal":"true","aria-labelledby":"mapModalTitle",className:"fixed inset-0 z-[999] flex items-center justify-center bg-black/40 dark:bg-black/60 p-4",children:g.jsxs("div",{className:`w-[96vw] desk:w-[920px] rounded-2xl shadow-2xl overflow-hidden flex flex-col
                          bg-white dark:bg-neutral-950
                          text-neutral-900 dark:text-neutral-100
                          border border-neutral-200 dark:border-neutral-800`,children:[g.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-neutral-200 dark:border-neutral-800",children:[g.jsx("div",{id:"mapModalTitle",className:"font-bold",children:""}),g.jsx("button",{id:"mapCloseBtn","aria-label":"",className:"text-xl hover:opacity-70 cursor-pointer",onClick:()=>f(!1),children:""})]}),g.jsxs("div",{className:"relative grid gap-2 px-3 py-3 border-t border-neutral-200 dark:border-neutral-800",children:[g.jsx("label",{htmlFor:"searchBox",className:"text-xs text-neutral-500 dark:text-neutral-400",children:"/ "}),g.jsxs("div",{className:"relative",children:[g.jsx("input",{id:"searchBox",placeholder:":   / seoul /  / tokyo",className:`h-10 w-full rounded-lg border px-3 outline-none
                             bg-white dark:bg-neutral-900
                             border-neutral-300 dark:border-neutral-700
                             placeholder-neutral-400 dark:placeholder-neutral-500
                             text-neutral-900 dark:text-neutral-100
                             focus:border-neutral-400 dark:focus:border-neutral-600`,autoComplete:"off"}),g.jsx("ul",{id:"suggestions",role:"listbox","aria-label":" ",className:`absolute left-0 right-0 mt-1 max-h-60 overflow-y-auto rounded-lg border shadow-xl z-[1005]
                             bg-white dark:bg-neutral-900
                             border-neutral-200 dark:border-neutral-700
                             text-neutral-900 dark:text-neutral-100
                             divide-y divide-neutral-200 dark:divide-neutral-800`})]})]}),g.jsx("div",{className:"relative h-[250px] desk:h-[360px] border-y border-neutral-200 dark:border-neutral-800",children:g.jsx("div",{id:"map",className:"h-full w-full"})}),g.jsxs("div",{className:"gap-2 p-3",children:[g.jsxs("div",{id:"footerHint",className:"pr-2 text-xs text-neutral-600 dark:text-neutral-300 flex-1",children:[g.jsxs("p",{className:"flex mb-1",children:[g.jsx("span",{className:"mr-1",children:"*"}),g.jsx("span",{children:" ,  ."})]}),g.jsxs("p",{className:"flex",children:[g.jsx("span",{className:"mr-1",children:"*"}),g.jsx("span",{children:"       ,   ."})]})]}),g.jsx("button",{id:"closeMap",style:{display:"none"},"aria-hidden":"true",tabIndex:-1})]})]})})]})}var Lm=D2();const TC=cl(Lm);function Er(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var kC=typeof Symbol=="function"&&Symbol.observable||"@@observable",t1=kC,n1=()=>Math.random().toString(36).substring(7).split("").join("."),AC={INIT:`@@redux/INIT${n1()}`,REPLACE:`@@redux/REPLACE${n1()}`},r1=AC;function jC(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function bT(e,t,n){if(typeof e!="function")throw new Error(Er(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Er(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Er(1));return n(bT)(e,t)}let i=e,o=t,l=new Map,u=l,f=0,m=!1;function p(){u===l&&(u=new Map,l.forEach((j,C)=>{u.set(C,j)}))}function y(){if(m)throw new Error(Er(3));return o}function _(j){if(typeof j!="function")throw new Error(Er(4));if(m)throw new Error(Er(5));let C=!0;p();const P=f++;return u.set(P,j),function(){if(C){if(m)throw new Error(Er(6));C=!1,p(),u.delete(P),l=null}}}function x(j){if(!jC(j))throw new Error(Er(7));if(typeof j.type>"u")throw new Error(Er(8));if(typeof j.type!="string")throw new Error(Er(17));if(m)throw new Error(Er(9));try{m=!0,o=i(o,j)}finally{m=!1}return(l=u).forEach(P=>{P()}),j}function S(j){if(typeof j!="function")throw new Error(Er(10));i=j,x({type:r1.REPLACE})}function T(){const j=_;return{subscribe(C){if(typeof C!="object"||C===null)throw new Error(Er(11));function P(){const M=C;M.next&&M.next(y())}return P(),{unsubscribe:j(P)}},[t1](){return this}}}return x({type:r1.INIT}),{dispatch:x,subscribe:_,getState:y,replaceReducer:S,[t1]:T}}function i1(e,t){return function(...n){return t(e.apply(this,n))}}function s1(e,t){if(typeof e=="function")return i1(e,t);if(typeof e!="object"||e===null)throw new Error(Er(16));const n={};for(const i in e){const o=e[i];typeof o=="function"&&(n[i]=i1(o,t))}return n}function yT(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...i)=>t(n(...i)))}function NC(...e){return t=>(n,i)=>{const o=t(n,i);let l=()=>{throw new Error(Er(15))};const u={getState:o.getState,dispatch:(m,...p)=>l(m,...p)},f=e.map(m=>m(u));return l=yT(...f)(o.dispatch),{...o,dispatch:l}}}var ug={exports:{}},dg={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a1;function OC(){if(a1)return dg;a1=1;var e=Em();function t(m,p){return m===p&&(m!==0||1/m===1/p)||m!==m&&p!==p}var n=typeof Object.is=="function"?Object.is:t,i=e.useSyncExternalStore,o=e.useRef,l=e.useEffect,u=e.useMemo,f=e.useDebugValue;return dg.useSyncExternalStoreWithSelector=function(m,p,y,_,x){var S=o(null);if(S.current===null){var T={hasValue:!1,value:null};S.current=T}else T=S.current;S=u(function(){function j(D){if(!C){if(C=!0,P=D,D=_(D),x!==void 0&&T.hasValue){var $=T.value;if(x($,D))return N=$}return N=D}if($=N,n(P,D))return $;var z=_(D);return x!==void 0&&x($,z)?(P=D,$):(P=D,N=z)}var C=!1,P,N,M=y===void 0?null:y;return[function(){return j(p())},M===null?void 0:function(){return j(M())}]},[p,y,_,x]);var k=i(m,S[0],S[1]);return l(function(){T.hasValue=!0,T.value=k},[k]),f(k),k},dg}var o1;function DC(){return o1||(o1=1,ug.exports=OC()),ug.exports}DC();var MC=R.version.startsWith("19"),CC=Symbol.for(MC?"react.transitional.element":"react.element"),RC=Symbol.for("react.portal"),LC=Symbol.for("react.fragment"),BC=Symbol.for("react.strict_mode"),PC=Symbol.for("react.profiler"),$C=Symbol.for("react.consumer"),IC=Symbol.for("react.context"),vT=Symbol.for("react.forward_ref"),zC=Symbol.for("react.suspense"),UC=Symbol.for("react.suspense_list"),uy=Symbol.for("react.memo"),HC=Symbol.for("react.lazy"),GC=vT,FC=uy;function YC(e){if(typeof e=="object"&&e!==null){const{$$typeof:t}=e;switch(t){case CC:switch(e=e.type,e){case LC:case PC:case BC:case zC:case UC:return e;default:switch(e=e&&e.$$typeof,e){case IC:case vT:case HC:case uy:return e;case $C:return e;default:return t}}case RC:return t}}}function qC(e){return YC(e)===uy}function ZC(e,t,n,i,{areStatesEqual:o,areOwnPropsEqual:l,areStatePropsEqual:u}){let f=!1,m,p,y,_,x;function S(P,N){return m=P,p=N,y=e(m,p),_=t(i,p),x=n(y,_,p),f=!0,x}function T(){return y=e(m,p),t.dependsOnOwnProps&&(_=t(i,p)),x=n(y,_,p),x}function k(){return e.dependsOnOwnProps&&(y=e(m,p)),t.dependsOnOwnProps&&(_=t(i,p)),x=n(y,_,p),x}function j(){const P=e(m,p),N=!u(P,y);return y=P,N&&(x=n(y,_,p)),x}function C(P,N){const M=!l(N,p),D=!o(P,m,N,p);return m=P,p=N,M&&D?T():M?k():D?j():x}return function(N,M){return f?C(N,M):S(N,M)}}function VC(e,{initMapStateToProps:t,initMapDispatchToProps:n,initMergeProps:i,...o}){const l=t(e,o),u=n(e,o),f=i(e,o);return ZC(l,u,f,e,o)}function KC(e,t){const n={};for(const i in e){const o=e[i];typeof o=="function"&&(n[i]=(...l)=>t(o(...l)))}return n}function Nb(e){return function(n){const i=e(n);function o(){return i}return o.dependsOnOwnProps=!1,o}}function l1(e){return e.dependsOnOwnProps?!!e.dependsOnOwnProps:e.length!==1}function _T(e,t){return function(i,{displayName:o}){const l=function(f,m){return l.dependsOnOwnProps?l.mapToProps(f,m):l.mapToProps(f,void 0)};return l.dependsOnOwnProps=!0,l.mapToProps=function(f,m){l.mapToProps=e,l.dependsOnOwnProps=l1(e);let p=l(f,m);return typeof p=="function"&&(l.mapToProps=p,l.dependsOnOwnProps=l1(p),p=l(f,m)),p},l}}function dy(e,t){return(n,i)=>{throw new Error(`Invalid value of type ${typeof e} for ${t} argument when connecting component ${i.wrappedComponentName}.`)}}function WC(e){return e&&typeof e=="object"?Nb(t=>KC(e,t)):e?typeof e=="function"?_T(e):dy(e,"mapDispatchToProps"):Nb(t=>({dispatch:t}))}function XC(e){return e?typeof e=="function"?_T(e):dy(e,"mapStateToProps"):Nb(()=>({}))}function JC(e,t,n){return{...n,...e,...t}}function QC(e){return function(n,{displayName:i,areMergedPropsEqual:o}){let l=!1,u;return function(m,p,y){const _=e(m,p,y);return l?o(_,u)||(u=_):(l=!0,u=_),u}}}function e3(e){return e?typeof e=="function"?QC(e):dy(e,"mergeProps"):()=>JC}function t3(e){e()}function n3(){let e=null,t=null;return{clear(){e=null,t=null},notify(){t3(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let i=e;for(;i;)n.push(i),i=i.next;return n},subscribe(n){let i=!0;const o=t={callback:n,next:null,prev:t};return o.prev?o.prev.next=o:e=o,function(){!i||e===null||(i=!1,o.next?o.next.prev=o.prev:t=o.prev,o.prev?o.prev.next=o.next:e=o.next)}}}}var c1={notify(){},get:()=>[]};function xT(e,t){let n,i=c1,o=0,l=!1;function u(k){y();const j=i.subscribe(k);let C=!1;return()=>{C||(C=!0,j(),_())}}function f(){i.notify()}function m(){T.onStateChange&&T.onStateChange()}function p(){return l}function y(){o++,n||(n=t?t.addNestedSub(m):e.subscribe(m),i=n3())}function _(){o--,n&&o===0&&(n(),n=void 0,i.clear(),i=c1)}function x(){l||(l=!0,y())}function S(){l&&(l=!1,_())}const T={addNestedSub:u,notifyNestedSubs:f,handleChangeWrapper:m,isSubscribed:p,trySubscribe:x,tryUnsubscribe:S,getListeners:()=>i};return T}var r3=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",i3=r3(),s3=()=>typeof navigator<"u"&&navigator.product==="ReactNative",a3=s3(),o3=()=>i3||a3?R.useLayoutEffect:R.useEffect,am=o3();function u1(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function hg(e,t){if(u1(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(let o=0;o<n.length;o++)if(!Object.prototype.hasOwnProperty.call(t,n[o])||!u1(e[n[o]],t[n[o]]))return!1;return!0}var l3={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},c3={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},u3={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},wT={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},d3={[GC]:u3,[FC]:wT};function d1(e){return qC(e)?wT:d3[e.$$typeof]||l3}var h3=Object.defineProperty,f3=Object.getOwnPropertyNames,h1=Object.getOwnPropertySymbols,m3=Object.getOwnPropertyDescriptor,p3=Object.getPrototypeOf,f1=Object.prototype;function Ob(e,t){if(typeof t!="string"){if(f1){const l=p3(t);l&&l!==f1&&Ob(e,l)}let n=f3(t);h1&&(n=n.concat(h1(t)));const i=d1(e),o=d1(t);for(let l=0;l<n.length;++l){const u=n[l];if(!c3[u]&&!(o&&o[u])&&!(i&&i[u])){const f=m3(t,u);try{h3(e,u,f)}catch{}}}}return e}var g3=Symbol.for("react-redux-context"),b3=typeof globalThis<"u"?globalThis:{};function y3(){if(!R.createContext)return{};const e=b3[g3]??=new Map;let t=e.get(R.createContext);return t||(t=R.createContext(null),e.set(R.createContext,t)),t}var ST=y3(),v3=[null,null];function _3(e,t,n){am(()=>e(...t),n)}function x3(e,t,n,i,o,l){e.current=i,n.current=!1,o.current&&(o.current=null,l())}function w3(e,t,n,i,o,l,u,f,m,p,y){if(!e)return()=>{};let _=!1,x=null;const S=()=>{if(_||!f.current)return;const k=t.getState();let j,C;try{j=i(k,o.current)}catch(P){C=P,x=P}C||(x=null),j===l.current?u.current||p():(l.current=j,m.current=j,u.current=!0,y())};return n.onStateChange=S,n.trySubscribe(),S(),()=>{if(_=!0,n.tryUnsubscribe(),n.onStateChange=null,x)throw x}}function S3(e,t){return e===t}function E3(e,t,n,{pure:i,areStatesEqual:o=S3,areOwnPropsEqual:l=hg,areStatePropsEqual:u=hg,areMergedPropsEqual:f=hg,forwardRef:m=!1,context:p=ST}={}){const y=p,_=XC(e),x=WC(t),S=e3(n),T=!!e;return j=>{const C=j.displayName||j.name||"Component",P=`Connect(${C})`,N={shouldHandleStateChanges:T,displayName:P,wrappedComponentName:C,WrappedComponent:j,initMapStateToProps:_,initMapDispatchToProps:x,initMergeProps:S,areStatesEqual:o,areStatePropsEqual:u,areOwnPropsEqual:l,areMergedPropsEqual:f};function M(z){const[F,K,oe]=R.useMemo(()=>{const{reactReduxForwardedRef:je,...Me}=z;return[z.context,je,Me]},[z]),Q=R.useMemo(()=>{let je=y;return F?.Consumer,je},[F,y]),Y=R.useContext(Q),ne=!!z.store&&!!z.store.getState&&!!z.store.dispatch,ie=!!Y&&!!Y.store,Se=ne?z.store:Y.store,J=ie?Y.getServerState:Se.getState,le=R.useMemo(()=>VC(Se.dispatch,N),[Se]),[te,be]=R.useMemo(()=>{if(!T)return v3;const je=xT(Se,ne?void 0:Y.subscription),Me=je.notifyNestedSubs.bind(je);return[je,Me]},[Se,ne,Y]),Z=R.useMemo(()=>ne?Y:{...Y,subscription:te},[ne,Y,te]),G=R.useRef(void 0),B=R.useRef(oe),q=R.useRef(void 0),V=R.useRef(!1),H=R.useRef(!1),X=R.useRef(void 0);am(()=>(H.current=!0,()=>{H.current=!1}),[]);const W=R.useMemo(()=>()=>q.current&&oe===B.current?q.current:le(Se.getState(),oe),[Se,oe]),he=R.useMemo(()=>Me=>te?w3(T,Se,te,le,B,G,V,H,q,be,Me):()=>{},[te]);_3(x3,[B,G,V,oe,q,be]);let se;try{se=R.useSyncExternalStore(he,W,J?()=>le(J(),oe):W)}catch(je){throw X.current&&(je.message+=`
The error may be correlated with this previous error:
${X.current.stack}

`),je}am(()=>{X.current=void 0,q.current=void 0,G.current=se});const ve=R.useMemo(()=>R.createElement(j,{...se,ref:K}),[K,j,se]);return R.useMemo(()=>T?R.createElement(Q.Provider,{value:Z},ve):ve,[Q,ve,Z])}const $=R.memo(M);if($.WrappedComponent=j,$.displayName=M.displayName=P,m){const F=R.forwardRef(function(oe,Q){return R.createElement($,{...oe,reactReduxForwardedRef:Q})});return F.displayName=P,F.WrappedComponent=j,Ob(F,j)}return Ob($,j)}}var ET=E3;function T3(e){const{children:t,context:n,serverState:i,store:o}=e,l=R.useMemo(()=>{const m=xT(o);return{store:o,subscription:m,getServerState:i?()=>i:void 0}},[o,i]),u=R.useMemo(()=>o.getState(),[o]);am(()=>{const{subscription:m}=l;return m.onStateChange=m.notifyNestedSubs,m.trySubscribe(),u!==o.getState()&&m.notifyNestedSubs(),()=>{m.tryUnsubscribe(),m.onStateChange=void 0}},[l,u]);const f=n||ST;return R.createElement(f.Provider,{value:l},t)}var k3=T3,A3="Invariant failed";function j3(e,t){throw new Error(A3)}var is=function(t){var n=t.top,i=t.right,o=t.bottom,l=t.left,u=i-l,f=o-n,m={top:n,right:i,bottom:o,left:l,width:u,height:f,x:l,y:n,center:{x:(i+l)/2,y:(o+n)/2}};return m},hy=function(t,n){return{top:t.top-n.top,left:t.left-n.left,bottom:t.bottom+n.bottom,right:t.right+n.right}},m1=function(t,n){return{top:t.top+n.top,left:t.left+n.left,bottom:t.bottom-n.bottom,right:t.right-n.right}},N3=function(t,n){return{top:t.top+n.y,left:t.left+n.x,bottom:t.bottom+n.y,right:t.right+n.x}},fg={top:0,right:0,bottom:0,left:0},fy=function(t){var n=t.borderBox,i=t.margin,o=i===void 0?fg:i,l=t.border,u=l===void 0?fg:l,f=t.padding,m=f===void 0?fg:f,p=is(hy(n,o)),y=is(m1(n,u)),_=is(m1(y,m));return{marginBox:p,borderBox:is(n),paddingBox:y,contentBox:_,margin:o,border:u,padding:m}},Oi=function(t){var n=t.slice(0,-2),i=t.slice(-2);if(i!=="px")return 0;var o=Number(n);return isNaN(o)&&j3(),o},O3=function(){return{x:window.pageXOffset,y:window.pageYOffset}},om=function(t,n){var i=t.borderBox,o=t.border,l=t.margin,u=t.padding,f=N3(i,n);return fy({borderBox:f,border:o,margin:l,padding:u})},lm=function(t,n){return n===void 0&&(n=O3()),om(t,n)},TT=function(t,n){var i={top:Oi(n.marginTop),right:Oi(n.marginRight),bottom:Oi(n.marginBottom),left:Oi(n.marginLeft)},o={top:Oi(n.paddingTop),right:Oi(n.paddingRight),bottom:Oi(n.paddingBottom),left:Oi(n.paddingLeft)},l={top:Oi(n.borderTopWidth),right:Oi(n.borderRightWidth),bottom:Oi(n.borderBottomWidth),left:Oi(n.borderLeftWidth)};return fy({borderBox:t,margin:i,padding:o,border:l})},kT=function(t){var n=t.getBoundingClientRect(),i=window.getComputedStyle(t);return TT(n,i)},rd=function(t){var n=[],i=null,o=function(){for(var u=arguments.length,f=new Array(u),m=0;m<u;m++)f[m]=arguments[m];n=f,!i&&(i=requestAnimationFrame(function(){i=null,t.apply(void 0,n)}))};return o.cancel=function(){i&&(cancelAnimationFrame(i),i=null)},o};function cm(){return cm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},cm.apply(null,arguments)}function AT(e,t){}AT.bind(null,"warn");AT.bind(null,"error");function Za(){}function D3(e,t){return{...e,...t}}function Mi(e,t,n){const i=t.map(o=>{const l=D3(n,o.options);return e.addEventListener(o.eventName,o.fn,l),function(){e.removeEventListener(o.eventName,o.fn,l)}});return function(){i.forEach(l=>{l()})}}const M3="Invariant failed";class um extends Error{}um.prototype.toString=function(){return this.message};function ze(e,t){throw new um(M3)}class C3 extends rn.Component{constructor(...t){super(...t),this.callbacks=null,this.unbind=Za,this.onWindowError=n=>{const i=this.getCallbacks();i.isDragging()&&i.tryAbort(),n.error instanceof um&&n.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=n=>{this.callbacks=n}}componentDidMount(){this.unbind=Mi(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(t){if(t instanceof um){this.setState({});return}throw t}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}}const R3=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,dm=e=>e+1,L3=e=>`
  You have lifted an item in position ${dm(e.source.index)}
`,jT=(e,t)=>{const n=e.droppableId===t.droppableId,i=dm(e.index),o=dm(t.index);return n?`
      You have moved the item from position ${i}
      to position ${o}
    `:`
    You have moved the item from position ${i}
    in list ${e.droppableId}
    to list ${t.droppableId}
    in position ${o}
  `},NT=(e,t,n)=>t.droppableId===n.droppableId?`
      The item ${e}
      has been combined with ${n.draggableId}`:`
      The item ${e}
      in list ${t.droppableId}
      has been combined with ${n.draggableId}
      in list ${n.droppableId}
    `,B3=e=>{const t=e.destination;if(t)return jT(e.source,t);const n=e.combine;return n?NT(e.draggableId,e.source,n):"You are over an area that cannot be dropped on"},p1=e=>`
  The item has returned to its starting position
  of ${dm(e.index)}
`,P3=e=>{if(e.reason==="CANCEL")return`
      Movement cancelled.
      ${p1(e.source)}
    `;const t=e.destination,n=e.combine;return t?`
      You have dropped the item.
      ${jT(e.source,t)}
    `:n?`
      You have dropped the item.
      ${NT(e.draggableId,e.source,n)}
    `:`
    The item has been dropped while not over a drop area.
    ${p1(e.source)}
  `},Yf={dragHandleUsageInstructions:R3,onDragStart:L3,onDragUpdate:B3,onDragEnd:P3};function $3(e,t){return!!(e===t||Number.isNaN(e)&&Number.isNaN(t))}function OT(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!$3(e[n],t[n]))return!1;return!0}function At(e,t){const n=R.useState(()=>({inputs:t,result:e()}))[0],i=R.useRef(!0),o=R.useRef(n),u=i.current||!!(t&&o.current.inputs&&OT(t,o.current.inputs))?o.current:{inputs:t,result:e()};return R.useEffect(()=>{i.current=!1,o.current=u},[u]),u.result}function Je(e,t){return At(()=>e,t)}const Xn={x:0,y:0},or=(e,t)=>({x:e.x+t.x,y:e.y+t.y}),ci=(e,t)=>({x:e.x-t.x,y:e.y-t.y}),Va=(e,t)=>e.x===t.x&&e.y===t.y,Nc=e=>({x:e.x!==0?-e.x:0,y:e.y!==0?-e.y:0}),ol=(e,t,n=0)=>e==="x"?{x:t,y:n}:{x:n,y:t},id=(e,t)=>Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2),g1=(e,t)=>Math.min(...t.map(n=>id(e,n))),DT=e=>t=>({x:e(t.x),y:e(t.y)});var I3=(e,t)=>{const n=is({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return n.width<=0||n.height<=0?null:n};const xd=(e,t)=>({top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}),b1=e=>[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}],z3={top:0,right:0,bottom:0,left:0},U3=(e,t)=>t?xd(e,t.scroll.diff.displacement):e,H3=(e,t,n)=>n&&n.increasedBy?{...e,[t.end]:e[t.end]+n.increasedBy[t.line]}:e,G3=(e,t)=>t&&t.shouldClipSubject?I3(t.pageMarginBox,e):is(e);var xc=({page:e,withPlaceholder:t,axis:n,frame:i})=>{const o=U3(e.marginBox,i),l=H3(o,n,t),u=G3(l,i);return{page:e,withPlaceholder:t,active:u}},my=(e,t)=>{e.frame||ze();const n=e.frame,i=ci(t,n.scroll.initial),o=Nc(i),l={...n,scroll:{initial:n.scroll.initial,current:t,diff:{value:i,displacement:o},max:n.scroll.max}},u=xc({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:l});return{...e,frame:l,subject:u}};function Kn(e,t=OT){let n=null;function i(...o){if(n&&n.lastThis===this&&t(o,n.lastArgs))return n.lastResult;const l=e.apply(this,o);return n={lastResult:l,lastArgs:o,lastThis:this},l}return i.clear=function(){n=null},i}const MT=Kn(e=>e.reduce((t,n)=>(t[n.descriptor.id]=n,t),{})),CT=Kn(e=>e.reduce((t,n)=>(t[n.descriptor.id]=n,t),{})),Bm=Kn(e=>Object.values(e)),F3=Kn(e=>Object.values(e));var Oc=Kn((e,t)=>F3(t).filter(i=>e===i.descriptor.droppableId).sort((i,o)=>i.descriptor.index-o.descriptor.index));function py(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function Pm(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var $m=Kn((e,t)=>t.filter(n=>n.descriptor.id!==e.descriptor.id)),Y3=({isMovingForward:e,draggable:t,destination:n,insideDestination:i,previousImpact:o})=>{if(!n.isCombineEnabled||!py(o))return null;function u(S){const T={type:"COMBINE",combine:{draggableId:S,droppableId:n.descriptor.id}};return{...o,at:T}}const f=o.displaced.all,m=f.length?f[0]:null;if(e)return m?u(m):null;const p=$m(t,i);if(!m){if(!p.length)return null;const S=p[p.length-1];return u(S.descriptor.id)}const y=p.findIndex(S=>S.descriptor.id===m);y===-1&&ze();const _=y-1;if(_<0)return null;const x=p[_];return u(x.descriptor.id)},Dc=(e,t)=>e.descriptor.droppableId===t.descriptor.id;const RT={point:Xn,value:0},sd={invisible:{},visible:{},all:[]},q3={displaced:sd,displacedBy:RT,at:null};var Pi=(e,t)=>n=>e<=n&&n<=t,LT=e=>{const t=Pi(e.top,e.bottom),n=Pi(e.left,e.right);return i=>{if(t(i.top)&&t(i.bottom)&&n(i.left)&&n(i.right))return!0;const l=t(i.top)||t(i.bottom),u=n(i.left)||n(i.right);if(l&&u)return!0;const m=i.top<e.top&&i.bottom>e.bottom,p=i.left<e.left&&i.right>e.right;return m&&p?!0:m&&u||p&&l}},Z3=e=>{const t=Pi(e.top,e.bottom),n=Pi(e.left,e.right);return i=>t(i.top)&&t(i.bottom)&&n(i.left)&&n(i.right)};const gy={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},BT={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};var V3=e=>t=>{const n=Pi(t.top,t.bottom),i=Pi(t.left,t.right);return o=>e===gy?n(o.top)&&n(o.bottom):i(o.left)&&i(o.right)};const K3=(e,t)=>{const n=t.frame?t.frame.scroll.diff.displacement:Xn;return xd(e,n)},W3=(e,t,n)=>t.subject.active?n(t.subject.active)(e):!1,X3=(e,t,n)=>n(t)(e),by=({target:e,destination:t,viewport:n,withDroppableDisplacement:i,isVisibleThroughFrameFn:o})=>{const l=i?K3(e,t):e;return W3(l,t,o)&&X3(l,n,o)},J3=e=>by({...e,isVisibleThroughFrameFn:LT}),PT=e=>by({...e,isVisibleThroughFrameFn:Z3}),Q3=e=>by({...e,isVisibleThroughFrameFn:V3(e.destination.axis)}),eR=(e,t,n)=>{if(typeof n=="boolean")return n;if(!t)return!0;const{invisible:i,visible:o}=t;if(i[e])return!1;const l=o[e];return l?l.shouldAnimate:!0};function tR(e,t){const n=e.page.marginBox,i={top:t.point.y,right:0,bottom:0,left:t.point.x};return is(hy(n,i))}function ad({afterDragging:e,destination:t,displacedBy:n,viewport:i,forceShouldAnimate:o,last:l}){return e.reduce(function(f,m){const p=tR(m,n),y=m.descriptor.id;if(f.all.push(y),!J3({target:p,destination:t,viewport:i,withDroppableDisplacement:!0}))return f.invisible[m.descriptor.id]=!0,f;const x=eR(y,l,o),S={draggableId:y,shouldAnimate:x};return f.visible[y]=S,f},{all:[],visible:{},invisible:{}})}function nR(e,t){if(!e.length)return 0;const n=e[e.length-1].descriptor.index;return t.inHomeList?n:n+1}function y1({insideDestination:e,inHomeList:t,displacedBy:n,destination:i}){const o=nR(e,{inHomeList:t});return{displaced:sd,displacedBy:n,at:{type:"REORDER",destination:{droppableId:i.descriptor.id,index:o}}}}function hm({draggable:e,insideDestination:t,destination:n,viewport:i,displacedBy:o,last:l,index:u,forceShouldAnimate:f}){const m=Dc(e,n);if(u==null)return y1({insideDestination:t,inHomeList:m,displacedBy:o,destination:n});const p=t.find(T=>T.descriptor.index===u);if(!p)return y1({insideDestination:t,inHomeList:m,displacedBy:o,destination:n});const y=$m(e,t),_=t.indexOf(p),x=y.slice(_);return{displaced:ad({afterDragging:x,destination:n,displacedBy:o,last:l,viewport:i.frame,forceShouldAnimate:f}),displacedBy:o,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:u}}}}function Ka(e,t){return!!t.effected[e]}var rR=({isMovingForward:e,destination:t,draggables:n,combine:i,afterCritical:o})=>{if(!t.isCombineEnabled)return null;const l=i.draggableId,f=n[l].descriptor.index;return Ka(l,o)?e?f:f-1:e?f+1:f},iR=({isMovingForward:e,isInHomeList:t,insideDestination:n,location:i})=>{if(!n.length)return null;const o=i.index,l=e?o+1:o-1,u=n[0].descriptor.index,f=n[n.length-1].descriptor.index,m=t?f:f+1;return l<u||l>m?null:l},sR=({isMovingForward:e,isInHomeList:t,draggable:n,draggables:i,destination:o,insideDestination:l,previousImpact:u,viewport:f,afterCritical:m})=>{const p=u.at;if(p||ze(),p.type==="REORDER"){const _=iR({isMovingForward:e,isInHomeList:t,location:p.destination,insideDestination:l});return _==null?null:hm({draggable:n,insideDestination:l,destination:o,viewport:f,last:u.displaced,displacedBy:u.displacedBy,index:_})}const y=rR({isMovingForward:e,destination:o,displaced:u.displaced,draggables:i,combine:p.combine,afterCritical:m});return y==null?null:hm({draggable:n,insideDestination:l,destination:o,viewport:f,last:u.displaced,displacedBy:u.displacedBy,index:y})},aR=({displaced:e,afterCritical:t,combineWith:n,displacedBy:i})=>{const o=!!(e.visible[n]||e.invisible[n]);return Ka(n,t)?o?Xn:Nc(i.point):o?i.point:Xn},oR=({afterCritical:e,impact:t,draggables:n})=>{const i=Pm(t);i||ze();const o=i.draggableId,l=n[o].page.borderBox.center,u=aR({displaced:t.displaced,afterCritical:e,combineWith:o,displacedBy:t.displacedBy});return or(l,u)};const $T=(e,t)=>t.margin[e.start]+t.borderBox[e.size]/2,lR=(e,t)=>t.margin[e.end]+t.borderBox[e.size]/2,yy=(e,t,n)=>t[e.crossAxisStart]+n.margin[e.crossAxisStart]+n.borderBox[e.crossAxisSize]/2,v1=({axis:e,moveRelativeTo:t,isMoving:n})=>ol(e.line,t.marginBox[e.end]+$T(e,n),yy(e,t.marginBox,n)),_1=({axis:e,moveRelativeTo:t,isMoving:n})=>ol(e.line,t.marginBox[e.start]-lR(e,n),yy(e,t.marginBox,n)),cR=({axis:e,moveInto:t,isMoving:n})=>ol(e.line,t.contentBox[e.start]+$T(e,n),yy(e,t.contentBox,n));var uR=({impact:e,draggable:t,draggables:n,droppable:i,afterCritical:o})=>{const l=Oc(i.descriptor.id,n),u=t.page,f=i.axis;if(!l.length)return cR({axis:f,moveInto:i.page,isMoving:u});const{displaced:m,displacedBy:p}=e,y=m.all[0];if(y){const x=n[y];if(Ka(y,o))return _1({axis:f,moveRelativeTo:x.page,isMoving:u});const S=om(x.page,p.point);return _1({axis:f,moveRelativeTo:S,isMoving:u})}const _=l[l.length-1];if(_.descriptor.id===t.descriptor.id)return u.borderBox.center;if(Ka(_.descriptor.id,o)){const x=om(_.page,Nc(o.displacedBy.point));return v1({axis:f,moveRelativeTo:x,isMoving:u})}return v1({axis:f,moveRelativeTo:_.page,isMoving:u})},Db=(e,t)=>{const n=e.frame;return n?or(t,n.scroll.diff.displacement):t};const dR=({impact:e,draggable:t,droppable:n,draggables:i,afterCritical:o})=>{const l=t.page.borderBox.center,u=e.at;return!n||!u?l:u.type==="REORDER"?uR({impact:e,draggable:t,draggables:i,droppable:n,afterCritical:o}):oR({impact:e,draggables:i,afterCritical:o})};var Im=e=>{const t=dR(e),n=e.droppable;return n?Db(n,t):t},IT=(e,t)=>{const n=ci(t,e.scroll.initial),i=Nc(n);return{frame:is({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:n,displacement:i}}}};function x1(e,t){return e.map(n=>t[n])}function hR(e,t){for(let n=0;n<t.length;n++){const i=t[n].visible[e];if(i)return i}return null}var fR=({impact:e,viewport:t,destination:n,draggables:i,maxScrollChange:o})=>{const l=IT(t,or(t.scroll.current,o)),u=n.frame?my(n,or(n.frame.scroll.current,o)):n,f=e.displaced,m=ad({afterDragging:x1(f.all,i),destination:n,displacedBy:e.displacedBy,viewport:l.frame,last:f,forceShouldAnimate:!1}),p=ad({afterDragging:x1(f.all,i),destination:u,displacedBy:e.displacedBy,viewport:t.frame,last:f,forceShouldAnimate:!1}),y={},_={},x=[f,m,p];return f.all.forEach(T=>{const k=hR(T,x);if(k){_[T]=k;return}y[T]=!0}),{...e,displaced:{all:f.all,invisible:y,visible:_}}},mR=(e,t)=>or(e.scroll.diff.displacement,t),vy=({pageBorderBoxCenter:e,draggable:t,viewport:n})=>{const i=mR(n,e),o=ci(i,t.page.borderBox.center);return or(t.client.borderBox.center,o)},zT=({draggable:e,destination:t,newPageBorderBoxCenter:n,viewport:i,withDroppableDisplacement:o,onlyOnMainAxis:l=!1})=>{const u=ci(n,e.page.borderBox.center),m={target:xd(e.page.borderBox,u),destination:t,withDroppableDisplacement:o,viewport:i};return l?Q3(m):PT(m)},pR=({isMovingForward:e,draggable:t,destination:n,draggables:i,previousImpact:o,viewport:l,previousPageBorderBoxCenter:u,previousClientSelection:f,afterCritical:m})=>{if(!n.isEnabled)return null;const p=Oc(n.descriptor.id,i),y=Dc(t,n),_=Y3({isMovingForward:e,draggable:t,destination:n,insideDestination:p,previousImpact:o})||sR({isMovingForward:e,isInHomeList:y,draggable:t,draggables:i,destination:n,insideDestination:p,previousImpact:o,viewport:l,afterCritical:m});if(!_)return null;const x=Im({impact:_,draggable:t,droppable:n,draggables:i,afterCritical:m});if(zT({draggable:t,destination:n,newPageBorderBoxCenter:x,viewport:l.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:vy({pageBorderBoxCenter:x,draggable:t,viewport:l}),impact:_,scrollJumpRequest:null};const T=ci(x,u),k=fR({impact:_,viewport:l,destination:n,draggables:i,maxScrollChange:T});return{clientSelection:f,impact:k,scrollJumpRequest:T}};const Sr=e=>{const t=e.subject.active;return t||ze(),t};var gR=({isMovingForward:e,pageBorderBoxCenter:t,source:n,droppables:i,viewport:o})=>{const l=n.subject.active;if(!l)return null;const u=n.axis,f=Pi(l[u.start],l[u.end]),m=Bm(i).filter(y=>y!==n).filter(y=>y.isEnabled).filter(y=>!!y.subject.active).filter(y=>LT(o.frame)(Sr(y))).filter(y=>{const _=Sr(y);return e?l[u.crossAxisEnd]<_[u.crossAxisEnd]:_[u.crossAxisStart]<l[u.crossAxisStart]}).filter(y=>{const _=Sr(y),x=Pi(_[u.start],_[u.end]);return f(_[u.start])||f(_[u.end])||x(l[u.start])||x(l[u.end])}).sort((y,_)=>{const x=Sr(y)[u.crossAxisStart],S=Sr(_)[u.crossAxisStart];return e?x-S:S-x}).filter((y,_,x)=>Sr(y)[u.crossAxisStart]===Sr(x[0])[u.crossAxisStart]);if(!m.length)return null;if(m.length===1)return m[0];const p=m.filter(y=>Pi(Sr(y)[u.start],Sr(y)[u.end])(t[u.line]));return p.length===1?p[0]:p.length>1?p.sort((y,_)=>Sr(y)[u.start]-Sr(_)[u.start])[0]:m.sort((y,_)=>{const x=g1(t,b1(Sr(y))),S=g1(t,b1(Sr(_)));return x!==S?x-S:Sr(y)[u.start]-Sr(_)[u.start]})[0]};const w1=(e,t)=>{const n=e.page.borderBox.center;return Ka(e.descriptor.id,t)?ci(n,t.displacedBy.point):n},bR=(e,t)=>{const n=e.page.borderBox;return Ka(e.descriptor.id,t)?xd(n,Nc(t.displacedBy.point)):n};var yR=({pageBorderBoxCenter:e,viewport:t,destination:n,insideDestination:i,afterCritical:o})=>i.filter(u=>PT({target:bR(u,o),destination:n,viewport:t.frame,withDroppableDisplacement:!0})).sort((u,f)=>{const m=id(e,Db(n,w1(u,o))),p=id(e,Db(n,w1(f,o)));return m<p?-1:p<m?1:u.descriptor.index-f.descriptor.index})[0]||null,wd=Kn(function(t,n){const i=n[t.line];return{value:i,point:ol(t.line,i)}});const vR=(e,t,n)=>{const i=e.axis;if(e.descriptor.mode==="virtual")return ol(i.line,t[i.line]);const o=e.subject.page.contentBox[i.size],m=Oc(e.descriptor.id,n).reduce((p,y)=>p+y.client.marginBox[i.size],0)+t[i.line]-o;return m<=0?null:ol(i.line,m)},UT=(e,t)=>({...e,scroll:{...e.scroll,max:t}}),HT=(e,t,n)=>{const i=e.frame;Dc(t,e)&&ze(),e.subject.withPlaceholder&&ze();const o=wd(e.axis,t.displaceBy).point,l=vR(e,o,n),u={placeholderSize:o,increasedBy:l,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!i){const y=xc({page:e.subject.page,withPlaceholder:u,axis:e.axis,frame:e.frame});return{...e,subject:y}}const f=l?or(i.scroll.max,l):i.scroll.max,m=UT(i,f),p=xc({page:e.subject.page,withPlaceholder:u,axis:e.axis,frame:m});return{...e,subject:p,frame:m}},_R=e=>{const t=e.subject.withPlaceholder;t||ze();const n=e.frame;if(!n){const u=xc({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null});return{...e,subject:u}}const i=t.oldFrameMaxScroll;i||ze();const o=UT(n,i),l=xc({page:e.subject.page,axis:e.axis,frame:o,withPlaceholder:null});return{...e,subject:l,frame:o}};var xR=({previousPageBorderBoxCenter:e,moveRelativeTo:t,insideDestination:n,draggable:i,draggables:o,destination:l,viewport:u,afterCritical:f})=>{if(!t){if(n.length)return null;const _={displaced:sd,displacedBy:RT,at:{type:"REORDER",destination:{droppableId:l.descriptor.id,index:0}}},x=Im({impact:_,draggable:i,droppable:l,draggables:o,afterCritical:f}),S=Dc(i,l)?l:HT(l,i,o);return zT({draggable:i,destination:S,newPageBorderBoxCenter:x,viewport:u.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?_:null}const m=e[l.axis.line]<=t.page.borderBox.center[l.axis.line],p=(()=>{const _=t.descriptor.index;return t.descriptor.id===i.descriptor.id||m?_:_+1})(),y=wd(l.axis,i.displaceBy);return hm({draggable:i,insideDestination:n,destination:l,viewport:u,displacedBy:y,last:sd,index:p})},wR=({isMovingForward:e,previousPageBorderBoxCenter:t,draggable:n,isOver:i,draggables:o,droppables:l,viewport:u,afterCritical:f})=>{const m=gR({isMovingForward:e,pageBorderBoxCenter:t,source:i,droppables:l,viewport:u});if(!m)return null;const p=Oc(m.descriptor.id,o),y=yR({pageBorderBoxCenter:t,viewport:u,destination:m,insideDestination:p,afterCritical:f}),_=xR({previousPageBorderBoxCenter:t,destination:m,draggable:n,draggables:o,moveRelativeTo:y,insideDestination:p,viewport:u,afterCritical:f});if(!_)return null;const x=Im({impact:_,draggable:n,droppable:m,draggables:o,afterCritical:f});return{clientSelection:vy({pageBorderBoxCenter:x,draggable:n,viewport:u}),impact:_,scrollJumpRequest:null}},ui=e=>{const t=e.at;return t?t.type==="REORDER"?t.destination.droppableId:t.combine.droppableId:null};const SR=(e,t)=>{const n=ui(e);return n?t[n]:null};var ER=({state:e,type:t})=>{const n=SR(e.impact,e.dimensions.droppables),i=!!n,o=e.dimensions.droppables[e.critical.droppable.id],l=n||o,u=l.axis.direction,f=u==="vertical"&&(t==="MOVE_UP"||t==="MOVE_DOWN")||u==="horizontal"&&(t==="MOVE_LEFT"||t==="MOVE_RIGHT");if(f&&!i)return null;const m=t==="MOVE_DOWN"||t==="MOVE_RIGHT",p=e.dimensions.draggables[e.critical.draggable.id],y=e.current.page.borderBoxCenter,{draggables:_,droppables:x}=e.dimensions;return f?pR({isMovingForward:m,previousPageBorderBoxCenter:y,draggable:p,destination:l,draggables:_,viewport:e.viewport,previousClientSelection:e.current.client.selection,previousImpact:e.impact,afterCritical:e.afterCritical}):wR({isMovingForward:m,previousPageBorderBoxCenter:y,draggable:p,isOver:l,draggables:_,droppables:x,viewport:e.viewport,afterCritical:e.afterCritical})};function Qo(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function GT(e){const t=Pi(e.top,e.bottom),n=Pi(e.left,e.right);return function(o){return t(o.y)&&n(o.x)}}function TR(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}function kR({pageBorderBox:e,draggable:t,candidates:n}){const i=t.page.borderBox.center,o=n.map(l=>{const u=l.axis,f=ol(l.axis.line,e.center[u.line],l.page.borderBox.center[u.crossAxisLine]);return{id:l.descriptor.id,distance:id(i,f)}}).sort((l,u)=>u.distance-l.distance);return o[0]?o[0].id:null}function AR({pageBorderBox:e,draggable:t,droppables:n}){const i=Bm(n).filter(o=>{if(!o.isEnabled)return!1;const l=o.subject.active;if(!l||!TR(e,l))return!1;if(GT(l)(e.center))return!0;const u=o.axis,f=l.center[u.crossAxisLine],m=e[u.crossAxisStart],p=e[u.crossAxisEnd],y=Pi(l[u.crossAxisStart],l[u.crossAxisEnd]),_=y(m),x=y(p);return!_&&!x?!0:_?m<f:p>f});return i.length?i.length===1?i[0].descriptor.id:kR({pageBorderBox:e,draggable:t,candidates:i}):null}const FT=(e,t)=>is(xd(e,t));var jR=(e,t)=>{const n=e.frame;return n?FT(t,n.scroll.diff.value):t};function YT({displaced:e,id:t}){return!!(e.visible[t]||e.invisible[t])}function NR({draggable:e,closest:t,inHomeList:n}){return t?n&&t.descriptor.index>e.descriptor.index?t.descriptor.index-1:t.descriptor.index:null}var OR=({pageBorderBoxWithDroppableScroll:e,draggable:t,destination:n,insideDestination:i,last:o,viewport:l,afterCritical:u})=>{const f=n.axis,m=wd(n.axis,t.displaceBy),p=m.value,y=e[f.start],_=e[f.end],S=$m(t,i).find(k=>{const j=k.descriptor.id,C=k.page.borderBox.center[f.line],P=Ka(j,u),N=YT({displaced:o,id:j});return P?N?_<=C:y<C-p:N?_<=C+p:y<C})||null,T=NR({draggable:t,closest:S,inHomeList:Dc(t,n)});return hm({draggable:t,insideDestination:i,destination:n,viewport:l,last:o,displacedBy:m,index:T})};const DR=4;var MR=({draggable:e,pageBorderBoxWithDroppableScroll:t,previousImpact:n,destination:i,insideDestination:o,afterCritical:l})=>{if(!i.isCombineEnabled)return null;const u=i.axis,f=wd(i.axis,e.displaceBy),m=f.value,p=t[u.start],y=t[u.end],x=$m(e,o).find(T=>{const k=T.descriptor.id,j=T.page.borderBox,P=j[u.size]/DR,N=Ka(k,l),M=YT({displaced:n.displaced,id:k});return N?M?y>j[u.start]+P&&y<j[u.end]-P:p>j[u.start]-m+P&&p<j[u.end]-m-P:M?y>j[u.start]+m+P&&y<j[u.end]+m-P:p>j[u.start]+P&&p<j[u.end]-P});return x?{displacedBy:f,displaced:n.displaced,at:{type:"COMBINE",combine:{draggableId:x.descriptor.id,droppableId:i.descriptor.id}}}:null},qT=({pageOffset:e,draggable:t,draggables:n,droppables:i,previousImpact:o,viewport:l,afterCritical:u})=>{const f=FT(t.page.borderBox,e),m=AR({pageBorderBox:f,draggable:t,droppables:i});if(!m)return q3;const p=i[m],y=Oc(p.descriptor.id,n),_=jR(p,f);return MR({pageBorderBoxWithDroppableScroll:_,draggable:t,previousImpact:o,destination:p,insideDestination:y,afterCritical:u})||OR({pageBorderBoxWithDroppableScroll:_,draggable:t,destination:p,insideDestination:y,last:o.displaced,viewport:l,afterCritical:u})},_y=(e,t)=>({...e,[t.descriptor.id]:t});const CR=({previousImpact:e,impact:t,droppables:n})=>{const i=ui(e),o=ui(t);if(!i||i===o)return n;const l=n[i];if(!l.subject.withPlaceholder)return n;const u=_R(l);return _y(n,u)};var RR=({draggable:e,draggables:t,droppables:n,previousImpact:i,impact:o})=>{const l=CR({previousImpact:i,impact:o,droppables:n}),u=ui(o);if(!u)return l;const f=n[u];if(Dc(e,f)||f.subject.withPlaceholder)return l;const m=HT(f,e,t);return _y(l,m)},Xu=({state:e,clientSelection:t,dimensions:n,viewport:i,impact:o,scrollJumpRequest:l})=>{const u=i||e.viewport,f=n||e.dimensions,m=t||e.current.client.selection,p=ci(m,e.initial.client.selection),y={offset:p,selection:m,borderBoxCenter:or(e.initial.client.borderBoxCenter,p)},_={selection:or(y.selection,u.scroll.current),borderBoxCenter:or(y.borderBoxCenter,u.scroll.current),offset:or(y.offset,u.scroll.diff.value)},x={client:y,page:_};if(e.phase==="COLLECTING")return{...e,dimensions:f,viewport:u,current:x};const S=f.draggables[e.critical.draggable.id],T=o||qT({pageOffset:_.offset,draggable:S,draggables:f.draggables,droppables:f.droppables,previousImpact:e.impact,viewport:u,afterCritical:e.afterCritical}),k=RR({draggable:S,impact:T,previousImpact:e.impact,draggables:f.draggables,droppables:f.droppables});return{...e,current:x,dimensions:{draggables:f.draggables,droppables:k},impact:T,viewport:u,scrollJumpRequest:l||null,forceShouldAnimate:l?!1:null}};function LR(e,t){return e.map(n=>t[n])}var ZT=({impact:e,viewport:t,draggables:n,destination:i,forceShouldAnimate:o})=>{const l=e.displaced,u=LR(l.all,n),f=ad({afterDragging:u,destination:i,displacedBy:e.displacedBy,viewport:t.frame,forceShouldAnimate:o,last:l});return{...e,displaced:f}},VT=({impact:e,draggable:t,droppable:n,draggables:i,viewport:o,afterCritical:l})=>{const u=Im({impact:e,draggable:t,draggables:i,droppable:n,afterCritical:l});return vy({pageBorderBoxCenter:u,draggable:t,viewport:o})},KT=({state:e,dimensions:t,viewport:n})=>{e.movementMode!=="SNAP"&&ze();const i=e.impact,o=n||e.viewport,l=t||e.dimensions,{draggables:u,droppables:f}=l,m=u[e.critical.draggable.id],p=ui(i);p||ze();const y=f[p],_=ZT({impact:i,viewport:o,destination:y,draggables:u}),x=VT({impact:_,draggable:m,droppable:y,draggables:u,viewport:o,afterCritical:e.afterCritical});return Xu({impact:_,clientSelection:x,state:e,dimensions:l,viewport:o})},BR=e=>({index:e.index,droppableId:e.droppableId}),WT=({draggable:e,home:t,draggables:n,viewport:i})=>{const o=wd(t.axis,e.displaceBy),l=Oc(t.descriptor.id,n),u=l.indexOf(e);u===-1&&ze();const f=l.slice(u+1),m=f.reduce((x,S)=>(x[S.descriptor.id]=!0,x),{}),p={inVirtualList:t.descriptor.mode==="virtual",displacedBy:o,effected:m};return{impact:{displaced:ad({afterDragging:f,destination:t,displacedBy:o,last:null,viewport:i.frame,forceShouldAnimate:!1}),displacedBy:o,at:{type:"REORDER",destination:BR(e.descriptor)}},afterCritical:p}},PR=(e,t)=>({draggables:e.draggables,droppables:_y(e.droppables,t)}),$R=({draggable:e,offset:t,initialWindowScroll:n})=>{const i=om(e.client,t),o=lm(i,n);return{...e,placeholder:{...e.placeholder,client:i},client:i,page:o}},IR=e=>{const t=e.frame;return t||ze(),t},zR=({additions:e,updatedDroppables:t,viewport:n})=>{const i=n.scroll.diff.value;return e.map(o=>{const l=o.descriptor.droppableId,u=t[l],m=IR(u).scroll.diff.value,p=or(i,m);return $R({draggable:o,offset:p,initialWindowScroll:n.scroll.initial})})},UR=({state:e,published:t})=>{const n=t.modified.map(C=>{const P=e.dimensions.droppables[C.droppableId];return my(P,C.scroll)}),i={...e.dimensions.droppables,...MT(n)},o=CT(zR({additions:t.additions,updatedDroppables:i,viewport:e.viewport})),l={...e.dimensions.draggables,...o};t.removals.forEach(C=>{delete l[C]});const u={droppables:i,draggables:l},f=ui(e.impact),m=f?u.droppables[f]:null,p=u.draggables[e.critical.draggable.id],y=u.droppables[e.critical.droppable.id],{impact:_,afterCritical:x}=WT({draggable:p,home:y,draggables:l,viewport:e.viewport}),S=m&&m.isCombineEnabled?e.impact:_,T=qT({pageOffset:e.current.page.offset,draggable:u.draggables[e.critical.draggable.id],draggables:u.draggables,droppables:u.droppables,previousImpact:S,viewport:e.viewport,afterCritical:x}),k={...e,phase:"DRAGGING",impact:T,onLiftImpact:_,dimensions:u,afterCritical:x,forceShouldAnimate:!1};return e.phase==="COLLECTING"?k:{...k,phase:"DROP_PENDING",reason:e.reason,isWaiting:!1}};const Mb=e=>e.movementMode==="SNAP",mg=(e,t,n)=>{const i=PR(e.dimensions,t);return!Mb(e)||n?Xu({state:e,dimensions:i}):KT({state:e,dimensions:i})};function pg(e){return e.isDragging&&e.movementMode==="SNAP"?{...e,scrollJumpRequest:null}:e}const S1={phase:"IDLE",completed:null,shouldFlush:!1};var HR=(e=S1,t)=>{if(t.type==="FLUSH")return{...S1,shouldFlush:!0};if(t.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&ze();const{critical:n,clientSelection:i,viewport:o,dimensions:l,movementMode:u}=t.payload,f=l.draggables[n.draggable.id],m=l.droppables[n.droppable.id],p={selection:i,borderBoxCenter:f.client.borderBox.center,offset:Xn},y={client:p,page:{selection:or(p.selection,o.scroll.initial),borderBoxCenter:or(p.selection,o.scroll.initial),offset:or(p.selection,o.scroll.diff.value)}},_=Bm(l.droppables).every(k=>!k.isFixedOnPage),{impact:x,afterCritical:S}=WT({draggable:f,home:m,draggables:l.draggables,viewport:o});return{phase:"DRAGGING",isDragging:!0,critical:n,movementMode:u,dimensions:l,initial:y,current:y,isWindowScrollAllowed:_,impact:x,afterCritical:S,onLiftImpact:x,viewport:o,scrollJumpRequest:null,forceShouldAnimate:null}}if(t.type==="COLLECTION_STARTING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"?e:(e.phase!=="DRAGGING"&&ze(),{...e,phase:"COLLECTING"});if(t.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||ze(),UR({state:e,published:t.payload});if(t.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;Qo(e)||ze();const{client:n}=t.payload;return Va(n,e.current.client.selection)?e:Xu({state:e,clientSelection:n,impact:Mb(e)?e.impact:null})}if(t.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return pg(e);Qo(e)||ze();const{id:n,newScroll:i}=t.payload,o=e.dimensions.droppables[n];if(!o)return e;const l=my(o,i);return mg(e,l,!1)}if(t.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;Qo(e)||ze();const{id:n,isEnabled:i}=t.payload,o=e.dimensions.droppables[n];o||ze(),o.isEnabled===i&&ze();const l={...o,isEnabled:i};return mg(e,l,!0)}if(t.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;Qo(e)||ze();const{id:n,isCombineEnabled:i}=t.payload,o=e.dimensions.droppables[n];o||ze(),o.isCombineEnabled===i&&ze();const l={...o,isCombineEnabled:i};return mg(e,l,!0)}if(t.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;Qo(e)||ze(),e.isWindowScrollAllowed||ze();const n=t.payload.newScroll;if(Va(e.viewport.scroll.current,n))return pg(e);const i=IT(e.viewport,n);return Mb(e)?KT({state:e,viewport:i}):Xu({state:e,viewport:i})}if(t.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!Qo(e))return e;const n=t.payload.maxScroll;if(Va(n,e.viewport.scroll.max))return e;const i={...e.viewport,scroll:{...e.viewport.scroll,max:n}};return{...e,viewport:i}}if(t.type==="MOVE_UP"||t.type==="MOVE_DOWN"||t.type==="MOVE_LEFT"||t.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&ze();const n=ER({state:e,type:t.type});return n?Xu({state:e,impact:n.impact,clientSelection:n.clientSelection,scrollJumpRequest:n.scrollJumpRequest}):e}if(t.type==="DROP_PENDING"){const n=t.payload.reason;return e.phase!=="COLLECTING"&&ze(),{...e,phase:"DROP_PENDING",isWaiting:!0,reason:n}}if(t.type==="DROP_ANIMATE"){const{completed:n,dropDuration:i,newHomeClientOffset:o}=t.payload;return e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||ze(),{phase:"DROP_ANIMATING",completed:n,dropDuration:i,newHomeClientOffset:o,dimensions:e.dimensions}}if(t.type==="DROP_COMPLETE"){const{completed:n}=t.payload;return{phase:"IDLE",completed:n,shouldFlush:!1}}return e};function Pt(e,t){return e instanceof Object&&"type"in e&&e.type===t}const GR=e=>({type:"BEFORE_INITIAL_CAPTURE",payload:e}),FR=e=>({type:"LIFT",payload:e}),YR=e=>({type:"INITIAL_PUBLISH",payload:e}),qR=e=>({type:"PUBLISH_WHILE_DRAGGING",payload:e}),ZR=()=>({type:"COLLECTION_STARTING",payload:null}),VR=e=>({type:"UPDATE_DROPPABLE_SCROLL",payload:e}),KR=e=>({type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}),WR=e=>({type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}),XT=e=>({type:"MOVE",payload:e}),XR=e=>({type:"MOVE_BY_WINDOW_SCROLL",payload:e}),JR=e=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}),QR=()=>({type:"MOVE_UP",payload:null}),e5=()=>({type:"MOVE_DOWN",payload:null}),t5=()=>({type:"MOVE_RIGHT",payload:null}),n5=()=>({type:"MOVE_LEFT",payload:null}),xy=()=>({type:"FLUSH",payload:null}),r5=e=>({type:"DROP_ANIMATE",payload:e}),wy=e=>({type:"DROP_COMPLETE",payload:e}),JT=e=>({type:"DROP",payload:e}),i5=e=>({type:"DROP_PENDING",payload:e}),QT=()=>({type:"DROP_ANIMATION_FINISHED",payload:null});var s5=e=>({getState:t,dispatch:n})=>i=>o=>{if(!Pt(o,"LIFT")){i(o);return}const{id:l,clientSelection:u,movementMode:f}=o.payload,m=t();m.phase==="DROP_ANIMATING"&&n(wy({completed:m.completed})),t().phase!=="IDLE"&&ze(),n(xy()),n(GR({draggableId:l,movementMode:f}));const y={draggableId:l,scrollOptions:{shouldPublishImmediately:f==="SNAP"}},{critical:_,dimensions:x,viewport:S}=e.startPublishing(y);n(YR({critical:_,dimensions:x,clientSelection:u,movementMode:f,viewport:S}))},a5=e=>()=>t=>n=>{Pt(n,"INITIAL_PUBLISH")&&e.dragging(),Pt(n,"DROP_ANIMATE")&&e.dropping(n.payload.completed.result.reason),(Pt(n,"FLUSH")||Pt(n,"DROP_COMPLETE"))&&e.resting(),t(n)};const Sy={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},od={opacity:{drop:0,combining:.7},scale:{drop:.75}},ek={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},Fo=`${ek.outOfTheWay}s ${Sy.outOfTheWay}`,Ju={fluid:`opacity ${Fo}`,snap:`transform ${Fo}, opacity ${Fo}`,drop:e=>{const t=`${e}s ${Sy.drop}`;return`transform ${t}, opacity ${t}`},outOfTheWay:`transform ${Fo}`,placeholder:`height ${Fo}, width ${Fo}, margin ${Fo}`},E1=e=>Va(e,Xn)?void 0:`translate(${e.x}px, ${e.y}px)`,Cb={moveTo:E1,drop:(e,t)=>{const n=E1(e);if(n)return t?`${n} scale(${od.scale.drop})`:n}},{minDropTime:Rb,maxDropTime:tk}=ek,o5=tk-Rb,T1=1500,l5=.6;var c5=({current:e,destination:t,reason:n})=>{const i=id(e,t);if(i<=0)return Rb;if(i>=T1)return tk;const o=i/T1,l=Rb+o5*o,u=n==="CANCEL"?l*l5:l;return Number(u.toFixed(2))},u5=({impact:e,draggable:t,dimensions:n,viewport:i,afterCritical:o})=>{const{draggables:l,droppables:u}=n,f=ui(e),m=f?u[f]:null,p=u[t.descriptor.droppableId],y=VT({impact:e,draggable:t,draggables:l,afterCritical:o,droppable:m||p,viewport:i});return ci(y,t.client.borderBox.center)},d5=({draggables:e,reason:t,lastImpact:n,home:i,viewport:o,onLiftImpact:l})=>!n.at||t!=="DROP"?{impact:ZT({draggables:e,impact:l,destination:i,viewport:o,forceShouldAnimate:!0}),didDropInsideDroppable:!1}:n.at.type==="REORDER"?{impact:n,didDropInsideDroppable:!0}:{impact:{...n,displaced:sd},didDropInsideDroppable:!0};const h5=({getState:e,dispatch:t})=>n=>i=>{if(!Pt(i,"DROP")){n(i);return}const o=e(),l=i.payload.reason;if(o.phase==="COLLECTING"){t(i5({reason:l}));return}if(o.phase==="IDLE")return;o.phase==="DROP_PENDING"&&o.isWaiting&&ze(),o.phase==="DRAGGING"||o.phase==="DROP_PENDING"||ze();const f=o.critical,m=o.dimensions,p=m.draggables[o.critical.draggable.id],{impact:y,didDropInsideDroppable:_}=d5({reason:l,lastImpact:o.impact,afterCritical:o.afterCritical,onLiftImpact:o.onLiftImpact,home:o.dimensions.droppables[o.critical.droppable.id],viewport:o.viewport,draggables:o.dimensions.draggables}),x=_?py(y):null,S=_?Pm(y):null,T={index:f.draggable.index,droppableId:f.droppable.id},k={draggableId:p.descriptor.id,type:p.descriptor.type,source:T,reason:l,mode:o.movementMode,destination:x,combine:S},j=u5({impact:y,draggable:p,dimensions:m,viewport:o.viewport,afterCritical:o.afterCritical}),C={critical:o.critical,afterCritical:o.afterCritical,result:k,impact:y};if(!(!Va(o.current.client.offset,j)||!!k.combine)){t(wy({completed:C}));return}const N=c5({current:o.current.client.offset,destination:j,reason:l});t(r5({newHomeClientOffset:j,dropDuration:N,completed:C}))};var nk=()=>({x:window.pageXOffset,y:window.pageYOffset});function f5(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:t=>{t.target!==window&&t.target!==window.document||e()}}}function m5({onWindowScroll:e}){function t(){e(nk())}const n=rd(t),i=f5(n);let o=Za;function l(){return o!==Za}function u(){l()&&ze(),o=Mi(window,[i])}function f(){l()||ze(),n.cancel(),o(),o=Za}return{start:u,stop:f,isActive:l}}const p5=e=>Pt(e,"DROP_COMPLETE")||Pt(e,"DROP_ANIMATE")||Pt(e,"FLUSH"),g5=e=>{const t=m5({onWindowScroll:n=>{e.dispatch(XR({newScroll:n}))}});return n=>i=>{!t.isActive()&&Pt(i,"INITIAL_PUBLISH")&&t.start(),t.isActive()&&p5(i)&&t.stop(),n(i)}};var b5=e=>{let t=!1,n=!1;const i=setTimeout(()=>{n=!0}),o=l=>{t||n||(t=!0,e(l),clearTimeout(i))};return o.wasCalled=()=>t,o},y5=()=>{const e=[],t=o=>{const l=e.findIndex(f=>f.timerId===o);l===-1&&ze();const[u]=e.splice(l,1);u.callback()};return{add:o=>{const l=setTimeout(()=>t(l)),u={timerId:l,callback:o};e.push(u)},flush:()=>{if(!e.length)return;const o=[...e];e.length=0,o.forEach(l=>{clearTimeout(l.timerId),l.callback()})}}};const v5=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.droppableId===t.droppableId&&e.index===t.index,_5=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.draggableId===t.draggableId&&e.droppableId===t.droppableId,x5=(e,t)=>{if(e===t)return!0;const n=e.draggable.id===t.draggable.id&&e.draggable.droppableId===t.draggable.droppableId&&e.draggable.type===t.draggable.type&&e.draggable.index===t.draggable.index,i=e.droppable.id===t.droppable.id&&e.droppable.type===t.droppable.type;return n&&i},Ru=(e,t)=>{t()},rf=(e,t)=>({draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:t});function gg(e,t,n,i){if(!e){n(i(t));return}const o=b5(n);e(t,{announce:o}),o.wasCalled()||n(i(t))}var w5=(e,t)=>{const n=y5();let i=null;const o=(_,x)=>{i&&ze(),Ru("onBeforeCapture",()=>{const S=e().onBeforeCapture;S&&S({draggableId:_,mode:x})})},l=(_,x)=>{i&&ze(),Ru("onBeforeDragStart",()=>{const S=e().onBeforeDragStart;S&&S(rf(_,x))})},u=(_,x)=>{i&&ze();const S=rf(_,x);i={mode:x,lastCritical:_,lastLocation:S.source,lastCombine:null},n.add(()=>{Ru("onDragStart",()=>gg(e().onDragStart,S,t,Yf.onDragStart))})},f=(_,x)=>{const S=py(x),T=Pm(x);i||ze();const k=!x5(_,i.lastCritical);k&&(i.lastCritical=_);const j=!v5(i.lastLocation,S);j&&(i.lastLocation=S);const C=!_5(i.lastCombine,T);if(C&&(i.lastCombine=T),!k&&!j&&!C)return;const P={...rf(_,i.mode),combine:T,destination:S};n.add(()=>{Ru("onDragUpdate",()=>gg(e().onDragUpdate,P,t,Yf.onDragUpdate))})},m=()=>{i||ze(),n.flush()},p=_=>{i||ze(),i=null,Ru("onDragEnd",()=>gg(e().onDragEnd,_,t,Yf.onDragEnd))};return{beforeCapture:o,beforeStart:l,start:u,update:f,flush:m,drop:p,abort:()=>{if(!i)return;const _={...rf(i.lastCritical,i.mode),combine:null,destination:null,reason:"CANCEL"};p(_)}}},S5=(e,t)=>{const n=w5(e,t);return i=>o=>l=>{if(Pt(l,"BEFORE_INITIAL_CAPTURE")){n.beforeCapture(l.payload.draggableId,l.payload.movementMode);return}if(Pt(l,"INITIAL_PUBLISH")){const f=l.payload.critical;n.beforeStart(f,l.payload.movementMode),o(l),n.start(f,l.payload.movementMode);return}if(Pt(l,"DROP_COMPLETE")){const f=l.payload.completed.result;n.flush(),o(l),n.drop(f);return}if(o(l),Pt(l,"FLUSH")){n.abort();return}const u=i.getState();u.phase==="DRAGGING"&&n.update(u.critical,u.impact)}};const E5=e=>t=>n=>{if(!Pt(n,"DROP_ANIMATION_FINISHED")){t(n);return}const i=e.getState();i.phase!=="DROP_ANIMATING"&&ze(),e.dispatch(wy({completed:i.completed}))},T5=e=>{let t=null,n=null;function i(){n&&(cancelAnimationFrame(n),n=null),t&&(t(),t=null)}return o=>l=>{if((Pt(l,"FLUSH")||Pt(l,"DROP_COMPLETE")||Pt(l,"DROP_ANIMATION_FINISHED"))&&i(),o(l),!Pt(l,"DROP_ANIMATE"))return;const u={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){e.getState().phase==="DROP_ANIMATING"&&e.dispatch(QT())}};n=requestAnimationFrame(()=>{n=null,t=Mi(window,[u])})}};var k5=e=>()=>t=>n=>{(Pt(n,"DROP_COMPLETE")||Pt(n,"FLUSH")||Pt(n,"DROP_ANIMATE"))&&e.stopPublishing(),t(n)},A5=e=>{let t=!1;return()=>n=>i=>{if(Pt(i,"INITIAL_PUBLISH")){t=!0,e.tryRecordFocus(i.payload.critical.draggable.id),n(i),e.tryRestoreFocusRecorded();return}if(n(i),!!t){if(Pt(i,"FLUSH")){t=!1,e.tryRestoreFocusRecorded();return}if(Pt(i,"DROP_COMPLETE")){t=!1;const o=i.payload.completed.result;o.combine&&e.tryShiftRecord(o.draggableId,o.combine.draggableId),e.tryRestoreFocusRecorded()}}}};const j5=e=>Pt(e,"DROP_COMPLETE")||Pt(e,"DROP_ANIMATE")||Pt(e,"FLUSH");var N5=e=>t=>n=>i=>{if(j5(i)){e.stop(),n(i);return}if(Pt(i,"INITIAL_PUBLISH")){n(i);const o=t.getState();o.phase!=="DRAGGING"&&ze(),e.start(o);return}n(i),e.scroll(t.getState())};const O5=e=>t=>n=>{if(t(n),!Pt(n,"PUBLISH_WHILE_DRAGGING"))return;const i=e.getState();i.phase==="DROP_PENDING"&&(i.isWaiting||e.dispatch(JT({reason:i.reason})))},D5=yT;var M5=({dimensionMarshal:e,focusMarshal:t,styleMarshal:n,getResponders:i,announce:o,autoScroller:l})=>bT(HR,D5(NC(a5(n),k5(e),s5(e),h5,E5,T5,O5,N5(l),g5,A5(t),S5(i,o))));const bg=()=>({additions:{},removals:{},modified:{}});function C5({registry:e,callbacks:t}){let n=bg(),i=null;const o=()=>{i||(t.collectionStarting(),i=requestAnimationFrame(()=>{i=null;const{additions:m,removals:p,modified:y}=n,_=Object.keys(m).map(T=>e.draggable.getById(T).getDimension(Xn)).sort((T,k)=>T.descriptor.index-k.descriptor.index),x=Object.keys(y).map(T=>{const j=e.droppable.getById(T).callbacks.getScrollWhileDragging();return{droppableId:T,scroll:j}}),S={additions:_,removals:Object.keys(p),modified:x};n=bg(),t.publish(S)}))};return{add:m=>{const p=m.descriptor.id;n.additions[p]=m,n.modified[m.descriptor.droppableId]=!0,n.removals[p]&&delete n.removals[p],o()},remove:m=>{const p=m.descriptor;n.removals[p.id]=!0,n.modified[p.droppableId]=!0,n.additions[p.id]&&delete n.additions[p.id],o()},stop:()=>{i&&(cancelAnimationFrame(i),i=null,n=bg())}}}var rk=({scrollHeight:e,scrollWidth:t,height:n,width:i})=>{const o=ci({x:t,y:e},{x:i,y:n});return{x:Math.max(0,o.x),y:Math.max(0,o.y)}},ik=()=>{const e=document.documentElement;return e||ze(),e},sk=()=>{const e=ik();return rk({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})},R5=()=>{const e=nk(),t=sk(),n=e.y,i=e.x,o=ik(),l=o.clientWidth,u=o.clientHeight,f=i+l,m=n+u;return{frame:is({top:n,left:i,right:f,bottom:m}),scroll:{initial:e,current:e,max:t,diff:{value:Xn,displacement:Xn}}}},L5=({critical:e,scrollOptions:t,registry:n})=>{const i=R5(),o=i.scroll.current,l=e.droppable,u=n.droppable.getAllByType(l.type).map(y=>y.callbacks.getDimensionAndWatchScroll(o,t)),f=n.draggable.getAllByType(e.draggable.type).map(y=>y.getDimension(o));return{dimensions:{draggables:CT(f),droppables:MT(u)},critical:e,viewport:i}};function k1(e,t,n){return!(n.descriptor.id===t.id||n.descriptor.type!==t.type||e.droppable.getById(n.descriptor.droppableId).descriptor.mode!=="virtual")}var B5=(e,t)=>{let n=null;const i=C5({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),o=(x,S)=>{e.droppable.exists(x)||ze(),n&&t.updateDroppableIsEnabled({id:x,isEnabled:S})},l=(x,S)=>{n&&(e.droppable.exists(x)||ze(),t.updateDroppableIsCombineEnabled({id:x,isCombineEnabled:S}))},u=(x,S)=>{n&&(e.droppable.exists(x)||ze(),t.updateDroppableScroll({id:x,newScroll:S}))},f=(x,S)=>{n&&e.droppable.getById(x).callbacks.scroll(S)},m=()=>{if(!n)return;i.stop();const x=n.critical.droppable;e.droppable.getAllByType(x.type).forEach(S=>S.callbacks.dragStopped()),n.unsubscribe(),n=null},p=x=>{n||ze();const S=n.critical.draggable;x.type==="ADDITION"&&k1(e,S,x.value)&&i.add(x.value),x.type==="REMOVAL"&&k1(e,S,x.value)&&i.remove(x.value)};return{updateDroppableIsEnabled:o,updateDroppableIsCombineEnabled:l,scrollDroppable:f,updateDroppableScroll:u,startPublishing:x=>{n&&ze();const S=e.draggable.getById(x.draggableId),T=e.droppable.getById(S.descriptor.droppableId),k={draggable:S.descriptor,droppable:T.descriptor},j=e.subscribe(p);return n={critical:k,unsubscribe:j},L5({critical:k,registry:e,scrollOptions:x.scrollOptions})},stopPublishing:m}},ak=(e,t)=>e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===t?!1:e.completed.result.reason==="DROP",P5=e=>{window.scrollBy(e.x,e.y)};const $5=Kn(e=>Bm(e).filter(t=>!(!t.isEnabled||!t.frame))),I5=(e,t)=>$5(t).find(i=>(i.frame||ze(),GT(i.frame.pageMarginBox)(e)))||null;var z5=({center:e,destination:t,droppables:n})=>{if(t){const o=n[t];return o.frame?o:null}return I5(e,n)};const ld={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:e=>e**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1};var U5=(e,t,n=()=>ld)=>{const i=n(),o=e[t.size]*i.startFromPercentage,l=e[t.size]*i.maxScrollAtPercentage;return{startScrollingFrom:o,maxScrollValueAt:l}},ok=({startOfRange:e,endOfRange:t,current:n})=>{const i=t-e;return i===0?0:(n-e)/i},Ey=1,H5=(e,t,n=()=>ld)=>{const i=n();if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return i.maxPixelScroll;if(e===t.startScrollingFrom)return Ey;const l=1-ok({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),u=i.maxPixelScroll*i.ease(l);return Math.ceil(u)},G5=(e,t,n)=>{const i=n(),o=i.durationDampening.accelerateAt,l=i.durationDampening.stopDampeningAt,u=t,f=l,p=Date.now()-u;if(p>=l)return e;if(p<o)return Ey;const y=ok({startOfRange:o,endOfRange:f,current:p}),_=e*i.ease(y);return Math.ceil(_)},A1=({distanceToEdge:e,thresholds:t,dragStartTime:n,shouldUseTimeDampening:i,getAutoScrollerOptions:o})=>{const l=H5(e,t,o);return l===0?0:i?Math.max(G5(l,n,o),Ey):l},j1=({container:e,distanceToEdges:t,dragStartTime:n,axis:i,shouldUseTimeDampening:o,getAutoScrollerOptions:l})=>{const u=U5(e,i,l);return t[i.end]<t[i.start]?A1({distanceToEdge:t[i.end],thresholds:u,dragStartTime:n,shouldUseTimeDampening:o,getAutoScrollerOptions:l}):-1*A1({distanceToEdge:t[i.start],thresholds:u,dragStartTime:n,shouldUseTimeDampening:o,getAutoScrollerOptions:l})},F5=({container:e,subject:t,proposedScroll:n})=>{const i=t.height>e.height,o=t.width>e.width;return!o&&!i?n:o&&i?null:{x:o?0:n.x,y:i?0:n.y}};const Y5=DT(e=>e===0?0:e);var lk=({dragStartTime:e,container:t,subject:n,center:i,shouldUseTimeDampening:o,getAutoScrollerOptions:l})=>{const u={top:i.y-t.top,right:t.right-i.x,bottom:t.bottom-i.y,left:i.x-t.left},f=j1({container:t,distanceToEdges:u,dragStartTime:e,axis:gy,shouldUseTimeDampening:o,getAutoScrollerOptions:l}),m=j1({container:t,distanceToEdges:u,dragStartTime:e,axis:BT,shouldUseTimeDampening:o,getAutoScrollerOptions:l}),p=Y5({x:m,y:f});if(Va(p,Xn))return null;const y=F5({container:t,subject:n,proposedScroll:p});return y?Va(y,Xn)?null:y:null};const q5=DT(e=>e===0?0:e>0?1:-1),Ty=(()=>{const e=(t,n)=>t<0?t:t>n?t-n:0;return({current:t,max:n,change:i})=>{const o=or(t,i),l={x:e(o.x,n.x),y:e(o.y,n.y)};return Va(l,Xn)?null:l}})(),ck=({max:e,current:t,change:n})=>{const i={x:Math.max(t.x,e.x),y:Math.max(t.y,e.y)},o=q5(n),l=Ty({max:i,current:t,change:o});return!l||o.x!==0&&l.x===0||o.y!==0&&l.y===0},ky=(e,t)=>ck({current:e.scroll.current,max:e.scroll.max,change:t}),Z5=(e,t)=>{if(!ky(e,t))return null;const n=e.scroll.max,i=e.scroll.current;return Ty({current:i,max:n,change:t})},Ay=(e,t)=>{const n=e.frame;return n?ck({current:n.scroll.current,max:n.scroll.max,change:t}):!1},V5=(e,t)=>{const n=e.frame;return!n||!Ay(e,t)?null:Ty({current:n.scroll.current,max:n.scroll.max,change:t})};var K5=({viewport:e,subject:t,center:n,dragStartTime:i,shouldUseTimeDampening:o,getAutoScrollerOptions:l})=>{const u=lk({dragStartTime:i,container:e.frame,subject:t,center:n,shouldUseTimeDampening:o,getAutoScrollerOptions:l});return u&&ky(e,u)?u:null},W5=({droppable:e,subject:t,center:n,dragStartTime:i,shouldUseTimeDampening:o,getAutoScrollerOptions:l})=>{const u=e.frame;if(!u)return null;const f=lk({dragStartTime:i,container:u.pageMarginBox,subject:t,center:n,shouldUseTimeDampening:o,getAutoScrollerOptions:l});return f&&Ay(e,f)?f:null},N1=({state:e,dragStartTime:t,shouldUseTimeDampening:n,scrollWindow:i,scrollDroppable:o,getAutoScrollerOptions:l})=>{const u=e.current.page.borderBoxCenter,m=e.dimensions.draggables[e.critical.draggable.id].page.marginBox;if(e.isWindowScrollAllowed){const _=e.viewport,x=K5({dragStartTime:t,viewport:_,subject:m,center:u,shouldUseTimeDampening:n,getAutoScrollerOptions:l});if(x){i(x);return}}const p=z5({center:u,destination:ui(e.impact),droppables:e.dimensions.droppables});if(!p)return;const y=W5({dragStartTime:t,droppable:p,subject:m,center:u,shouldUseTimeDampening:n,getAutoScrollerOptions:l});y&&o(p.descriptor.id,y)},X5=({scrollWindow:e,scrollDroppable:t,getAutoScrollerOptions:n=()=>ld})=>{const i=rd(e),o=rd(t);let l=null;const u=p=>{l||ze();const{shouldUseTimeDampening:y,dragStartTime:_}=l;N1({state:p,scrollWindow:i,scrollDroppable:o,dragStartTime:_,shouldUseTimeDampening:y,getAutoScrollerOptions:n})};return{start:p=>{l&&ze();const y=Date.now();let _=!1;const x=()=>{_=!0};N1({state:p,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:x,scrollDroppable:x,getAutoScrollerOptions:n}),l={dragStartTime:y,shouldUseTimeDampening:_},_&&u(p)},stop:()=>{l&&(i.cancel(),o.cancel(),l=null)},scroll:u}},J5=({move:e,scrollDroppable:t,scrollWindow:n})=>{const i=(f,m)=>{const p=or(f.current.client.selection,m);e({client:p})},o=(f,m)=>{if(!Ay(f,m))return m;const p=V5(f,m);if(!p)return t(f.descriptor.id,m),null;const y=ci(m,p);return t(f.descriptor.id,y),ci(m,y)},l=(f,m,p)=>{if(!f||!ky(m,p))return p;const y=Z5(m,p);if(!y)return n(p),null;const _=ci(p,y);return n(_),ci(p,_)};return f=>{const m=f.scrollJumpRequest;if(!m)return;const p=ui(f.impact);p||ze();const y=o(f.dimensions.droppables[p],m);if(!y)return;const _=f.viewport,x=l(f.isWindowScrollAllowed,_,y);x&&i(f,x)}},Q5=({scrollDroppable:e,scrollWindow:t,move:n,getAutoScrollerOptions:i})=>{const o=X5({scrollWindow:t,scrollDroppable:e,getAutoScrollerOptions:i}),l=J5({move:n,scrollWindow:t,scrollDroppable:e});return{scroll:m=>{if(!(i().disabled||m.phase!=="DRAGGING")){if(m.movementMode==="FLUID"){o.scroll(m);return}m.scrollJumpRequest&&l(m)}},start:o.start,stop:o.stop}};const wc="data-rfd",Sc=(()=>{const e=`${wc}-drag-handle`;return{base:e,draggableId:`${e}-draggable-id`,contextId:`${e}-context-id`}})(),Lb=(()=>{const e=`${wc}-draggable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),eL=(()=>{const e=`${wc}-droppable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),O1={contextId:`${wc}-scroll-container-context-id`},tL=e=>t=>`[${t}="${e}"]`,Lu=(e,t)=>e.map(n=>{const i=n.styles[t];return i?`${n.selector} { ${i} }`:""}).join(" "),nL="pointer-events: none;";var rL=e=>{const t=tL(e),n=(()=>{const f=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:t(Sc.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:f,dragging:nL,dropAnimating:f}}})(),i=(()=>{const f=`
      transition: ${Ju.outOfTheWay};
    `;return{selector:t(Lb.contextId),styles:{dragging:f,dropAnimating:f,userCancel:f}}})(),o={selector:t(eL.contextId),styles:{always:"overflow-anchor: none;"}},u=[i,n,o,{selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}}];return{always:Lu(u,"always"),resting:Lu(u,"resting"),dragging:Lu(u,"dragging"),dropAnimating:Lu(u,"dropAnimating"),userCancel:Lu(u,"userCancel")}};const di=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?R.useLayoutEffect:R.useEffect,yg=()=>{const e=document.querySelector("head");return e||ze(),e},D1=e=>{const t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.type="text/css",t};function iL(e,t){const n=At(()=>rL(e),[e]),i=R.useRef(null),o=R.useRef(null),l=Je(Kn(_=>{const x=o.current;x||ze(),x.textContent=_}),[]),u=Je(_=>{const x=i.current;x||ze(),x.textContent=_},[]);di(()=>{!i.current&&!o.current||ze();const _=D1(t),x=D1(t);return i.current=_,o.current=x,_.setAttribute(`${wc}-always`,e),x.setAttribute(`${wc}-dynamic`,e),yg().appendChild(_),yg().appendChild(x),u(n.always),l(n.resting),()=>{const S=T=>{const k=T.current;k||ze(),yg().removeChild(k),T.current=null};S(i),S(o)}},[t,u,l,n.always,n.resting,e]);const f=Je(()=>l(n.dragging),[l,n.dragging]),m=Je(_=>{if(_==="DROP"){l(n.dropAnimating);return}l(n.userCancel)},[l,n.dropAnimating,n.userCancel]),p=Je(()=>{o.current&&l(n.resting)},[l,n.resting]);return At(()=>({dragging:f,dropping:m,resting:p}),[f,m,p])}function uk(e,t){return Array.from(e.querySelectorAll(t))}var dk=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView?e.ownerDocument.defaultView:window;function zm(e){return e instanceof dk(e).HTMLElement}function sL(e,t){const n=`[${Sc.contextId}="${e}"]`,i=uk(document,n);if(!i.length)return null;const o=i.find(l=>l.getAttribute(Sc.draggableId)===t);return!o||!zm(o)?null:o}function aL(e){const t=R.useRef({}),n=R.useRef(null),i=R.useRef(null),o=R.useRef(!1),l=Je(function(x,S){const T={id:x,focus:S};return t.current[x]=T,function(){const j=t.current;j[x]!==T&&delete j[x]}},[]),u=Je(function(x){const S=sL(e,x);S&&S!==document.activeElement&&S.focus()},[e]),f=Je(function(x,S){n.current===x&&(n.current=S)},[]),m=Je(function(){i.current||o.current&&(i.current=requestAnimationFrame(()=>{i.current=null;const x=n.current;x&&u(x)}))},[u]),p=Je(function(x){n.current=null;const S=document.activeElement;S&&S.getAttribute(Sc.draggableId)===x&&(n.current=x)},[]);return di(()=>(o.current=!0,function(){o.current=!1;const x=i.current;x&&cancelAnimationFrame(x)}),[]),At(()=>({register:l,tryRecordFocus:p,tryRestoreFocusRecorded:m,tryShiftRecord:f}),[l,p,m,f])}function oL(){const e={draggables:{},droppables:{}},t=[];function n(_){return t.push(_),function(){const S=t.indexOf(_);S!==-1&&t.splice(S,1)}}function i(_){t.length&&t.forEach(x=>x(_))}function o(_){return e.draggables[_]||null}function l(_){const x=o(_);return x||ze(),x}const u={register:_=>{e.draggables[_.descriptor.id]=_,i({type:"ADDITION",value:_})},update:(_,x)=>{const S=e.draggables[x.descriptor.id];S&&S.uniqueId===_.uniqueId&&(delete e.draggables[x.descriptor.id],e.draggables[_.descriptor.id]=_)},unregister:_=>{const x=_.descriptor.id,S=o(x);S&&_.uniqueId===S.uniqueId&&(delete e.draggables[x],e.droppables[_.descriptor.droppableId]&&i({type:"REMOVAL",value:_}))},getById:l,findById:o,exists:_=>!!o(_),getAllByType:_=>Object.values(e.draggables).filter(x=>x.descriptor.type===_)};function f(_){return e.droppables[_]||null}function m(_){const x=f(_);return x||ze(),x}const p={register:_=>{e.droppables[_.descriptor.id]=_},unregister:_=>{const x=f(_.descriptor.id);x&&_.uniqueId===x.uniqueId&&delete e.droppables[_.descriptor.id]},getById:m,findById:f,exists:_=>!!f(_),getAllByType:_=>Object.values(e.droppables).filter(x=>x.descriptor.type===_)};function y(){e.draggables={},e.droppables={},t.length=0}return{draggable:u,droppable:p,subscribe:n,clean:y}}function lL(){const e=At(oL,[]);return R.useEffect(()=>function(){e.clean()},[e]),e}var jy=rn.createContext(null),fm=()=>{const e=document.body;return e||ze(),e};const cL={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},uL=e=>`rfd-announcement-${e}`;function dL(e){const t=At(()=>uL(e),[e]),n=R.useRef(null);return R.useEffect(function(){const l=document.createElement("div");return n.current=l,l.id=t,l.setAttribute("aria-live","assertive"),l.setAttribute("aria-atomic","true"),cm(l.style,cL),fm().appendChild(l),function(){setTimeout(function(){const m=fm();m.contains(l)&&m.removeChild(l),l===n.current&&(n.current=null)})}},[t]),Je(o=>{const l=n.current;if(l){l.textContent=o;return}},[])}const hL={separator:"::"};function Ny(e,t=hL){const n=rn.useId();return At(()=>`${e}${t.separator}${n}`,[t.separator,e,n])}function fL({contextId:e,uniqueId:t}){return`rfd-hidden-text-${e}-${t}`}function mL({contextId:e,text:t}){const n=Ny("hidden-text",{separator:"-"}),i=At(()=>fL({contextId:e,uniqueId:n}),[n,e]);return R.useEffect(function(){const l=document.createElement("div");return l.id=i,l.textContent=t,l.style.display="none",fm().appendChild(l),function(){const f=fm();f.contains(l)&&f.removeChild(l)}},[i,t]),i}var Um=rn.createContext(null);function hk(e){const t=R.useRef(e);return R.useEffect(()=>{t.current=e}),t}function pL(){let e=null;function t(){return!!e}function n(u){return u===e}function i(u){e&&ze();const f={abandon:u};return e=f,f}function o(){e||ze(),e=null}function l(){e&&(e.abandon(),o())}return{isClaimed:t,isActive:n,claim:i,release:o,tryAbandon:l}}function cd(e){return e.phase==="IDLE"||e.phase==="DROP_ANIMATING"?!1:e.isDragging}const gL=9,bL=13,Oy=27,fk=32,yL=33,vL=34,_L=35,xL=36,wL=37,SL=38,EL=39,TL=40,kL={[bL]:!0,[gL]:!0};var mk=e=>{kL[e.keyCode]&&e.preventDefault()};const Hm=(()=>{const e="visibilitychange";return typeof document>"u"?e:[e,`ms${e}`,`webkit${e}`,`moz${e}`,`o${e}`].find(i=>`on${i}`in document)||e})(),pk=0,M1=5;function AL(e,t){return Math.abs(t.x-e.x)>=M1||Math.abs(t.y-e.y)>=M1}const C1={type:"IDLE"};function jL({cancel:e,completed:t,getPhase:n,setPhase:i}){return[{eventName:"mousemove",fn:o=>{const{button:l,clientX:u,clientY:f}=o;if(l!==pk)return;const m={x:u,y:f},p=n();if(p.type==="DRAGGING"){o.preventDefault(),p.actions.move(m);return}p.type!=="PENDING"&&ze();const y=p.point;if(!AL(y,m))return;o.preventDefault();const _=p.actions.fluidLift(m);i({type:"DRAGGING",actions:_})}},{eventName:"mouseup",fn:o=>{const l=n();if(l.type!=="DRAGGING"){e();return}o.preventDefault(),l.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"mousedown",fn:o=>{n().type==="DRAGGING"&&o.preventDefault(),e()}},{eventName:"keydown",fn:o=>{if(n().type==="PENDING"){e();return}if(o.keyCode===Oy){o.preventDefault(),e();return}mk(o)}},{eventName:"resize",fn:e},{eventName:"scroll",options:{passive:!0,capture:!1},fn:()=>{n().type==="PENDING"&&e()}},{eventName:"webkitmouseforcedown",fn:o=>{const l=n();if(l.type==="IDLE"&&ze(),l.actions.shouldRespectForcePress()){e();return}o.preventDefault()}},{eventName:Hm,fn:e}]}function NL(e){const t=R.useRef(C1),n=R.useRef(Za),i=At(()=>({eventName:"mousedown",fn:function(_){if(_.defaultPrevented||_.button!==pk||_.ctrlKey||_.metaKey||_.shiftKey||_.altKey)return;const x=e.findClosestDraggableId(_);if(!x)return;const S=e.tryGetLock(x,u,{sourceEvent:_});if(!S)return;_.preventDefault();const T={x:_.clientX,y:_.clientY};n.current(),p(S,T)}}),[e]),o=At(()=>({eventName:"webkitmouseforcewillbegin",fn:y=>{if(y.defaultPrevented)return;const _=e.findClosestDraggableId(y);if(!_)return;const x=e.findOptionsForDraggable(_);x&&(x.shouldRespectForcePress||e.canGetLock(_)&&y.preventDefault())}}),[e]),l=Je(function(){const _={passive:!1,capture:!0};n.current=Mi(window,[o,i],_)},[o,i]),u=Je(()=>{t.current.type!=="IDLE"&&(t.current=C1,n.current(),l())},[l]),f=Je(()=>{const y=t.current;u(),y.type==="DRAGGING"&&y.actions.cancel({shouldBlockNextClick:!0}),y.type==="PENDING"&&y.actions.abort()},[u]),m=Je(function(){const _={capture:!0,passive:!1},x=jL({cancel:f,completed:u,getPhase:()=>t.current,setPhase:S=>{t.current=S}});n.current=Mi(window,x,_)},[f,u]),p=Je(function(_,x){t.current.type!=="IDLE"&&ze(),t.current={type:"PENDING",point:x,actions:_},m()},[m]);di(function(){return l(),function(){n.current()}},[l])}function OL(){}const DL={[vL]:!0,[yL]:!0,[xL]:!0,[_L]:!0};function ML(e,t){function n(){t(),e.cancel()}function i(){t(),e.drop()}return[{eventName:"keydown",fn:o=>{if(o.keyCode===Oy){o.preventDefault(),n();return}if(o.keyCode===fk){o.preventDefault(),i();return}if(o.keyCode===TL){o.preventDefault(),e.moveDown();return}if(o.keyCode===SL){o.preventDefault(),e.moveUp();return}if(o.keyCode===EL){o.preventDefault(),e.moveRight();return}if(o.keyCode===wL){o.preventDefault(),e.moveLeft();return}if(DL[o.keyCode]){o.preventDefault();return}mk(o)}},{eventName:"mousedown",fn:n},{eventName:"mouseup",fn:n},{eventName:"click",fn:n},{eventName:"touchstart",fn:n},{eventName:"resize",fn:n},{eventName:"wheel",fn:n,options:{passive:!0}},{eventName:Hm,fn:n}]}function CL(e){const t=R.useRef(OL),n=At(()=>({eventName:"keydown",fn:function(l){if(l.defaultPrevented||l.keyCode!==fk)return;const u=e.findClosestDraggableId(l);if(!u)return;const f=e.tryGetLock(u,y,{sourceEvent:l});if(!f)return;l.preventDefault();let m=!0;const p=f.snapLift();t.current();function y(){m||ze(),m=!1,t.current(),i()}t.current=Mi(window,ML(p,y),{capture:!0,passive:!1})}}),[e]),i=Je(function(){const l={passive:!1,capture:!0};t.current=Mi(window,[n],l)},[n]);di(function(){return i(),function(){t.current()}},[i])}const vg={type:"IDLE"},RL=120,LL=.15;function BL({cancel:e,getPhase:t}){return[{eventName:"orientationchange",fn:e},{eventName:"resize",fn:e},{eventName:"contextmenu",fn:n=>{n.preventDefault()}},{eventName:"keydown",fn:n=>{if(t().type!=="DRAGGING"){e();return}n.keyCode===Oy&&n.preventDefault(),e()}},{eventName:Hm,fn:e}]}function PL({cancel:e,completed:t,getPhase:n}){return[{eventName:"touchmove",options:{capture:!1},fn:i=>{const o=n();if(o.type!=="DRAGGING"){e();return}o.hasMoved=!0;const{clientX:l,clientY:u}=i.touches[0],f={x:l,y:u};i.preventDefault(),o.actions.move(f)}},{eventName:"touchend",fn:i=>{const o=n();if(o.type!=="DRAGGING"){e();return}i.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"touchcancel",fn:i=>{if(n().type!=="DRAGGING"){e();return}i.preventDefault(),e()}},{eventName:"touchforcechange",fn:i=>{const o=n();o.type==="IDLE"&&ze();const l=i.touches[0];if(!l||!(l.force>=LL))return;const f=o.actions.shouldRespectForcePress();if(o.type==="PENDING"){f&&e();return}if(f){if(o.hasMoved){i.preventDefault();return}e();return}i.preventDefault()}},{eventName:Hm,fn:e}]}function $L(e){const t=R.useRef(vg),n=R.useRef(Za),i=Je(function(){return t.current},[]),o=Je(function(S){t.current=S},[]),l=At(()=>({eventName:"touchstart",fn:function(S){if(S.defaultPrevented)return;const T=e.findClosestDraggableId(S);if(!T)return;const k=e.tryGetLock(T,f,{sourceEvent:S});if(!k)return;const j=S.touches[0],{clientX:C,clientY:P}=j,N={x:C,y:P};n.current(),_(k,N)}}),[e]),u=Je(function(){const S={capture:!0,passive:!1};n.current=Mi(window,[l],S)},[l]),f=Je(()=>{const x=t.current;x.type!=="IDLE"&&(x.type==="PENDING"&&clearTimeout(x.longPressTimerId),o(vg),n.current(),u())},[u,o]),m=Je(()=>{const x=t.current;f(),x.type==="DRAGGING"&&x.actions.cancel({shouldBlockNextClick:!0}),x.type==="PENDING"&&x.actions.abort()},[f]),p=Je(function(){const S={capture:!0,passive:!1},T={cancel:m,completed:f,getPhase:i},k=Mi(window,PL(T),S),j=Mi(window,BL(T),S);n.current=function(){k(),j()}},[m,i,f]),y=Je(function(){const S=i();S.type!=="PENDING"&&ze();const T=S.actions.fluidLift(S.point);o({type:"DRAGGING",actions:T,hasMoved:!1})},[i,o]),_=Je(function(S,T){i().type!=="IDLE"&&ze();const k=setTimeout(y,RL);o({type:"PENDING",point:T,actions:S,longPressTimerId:k}),p()},[p,i,o,y]);di(function(){return u(),function(){n.current();const T=i();T.type==="PENDING"&&(clearTimeout(T.longPressTimerId),o(vg))}},[i,u,o]),di(function(){return Mi(window,[{eventName:"touchmove",fn:()=>{},options:{capture:!1,passive:!1}}])},[])}const IL=["input","button","textarea","select","option","optgroup","video","audio"];function gk(e,t){if(t==null)return!1;if(IL.includes(t.tagName.toLowerCase()))return!0;const i=t.getAttribute("contenteditable");return i==="true"||i===""?!0:t===e?!1:gk(e,t.parentElement)}function zL(e,t){const n=t.target;return zm(n)?gk(e,n):!1}var UL=e=>is(e.getBoundingClientRect()).center;function HL(e){return e instanceof dk(e).Element}const GL=(()=>{const e="matches";return typeof document>"u"?e:[e,"msMatchesSelector","webkitMatchesSelector"].find(i=>i in Element.prototype)||e})();function bk(e,t){return e==null?null:e[GL](t)?e:bk(e.parentElement,t)}function FL(e,t){return e.closest?e.closest(t):bk(e,t)}function YL(e){return`[${Sc.contextId}="${e}"]`}function qL(e,t){const n=t.target;if(!HL(n))return null;const i=YL(e),o=FL(n,i);return!o||!zm(o)?null:o}function ZL(e,t){const n=qL(e,t);return n?n.getAttribute(Sc.draggableId):null}function VL(e,t){const n=`[${Lb.contextId}="${e}"]`,o=uk(document,n).find(l=>l.getAttribute(Lb.id)===t);return!o||!zm(o)?null:o}function KL(e){e.preventDefault()}function sf({expected:e,phase:t,isLockActive:n,shouldWarn:i}){return!(!n()||e!==t)}function yk({lockAPI:e,store:t,registry:n,draggableId:i}){if(e.isClaimed())return!1;const o=n.draggable.findById(i);return!(!o||!o.options.isEnabled||!ak(t.getState(),i))}function WL({lockAPI:e,contextId:t,store:n,registry:i,draggableId:o,forceSensorStop:l,sourceEvent:u}){if(!yk({lockAPI:e,store:n,registry:i,draggableId:o}))return null;const m=i.draggable.getById(o),p=VL(t,m.descriptor.id);if(!p||u&&!m.options.canDragInteractiveElements&&zL(p,u))return null;const y=e.claim(l||Za);let _="PRE_DRAG";function x(){return m.options.shouldRespectForcePress}function S(){return e.isActive(y)}function T(D,$){sf({expected:D,phase:_,isLockActive:S,shouldWarn:!0})&&n.dispatch($())}const k=T.bind(null,"DRAGGING");function j(D){function $(){e.release(),_="COMPLETED"}_!=="PRE_DRAG"&&($(),ze()),n.dispatch(FR(D.liftActionArgs)),_="DRAGGING";function z(F,K={shouldBlockNextClick:!1}){if(D.cleanup(),K.shouldBlockNextClick){const oe=Mi(window,[{eventName:"click",fn:KL,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(oe)}$(),n.dispatch(JT({reason:F}))}return{isActive:()=>sf({expected:"DRAGGING",phase:_,isLockActive:S,shouldWarn:!1}),shouldRespectForcePress:x,drop:F=>z("DROP",F),cancel:F=>z("CANCEL",F),...D.actions}}function C(D){const $=rd(F=>{k(()=>XT({client:F}))});return{...j({liftActionArgs:{id:o,clientSelection:D,movementMode:"FLUID"},cleanup:()=>$.cancel(),actions:{move:$}}),move:$}}function P(){const D={moveUp:()=>k(QR),moveRight:()=>k(t5),moveDown:()=>k(e5),moveLeft:()=>k(n5)};return j({liftActionArgs:{id:o,clientSelection:UL(p),movementMode:"SNAP"},cleanup:Za,actions:D})}function N(){sf({expected:"PRE_DRAG",phase:_,isLockActive:S,shouldWarn:!0})&&e.release()}return{isActive:()=>sf({expected:"PRE_DRAG",phase:_,isLockActive:S,shouldWarn:!1}),shouldRespectForcePress:x,fluidLift:C,snapLift:P,abort:N}}const XL=[NL,CL,$L];function JL({contextId:e,store:t,registry:n,customSensors:i,enableDefaultSensors:o}){const l=[...o?XL:[],...i||[]],u=R.useState(()=>pL())[0],f=Je(function(j,C){cd(j)&&!cd(C)&&u.tryAbandon()},[u]);di(function(){let j=t.getState();return t.subscribe(()=>{const P=t.getState();f(j,P),j=P})},[u,t,f]),di(()=>u.tryAbandon,[u.tryAbandon]);const m=Je(k=>yk({lockAPI:u,registry:n,store:t,draggableId:k}),[u,n,t]),p=Je((k,j,C)=>WL({lockAPI:u,registry:n,contextId:e,store:t,draggableId:k,forceSensorStop:j||null,sourceEvent:C&&C.sourceEvent?C.sourceEvent:null}),[e,u,n,t]),y=Je(k=>ZL(e,k),[e]),_=Je(k=>{const j=n.draggable.findById(k);return j?j.options:null},[n.draggable]),x=Je(function(){u.isClaimed()&&(u.tryAbandon(),t.getState().phase!=="IDLE"&&t.dispatch(xy()))},[u,t]),S=Je(()=>u.isClaimed(),[u]),T=At(()=>({canGetLock:m,tryGetLock:p,findClosestDraggableId:y,findOptionsForDraggable:_,tryReleaseLock:x,isLockClaimed:S}),[m,p,y,_,x,S]);for(let k=0;k<l.length;k++)l[k](T)}const QL=e=>({onBeforeCapture:t=>{const n=()=>{e.onBeforeCapture&&e.onBeforeCapture(t)};Lm.flushSync(n)},onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}),eB=e=>({...ld,...e.autoScrollerOptions,durationDampening:{...ld.durationDampening,...e.autoScrollerOptions}});function Bu(e){return e.current||ze(),e.current}function tB(e){const{contextId:t,setCallbacks:n,sensors:i,nonce:o,dragHandleUsageInstructions:l}=e,u=R.useRef(null),f=hk(e),m=Je(()=>QL(f.current),[f]),p=Je(()=>eB(f.current),[f]),y=dL(t),_=mL({contextId:t,text:l}),x=iL(t,o),S=Je(oe=>{Bu(u).dispatch(oe)},[]),T=At(()=>s1({publishWhileDragging:qR,updateDroppableScroll:VR,updateDroppableIsEnabled:KR,updateDroppableIsCombineEnabled:WR,collectionStarting:ZR},S),[S]),k=lL(),j=At(()=>B5(k,T),[k,T]),C=At(()=>Q5({scrollWindow:P5,scrollDroppable:j.scrollDroppable,getAutoScrollerOptions:p,...s1({move:XT},S)}),[j.scrollDroppable,S,p]),P=aL(t),N=At(()=>M5({announce:y,autoScroller:C,dimensionMarshal:j,focusMarshal:P,getResponders:m,styleMarshal:x}),[y,C,j,P,m,x]);u.current=N;const M=Je(()=>{const oe=Bu(u);oe.getState().phase!=="IDLE"&&oe.dispatch(xy())},[]),D=Je(()=>{const oe=Bu(u).getState();return oe.phase==="DROP_ANIMATING"?!0:oe.phase==="IDLE"?!1:oe.isDragging},[]),$=At(()=>({isDragging:D,tryAbort:M}),[D,M]);n($);const z=Je(oe=>ak(Bu(u).getState(),oe),[]),F=Je(()=>Qo(Bu(u).getState()),[]),K=At(()=>({marshal:j,focus:P,contextId:t,canLift:z,isMovementAllowed:F,dragHandleUsageInstructionsId:_,registry:k}),[t,j,_,P,z,F,k]);return JL({contextId:t,store:N,registry:k,customSensors:i||null,enableDefaultSensors:e.enableDefaultSensors!==!1}),R.useEffect(()=>M,[M]),rn.createElement(Um.Provider,{value:K},rn.createElement(k3,{context:jy,store:N},e.children))}function nB(){return rn.useId()}function Sd(e){const t=nB(),n=e.dragHandleUsageInstructions||Yf.dragHandleUsageInstructions;return rn.createElement(C3,null,i=>rn.createElement(tB,{nonce:e.nonce,contextId:t,setCallbacks:i,dragHandleUsageInstructions:n,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd,autoScrollerOptions:e.autoScrollerOptions},e.children))}const R1={dragging:5e3,dropAnimating:4500},rB=(e,t)=>t?Ju.drop(t.duration):e?Ju.snap:Ju.fluid,iB=(e,t)=>{if(e)return t?od.opacity.drop:od.opacity.combining},sB=e=>e.forceShouldAnimate!=null?e.forceShouldAnimate:e.mode==="SNAP";function aB(e){const n=e.dimension.client,{offset:i,combineWith:o,dropping:l}=e,u=!!o,f=sB(e),m=!!l,p=m?Cb.drop(i,u):Cb.moveTo(i);return{position:"fixed",top:n.marginBox.top,left:n.marginBox.left,boxSizing:"border-box",width:n.borderBox.width,height:n.borderBox.height,transition:rB(f,l),transform:p,opacity:iB(u,m),zIndex:m?R1.dropAnimating:R1.dragging,pointerEvents:"none"}}function oB(e){return{transform:Cb.moveTo(e.offset),transition:e.shouldAnimateDisplacement?void 0:"none"}}function lB(e){return e.type==="DRAGGING"?aB(e):oB(e)}function cB(e,t,n=Xn){const i=window.getComputedStyle(t),o=t.getBoundingClientRect(),l=TT(o,i),u=lm(l,n),f={client:l,tagName:t.tagName.toLowerCase(),display:i.display},m={x:l.marginBox.width,y:l.marginBox.height};return{descriptor:e,placeholder:f,displaceBy:m,client:l,page:u}}function uB(e){const t=Ny("draggable"),{descriptor:n,registry:i,getDraggableRef:o,canDragInteractiveElements:l,shouldRespectForcePress:u,isEnabled:f}=e,m=At(()=>({canDragInteractiveElements:l,shouldRespectForcePress:u,isEnabled:f}),[l,f,u]),p=Je(S=>{const T=o();return T||ze(),cB(n,T,S)},[n,o]),y=At(()=>({uniqueId:t,descriptor:n,options:m,getDimension:p}),[n,p,m,t]),_=R.useRef(y),x=R.useRef(!0);di(()=>(i.draggable.register(_.current),()=>i.draggable.unregister(_.current)),[i.draggable]),di(()=>{if(x.current){x.current=!1;return}const S=_.current;_.current=y,i.draggable.update(y,S)},[y,i.draggable])}var Dy=rn.createContext(null);function mm(e){const t=R.useContext(e);return t||ze(),t}function dB(e){e.preventDefault()}const hB=e=>{const t=R.useRef(null),n=Je(($=null)=>{t.current=$},[]),i=Je(()=>t.current,[]),{contextId:o,dragHandleUsageInstructionsId:l,registry:u}=mm(Um),{type:f,droppableId:m}=mm(Dy),p=At(()=>({id:e.draggableId,index:e.index,type:f,droppableId:m}),[e.draggableId,e.index,f,m]),{children:y,draggableId:_,isEnabled:x,shouldRespectForcePress:S,canDragInteractiveElements:T,isClone:k,mapped:j,dropAnimationFinished:C}=e;if(!k){const $=At(()=>({descriptor:p,registry:u,getDraggableRef:i,canDragInteractiveElements:T,shouldRespectForcePress:S,isEnabled:x}),[p,u,i,T,S,x]);uB($)}const P=At(()=>x?{tabIndex:0,role:"button","aria-describedby":l,"data-rfd-drag-handle-draggable-id":_,"data-rfd-drag-handle-context-id":o,draggable:!1,onDragStart:dB}:null,[o,l,_,x]),N=Je($=>{j.type==="DRAGGING"&&j.dropping&&$.propertyName==="transform"&&Lm.flushSync(C)},[C,j]),M=At(()=>{const $=lB(j),z=j.type==="DRAGGING"&&j.dropping?N:void 0;return{innerRef:n,draggableProps:{"data-rfd-draggable-context-id":o,"data-rfd-draggable-id":_,style:$,onTransitionEnd:z},dragHandleProps:P}},[o,P,_,j,N,n]),D=At(()=>({draggableId:p.id,type:p.type,source:{index:p.index,droppableId:p.droppableId}}),[p.droppableId,p.id,p.index,p.type]);return rn.createElement(rn.Fragment,null,y(M,j.snapshot,D))};var vk=(e,t)=>e===t,_k=e=>{const{combine:t,destination:n}=e;return n?n.droppableId:t?t.droppableId:null};const fB=e=>e.combine?e.combine.draggableId:null,mB=e=>e.at&&e.at.type==="COMBINE"?e.at.combine.draggableId:null;function pB(){const e=Kn((o,l)=>({x:o,y:l})),t=Kn((o,l,u=null,f=null,m=null)=>({isDragging:!0,isClone:l,isDropAnimating:!!m,dropAnimation:m,mode:o,draggingOver:u,combineWith:f,combineTargetFor:null})),n=Kn((o,l,u,f,m=null,p=null,y=null)=>({mapped:{type:"DRAGGING",dropping:null,draggingOver:m,combineWith:p,mode:l,offset:o,dimension:u,forceShouldAnimate:y,snapshot:t(l,f,m,p,null)}}));return(o,l)=>{if(cd(o)){if(o.critical.draggable.id!==l.draggableId)return null;const u=o.current.client.offset,f=o.dimensions.draggables[l.draggableId],m=ui(o.impact),p=mB(o.impact),y=o.forceShouldAnimate;return n(e(u.x,u.y),o.movementMode,f,l.isClone,m,p,y)}if(o.phase==="DROP_ANIMATING"){const u=o.completed;if(u.result.draggableId!==l.draggableId)return null;const f=l.isClone,m=o.dimensions.draggables[l.draggableId],p=u.result,y=p.mode,_=_k(p),x=fB(p),T={duration:o.dropDuration,curve:Sy.drop,moveTo:o.newHomeClientOffset,opacity:x?od.opacity.drop:null,scale:x?od.scale.drop:null};return{mapped:{type:"DRAGGING",offset:o.newHomeClientOffset,dimension:m,dropping:T,draggingOver:_,combineWith:x,mode:y,forceShouldAnimate:null,snapshot:t(y,f,_,x,T)}}}return null}}function xk(e=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}const gB={mapped:{type:"SECONDARY",offset:Xn,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:xk(null)}};function bB(){const e=Kn((u,f)=>({x:u,y:f})),t=Kn(xk),n=Kn((u,f=null,m)=>({mapped:{type:"SECONDARY",offset:u,combineTargetFor:f,shouldAnimateDisplacement:m,snapshot:t(f)}})),i=u=>u?n(Xn,u,!0):null,o=(u,f,m,p)=>{const y=m.displaced.visible[u],_=!!(p.inVirtualList&&p.effected[u]),x=Pm(m),S=x&&x.draggableId===u?f:null;if(!y){if(!_)return i(S);if(m.displaced.invisible[u])return null;const j=Nc(p.displacedBy.point),C=e(j.x,j.y);return n(C,S,!0)}if(_)return i(S);const T=m.displacedBy.point,k=e(T.x,T.y);return n(k,S,y.shouldAnimate)};return(u,f)=>{if(cd(u))return u.critical.draggable.id===f.draggableId?null:o(f.draggableId,u.critical.draggable.id,u.impact,u.afterCritical);if(u.phase==="DROP_ANIMATING"){const m=u.completed;return m.result.draggableId===f.draggableId?null:o(f.draggableId,m.result.draggableId,m.impact,m.afterCritical)}return null}}const yB=()=>{const e=pB(),t=bB();return(i,o)=>e(i,o)||t(i,o)||gB},vB={dropAnimationFinished:QT},_B=ET(yB,vB,null,{context:jy,areStatePropsEqual:vk})(hB);function wk(e){return mm(Dy).isUsingCloneFor===e.draggableId&&!e.isClone?null:rn.createElement(_B,e)}function Ec(e){const t=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,n=!!e.disableInteractiveElementBlocking,i=!!e.shouldRespectForcePress;return rn.createElement(wk,cm({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:n,shouldRespectForcePress:i}))}const Sk=e=>t=>e===t,xB=Sk("scroll"),wB=Sk("auto"),L1=(e,t)=>t(e.overflowX)||t(e.overflowY),SB=e=>{const t=window.getComputedStyle(e),n={overflowX:t.overflowX,overflowY:t.overflowY};return L1(n,xB)||L1(n,wB)},EB=()=>!1,Ek=e=>e==null?null:e===document.body?EB()?e:null:e===document.documentElement?null:SB(e)?e:Ek(e.parentElement);var Bb=e=>({x:e.scrollLeft,y:e.scrollTop});const Tk=e=>e?window.getComputedStyle(e).position==="fixed"?!0:Tk(e.parentElement):!1;var TB=e=>{const t=Ek(e),n=Tk(e);return{closestScrollable:t,isFixedOnPage:n}},kB=({descriptor:e,isEnabled:t,isCombineEnabled:n,isFixedOnPage:i,direction:o,client:l,page:u,closest:f})=>{const m=(()=>{if(!f)return null;const{scrollSize:x,client:S}=f,T=rk({scrollHeight:x.scrollHeight,scrollWidth:x.scrollWidth,height:S.paddingBox.height,width:S.paddingBox.width});return{pageMarginBox:f.page.marginBox,frameClient:S,scrollSize:x,shouldClipSubject:f.shouldClipSubject,scroll:{initial:f.scroll,current:f.scroll,max:T,diff:{value:Xn,displacement:Xn}}}})(),p=o==="vertical"?gy:BT,y=xc({page:u,withPlaceholder:null,axis:p,frame:m});return{descriptor:e,isCombineEnabled:n,isFixedOnPage:i,axis:p,isEnabled:t,client:l,page:u,frame:m,subject:y}};const AB=(e,t)=>{const n=kT(e);if(!t||e!==t)return n;const i=n.paddingBox.top-t.scrollTop,o=n.paddingBox.left-t.scrollLeft,l=i+t.scrollHeight,u=o+t.scrollWidth,m=hy({top:i,right:u,bottom:l,left:o},n.border);return fy({borderBox:m,margin:n.margin,border:n.border,padding:n.padding})};var jB=({ref:e,descriptor:t,env:n,windowScroll:i,direction:o,isDropDisabled:l,isCombineEnabled:u,shouldClipSubject:f})=>{const m=n.closestScrollable,p=AB(e,m),y=lm(p,i),_=(()=>{if(!m)return null;const S=kT(m),T={scrollHeight:m.scrollHeight,scrollWidth:m.scrollWidth};return{client:S,page:lm(S,i),scroll:Bb(m),scrollSize:T,shouldClipSubject:f}})();return kB({descriptor:t,isEnabled:!l,isCombineEnabled:u,isFixedOnPage:n.isFixedOnPage,direction:o,client:p,page:y,closest:_})};const NB={passive:!1},OB={passive:!0};var B1=e=>e.shouldPublishImmediately?NB:OB;const af=e=>e&&e.env.closestScrollable||null;function DB(e){const t=R.useRef(null),n=mm(Um),i=Ny("droppable"),{registry:o,marshal:l}=n,u=hk(e),f=At(()=>({id:e.droppableId,type:e.type,mode:e.mode}),[e.droppableId,e.mode,e.type]),m=R.useRef(f),p=At(()=>Kn((M,D)=>{t.current||ze();const $={x:M,y:D};l.updateDroppableScroll(f.id,$)}),[f.id,l]),y=Je(()=>{const M=t.current;return!M||!M.env.closestScrollable?Xn:Bb(M.env.closestScrollable)},[]),_=Je(()=>{const M=y();p(M.x,M.y)},[y,p]),x=At(()=>rd(_),[_]),S=Je(()=>{const M=t.current,D=af(M);if(M&&D||ze(),M.scrollOptions.shouldPublishImmediately){_();return}x()},[x,_]),T=Je((M,D)=>{t.current&&ze();const $=u.current,z=$.getDroppableRef();z||ze();const F=TB(z),K={ref:z,descriptor:f,env:F,scrollOptions:D};t.current=K;const oe=jB({ref:z,descriptor:f,env:F,windowScroll:M,direction:$.direction,isDropDisabled:$.isDropDisabled,isCombineEnabled:$.isCombineEnabled,shouldClipSubject:!$.ignoreContainerClipping}),Q=F.closestScrollable;return Q&&(Q.setAttribute(O1.contextId,n.contextId),Q.addEventListener("scroll",S,B1(K.scrollOptions))),oe},[n.contextId,f,S,u]),k=Je(()=>{const M=t.current,D=af(M);return M&&D||ze(),Bb(D)},[]),j=Je(()=>{const M=t.current;M||ze();const D=af(M);t.current=null,D&&(x.cancel(),D.removeAttribute(O1.contextId),D.removeEventListener("scroll",S,B1(M.scrollOptions)))},[S,x]),C=Je(M=>{const D=t.current;D||ze();const $=af(D);$||ze(),$.scrollTop+=M.y,$.scrollLeft+=M.x},[]),P=At(()=>({getDimensionAndWatchScroll:T,getScrollWhileDragging:k,dragStopped:j,scroll:C}),[j,T,k,C]),N=At(()=>({uniqueId:i,descriptor:f,callbacks:P}),[P,f,i]);di(()=>(m.current=N.descriptor,o.droppable.register(N),()=>{t.current&&j(),o.droppable.unregister(N)}),[P,f,j,N,l,o.droppable]),di(()=>{t.current&&l.updateDroppableIsEnabled(m.current.id,!e.isDropDisabled)},[e.isDropDisabled,l]),di(()=>{t.current&&l.updateDroppableIsCombineEnabled(m.current.id,e.isCombineEnabled)},[e.isCombineEnabled,l])}function _g(){}const P1={width:0,height:0,margin:z3},MB=({isAnimatingOpenOnMount:e,placeholder:t,animate:n})=>e||n==="close"?P1:{height:t.client.borderBox.height,width:t.client.borderBox.width,margin:t.client.margin},CB=({isAnimatingOpenOnMount:e,placeholder:t,animate:n})=>{const i=MB({isAnimatingOpenOnMount:e,placeholder:t,animate:n});return{display:t.display,boxSizing:"border-box",width:i.width,height:i.height,marginTop:i.margin.top,marginRight:i.margin.right,marginBottom:i.margin.bottom,marginLeft:i.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:n!=="none"?Ju.placeholder:null}},RB=e=>{const t=R.useRef(null),n=Je(()=>{t.current&&(clearTimeout(t.current),t.current=null)},[]),{animate:i,onTransitionEnd:o,onClose:l,contextId:u}=e,[f,m]=R.useState(e.animate==="open");R.useEffect(()=>f?i!=="open"?(n(),m(!1),_g):t.current?_g:(t.current=setTimeout(()=>{t.current=null,m(!1)}),n):_g,[i,f,n]);const p=Je(_=>{_.propertyName==="height"&&(o(),i==="close"&&l())},[i,l,o]),y=CB({isAnimatingOpenOnMount:f,animate:e.animate,placeholder:e.placeholder});return rn.createElement(e.placeholder.tagName,{style:y,"data-rfd-placeholder-context-id":u,onTransitionEnd:p,ref:e.innerRef})};var LB=rn.memo(RB);class BB extends rn.PureComponent{constructor(...t){super(...t),this.state={isVisible:!!this.props.on,data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{this.state.animate==="close"&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(t,n){return t.shouldAnimate?t.on?{isVisible:!0,data:t.on,animate:"open"}:n.isVisible?{isVisible:!0,data:n.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!t.on,data:t.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const t={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(t)}}const PB=e=>{const t=R.useContext(Um);t||ze();const{contextId:n,isMovementAllowed:i}=t,o=R.useRef(null),l=R.useRef(null),{children:u,droppableId:f,type:m,mode:p,direction:y,ignoreContainerClipping:_,isDropDisabled:x,isCombineEnabled:S,snapshot:T,useClone:k,updateViewportMaxScroll:j,getContainerForClone:C}=e,P=Je(()=>o.current,[]),N=Je((Q=null)=>{o.current=Q},[]);Je(()=>l.current,[]);const M=Je((Q=null)=>{l.current=Q},[]),D=Je(()=>{i()&&j({maxScroll:sk()})},[i,j]);DB({droppableId:f,type:m,mode:p,direction:y,isDropDisabled:x,isCombineEnabled:S,ignoreContainerClipping:_,getDroppableRef:P});const $=At(()=>rn.createElement(BB,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},({onClose:Q,data:Y,animate:ne})=>rn.createElement(LB,{placeholder:Y,onClose:Q,innerRef:M,animate:ne,contextId:n,onTransitionEnd:D})),[n,D,e.placeholder,e.shouldAnimatePlaceholder,M]),z=At(()=>({innerRef:N,placeholder:$,droppableProps:{"data-rfd-droppable-id":f,"data-rfd-droppable-context-id":n}}),[n,f,$,N]),F=k?k.dragging.draggableId:null,K=At(()=>({droppableId:f,type:m,isUsingCloneFor:F}),[f,F,m]);function oe(){if(!k)return null;const{dragging:Q,render:Y}=k,ne=rn.createElement(wk,{draggableId:Q.draggableId,index:Q.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(ie,Se)=>Y(ie,Se,Q));return TC.createPortal(ne,C())}return rn.createElement(Dy.Provider,{value:K},u(z,T),oe())};function $B(){return document.body||ze(),document.body}const $1={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:$B},kk=e=>{let t={...e},n;for(n in $1)e[n]===void 0&&(t={...t,[n]:$1[n]});return t},xg=(e,t)=>e===t.droppable.type,I1=(e,t)=>t.draggables[e.draggable.id],IB=()=>{const e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t={...e,shouldAnimatePlaceholder:!1},n=Kn(l=>({draggableId:l.id,type:l.type,source:{index:l.index,droppableId:l.droppableId}})),i=Kn((l,u,f,m,p,y)=>{const _=p.descriptor.id;if(p.descriptor.droppableId===l){const T=y?{render:y,dragging:n(p.descriptor)}:null,k={isDraggingOver:f,draggingOverWith:f?_:null,draggingFromThisWith:_,isUsingPlaceholder:!0};return{placeholder:p.placeholder,shouldAnimatePlaceholder:!1,snapshot:k,useClone:T}}if(!u)return t;if(!m)return e;const S={isDraggingOver:f,draggingOverWith:_,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:p.placeholder,shouldAnimatePlaceholder:!0,snapshot:S,useClone:null}});return(l,u)=>{const f=kk(u),m=f.droppableId,p=f.type,y=!f.isDropDisabled,_=f.renderClone;if(cd(l)){const x=l.critical;if(!xg(p,x))return t;const S=I1(x,l.dimensions),T=ui(l.impact)===m;return i(m,y,T,T,S,_)}if(l.phase==="DROP_ANIMATING"){const x=l.completed;if(!xg(p,x.critical))return t;const S=I1(x.critical,l.dimensions);return i(m,y,_k(x.result)===m,ui(x.impact)===m,S,_)}if(l.phase==="IDLE"&&l.completed&&!l.shouldFlush){const x=l.completed;if(!xg(p,x.critical))return t;const S=ui(x.impact)===m,T=!!(x.impact.at&&x.impact.at.type==="COMBINE"),k=x.critical.droppable.id===m;return S?T?e:t:k?e:t}return t}},zB={updateViewportMaxScroll:JR},sl=ET(IB,zB,(e,t,n)=>({...kk(n),...e,...t}),{context:jy,areStatePropsEqual:vk})(PB),UB={1948:{start:new Date(1948,4,1),end:new Date(1948,7,13)},1949:{start:new Date(1949,2,3),end:new Date(1949,7,11)},1950:{start:new Date(1950,2,1),end:new Date(1950,7,10)},1951:{start:new Date(1951,3,6),end:new Date(1951,7,9)},1955:{start:new Date(1955,3,5),end:new Date(1955,7,9)},1956:{start:new Date(1956,3,20),end:new Date(1956,7,30)},1957:{start:new Date(1957,3,5),end:new Date(1957,7,22)},1958:{start:new Date(1958,3,4),end:new Date(1958,7,21)},1959:{start:new Date(1959,3,3),end:new Date(1959,7,20)},1960:{start:new Date(1960,3,1),end:new Date(1960,7,18)},1987:{start:new Date(1987,3,10),end:new Date(1987,8,11)},1988:{start:new Date(1988,3,8),end:new Date(1988,8,9)}};function pm(e,t,n){const i=UB[e];if(!i)return!1;const o=new Date(e,t-1,n,0,0,0,0);return o>=i.start&&o<i.end}function HB(e){if(!isFinite(e.getTime()))return 0;const t=e.getUTCFullYear(),n=Date.UTC(t,0,1),o=Math.floor((e.getTime()-n)/864e5)+1,l=e.getUTCHours(),u=e.getUTCMinutes(),f=e.getUTCSeconds(),m=(l-12)/24+u/1440+f/86400,p=2*Math.PI/365*(o-1+m);return 229.18*(75e-6+.001868*Math.cos(p)-.032077*Math.sin(p)-.014615*Math.cos(2*p)-.040849*Math.sin(2*p))}function GB(e){return e=(e+540)%360-180,e>=124&&e<=132||e>=129&&e<=146?135:e>=73&&e<=135?120:e>=-161&&e<=-154?-150:e>=-170&&e<-161?-165:e>=-150&&e<-141?-135:e>=-141&&e<-126?-120:e>=-126&&e<-111?-105:e>=-111&&e<-96?-90:e>=-96&&e<-81?-75:Math.round(e/15)*15}function ul(e,t,n=!1){const i=new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),0,0);if(n)return new Date(i.getTime()-1800*1e3);if(t==null||!isFinite(t))return i;let o=t;Math.abs(o)<=Math.PI+1e-6&&(o=o*180/Math.PI),o=(o+540)%360-180;const l=GB(o),u=4*(o-l),f=HB(i);return new Date(i.getTime()+(u+f)*60*1e3)}var qf={exports:{}},FB=qf.exports,z1;function YB(){return z1||(z1=1,(function(e,t){(function(n,i){e.exports=i()})(FB,function(){return(function(n){function i(l){if(o[l])return o[l].exports;var u=o[l]={i:l,l:!1,exports:{}};return n[l].call(u.exports,u,u.exports,i),u.l=!0,u.exports}var o={};return i.m=n,i.c=o,i.d=function(l,u,f){i.o(l,u)||Object.defineProperty(l,u,{configurable:!1,enumerable:!0,get:f})},i.n=function(l){var u=l&&l.__esModule?function(){return l.default}:function(){return l};return i.d(u,"a",u),u},i.o=function(l,u){return Object.prototype.hasOwnProperty.call(l,u)},i.p="",i(i.s=0)})([function(n,i,o){Object.defineProperty(i,"__esModule",{value:!0});var l=o(1),u=(function(f){return f&&f.__esModule?f:{default:f}})(l);i.default=u.default,n.exports=i.default},function(n,i,o){function l(ne){return ne&&ne.__esModule?ne:{default:ne}}Object.defineProperty(i,"__esModule",{value:!0});var u=o(2),f=l(u),m=o(3),p=l(m),y=o(4),_=l(y),x=o(5),S=l(x),T=o(6),k=l(T),j=o(7),C=l(j),P=o(8),N=l(P),M=o(9),D=l(M),$=o(10),z=l($),F=o(11),K=l(F),oe=o(12),Q=l(oe),Y={lunarInfo:f.default,solarMonth:p.default,gan:_.default,zhi:S.default,animals:k.default,lunarTerm:C.default,lTermInfo:N.default,nStr1:D.default,nStr2:z.default,nStr3:K.default,nStr4:Q.default,lYearDays:function(ne){var ie,Se=348;for(ie=32768;ie>8;ie>>=1)Se+=Y.lunarInfo[ne-1900]&ie?1:0;return Se+Y.leapDays(ne)},leapMonth:function(ne){return 15&Y.lunarInfo[ne-1900]},leapDays:function(ne){return Y.leapMonth(ne)?65536&Y.lunarInfo[ne-1900]?30:29:0},monthDays:function(ne,ie){return ie>12||ie<1?-1:Y.lunarInfo[ne-1900]&65536>>ie?30:29},solarDays:function(ne,ie){if(ie>12||ie<1)return-1;var Se=ie-1;return Se==1?ne%4==0&&ne%100!=0||ne%400==0?29:28:Y.solarMonth[Se]},toGanZhi:function(ne){return Y.gan[ne%10]+Y.zhi[ne%12]},getTerm:function(ne,ie){if(ne<1900||ne>2100||ie<1||ie>24)return-1;var Se=Y.lTermInfo[ne-1900],J=[parseInt("0x"+Se.substr(0,5)).toString(),parseInt("0x"+Se.substr(5,5)).toString(),parseInt("0x"+Se.substr(10,5)).toString(),parseInt("0x"+Se.substr(15,5)).toString(),parseInt("0x"+Se.substr(20,5)).toString(),parseInt("0x"+Se.substr(25,5)).toString()],le=[J[0].substr(0,1),J[0].substr(1,2),J[0].substr(3,1),J[0].substr(4,2),J[1].substr(0,1),J[1].substr(1,2),J[1].substr(3,1),J[1].substr(4,2),J[2].substr(0,1),J[2].substr(1,2),J[2].substr(3,1),J[2].substr(4,2),J[3].substr(0,1),J[3].substr(1,2),J[3].substr(3,1),J[3].substr(4,2),J[4].substr(0,1),J[4].substr(1,2),J[4].substr(3,1),J[4].substr(4,2),J[5].substr(0,1),J[5].substr(1,2),J[5].substr(3,1),J[5].substr(4,2)];return parseInt(le[ie-1])},toChinaYear:function(ne){var ie=parseInt(ne/1e3),Se=parseInt(ne%1e3/100),J=parseInt(ne%100/10),le=ne%10;return Y.nStr4[ie]+Y.nStr4[Se]+Y.nStr4[J]+Y.nStr4[le]+""},toChinaMonth:function(ne){if(ne>12||ne<1)return-1;var ie=Y.nStr3[ne-1];return ie+=""},toChinaDay:function(ne){var ie;switch(ne){case 10:ie="";break;case 20:ie="";break;case 30:ie="";break;default:ie=Y.nStr2[Math.floor(ne/10)],ie+=Y.nStr1[ne%10]}return ie},getAnimal:function(ne){return Y.animals[(ne-4)%12]},solar2lunar:function(be,Z,G){if(be<1900||be>2100||be==1900&&Z==1&&G<31)return-1;if(be)var J=new Date(be,parseInt(Z)-1,G);else var J=new Date;var le,he=0,te=0,be=J.getFullYear(),Z=J.getMonth()+1,G=J.getDate(),B=(Date.UTC(J.getFullYear(),J.getMonth(),J.getDate())-Date.UTC(1900,0,31))/864e5;for(le=1900;le<2101&&B>0;le++)te=Y.lYearDays(le),B-=te;B<0&&(B+=te,le--);var q=new Date,V=!1;q.getFullYear()==be&&q.getMonth()+1==Z&&q.getDate()==G&&(V=!0);var H=J.getDay(),X=Y.nStr1[H];H==0&&(H=7);var W=le,he=Y.leapMonth(le),se=!1;for(le=1;le<13&&B>0;le++)he>0&&le==he+1&&se==0?(--le,se=!0,te=Y.leapDays(W)):te=Y.monthDays(W,le),se==1&&le==he+1&&(se=!1),B-=te;B==0&&he>0&&le==he+1&&(se?se=!1:(se=!0,--le)),B<0&&(B+=te,--le);var ve=le,ke=B+1,je=Z-1,Me=Y.getTerm(be,3),Ee=Y.toGanZhi(be-4),Ie=new Date(be,1,Me).getTime();new Date(be,je,G).getTime()<Ie&&(Ee=Y.toGanZhi(be-5));var Pe=Y.getTerm(be,2*Z-1),Ye=Y.getTerm(be,2*Z),Re=Y.toGanZhi(12*(be-1900)+Z+11);G>=Pe&&(Re=Y.toGanZhi(12*(be-1900)+Z+12));var fe=!1,Le="";Pe==G&&(fe=!0,Le=Y.lunarTerm[2*Z-2]),Ye==G&&(fe=!0,Le=Y.lunarTerm[2*Z-1]);var ce=Date.UTC(be,je,1,0,0,0,0)/864e5+25567+10,me=Y.toGanZhi(ce+G-1);return{lYear:W,lMonth:ve,lDay:ke,animal:Y.getAnimal(W),yearCn:Y.toChinaYear(W),monthCn:(se&&he===ve?"":"")+Y.toChinaMonth(ve),dayCn:Y.toChinaDay(ke),cYear:be,cMonth:Z,cDay:G,gzYear:Ee,gzMonth:Re,gzDay:me,isToday:V,isLeap:se,nWeek:H,ncWeek:""+X,isTerm:fe,term:Le}},lunar2solar:function(ne,ie,Se,J){var le=Y.leapMonth(ne);if(Y.leapDays(ne),J&&le!=ie||ne==2100&&ie==12&&Se>1||ne==1900&&ie==1&&Se<31)return-1;var te=Y.monthDays(ne,ie);if(ne<1900||ne>2100||Se>te)return-1;for(var be=0,Z=1900;Z<ne;Z++)be+=Y.lYearDays(Z);for(var G=0,B=!1,Z=1;Z<ie;Z++)G=Y.leapMonth(ne),B||G<=Z&&G>0&&(be+=Y.leapDays(ne),B=!0),be+=Y.monthDays(ne,Z);J&&(be+=te);var q=Date.UTC(1900,1,30,0,0,0),V=new Date(864e5*(be+Se-31)+q),H=V.getUTCFullYear(),X=V.getUTCMonth()+1,W=V.getUTCDate();return Y.solar2lunar(H,X,W)}};i.default=Y,n.exports=i.default},function(n,i,o){Object.defineProperty(i,"__esModule",{value:!0}),i.default=[19416,19168,42352,21717,53856,55632,91476,22176,39632,21970,19168,42422,42192,53840,119381,46400,54944,44450,38320,84343,18800,42160,46261,27216,27968,109396,11104,38256,21234,18800,25958,54432,59984,28309,23248,11104,100067,37600,116951,51536,54432,120998,46416,22176,107956,9680,37584,53938,43344,46423,27808,46416,86869,19872,42416,83315,21168,43432,59728,27296,44710,43856,19296,43748,42352,21088,62051,55632,23383,22176,38608,19925,19152,42192,54484,53840,54616,46400,46752,103846,38320,18864,43380,42160,45690,27216,27968,44870,43872,38256,19189,18800,25776,29859,59984,27480,23232,43872,38613,37600,51552,55636,54432,55888,30034,22176,43959,9680,37584,51893,43344,46240,47780,44368,21977,19360,42416,86390,21168,43312,31060,27296,44368,23378,19296,42726,42208,53856,60005,54576,23200,30371,38608,19195,19152,42192,118966,53840,54560,56645,46496,22224,21938,18864,42359,42160,43600,111189,27936,44448,84835,37744,18936,18800,25776,92326,59984,27424,108228,43744,37600,53987,51552,54615,54432,55888,23893,22176,42704,21972,21200,43448,43344,46240,46758,44368,21920,43940,42416,21168,45683,26928,29495,27296,44368,84821,19296,42352,21732,53600,59752,54560,55968,92838,22224,19168,43476,42192,53584,62034,54560],n.exports=i.default},function(n,i,o){Object.defineProperty(i,"__esModule",{value:!0}),i.default=[31,28,31,30,31,30,31,31,30,31,30,31],n.exports=i.default},function(n,i,o){Object.defineProperty(i,"__esModule",{value:!0}),i.default=["","","","","","","","","",""],n.exports=i.default},function(n,i,o){Object.defineProperty(i,"__esModule",{value:!0}),i.default=["","","","","","","","","","","",""],n.exports=i.default},function(n,i,o){Object.defineProperty(i,"__esModule",{value:!0}),i.default=["","","","","","","","","","","",""],n.exports=i.default},function(n,i,o){Object.defineProperty(i,"__esModule",{value:!0}),i.default=["","","","","","","","","","","","","","","","","","","","","","","",""],n.exports=i.default},function(n,i,o){Object.defineProperty(i,"__esModule",{value:!0}),i.default=["9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c3598082c95f8c965cc920f","97bd0b06bdb0722c965ce1cfcc920f","b027097bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd0b06bdb0722c965ce1cfcc920f","b027097bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd0b06bdb0722c965ce1cfcc920f","b027097bd097c36b0b6fc9274c91aa","9778397bd19801ec9210c965cc920e","97b6b97bd19801ec95f8c965cc920f","97bd09801d98082c95f8e1cfcc920f","97bd097bd097c36b0b6fc9210c8dc2","9778397bd197c36c9210c9274c91aa","97b6b97bd19801ec95f8c965cc920e","97bd09801d98082c95f8e1cfcc920f","97bd097bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c91aa","97b6b97bd19801ec95f8c965cc920e","97bcf97c3598082c95f8e1cfcc920f","97bd097bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c3598082c95f8c965cc920f","97bd097bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c3598082c95f8c965cc920f","97bd097bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd097bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd097bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd097bd07f595b0b6fc920fb0722","9778397bd097c36b0b6fc9210c8dc2","9778397bd19801ec9210c9274c920e","97b6b97bd19801ec95f8c965cc920f","97bd07f5307f595b0b0bc920fb0722","7f0e397bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c920e","97b6b97bd19801ec95f8c965cc920f","97bd07f5307f595b0b0bc920fb0722","7f0e397bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c91aa","97b6b97bd19801ec9210c965cc920e","97bd07f1487f595b0b0bc920fb0722","7f0e397bd097c36b0b6fc9210c8dc2","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf7f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf7f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf7f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf7f1487f531b0b0bb0b6fb0722","7f0e397bd07f595b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c9274c920e","97bcf7f0e47f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9210c91aa","97b6b97bd197c36c9210c9274c920e","97bcf7f0e47f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c920e","97b6b7f0e47f531b0723b0b6fb0722","7f0e37f5307f595b0b0bc920fb0722","7f0e397bd097c36b0b6fc9210c8dc2","9778397bd097c36b0b70c9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e37f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc9210c8dc2","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e27f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0787b0721","7f0e27f0e47f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9210c91aa","97b6b7f0e47f149b0723b0787b0721","7f0e27f0e47f531b0723b0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9210c8dc2","977837f0e37f149b0723b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e37f5307f595b0b0bc920fb0722","7f0e397bd097c35b0b6fc9210c8dc2","977837f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0721","7f0e37f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc9210c8dc2","977837f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","977837f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","977837f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","977837f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","977837f0e37f14998082b0787b06bd","7f07e7f0e47f149b0723b0787b0721","7f0e27f0e47f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","977837f0e37f14998082b0723b06bd","7f07e7f0e37f149b0723b0787b0721","7f0e27f0e47f531b0723b0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","977837f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e37f1487f595b0b0bb0b6fb0722","7f0e37f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e37f1487f531b0b0bb0b6fb0722","7f0e37f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e37f1487f531b0b0bb0b6fb0722","7f0e37f0e37f14898082b072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e37f0e37f14898082b072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e37f0e366aa89801eb072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f149b0723b0787b0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e37f0e366aa89801eb072297c35","7ec967f0e37f14998082b0723b06bd","7f07e7f0e47f149b0723b0787b0721","7f0e27f0e47f531b0723b0b6fb0722","7f0e37f0e366aa89801eb072297c35","7ec967f0e37f14998082b0723b06bd","7f07e7f0e37f14998083b0787b0721","7f0e27f0e47f531b0723b0b6fb0722","7f0e37f0e366aa89801eb072297c35","7ec967f0e37f14898082b0723b02d5","7f07e7f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e36665b66aa89801e9808297c35","665f67f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e36665b66a449801e9808297c35","665f67f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e36665b66a449801e9808297c35","665f67f0e37f14898082b072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e26665b66a449801e9808297c35","665f67f0e37f1489801eb072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722"],n.exports=i.default},function(n,i,o){Object.defineProperty(i,"__esModule",{value:!0}),i.default=["","","","","","","","","","",""],n.exports=i.default},function(n,i,o){Object.defineProperty(i,"__esModule",{value:!0}),i.default=["","","",""],n.exports=i.default},function(n,i,o){Object.defineProperty(i,"__esModule",{value:!0}),i.default=["","","","","","","","","","","",""],n.exports=i.default},function(n,i,o){Object.defineProperty(i,"__esModule",{value:!0}),i.default=["","","","","","","","","","",""],n.exports=i.default}])})})(qf)),qf.exports}var Ak=YB();const qB=cl(Ak),My=A2({__proto__:null,default:qB},[Ak]);function Pb(e){return typeof e=="object"&&e!==null}function ZB(e){if(!Pb(e))throw new Error("Invalid lunar2solar result");const t=e,n=t.cYear,i=t.cMonth,o=t.cDay;if(typeof n!="number"||typeof i!="number"||typeof o!="number")throw new Error("Invalid lunar2solar fields");const l=t.isLeap;return{cYear:n,cMonth:i,cDay:o,isLeap:typeof l=="boolean"?l:void 0}}function VB(e){const t=Pb(e)&&"default"in e?e.default:e;if(!Pb(t))throw new Error("solarlunar module invalid");const n=t.lunar2solar;if(typeof n!="function")throw new Error("solarlunar.lunar2solar not found");return(i,o,l)=>ZB(n(i,o,l,!1))}const KB=VB(My);function Gm(e){const t=e.mingSikType??"/";let n=Number(e.birthDay.slice(0,4)),i=Number(e.birthDay.slice(4,6)),o=Number(e.birthDay.slice(6,8));if(e.calendarType==="lunar"){const P=KB(n,i,o);n=P.cYear,i=P.cMonth,o=P.cDay}const l=!e.birthTime||e.birthTime==="",u=l?4:Number(e.birthTime.slice(0,2)),f=l?30:Number(e.birthTime.slice(2,4)),m=!e.birthPlace||e.birthPlace.name===""||e.birthPlace.lon===0?127.5:e.birthPlace.lon,p=new Date(n,i-1,o,u,f,0,0),y=!e.birthPlace||typeof e.birthPlace=="object"&&e.birthPlace.name==="",_=ul(p,m,y),x=l?"":_.toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit"}),S=ut(_,m),T=jt(_,m),k=_t(_,t),j=l?null:$i(_,t),C=[` : ${S} ${T} ${k}`,j?`${j}`:null].filter(Boolean).join(" ");return{correctedLocal:x,ganji:C}}function Cy(e){const t=(e??"").trim();return t?t===""||t.toLowerCase()==="female"||t==="2"||t.toUpperCase()==="F"?"":(t===""||t.toLowerCase()==="male"||t==="1"||t.toUpperCase()==="M",""):""}function U1(e){if(!e)return null;const t=e.match(/(|||||||||)(|||||||||||)/);if(t)return t[1];const n=e.split(/\s+/).find(i=>i.endsWith(""));return n&&n.length>0?n.charAt(0):null}function H1(e){const t=Cy(e.gender),n=U1(e.ganjiText)??U1(e.ganji);if(!n)return"forward";const o=["","","","",""].includes(n),l=t==="";return o&&!l||!o&&l?"forward":"backward"}function WB(e){const t=e.dateObj instanceof Date?e.dateObj:e.dateObj?new Date(e.dateObj):new Date,n=e.corrected instanceof Date?e.corrected:e.corrected?new Date(e.corrected):new Date,i={...e,dateObj:t,corrected:n};try{const o=Gm(i),l={...i,...o},u=H1(l);return{...l,dir:u}}catch(o){console.error("[useMyeongSikStore] recalcGanjiSnapshot error:",o);const l=H1(i);return{...i,dir:l}}}function XB(e){const t={name:e.birth_place_name??"",lat:e.birth_place_lat??0,lon:e.birth_place_lon??127.5},n=e.sort_order===null||e.sort_order===void 0?void 0:Number(e.sort_order),i=typeof n=="number"&&Number.isFinite(n)?n:void 0,o={id:e.id,name:e.name??"",birthDay:e.birth_day??"",birthTime:e.birth_time??"",gender:Cy(e.gender),birthPlace:t,relationship:e.relationship??"",memo:e.memo??"",folder:e.folder??"",mingSikType:["","/",""].includes(e.ming_sik_type)?e.ming_sik_type:"",DayChangeRule:e.day_change_rule===""||e.day_change_rule===""?e.day_change_rule:"",favorite:e.favorite??!1,sortOrder:i,dateObj:new Date,corrected:new Date,correctedLocal:"",dayStem:"",ganjiText:"",ganji:"",calendarType:"solar",dir:"forward"};return WB(o)}function of(e,t){const n=e.birthPlace??{name:"",lat:0,lon:127.5},i=typeof e.sortOrder=="number"&&Number.isFinite(e.sortOrder)?e.sortOrder:null;return{id:e.id,user_id:t,name:e.name??null,birth_day:e.birthDay??null,birth_time:e.birthTime??null,gender:Cy(e.gender),birth_place_name:n.name??null,birth_place_lat:typeof n.lat=="number"?n.lat:null,birth_place_lon:typeof n.lon=="number"?n.lon:null,relationship:e.relationship??null,memo:e.memo??null,folder:e.folder??null,ming_sik_type:e.mingSikType??null,day_change_rule:e.DayChangeRule??null,favorite:e.favorite??!1,sort_order:i,updated_at:new Date().toISOString()}}const ss=bd((e,t)=>({currentId:null,list:[],loading:!0,setCurrent:n=>e({currentId:n}),loadFromServer:async()=>{e({loading:!0});const{data:{user:n},error:i}=await kt.auth.getUser();if(i||!n){console.error("loadFromServer: user not found / error",i),e({list:[],currentId:null,loading:!1});return}const l=await kt.from("myeongsik").select("id, user_id, name, birth_day, birth_time, gender, birth_place_name, birth_place_lat, birth_place_lon, relationship, memo, folder, ming_sik_type, day_change_rule, favorite, created_at, updated_at"+", sort_order").order("sort_order",{ascending:!0,nullsFirst:!0}).order("created_at",{ascending:!1}),u=l.data,f=l.error;if(f||!u){console.error("loadFromServer error:",f),e({loading:!1});return}const p=u.filter(x=>x.user_id===n.id).map(XB),y=t().currentId,_=y&&p.some(x=>x.id===y)?y:p[0]?.id??null;e({list:p,currentId:_,loading:!1})},migrateLocalToServer:async()=>{if(typeof window>"u")return;const n=window.localStorage.getItem("myeongsik-list");if(!n)return;let i;try{i=JSON.parse(n)}catch(T){console.error("migrateLocalToServer: JSON parse error",T),window.localStorage.removeItem("myeongsik-list");return}const o=i.state??{},l=Array.isArray(o.list)?o.list:[];if(l.length===0){window.localStorage.removeItem("myeongsik-list");return}const{data:{user:u},error:f}=await kt.auth.getUser();if(f||!u){console.warn("migrateLocalToServer: no user, skip");return}const{data:m,error:p}=await kt.from("myeongsik").select("id").eq("user_id",u.id);if(p){console.error("migrateLocalToServer: fetch existing ids error",p);return}const y=new Set((m??[]).map(T=>T.id)),_=l.filter(T=>!!T&&!y.has(T.id));if(_.length===0){window.localStorage.removeItem("myeongsik-list");return}const x=_.map(T=>of(T,u.id)),{error:S}=await kt.from("myeongsik").upsert(x,{onConflict:"id"});if(S){console.error("migrateLocalToServer upsert error:",S);return}window.localStorage.removeItem("myeongsik-list")},add:async n=>{const i=(t().list.length||0)+1,o={...n,sortOrder:n.sortOrder??i},{data:{user:l},error:u}=await kt.auth.getUser();if(u||!l){console.error("add: user not found",u);return}e(p=>({list:[o,...p.list],currentId:p.currentId??o.id}));const f=of(o,l.id),{error:m}=await kt.from("myeongsik").upsert(f,{onConflict:"id"});m&&console.error("add upsert error:",m)},update:async(n,i)=>{const o=t().list.find(y=>y.id===n);if(!o)return;const l={...o,...i};e(y=>({list:y.list.map(_=>_.id===n?l:_)}));const{data:{user:u},error:f}=await kt.auth.getUser();if(f||!u){console.error("update: user not found",f);return}const m=of(l,u.id),{error:p}=await kt.from("myeongsik").update(m).eq("id",n);p&&console.error("update error:",p)},remove:async n=>{e(o=>{const l=o.list.filter(f=>f.id!==n),u=o.currentId===n?l[0]?.id??null:o.currentId;return{list:l,currentId:u}});const{error:i}=await kt.from("myeongsik").delete().eq("id",n);i&&console.error("remove error:",i)},reorder:async n=>{const i=n.map((m,p)=>({...m,sortOrder:p+1}));e({list:i});const{data:{user:o},error:l}=await kt.auth.getUser();if(l||!o){console.error("reorder: user not found",l);return}const u=i.map(m=>of(m,o.id)),{error:f}=await kt.from("myeongsik").upsert(u,{onConflict:"id"});f&&console.error("reorder upsert error:",f)},clear:()=>{e({currentId:null,list:[]})}})),G1="__custom__",JB=[{value:"",label:" (1 )"},{value:"/",label:" / "},{value:"",label:""},{value:"",label:""},{value:"",label:""},{value:"",label:""},{value:"",label:""}],jk=({value:e,onChange:t})=>{const[n,i]=R.useState(JB),[o,l]=R.useState(""),[u,f]=R.useState(!1),[m,p]=R.useState(""),[y,_]=R.useState(!1),{list:x}=ss(),T=x.some(N=>N.relationship==="")?n.filter(N=>N.value!==""):n;R.useEffect(()=>{e!==void 0&&l(e)},[e]);const k=N=>{const M=N.target.value;M===G1?(f(!0),l(""),t?.("")):(f(!1),p(""),l(M),t?.(M))};R.useEffect(()=>{const N=localStorage.getItem("relationshipOptions");N&&i(JSON.parse(N))},[]),R.useEffect(()=>{localStorage.setItem("relationshipOptions",JSON.stringify(n)),(async()=>{const{data:{user:M},error:D}=await kt.auth.getUser();if(D||!M)return;const{data:$,error:z}=await kt.from("user_settings").select("payload").eq("user_id",M.id).single();if(z&&z.code!=="PGRST116"){console.error("load relationships settings error",z.message);return}const F={...$?.payload??{},relationshipOptions:n},{error:K}=await kt.from("user_settings").upsert({user_id:M.id,payload:F,updated_at:new Date().toISOString()});K&&console.error("save relationships settings error",K.message)})()},[n]);const j=()=>{if(!m.trim())return;const N={value:m,label:m};i([...n,N]),l(m),p(""),f(!1)},C=N=>{i(n.filter(M=>M.value!==N)),o===N&&l("")},P=N=>{if(!N.destination)return;const M=Array.from(n),[D]=M.splice(N.source.index,1);M.splice(N.destination.index,0,D),i(M)};return g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"rel_set flex items-center gap-2",children:[g.jsxs("select",{name:"relationship",id:"relationship",value:o,onChange:k,children:[g.jsx("option",{value:"",hidden:!0,children:""}),T.map(N=>g.jsx("option",{value:N.value,children:N.label},N.value)),g.jsx("option",{value:G1,children:" "})]}),g.jsx("button",{type:"button",onClick:()=>_(!0),className:"btn_style",children:""})]}),u&&!y&&g.jsxs("div",{className:"rel_set flex items-center mt-2 gap-2",children:[g.jsx("input",{type:"text",placeholder:" ",value:m,onChange:N=>p(N.target.value)}),g.jsx("button",{type:"button",onClick:j,className:"btn_style",children:""})]}),y&&g.jsxs("div",{className:"p-3 border mt-2 rounded bg-gray-50 dark:bg-neutral-900",children:[g.jsx("h4",{className:"font-bold mb-2",children:" "}),g.jsx(Sd,{onDragEnd:P,children:g.jsx(sl,{droppableId:"relList",children:N=>g.jsxs("ul",{ref:N.innerRef,...N.droppableProps,className:"space-y-1",children:[n.map((M,D)=>g.jsx(Ec,{draggableId:M.value,index:D,children:$=>g.jsxs("li",{ref:$.innerRef,...$.draggableProps,...$.dragHandleProps,className:"flex justify-between items-center bg-white dark:bg-neutral-800 p-2 rounded border text-sm desk:text-base",children:[g.jsx("span",{className:"cursor-grab mr-2",children:""}),g.jsx("span",{className:"flex-1 pr-1",children:M.label}),g.jsx("button",{type:"button",className:"text-red-500",onClick:()=>C(M.value),children:""})]})},M.value)),N.placeholder]})})}),g.jsx("button",{type:"button",onClick:()=>_(!1),className:"w-full btn_style mt-2",children:""})]})]})},pn=" ",Nk=["","","","","",""],Ry="ms_folders",Ok="ms_folder_order",F1="ms_folder_favs",$b="ms_disabled_presets",Wa="myeoun:folder-updated";function al(e){if(e!==pn)return e||void 0}function Fm(e){if(typeof window>"u")return[];const t=window.localStorage.getItem(e);if(!t)return[];try{const n=JSON.parse(t);return Array.isArray(n)?n.filter(i=>typeof i=="string"):[]}catch{return[]}}function Ym(e,t){if(!(typeof window>"u"))try{window.localStorage.setItem(e,JSON.stringify(t))}catch{}}function QB(){const e=Fm($b);return Nk.filter(t=>!e.includes(t))}function Ly(){return Fm(Ry)}function Zf(){const e=QB(),t=Ly(),n=new Set,i=[];for(const o of[...e,...t])n.has(o)||(n.add(o),i.push(o));return i}function e7(){return[pn,...Zf()]}function Dk(e){const t=e.trim();if(!t||t===pn)return;const n=Ly();if(n.includes(t))return;const i=[...n,t];Ym(Ry,i),typeof window<"u"&&window.dispatchEvent(new Event(Wa))}function t7(e){const t=Ly(),n=t.filter(i=>i!==e);n.length!==t.length&&(Ym(Ry,n),typeof window<"u"&&window.dispatchEvent(new Event(Wa)))}function n7(e){const t=Fm($b);if(t.includes(e))return;const n=[...t,e];Ym($b,n),typeof window<"u"&&window.dispatchEvent(new Event(Wa))}function Vf(){return Fm(Ok)}function Qu(e){Ym(Ok,e),typeof window<"u"&&window.dispatchEvent(new Event(Wa))}function Zu(e,t){const n=new Set(e),i=[];for(const o of t)n.has(o)&&!i.includes(o)&&i.push(o);for(const o of e)i.includes(o)||i.push(o);return i}function r7(e){return Array.from(new Set(e))}function lf(e){const t=e.filter(n=>n!==pn);return{rest:t,withUnassigned:[pn,...t]}}function i7(e,t){return Zu(t,e)}function s7({value:e,onChange:t}){const[n,i]=R.useState([pn]),[o,l]=R.useState(!1),[u,f]=R.useState(""),[m,p]=R.useState(!1),y=R.useCallback(async j=>{const{data:{user:C},error:P}=await kt.auth.getUser();if(P||!C)return;const N=j.map((D,$)=>({user_id:C.id,folder_name:D,sort_order:$+1,updated_at:new Date().toISOString()})),{error:M}=await kt.from("user_folder_order").upsert(N,{onConflict:"user_id,folder_name"});M&&console.error("save folder order error",M.message)},[]),_=R.useCallback(()=>{if(typeof window>"u")return;const j=r7(e7()),C=j.includes(pn)?j:[pn,...j],{rest:P}=lf(C),N=Vf(),M=i7(N,P),D=[pn,...M];i(D),N.length===M.length&&N.every((z,F)=>z===M[F])||(Qu(M),y(M))},[y]);R.useEffect(()=>{if(_(),typeof window<"u"){const j=()=>_();return window.addEventListener(Wa,j),()=>window.removeEventListener(Wa,j)}},[_]);const x=R.useMemo(()=>e||pn,[e]),S=j=>{const{rest:C}=lf(j);Qu(C),y(C)},T=j=>{const{source:C,destination:P}=j;if(!P||P.index===C.index)return;const{rest:N}=lf(n),M=Array.from(N),[D]=M.splice(C.index,1);M.splice(P.index,0,D);const $=[pn,...M];i($),S($)},k=j=>{const C=al(j);C&&(Dk(C),_())};return g.jsxs("div",{className:"space-y-2",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("select",{className:"flex-1 border rounded-lg p-2",value:o?"__custom__":x,onChange:j=>{const C=j.target.value;if(C==="__custom__"){l(!0),t(void 0);return}l(!1),t(al(C))},children:[n.map(j=>g.jsx("option",{value:j,children:j},j)),g.jsx("option",{value:"__custom__",children:"+   "})]}),g.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-neutral-200 hover:bg-neutral-300 dark:bg-neutral-800 dark:hover:bg-neutral-700 text-sm cursor-pointer",onClick:()=>p(j=>!j),children:m?" ":" "})]}),o&&g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("input",{type:"text",value:u,onChange:j=>f(j.target.value),placeholder:"  ",className:"flex-1 border rounded-lg p-2"}),g.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-neutral-800 hover:bg-neutral-700 text-sm text-white cursor-pointer",onClick:()=>{const j=u.trim();j&&(k(j),t(al(j)),l(!1),f(""))},children:""})]}),m&&g.jsxs("div",{className:"p-3 border rounded bg-neutral-50 dark:bg-neutral-900",children:[g.jsx("h4",{className:"font-bold mb-2 text-s",children:"  "}),g.jsxs("div",{className:"flex items-center justify-between bg-white dark:bg-neutral-800 p-2 rounded border text-sm mb-2",children:[g.jsx("span",{className:"opacity-60 select-none",children:""}),g.jsxs("span",{className:"flex-1 px-2",children:[pn," ()"]})]}),g.jsx(Sd,{onDragEnd:T,children:g.jsx(sl,{droppableId:"folderList",direction:"vertical",type:"FOLDER",children:j=>g.jsxs("ul",{ref:j.innerRef,...j.droppableProps,className:"space-y-1",children:[lf(n).rest.map((C,P)=>g.jsx(Ec,{draggableId:C,index:P,children:N=>g.jsxs("li",{ref:N.innerRef,...N.draggableProps,...N.dragHandleProps,className:"flex items-center justify-between bg-white dark:bg-neutral-800 p-2 rounded border text-sm",children:[g.jsx("span",{className:"cursor-grab select-none mr-2",children:""}),g.jsx("span",{className:"flex-1 pr-1",children:C})]})},C)),j.placeholder]})})})]}),g.jsxs("p",{className:"text-xs text-gray-500",children:['   "',pn,'" .      .']})]})}function Mk({message:e,onClose:t,ms:n=2e3}){return R.useEffect(()=>{const i=setTimeout(t,n);return()=>clearTimeout(i)},[t,n]),g.jsx("div",{className:"fixed top-4 left-1/2 -translate-x-1/2 bg-black text-white px-4 py-2 rounded-lg shadow-lg z-[9999]",children:e})}function qm(e){return typeof e=="object"&&e!==null}function a7(e){return qm(e)&&"default"in e}function o7(e){return qm(e)&&typeof e.lunar2solar=="function"}function l7(e){if(!qm(e))throw new Error("Invalid lunar2solar result");const t=e.cYear,n=e.cMonth,i=e.cDay,o=e.isLeap;if(typeof t!="number"||typeof n!="number"||typeof i!="number")throw new Error("Invalid lunar2solar fields");return{cYear:t,cMonth:n,cDay:i,isLeap:typeof o=="boolean"?o:void 0}}function c7(e){const t=a7(e)?e.default:e;if(!o7(t))throw new Error("solarlunar.lunar2solar not found");return{lunar2solar:(i,o,l,u)=>{const f=t.lunar2solar(i,o,l,u);return l7(f)}}}const u7=c7(My);function br(e,t,n,i=4,o=0){const l=u7.lunar2solar(e,t,n,!1);return new Date(l.cYear,l.cMonth-1,l.cDay,i,o)}const Pu=[{key:"name",label:"",placeholder:" ",type:"text"},{key:"birthDay",label:"",placeholder:": 19900101",type:"tel"},{key:"birthTime",label:" ",placeholder:": 1524",type:"tel"},{key:"mingSikType",label:" ",type:"mingrule"},{key:"gender",label:"",type:"radio"},{key:"birthPlace",label:" ",type:"place"},{key:"relationship",label:"",type:"relationship"},{key:"folder",label:" ",type:"folder"},{key:"memo",label:"",placeholder:" ",type:"textarea"}],$u=[{value:"solar",label:"",id:"calendarType_solar"},{value:"lunar",label:"",id:"calendarType_lunar"}],cf=["","/",""],uf=["",""];function wg(e,t,n){return n==="ArrowRight"||n==="ArrowDown"?(e+1)%t:n==="ArrowLeft"||n==="ArrowUp"?(e-1+t)%t:n==="Home"?0:n==="End"?t-1:e}function Sg(e){const t=document.getElementById(e);t instanceof HTMLElement&&t.focus()}function d7({onSave:e,onClose:t}){const{add:n}=ss(),[i,o]=R.useState(0),[l,u]=R.useState({gender:"",mingSikType:"/",DayChangeRule:"",calendarType:"solar"}),[f,m]=R.useState(null),[p,y]=R.useState(!1),[_,x]=R.useState(!1),S=Pu[i],T=M=>m(M);R.useEffect(()=>{if(["name","birthDay","birthTime","memo"].includes(S.key)){const D=document.querySelector(".current-step input[type='text']:not([disabled]), .current-step textarea:not([disabled])");if(D){D.focus();return}}if(S.key==="mingSikType"){const D=document.querySelector("[id^='ming_'][id$='_lbl'][aria-checked='true']");if(D){D.focus();return}}if(S.key==="gender"){const D=document.querySelector("[id^='gender_'][id$='_lbl'][aria-checked='true']");if(D){D.focus();return}}if(l.birthPlace||_){const D=()=>{const $=document.querySelector(".current-step form button[type='submit']");$&&$.focus()};D(),setTimeout(D,0)}else{const D=document.getElementById("inputBirthPlaceBtn");D&&D.focus()}if(S.key==="relationship"){setTimeout(()=>{const D=document.querySelector(".current-step select");D&&D.focus()},0);return}if(S.key==="folder"){setTimeout(()=>{const D=document.querySelector(".current-step select");D&&D.focus()},0);return}document.querySelector(".current-step button, .current-step [tabindex='0']")?.focus()},[_,i,S.key,l.birthPlace]);const k=R.useMemo(()=>{if(l.calendarType!=="lunar"||!l.birthDay||l.birthDay.length!==8)return null;try{const M=Number(l.birthDay.slice(0,4)),D=Number(l.birthDay.slice(4,6)),$=Number(l.birthDay.slice(6,8)),z=br(M,D,$);return`  ${z.getFullYear()}-${String(z.getMonth()+1).padStart(2,"0")}-${String(z.getDate()).padStart(2,"0")}`}catch(M){const D=M instanceof Error?M.message:void 0;return`  ${D?`: ${D}`:""}`}},[l.calendarType,l.birthDay]),j=()=>{const M=Pu[i];if(M.key==="name"&&(l.name||(u({...l,name:""}),T("   '' ."))),M.key==="birthDay"){const D=/^\d{8}$/;if(!l.birthDay||!D.test(l.birthDay))return T(" YYYYMMDD  ."),!1;const $=Number(l.birthDay.substring(0,4)),z=Number(l.birthDay.substring(4,6)),F=Number(l.birthDay.substring(6,8));if($<1900||$>2100)return T("  1900~2100  ."),!1;if(z<1||z>12)return T("  01~12  ."),!1;if(F<1||F>31)return T("  01~31  ."),!1;if(l.calendarType==="solar"){const K=new Date($,z-1,F);if(K.getFullYear()!==$||K.getMonth()+1!==z||K.getDate()!==F)return T("  ."),!1}else try{br($,z,F)}catch(K){return T(K instanceof Error?K.message:"   ."),!1}}if(M.key==="birthTime"){if(!l.birthTime&&!p)return T("   ''  ."),!1;if(l.birthTime){const D=Number(l.birthTime);if(Number.isNaN(D)||D<0||D>2359)return T("  00002359  ."),!1;const $=Number(l.birthTime.slice(0,2)),z=Number(l.birthTime.slice(2,4));if($>23||z>59)return T("  00002359  ."),!1}}return M.key==="birthPlace"&&!l.birthPlace&&!_?(T("   ''  ."),!1):!0},C=()=>{if(!j())return;if(i<Pu.length-1){o(i+1);return}const M=al(l.folder),D=!l.birthTime||l.birthTime==="",$=!l.birthPlace||typeof l.birthPlace=="object"&&l.birthPlace.name==="";let z=Number(l.birthDay.slice(0,4)),F=Number(l.birthDay.slice(4,6)),K=Number(l.birthDay.slice(6,8));if(l.calendarType==="lunar"){const X=br(z,F,K);z=X.getFullYear(),F=X.getMonth()+1,K=X.getDate()}const oe=D?4:Number(l.birthTime.slice(0,2)),Q=D?30:Number(l.birthTime.slice(2,4)),Y=new Date(z,F-1,K,oe,Q,0,0),ne=_||!l.birthPlace||l.birthPlace.lon===0?127.5:l.birthPlace.lon,ie=ul(Y,ne,$),Se=l.mingSikType??"/",J=D?"":ie.toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit"}),le=ut(ie,ne),te=jt(ie,ne),be=_t(ie,Se),Z=D?null:$i(ie,Se),G=[` : ${le} ${te} ${be}`,Z?`${Z}`:null].filter(Boolean).join(" ");function B(X,W){const se=["","","","","","","","","",""].includes(X),ve=W==="";return se?ve?"forward":"backward":ve?"backward":"forward"}const q=le.charAt(0),V=B(q,l.gender??""),H={id:pT(),name:l.name?.trim()||"",birthDay:l.birthDay||"",birthTime:D?"":l.birthTime||"",gender:l.gender??"",birthPlace:_?{name:"",lat:0,lon:127.5}:l.birthPlace??{name:"",lat:0,lon:127.5},relationship:l.relationship??"",memo:l.memo??"",mingSikType:l.mingSikType??"/",DayChangeRule:l.mingSikType===""?"":"",folder:M,correctedLocal:J,ganji:G,calendarType:l.calendarType??"solar",dir:V,corrected:ie,dateObj:l.dateObj||new Date,dayStem:l.dayStem||"",ganjiText:l.ganjiText||"   "};n(H),e(H),m(" !"),u({gender:"",mingSikType:"/",calendarType:"solar"}),y(!1),x(!1),o(0)},P=M=>{if(M.key!=="Enter")return;const D=M.target,$=D.getAttribute("role");if($==="radio"||$==="checkbox")return;const z=document.getElementById("mapModal");if(z&&z.contains(D))return;const F=D.tagName.toLowerCase(),K=D instanceof HTMLInputElement?D.type:"";if(F==="textarea"){if(M.shiftKey)return;M.preventDefault(),C();return}if(K==="radio"||K==="checkbox"){M.preventDefault(),D instanceof HTMLInputElement&&D.click();return}F==="button"&&D.type!=="submit"||(M.preventDefault(),C())},N=M=>{switch(M){case"birthPlace":return _?"":l.birthPlace?.name||"";case"birthTime":return p?"":l.birthTime||"";case"folder":return l.folder?String(l.folder):pn;default:{const $=l[M];return typeof $=="string"?$:$!=null?String($):""}}};return g.jsxs("div",{className:"mx-auto mt-10 space-y-2 max-w-[640px] w-[96%] text-neutral-900 dark:text-neutral-100",children:[f&&g.jsx(Mk,{message:f,onClose:()=>m(null)}),Pu.slice(0,i).map((M,D)=>g.jsxs("button",{onClick:()=>o(D),className:"p-3 rounded-lg bg-neutral-100 dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 flex justify-between w-full text-left hover:bg-neutral-200 dark:hover:bg-neutral-800/80 transition-colors",children:[g.jsx("span",{className:"font-semibold",children:M.label}),g.jsx("span",{className:"text-neutral-600 dark:text-neutral-300",children:N(M.key)})]},M.key)),g.jsx("div",{className:"p-4 border rounded-lg shadow current-step bg-white dark:bg-neutral-900 border-neutral-200 dark:border-neutral-800",children:g.jsxs("form",{onSubmit:M=>{M.preventDefault(),C()},onKeyDown:P,children:[g.jsx("label",{className:"block mb-2 font-bold",children:S.label}),S.key==="name"&&g.jsx("input",{type:"text",className:"w-full border rounded-lg p-2 bg-white dark:bg-neutral-900 border-neutral-300 dark:border-neutral-700 placeholder-neutral-400 dark:placeholder-neutral-500 text-neutral-900 dark:text-neutral-100",placeholder:S.placeholder,value:l.name||"",onChange:M=>u({...l,name:M.target.value})}),S.key==="birthDay"&&g.jsxs("div",{className:"space-y-2",children:[g.jsxs("div",{className:"flex gap-1 items-center",children:[g.jsx("input",{type:"text",className:"flex-1 border rounded-lg p-2 bg-white dark:bg-neutral-900 border-neutral-300 dark:border-neutral-700 placeholder-neutral-400 dark:placeholder-neutral-500 text-neutral-900 dark:text-neutral-100",placeholder:S.placeholder,value:l.birthDay||"",onChange:M=>{const D=M.target.value.replace(/\D/g,"");u({...l,birthDay:D.slice(0,8)})},inputMode:"numeric",pattern:"\\d*",maxLength:8}),g.jsx("fieldset",{role:"radiogroup","aria-label":" ",className:"flex gap-1 text-sm",children:$u.map(({value:M,label:D,id:$})=>{const z=l.calendarType===M;return g.jsxs("span",{className:"inline-flex items-center gap-1",children:[g.jsx("input",{id:$,name:"calendarType",type:"radio",style:{display:"none"}}),g.jsx("label",{htmlFor:$,id:`${$}_lbl`,role:"radio","aria-checked":z,tabIndex:0,className:`cursor-pointer select-none px-2 py-1 rounded-md border
                                     border-neutral-300 dark:border-neutral-700
                                     bg-white dark:bg-neutral-900
                                     focus-visible:outline focus-visible:outline-2 focus-visible:outline-amber-500
                                     data-[checked=true]:border-amber-400 data-[checked=true]:bg-amber-50
                                     dark:data-[checked=true]:bg-amber-500/10`,"data-checked":z?"true":"false",onKeyDown:F=>{if(F.stopPropagation(),F.key===" "||F.key==="Enter"){F.preventDefault(),u({...l,calendarType:M});return}if(!["ArrowRight","ArrowLeft","ArrowUp","ArrowDown","Home","End"].includes(F.key))return;F.preventDefault();const oe=$u.findIndex(ne=>ne.value===l.calendarType),Q=wg(oe<0?0:oe,$u.length,F.key),Y=$u[Q].value;u({...l,calendarType:Y}),Sg(`${$u[Q].id}_lbl`)},onClick:F=>{F.preventDefault(),u({...l,calendarType:M})},children:D})]},M)})})]}),l.calendarType==="lunar"&&g.jsx("div",{className:"flex items-center justify-end",children:g.jsx("span",{className:"text-xs text-neutral-600 dark:text-neutral-300",children:k})}),l.birthDay&&l.birthDay.length===8&&(()=>{const M=Number(l.birthDay.slice(0,4)),D=Number(l.birthDay.slice(4,6)),$=Number(l.birthDay.slice(6,8));return pm(M,D,$)?g.jsx("div",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:" ."}):null})()]}),S.key==="birthTime"&&g.jsxs("div",{className:"space-y-2",children:[g.jsx("input",{type:"text",className:"w-full border rounded-lg p-2 disabled:opacity-50 bg-white dark:bg-neutral-900 border-neutral-300 dark:border-neutral-700 placeholder-neutral-400 dark:placeholder-neutral-500 text-neutral-900 dark:text-neutral-100",placeholder:S.placeholder,value:p?"":l.birthTime||"",onChange:M=>{const D=M.target.value.replace(/\D/g,"");u({...l,birthTime:D.slice(0,4)})},inputMode:"numeric",pattern:"\\d*",maxLength:4,disabled:p}),g.jsxs("span",{className:"inline-flex items-center gap-1",children:[g.jsx("input",{id:"birthTimeX",type:"checkbox",style:{display:"none"}}),g.jsx("label",{htmlFor:"birthTimeX",role:"checkbox","aria-checked":p,tabIndex:0,className:`text-sm select-none cursor-pointer px-2 py-1 rounded-md border
                             border-neutral-300 dark:border-neutral-700
                             bg-white dark:bg-neutral-900
                             focus-visible:outline focus-visible:outline-2 focus-visible:outline-amber-500
                             data-[checked=true]:border-amber-400 data-[checked=true]:bg-amber-50
                             dark:data-[checked=true]:bg-amber-500/10`,"data-checked":p?"true":"false",onKeyDown:M=>{M.stopPropagation(),(M.key===" "||M.key==="Enter")&&(M.preventDefault(),y(!p))},onClick:M=>{M.preventDefault(),y(!p)},children:""})]})]}),S.key==="mingSikType"&&g.jsx("fieldset",{role:"radiogroup","aria-label":" ",className:"flex flex-wrap gap-3",children:cf.map(M=>{const D=`ming_${M}`,$=(l.mingSikType??"/")===M;return g.jsxs("span",{className:"inline-flex items-center gap-1",children:[g.jsx("input",{id:D,name:"mingSikType",type:"radio",style:{display:"none"}}),g.jsxs("label",{htmlFor:D,id:`${D}_lbl`,role:"radio","aria-checked":$,tabIndex:0,className:`cursor-pointer select-none px-2 py-1 rounded-md border
                                 border-neutral-300 dark:border-neutral-700
                                 bg-white dark:bg-neutral-900
                                 focus-visible:outline focus-visible:outline-2 focus-visible:outline-amber-500
                                 data-[checked=true]:border-amber-400 data-[checked=true]:bg-amber-50
                                 dark:data-[checked=true]:bg-amber-500/10`,"data-checked":$?"true":"false",onKeyDown:z=>{if(z.stopPropagation(),z.key===" "||z.key==="Enter"){z.preventDefault(),u({...l,mingSikType:M});return}if(!["ArrowRight","ArrowLeft","ArrowUp","ArrowDown","Home","End"].includes(z.key))return;z.preventDefault();const K=l.mingSikType??"/",oe=cf.indexOf(K),Q=wg(oe,cf.length,z.key),Y=cf[Q];u({...l,mingSikType:Y}),Sg(`ming_${Y}_lbl`)},onClick:z=>{z.preventDefault(),u({...l,mingSikType:M})},children:[M,""]})]},M)})}),S.key==="gender"&&g.jsx("fieldset",{role:"radiogroup","aria-label":"",className:"flex gap-2",children:uf.map(M=>{const D=`gender_${M}`,$=(l.gender??"")===M;return g.jsxs("span",{className:"inline-flex items-center gap-1",children:[g.jsx("input",{id:D,name:"gender",type:"radio",style:{display:"none"}}),g.jsx("label",{htmlFor:D,id:`${D}_lbl`,role:"radio","aria-checked":$,tabIndex:0,className:`cursor-pointer select-none px-2 py-1 rounded-md border
                                 border-neutral-300 dark:border-neutral-700
                                 bg-white dark:bg-neutral-900
                                 focus-visible:outline focus-visible:outline-2 focus-visible:outline-amber-500
                                 data-[checked=true]:border-amber-400 data-[checked=true]:bg-amber-50
                                 dark:data-[checked=true]:bg-amber-500/10`,"data-checked":$?"true":"false",onKeyDown:z=>{if(z.stopPropagation(),z.key===" "||z.key==="Enter"){z.preventDefault(),u({...l,gender:M});return}if(!["ArrowRight","ArrowLeft","ArrowUp","ArrowDown","Home","End"].includes(z.key))return;z.preventDefault();const K=l.gender??"",oe=uf.indexOf(K),Q=wg(oe,uf.length,z.key),Y=uf[Q];u({...l,gender:Y}),Sg(`gender_${Y}_lbl`)},onClick:z=>{z.preventDefault(),u({...l,gender:M})},children:M})]},M)})}),S.key==="birthPlace"&&g.jsxs("div",{className:"space-y-2",children:[g.jsx(gT,{onSelect:M=>u({...l,birthPlace:M})}),g.jsxs("span",{className:"inline-flex items-center gap-1",children:[g.jsx("input",{id:"birthPlaceX",type:"checkbox",style:{display:"none"}}),g.jsx("label",{htmlFor:"birthPlaceX",role:"checkbox","aria-checked":_,tabIndex:0,className:`text-sm select-none cursor-pointer px-2 py-1 rounded-md border
                             border-neutral-300 dark:border-neutral-700
                             bg-white dark:bg-neutral-900
                             focus-visible:outline focus-visible:outline-2 focus-visible:outline-amber-500
                             data-[checked=true]:border-amber-400 data-[checked=true]:bg-amber-50
                             dark:data-[checked=true]:bg-amber-500/10`,"data-checked":_?"true":"false",onKeyDown:M=>{M.stopPropagation(),(M.key===" "||M.key==="Enter")&&(M.preventDefault(),x(!_))},onClick:M=>{M.preventDefault(),x(!_)},children:""})]})]}),S.key==="relationship"&&g.jsx(jk,{value:l.relationship||"",onChange:M=>u({...l,relationship:M})}),S.key==="folder"&&g.jsx(s7,{value:al(l.folder),onChange:M=>u({...l,folder:M})}),S.key==="memo"&&g.jsx("textarea",{className:"w-full border rounded-lg p-2 bg-white dark:bg-neutral-900 border-neutral-300 dark:border-neutral-700 placeholder-neutral-400 dark:placeholder-neutral-500 text-neutral-900 dark:text-neutral-100",placeholder:S.placeholder,value:l.memo||"",onChange:M=>u({...l,memo:M.target.value})}),g.jsxs("div",{className:"flex justify-between gap-2",children:[g.jsx("button",{className:"mt-4 w-full btn_style btn_secondary dark:focus:ring-amber-500",onClick:t,children:""}),g.jsx("button",{type:"submit",className:"mt-4 w-full btn_style dark:focus:ring-amber-500",children:i===Pu.length-1?"":""})]})]})})]})}var df={},Y1;function h7(){if(Y1)return df;Y1=1,df.match=l,df.parse=u;var e=/(?:(only|not)?\s*([^\s\(\)]+)(?:\s*and)?\s*)?(.+)?/i,t=/\(\s*([^\s\:\)]+)\s*(?:\:\s*([^\s\)]+))?\s*\)/,n=/^(?:(min|max)-)?(.+)/,i=/(em|rem|px|cm|mm|in|pt|pc)?$/,o=/(dpi|dpcm|dppx)?$/;function l(y,_){return u(y).some(function(x){var S=x.inverse,T=x.type==="all"||_.type===x.type;if(T&&S||!(T||S))return!1;var k=x.expressions.every(function(j){var C=j.feature,P=j.modifier,N=j.value,M=_[C];if(!M)return!1;switch(C){case"orientation":case"scan":return M.toLowerCase()===N.toLowerCase();case"width":case"height":case"device-width":case"device-height":N=p(N),M=p(M);break;case"resolution":N=m(N),M=m(M);break;case"aspect-ratio":case"device-aspect-ratio":case"device-pixel-ratio":N=f(N),M=f(M);break;case"grid":case"color":case"color-index":case"monochrome":N=parseInt(N,10)||1,M=parseInt(M,10)||0;break}switch(P){case"min":return M>=N;case"max":return M<=N;default:return M===N}});return k&&!S||!k&&S})}function u(y){return y.split(",").map(function(_){_=_.trim();var x=_.match(e),S=x[1],T=x[2],k=x[3]||"",j={};return j.inverse=!!S&&S.toLowerCase()==="not",j.type=T?T.toLowerCase():"all",k=k.match(/\([^\)]+\)/g)||[],j.expressions=k.map(function(C){var P=C.match(t),N=P[1].toLowerCase().match(n);return{modifier:N[1],feature:N[2],value:P[2]}}),j})}function f(y){var _=Number(y),x;return _||(x=y.match(/^(\d+)\s*\/\s*(\d+)$/),_=x[1]/x[2]),_}function m(y){var _=parseFloat(y),x=String(y).match(o)[1];switch(x){case"dpcm":return _/2.54;case"dppx":return _*96;default:return _}}function p(y){var _=parseFloat(y),x=String(y).match(i)[1];switch(x){case"em":return _*16;case"rem":return _*16;case"cm":return _*96/2.54;case"mm":return _*96/2.54/10;case"in":return _*96;case"pt":return _*72;case"pc":return _*72/12;default:return _}}return df}var Eg,q1;function f7(){if(q1)return Eg;q1=1;var e=h7().match,t=typeof window<"u"?window.matchMedia:null;function n(o,l,u){var f=this,m;t&&!u&&(m=t.call(window,o)),m?(this.matches=m.matches,this.media=m.media,m.addListener(_)):(this.matches=e(o,l),this.media=o),this.addListener=p,this.removeListener=y,this.dispose=x;function p(S){m&&m.addListener(S)}function y(S){m&&m.removeListener(S)}function _(S){f.matches=S.matches,f.media=S.media}function x(){m&&m.removeListener(_)}}function i(o,l,u){return new n(o,l,u)}return Eg=i,Eg}var m7=f7();const p7=cl(m7);var g7=/[A-Z]/g,b7=/^ms-/,Tg={};function y7(e){return"-"+e.toLowerCase()}function Ck(e){if(Tg.hasOwnProperty(e))return Tg[e];var t=e.replace(g7,y7);return Tg[e]=b7.test(t)?"-"+t:t}function v7(e,t){if(e===t)return!0;if(!e||!t)return!1;const n=Object.keys(e),i=Object.keys(t),o=n.length;if(i.length!==o)return!1;for(let l=0;l<o;l++){const u=n[l];if(e[u]!==t[u]||!Object.prototype.hasOwnProperty.call(t,u))return!1}return!0}var kg={exports:{}},Ag,Z1;function _7(){if(Z1)return Ag;Z1=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Ag=e,Ag}var jg,V1;function x7(){if(V1)return jg;V1=1;var e=_7();function t(){}function n(){}return n.resetWarningCache=t,jg=function(){function i(u,f,m,p,y,_){if(_!==e){var x=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw x.name="Invariant Violation",x}}i.isRequired=i;function o(){return i}var l={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:o,element:i,elementType:i,instanceOf:o,node:i,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:n,resetWarningCache:t};return l.PropTypes=l,l},jg}var K1;function w7(){return K1||(K1=1,kg.exports=x7()()),kg.exports}var S7=w7();const Lt=cl(S7),kr=Lt.oneOfType([Lt.string,Lt.number]),Rk={all:Lt.bool,grid:Lt.bool,aural:Lt.bool,braille:Lt.bool,handheld:Lt.bool,print:Lt.bool,projection:Lt.bool,screen:Lt.bool,tty:Lt.bool,tv:Lt.bool,embossed:Lt.bool},E7={orientation:Lt.oneOf(["portrait","landscape"]),scan:Lt.oneOf(["progressive","interlace"]),aspectRatio:Lt.string,deviceAspectRatio:Lt.string,height:kr,deviceHeight:kr,width:kr,deviceWidth:kr,color:Lt.bool,colorIndex:Lt.bool,monochrome:Lt.bool,resolution:kr,type:Object.keys(Rk)},{type:QU,...T7}=E7,k7={minAspectRatio:Lt.string,maxAspectRatio:Lt.string,minDeviceAspectRatio:Lt.string,maxDeviceAspectRatio:Lt.string,minHeight:kr,maxHeight:kr,minDeviceHeight:kr,maxDeviceHeight:kr,minWidth:kr,maxWidth:kr,minDeviceWidth:kr,maxDeviceWidth:kr,minColor:Lt.number,maxColor:Lt.number,minColorIndex:Lt.number,maxColorIndex:Lt.number,minMonochrome:Lt.number,maxMonochrome:Lt.number,minResolution:kr,maxResolution:kr,...T7},A7={...Rk,...k7};var j7={all:A7};const N7=e=>`not ${e}`,O7=(e,t)=>{const n=Ck(e);return typeof t=="number"&&(t=`${t}px`),t===!0?n:t===!1?N7(n):`(${n}: ${t})`},D7=e=>e.join(" and "),M7=e=>{const t=[];return Object.keys(j7.all).forEach(n=>{const i=e[n];i!=null&&t.push(O7(n,i))}),D7(t)},C7=R.createContext(void 0),R7=e=>e.query||M7(e),W1=e=>e?Object.keys(e).reduce((n,i)=>(n[Ck(i)]=e[i],n),{}):void 0,Lk=()=>{const e=R.useRef(!1);return R.useEffect(()=>{e.current=!0},[]),e.current},L7=e=>{const t=R.useContext(C7),n=()=>W1(e)||W1(t),[i,o]=R.useState(n);return R.useEffect(()=>{const l=n();v7(i,l)||o(l)},[e,t]),i},B7=e=>{const t=()=>R7(e),[n,i]=R.useState(t);return R.useEffect(()=>{const o=t();n!==o&&i(o)},[e]),n},P7=(e,t)=>{const n=()=>p7(e,t||{},!!t),[i,o]=R.useState(n),l=Lk();return R.useEffect(()=>{if(l){const u=n();return o(u),()=>{u&&u.dispose()}}},[e,t]),i},$7=e=>{const[t,n]=R.useState(e.matches);return R.useEffect(()=>{const i=o=>{n(o.matches)};return e.addListener(i),n(e.matches),()=>{e.removeListener(i)}},[e]),t},I7=(e,t,n)=>{const i=L7(t),o=B7(e);if(!o)throw new Error("Invalid or missing MediaQuery!");const l=P7(o,i),u=$7(l);return Lk(),R.useEffect(()=>{},[u]),R.useEffect(()=>()=>{l&&l.dispose()},[]),u},Bk=(()=>{const e=[];for(let t=0;t<60;t++)e.push(`${jr[t%10]}${Yr[t%12]}`);return e})();function z7(e){const t=Bk.indexOf(e);if(t<0)throw new Error(`Unknown : ${e}`);return t}function gm(e,t,n=1){const i=z7(e),o=t==="forward"?n:-n;return Bk[(i+o+60*1e3)%60]}const U7=60*1e3,H7=60*U7,G7=24*H7;function F7(e,t){const n=new Date(e.getTime()),i=n.getFullYear()+t,o=n.getMonth(),l=n.getDate();return new Date(Date.UTC(i,o,l,n.getUTCHours(),n.getUTCMinutes()))}function Ib(e){const t=new Date(e);return t.setSeconds(0,0),t}function Y7(e,t,n){const i=e.getHours(),o=n==="/"?(Math.floor((i+1)/2)*2-1+24)%24:(Math.floor(i/2)*2+1)%24,l=new Date(e);l.setHours(o,0,0,0);const u=new Date(l);u.setHours(o+2,0,0,0);const f=e.getTime()-l.getTime(),m=u.getTime()-e.getTime();return t==="backward"?f:m}function Pk(e,t,n,i=120,o="/"){const l=Ib(e),u=Y7(l,n,o),f=Ib(new Date(l.getTime()+u*120)),m=F7(e,i).getTime(),p=[];let y=gm(t,n,1);for(let _=f.getTime();_<=m;_+=10*G7)p.push({at:new Date(_),gz:y}),y=gm(y,n,1);return{firstChange:f,events:p}}function $k(e,t){const n=t==="forward"?e===""?"":"":e===""?"":"";return i=>i===n}function Ik(e,t,n,i){const o=$k(i,n);let l=t;const u=[];for(const f of e.events){const m=f.gz.charAt(1);o(m)&&(l=gm(l,n,1),u.push({at:f.at,gz:l}))}return{events:u}}function as(e){const t=e.getFullYear(),n=[{deg:315,name:""},{deg:345,name:""},{deg:15,name:""},{deg:45,name:""},{deg:75,name:""},{deg:105,name:""},{deg:135,name:""},{deg:165,name:""},{deg:195,name:""},{deg:225,name:""},{deg:255,name:""},{deg:285,name:""}],i={deg:315,name:""},o=n.map(f=>({name:f.name,date:Gn(t,f.deg)})).concat([{name:i.name,date:Gn(t+1,i.deg)},{name:"",date:Gn(t+1,285)}]),l=Gn(t,315),u=Gn(t+1,315);return o.filter(f=>f.date>=l&&f.date<u).sort((f,m)=>f.date.getTime()-m.date.getTime())}const q7={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Z7={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},V7=e=>q7[e]??("".includes(e)?e:null),K7=e=>Z7[e]??("".includes(e)?e:null);function X1(e){const t=V7(e[0]),n=K7(e[1]);if(!t||!n)throw new Error(`Invalid GZ: ${e}`);return`${t}${n}`}function Ed(e,t,n,i=120,o){function l(N){return N instanceof Date||(N=new Date(N)),Math.floor((N.getHours()+1)%24/2)}function u(N){return["","","","","","","","","","","",""][l(N)]}function f(N,M,D){const $=N.charAt(0),z=N.charAt(1),F=jr.indexOf($),K=Yr.indexOf(z),oe=M==="forward"?D:-D,Q=(F+oe%10+10)%10,Y=(K+oe%12+12)%12;return jr[Q]+Yr[Y]}const m=as(e).sort((N,M)=>N.date.getTime()-M.date.getTime());let p;if(n==="forward"){const N=m.findIndex(M=>M.date>=e);N>=0&&(p=m[N].date)}else{const N=m.filter(M=>M.date<=e);N.length&&(p=N[N.length-1].date)}function y(N,M){const D=u(N),$={:23,:1,:3,:5,:7,:9,:11,:13,:15,:17,:19,:21},z=$[D],F=(z+2)%24,K=new Date(N);if(K.setSeconds(0,0),n==="backward"&&M){const Q=u(M),Y=$[Q],ne=new Date(M);return ne.setHours(Y,0,0,0),ne}if(n==="forward"&&M){const Q=u(M),Y=$[Q],ne=new Date(M);if(ne.setHours(Y,0,0,0),ne>K)return ne}const oe=new Date(K);return n==="forward"?(oe.setHours(F,0,0,0),oe<=K&&oe.setDate(oe.getDate()+1)):(oe.setHours(z,0,0,0),oe>=K&&oe.setDate(oe.getDate()-1)),oe}new Date(e).setSeconds(0,0);const x=X1(jt(e,127.5)),S=y(e,p),T=Math.floor(n==="forward"?(S.getTime()-e.getTime())/6e4:(e.getTime()-S.getTime())/6e4),k=Math.round(T/120*(14400*60*1e3));let j=new Date(e.getTime()+k);try{const N=X1(jt(e,o));(n==="forward"&&x!==N||n==="backward"&&x!==N)&&(j=new Date(e.getTime()+6e4))}catch{}const C=i/10,P=[];for(let N=0;N<C;N++){const M=new Date(j);M.setFullYear(M.getFullYear()+N*10),M.setSeconds(0,0);const D=f(t,n,N+1);P.push({at:M,gz:D})}return{natalMonthPillar:t,firstChange:j,mPillars:[],events:P}}function W7(e,t){const i=(t.getTime()-e.getTime())/(365.2425*24*60*60*1e3);return Math.max(0,Math.floor(i))}function zk(e,t,n,i,o){const l=$k(i,n);let u=t;const f=[];for(const m of e.events){const p=m.gz.charAt(1);l(p)&&(u=gm(u,n,1),f.push({at:m.at,gz:u,age:W7(o,m.at)}))}return{events:f}}function X7(e){const t=Number(e.birthDay.slice(0,4)),n=Number(e.birthDay.slice(4,6)),i=Number(e.birthDay.slice(6,8));let o=12,l=0;return e.birthTime&&e.birthTime!==""&&/^\d{4}$/.test(e.birthTime)&&(o=Number(e.birthTime.slice(0,2)),l=Number(e.birthTime.slice(2,4))),new Date(t,n-1,i,o,l,0,0)}function Zm(e){const t=X7(e),n=!e.birthPlace||typeof e.birthPlace=="object"&&e.birthPlace.name==="",i=ul(t,e.birthPlace?.lon??null,n);return Ib(i)}function By(e,t){const n=e.birthPlace?.lon??127.5,i=Zm(e),o=_t(i,t),l=$i(i,t,o.charAt(0));return{year:ut(i,n),month:jt(i,n),day:o,hour:l}}const J7=(()=>{const e=[];for(let t=0;t<60;t++)e.push(`${jr[t%10]}${Yr[t%12]}`);return e})(),Q7=e=>J7.indexOf(e),Ng=e=>{if(Q7(e)<0)throw new Error(`Unknown : ${e}`);return{stem:e[0],branch:e[1]}};function Py(e){return typeof e=="object"&&e!==null}function e4(e){return Py(e)&&"default"in e}function t4(e){return Py(e)&&typeof e.lunar2solar=="function"}function n4(e){if(!Py(e))throw new Error("Invalid lunar2solar result");const t=e.cYear,n=e.cMonth,i=e.cDay,o=e.isLeap;if(typeof t!="number"||typeof n!="number"||typeof i!="number")throw new Error("Invalid lunar2solar fields");return{cYear:t,cMonth:n,cDay:i,isLeap:typeof o=="boolean"?o:void 0}}function r4(e){const t=e4(e)?e.default:e;if(!t4(t))throw new Error("solarlunar.lunar2solar not found");return{lunar2solar:(i,o,l,u)=>{const f=t.lunar2solar(i,o,l,!!u);return n4(f)}}}const i4=r4(My),J1=e=>e<10?`0${e}`:`${e}`;function $y(e){const t=e,n=typeof t.birthDay=="string"?t.birthDay:"",i=typeof t.calendarType=="string"?t.calendarType:"solar";if(n.length<8||i!=="lunar")return e;const o=Number(n.slice(0,4)),l=Number(n.slice(4,6)),u=Number(n.slice(6,8)),f=["isLeap","isLeapMonth","leapMonth","leap","lunarLeap"];let m=!1;for(const p of f){const y=t[p];if(typeof y=="boolean"){m=y;break}if(typeof y=="number"){m=y===1;break}if(typeof y=="string"){m=y==="1"||y.toLowerCase()==="true";break}}try{const p=i4.lunar2solar(o,l,u,m),y=`${p.cYear}${J1(p.cMonth)}${J1(p.cDay)}`;return{...e,birthDay:y,calendarType:"solar"}}catch{return e}}function s4(e,t="/"){const n=R.useMemo(()=>$y(e),[e]),i=R.useMemo(()=>Zm(n),[n]),o=R.useMemo(()=>By(n,t),[n,t]);return R.useMemo(()=>{const l=Ed(i,o.month,n.dir,120,n?.birthPlace?.lon??127.5),u=new Date;function f(N,M){let D=null;const $=M.getTime();for(const z of N)if(z.at.getTime()<=$)D=z;else break;return D}const m=f(l.events,u)?.gz??o.month,p=Ng(m),y=u.getFullYear(),_=Gn(y,315),S=_&&u>=_?y:y-1,T=ut(new Date(S,1,10,0,0,0),127.5),k=Ng(T),j=jt(u,127.5),C=Ng(j),P=[];return C&&P.push({key:"wolun",label:"",data:C}),k&&P.push({key:"seun",label:"",data:k}),p&&P.push({key:"daeun",label:"",data:p}),P},[i,n.dir,o.month,n.birthPlace?.lon])}function ed(e){const t=n=>n.toString().padStart(2,"0");return`${e.getFullYear()} ${t(e.getMonth()+1)} ${t(e.getDate())} ${t(e.getHours())} ${t(e.getMinutes())}`}function dc(e){return e<10?`0${e}`:`${e}`}function a4(e){return`${dc(e.getHours())}:${dc(e.getMinutes())}`}function o4(e){return`${e.getFullYear()}-${dc(e.getMonth()+1)}-${dc(e.getDate())} ${dc(e.getHours())}:${dc(e.getMinutes())}`}const fi=bd()(Z2((e,t)=>{const n=new Date,i="/",o=127.5,l=o,u=ut(n,l),f=jt(n,l),m=_t(n,i);return{date:n,scope:"",rule:i,lon:o,yearGZ:u,monthGZ:f,dayGZ:m,setDate:p=>{const{rule:y,lon:_}=t(),x=typeof _=="number"?_:void 0;e({date:p,yearGZ:ut(p,x),monthGZ:jt(p,x),dayGZ:_t(p,y)})},resetDate:()=>{const{rule:p,lon:y}=t(),_=new Date,x=typeof y=="number"?y:void 0;e({date:_,yearGZ:ut(_,x),monthGZ:jt(_,x),dayGZ:_t(_,p)})},resetMonth:()=>{const{lon:p}=t(),y=new Date;e({date:y,monthGZ:jt(y,typeof p=="number"?p:void 0)})},setScope:p=>e({scope:p}),setRule:p=>{const{date:y,lon:_}=t(),x=typeof _=="number"?_:void 0;e({rule:p,yearGZ:ut(y,x),monthGZ:jt(y,x),dayGZ:_t(y,p)})},setLon:p=>{const{date:y,rule:_}=t(),x=typeof p=="number"?p:void 0;e({lon:p,yearGZ:ut(y,x),monthGZ:jt(y,x),dayGZ:_t(y,_)})},setFromEvent:(p,y)=>{const{rule:_,lon:x}=t(),S=typeof x=="number"?x:void 0;e({date:p.at,scope:y,yearGZ:ut(p.at,S),monthGZ:jt(p.at,S),dayGZ:_t(p.at,_)})},forceKey:new Date}},{name:"luck-picker-v1",merge:(e,t)=>{const n=e;return n.date&&typeof n.date=="string"&&(n.date=new Date(n.date)),{...t,...n}}})),dl={Classic:"",Modern:""};function Jt(e,t){const i={:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}}[e];return i?i[t]??"":""}function l4(e,t){return{:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}}[e]?.[t]??""}function c4(e,t){const n={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},i={:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}},o=n[e];return o&&i[o]?i[o][t]??"":""}function u4(e,t){return{:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}}[e]?.[t]??""}function d4(e,t){const n={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},i={:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}},o=n[e];return o&&i[o]?i[o][t]??"":""}function Qt(e){const{baseBranch:t,targetBranch:n,era:i,gaehwa:o}=e;return!t||!n?"":i===""?o?l4(t,n):c4(t,n):o?u4(t,n):d4(t,n)}function Td(e,t="/",n=100){const i=R.useMemo(()=>$y(e),[e]),o=R.useMemo(()=>Zm(i),[i]),l=R.useMemo(()=>By(i,t),[i,t]),u=(f,m)=>{const p=m.getFullYear()-f.getFullYear(),y=m.getMonth()-f.getMonth(),_=m.getDate()-f.getDate(),x=y<0||y===0&&_<0?p-1:p;return Math.max(0,x)};return R.useMemo(()=>Ed(o,l.month,i.dir,n,i.birthPlace?.lon??127.5).events.map(m=>({...m,age:u(o,m.at)})),[o,l.month,i.dir,n,i.birthPlace?.lon])}function Og(e){return e instanceof Date&&!Number.isNaN(e.getTime())}function h4(e,t){if(!Array.isArray(e)||e.length===0||!Og(t))return{gz:"",at:t,index:-1};const n=e;for(let l=0;l<n.length;l++){const u=n[l],f=n[l+1];if(!Og(u.at))continue;if(t.getTime()>=u.at.getTime()&&(!f||Og(f.at)&&t.getTime()<f.at.getTime()))return{gz:u.gz??"",at:u.at,index:l}}if(t.getTime()<n[0].at.getTime()){const l=n[0];return{gz:l.gz??"",at:l.at,index:0}}const i=n.length-1,o=n[i];return{gz:o.gz??"",at:o.at,index:i}}function Iy(e,t,n){const{date:i,rule:o,lon:l}=fi(),u=R.useMemo(()=>n??i??new Date,[n,i]),f=Td(e,e?.mingSikType),{gz:m}=h4(f,u);return R.useMemo(()=>{try{const p=l??e?.birthPlace?.lon??127.5,y=o??e?.mingSikType??t??"/";return{dae:{gz:m,at:u},se:{gz:ut(u,p),at:u},wol:{gz:jt(u,p),at:u},il:{gz:_t(u,y),at:u}}}catch{const p=new Date;return{dae:{gz:"",at:p},se:{gz:"",at:p},wol:{gz:"",at:p},il:{gz:"",at:p}}}},[u,o,l,e,t,m])}const zy={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Uy={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},f4=Object.fromEntries(Object.entries(zy).map(([e,t])=>[t,e])),m4=Object.fromEntries(Object.entries(Uy).map(([e,t])=>[t,e])),p4=new Set(["","","","","","","","","",""]),g4=new Set(["","","","","","","","","","","",""]),b4=[{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""}],y4=(()=>{const e={};for(const t of b4){const[n,i]=t.keys;e[n]={label:t.label,elem:t.elem},e[i]={label:t.label,elem:t.elem}}return e})();function v4(e){switch(e){case"":return"bg-green-600 text-white";case"":return"bg-red-600 text-white";case"":return"bg-yellow-600 text-white";case"":return"bg-gray-500 text-white";case"":return"bg-blue-700 text-white";default:return"bg-neutral-700 text-white"}}const _4={:1,:2,:3};function x4(e){return e.includes("")?3:e.includes("")?2:(e.includes(""),1)}const w4={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};function S4(e){switch(w4[e]){case"":return"bg-green-600 text-white border-green-600";case"":return"bg-red-600 text-white border-red-600";case"":return"bg-yellow-500 text-white border-yellow-500";case"":return"bg-gray-400 text-white border-gray-400";case"":return"bg-blue-900 text-white border-blue-600";default:return"bg-neutral-700 text-white border-neutral-700"}}function E4({data:e,hourTable:t}){const{date:n}=fi(),i=Wn(W=>W.settings),o=i.showNabeum??!0,l=e.mingSikType??t??"/",u=!e.birthPlace||e.birthPlace.name===""||!e.birthPlace.lon?127.5:e.birthPlace.lon,{solarY:f,solarM:m,solarD:p}=R.useMemo(()=>{let W=Number(e.birthDay?.slice(0,4)??2e3),he=Number(e.birthDay?.slice(4,6)??1),se=Number(e.birthDay?.slice(6,8)??1);if(e.calendarType==="lunar"){const ve=br(W,he,se);W=ve.getFullYear(),he=ve.getMonth()+1,se=ve.getDate()}return{solarY:W,solarM:he,solarD:se}},[e.birthDay,e.calendarType]),[y,_]=R.useState(!1);R.useEffect(()=>{f&&m&&p&&_(pm(f,m,p))},[f,m,p]);const x=!e.birthTime||e.birthTime==="";function S(W,he){const se=!W.birthTime||W.birthTime==="";let ve=Number(W.birthDay.slice(0,4)),ke=Number(W.birthDay.slice(4,6)),je=Number(W.birthDay.slice(6,8));if(W.calendarType==="lunar"){const tt=br(ve,ke,je);ve=tt.getFullYear(),ke=tt.getMonth()+1,je=tt.getDate()}const Me=se?4:Number(W.birthTime.slice(0,2)),Ee=se?30:Number(W.birthTime.slice(2,4)),Ie=new Date(ve,ke-1,je,Me,Ee,0,0),Pe=!W.birthPlace||W.birthPlace.name===""||!W.birthPlace.lon,Ye=Pe?127.5:W.birthPlace.lon,Re=W.corrected instanceof Date&&!Number.isNaN(W.corrected.getTime());let fe;Re?fe=W.corrected:Pe?fe=Ie:fe=ul(Ie,Ye,se);const Le=he?new Date(fe.getTime()-3600*1e3):fe,ce=W.mingSikType??"/",me=ut(Le,Ye),$e=jt(Le,Ye),He=_t(Le,ce),Be=se?null:$i(Le,ce);return{corrected:Le,year:{stem:me.charAt(0),branch:me.charAt(1)},month:{stem:$e.charAt(0),branch:$e.charAt(1)},day:{stem:He.charAt(0),branch:He.charAt(1)},hour:Be?{stem:Be.charAt(0),branch:Be.charAt(1)}:null}}const[T,k]=R.useState(()=>S(e,y));R.useEffect(()=>{k(S(e,y))},[e,y]);const C=!e.correctedLocal||e.correctedLocal.trim()===""||x?"":o4(T.corrected),P=e.id??`${e.birthDay}-${e.birthTime}-${e.name??""}`,N=T.day.stem,[M,D]=R.useState(null),[$,z]=R.useState(()=>e.mingSikType==="");R.useEffect(()=>{D(null),z(e.mingSikType==="")},[P,e.mingSikType]);const F=R.useMemo(()=>($?Jb:z2)[N]??[],[$,N]),K=M??T.hour,oe=i.sinsalBase===""?T.day.branch:T.year.branch,Q=_d(W=>W.setManualHour),Y=(W,he)=>{const se={stem:W,branch:he};D(se),Q(se)},ne=W=>i.showSibiUnseong?Jt(N,W):null,ie=W=>i.showSibiSinsal?Qt({baseBranch:oe,targetBranch:W,era:Dg(i.sinsalMode),gaehwa:i.sinsalBloom}):null,Se=s4(e,l),J=I7({query:"(min-width: 992px)"}),le=i.hiddenStem==="regular"?"main":"all",te=i.exposure,be=te===""?0:_4[te],Z=be===0?[]:Se.filter(W=>x4(W.label)<=be),G=pm(f,m,p),B=()=>_(W=>!W),q=Iy(e,t,n),V=q.dae.gz,H=q.se.gz,X=q.wol.gz;return g.jsxs("div",{className:"w-full max-w-[640px] mx-auto",children:[g.jsxs("div",{className:"mb-1 flex flex-wrap items-end justify-between gap-2 p-2",children:[g.jsxs("div",{children:[g.jsxs("div",{className:"text-md desk:text-xl font-bold text-neutral-900 dark:text-neutral-100",children:[(e.name?.trim()||"")+" ",g.jsxs("span",{className:"text-sm text-neutral-500 dark:text-neutral-400 mr-2",children:["(",e.gender,")"]}),G&&g.jsxs("button",{onClick:B,className:`px-2 py-0.5 text-xs rounded cursor-pointer border
                  ${y?"bg-red-600 text-white border-red-600":"bg-neutral-100 text-neutral-700 border-neutral-300 dark:bg-neutral-800 dark:text-neutral-200 dark:border-neutral-700"}`,children:[" ",y?"ON":"OFF"]})]}),g.jsxs("div",{className:"text-sm text-neutral-600 dark:text-neutral-400",children:[k4(e.birthDay,e.birthTime),e.birthPlace?.name?`  ${": "+e.birthPlace.name}`:""]}),g.jsxs("div",{className:"text-sm text-neutral-600 dark:text-neutral-400",children:[": ",C]})]}),g.jsxs("div",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:[" : ",u.toFixed(2),"  ",l," "]})]}),g.jsxs("div",{className:`grid gap-2 p-2 desk:p-0 ${Z.length===0?"grid-cols-1":Z.length===1?"grid-cols-[2fr_8fr]":Z.length===2?"grid-cols-[3.5fr_6.5fr]":"grid-cols-[4fr_5fr]"}`,children:[Z.length>0&&(J?g.jsxs("section",{className:"rounded-lg bg-white dark:bg-neutral-900 text-neutral-900 dark:text-white border border-neutral-200 dark:border-neutral-700 shadow",children:[g.jsx("div",{className:"px-3 py-1 text-md text-neutral-600 dark:text-neutral-300",children:g.jsx("b",{children:""})}),g.jsx("div",{className:"pb-2",children:g.jsx("div",{className:`grid gap-2 p-3 ${Z.length===1?"grid-cols-1":Z.length===2?"grid-cols-2":"grid-cols-3"}`,children:Z.map(W=>{let he=W.data.stem,se=W.data.branch;W.label.includes("")&&V&&(he=V.charAt(0),se=V.charAt(1)),W.label.includes("")&&H&&(he=H.charAt(0),se=H.charAt(1)),W.label.includes("")&&X&&(he=X.charAt(0),se=X.charAt(1));const ve=ne(se),ke=ie(se);return g.jsxs("div",{className:"rounded-xl bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 overflow-hidden",children:[g.jsx("div",{className:"px-2 py-1 text-center text-xs tracking-wider bg-neutral-50 dark:bg-neutral-800/60 text-neutral-600 dark:text-neutral-300",children:W.label}),g.jsxs("div",{className:"p-2 flex flex-col items-center gap-1",children:[i.showSipSin&&g.jsx("div",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:Ar(N,{stem:he})}),g.jsx(Ha,{value:he,kind:"stem",charType:i.charType,thinEum:i.thinEum}),g.jsx(Ha,{value:se,kind:"branch",charType:i.charType,thinEum:i.thinEum}),g.jsx(Yu,{branch:se,dayStem:N,mode:le,mapping:i.hiddenStemMode}),(i.showSibiUnseong||i.showSibiSinsal||o)&&g.jsxs("div",{className:"text-[11px] text-neutral-500 dark:text-neutral-400 mt-1 text-center space-y-0.5",children:[i.showSibiUnseong&&g.jsx("div",{children:ve}),i.showSibiSinsal&&g.jsx("div",{children:ke}),o&&g.jsx(hf,{stem:he,branch:se})]})]})]},W.key)})})})]}):g.jsxs("div",{className:"rounded-lg bg-white dark:bg-neutral-900 text-neutral-900 dark:text-white border border-neutral-200 dark:border-neutral-700 shadow",children:[g.jsx("div",{className:"px-3 py-1 text-[11px] text-neutral-600 dark:text-neutral-300",children:""}),g.jsx("div",{className:"pb-2",children:g.jsx("div",{className:`grid gap-1 p-0 ${Z.length===1?"grid-cols-1":Z.length===2?"grid-cols-2":"grid-cols-3"}`,children:Z.map(W=>{let he=W.data.stem,se=W.data.branch;W.label.includes("")&&V&&(he=V.charAt(0),se=V.charAt(1)),W.label.includes("")&&H&&(he=H.charAt(0),se=H.charAt(1)),W.label.includes("")&&X&&(he=X.charAt(0),se=X.charAt(1));const ve=ne(se),ke=ie(se);return g.jsxs("div",{className:"rounded-xl bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 overflow-hidden",children:[g.jsx("div",{className:"py-1 text-center text-xs tracking-wider bg-neutral-50 dark:bg-neutral-800/60 text-neutral-600 dark:text-neutral-300",children:W.label}),g.jsxs("div",{className:"py-2 flex flex-col items-center gap-1",children:[i.showSipSin&&g.jsx("div",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:Ar(N,{stem:he})}),g.jsx(Ha,{value:he,kind:"stem",charType:i.charType,thinEum:i.thinEum}),g.jsx(Ha,{value:se,kind:"branch",charType:i.charType,thinEum:i.thinEum}),g.jsx(Yu,{branch:se,dayStem:N,mode:le,mapping:i.hiddenStemMode}),(i.showSibiUnseong||i.showSibiSinsal||o)&&g.jsxs("div",{className:"text-[11px] text-neutral-500 dark:text-neutral-400 mt-1 text-center space-y-0.5",children:[i.showSibiUnseong&&g.jsx("div",{children:ve}),i.showSibiSinsal&&g.jsx("div",{children:ke}),o&&g.jsx(hf,{stem:he,branch:se})]})]})]},W.key)})})})]})),J?g.jsxs("section",{className:"flex-2 rounded-lg bg-white dark:bg-neutral-900 text-neutral-900 dark:text-white border border-neutral-200 dark:border-neutral-700 shadow",children:[g.jsx("div",{className:"px-3 py-1 text-md text-neutral-600 dark:text-neutral-300",children:g.jsx("b",{children:""})}),g.jsx("div",{className:"pb-2",children:g.jsx("div",{className:"grid grid-cols-4 gap-2 p-3",children:[{key:"hour",label:"",data:K},{key:"day",label:"",data:T.day},{key:"month",label:"",data:T.month},{key:"year",label:"",data:T.year}].map(W=>g.jsxs("div",{className:"rounded-xl bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 overflow-hidden",children:[g.jsx("div",{className:"px-2 py-1 text-center text-xs tracking-wider bg-neutral-50 dark:bg-neutral-800/60 text-neutral-600 dark:text-neutral-300",children:W.label}),g.jsx("div",{className:"p-2 flex flex-col items-center gap-1",children:W.data?g.jsxs(g.Fragment,{children:[i.showSipSin&&g.jsx("div",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:Ar(N,{stem:W.data.stem})}),g.jsx(Ha,{value:W.data.stem,kind:"stem",charType:i.charType,thinEum:i.thinEum}),g.jsx(Ha,{value:W.data.branch,kind:"branch",charType:i.charType,thinEum:i.thinEum}),g.jsx(Yu,{branch:W.data.branch,dayStem:N,mode:le,mapping:i.hiddenStemMode}),(i.showSibiUnseong||i.showSibiSinsal||o)&&g.jsxs("div",{className:"text-[11px] text-neutral-500 dark:text-neutral-400 mt-1 text-center space-y-0.5",children:[i.showSibiUnseong&&g.jsx("div",{children:Jt(N,W.data.branch)}),i.showSibiSinsal&&g.jsx("div",{children:Qt({baseBranch:i.sinsalBase===""?T.day.branch:T.year.branch,targetBranch:W.data.branch,era:Dg(i.sinsalMode),gaehwa:i.sinsalBloom})}),o&&g.jsx(hf,{stem:W.data.stem,branch:W.data.branch})]})]}):g.jsx("span",{className:"text-[10px] desk:text-xs text-neutral-500 dark:text-neutral-400",children:" "})})]},W.key))})})]}):g.jsxs("div",{className:"flex-2 rounded-lg bg-white dark:bg-neutral-900 text-neutral-900 dark:text-white border border-neutral-200 dark:border-neutral-700 shadow",children:[g.jsx("div",{className:"px-3 py-1 text-[11px] text-neutral-600 dark:text-neutral-300",children:""}),g.jsx("div",{className:"px-1 pb-2",children:g.jsx("div",{className:"grid grid-cols-4 gap-1",children:[{key:"hour",label:"",data:K},{key:"day",label:"",data:T.day},{key:"month",label:"",data:T.month},{key:"year",label:"",data:T.year}].map(W=>g.jsxs("div",{className:"rounded-xl bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 overflow-hidden",children:[g.jsx("div",{className:"py-1 text-center text-xs tracking-wider bg-neutral-50 dark:bg-neutral-800/60 text-neutral-600 dark:text-neutral-300",children:W.label}),g.jsx("div",{className:"py-2 flex flex-col items-center gap-1",children:W.data?g.jsxs(g.Fragment,{children:[i.showSipSin&&g.jsx("div",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:Ar(N,{stem:W.data.stem})}),g.jsx(Ha,{value:W.data.stem,kind:"stem",charType:i.charType,thinEum:i.thinEum}),g.jsx(Ha,{value:W.data.branch,kind:"branch",charType:i.charType,thinEum:i.thinEum}),g.jsx(Yu,{branch:W.data.branch,dayStem:N,mode:le,mapping:i.hiddenStemMode}),(i.showSibiUnseong||i.showSibiSinsal||o)&&g.jsxs("div",{className:"text-[11px] text-neutral-500 dark:text-neutral-400 mt-1 text-center space-y-0.5",children:[i.showSibiUnseong&&g.jsx("div",{children:Jt(N,W.data.branch)}),i.showSibiSinsal&&g.jsx("div",{children:Qt({baseBranch:i.sinsalBase===""?T.day.branch:T.year.branch,targetBranch:W.data.branch,era:Dg(i.sinsalMode),gaehwa:i.sinsalBloom})}),o&&g.jsx(hf,{stem:W.data.stem,branch:W.data.branch})]})]}):g.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400 text-nowrap",children:" "})})]},W.key))})})]})]}),x&&g.jsxs("div",{className:"mt-4 p-3 border rounded bg-neutral-50 dark:bg-neutral-800",children:[g.jsxs("div",{className:"flex items-center justify-between mb-2",children:[g.jsx("span",{className:"font-semibold text-sm text-neutral-700 dark:text-neutral-300",children:" "}),g.jsx("button",{onClick:()=>z(W=>!W),className:"px-2 py-1 text-xs rounded border bg-white dark:bg-neutral-900 border-neutral-300 dark:border-neutral-600 cursor-pointer",children:$?" : ":" : "})]}),g.jsx("div",{className:"grid grid-cols-4 gap-2",children:F.map(W=>{const he=W.charAt(0),se=W.charAt(1),ve=M?.stem===he&&M?.branch===se;return g.jsx("button",{onClick:()=>Y(he,se),className:`p-2 text-xs rounded border cursor-pointer ${ve?S4(se):"bg-white dark:bg-neutral-900 text-neutral-700 dark:text-neutral-200 border-neutral-300 dark:border-neutral-600"}`,title:`${W} ( )`,children:W},W)})})]})]})}function hf({stem:e,branch:t}){const n=zy[e]??e,i=Uy[t]??t,o=`${n}${i}`,l=y4[o];if(!l)return null;const u=v4(l.elem);return g.jsx("span",{className:`inline-block px-1.5 py-[2px] rounded ${u} border border-white/10 text-nowrap`,title:`${l.label}  ${l.elem}`,children:l.label})}function T4(e){return qm(e)&&("Classic"in e||"Modern"in e||"classic"in e||"modern"in e)}function Dg(e){const t=dl;return T4(t)?e==="classic"?t.Classic:t.Modern:e}function Ha({value:e,kind:t,charType:n,thinEum:i}){const{settings:o}=Wn(),l=hi(e,t,o),u=n===""?t==="stem"?zy[e]??e:Uy[e]??e:t==="stem"?f4[e]??e:m4[e]??e,f=t==="stem"?p4.has(e):g4.has(e),m=i&&f?"font-thin":"font-bold";return g.jsx("div",{className:`w-11 h-11 sm:w-14 sm:h-14 md:w-14 md:h-14 rounded-md ${l}
                  flex items-center justify-center border border-neutral-200 dark:border-neutral-800`,children:g.jsx("span",{className:`text-[24px] md:text-2xl ${m}`,children:u})})}function k4(e,t){if(!e||!/^\d{8}$/.test(e))return"";const n=e.slice(0,4),i=e.slice(4,6),o=e.slice(6,8),l=`${n}-${i}-${o}`;return!t||t===""||!/^\d{4}$/.test(t)?l:`${l} ${t.slice(0,2)}:${t.slice(2,4)}`}function Xa(e){const t=Number(e.birthDay?.slice(0,4)),n=Number(e.birthDay?.slice(4,6))-1,i=Number(e.birthDay?.slice(6,8)),o=!e.birthTime||e.birthTime===""?0:Number(e.birthTime?.slice(0,2)),l=!e.birthTime||e.birthTime===""?0:Number(e.birthTime?.slice(2,4)),u=new Date(t,n,i,o,l,0,0);if(isNaN(u.getTime()))throw new Error(`Invalid date: ${e.birthDay} ${e.birthTime}`);const f=!e.birthPlace||typeof e.birthPlace=="object"&&e.birthPlace.name==="";return ul(u,e.birthPlace?.lon??127.5,f)}function Vm(e,t){const n=e.length;if(n===0||!t)return 0;const i=e[0].at.getTime(),o=e[n-1].at.getTime(),l=t.getTime();if(l<=i)return 0;if(l>=o)return n-1;for(let u=0;u<n-1;u+=1){const f=e[u].at.getTime(),m=e[u+1].at.getTime();if(l>=f&&l<m)return u}return 0}const Uk={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Hk={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},A4=Object.fromEntries(Object.entries(Uk).map(([e,t])=>[t,e])),j4=Object.fromEntries(Object.entries(Hk).map(([e,t])=>[t,e]));function Q1(e,t,n){return n===""?t==="stem"?Uk[e]??e:Hk[e]??e:t==="stem"?A4[e]??e:j4[e]??e}const N4=new Set(["","","","","","","","","",""]),O4=new Set(["","","","","","","","","","","",""]);function eS(e,t){return t==="stem"?N4.has(e):O4.has(e)}function D4(e){return typeof e=="object"&&e!==null}function M4(e){return D4(e)&&("Classic"in e||"Modern"in e||"classic"in e||"modern"in e)}function C4(e){const t=dl;return M4(t)?e==="classic"?t.Classic:t.Modern:e}const R4=!1,tS=e=>e<10?`0${e}`:`${e}`;function L4(e){const t=e,n=typeof t.birthDay=="string"?t.birthDay:"",i=typeof t.calendarType=="string"?t.calendarType:"solar";if(n.length<8)return e;const o=Number(n.slice(0,4)),l=Number(n.slice(4,6)),u=Number(n.slice(6,8)),f=["isLeap","isLeapMonth","leapMonth","leap","lunarLeap"];let m=!1;for(const p of f){const y=t[p];if(typeof y=="boolean"){m=y;break}if(typeof y=="number"){m=y===1;break}if(typeof y=="string"){m=y==="1"||y.toLowerCase()==="true";break}}if(i==="lunar")try{const p=br(o,l,u,0,0),y=`${p.getFullYear()}${tS(p.getMonth()+1)}${tS(p.getDate())}`;return{...e,birthDay:y,calendarType:"solar"}}catch{return e}return e}function B4({data:e}){const t=Td(e),n=R.useMemo(()=>{const D=L4(e);return Xa(D)},[e]),i=R.useMemo(()=>{const D=e.mingSikType??"/";return _t(n,D).charAt(0)},[n,e.mingSikType]),{date:o,setFromEvent:l}=fi(),u=R.useMemo(()=>Vm(t,o),[t,o]),f=Wn(D=>D.settings),{charType:m,thinEum:p,showSipSin:y,showSibiUnseong:_,showSibiSinsal:x,sinsalBase:S,sinsalMode:T,sinsalBloom:k}=f,j=!e.birthPlace||e.birthPlace.name===""||e.birthPlace.lon===0?127.5:e.birthPlace.lon,C=e.mingSikType??"/",P=S===""?_t(n,C).charAt(1):ut(n,j).charAt(1),N=D=>_?Jt(i,D):null,M=D=>x?Qt({baseBranch:P,targetBranch:D,era:C4(T),gaehwa:!!k}):null;return g.jsxs("div",{className:"w-full max-w-[640px] mx-auto rounded-xl bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 overflow-hidden",children:[g.jsx("div",{className:"px-3 py-2 text-sm font-semibold tracking-wider bg-neutral-50 dark:bg-neutral-800/60 text-neutral-700 dark:text-neutral-300",children:""}),g.jsx("div",{className:"flex gap-0.5 desk:gap-1 py-2 desk:p-2 flex-row-reverse",children:t.map((D,$)=>{const z=D.gz.charAt(0),F=D.gz.charAt(1),K=P4(n,D.at),oe=$===u,Q=Q1(z,"stem",m),Y=Q1(F,"branch",m),ne=eS(z,"stem"),ie=eS(F,"branch"),Se=p&&ne?"font-thin":"font-bold",J=p&&ie?"font-thin":"font-bold",le=N(F),te=M(F);return g.jsxs("div",{onClick:()=>l(D,""),className:`flex-1 rounded-sm desk:rounded-lg bg-white dark:bg-neutral-900 overflow-hidden cursor-pointer ${oe?"border border-yellow-500":"border border-neutral-200 dark:border-neutral-800 hover:border-yellow-500"}`,title:`${D.gz}  ${D.at.toLocaleDateString()}`,children:[g.jsx("div",{className:"desk:px-2 py-1 text-center text-[10px] bg-neutral-50 dark:bg-neutral-800/60 text-neutral-600 dark:text-neutral-300",children:K}),g.jsxs("div",{className:"p-2 flex flex-col items-center gap-0.5",children:[y&&g.jsx("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-nowrap",children:Ar(i,{stem:z})}),g.jsx("div",{className:`w-8 h-8 md:w-10 md:h-10 rounded-sm md:rounded-lg flex items-center justify-center border border-neutral-200 dark:border-neutral-800 ${hi(z,"stem",f)}`,children:g.jsx("span",{className:`text-[20px] md:text-xl ${Se}`,children:Q})}),g.jsx("div",{className:`w-8 h-8 md:w-10 md:h-10 rounded-sm md:rounded-lg flex items-center justify-center border border-neutral-200 dark:border-neutral-800 ${hi(F,"branch",f)}`,children:g.jsx("span",{className:`text-[20px] md:text-xl ${J}`,children:Y})}),y&&g.jsx("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-nowrap",children:Ar(i,{branch:F})}),(_||x)&&g.jsxs("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 mt-1 text-center space-y-0.5 text-nowrap",children:[_&&g.jsx("div",{children:le}),x&&g.jsx("div",{children:te})]})]})]},`${D.gz}-${$}`)})})]})}function P4(e,t){const i=(t.getTime()-e.getTime())/(365.2425*24*60*60*1e3);return Math.max(0,Math.round(i))}function Km(e,t){const n=e,i=typeof n.isUnknownTime=="boolean"?n.isUnknownTime:!1,o=typeof n.birthTime=="string"&&/^(?:\d{4}|\d{2}:\d{2})$/.test(n.birthTime),l=typeof n.birthHour=="number",u=typeof n.birthMinute=="number";if(i||!(o||l||u)){const m=new Date(t);return m.setDate(m.getDate()+1),m.setHours(4,30,0,0),m}return t}const Gk={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Fk={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},$4=Object.fromEntries(Object.entries(Gk).map(([e,t])=>[t,e])),I4=Object.fromEntries(Object.entries(Fk).map(([e,t])=>[t,e]));function nS(e,t,n){return n===""?t==="stem"?Gk[e]??e:Fk[e]??e:t==="stem"?$4[e]??e:I4[e]??e}const z4=new Set(["","","","","","","","","",""]),U4=new Set(["","","","","","","","","","","",""]);function rS(e,t){return t==="stem"?z4.has(e):U4.has(e)}function H4(e){return typeof e=="object"&&e!==null}function G4(e){return H4(e)&&("Classic"in e||"Modern"in e||"classic"in e||"modern"in e)}function F4(e){const t=dl;return G4(t)?e==="classic"?t.Classic:t.Modern:e}function Mg(e){return new Date(e,6,2,12,0,0,0)}function Y4(e,t){return t-e+1}const q4=!1,iS=e=>e<10?`0${e}`:`${e}`;function Z4(e){const t=e,n=typeof t.birthDay=="string"?t.birthDay:"",i=typeof t.calendarType=="string"?t.calendarType:"solar";if(n.length<8)return e;const o=Number(n.slice(0,4)),l=Number(n.slice(4,6)),u=Number(n.slice(6,8)),f=["isLeap","isLeapMonth","leapMonth","leap","lunarLeap"];let m=!1;for(const p of f){const y=t[p];if(typeof y=="boolean"){m=y;break}if(typeof y=="number"){m=y===1;break}if(typeof y=="string"){m=y==="1"||y.toLowerCase()==="true";break}}if(i==="lunar")try{const p=br(o,l,u,0,0),y=`${p.getFullYear()}${iS(p.getMonth()+1)}${iS(p.getDate())}`;return{...e,birthDay:y,calendarType:"solar"}}catch{return e}return e}function V4({data:e,list:t,onSelect:n}){const i=Wn(z=>z.settings),{date:o,setFromEvent:l}=fi(),[u,f]=R.useState(()=>t);R.useEffect(()=>{t&&t.length>0&&f(t)},[t]);const m=Xa(e),p=R.useMemo(()=>Km(e,m),[e,m]),y=R.useMemo(()=>p.getFullYear(),[p]),_=!e.birthPlace||e.birthPlace.name===""||e.birthPlace.lon===0?127.5:e.birthPlace.lon,x=R.useMemo(()=>{if(!o)return[];const z=o.getFullYear(),F=Mg(z),K=ut(F,_);return[{at:F,gz:K}]},[o,_]),S=t.length>0?t:u.length>0?u:x,T=R.useMemo(()=>[...S].sort((z,F)=>z.at.getTime()-F.at.getTime()),[S]),k=R.useMemo(()=>{if(T.length===0)return 0;const z=Vm(T,o);return z<0?0:z>=T.length?T.length-1:z},[T,o]),[j,C]=R.useState(null);R.useEffect(()=>{C(null)},[o,T]);const P=j??k,N=R.useMemo(()=>{const z=Z4(e);return Xa(z)},[e]),M=e.mingSikType??"/",D=R.useMemo(()=>_t(N,M).charAt(0),[N,M]),$=R.useMemo(()=>i.sinsalBase===""?_t(p,M).charAt(1):ut(p,_).charAt(1),[p,M,_,i.sinsalBase]);return g.jsxs("div",{className:"w-full max-w-[640px] mx-auto rounded-xl bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 overflow-hidden",children:[g.jsx("div",{className:"px-3 py-2 text-sm font-semibold tracking-wider bg-neutral-50 dark:bg-neutral-800/60 text-neutral-700 dark:text-neutral-300",children:""}),g.jsx("div",{className:"flex gap-0.5 desk:gap-1 py-2 desk:p-2 flex-row-reverse",children:T.map((z,F)=>{const K=z.at.getFullYear(),oe=Mg(K),Q=ut(oe,_),Y=Q.charAt(0),ne=Q.charAt(1),ie=F===P,Se=nS(Y,"stem",i.charType),J=nS(ne,"branch",i.charType),le=rS(Y,"stem"),te=rS(ne,"branch"),be=i.thinEum&&le?"font-thin":"font-bold",Z=i.thinEum&&te?"font-thin":"font-bold",G=i.showSibiUnseong?Jt(D,ne):null,B=i.showSibiSinsal?Qt({baseBranch:$,targetBranch:ne,era:F4(i.sinsalMode),gaehwa:!!i.sinsalBloom}):null,q=Y4(y,K);return g.jsxs("div",{onClick:()=>{if(F===0){C(F);return}C(F);const V=Mg(K),H=ut(V,_);l({at:V,gz:H},""),n&&(typeof queueMicrotask<"u"?queueMicrotask(()=>n(K)):Promise.resolve().then(()=>n(K)))},className:`flex-1 rounded-sm desk:rounded-lg bg-white dark:bg-neutral-900 overflow-hidden cursor-pointer ${ie?"border border-yellow-500":"border border-neutral-200 dark:border-neutral-800 hover:border-yellow-500"}`,title:`${Q}  ${z.at.toLocaleDateString()}  ${q}`,children:[g.jsxs("div",{className:"desk:px-2 py-1 text-center text-[10px] bg-neutral-100 dark:bg-neutral-800/60 text-neutral-700 dark:text-neutral-200",children:[q,""]}),g.jsx("div",{className:"desk:px-2 py-1 text-center text-[10px] bg-neutral-50 dark:bg-neutral-800/60 text-neutral-600 dark:text-neutral-300",children:K}),g.jsxs("div",{className:"p-2 flex flex-col items-center gap-1",children:[i.showSipSin&&g.jsx("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-nowrap",children:Ar(D,{stem:Y})}),g.jsx("div",{className:`w-8 h-8 md:w-10 md:h-10 rounded-sm md:rounded-lg flex items-center justify-center border ${hi(Y,"stem",i)}`,children:g.jsx("span",{className:`text-[20px] md:text-xl ${be}`,children:Se})}),g.jsx("div",{className:`w-8 h-8 md:w-10 md:h-10 rounded-sm md:rounded-lg flex items-center justify-center border ${hi(ne,"branch",i)}`,children:g.jsx("span",{className:`text-[20px] md:text-xl ${Z}`,children:J})}),i.showSipSin&&g.jsx("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-nowrap",children:Ar(D,{branch:ne})}),(i.showSibiUnseong||i.showSibiSinsal)&&g.jsxs("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-center text-nowrap",children:[i.showSibiUnseong&&G&&g.jsx("div",{children:G}),i.showSibiSinsal&&B&&g.jsx("div",{children:B})]})]})]},`${K}-${z.gz||F}`)})})]})}const K4=new Set(["","","","","","","","","","","",""]);function W4(e){const t=new Date(e.getFullYear(),e.getMonth()+1),n=t.getFullYear(),o=[...as(new Date(n-1,5,15,12,0))??[],...as(new Date(n,5,15,12,0))??[],...as(new Date(n+1,5,15,12,0))??[]].map(m=>({name:String(m.name),date:new Date(m.date)})).sort((m,p)=>m.date.getTime()-p.date.getTime()).filter(m=>K4.has(m.name));let l=o.findIndex((m,p)=>o[p].date<=t&&t<o[p+1]?.date);l<0&&(l=0);const u=o[l],f=o[l+1];return{start:new Date(u.date.getFullYear(),u.date.getMonth(),u.date.getDate(),0,0,0,0),end:new Date(f.date.getFullYear(),f.date.getMonth(),f.date.getDate(),0,0,0,0),cur:u,next:f}}const Yk={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},qk={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},X4=Object.fromEntries(Object.entries(Yk).map(([e,t])=>[t,e])),J4=Object.fromEntries(Object.entries(qk).map(([e,t])=>[t,e]));function sS(e,t,n){return n===""?t==="stem"?Yk[e]??e:qk[e]??e:t==="stem"?X4[e]??e:J4[e]??e}const Q4=new Set(["","","","","","","","","",""]),eP=new Set(["","","","","","","","","","","",""]);function aS(e,t){return t==="stem"?Q4.has(e):eP.has(e)}function tP(e){return typeof e=="object"&&e!==null}function nP(e){return tP(e)&&("Classic"in e||"Modern"in e||"classic"in e||"modern"in e)}function rP(e){const t=dl;return nP(t)?e==="classic"?t.Classic:t.Modern:e}const iP=new Set(["","","","","","","","","","","",""]);function sP(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),23,59,0,0)}function aP(e){const t=new Intl.DateTimeFormat("ko-KR",{timeZone:"Asia/Seoul",month:"numeric"}).formatToParts(e);return Number(t.find(n=>n.type==="month")?.value??e.getMonth()+1)}function Cg(e){return new Date(e,5,15,12,0,0,0)}function oP(e){const n=[...as(Cg(e-1))??[],...as(Cg(e))??[],...as(Cg(e+1))??[]].map(f=>({name:String(f.name),date:new Date(f.date)})).sort((f,m)=>f.date.getTime()-m.date.getTime()).filter(f=>iP.has(f.name)),i=new Date(e,0,1,0,0,0,0),o=new Date(e+1,0,1,0,0,0,0),l=n.findIndex(f=>f.name===""&&f.date>=i&&f.date<o);if(l===-1)return[];const u=[];for(let f=0;f<12;f++){const m=n[l+f];if(!m)break;const p=new Date(m.date),y=sP(p);u.push({name:m.name,termAt:p,at00:y})}return u}const lP=!1,oS=e=>e<10?`0${e}`:`${e}`;function cP(e){const t=e,n=typeof t.birthDay=="string"?t.birthDay:"",i=typeof t.calendarType=="string"?t.calendarType:"solar";if(n.length<8)return e;const o=Number(n.slice(0,4)),l=Number(n.slice(4,6)),u=Number(n.slice(6,8)),f=["isLeap","isLeapMonth","leapMonth","leap","lunarLeap"];let m=!1;for(const p of f){const y=t[p];if(typeof y=="boolean"){m=y;break}if(typeof y=="number"){m=y===1;break}if(typeof y=="string"){m=y==="1"||y.toLowerCase()==="true";break}}if(i==="lunar")try{const p=br(o,l,u,0,0),y=`${p.getFullYear()}${oS(p.getMonth()+1)}${oS(p.getDate())}`;return{...e,birthDay:y,calendarType:"solar"}}catch{return e}return e}function uP({data:e,activeYear:t,onSelect:n,onSelectMonth:i}){const o=Wn(j=>j.settings),l=!e.birthPlace||e.birthPlace.name===""||e.birthPlace.lon===0?127.5:e.birthPlace.lon,u=Xa(e),f=R.useMemo(()=>Km(e,u),[e,u]),m=R.useMemo(()=>{const j=cP(e);return Xa(j)},[e]),p=e.mingSikType??"/",y=R.useMemo(()=>_t(m,p).charAt(0),[m,p]),_=o.sinsalBase===""?_t(f,p).charAt(1):ut(f,l).charAt(1),x=R.useMemo(()=>t?oP(t).map(C=>{const P=C.at00,N=new Date(C.at00);N.setDate(N.getDate()+1);const M=jt(N,l);return{at:P,gz:M,term:C.name,termAt:C.termAt}}):[],[t,l]),{date:S,setFromEvent:T}=fi(),k=Vm(x,S);return g.jsxs("div",{className:"w-full max-w-[640px] mx-auto rounded-xl bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 overflow-hidden",children:[g.jsx("div",{className:"px-3 py-2 text-sm font-semibold tracking-wider bg-neutral-50 dark:bg-neutral-800/60 text-neutral-700 dark:text-neutral-300",children:""}),g.jsx("div",{className:"flex gap-0.5 desk:gap-1 py-2 desk:p-2 flex-row-reverse",children:x.map((j,C)=>{const P=j.gz.charAt(0),N=j.gz.charAt(1),M=`${aP(j.at)}`,D=C===k,$=sS(P,"stem",o.charType),z=sS(N,"branch",o.charType),F=aS(P,"stem"),K=aS(N,"branch"),oe=o.thinEum&&F?"font-thin":"font-bold",Q=o.thinEum&&K?"font-thin":"font-bold",Y=o.showSibiUnseong?Jt(y,N):null,ne=o.showSibiSinsal?Qt({baseBranch:_,targetBranch:N,era:rP(o.sinsalMode),gaehwa:!!o.sinsalBloom}):null;return g.jsxs("div",{onClick:()=>{i(j.at);const ie=new Date(j.at),{start:Se}=W4(ie);n?.(Se.getFullYear(),Se.getMonth()),T({at:ie,gz:jt(ie,l)},"")},className:`flex-1 rounded-sm desk:rounded-lg bg-white dark:bg-neutral-900 overflow-hidden cursor-pointer ${D?"border border-yellow-500":"border border-neutral-200 dark:border-neutral-800 hover:border-yellow-500"}`,title:`${j.term}   ${j.gz}  ${j.termAt.toLocaleString()}`,children:[g.jsx("div",{className:"desk:px-2 py-1 text-center text-[10px] bg-neutral-50 dark:bg-neutral-800/60 text-neutral-600 dark:text-neutral-300",children:M}),g.jsxs("div",{className:"p-2 flex flex-col items-center gap-1",children:[o.showSipSin&&g.jsx("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-nowrap",children:Ar(y,{stem:P})}),g.jsx("div",{className:`w-7 h-7 sm:w-8 sm:h-8 md:w-10 md:h-10 rounded-sm md:rounded-lg flex items-center justify-center border border-neutral-200 dark:border-neutral-800 ${hi(P,"stem",o)}`,children:g.jsx("span",{className:`text-base md:text-xl ${oe}`,children:$})}),g.jsx("div",{className:`w-7 h-7 sm:w-8 sm:h-8 md:w-10 md:h-10 rounded-sm md:rounded-lg flex items-center justify-center border border-neutral-200 dark:border-neutral-800 ${hi(N,"branch",o)}`,children:g.jsx("span",{className:`text-base md:text-xl ${Q}`,children:z})}),o.showSipSin&&g.jsx("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-nowrap",children:Ar(y,{branch:N})}),(o.showSibiUnseong||o.showSibiSinsal)&&g.jsxs("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-center text-nowrap",children:[o.showSibiUnseong&&Y&&g.jsx("div",{children:Y}),o.showSibiSinsal&&ne&&g.jsx("div",{children:ne})]}),g.jsx("div",{className:"text-[10px] text-neutral-400 dark:text-neutral-500 text-nowrap",children:j.term})]})]},`${j.term}-${j.at.toISOString()}`)})})]})}const Zk={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Vk={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},dP=Object.fromEntries(Object.entries(Zk).map(([e,t])=>[t,e])),hP=Object.fromEntries(Object.entries(Vk).map(([e,t])=>[t,e]));function lS(e,t,n){return n===""?t==="stem"?Zk[e]??e:Vk[e]??e:t==="stem"?dP[e]??e:hP[e]??e}const fP=new Set(["","","","","","","","","",""]),mP=new Set(["","","","","","","","","","","",""]);function cS(e,t){return t==="stem"?fP.has(e):mP.has(e)}function pP(e){return typeof e=="object"&&e!==null}function gP(e){return pP(e)&&("Classic"in e||"Modern"in e||"classic"in e||"modern"in e)}function bP(e){const t=dl;return gP(t)?e==="classic"?t.Classic:t.Modern:e}const yP=!1,uS=e=>e<10?`0${e}`:`${e}`;function vP(e){const t=e,n=typeof t.birthDay=="string"?t.birthDay:"",i=typeof t.calendarType=="string"?t.calendarType:"solar";if(n.length<8)return e;const o=Number(n.slice(0,4)),l=Number(n.slice(4,6)),u=Number(n.slice(6,8));if(i==="lunar")try{const f=br(o,l,u,0,0),m=`${f.getFullYear()}${uS(f.getMonth()+1)}${uS(f.getDate())}`;return{...e,birthDay:m,calendarType:"solar"}}catch{return e}return e}function _P(e,t){return new Date(e,t,15,12,0,0,0)}function Rg(e){const t=new Date(e);return t.setHours(23,59,0,0),t}const xP=new Set(["","","","","","","","","","","",""]);function Kk(e){return[...as(new Date(e-1,5,15,12,0))??[],...as(new Date(e,5,15,12,0))??[],...as(new Date(e+1,5,15,12,0))??[]].map(n=>({name:String(n.name),date:new Date(n.date)})).sort((n,i)=>n.date.getTime()-i.date.getTime())}function wP(e){const t=Kk(e.getFullYear()),n=t.filter(u=>xP.has(u.name));if(n.length<12){const u=t.findIndex(p=>p.date>e),f=t[Math.max(0,u-1)],m=t[Math.min(t.length-1,u)];return{start:new Date(f.date),end:new Date(m.date),cur:f,next:m}}let i=n.findIndex(u=>u.date>e)-1;i<0&&(i=n.length-1);const o=n[i],l=n[(i+1)%n.length];return{start:new Date(o.date),end:new Date(l.date),cur:o,next:l}}function SP({data:e,year:t,month:n,selectedMonth:i}){const o=Wn(K=>K.settings),l=o.ilunRule||"/",u=e?Xa(e):null,f=e&&u?Km(e,u):null,m=R.useMemo(()=>{const K=vP(e);return Xa(K)},[e]),p=R.useMemo(()=>m?_t(m,l).charAt(0):void 0,[m,l]),y=e&&e.birthPlace&&e.birthPlace.name!==""&&e.birthPlace.lon!==0?e.birthPlace.lon:127.5,_=e&&f?o.sinsalBase===""?_t(f,l).charAt(1):ut(f,y).charAt(1):null,{date:x,setFromEvent:S}=fi(),T=R.useMemo(()=>_P(t,n),[t,n]),k=R.useMemo(()=>x?Rg(new Date(x)):null,[x]),j=R.useMemo(()=>i?Rg(i):null,[i]),C=R.useMemo(()=>k??j??T,[k,j,T]),{start:P,end:N,cur:M,next:D}=R.useMemo(()=>wP(C),[C]),$=R.useMemo(()=>{const K=[],oe=new Date(P);for(;oe<N;)K.push(new Date(oe)),oe.setDate(oe.getDate()+1);return K},[P,N]),z=R.useMemo(()=>{const K=Kk(C.getFullYear()),oe=K.filter(Y=>Y.date>=P&&Y.date<N),Q=K.find(Y=>Y.date>=N);return Q?[...oe,Q]:oe},[C,P,N]),F=R.useMemo(()=>{const K=[];let oe=[];const Q=new Date(P).getDay();for(let Y=0;Y<Q;Y++)oe.push(null);for(const Y of $)oe.length===7&&(K.push(oe),oe=[]),oe.push(Y);for(;oe.length<7;)oe.push(null);return K.push(oe),K},[$,P]);return g.jsxs("div",{className:"w-full max-w-[800px] mx-auto mb-4 rounded-xl bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 overflow-hidden",children:[g.jsx("div",{className:"flex justify-center items-center px-2 desk:px-4 py-2 bg-neutral-50 dark:bg-neutral-800/60",children:g.jsxs("div",{className:"text-center text-[11px] desk:text-sm font-semibold text-neutral-700 dark:text-neutral-200",children:[M?.name?g.jsxs(g.Fragment,{children:[M.name," ~ ",D?.name??""]}):`${t} ${n}`,z.length>0&&g.jsxs("div",{className:"mt-0.5 text-[10px] desk:text-xs font-normal text-neutral-500 dark:text-neutral-400",children:["[",z.map((K,oe)=>g.jsxs("span",{children:[K.name," ",EP(K.date),oe<z.length-1?"  ":""]},`${K.name}_${K.date.getTime()}_${oe}`)),"]"]})]})}),g.jsx("div",{className:"grid grid-cols-7 text-center text-xs bg-neutral-100 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-300",children:["","","","","","",""].map(K=>g.jsx("div",{className:"py-1",children:K},K))}),g.jsx("div",{className:"grid grid-cols-7 gap-px bg-neutral-200 dark:bg-neutral-800",children:F.map((K,oe)=>K.map((Q,Y)=>{if(!Q)return g.jsx("div",{className:"bg-white dark:bg-neutral-900"},`${oe}-${Y}`);const ne=Rg(Q),ie=new Date,Se=ne.getFullYear()===ie.getFullYear()&&ne.getMonth()===ie.getMonth()&&ne.getDate()===ie.getDate(),le=!!k&&ne.getFullYear()===k.getFullYear()&&ne.getMonth()===k.getMonth()&&ne.getDate()===k.getDate()||!k&&Se,te=LO(ne,l),be=te.charAt(0),Z=te.charAt(1),G=lS(be,"stem",o.charType),B=lS(Z,"branch",o.charType),q=o.thinEum&&cS(be,"stem")?"font-thin":"font-bold",V=o.thinEum&&cS(Z,"branch")?"font-thin":"font-bold",H=!!p&&o.showSipSin,X=!!p&&o.showSibiUnseong,W=!!p&&_!=null&&o.showSibiSinsal,he=H?Ar(p,{stem:be}):"",se=H?Ar(p,{branch:Z}):"",ve=X?Jt(p,Z):"",ke=W?Qt({baseBranch:_,targetBranch:Z,era:bP(o.sinsalMode),gaehwa:!!o.sinsalBloom}):"",je=z.find(Me=>Me.date.getFullYear()===ne.getFullYear()&&Me.date.getMonth()===ne.getMonth()&&Me.date.getDate()===ne.getDate());return g.jsxs("div",{onClick:()=>S({at:ne},""),className:`space-y-1 bg-white dark:bg-neutral-900 flex flex-col items-center justify-start p-1 text-xs border cursor-pointer ${le?"border-yellow-500":"border-neutral-200 dark:border-neutral-800"}`,title:`${te} (${ne.toLocaleDateString()})`,children:[g.jsxs("div",{className:"text-neutral-600 dark:text-neutral-400 flex items-center gap-1",children:[g.jsx("span",{children:ne.getDate()}),je&&g.jsx("span",{className:"text-[10px] text-nowrap px-1 rounded bg-amber-100 text-amber-700 dark:bg-amber-900/40 dark:text-amber-200",children:je.name})]}),H&&g.jsx("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400",children:he}),g.jsx("div",{className:`w-8 h-8 rounded flex items-center justify-center text-base ${hi(be,"stem",o)}`,children:g.jsx("span",{className:q,children:G})}),g.jsx("div",{className:`w-8 h-8 rounded flex items-center justify-center text-base ${hi(Z,"branch",o)}`,children:g.jsx("span",{className:V,children:B})}),H&&g.jsx("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400",children:se}),(X||W)&&g.jsxs("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-center space-y-0.5",children:[X&&ve&&g.jsx("div",{children:ve}),W&&ke&&g.jsx("div",{children:ke})]})]},Q.toISOString())}))})]})}function EP(e){if(!e)return null;const t=new Intl.DateTimeFormat("ko-KR",{timeZone:"Asia/Seoul",month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1}).formatToParts(e);let n="",i="",o="",l="";for(const u of t)u.type==="month"&&(n=u.value),u.type==="day"&&(i=u.value),u.type==="hour"&&(o=u.value),u.type==="minute"&&(l=u.value);return`${n}/${i} ${o}:${l}`}function dS(e,t){const n=e.at.getFullYear(),i=t?t.at.getFullYear():n+10,o=[];for(let l=n;l<i;l++){const u=Gn(l,315);let f=l;new Date<u&&(f=l-1);const p=ut(new Date(f,1,10));o.push({at:u,gz:p})}return o}function TP({data:e}){const t=Td(e),[n,i]=R.useState(null),[o,l]=R.useState(null),[u,f]=R.useState("il"),[m,p]=R.useState(null);R.useEffect(()=>{if(!t.length)return;const T=new Date,k=t.findIndex((j,C)=>{const P=t[C+1]?.at;return T>=j.at&&(!P||T<P)});k!==-1&&i(k)},[t]),R.useEffect(()=>{if(n===null)return;const T=t[n],k=t[n+1];if(!T)return;const j=dS(T,k),C=new Date;j.findIndex((N,M)=>{const D=j[M+1]?.at;return C>=N.at&&(!D||C<D)})!==-1&&l({year:C.getFullYear(),month:C.getMonth()})},[n,t]);const y=Iy(e),{date:_}=fi(),x=_.getMonth()+1===1?_.getFullYear()-1:_.getFullYear(),S=R.useMemo(()=>{if(!y?.dae?.gz)return[];const T=t.findIndex((C,P)=>{const N=t[P+1]?.at;return y.dae.at>=C.at&&(!N||y.dae.at<N)});if(T===-1)return[];const k=t[T],j=t[T+1];return dS(k,j)},[t,y?.dae]);return g.jsxs("div",{className:"w-full space-y-4",children:[g.jsx(B4,{data:e}),u==="se"||u==="wol"||u==="il"?g.jsx(V4,{data:e,list:S,onSelect:()=>{f("wol")}}):null,u==="wol"||u==="il"?g.jsx(uP,{data:e,activeYear:x,onSelect:(T,k)=>{l({year:T,month:k}),f("il")},onSelectMonth:p}):null,u==="il"&&o&&g.jsx(SP,{data:e,year:o.year,month:o.month+1,hourTable:e?.mingSikType,selectedMonth:m})]})}const kP=new Set(wO),AP=new Set(SO);function hS(e){return typeof e=="string"&&e.length>=2&&kP.has(e[0])&&AP.has(e[1])}function ri(e,...t){if(hS(e))return e;for(const n of t)if(hS(n))return n;return""}const jP={:0,:2,:4,:6,:8,:10,:12,:14,:16,:18,:20,:22},Wk={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},NP={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};function fS(e){return!!e&&Bi..includes(e)}function OP(e){return Wk[e]??e}function mS(e){return NP[e]??e}function DP(e){if(fS(e))return e;const t=Wk[e];return fS(t)?t:""}function MP(e){return typeof e=="object"&&e!==null&&("Classic"in e||"Modern"in e||"classic"in e||"modern"in e)}function CP(e){const t=dl;return MP(t)?e==="classic"?t.Classic??t.classic:t.Modern??t.modern:e}function ff(e,t){let n=null;const i=t.getTime();for(const o of e)if(o.at.getTime()<=i)n=o;else break;return n}function RP({data:e}){const t=Wn(oe=>oe.settings),{manualHour:n}=_d(),{showSibiUnseong:i,showSibiSinsal:o,sinsalBase:l,sinsalMode:u,sinsalBloom:f}=t,{date:m}=fi(),p=R.useMemo(()=>$y(e),[e]),y=R.useMemo(()=>Zm(p),[p]),_=R.useMemo(()=>By(p,"/"),[p]),x=R.useMemo(()=>DP(_.day?.charAt(0)??""),[_.day]),S=!e.birthTime||e.birthTime==="",T=R.useMemo(()=>Pk(y,_.hour,e.dir??"forward",120,"/"),[y,_.hour,e.dir]),k=R.useMemo(()=>Ik(T,_.day,e.dir??"forward",""),[T,_.day,e.dir]),j=R.useMemo(()=>Ed(y,_.month,e.dir??"forward",120,p.birthPlace?.lon??127.5),[y,_.month,e.dir,p.birthPlace?.lon]),C=R.useMemo(()=>zk(j,_.year,e.dir??"forward","",y),[j,_.year,e.dir,y]),P=R.useMemo(()=>{const oe=T?.events?.[0];return oe?{at:oe.at,from:ri(_.hour),to:ri(oe.gz)}:null},[T?.events,_.hour]),N=R.useMemo(()=>{const oe=j?.events?.[0];return j?.firstChange?{at:j.firstChange,from:ri(_.month),to:ri(oe?.gz??_.month)}:null},[j?.firstChange,j?.events,_.month]),M=R.useMemo(()=>{const oe=S?n?n.stem+n.branch:"":ri(ff(T.events,m)?.gz,_.hour);let Q;if(S&&n){const Y=m.getFullYear(),ne=m.getMonth(),ie=m.getDate(),Se=jP[n.branch]??0,J=new Date(Y,ne,ie,Se,0),le=_t(J,e.mingSikType??"/");Q=ri(le,_.day)}else Q=ri(ff(k.events,m)?.gz,_.day);return{si:oe,il:Q,wl:ri(ff(j.events,m)?.gz,_.month),yn:ri(ff(C.events,m)?.gz,_.year)}},[m,T.events,k.events,j.events,C.events,_,S,n,e.mingSikType]),D=R.useMemo(()=>({si:ri($i(m,"/")),il:ri(_t(m,"/")),wl:ri(jt(m)),yn:ri(ut(m))}),[m]),$=R.useMemo(()=>l===""?_.day.charAt(1):_.year.charAt(1),[l,_.day,_.year]),z=R.useMemo(()=>CP(u),[u]),F=oe=>{if(!oe)return{unseong:"",shinsal:""};const Q=OP(x),Y=mS(oe.charAt(1)),ne=mS($);return{unseong:i&&Jt(Q,Y)||"",shinsal:o&&Qt({baseBranch:ne,targetBranch:Y,era:z,gaehwa:!!f})||""}},K=(oe,Q,Y="myoun")=>{const ne=Q,{unseong:ie,shinsal:Se}=Q?F(Q):{unseong:"",shinsal:""},J=Y==="myoun"&&S&&(oe===""||oe==="");return g.jsx(uc,{label:oe,gz:ne,dayStem:x,settings:t,unseongText:Q?ie:"",shinsalText:Q?Se:"",hideBranchSipSin:!0,size:"sm",isUnknownTime:J},`${Y}-${oe}`)};return g.jsxs("div",{className:"w-full max-w-[640px] mx-auto mb-4 px-2 py-4 desk:p-4 bg-white dark:bg-neutral-950 text-neutral-900 dark:text-neutral-100 rounded-xl shadow border border-neutral-200 dark:border-neutral-800",children:[g.jsx("header",{className:"flex flex-wrap items-center gap-3 justify-between mb-4",children:g.jsxs("div",{className:"font-semibold text-xs desk:text-sm",children:[" +   "," ",g.jsxs("span",{className:"text-neutral-500 dark:text-neutral-400",children:["(: ",ed(y),")"]})]})}),g.jsxs("div",{className:"grid grid-cols-2 gap-2 desk:gap-4 mb-6",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs mb-2 text-neutral-600 dark:text-neutral-300",children:""}),g.jsxs("div",{className:"grid grid-cols-4 gap-1 desk:gap-2",children:[K("",M.si,"myoun"),K("",M.il,"myoun"),K("",M.wl,"myoun"),K("",M.yn,"myoun")]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs mb-2 text-neutral-600 dark:text-neutral-300",children:" "}),g.jsxs("div",{className:"grid grid-cols-4 gap-1 desk:gap-2",children:[K("",D.si,"live"),K("",D.il,"live"),K("",D.wl,"live"),K("",D.yn,"live")]})]})]}),g.jsxs("div",{className:"mt-4 text-xs text-neutral-700 dark:text-neutral-300 space-y-1",children:[g.jsx("div",{className:"font-semibold",children:"  "}),g.jsxs("div",{children:[":"," ",P?`${ed(P.at)} (${P.from}  ${P.to})`:" "]}),g.jsxs("div",{children:[":"," ",N?`${ed(N.at)} (${N.from}  ${N.to})`:" "]})]})]})}const pS=["","","","","","","","","",""],LP={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},BP={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},PP={:"",:"",:"",:"",:""},$P={:"",:"",:"",:"",:""},IP={:"",:"",:"",:"",:""},zP={:"",:"",:"",:"",:""};function UP(e,t){switch(e){case"":return t;case"":return PP[t];case"":return IP[t];case"":return zP[t];case"":return $P[t];default:return t}}function HP({data:e,perStemElementScaled:t,elementPercent:n,dayStem:i,width:o=280,height:l=280,revKey:u}){const f=o,m=l,p=f/2,y=m/2,_=Math.min(f,m)*.37,x=R.useMemo(()=>{const N=(i??"").charAt(0);return BP[N]??null},[i]),S=N=>Math.PI/2+2*-Math.PI*N/5,T=R.useMemo(()=>e.map((N,M)=>({...N,x:p+_*Math.cos(S(M)),y:y-_*Math.sin(S(M))})),[e,p,y,_]),[k,j]=R.useState(0),C=R.useRef(""),P=R.useMemo(()=>{const N=e.map($=>`${$.name}:${$.value}`).join(","),M=pS.map($=>`${$}:${t?.[$]??0}`).join(","),D=n?`:${n.??0},:${n.??0},:${n.??0},:${n.??0},:${n.??0}`:"el:none";return[u??"",N,M,D,i??""].join("||")},[u,e,t,i,n]);return R.useEffect(()=>{P!==C.current&&(C.current=P,j(N=>N+1))},[P]),g.jsx("div",{className:"w-full",children:g.jsxs("svg",{width:f,height:m,className:"mx-auto pt-2",children:[T.map((N,M)=>{const D=T[(M+2)%5];return g.jsx("line",{x1:N.x,y1:N.y,x2:D.x,y2:D.y,stroke:"#94a3b8",strokeWidth:1},`line-${M}`)}),T.map((N,M)=>{const D=T[(M+1)%5],$=(N.x+D.x)/2,z=(N.y+D.y)/2,F=$-p,K=z-y,oe=1.5,Q=p+F*oe,Y=y+K*oe;return g.jsx("path",{d:`M${N.x},${N.y} Q${Q},${Y} ${D.x},${D.y}`,stroke:"#ef4444",strokeWidth:1.5,fill:"none",markerEnd:"url(#arrow)"},`curve-${M}`)}),g.jsx("defs",{children:g.jsx("marker",{id:"arrow",markerWidth:"6",markerHeight:"6",refX:"5",refY:"3",orient:"auto",children:g.jsx("path",{d:"M0,0 L6,3 L0,6 Z",fill:"#ef4444"})})}),T.map(N=>{const M=N.name,D=x?UP(M,x):null,$=D?pS.filter(z=>LP[z]===D).map(z=>[z,t?.[z]??0]):[];return g.jsxs("g",{transform:`translate(${N.x},${N.y})`,children:[g.jsx("circle",{r:33,fill:N.color??"#334155",opacity:N.value===0?.7:1}),g.jsxs("text",{textAnchor:"middle",dy:"-6",fontSize:14,className:"fill-white font-semibold",children:[N.name," ",N.value]}),$.map(([z,F],K)=>g.jsxs("text",{textAnchor:"middle",dy:8+K*11,fontSize:10,className:"fill-white",children:[z," ",Math.round(F)]},z))]},`${N.name}-${N.value}`)})]},k)})}const GP=[{name:"",min:0,max:10},{name:"",min:10,max:20},{name:"",min:20,max:35},{name:"",min:35,max:45},{name:"",min:45,max:55},{name:"",min:55,max:65},{name:"",min:65,max:80},{name:"",min:80,max:100.0001}];function Hy(e){return Math.max(0,Math.min(100,e))}function Xk(e){const t=Hy(e);return GP.find(i=>t>=i.min&&t<i.max)?.name??""}const FP=[10,20,35,45,55,65,80];function YP({value:e}){const t=R.useMemo(()=>Hy(e),[e]),n=R.useMemo(()=>Xk(t),[t]);return g.jsxs("div",{className:"w-full mx-auto p-2 desk:p-4 bg-neutral-100 dark:bg-neutral-800 rounded-xl",children:[g.jsxs("div",{className:"flex justify-between text-[11px] text-neutral-400 mb-1",children:[g.jsx("span",{children:""}),g.jsx("span",{children:""}),g.jsx("span",{children:""})]}),g.jsxs("div",{className:"relative h-4 rounded bg-gradient-to-r from-blue-500 via-yellow-400 to-red-500",children:[FP.map(i=>g.jsx("div",{className:"absolute top-0 h-4 w-[1px] bg-black/30",style:{left:`${i}%`},title:`${i}%`},i)),g.jsx("div",{className:"absolute top-0 h-4 w-[1px] bg-black/40",style:{left:"50%"},title:"50%"}),g.jsx("div",{className:"absolute -top-1 h-6 w-2 bg-white rounded shadow-sm",style:{left:`${t}%`,transform:"translateX(-50%)"},"aria-label":`  ${t}%`})]}),g.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[g.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs border border-neutral-600 text-neutral-700 dark:text-neutral-200",children:n}),g.jsxs("span",{className:"text-xs text-neutral-400",children:[t.toFixed(1),"%"]})]})]})}const Js=["","","",""],mf={year:0,month:1,day:2,hour:3},Lg="",qP={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Jk={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};function Ge(e){if(!e)return"";const t=e.replace(/[()[\]{}]/g,"").replace(/\s+/g,"").replace(/[:\-_.]/g,""),n=t.match(/([]).*?([])/);if(n)return`${n[1]}${n[2]}`;const i=t.match(/([]).*?([])/);if(i){const o=qP[i[1]]??i[1],l=Jk[i[2]]??i[2];return`${o}${l}`}return""}const bm=e=>e&&e.length>=1?e[0]:"",Qs=e=>e&&e.length>=2?e[1]:"",Gy=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],Fy=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],Yy=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],qy=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],Zy=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],Vy=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],Ky=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],Wy=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],gS=[{name:"",members:["","",""]},{name:"",members:["","",""]}],Xy=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],Jy=[{pair:["",""],label:""}],ZP=new Set(["","","",""]),ud=new Set(["","","",""]),Wm=[{name:"",members:["","",""],out:"",wang:""},{name:"",members:["","",""],out:"",wang:""},{name:"",members:["","",""],out:"",wang:""},{name:"",members:["","",""],out:"",wang:""}],Xm=[{name:"",members:["","",""],out:"",wang:""},{name:"",members:["","",""],out:"",wang:""},{name:"",members:["","",""],out:"",wang:""},{name:"",members:["","",""],out:"",wang:""}];function Sn(e,t,n){for(const{pair:[i,o],label:l}of e)if(t===i&&n===o||t===o&&n===i)return l;return null}function Wt(e,t){e.includes(t)||e.push(t)}const Yo=e=>[...e].sort((t,n)=>t-n).map(t=>Js[t]).join("X"),Bg=(e,t)=>e===0&&t===3||e===3&&t===0;function bS(e,t){const n=[];for(const i of e)for(const o of t){if(i===o)continue;const l=Math.min(i,o),u=Math.max(i,o);l===0&&u===3||n.push([l,u])}return n.sort((i,o)=>{const l=Math.abs(i[0]-i[1]),u=Math.abs(o[0]-o[1]);return l!==u?l-u:0})}function VP(e){const t=[],n=[...e].sort((i,o)=>i-o);for(let i=0;i<n.length;i++)for(let o=i+1;o<n.length;o++){const l=n[i],u=n[o];l===0&&u===3||t.push([l,u])}return t}const Qk=e=>{switch(e){case"":return"";case"":return"";case"":return"";case"":return""}};function KP(e){if(!e)return!1;const t=e.normalize("NFC").trim();return/^#\s*$/u.test(t)}const WP=["cheonganHap","cheonganChung","jijiSamhap","jijiBanhap","jijiBanghap","jijiYukhap","jijiChung","jijiHyeong","jijiPa","jijiHae","jijiWonjin","jijiGwimun","amhap","ganjiAmhap"];function eA(e){for(const t of WP){const i=(e[t]??[]).map(o=>o&&o.normalize("NFKC")).filter(o=>!!o&&!KP(o));e[t]=Array.from(new Set(i))}return e.jijiHyeong=tA(e.jijiHyeong),e}const yS=["","","",""];function tA(e){if(!e||e.length===0)return e;const t=Array.from(new Set(e.map(o=>o?.normalize("NFKC")??""))).filter(Boolean),n=t.some(o=>o.includes("")||o.includes("()")),i=t.some(o=>o.includes("")||o.includes("()"));return t.filter(o=>!(n&&(o.includes("")||o.includes("")||o.includes(""))||i&&(o.includes("")||o.includes("")||o.includes(""))))}function Qy(e,t={}){const{emitGanjiAmhap:n=!0}=t,i=e.map(Ge),o=i.map(x=>bm(x)),l=i.map(x=>Qs(x)),f={title:i.map((x,S)=>`${x}${["","","",""][S]}`).join(" "),cheonganHap:[],cheonganChung:[],jijiSamhap:[],jijiBanhap:[],jijiBanghap:[],jijiYukhap:[],jijiChung:[],jijiHyeong:[],jijiPa:[],jijiHae:[],jijiWonjin:[],jijiGwimun:[],amhap:[],ganjiAmhap:[]},m=(x,S,T,k)=>{const j=o.flatMap((P,N)=>P===x?[N]:[]),C=o.flatMap((P,N)=>P===S?[N]:[]);for(const P of j)for(const N of C)P!==N&&Math.abs(P-N)===1&&Wt(k,`#${Yo([P,N])}_${T}`)};Gy.forEach(({pair:[x,S],label:T})=>m(x,S,T,f.cheonganHap)),Fy.forEach(({pair:[x,S],label:T})=>m(x,S,T,f.cheonganChung));const p=x=>{const S=new Set,T=[];for(const k of x)for(let j=0;j<l.length;j++)if(l[j]===k&&!S.has(j)){S.add(j),T.push(j);break}return T};Wm.forEach(({name:x,members:S,wang:T})=>{const k=S.filter(C=>l.includes(C)),j=new Set(k).size;if(j===3){const C=p(S);C.length===3&&Wt(f.jijiSamhap,`#${Yo(C)}_${x}`)}else if(j===2){if(!k.includes(T))return;const[C,P]=k,N=l.flatMap((z,F)=>z===C?[F]:[]),M=l.flatMap((z,F)=>z===P?[F]:[]),D=bS(N,M),$=D.length>1;for(const[z,F]of D){const K=Bg(z,F),oe=`#${Yo([z,F])}_${C}${P}${$?"":K?`_${Lg}`:""}`;Wt(f.jijiSamhap,oe)}}}),Xm.forEach(({name:x,members:S})=>{const T=S.filter(j=>l.includes(j));if(new Set(T).size===3){const j=p(S);j.length===3&&Wt(f.jijiBanghap,`#${Yo(j)}_${x}`)}});const y=(x,S,T,k)=>{const j=l.flatMap((M,D)=>M===x?[D]:[]),C=l.flatMap((M,D)=>M===S?[D]:[]),P=bS(j,C),N=P.length>1;for(const[M,D]of P){const $=Bg(M,D),z=`#${Yo([M,D])}_${T}${N?"":$?`_${Lg}`:""}`;Wt(k,z)}};if(Yy.forEach(({pair:[x,S],label:T})=>y(x,S,T,f.jijiYukhap)),qy.forEach(({pair:[x,S],label:T})=>y(x,S,T,f.jijiChung)),Zy.forEach(({pair:[x,S],label:T})=>y(x,S,T,f.jijiPa)),Vy.forEach(({pair:[x,S],label:T})=>y(x,S,T,f.jijiHae)),Ky.forEach(({pair:[x,S],label:T})=>y(x,S,T,f.jijiWonjin)),Wy.forEach(({pair:[x,S],label:T})=>y(x,S,T,f.jijiGwimun)),[["","",""],["","",""]].forEach(x=>{const S=[],T=new Set;if(x.forEach(k=>{l.forEach((j,C)=>{j===k&&(S.push(C),T.add(k))})}),T.size===3){const k=Array.from(new Set(S)).sort((j,C)=>j-C);Wt(f.jijiHyeong,`#${Yo(k)}_${x.join("")}`)}}),Xy.forEach(({pair:[x,S],label:T})=>y(x,S,T,f.jijiHyeong)),Jy.forEach(({pair:[x,S],label:T})=>y(x,S,T,f.jijiHyeong)),["","","",""].forEach(x=>{const S=l.flatMap((j,C)=>j===x?[C]:[]),T=VP(S),k=T.length>1;for(const[j,C]of T){const P=Bg(j,C),N=`#${Yo([j,C])}_${x}${x}${k?"":P?`_${Lg}`:""}`;Wt(f.jijiHyeong,N)}}),[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}].forEach(({pair:[x,S],label:T})=>y(x,S,T,f.amhap)),n)for(let x=0;x<4;x++){const S=i[x]??"";if(S.length<2)continue;const T=`${S[0]}${S[1]}`;ud.has(T)&&Wt(f.ganjiAmhap,`#${Qk(Js[x])}_${T}`)}return f.jijiHyeong=tA(f.jijiHyeong),eA(f)}function gr(e,t={}){const{emitNatalGanjiAmhap:n=!1}=t,i=[Ge(e.natal[0]??""),Ge(e.natal[1]??""),Ge(e.natal[2]??""),Ge(e.natal[3]??"")],l=[Ge(e.daewoon??""),Ge(e.sewoon??""),Ge(e.wolwoon??"")].some(y=>y.length>=2),u={cheonganHap:[],cheonganChung:[],jijiSamhap:[],jijiBanhap:[],jijiBanghap:[],jijiYukhap:[],jijiChung:[],jijiHyeong:[],jijiPa:[],jijiHae:[],jijiWonjin:[],jijiGwimun:[],amhap:[],ganjiAmhap:[]};if(n&&l)for(let y=0;y<4;y++){const _=i[y]??"";if(_.length<2)continue;const x=`${_[0]}${_[1]}`;ud.has(x)&&Wt(u.ganjiAmhap,`#${Qk(Js[y])}_${x}`)}const f=[["",e.daewoon],["",e.sewoon],["",e.wolwoon],["",e.ilwoon]];let m=!1,p=!1;for(const[y,_]of f){if(!_)continue;const x=Ge(_);if(!x||x.length<2)continue;const S=bm(x),T=Qs(x);{const C=`${S}${T}`;ud.has(C)&&Wt(u.ganjiAmhap,`#${y}_${C}`)}for(let C=0;C<4;C++){const P=i[C]??"";if(P.length<2)continue;const N=Js[C],M=bm(P),D=Qs(P),$=Sn(Gy,S,M);$&&Wt(u.cheonganHap,`#${y}X${N}_${$}`);const z=Sn(Fy,S,M);z&&Wt(u.cheonganChung,`#${y}X${N}_${z}`);const F=Sn(Yy,T,D);F&&Wt(u.jijiYukhap,`#${y}X${N}_${F}`);const K=Sn(qy,T,D);K&&Wt(u.jijiChung,`#${y}X${N}_${K}`);const oe=Sn(Zy,T,D);oe&&Wt(u.jijiPa,`#${y}X${N}_${oe}`);const Q=Sn(Vy,T,D);Q&&Wt(u.jijiHae,`#${y}X${N}_${Q}`);const Y=Sn(Ky,T,D);Y&&Wt(u.jijiWonjin,`#${y}X${N}_${Y}`);const ne=Sn(Wy,T,D);ne&&Wt(u.jijiGwimun,`#${y}X${N}_${ne}`);const ie=Sn(Xy,T,D);if(ie)Wt(u.jijiHyeong,`#${y}X${N}_${ie}`);else{const le=Sn(Jy,T,D);le?Wt(u.jijiHyeong,`#${y}X${N}_${le}`):T===D&&ZP.has(T)&&Wt(u.jijiHyeong,`#${y}X${N}_${T}${D}`)}const J=Sn([{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],T,D);J&&Wt(u.amhap,`#${y}X${N}_${J}`)}const k=i.map(C=>{const P=Qs(C??"");return Jk[P]??P});for(const C of Wm){if(!C.members.includes(T))continue;const P=C.members.filter(M=>M!==T),N=k.map((M,D)=>({b:M,pos:Js[D]})).filter(M=>P.includes(M.b));if(new Set(N.map(M=>M.b)).size===2){const[M,D]=N.map($=>$.pos).sort(($,z)=>["","","",""].indexOf($)-["","","",""].indexOf(z));Wt(u.jijiSamhap,`#${y}X${M}X${D}_(${C.name})`)}}const j=[...i.map((C,P)=>({b:Qs(C),pos:Js[P]}))];for(const C of Xm){const P=j.filter(N=>C.members.includes(N.b));if(new Set(P.map(N=>N.b)).size===3){const N=P.map(M=>M.pos).join("X");Wt(u.jijiBanghap,`#${N}_(${C.name})`)}}for(const C of gS){if(!C.members.includes(T))continue;const P=C.members.filter(M=>M!==T),N=k.map((M,D)=>({b:M,pos:Js[D]})).filter(M=>P.includes(M.b));if(new Set(N.map(M=>M.b)).size===2){const[M,D]=N.map($=>$.pos).sort(($,z)=>["","","",""].indexOf($)-["","","",""].indexOf(z));Wt(u.jijiHyeong,`#${y}X${M}X${D}_${C.name}`),C.name===""&&(m=!0),C.name===""&&(p=!0)}}}{const y=[],_=[["",e.daewoon],["",e.sewoon],["",e.wolwoon],["",e.ilwoon]];for(const[x,S]of _){const T=Ge(S??"");T.length>=2&&y.push({kind:x,b:Qs(T)})}if(y.length>=2){const x=i.map((S,T)=>({pos:Js[T],b:Qs(S)}));for(const S of gS)for(let T=0;T<y.length;T++)for(let k=T+1;k<y.length;k++){const j=y[T],C=y[k];for(const P of x){const N=new Set([P.b,j.b,C.b]);if(N.size===3&&S.members.every(M=>N.has(M))){const M=[j.kind,C.kind].sort(($,z)=>yS.indexOf($)-yS.indexOf(z)).join("X"),D=`${P.pos}X${M}`;Wt(u.jijiHyeong,`#${D}_${S.name}`),S.name===""&&(m=!0),S.name===""&&(p=!0)}}}}}return(m||p)&&(u.jijiHyeong=u.jijiHyeong.filter(y=>!(m&&/(||)/.test(y)||p&&/(||)/.test(y)))),eA(u)}function XP(e,t){const i=e.map(Ge).map(m=>Qs(m)),o=mf.month,l=i[o],u=m=>{const p=[];for(let y=0;y<4;y++){const _=i[y];_&&m.has(_)&&p.push(y)}return p},f=m=>{const p=[...m].sort((y,_)=>y-_);return p.length===3&&p[0]+1===p[1]&&p[1]+1===p[2]};for(const m of Wm){const p=new Set(m.members),y=u(p);if(y.length===3){const _=y.includes(o),x=l===m.wang;_?f(y)?t[m.out]+=x?10:8:t[m.out]+=5:t[m.out]+=3}if(y.length===2&&y.includes(o)){const _=y[0]===o?y[1]:y[0],x=l===m.wang;_===mf.day&&x?t[m.out]+=8:_===mf.year&&x?t[m.out]+=6:_===mf.hour&&(t[m.out]+=x?4:2)}}for(const m of Xm){const p=new Set(m.members),y=u(p);if(y.length===3){const _=y.includes(o),x=l===m.wang;_?f(y)?t[m.out]+=x?8:6:t[m.out]+=4:t[m.out]+=2}}}function vS(e){const t=["","","",""],n=e.map(Ge),i=n.map(f=>bm(f)),o=n.map(f=>Qs(f)),l=new Map,u=new Map;for(let f=0;f<4;f++){const m=i[f],p=o[f];m.includes(m)&&l.set(m,[...l.get(m)??[],f]),p.includes(p)&&u.set(p,[...u.get(p)??[],f])}return{stemsByPos:i,brsByPos:o,stemPos:l,brPos:u,names:t}}function Ft(e){return Js[e]}function pr(e,t){t&&(e.includes(t)||e.push(t))}function JP(e,t){const n=vS(e),i=vS(t),o={:[],:[],:[],:[],:[],:[],:[],:[],:[],:[],:[],:[],:[],:[]};for(let f=0;f<4;f++){const m=n.stemsByPos[f],p=n.brsByPos[f];for(let y=0;y<4;y++){const _=i.stemsByPos[y],x=i.brsByPos[y],S=Sn(Gy,m,_);S&&pr(o.,`${Ft(f)}X${Ft(y)} ${S}`);const T=Sn(Fy,m,_);T&&pr(o.,`${Ft(f)}X${Ft(y)} ${T}`);const k=Sn(Yy,p,x);k&&pr(o.,`${Ft(f)}X${Ft(y)} ${k}`);const j=Sn(qy,p,x);j&&pr(o.,`${Ft(f)}X${Ft(y)} ${j}`);const C=Sn(Zy,p,x);C&&pr(o.,`${Ft(f)}X${Ft(y)} ${C}`);const P=Sn(Vy,p,x);P&&pr(o.,`${Ft(f)}X${Ft(y)} ${P}`);const N=Sn(Ky,p,x);N&&pr(o.,`${Ft(f)}X${Ft(y)} ${N}`);const M=Sn(Wy,p,x);M&&pr(o.,`${Ft(f)}X${Ft(y)} ${M}`);const $=Sn([{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],p,x);$&&pr(o.,`${Ft(f)}X${Ft(y)} ${$}`);const z=`${m}${x}`,F=`${_}${p}`;ud.has(z)&&pr(o.,`${Ft(f)}X${Ft(y)} ${z}`),ud.has(F)&&pr(o.,`${Ft(y)}X${Ft(f)} ${F}`);const K=Sn(Xy,p,x);if(K)pr(o.,`${Ft(f)}X${Ft(y)} ${K}`);else{const oe=Sn(Jy,p,x);oe&&pr(o.,`${Ft(f)}X${Ft(y)} ${oe}`)}}}const l=new Set(n.brsByPos.filter(Boolean)),u=new Set(i.brsByPos.filter(Boolean));for(const f of Wm){if(f.members.every(y=>l.has(y)||u.has(y))){const y=f.members.filter(x=>l.has(x)).length,_=f.members.filter(x=>u.has(x)).length;y>=1&&_>=1&&pr(o.,`${f.name}`)}const p=f.members.filter(y=>l.has(y)||u.has(y));if(p.length===2&&p.includes(f.wang)){const y=p.some(x=>l.has(x)),_=p.some(x=>u.has(x));if(y&&_){const[x,S]=p.sort(),T=n.brPos.get(x)?.[0]??n.brPos.get(S)?.[0],k=i.brPos.get(x)?.[0]??i.brPos.get(S)?.[0];T!=null&&k!=null&&pr(o.,`${Ft(T)}X${Ft(k)} ${x}${S}`)}}}for(const f of Xm)if(f.members.every(p=>l.has(p)||u.has(p))){const p=f.members.filter(_=>l.has(_)).length,y=f.members.filter(_=>u.has(_)).length;p>=1&&y>=1&&pr(o.,`${f.name}`)}return Object.keys(o).forEach(f=>o[f].sort()),o}function Iu(e,t){if(e==="#")return"bg-neutral-100 text-neutral-500 border-neutral-200 dark:bg-neutral-900 dark:text-neutral-500 dark:border-neutral-700";switch(t){case"natal":return"bg-violet-100 text-violet-800 border-violet-200 dark:bg-violet-900/30 dark:text-violet-200 dark:border-violet-800";case"dae":return"bg-blue-100 text-blue-800 border-blue-200 dark:bg-blue-900/30 dark:text-blue-200 dark:border-blue-800";case"se":return"bg-green-100 text-green-800 border-green-200 dark:bg-green-900/30 dark:text-green-200 dark:border-green-800";case"wol":return"bg-orange-100 text-orange-800 border-orange-200 dark:bg-orange-900/30 dark:text-orange-200 dark:border-orange-800";case"il":return"bg-red-100 text-red-800 border-red-200 dark:bg-red-900/30 dark:text-red-200 dark:border-red-800";default:return""}}function Xi({label:e,natal:t,dae:n,se:i,wol:o,il:l}){const u=n.length+i.length+o.length+l.length>0,f=t.length>0?t:["#"],m=u?f.filter(_=>_!=="#"):f,y=m.some(_=>_!=="#")||n.length>0||i.length>0||o.length>0||l.length>0?"shrink-0 w-20 text-xs font-semibold text-orange-700 dark:text-orange-300 mt-1":"shrink-0 w-20 text-xs font-semibold text-neutral-700 dark:text-neutral-400 mt-1";return g.jsxs("div",{className:"flex items-start gap-3 border border-gray-700 dark:border-gray-200 p-2 rounded-sm",children:[g.jsx("div",{className:y,children:e}),g.jsxs("div",{className:"flex flex-wrap gap-2",children:[m.map((_,x)=>g.jsx("span",{className:"text-xs px-2 py-1 rounded-full border whitespace-nowrap "+Iu(_,"natal"),children:_},`natal-${x}`)),n.map((_,x)=>g.jsx("span",{className:"text-xs px-2 py-1 rounded-full border whitespace-nowrap "+Iu(_,"dae"),children:_},`dae-${x}`)),i.map((_,x)=>g.jsx("span",{className:"text-xs px-2 py-1 rounded-full border whitespace-nowrap "+Iu(_,"se"),children:_},`se-${x}`)),o.map((_,x)=>g.jsx("span",{className:"text-xs px-2 py-1 rounded-full border whitespace-nowrap "+Iu(_,"wol"),children:_},`wol-${x}`)),l.map((_,x)=>g.jsx("span",{className:"text-xs px-2 py-1 rounded-full border whitespace-nowrap "+Iu(_,"il"),children:_},`il-${x}`))]})]})}function zb(e){return Array.isArray(e)?e:[]}function pf(e,t){const n=new Set(zb(e));return zb(t).filter(o=>!n.has(o))}function QP({pillars:e,daewoon:t,sewoon:n,wolwoon:i,ilwoon:o,tab:l=""}){const u=Qy(e),f=gr({natal:e}),m=t?gr({natal:e,daewoon:t}):f,p=n?gr({natal:e,daewoon:t,sewoon:n}):m,y=i?gr({natal:e,daewoon:t,sewoon:n,wolwoon:i}):p,_=o?gr({natal:e,daewoon:t,sewoon:n,wolwoon:i,ilwoon:o}):y,x=k=>({natal:zb(u[k]),dae:pf(f[k],m[k]),se:pf(m[k],p[k]),wol:pf(p[k],y[k]),il:pf(y[k],_[k])}),S={cheonganHap:x("cheonganHap"),cheonganChung:x("cheonganChung"),jijiSamhap:x("jijiSamhap"),jijiBanghap:x("jijiBanghap"),jijiYukhap:x("jijiYukhap"),amhap:x("amhap"),ganjiAmhap:x("ganjiAmhap"),jijiChung:x("jijiChung"),jijiHyeong:x("jijiHyeong"),jijiPa:x("jijiPa"),jijiHae:x("jijiHae")},T=k=>l===""?{natal:k.natal,dae:[],se:[],wol:[],il:[]}:l===""?{natal:k.natal,dae:k.dae,se:[],wol:[],il:[]}:l===""?{natal:k.natal,dae:k.dae,se:k.se,wol:[],il:[]}:l===""?{natal:k.natal,dae:k.dae,se:k.se,wol:k.wol,il:[]}:l===""?{natal:k.natal,dae:k.dae,se:k.se,wol:k.wol,il:k.il}:{natal:[],dae:[],se:[],wol:[],il:[]};return g.jsxs("div",{className:"rounded-xl p-4 bg-neutral-100 dark:bg-neutral-900 text-neutral-900 dark:text-neutral-100 space-y-2",children:[g.jsx("div",{className:"text-base font-bold mb-1",children:""}),g.jsx(Xi,{label:"",...T(S.cheonganHap)}),g.jsx(Xi,{label:"",...T(S.cheonganChung)}),g.jsx("div",{className:"border-t border-neutral-200 dark:border-neutral-800 my-2"}),g.jsx(Xi,{label:"",...T(S.jijiSamhap)}),g.jsx(Xi,{label:"",...T(S.jijiBanghap)}),g.jsx(Xi,{label:"",...T(S.jijiYukhap)}),g.jsx(Xi,{label:"",...T(S.amhap)}),g.jsx(Xi,{label:"",...T(S.ganjiAmhap)}),g.jsx(Xi,{label:"",...T(S.jijiChung)}),g.jsx(Xi,{label:"",...T(S.jijiHyeong)}),g.jsx(Xi,{label:"",...T(S.jijiPa)}),g.jsx(Xi,{label:"",...T(S.jijiHae)})]})}const e9={:{:"#13B713",:"#DC143C",:"#F0B100",:"#a0a0a0",:"#353535"},:{:"#DC143C",:"#F0B100",:"#a0a0a0",:"#353535",:"#13B713"},:{:"#F0B100",:"#a0a0a0",:"#353535",:"#13B713",:"#DC143C"},:{:"#a0a0a0",:"#353535",:"#13B713",:"#DC143C",:"#F0B100"},:{:"#353535",:"#13B713",:"#DC143C",:"#F0B100",:"#a0a0a0"}},t9={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};function nA(e){const t=t9[e]??"";return e9[t]}const rA={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},n9={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},kd={:"",:"",:"",:"",:""},dd={:"",:"",:"",:"",:""},Mc={:"",:"",:"",:"",:""},r9=[{name:"",min:0,max:10},{name:"",min:10,max:20},{name:"",min:20,max:35},{name:"",min:35,max:45},{name:"",min:45,max:55},{name:"",min:55,max:65},{name:"",min:65,max:80},{name:"",min:80,max:100.0001}],i9={:{temp:"cold",wet:"wet"},:{temp:"cold",wet:"wet"},:{temp:"cold",wet:"wet"},:{temp:"mild",wet:"normal"},:{temp:"mild",wet:"normal"},:{temp:"mild",wet:"wet"},:{temp:"hot",wet:"normal"},:{temp:"hot",wet:"dry"},:{temp:"hot",wet:"wet"},:{temp:"mild",wet:"dry"},:{temp:"mild",wet:"dry"},:{temp:"mild",wet:"dry"}};function ev(e){return Math.max(0,Math.min(100,e))}function Tc(e,t,n){return Math.max(t,Math.min(n,e))}function s9(e){const t=ev(e);return r9.find(n=>t>=n.min&&t<n.max)?.name??""}function a9(e){const t=e?.[2]?.charAt(0)??"";return rA[t]??null}function o9(e){return(e?.[1]?.charAt(1)??"")||null}function Jm(e){const t=Object.entries(Mc);for(const[n,i]of t)if(i===e)return n;return""}function l9(e){return e?{peer:e,resource:dd[e],leak:kd[e],wealth:Mc[e],officer:Jm(e)}:null}function c9(e){const t={:0,:0,:0,:0,:0};for(const n of e){if(!n)continue;const i=n.charAt(0),o=n.charAt(1),l=rA[i],u=n9[o];l&&(t[l]+=10),u&&(t[u]+=6)}return t}function u9(e){const t=Object.values(e).reduce((i,o)=>i+o,0);if(t<=0)return{:20,:20,:20,:20,:20};const n={:0,:0,:0,:0,:0};return Object.keys(e).forEach(i=>{n[i]=e[i]/t*100}),n}function d9(e){if(!e||e.length===0)return null;const t=e.reduce((i,o)=>i+(o?.value??0),0)||0;if(t<=0)return null;const n=i=>e.find(o=>o.name===i)?.value??0;return ev((n("")+n(""))/t*100)}function h9(e,t){return!e||!t?null:t===e?"":kd[e]===t?"":Mc[e]===t?"":Jm(e)===t?"":dd[e]===t?"":null}const Pg=24,f9=[[60,0],[55,.01],[50,.03],[45,.06],[40,.1],[35,.18],[30,.32],[27,.48],[24,.62]];function m9(e){for(const[t,n]of f9)if(e>=t)return n;return 1}const ym=20,_S=(e,t)=>Tc((ym-(t[e]??0))/ym,0,1),xS=(e,t)=>Tc(((t[e]??0)-ym)/ym,0,1);function p9(e,t,n,i){const o=h9(e,n);if(!e||!o)return 0;const l=Tc((50-t)/50,0,1),u=Tc((t-50)/50,0,1),f=_S(n,i),m=xS(n,i),p=_S(e,i),y=xS(e,i),_=6.5;let x=0;if(l>0)switch(o){case"":x=+(.3+.4*p+.15*f)*l;break;case"":x=+(.18+.45*p)*l;break;case"":x=-(.08+.2*(1-f)+.1*y)*l;break;case"":x=-(.22+.25*(1-f)+.1*(1-p))*l;break;case"":x=-(.35+.25*(1-f)+.1*(1-p))*l;break}else if(u>0)switch(o){case"":x=-(.25+.25*(1-f)+.2*y)*u;break;case"":x=-(.28+.2*y)*u;break;case"":x=+(.18+.2*f+.15*y)*u;break;case"":x=+(.22+.25*f+.1*y)*u;break;case"":x=+(.2+.2*f)*u;break}else switch(o){case"":x=.08*(p+f);break;case"":x=.05*p-.03*y;break;case"":x=.02*f-.02*m;break;case"":x=.01*f-.06*m;break;case"":x=-.05*(1-f);break}return Math.round(_*x*10)/10}function g9(e,t,n,i){const o=["","",""].includes(t),l=["","","",""].includes(t),u={:0,:0,:0,:0,:0};if(o){const f=kd[e],m=Mc[e],p=Jm(e);u[f]+=28,u[m]+=22,u[p]+=20,i.get(f)?.push(":    ()"),i.get(m)?.push(":     "),i.get(p)?.push(":     ")}if(l){const f=dd[e],m=e;u[f]+=28,u[m]+=22,i.get(f)?.push(":     "),i.get(m)?.push(":     ")}return u}function wS(e,t){if(!e)return{:0,:0,:0,:0,:0};const n=i9[e]??{temp:"mild",wet:"normal"},i={:0,:0,:0,:0,:0};return n.temp==="cold"?(i.+=16,i.+=6,t.get("")?.push(":   "),t.get("")?.push(":  ")):n.temp==="hot"&&(i.+=14,i.+=6,t.get("")?.push(":   "),t.get("")?.push(":  ")),n.wet==="wet"?(i.+=8,i.+=4,t.get("")?.push(":   "),t.get("")?.push(":  ")):n.wet==="dry"&&(i.+=8,i.+=4,t.get("")?.push(":   "),t.get("")?.push(":  ")),i}function SS(e,t){const n={:0,:0,:0,:0,:0},i=["","","","",""];for(const o of i){const l=Mc[o],u=Math.max(0,(e[o]??0)-(e[l]??0));if(u<=0)continue;const f=kd[o],m=Math.round(u*.35);m>0&&(n[f]+=m,t.get(f)?.push(`: ${o}${l} `))}return n}function ES(e,t){const n={:0,:0,:0,:0,:0},i=Object.entries(e),o=Math.min(...i.map(([,u])=>u)),l=i.filter(([,u])=>u<=Math.max(6,o));for(const[u]of l)n[u]+=12,t.get(u)?.push(":  ");return n}function TS(e,t){const n=a9(e),i=o9(e),o=c9(e),l=u9(o);let u=d9(t);if(u==null)if(!n)u=50;else{const Q=n,Y=dd[n],ne=Object.values(o).reduce((ie,Se)=>ie+Se,0)||1;u=ev(((o[Q]??0)+(o[Y]??0))/ne*100)}const f=s9(u),m={:0,:0,:0,:0,:0},p=new Map(["","","","",""].map(Q=>[Q,[]]));if(n){const Q=g9(n,f,o,p);Object.keys(m).forEach(Y=>{m[Y]+=Q[Y]??0})}const y=wS(i,p);Object.keys(m).forEach(Q=>{m[Q]+=y[Q]??0});const _=SS(o,p);Object.keys(m).forEach(Q=>{m[Q]+=_[Q]??0});const x=ES(o,p);Object.keys(m).forEach(Q=>{m[Q]+=x[Q]??0});const S=l9(n),T={:0,:0,:0,:0,:0};if(Array.isArray(t))for(const Q of t)T[Q.name]=Q.value;if(u>=45&&u<=55&&S){const Q=T.>=30||T.>=Math.max(T.,T.,T.,T.)+5;u<=50?(m[S.resource]+=14,p.get(S.resource)?.push(": -"),m[S.peer]+=10,p.get(S.peer)?.push(": -"),m[S.leak]+=6,p.get(S.leak)?.push(": -"),m[S.wealth]+=3,p.get(S.wealth)?.push(": -"),Q&&S.officer&&(m[S.officer]=Math.round(m[S.officer]*.8*10)/10,p.get(S.officer)?.push(":   "))):(m[S.leak]+=14,p.get(S.leak)?.push(": -"),m[S.wealth]+=10,p.get(S.wealth)?.push(": -"),S.officer&&(m[S.officer]+=6,p.get(S.officer)?.push(": -")),m[S.resource]+=3,p.get(S.resource)?.push(": -"))}["","","","",""].forEach(Q=>{const Y=p9(n,u,Q,l);m[Q]=Tc(Math.round((m[Q]+Y)*10)/10,0,999)});const j=u<50;["","","","",""].forEach(Q=>{const Y=l[Q]??0,ne=j&&n===Q;if(Y>=Pg&&!ne){const ie=m9(Y);m[Q]=Math.round(m[Q]*ie*10)/10;const Se=Math.min(14,Math.max(0,Math.ceil((Y-Pg)*.5)));Se>0&&(m[Q]=Tc(m[Q]-Se,0,999)),p.get(Q)?.push(" ()")}});const C={:[],:[],:[],:[],:[]};if(n){const Q=kd[n],Y=Mc[n],ne=Jm(n),ie=n,Se=dd[n];C[Q].push(""),C[Y].push(""),C[ne].push(""),C[ie].push(""),C[Se].push("")}const P={:(o.??0)>0,:(o.??0)>0,:(o.??0)>0,:(o.??0)>0,:(o.??0)>0},N=Q=>{const Y=l[Q]??0;return Y>=Pg&&!(j&&n===Q)?Y>=55?4:Y>=45?3:2:P[Q]?0:1},M=wS(i,new Map),D=SS(o,new Map),$=ES(o,new Map),z=Object.keys(m).map(Q=>({element:Q,score:Math.round(m[Q]*10)/10,via:b9(Q,M,D,$),reasons:(p.get(Q)??[]).slice(),tenGodHints:C[Q]})).sort((Q,Y)=>{const ne=N(Q.element),ie=N(Y.element);return ne!==ie?ne-ie:Y.score!==Q.score?Y.score-Q.score:Q.element.localeCompare(Y.element)}),F=y9(f,M,D,$),K={:0,:0,:0,:0,:0},oe=t?t.reduce((Q,Y)=>(Q[Y.name]=Y.value,Q),{...K}):void 0;return{chosenType:F,ordered:z,debug:{band:f,overallPct:u,elementScore:o,tenGodTotals:oe,monthBranch:i??void 0}}}function b9(e,t,n,i){const o=[];return(t[e]??0)>0&&o.push(""),(n[e]??0)>0&&o.push(""),(i[e]??0)>0&&o.push(""),o.length===0&&o.push(""),o}function y9(e,t,n,i){if(["","","",""].includes(e))return"";const l=p=>Object.values(p).reduce((y,_)=>y+_,0),u=l(t),f=l(n),m=l(i);return u>Math.max(f,m)?"":f>=m?"":""}const v9=Object.fromEntries(mi..map((e,t)=>[e,jr[t]])),_9=Object.fromEntries(jr.map((e,t)=>[e,mi.[t]])),x9=Object.fromEntries(mi..map((e,t)=>[e,Yr[t]])),w9=Object.fromEntries(Yr.map((e,t)=>[e,mi.[t]])),S9=e=>v9[e]??e,E9=e=>x9[e]??e,T9=e=>_9[e]??e,k9=e=>w9[e]??e;function A9(e){const t={...e};for(const n of Object.keys(e)){const i=/[]/.test(n)?S9(n):T9(n);i&&t[i]===void 0&&(t[i]=e[n])}return t}function tv(e){const t={...e};for(const n of Object.keys(e)){const i=/[]/.test(n)?E9(n):k9(n);i&&t[i]===void 0&&(t[i]=e[n])}return t}const j9={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},N9={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},iA={:[{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}]},O9={...iA,:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.2},{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.2},{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}]},kS=A9(j9),AS=tv(N9);tv(iA);tv(O9);const D9=["","","","",""],mn={2:4,1:3,3:2,0:1};function gf(e,t,n="classic"){const i=oi(t),o=Xt(t),l=(n==="hgc"?Rm:Cm)[o]??[];return[i,...l].includes(e)}const hc={1:4,2:3,0:2,3:1},sA=new Set(Object.keys(jm)),aA=new Set(Object.keys(Wb)),M9=e=>e.slice(0,1),C9=e=>e.slice(-1);function ea(e){return Am.has(e)?e:sA.has(e)?jm[e]??e:e}function yr(e){return Kb.has(e)?e:aA.has(e)?Wb[e]??e:e}function oi(e){return ea(M9(e))}function Xt(e){return yr(C9(e))}const Te={year:0,month:1,day:2,hour:3};function $g(e,t){const n=yr(e),i=[Te.day,Te.month,Te.hour,Te.year];for(const o of i)if(Xt(t[o])===n)return{pos:o,weight:mn[o]??0};return null}function nv(e,t,n){return Xt(t[n])===yr(e)?{pos:n,weight:mn[n]}:null}function R9(e,t){const n=ea(e),i=[Te.day,Te.month,Te.hour,Te.year];for(const o of i)if(oi(t[o])===n)return{pos:o,weight:mn[o]??0};return null}const L9=/^#(|||)X\1_/,B9=e=>L9.test(e);function jS(e){const t=new Map;for(const n of e){if(B9(n.name))continue;const i=`${n.name}@${n.pos}`,o=t.get(i);(!o||n.weight>o.weight)&&t.set(i,n)}return Array.from(t.values()).sort((n,i)=>i.weight!==n.weight?i.weight-n.weight:n.name.localeCompare(i.name,"ko"))}function bf(e){return e===3?"si":e===2?"il":e===1?"wol":"yeon"}const ll=e=>e===0?"":e===1?"":e===2?"":"",Cc=e=>e==="dae"?"":e==="se"?"":e==="wol"?"":"",P9=(e,t)=>`#X${ll(t)}_${e}`,oA=(e,t)=>t===Te.month?`#_${e}`:`#X${ll(t)}_${e}`,yc=(e,t,n)=>`#${ll(t)}X${ll(n)}_${e}`,$9=(e,t)=>`#${e==="day"?"":""}X${ll(t)}_`,xs=e=>`#_${e}`,yf=(e,t)=>`#${ll(t)}_${e}`,rc=(e,t)=>`#X${Cc(t)}_${e}`,zu=(e,t)=>`#X${Cc(t)}_${e}`,Ig=(e,t,n)=>`#${Cc(t)}X${ll(n)}_${e}`,I9=(e,t)=>`#${t==="day"?"":""}X${Cc(e)}_`,z9=(e,t)=>`#${t==="day"?"":""}X${Cc(e)}_`,NS=(e,t)=>`#X${Cc(e)}_${t}`;function U9(e){if(!e)return null;const t=Array.from(String(e));let n=null,i=null;for(const o of t)!n&&(Am.has(o)||sA.has(o))&&(n=ea(o)),(Kb.has(o)||aA.has(o))&&(i=yr(o));return n&&i?{stem:n,branch:i}:null}function zg(e){return e.map(Xt)}const gn=e=>Object.fromEntries(Object.entries(e).map(([t,n])=>[yr(t),(Array.isArray(n)?n:[n]).map(yr)])),H9=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),lA=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),G9=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),F9=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Y9=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),cA=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),q9=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Z9=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),V9=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),K9=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),W9=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),uA=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),X9=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),J9=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Q9=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),e6=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),t6=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),n6=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),dA=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),r6=uA,i6=lA,s6=dA,a6=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),o6=cA,l6=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),c6=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),u6=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),hA=e=>(Array.isArray(e)?e:String(e).split("")).map(t=>yr(t.trim())).filter(Boolean),Ii=e=>Object.fromEntries(Object.entries(e).map(([t,n])=>[yr(t),(Array.isArray(n)?n:[n]).map(i=>yr(i))])),OS={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},DS={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},MS={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},CS={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},d6=Ii({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),RS=Ii({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Qm=e=>Object.fromEntries(Object.entries(e).map(([t,n])=>[yr(t),hA(n)])),h6=Qm({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),f6=Qm({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),m6=Qm({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),p6=Qm({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),g6=Ii({:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""]}),b6=Ii({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),y6=Ii({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),v6=Ii({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),_6=Ii({:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""]}),LS=Ii({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),x6=Ii({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),w6=Ii({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),S6=Ii({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),E6=Ii({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),un=e=>Object.fromEntries(Object.entries(e).map(([t,n])=>[ea(t),hA(n)])),T6=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),BS=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),k6=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),A6=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),j6=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),N6=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),O6=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),PS=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),D6=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),M6=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),C6=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),R6=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),L6=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),$S=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),B6=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),P6=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),IS=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),$6=un({:"",:"",:"",:""}),I6=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),zS=un({:"",:"",:""}),US=un({:"",:"",:""}),z6=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),HS=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),GS=un({:"",:"",:"",:"",:"",:"",:""}),Ug=[["",""],["",""],["",""],["",""],["",""],["",""]],Hg=[["",""],["",""],["",""],["",""],["",""],["",""]],U6=new Set(["","","",""]),FS=[["",""],["",""]],H6=[{set:new Set(["","","","","","","","","",""]),voids:["",""]},{set:new Set(["","","","","","","","","",""]),voids:["",""]},{set:new Set(["","","","","","","","","",""]),voids:["",""]},{set:new Set(["","","","","","","","","",""]),voids:["",""]},{set:new Set(["","","","","","","","","",""]),voids:["",""]},{set:new Set(["","","","","","","","","",""]),voids:["",""]}];function Uu(e,t,n){const i=yr(t),o=yr(n);for(const[l,u]of e)if(l===i&&u===o||l===o&&u===i)return!0;return!1}function YS(e,t,n){const i=yr(t),o=yr(n);for(const[l,u]of e)if(l===i&&u===o||l===o&&u===i)return`${l}${u}`;return`${i}${o}`}function vf(e){for(const t of H6)if(t.set.has(e))return t.voids;return null}function Gg(e){const t=yr(e),n=[{group:new Set(["","",""]),years:new Set(["","",""])},{group:new Set(["","",""]),years:new Set(["","",""])},{group:new Set(["","",""]),years:new Set(["","",""])},{group:new Set(["","",""]),years:new Set(["","",""])}];for(const i of n)if(i.group.has(t))return Array.from(i.years);return null}function Ad(e,t){e.push(t)}function Fg(e,t,n,i,o=0){const l=hc[n]>=hc[i]?n:i,u=yc(t,n,i);e.push({name:u,weight:mn[l]+o,pos:l})}function nn(e,t,n,i,o){const l=Xt(e[Te.year]),u=t[l];if(!u)return;const f=n==="MONTH"?[Te.month]:n==="DAY"?[Te.day]:n==="HOUR"?[Te.hour]:[Te.year,Te.month,Te.day,Te.hour];for(const m of u)for(const p of f){const y=nv(m,e,p);y&&Ad(o,{name:yc(i,Te.year,p),weight:y.weight,pos:p})}}function _f(e,t,n,i){const o=Xt(e[Te.month]),l=t[o];if(!l)return;const u=ea(l),f=R9(u,e);f&&Ad(i,{name:oA(n,f.pos),weight:f.weight,pos:f.pos})}function ii(e,t,n,i,o="ALL"){const l=Xt(e[Te.month]),u=t[l];if(!u)return;const f=o==="YEAR"?[Te.year]:o==="DAY"?[Te.day]:o==="HOUR"?[Te.hour]:o==="DAY_HOUR"?[Te.day,Te.hour]:[Te.year,Te.month,Te.day,Te.hour];for(const m of u)for(const p of f){const y=nv(m,e,p);if(!y)continue;const _=p===Te.month?`#_${n}`:oA(n,p);Ad(i,{name:_,weight:y.weight,pos:p})}}function xf(e,t,n,i){const o=Xt(e[Te.month]),l=t[o];if(!l)return;const u=e[Te.day];l.includes(u)&&Ad(i,{name:yc(n,Te.month,Te.day),weight:mn[Te.day],pos:Te.day})}function Vt(e,t,n,i,o){const l=oi(e[Te.day]),u=t[l];if(!u)return;const f=o==="DAY"?[Te.day]:o==="HOUR"?[Te.hour]:[Te.year,Te.month,Te.day,Te.hour];for(const m of u)for(const p of f){const y=nv(m,e,p);y&&Ad(i,{name:P9(n,p),weight:y.weight,pos:p})}}function Gr({natal:e,daewoon:t,sewoon:n,wolwoon:i,ilwoon:o,basis:l}){const u=oi(e[Te.day]),f=Xt(e[Te.day]),m=Xt(e[Te.month]),p=Xt(e[Te.year]),y=zg(e),_=[],x=[],S=new Set(["","","",""]);if(nn(e,H9,"MONTH","",x),nn(e,lA,"DAY","",x),nn(e,F9,"MONTH","",x),nn(e,Y9,"MONTH","",x),nn(e,q9,"ALL","",x),nn(e,Z9,"HOUR","",x),nn(e,V9,"ALL","",x),nn(e,K9,"ALL","",x),nn(e,W9,"ALL","",x),nn(e,uA,"ALL","",x),nn(e,X9,"ALL","",x),nn(e,J9,"ALL","",x),nn(e,Q9,"ALL","",x),nn(e,e6,"ALL","",x),nn(e,t6,"ALL","",x),nn(e,n6,"ALL","",x),nn(e,dA,"ALL","",x),nn(e,r6,"ALL","",x),nn(e,i6,"ALL","",x),nn(e,s6,"ALL","",x),nn(e,a6,"ALL","",x),nn(e,o6,"ALL","",x),nn(e,l6,"ALL","",x),nn(e,c6,"ALL","",x),nn(e,u6,"ALL","",x),_f(e,OS,"",_),_f(e,DS,"",_),_f(e,MS,"",_),_f(e,CS,"",_),ii(e,d6,"",x,"ALL"),ii(e,RS,"",x,"YEAR"),ii(e,RS,"",x,"DAY"),xf(e,h6,"",_),xf(e,f6,"",x),xf(e,m6,"",x),xf(e,p6,"",_),ii(e,g6,"",x,"ALL"),ii(e,b6,"",x,"ALL"),ii(e,y6,"",x,"ALL"),ii(e,v6,"",x,"ALL"),ii(e,_6,"",x,"ALL"),ii(e,LS,"",_,"ALL"),ii(e,x6,"",_,"DAY_HOUR"),ii(e,w6,"",_,"DAY_HOUR"),ii(e,S6,"",_,"ALL"),ii(e,E6,"",_,"ALL"),Vt(e,T6,"",_,"ALL"),Vt(e,BS,"",_,"ALL"),Vt(e,k6,"",_,"ALL"),Vt(e,A6,"",_,"ALL"),Vt(e,j6,"",_,"ALL"),Vt(e,N6,"",_,"ALL"),Vt(e,O6,"",_,"ALL"),Vt(e,PS,"",_,"ALL"),Vt(e,D6,"",_,"ALL"),Vt(e,M6,"",_,"ALL"),Vt(e,C6,"",_,"ALL"),Vt(e,R6,"",_,"ALL"),Vt(e,L6,"",_,"ALL"),Vt(e,$S,"",x,"ALL"),Vt(e,B6,"",x,"ALL"),Vt(e,P6,"",x,"ALL"),Vt(e,IS,"",x,"DAY"),Vt(e,IS,"",x,"HOUR"),Vt(e,zS,"",x,"DAY"),Vt(e,zS,"",x,"HOUR"),Vt(e,US,"",x,"DAY"),Vt(e,US,"",x,"HOUR"),Vt(e,$6,"",x,"DAY"),Vt(e,I6,"",x,"ALL"),Vt(e,z6,"",_,"ALL"),Vt(e,HS,"",x,"ALL"),S.has(e[Te.day])){x.push({name:xs(""),weight:mn[Te.day],pos:Te.day});for(const Z of[Te.year,Te.month,Te.hour])e[Z]===e[Te.day]&&x.push({name:yf("",Z),weight:mn[Z],pos:Z})}const k=GS[u];if(k)for(const Z of[Te.year,Te.month,Te.day,Te.hour]){const G=oi(e[Z]),B=Xt(e[Z]);G===u&&k.includes(B)&&x.push({name:yf("",Z),weight:mn[Z],pos:Z})}for(const[Z,G]of FS){const B=$g(Z,e),q=$g(G,e);B&&q&&Fg(x,"",B.pos,q.pos)}{const Z=new Set(["",""]),G=new Set(["","","",""]);for(let B=0;B<=3;B++){const q=oi(e[B]),V=Xt(e[B]);(Z.has(q)||G.has(V))&&x.push({name:yf("",B),weight:mn[B],pos:B})}}{const Z=oi(e[Te.day]),G=e[Te.hour],B=(q,V)=>q.includes(Z)&&V.includes(G);B(["",""],["",""])&&x.push({name:xs(""),weight:mn[Te.hour],pos:Te.hour}),B(["",""],["",""])&&x.push({name:xs(""),weight:mn[Te.hour],pos:Te.hour}),B(["",""],["",""])&&x.push({name:xs(""),weight:mn[Te.hour],pos:Te.hour}),B(["",""],["",""])&&x.push({name:xs(""),weight:mn[Te.hour],pos:Te.hour}),B(["",""],["",""])&&x.push({name:xs(""),weight:mn[Te.hour],pos:Te.hour})}{const Z=zg(e);["","","",""].every(B=>Z.includes(B))&&_.push({name:xs(""),weight:mn[Te.day],pos:Te.day})}{const Z=e[Te.day],G=e[Te.hour];(Z===""&&G===""||Z===""&&G==="")&&x.push({name:yc("",Te.day,Te.hour),weight:mn[Te.hour],pos:Te.hour})}{const Z=Xt(e[Te.year]),G=new Set(zg(e).slice(1)),B=(q,V)=>q.every(H=>G.has(H))&&Z===V;(B(["","",""],"")||B(["","",""],"")||B(["","",""],"")||B(["","",""],""))&&_.push({name:xs(""),weight:mn[Te.day],pos:Te.day})}["",""].includes(e[Te.day])&&_.push({name:xs(""),weight:mn[Te.day],pos:Te.day});{const Z=oi(e[Te.day]),B={:{rok:"",group:["","",""],ma:"",maStem:""},:{rok:"",group:["","",""],ma:"",maStem:""},:{rok:"",group:["","",""],ma:"",maStem:""},:{rok:"",group:["","",""],ma:"",maStem:""},:{rok:"",group:["","",""],ma:"",maStem:""},:{rok:"",group:["","",""],ma:"",maStem:""},:{rok:"",group:["","",""],ma:"",maStem:""},:{rok:"",group:["","",""],ma:"",maStem:""},:{rok:"",group:["","",""],ma:"",maStem:""},:{rok:"",group:["","",""],ma:"",maStem:""}}[Z],q=e.some(X=>Xt(X)===B.rok),H=oi(e[Te.hour])===B.maStem;q&&H&&_.push({name:yc("",Te.day,Te.hour),weight:mn[Te.hour],pos:Te.hour})}{const Z=oi(e[Te.day]),G=Xt(e[Te.day]),B=Xt(e[Te.hour]),V={:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""}}[Z];if(V){const H=G===V.rok,X=B===V.ma,W=gf(V.rokStem,e[Te.day],"classic")||gf(V.rokStem,e[Te.hour],"classic"),he=gf(V.maStem,e[Te.day],"classic")||gf(V.maStem,e[Te.hour],"classic");H&&X&&(W||he)&&_.push({name:yc("",Te.day,Te.hour),weight:mn[Te.hour],pos:Te.hour})}}{const Z=new Set(["","","","","",""]),G=e.map(oi),B=e.map(Xt),q=G.concat(B).filter(W=>Z.has(W)).length,V=t?oi(t):"",H=t?Xt(t):"",X=Z.has(V)||Z.has(H);(q>=4||q===3&&X)&&x.push({name:xs(""),weight:mn[Te.day],pos:Te.day})}{const Z=new Set(["",""]),G=new Set(["",""]);for(let B=0;B<=3;B++){const q=oi(e[B]),V=Xt(e[B]);(Z.has(q)||G.has(V))&&x.push({name:yf("",B),weight:mn[B],pos:B})}}{const Z=[[Te.year,Te.month],[Te.year,Te.day],[Te.month,Te.day],[Te.month,Te.hour],[Te.day,Te.hour]];for(const[G,B]of Z){const q=Xt(e[G]),V=Xt(e[B]);if(Uu(Ug,q,V)){const H=YS(Ug,q,V);Fg(x,`${H}`,G,B)}}}{const Z=[[Te.year,Te.month,0],[Te.month,Te.day,1],[Te.month,Te.hour,0],[Te.day,Te.hour,0]];for(const[G,B,q]of Z){const V=Xt(e[G]),H=Xt(e[B]);if(Uu(Hg,V,H)){const X=YS(Hg,V,H),W=(q?1:0)+(U6.has(V+H)?1:0);Fg(x,`${X}`,G,B,W)}}}function j(Z){const G=Z.lastIndexOf("_");return G>=0?Z.slice(G+1):Z}const C=new Set(["",""]);function P(Z){return C.has(Z)?!0:Z.endsWith("")||Z.endsWith("")}function N(Z){const G=new Map;for(const q of Z){const V=j(q.name);G.has(V)||G.set(V,[]),G.get(V).push(q)}const B=[];for(const[q,V]of G)if(P(q))B.push(...V);else{const H=V.sort((X,W)=>hc[X.pos]!==hc[W.pos]?hc[W.pos]-hc[X.pos]:W.weight-X.weight)[0];B.push(H)}return B}const M=vf(e[Te.day]),D=vf(e[Te.year]);{const Z=(l?.voidBasis??"day")==="day"?M:D;if(Z){const[G,B]=Z.map(yr),q=[Te.year,Te.month,Te.day,Te.hour];for(const V of q){const H=Xt(e[V]);(H===G||H===B)&&x.push({name:$9(l?.voidBasis??"day",V),weight:mn[V],pos:V})}}}const $=N(jS(_)),z=N(jS(x)),F={si:[],il:[],yeon:[],wol:[]},K={si:[],il:[],yeon:[],wol:[]};for(const Z of $)F[bf(Z.pos)].push(Z.name);for(const Z of z)K[bf(Z.pos)].push(Z.name);const oe=[],Q=[],Y=[],ne=[],ie=[],Se=[],J=[],le=[];function te(Z,G){Z.includes(G)||Z.push(G)}function be(Z,G){const B=U9(G);if(!B)return;const q=B.branch,V=B.stem;let H,X;switch(Z){case"dae":H=oe,X=ie;break;case"se":H=Q,X=Se;break;case"wol":H=Y,X=J;break;case"il":H=ne,X=le;break;default:return}ea(OS[m])===V&&te(H,zu("",Z)),ea(DS[m])===V&&te(H,zu("",Z)),ea(MS[m])===V&&te(H,zu("",Z)),ea(CS[m])===V&&te(H,zu("",Z)),LS[m]?.includes(q)&&te(H,zu("",Z)),BS[u]?.includes(q)&&te(H,rc("",Z)),PS[u]?.includes(q)&&te(H,rc("",Z)),$S[u]?.includes(q)&&te(X,rc("",Z)),HS[u]?.includes(q)&&te(X,rc("",Z)),GS[u]?.includes(q)&&te(X,rc("",Z)),Z==="se"&&(G9[p]?.includes(q)&&te(X,NS(Z,"")),cA[p]?.includes(q)&&te(X,NS(Z,"")));for(const he of y)if(Uu(FS,q,he)){const se=$g(he,e)?.pos;se!==void 0&&te(X,Ig("",Z,se));break}new Set(["",""]).has(u)&&new Set(["","","",""]).has(q)&&te(X,rc("",Z));const W=(l?.voidBasis??"day")==="day"?M:D;W&&(q===W[0]||q===W[1])&&te(X,I9(Z,l?.voidBasis??"day"));for(let he=0;he<=3;he++){const se=Xt(e[he]);Uu(Ug,q,se)&&te(X,Ig("",Z,he)),Uu(Hg,q,se)&&te(X,Ig("",Z,he))}if(Z==="se"){const he=(l?.samjaeBasis??"day")==="day"?f:p,se=he?Gg(he):null;se&&se.includes(q)&&te(X,z9(Z,l?.samjaeBasis??"day"))}}return be("dae",t??null),be("se",n??null),be("wol",i??null),be("il",o??null),{good:{si:[],il:[],yeon:[],wol:[],...(()=>{const Z={si:[],il:[],yeon:[],wol:[]};for(const G of $)Z[bf(G.pos)].push(G.name);return Z})(),dae:oe,se:Q,wolun:Y,ilun:ne},bad:{si:[],il:[],yeon:[],wol:[],...(()=>{const Z={si:[],il:[],yeon:[],wol:[]};for(const G of z)Z[bf(G.pos)].push(G.name);return Z})(),dae:ie,se:Se,wolun:J,ilun:le},meta:{voidPair:{day:vf(e[Te.day])??void 0,year:vf(e[Te.year])??void 0},samjaeYears:{day:Gg(f)??void 0,year:Gg(p)??void 0},currentBasis:{voidBasis:l?.voidBasis??"day",samjaeBasis:l?.samjaeBasis??"day"}}}}function G6(e,t){if(e==="#")return"bg-neutral-100 text-neutral-500 border-neutral-200 dark:bg-neutral-900 dark:text-neutral-500 dark:border-neutral-700";switch(t){case"natal":return"bg-violet-100 text-violet-800 border-violet-200 dark:bg-violet-900/30 dark:text-violet-200 dark:border-violet-800";case"dae":return"bg-blue-100 text-blue-800 border-blue-200 dark:bg-blue-900/30 dark:text-blue-200 dark:border-blue-800";case"se":return"bg-green-100 text-green-800 border-green-200 dark:bg-green-900/30 dark:text-green-200 dark:border-green-800";case"wol":return"bg-orange-100 text-orange-800 border-orange-200 dark:bg-orange-900/30 dark:text-orange-200 dark:border-orange-800";case"il":return"bg-red-100 text-red-800 border-red-200 dark:bg-red-900/30 dark:text-red-200 dark:border-red-800";default:return""}}function F6({items:e,source:t}){const n=e.length>0?e:["#"];return g.jsx("div",{className:"flex flex-wrap gap-2",children:n.map((i,o)=>g.jsx("span",{className:"text-xs px-2 py-1 rounded-full border whitespace-nowrap "+G6(i,t),children:i},`${t}-${o}-${i}`))})}function qS({title:e,rows:t}){return g.jsxs("div",{className:"space-y-2 desk:flex-1 desk:px-1",children:[g.jsx("div",{className:"text-md font-bold text-neutral-800 dark:text-neutral-200 mt-2",children:e}),t.map(n=>{const o=n.items.some(l=>l!=="#")?"shrink-0 w-12 text-xs font-semibold text-orange-700 dark:text-orange-300 mt-1":"shrink-0 w-12 text-xs font-semibold text-neutral-700 dark:text-neutral-300 mt-1";return g.jsxs("div",{className:"flex items-start gap-3 border border-gray-700 dark:border-gray-400 p-2 rounded-sm",children:[g.jsx("div",{className:o,children:n.label}),g.jsx(F6,{items:n.items.length>0?n.items:["#"],source:n.source})]},`${e}-${n.label}`)})]})}function Y6({pillars:e,daewoon:t,sewoon:n,wolwoon:i,ilwoon:o,tab:l=""}){const{settings:u}=Wn(),[f,m]=R.useState(""),[p,y]=R.useState("");R.useEffect(()=>{u.sinsalBase===""?(m(""),y("")):(m(""),y(""))},[u.sinsalBase]);const _=R.useMemo(()=>({voidBasis:f===""?"day":"year",samjaeBasis:p===""?"day":"year"}),[f,p]),x=R.useMemo(()=>Gr({natal:e,daewoon:t,sewoon:n,wolwoon:i,ilwoon:o,basis:_}),[e,t,n,i,o,_]),{good:S,bad:T,meta:k}=x,j=oe=>oe.map(Q=>Q==="#"?Q:` ${Q}`),C=(oe,Q)=>{const Y=["natal"];return Q===""&&Y.push("natal"),Q===""&&Y.push("natal","dae"),Q===""&&Y.push("natal","dae","se"),Q===""&&Y.push("natal","dae","se","wol"),Q===""&&Y.push("natal","dae","se","wol","il"),oe.filter(ne=>Y.includes(ne.source))},P=[{label:"",items:j(S.si),source:"natal"},{label:"",items:j(S.il),source:"natal"},{label:"",items:j(S.wol),source:"natal"},{label:"",items:j(S.yeon),source:"natal"},{label:"",items:S.dae,source:"dae"},{label:"",items:S.se,source:"se"},{label:"",items:S.wolun,source:"wol"},{label:"",items:S.ilun,source:"il"}],N=[{label:"",items:j(T.si),source:"natal"},{label:"",items:j(T.il),source:"natal"},{label:"",items:j(T.wol),source:"natal"},{label:"",items:j(T.yeon),source:"natal"},{label:"",items:T.dae,source:"dae"},{label:"",items:T.se,source:"se"},{label:"",items:T.wolun,source:"wol"},{label:"",items:T.ilun,source:"il"}],M=C(P,l),D=C(N,l),$=k.voidPair.day?`(${k.voidPair.day.join("")})`:"()",z=k.voidPair.year?`(${k.voidPair.year.join("")})`:"()",F=k.samjaeYears.day?`(${k.samjaeYears.day.join("")})`:"()",K=k.samjaeYears.year?`(${k.samjaeYears.year.join("")})`:"()";return g.jsxs("div",{className:"rounded-xl p-4 bg-neutral-100 dark:bg-neutral-900 text-neutral-900 dark:text-neutral-100 space-y-2",children:[g.jsx("div",{className:"text-base font-bold mb-1",children:"(/)"}),g.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-xs",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("label",{className:"text-neutral-600 dark:text-neutral-300",children:" "}),g.jsxs("select",{value:f,onChange:oe=>m(oe.target.value),className:"px-2 h-30 rounded border border-neutral-300 dark:border-neutral-700 bg-white dark:bg-neutral-800",children:[g.jsx("option",{value:"",children:$}),g.jsx("option",{value:"",children:z})]})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("label",{className:"text-neutral-600 dark:text-neutral-300",children:" "}),g.jsxs("select",{value:p,onChange:oe=>y(oe.target.value),className:"px-2 h-30 rounded border border-neutral-300 dark:border-neutral-700 bg-white dark:bg-neutral-800",children:[g.jsx("option",{value:"",children:F}),g.jsx("option",{value:"",children:K})]})]})]}),g.jsxs("div",{className:"desk:flex",children:[g.jsx(qS,{title:"()",rows:M}),g.jsx("div",{className:"block desk:hidden border-t border-neutral-200 dark:border-neutral-800 mt-4 mb-3"}),g.jsx(qS,{title:"()",rows:D})]})]})}const Ci={year:0,month:1,day:2,hour:3},fA={[Ci.year]:.3,[Ci.month]:.5,[Ci.day]:.3,[Ci.hour]:.3},mA={[Ci.year]:.15,[Ci.month]:.2,[Ci.day]:0,[Ci.hour]:.15},q6=e=>Kb.has(e)?e:Wb[e]??e,Z6=e=>Am.has(e)?e:jm[e]??e,V6=e=>typeof e=="string"&&e.length>=2?q6(e.slice(-1)):"",K6=e=>typeof e=="string"&&e.length>=1?Z6(e.slice(0,1)):"",wn=(e,t,n,i)=>({han:e,nan:t,jo:n,seup:i}),W6={:wn(2,0,.5,2),:wn(2,0,0,2),:wn(2,0,0,2),:wn(0,2,2,0),:wn(0,2,2,0),:wn(0,2,1,2),:wn(0,2,2,.5),:wn(0,2,2,0),:wn(0,2,2,1),:wn(2,0,0,2),:wn(2,0,0,2),:wn(2,0,1,1)},X6={:wn(0,1,1,0),:wn(0,1,1,0),:wn(0,2,2,0),:wn(0,2,2,0),:wn(0,0,1,0),:wn(0,0,0,1),:wn(1,0,0,1),:wn(1,0,0,1),:wn(2,0,0,2),:wn(2,0,0,2)},ZS=e=>Math.max(0,Math.min(100,e));function VS(e,t){const n=Math.max(0,e),i=Math.max(0,t),o=n+i;return o<=0?50:i/o*100}function J6(e){let t=0,n=0,i=0,o=0;return[Ci.year,Ci.month,Ci.day,Ci.hour].forEach(l=>{const u=W6[V6(e[l])],f=X6[K6(e[l])],m=fA[l],p=mA[l];m>0&&u&&(t+=u.han*m,n+=u.nan*m,i+=u.jo*m,o+=u.seup*m),p>0&&f&&(t+=f.han*p,n+=f.nan*p,i+=f.jo*p,o+=f.seup*p)}),{han:t,nan:n,jo:i,seup:o}}function Q6(e){const t=Array.isArray(e)?e.slice(0,4):[];for(;t.length<4;)t.push("");return t.map(n=>typeof n=="string"?n:"")}function e$(e){const t=Q6(e);return R.useMemo(()=>{const{han:n,nan:i,jo:o,seup:l}=J6(t),u=VS(n,i),f=VS(l,o);return{hanNanPct:ZS(u),joSeupPct:ZS(f),raw:{han:n,nan:i,jo:o,seup:l},weights:{branch:fA,stem:mA}}},[t])}function KS({label:e,percent:t,leftHint:n,midHint:i,rightHint:o}){const l=R.useMemo(()=>Math.max(0,Math.min(100,t)),[t]),u=[10,20,35,45,55,65,80];return g.jsxs("div",{className:"w-full mx-auto p-2 desk:p-4 bg-neutral-100 dark:bg-neutral-800 rounded-xl",children:[g.jsxs("div",{className:"flex justify-between text-[11px] text-neutral-400 mb-1",children:[g.jsx("span",{children:n}),g.jsx("span",{children:i}),g.jsx("span",{children:o})]}),g.jsxs("div",{className:"relative h-4 rounded bg-gradient-to-r from-blue-500 via-yellow-400 to-red-500",children:[u.map(f=>g.jsx("div",{className:"absolute top-0 h-4 w-[1px] bg-black/30",style:{left:`${f}%`},title:`${f}%`},f)),g.jsx("div",{className:"absolute top-0 h-4 w-[1px] bg-black/40",style:{left:"50%"},title:"50%"}),g.jsx("div",{className:"absolute -top-1 h-6 w-2 bg-white rounded shadow-sm",style:{left:`${l}%`,transform:"translateX(-50%)"},"aria-label":`${e} ${l.toFixed(1)}%`})]}),g.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[g.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs border border-neutral-600 text-neutral-700 dark:text-neutral-200",children:e}),g.jsxs("span",{className:"text-xs text-neutral-400",children:[l.toFixed(1),"%"]})]})]})}function t$({natal:e}){const{hanNanPct:t,joSeupPct:n}=e$(e);return g.jsxs("div",{className:"flex gap-2",children:[g.jsx(KS,{label:"",percent:t,leftHint:"",midHint:"",rightHint:""}),g.jsx(KS,{label:"",percent:n,leftHint:"",midHint:"",rightHint:""})]})}const n$=Object.fromEntries(mi..map((e,t)=>[e,jr[t]])),r$=Object.fromEntries(jr.map((e,t)=>[e,mi.[t]])),i$=Object.fromEntries(mi..map((e,t)=>[e,Yr[t]])),s$=Object.fromEntries(Yr.map((e,t)=>[e,mi.[t]])),a$=e=>n$[e]??e,o$=e=>i$[e]??e,l$=e=>r$[e]??e,c$=e=>s$[e]??e;function pA(e){const t={...e};for(const n of Object.keys(e)){if(n.length<2)continue;const i=n.charAt(0),o=n.charAt(1),l=/[]/.test(i)||/[]/.test(o)?`${a$(i)}${o$(o)}`:`${l$(i)}${c$(o)}`;t[l]===void 0&&(t[l]=e[n])}return t}const gA={:1,:.2,:1,:1,:.5,:.7,:0,:.5,:1,:1,:0,:1,:0,:0,:.3,:0,:.5,:.3,:0,:0,:.3,:0,:.8,:.3,:0,:.5,:0,:0,:.3,:.3,:0,:.3,:0,:0,:.8,:0,:0,:.8,:0,:0,:.5,:0,:1,:.5,:0,:0,:.7,:0,:1,:.5,:.7,:0,:.2,:.7,:1,:.7,:.7,:1,:.2,:.7},u$={...gA,:.8,:.3,:.5,:.5,:.2,:.2,:.8,:.2},d$=pA(gA),h$=pA(u$),f$={:"",:"",:"",:"",:""},m$={:"",:"",:"",:"",:""},p$={:"",:"",:"",:"",:""},g$={:"",:"",:"",:"",:""},b$={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},y$={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},v$=e=>b$[e]??e,_$=e=>y$[e]??e;function bA(e){return!e||e.length<2?"":`${v$(e[0])}${_$(e[1])}`}const yA=e=>e&&e.length>=1?e[0]:"",vA=e=>e&&e.length>=2?e[1]:"";function _A(e){return{:e,:f$[e],:m$[e],:p$[e],:g$[e]}}const xA={:["","","","","","","",""],:["","","","","","","",""],:["","","","","","","",""],:["","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","",""],:["","","","","","","",""]};function x$(e,t){const n=(e??[]).slice(0,4).map(bA);if(n.length!==4||n.some(x=>x.length<2))return{flags:{:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1}},monthBranch:"",dayEl:""};const i=yA(n[2]),o=i===""||i===""?"":i===""||i===""?"":i===""||i===""?"":i===""||i===""?"":"",l=n.map(x=>vA(x)),u={:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1}},f=xA[i]??[],m=l[1];f.includes(m)&&(u..=!0,u..=!0);const p=l[2];f.includes(p)&&(u..=!0,u..=!0);const y=_A(o).,_=t[y]??0;return u..=_>=30,{flags:u,monthBranch:m,dayEl:o}}function wA(e,t){const n=(e??[]).slice(0,4).map(bA);if(n.length<3||n[0].length<2||n[1].length<2||n[2].length<2){const T={:!1,:!1,:!1};return{flags:{:{...T},:{...T},:{...T},:{...T},:{...T},:{...T},:{...T},:{...T},:{...T},:{...T}},monthBranch:"",dayEl:""}}const i=yA(n[2]),o=i===""||i===""?"":i===""||i===""?"":i===""||i===""?"":i===""||i===""?"":"",l=n.map(T=>vA(T)),u={:!1,:!1,:!1},f={:{...u},:{...u},:{...u},:{...u},:{...u},:{...u},:{...u},:{...u},:{...u},:{...u}},m=xA[i]??[],p=l[1];m.includes(p)&&(f..=!0,f..=!0,f..=!0,f..=!0);const y=l[2];m.includes(y)&&(f..=!0,f..=!0,f..=!0,f..=!0);const _=_A(o).;return(t[_]??0)>=30&&(f..=!0,f..=!0,f..=!0,f..=!0),{flags:f,monthBranch:p,dayEl:o}}const w$={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},S$={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},E$={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},T$={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},k$=e=>w$[e]??e,A$=e=>S$[e]??e;function j$(e){return!e||e.length<2?"":`${k$(e[0])}${A$(e[1])}`}function qo(e){return kS[e]??kS[E$[e]??""]}function Zo(e){return AS[e]??AS[T$[e]??""]}const Yg=["year","month","day","hour"],N$={year:{stem:10,branch:10},month:{stem:15,branch:30},day:{stem:25,branch:25},hour:{stem:15,branch:15}},O$={year:{stem:10,branch:10},month:{stem:15,branch:45},day:{stem:25,branch:40},hour:{stem:15,branch:12.5}},D$=new Set(["","","","",""]),M$=new Set(["","","","","",""]),C$=new Set(["","","",""]),qg=e=>D$.has(e)?"":"",Zg=e=>{const t=M$.has(e)?"":"";return C$.has(e)?t===""?"":"":t};function WS(e){const t=e.reduce((f,m)=>f+m,0);if(t<=0)return e.map(()=>0);const n=e.map(f=>f*100/t),i=n.map(f=>Math.floor(f+.5)),o=100-i.reduce((f,m)=>f+m,0);if(o===0)return i;const l=n.map((f,m)=>({i:m,frac:f-Math.floor(f+.5)})).sort((f,m)=>m.frac-f.frac),u=i.slice();if(o>0)for(let f=0;f<o;f++)u[l[f].i]+=1;else for(let f=0;f<-o;f++)u[l[l.length-1-f].i]-=1;return u}function R$(e,t){return e===0?t?1:.8:e===1?t?.6:.5:t?.3:.2}const wf={:.15,:.1,:-.15,:-.2,:-.25},vm={:"",:"",:"",:"",:""},SA={:"",:"",:"",:"",:""},hd={:"",:"",:"",:"",:""},L$={:"",:"",:"",:"",:""};function Sf(e,t){return e===t?"":vm[t]===e?"":vm[e]===t?"":hd[e]===t?"":hd[t]===e?"":""}const Ga=e=>e&&e.length>=1?e[0]:"",Vo=e=>e&&e.length>=2?e[1]:"";function B$(e,t){const n=e.reduce((m,p)=>m+p,0);if(n<=0||t<=0)return new Array(e.length).fill(0);const i=e.map(m=>m/n*t),o=i.map(m=>Math.floor(m));let l=t-o.reduce((m,p)=>m+p,0);const u=i.map((m,p)=>({i:p,frac:m-Math.floor(m)})).sort((m,p)=>p.frac-m.frac),f=o.slice();for(let m=0;m<u.length&&l>0;m++)f[u[m].i]+=1,l-=1;return f}function XS(e,t){switch(e){case"":return t;case"":return vm[t];case"":return hd[t];case"":return L$[t];case"":return SA[t];default:return t}}function Ub(e){const{pillars:t,dayStem:n,mode:i,debug:o,useHarmonyOverlay:l,criteriaMode:u,luck:f}=e,m=u==="modern"?N$:O$,p=i==="classic"?h$:d$,y={:0,:0,:0,:0,:0},_={},x={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},S=(t??[]).slice(0,4).map(j$),T=S.length===4&&S[0]&&S[0].length>=2&&S[1]&&S[1].length>=2&&S[2]&&S[2].length>=2,k={totalsSub:{:0,:0,:0,:0,:0,:0,:0,:0,:0,:0},perStemAugBare:{},perStemAugFull:{}};if(!T){const H=["","","","",""].map(X=>({name:X,value:0,color:"#999999"}));return{overlay:k,totals:H,perTenGod:{:{a:"",b:"",aVal:0,bVal:0},:{a:"",b:"",aVal:0,bVal:0},:{a:"",b:"",aVal:0,bVal:0},:{a:"",b:"",aVal:0,bVal:0},:{a:"",b:"",aVal:0,bVal:0}},PerTenGodSub:{:0,:0,:0,:0,:0,:0,:0,:0,:0,:0},elementScoreRaw:y,deukFlags:{:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1}},perStemElement:{},perStemElementScaled:{},stemScoreRaw:{},elementPercent100:{:0,:0,:0,:0,:0}}}const j=Ga(S[2]),C=n??j,P=C===""||C===""?"":C===""||C===""?"":C===""||C===""?"":C===""||C===""?"":"",N=[{val:0},{val:0},{val:0},{val:0}],M=[[],[],[],[]];for(const H of S){if(!H)continue;const X=H.charAt(0),W=H.charAt(1);_[X]=(_[X]??0)+50;const he=x[W];he&&(_[he]=(_[he]??0)+50)}for(let H=0;H<4;H++){const X=S[H];if(!X||X.length<2)continue;const W=Yg[H],he=Ga(X),se=Vo(X),ve=m[W],ke=qo(he);ke&&(y[ke]+=ve.stem,N[H]={stem:he,el:ke,pol:qg(he),val:ve.stem});const je=Zo(se);je&&(y[je]+=ve.branch,M[H].push({el:je,pol:Zg(se),val:ve.branch}))}for(let H=0;H<4;H++){const X=S[H];if(!X||X.length<2)continue;const W=Yg[H],he=p[X]??0;if(he===0)continue;const se=Ga(X),ve=qo(se);if(!ve)continue;const ke=m[W].stem*he;y[ve]+=ke,N[H].val+=ke}for(let H=0;H<4;H++){const X=S[H];if(!X||X.length<2)continue;const W=Vo(X),he=Zo(W);if(!he)continue;const se=m[Yg[H]].branch,ve=Zg(W);let ke=0;const je=[H];H-1>=0&&je.push(H-1),H+1<=3&&je.push(H+1),H-2>=0&&je.push(H-2),H+2<=3&&je.push(H+2);const Me=Array.from(new Set(je));for(const Ee of Me){if(!S[Ee]||S[Ee].length<2)continue;const Ie=Ga(S[Ee]),Pe=qo(Ie);if(!Pe||Pe!==he)continue;const Ye=qg(Ie)===ve,Re=Math.abs(Ee-H),fe=R$(Re,Ye);ke+=se*fe}ke!==0&&(y[he]+=ke,M[H].push({el:he,pol:ve,val:ke}))}for(let H=0;H<4;H++){const X=S[H];if(!X||X.length<2)continue;const W=Ga(X),he=qo(W);if(!he)continue;let se=0;const ve=Vo(S[H]),ke=Zo(ve);ke&&(se+=wf[Sf(he,ke)]);const je=H===0?[1]:H===3?[2]:[H-1,H+1];for(const Ee of je){const Ie=Ga(S[Ee]),Pe=qo(Ie);Pe&&(se+=wf[Sf(he,Pe)])}const Me=N[H].val;if(Me!==0&&se!==0){const Ee=Math.round(Me*(1+se)*10)/10,Ie=Ee-Me;y[he]+=Ie,N[H].val=Ee}}for(let H=0;H<4;H++){const X=S[H];if(!X||X.length<2)continue;const W=Vo(X),he=Zo(W);if(!he)continue;let se=0;const ve=Ga(S[H]),ke=qo(ve);ke&&(se+=wf[Sf(he,ke)]);const je=H===0?[1]:H===3?[2]:[H-1,H+1];for(const Ee of je){if(!S[Ee]||S[Ee].length<2)continue;const Ie=Vo(S[Ee]),Pe=Zo(Ie);Pe&&(se+=wf[Sf(he,Pe)])}const Me=M[H].reduce((Ee,Ie)=>Ee+Ie.val,0);if(Me!==0&&se!==0){const Ie=Math.round(Me*(1+se)*10)/10-Me;y[he]+=Ie,M[H].length>0&&(M[H][0].val+=Ie)}}l&&XP(S,y);const D={dae:{stem:.04,branch:.04},se:{stem:.03,branch:.03},wol:{stem:.02,branch:.02},il:{stem:.01,branch:.01}},$=[];if(!(!f||f.tab==="")){let H=function(X,W){const he=X?Ge(X):"";if(!he||he.length<2)return;const se=Ga(he),ve=Vo(he),ke=qo(se),je=Zo(ve),Me=Math.max(1,(y.??0)+(y.??0)+(y.??0)+(y.??0)+(y.??0)),Ee=D[W];if(ke){const Ie=Math.round(Me*Ee.stem);y[ke]+=Ie,$.push({stem:se,el:ke,pol:qg(se),val:Ie})}if(je){const Ie=Math.round(Me*Ee.branch);y[je]+=Ie,$.push({el:je,pol:Zg(ve),val:Ie})}};H(f.dae,"dae"),(f.tab===""||f.tab===""||f.tab==="")&&H(f.se,"se"),(f.tab===""||f.tab==="")&&H(f.wol,"wol"),f.tab===""&&H(f.il,"il")}const z={:0,:0,:0,:0,:0};Object.entries(y).forEach(([H,X])=>{const W=ne(H,P);z[W]+=X});const F=["","","","",""],K=WS(F.map(H=>z[H])),oe=nA(C),Q=F.map((H,X)=>({name:H,value:K[X],color:oe[H]})),Y={:0,:0,:0,:0,:0,:0,:0,:0,:0,:0};function ne(H,X){return H===X?"":vm[X]===H?"":hd[X]===H?"":hd[H]===X?"":SA[X]===H?"":""}function ie(H,X){switch(ne(H,P)){case"":Y.+=X*.5,Y.+=X*.5;break;case"":Y.+=X*.5,Y.+=X*.5;break;case"":Y.+=X*.5,Y.+=X*.5;break;case"":Y.+=X*.5,Y.+=X*.5;break;case"":Y.+=X*.5,Y.+=X*.5;break}}Object.entries(y).forEach(([H,X])=>{X>0&&ie(H,X)});const Se={:{a:"",b:"",aVal:0,bVal:0},:{a:"",b:"",aVal:0,bVal:0},:{a:"",b:"",aVal:0,bVal:0},:{a:"",b:"",aVal:0,bVal:0},:{a:"",b:"",aVal:0,bVal:0}};for(const H of F){const X=Q.find(je=>je.name===H)?.value??0,W=Se[H].a,he=Se[H].b,se=Y[W]??0,ve=Y[he]??0,ke=se+ve;if(ke>0){const je=Math.floor(X*se/ke+.5),Me=X-je;Se[H].aVal=je,Se[H].bVal=Me}else Se[H].aVal=Math.floor(X/2+.5),Se[H].bVal=X-Se[H].aVal}const{flags:J}=x$(S,y),le={};N.forEach(H=>{if(H.stem&&H.el&&H.val){const X=`${H.stem}${H.el}`;le[X]=(le[X]??0)+H.val}});for(let H=0;H<4;H++){const X=S[H];if(!X||X.length<2)continue;const W=Vo(X),he=x[W],se=Zo(W);if(!he||!se)continue;const ve=`${he}${se}`,ke=M[H].reduce((je,Me)=>je+Me.val,0);le[ve]=(le[ve]??0)+ke}const te=["","","","","","","","","",""],be={};te.forEach(H=>{be[H]=0}),F.forEach(H=>{const X=Q.find(Me=>Me.name===H)?.value??0,W=XS(H,P),he=Object.entries(le).filter(([Me])=>Me.endsWith(W)),se=he.map(([Me])=>Me),ve=he.map(([,Me])=>Me),ke=Math.max(0,Math.round(X*10)),je=B$(ve.length?ve:[1,1],ke);if(se.length===2)be[se[0]]=(je[0]??Math.round(ke/2))/10,be[se[1]]=(je[1]??ke-(je[0]??0))/10;else if(se.length===1)be[se[0]]=ke/10;else{const Me=W===""?["",""]:W===""?["",""]:W===""?["",""]:W===""?["",""]:["",""],Ee=Math.floor(ke/2),Ie=ke-Ee;be[Me[0]]+=Ee/10,be[Me[1]]+=Ie/10}});const Z=["","","","",""],G={:0,:0,:0,:0,:0};for(const H of Q){const X=XS(H.name,P);G[X]+=H.value}const B=WS(Z.map(H=>G[H])),q={:B[0],:B[1],:B[2],:B[3],:B[4]};return o&&console.log({elementScore:y,totals:Q,perTenGod:Se,perStemRaw:le,perStemElementScaled:be,elementPercent100:q}),{overlay:{totalsSub:Y,perStemAugBare:le,perStemAugFull:be},totals:Q,perTenGod:Se,PerTenGodSub:Y,stemScoreRaw:_,elementScoreRaw:y,deukFlags:J,perStemElement:le,perStemElementScaled:be,elementPercent100:q}}function P$(e){const t=e.reduce((f,m)=>f+m,0);if(t<=0)return e.map(()=>0);const n=e.map(f=>f*100/t),i=n.map(f=>Math.round(f));let l=100-i.reduce((f,m)=>f+m,0);const u=n.map((f,m)=>({i:m,f:f-Math.round(f)})).sort((f,m)=>m.f-f.f);for(let f=0;f<u.length&&l>0;f++)i[u[f].i]+=1,l-=1;return i}const JS=["","","","",""];function $$(e,t){const n=[Ge(e[0]??""),Ge(e[1]??""),Ge(e[2]??""),Ge(e[3]??"")],{elementScoreRaw:i}=Ub({pillars:n,criteriaMode:t?.criteriaMode??"modern",useHarmonyOverlay:t?.useHarmonyOverlay??!0,luck:void 0}),o=JS.map(f=>i[f]??0),l=P$(o),u={:0,:0,:0,:0,:0};return JS.forEach((f,m)=>{u[f]=l[m]}),u}function EA(e,t){const n=$$(e,t),i=Ge(e[2]??"").charAt(0),l={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}[i];if(!l)return 0;const u={:"",:"",:"",:"",:""},f=n[l]??0,m=n[u[l]]??0;return f+m*.7}const Ef={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Tf={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},kf={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},I$=["","","","",""];function QS(e){return I$.includes(e)}const z$={:"",:"",:"",:"",:""},U$={:"",:"",:"",:"",:""},H$={:"",:"",:"",:"",:""},G$={:"",:"",:"",:"",:""},Hb={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},F$=["","","","","","","","","",""],Y$={natal:50,dae:30,se:20,wol:7,il:3};function _m(e){if(!e)return null;const t=e.trim();if(["","","","","","","","","",""].includes(t))return t;if(Ef[t])return Ef[t];if(["","","","","","","","","","","",""].includes(t))return kf[t]??null;if(Tf[t])return kf[Tf[t]]??null;const n=t.charAt(0);return Ef[n]?Ef[n]:["","","","","","","","","",""].includes(n)?n:Tf[n]?kf[Tf[n]]??null:["","","","","","","","","","","",""].includes(n)?kf[n]??null:null}function q$(e,t){const n=Hb[e],i=Hb[t];if(!n||!i)return"";let o;i===n?o="":i===z$[n]?o="":i===U$[n]?o="":i===H$[n]?o="":i===G$[n]?o="":o="";const l=QS(e)===QS(t);switch(o){case"":return l?"":"";case"":return l?"":"";case"":return l?"":"";case"":return l?"":"";case"":return l?"":""}}function xm(e){const t=Object.entries(e),n=t.reduce((p,[,y])=>p+(y>0?y:0),0);if(n<=0)return Object.fromEntries(t.map(([p])=>[p,0]));const i=t.map(([p,y])=>[p,(y>0?y:0)*100/n]),o=i.map(([p,y])=>[p,Math.round(y)]);let l=o.reduce((p,[,y])=>p+y,0);const u=i.map(([p,y])=>[p,y-Math.round(y)]).sort((p,y)=>y[1]-p[1]),f=Object.fromEntries(o.map(([p,y])=>[p,y]));let m=0;for(;l<100&&m<u.length;)f[u[m][0]]+=1,l+=1,m+=1;return f}function e2(e,t){const n={:0,:0,:0,:0,:0,:0,:0,:0,:0,:0};for(const[i,o]of Object.entries(e??{})){if(o<=0)continue;const l=_m(i);if(!l)continue;const u=q$(t,l);n[u]+=o}return xm(n)}function Z$(e){return{:{a:"",b:"",aVal:e.,bVal:e.},:{a:"",b:"",aVal:e.,bVal:e.},:{a:"",b:"",aVal:e.,bVal:e.},:{a:"",b:"",aVal:e.,bVal:e.},:{a:"",b:"",aVal:e.,bVal:e.}}}function t2(e){const t={};for(const[n,i]of Object.entries(e??{})){if(i<=0)continue;const o=_m(n);o&&(t[o]=(t[o]??0)+i)}return t}function n2(e){const n={...{:0,:0,:0,:0,:0,:0,:0,:0,:0,:0}};for(const i of F$){const o=Hb[i],l=`${i}${o}`;n[l]=Math.max(0,Math.round(e[i]??0))}return n}function r2(e){const t=["","","","",""],n={:0,:0,:0,:0,:0};for(const i of t)typeof e[i]=="number"&&(n[i]=e[i]);return n}function V$(e,t){const n=t?.dae?Af(t.dae):{},i=t?.se?Af(t.se):{},o=t?.wol?Af(t.wol):{},l=t?.il?Af(t.il):{},u={},f=[{kind:"natal",bare:e},{kind:"dae",bare:n},{kind:"se",bare:i},{kind:"wol",bare:o},{kind:"il",bare:l}];for(const{kind:p,bare:y}of f){const _=Y$[p];if(!y||Object.keys(y).length===0)continue;const x=xm(y);for(const[S,T]of Object.entries(x))u[S]=(u[S]??0)+T*_}const m=Object.values(u).reduce((p,y)=>p+y,0);if(m>0)for(const p of Object.keys(u))u[p]=u[p]/m*100;return u}function K$(e){if(!e)return[];const t=_m(e.charAt(0)),n=_m(e.charAt(1));return[t,n].filter(Boolean)}function Af(e){const t=K$(e),n={};for(const i of t)n[i]=(n[i]??0)+1;return n}function TA(e){const{natal:t,tab:n,chain:i,hourKey:o="unified"}=e,l=[Ge(t[0]??""),Ge(t[1]??""),Ge(t[2]??""),Ge(t[3]??"")],u=l[2]?.charAt(0)??"",{hiddenStemMode:f,hiddenStem:m}=il,p=f==="classic"?"classic":"hgc",y=i?{tab:n,dae:i.dae?Ge(i.dae):void 0,se:(n===""||n===""||n==="")&&i.se?Ge(i.se):void 0,wol:(n===""||n==="")&&i.wol?Ge(i.wol):void 0,il:n===""&&i.il?Ge(i.il):void 0}:{tab:n},_=Ub({pillars:l,dayStem:u,mode:p,criteriaMode:"modern",useHarmonyOverlay:!0,luck:y}),x=Ub({pillars:l,dayStem:u,mode:p,criteriaMode:"modern",useHarmonyOverlay:!0,luck:{tab:"",dae:void 0,se:void 0,wol:void 0,il:void 0}}),S=t2(_.perStemElementScaled),T=n===""?S:V$(S,i),k=xm(T),j=e2(T,u),C=Z$(j),P=n2(k),N=t2(x.perStemElementScaled),M=e2(N,u),D=xm(N),$=n2(D);return{elementScoreRaw:_.elementScoreRaw,elementPercent100:_.elementPercent100,totals:_.totals,perStemElementScaled:_.perStemElementScaled,dayStem:u,mergedStems:k,perTenGodSub:j,perTenGod:C,overlay:{totalsSub:j,perStemAugBare:T,perStemAugFull:P},natalFixed:{elementScoreRaw:r2(x.elementScoreRaw),elementPercent100:r2(x.elementPercent100),totalsSub:M,overlay:{totalsSub:M,perStemAugBare:N,perStemAugFull:$}}}}const Ri={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Ts={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},W$={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};function Li(e){return["","","","",""].includes(e)}function X$(e){return["","","","","",""].includes(e)}const kA={:"",:"",:"",:"",:""},rv={:"",:"",:"",:"",:""},AA={:"",:"",:"",:"",:""},jA={:"",:"",:"",:"",:""},Vg=e=>({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""})[e]??e,Di=e=>e&&e.length>=1?e.charAt(0):"",Nn=e=>e&&e.length>=2?e.charAt(1):"",J$=e=>Array.from(new Set(e)),Q$={:{:{stem:"",w:10},:{stem:"",w:20}},:{:{stem:"",w:9},:{stem:"",w:3},:{stem:"",w:18}},:{:{stem:"",w:10},:{stem:"",w:7},:{stem:"",w:16}},:{:{stem:"",w:9},:{stem:"",w:20}},:{:{stem:"",w:7},:{stem:"",w:3},:{stem:"",w:18}},:{:{stem:"",w:10},:{stem:"",w:7},:{stem:"",w:16}},:{:{stem:"",w:10},:{stem:"",w:9},:{stem:"",w:11}},:{:{stem:"",w:9},:{stem:"",w:3},:{stem:"",w:18}},:{:{stem:"",w:10},:{stem:"",w:7},:{stem:"",w:16}},:{:{stem:"",w:9},:{stem:"",w:20}},:{:{stem:"",w:7},:{stem:"",w:3},:{stem:"",w:18}},:{:{stem:"",w:16},:{stem:"",w:7},:{stem:"",w:16}}},e8={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};function t8(e,t){const n=e8[e];if(!n)return!1;const o=as(t).find(f=>f.name===n);if(!o)return!1;const l=new Date(o.date);return Math.floor((t.getTime()-l.getTime())/(1e3*60*60*24))<=12}const n8={:["","",""],:["","",""],:["","",""],:["","",""]};function r8(e,t){const n=n8[e];return n?n.filter(i=>i!==e).every(i=>t.includes(i)):!1}function rs(e,t){const n=Ri[e],i=Ri[t];if(!n||!i)return"";let o;i===n?o="":i===kA[n]?o="":i===rv[n]?o="":i===AA[n]?o="":i===jA[n]?o="":o="";const l=Li(e)===Li(t);switch(o){case"":return l?"":"";case"":return l?"":"";case"":return l?"":"";case"":return l?"":"";case"":return l?"":""}}function i8(e,t){const n=Ri[e],i=Ts[t];if(!n||!i)return"";let o;i===n?o="":i===kA[n]?o="":i===rv[n]?o="":i===AA[n]?o="":i===jA[n]?o="":o="";const l=Li(e)===X$(t);switch(o){case"":return l?"":"";case"":return l?"":"";case"":return l?"":"";case"":return l?"":"";case"":return l?"":""}}function s8(e){return{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}[e]??""}function Gb(e,t){const n=s8(e),i=Li(e),o={:"",:"",:"",:"",:""},l={:"",:"",:"",:"",:""};let u;t===n?u="":o[n]===t?u="":o[t]===n?u="":l[n]===t?u="":l[t]===n?u="":u="";const f=i===Li(a8(t));switch(u){case"":return f?"":"";case"":return f?"":"";case"":return f?"":"";case"":return f?"":"";case"":return f?"":""}}function a8(e){return{:"",:"",:"",:"",:""}[e]}const Kg={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},NA={:"",:"",:"",:"",:""},OA={:"",:"",:"",:""},o8=[{a:"",b:"",to:""},{a:"",b:"",to:""},{a:"",b:"",to:""},{a:"",b:"",to:""},{a:"",b:"",to:""}],l8=e=>{const t={:0,:0,:0,:0,:0};for(const n of e){const i=Di(n),o=Nn(n),l=Ri[i],u=Ts[o];l&&(t[l]+=10),u&&(t[u]+=6)}return t};function c8(e){const{pillars:t,dayStem:n,monthBranch:i,mapping:o}=e,[l,u,f,m]=(t??[]).slice(0,4),p=[Di(l),Di(u),Di(f),Di(m)].filter(Boolean),y=[Nn(l),Nn(u),Nn(f),Nn(m)].filter(Boolean),_=Ri[n],x=p.map(me=>rs(n,me)),S=[],T=me=>p.filter($e=>$e===me).length,k=me=>y.filter($e=>$e===me).length,j=me=>me.every($e=>y.includes($e)),C=me=>x.some($e=>me.includes($e)),P=Di(u),N=me=>Li(me),M=()=>{const me=p.map($e=>Ri[$e]);return me.length===4&&me.every($e=>$e===me[0])},D=()=>{if(p.length!==4)return!1;const me=p.map(N),$e=me[0]&&!me[1]&&me[2]&&!me[3],He=!me[0]&&me[1]&&!me[2]&&me[3];return $e||He};Li(n)&&NA[n]===i&&S.push("");const $=[["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""]];for(const[me,$e]of $)if(n===me&&i===$e){S.push("");break}!Li(n)&&OA[n]===i&&S.push("");const z=Kg[n];z&&Nn(f)===z&&_===Ts[Nn(f)]&&S.push(""),z&&Nn(m)===z&&_===Ts[Nn(m)]&&S.push("");const F=[l,u,f,m].map(b8),K=[l,u,f,m].map(y8);for(const me of F);for(const me of K);const oe=o==="hgc"?Rm:Cm;function Q(me){return(oe[me]??[]).filter($e=>["","","","","","","","","",""].includes($e))}const Y=[l,u,f,m].filter(Boolean),ie=Y.flatMap(me=>[me.charAt(0),me.charAt(1)]).flatMap(me=>{try{if(["","","","","","","","","",""].includes(me))return[rs(n,me)];if(["","","","","","","","","","","",""].includes(me)){const $e=i8(n,me),He=Q(me).map(Be=>rs(n,Be));return[$e,...He]}return[]}catch{return[]}}),Se=me=>ie.some($e=>me.includes($e)),J=(me,$e)=>{const He=[],Be=[];for(const et of Y){const Zt=et.charAt(0),On=et.charAt(1);He.push(rs(n,Zt));const En=Ts[On];En?Be.push(Gb(n,En)):Be.push(null)}const tt=(et,Zt)=>!!et&&!!Zt&&(me.includes(et)&&$e.includes(Zt)||$e.includes(et)&&me.includes(Zt));for(let et=0;et<He.length;et++)if(tt(He[et],Be[et]))return!0;for(let et=0;et<He.length-1;et++)if(tt(He[et],He[et+1])||tt(Be[et],Be[et+1]))return!0;return!1},le={:["",""],:["",""],:["",""],:["",""]};Se([...le.])&&Se([...le.])&&J([...le.],[...le.])&&S.push(""),Se([...le.])&&Se([...le.])&&J([...le.],[...le.])&&S.push("");const te=me=>x.filter($e=>me.includes($e)).length,be=te(["",""]),Z=te([""]),G=te([""]),B=te(["",""]),q=te(["",""]),V=te(["",""]);Z>=1&&be>=1&&be>=Z&&G<=Z&&S.push("");const H=te([""]);H>=1&&B>=1&&H>=B&&S.push(""),x.includes("")&&B>=1&&S.push("");const W=l8(t),he=Object.entries(W).sort((me,$e)=>$e[1]-me[1]),se=he[0];if(se&&se[1]>=60&&S.push(`(${se[0]})`),he.length>=2){const[me,$e]=he[0],[,He]=he[1];$e>=75&&$e-He>=12&&_!==me&&S.push(`(${me})`)}for(const me of o8){const $e=p.includes(me.a),He=p.includes(me.b);if(!$e||!He)continue;const Be=me.to,tt=W[Be]??0,et=Ri[me.a],Zt=Ri[me.b],On=Math.max(W[et]??0,W[Zt]??0),En=Ts[i]===Be,vr=Object.entries(W).sort((Ct,bn)=>bn[1]-Ct[1])[0]?.[0]===Be;let dn=!1;tt>=60&&(En||vr)&&On<=20&&tt-On>=20&&(S.push(`(${Be})`),dn=!0),!dn&&tt>=50&&(En||vr)&&On<=25&&(S.push(`(${Be})`),dn=!0),!dn&&tt>=35&&S.push(`(${Be})`)}const ve=`${Di(m)}${Nn(m)}`;["",""].includes(n)&&["","",""].includes(ve)&&S.push(""),["","","",""].includes(Nn(m))&&S.push(""),["",""].includes(n)&&(Nn(f)===""||Nn(u)==="")&&!y.includes("")&&S.push("");const ke=p.some(me=>me===""||me===""),je=y.some(me=>me===""||me==="");["",""].includes(Nn(f))&&!ke&&!je&&S.push(""),["","",""].every(me=>p.includes(me))&&S.push(""),["","",""].every(me=>p.includes(me))&&S.push(""),["","",""].every(me=>p.includes(me))&&S.push("");const Me=Object.values(W).sort((me,$e)=>$e-me);Me.length>=3&&Me[0]-Me[2]<=8&&Me[0]+Me[1]+Me[2]>=80&&S.push(""),q>=1&&V>=1&&Math.abs(q-V)<=1&&S.push(""),j(["","","",""])&&S.push(""),j(["","","",""])&&S.push(""),j(["","","",""])&&S.push(""),y.length===4&&y.every(me=>me===y[0])&&S.push(""),p.length===4&&M()&&D()&&S.push(""),t.every(me=>me&&me===t[0])&&S.push(""),p.length===4&&p.every(me=>me===p[0])&&y.length===4&&y.every(me=>me===y[0])&&S.push(""),be>=1&&(Nn(f)===Kg[n]||Nn(m)===Kg[n])&&S.push(""),T("")>=3&&j(["","",""])&&["","",""].includes(Nn(f))&&S.push("");const Ie=n===""||n==="",Pe=[["","",""],["","",""]],Ye=[["","",""],["","",""]];Ie&&(Pe.some(me=>j(me))||Ye.some(me=>j(me)))&&S.push("");const Re=new Set(["","","","","",""]),fe=`${Di(f)}${Nn(f)}`;if(Re.has(fe)&&k("")>=2&&(C(["",""])||y.includes("")||y.includes("")||C(["",""])||S.push("")),new Set(["","","","","",""]).has(fe)&&k("")>=2&&y.includes("")&&S.push(""),n===""&&`${Di(m)}${Nn(m)}`==""){const me=rs(n,P);!["","","",""].includes(me)&&C(["",""])&&!y.includes("")&&!y.includes("")&&S.push("")}return new Set(["","",""]).has(fe)&&`${Di(m)}${Nn(m)}`==""&&!y.includes("")&&!C(["",""])&&S.push(""),fe===""&&k("")+k("")>=2&&S.push(""),(fe===""||fe==="")&&k("")>=2&&!C(["",""])&&!y.includes("")&&S.push(""),n===""&&j(["","",""])&&S.push(""),fe===""&&`${Di(m)}${Nn(m)}`==""&&S.push(""),J$(S)}function u8(e){const{dayStem:t,monthBranch:n,date:i,pillars:o,emittedStems:l=[],otherBranches:u=[],isNeutralized:f,mapping:m}=e,p=[],y=Q$[n];if(!y)return{:"-",:"-",:"-",:"-",:"-",:[],reason:["  "]};const _={:y.?{stem:Vg(y..stem),w:y..w}:void 0,:y.?{stem:Vg(y..stem),w:y..w}:void 0,:{stem:Vg(y..stem),w:y..w}},x=_..stem;let S=x;if(["","","",""].includes(n))S=_..stem,p.push(":   ");else if(["","","",""].includes(n)){const F=[];_.&&F.push({from:"",stem:_..stem,w:_..w,emitted:l.includes(_..stem)}),_.&&F.push({from:"",stem:_..stem,w:_..w,emitted:l.includes(_..stem)}),F.push({from:"",stem:_..stem,w:_..w,emitted:l.includes(_..stem)});const K=F.filter(oe=>oe.emitted);K.length===1?(S=K[0].stem,p.push(`: ${K[0].from}  `)):K.length>1?(K.sort((oe,Q)=>Q.w-oe.w),S=K[0].stem,p.push(`:      ${K[0].from} `)):(S=_..stem,p.push(":    "))}else["","","",""].includes(n)&&(r8(n,u)&&_.?(S=_..stem,p.push(":     ")):t8(n,i)&&_.?(S=_..stem,p.push(":  +12    ")):(S=_..stem,p.push(":  +12    ")));const T=S;let k="";const j=Ri[T];if(j){const F=Object.entries(rv).find(([,K])=>K===j)?.[0]??null;F&&(k=Object.entries(Ri).find(([oe,Q])=>Q===F&&Li(oe)===Li(T))?.[0]??"")}f?.(T)&&p.push(":   / ");let C="-";const P=rs(t,T),M=[["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""]].some(([F,K])=>F===t&&K===n),D=Li(t)&&NA[t]===n,$=!Li(t)&&OA[t]===n;P===""||P===""?M?(C="",p.push(": /   ")):D?(C="",p.push(":    ")):$?(C="",p.push(":    ")):p.push(": /  "):P===""?C="()":C={:"",:"",:"",:"",:"",:"",:"",:""}[P]??"-";const z=c8({pillars:o,dayStem:t,monthBranch:n,mapping:m});return{:x,:S,:T,:k,:C,:z,reason:p}}const Ce=(e,t)=>`${e}+${t}`,Tr=(e,t,n)=>`${e}+${t}+${n}`,d8={[Ce("","")]:[""],[Tr("","","")]:void 0,[Ce("","")]:["",""],[Ce("","")]:["",""],[Ce("","")]:[""],[Ce("","")]:[""],[Ce("","")]:[""],[Ce("","")]:["",""],[Ce("","")]:[""],[Ce("","")]:[""],[Ce("","")]:[""],[Tr("","","")]:["",""],[Ce("","")]:[""],[Ce("","")]:[""],[Ce("","")]:[""],[Ce("","")]:[""],[Ce("","")]:[""],[Ce("","")]:[""],[Ce("","")]:[""],[Ce("","")]:[""],[Ce("","")]:[""],[Ce("","")]:[""],[Ce("","")]:[""],[Ce("","")]:[""],[Ce("","")]:[""],[Ce("","")]:[""],[Ce("","")]:[""],[Ce("","")]:[""],[Ce("","")]:[""],[Ce("","")]:[""],[Ce("","")]:[""],[Ce("","")]:[""],[Ce("","")]:[""],[Ce("","")]:[""],[Ce("","")]:[""],[Ce("","")]:[""],[Ce("","")]:[""],[Ce("","")]:[""],[Ce("","")]:[""],[Ce("","")]:[""],[Ce("","")]:[""],[Ce("","")]:[""],[Ce("","")]:[""],[Ce("","")]:[""],[Ce("","")]:[""],[Ce("","")]:[""],[Ce("","")]:[""],[Ce("","")]:[""],[Ce("","")]:[""],[Ce("","")]:[""],[Ce("","")]:[""],[Ce("","")]:[""],[Ce("","")]:[""],[Ce("","")]:[""],[Ce("","")]:[""],[Ce("","")]:[""],[Ce("","")]:[""],[Ce("","")]:[""],[Ce("","")]:[""],[Ce("","")]:[""],[Ce("","")]:[""],[Ce("","")]:["",""],[Ce("","")]:["",""],[Ce("","")]:[""],[Ce("","")]:["",""],[Ce("","")]:["",""],[Ce("","")]:["",""],[Ce("","")]:[""],[Ce("","")]:[""],[Ce("","")]:["",""],[Ce("","")]:[""],[Ce("","")]:[""],[Ce("","")]:[""],[Ce("","")]:[""],[Ce("","")]:[""],[Ce("","")]:[""],[Ce("","")]:[""],[Ce("","")]:[""],[Ce("","")]:[""],[Ce("","")]:[""],[Ce("","")]:[""],[Ce("","")]:[""],[Ce("","")]:[""],[Ce("","")]:[""],[Ce("","")]:[""],[Ce("","")]:[""],[Ce("","")]:[""],[Ce("","")]:[""],[Ce("","")]:[""],[Ce("","")]:[""],[Ce("","")]:["",""],[Ce("","")]:[""],[Ce("","")]:[""],[Ce("","")]:[""],[Ce("","")]:[""],[Ce("","")]:[""],[Ce("","")]:[""],[Ce("","")]:[""],[Ce("","")]:[""],[Ce("","")]:[""],[Ce("","")]:[""]},h8={[Tr("","","")]:[""],[Tr("","","")]:[""],[Tr("","","")]:[""],[Tr("","","")]:[""],[Tr("","","")]:[""],[Tr("","","")]:[""],[Tr("","","")]:[""],[Tr("","","")]:[""],[Tr("","","")]:[""],[Tr("","","")]:[""],[Tr("","","")]:["",""]};function f8(){const e={},t={},n=/[]/g;for(const[i,o]of Object.entries(d8)){if(!o)continue;const l=i.match(n);if(!l||l.length<2)continue;const[u,f]=l;e[i]=o.map(m=>`${u}X${f}_${m}`)}for(const[i,o]of Object.entries(h8)){if(!o)continue;const l=i.match(n);if(!l||l.length<3)continue;const[u,f,m]=l;t[i]=o.map(p=>`${u}X${f}X${m}_${p}`)}return{newPairs:e,newTris:t}}const{newPairs:Wg,newTris:Xg}=f8();function m8(e){const[t,n,i,o]=e,l=S=>Di(S),u=l(o),f=l(i),m=l(n),p=l(t),y=[],_=[[u,f],[f,m],[m,p]];for(const[S,T]of _){if(!S||!T)continue;const k=Ce(S,T),j=Wg[k];j&&j.length&&y.push(...j);const C=Ce(T,S);C!==k&&Wg[C]&&y.push(...Wg[C])}const x=[[u,f,m],[f,m,p]];for(const[S,T,k]of x){if(!S||!T||!k)continue;const j=Tr(S,T,k),C=Xg[j];C&&C.length&&y.push(...C);const P=Tr(k,T,S);P!==j&&Xg[P]&&y.push(...Xg[P])}return Array.from(new Set(y))}const p8={:!0,:!1,:!0,:!1,:!0,:!1,:!0,:!1,:!0,:!1},g8={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};function b8(e){return e?.charAt(0)??""}function y8(e){return e?.charAt(1)??""}function v8(e,t,n){const[i,o,l,u]=(e??[]).slice(0,4),f=ce=>(ce?.length??0)>=1?ce.charAt(0):"",m=ce=>(ce?.length??0)>=2?ce.charAt(1):"",p=[i,o,l,u].map(f).filter(Boolean),y=[i,o,l,u].map(m).filter(Boolean),_=f(l),x=p8[_]??!1,S=new Set,T=t==="classic"?Cm:Rm,k=new Set(["","","","","","","","","",""]),j=ce=>(T[ce]??[]).filter(me=>k.has(me)),C=(ce,me)=>{const $e=Ts[me];if(!$e)throw new Error(`Unknown branch main element: ${me}`);return Gb(ce,$e)},P={:0,:0,:0,:0,:0};for(const ce of p){const me=Ri[ce];me&&(P[me]+=10)}const N=[];for(const ce of y){const me=W$[ce];me&&N.push(me);const $e=Ts[ce];$e&&(P[$e]+=6)}const D=[...p,...N].map(ce=>rs(_,ce)),$={:["",""],:["",""],:["",""],:["",""],:["",""]},z=ce=>D.filter(me=>me===ce).length,F=ce=>D.filter(me=>$[ce].includes(me)).length,K=y[1],oe=!!_&&g8[_]===K,Q=n.elementPercent100;Q.>=20&&Q.>=20&&Q.>=15&&S.add("");const Y=[i,o,l,u].filter(Boolean),ne=[];for(const ce of Y){const me=ce.charAt(0),$e=ce.charAt(1);ne.push(rs(_,me)),ne.push(C(_,$e))}const ie=(ce,me)=>{const $e=(He,Be)=>!!He&&!!Be&&ce.includes(He)&&me.includes(Be)||me.includes(He)&&ce.includes(Be);for(let He=0;He+1<ne.length;He+=2)if($e(ne[He],ne[He+1]))return!0;return!1},Se=ce=>ne.some(me=>ce.includes(me)),J=z("")+z(""),le=z(""),te=F(""),be=F(""),Z=ie(["",""],["",""]);if((le>=1||J>=2)&&te>=1&&J>te&&be<=1&&Z&&S.add(""),Se($.)&&Se($.)&&ie($.,$.)){const ce=D.includes("");S.add(ce?"":"")}F("")>=2&&F("")>=2&&Math.abs(F("")-F(""))<=1&&F("")<=1&&F("")<=1&&S.add("");const G=z(""),B=z(""),q=z("")+z(""),V=z("")+z(""),H=F("");B>=2&&q>=1&&P.+P.>=20&&S.add(""),B>=2&&V>=1&&P.+P.>=20&&S.add(""),B>=2&&V>=1&&P.+P.>=20&&ie([""],["",""])&&H<=1&&S.add(""),G>=2&&V>=1&&P.+P.>=20&&ie([""],["",""])&&H<=1&&S.add("");const X=(ce,me)=>{const $e=Ri[ce],He=Ts[me];return!!$e&&!!He&&$e===He},W=[i,o,l,u].filter(Boolean),he=m(l),se=X(_,he),ve=W.map(ce=>ce.charAt(0)).filter(ce=>["",""].includes(rs(_,ce)));let ke=!1;for(const ce of W){const me=ce.charAt(0),$e=ce.charAt(1);if(ve.includes(me)&&X(me,$e)){ke=!0;break}}se&&ke&&S.add(""),F("")>=3&&F("")>=.5*(F("")+F("")+F("")+F(""))&&S.add(""),F("")>=3&&F("")>=.5*(F("")+F("")+F("")+F(""))&&S.add(""),F("")>=3&&F("")>=1&&S.add(""),F("")>=3&&F("")+F("")<=1&&S.add("");const je=z("");F("")+F("")>=2&&je===1&&F("")>=1&&S.add(""),je>=2&&q+F("")>=3&&S.add("");const Me=G+B;(G>=2||Me>=2)&&V>=1&&Me>V&&S.add(""),B>=2&&V>=1&&Me>V&&S.add("");const Ee=z(""),Ie=z("");Ee>=2&&je+Ie>=1&&S.add(""),Ee>=2&&je+Ie===0&&S.add(""),x&&Ee>=2&&je>=1&&S.add(""),!x&&Ee>=2&&je>=1&&S.add(""),z("")>=2&&z("")>=1&&S.add(""),z("")>=1&&z("")>=1&&ie([""],[""])&&S.add(""),oe&&je>=1&&F("")+F("")>=2&&S.add("");const Pe=[m(i),m(o),m(l),m(u)].filter(Boolean),Ye=[i?.charAt(0),o?.charAt(0),u?.charAt(0)].filter(Boolean),Re=new Set(Ye.map(ce=>rs(_,ce))),fe=new Set(Pe.flatMap(ce=>{const me=Ts[ce];return me?[Gb(_,me)]:[]})),Le=new Set(Pe.flatMap(ce=>j(ce).map(me=>rs(_,me))));return["","","","",""].forEach(ce=>{const me=$[ce],$e=me.some(tt=>Re.has(tt)),He=me.some(tt=>fe.has(tt)),Be=me.some(tt=>Le.has(tt));!$e&&!He&&!Be?S.add(`${ce}`):!$e&&!He&&Be&&S.add(`${ce}`)}),Array.from(S)}function _8(e){const{pillars:t,tab:n,birthDate:i,emittedStems:o,otherBranches:l,isNeutralized:u,mapping:f,unified:m}=e,[p,y,_,x]=t,S=ie=>ie&&ie.length>=1?ie.charAt(0):"",T=ie=>ie&&ie.length>=2?ie.charAt(1):"",k=T(y),j=S(_),C=i instanceof Date&&!Number.isNaN(i.getTime())?i:new Date,P=[S(p),S(y),S(_),S(x)].filter(ie=>!!(ie&&ie.length===1)),N=[T(p),T(_),T(x)].filter(ie=>!!(ie&&ie.length===1)),M=u8({dayStem:j,monthBranch:k,date:C,pillars:t,emittedStems:o??P,otherBranches:l??N,isNeutralized:u,mapping:f}),D=[` : ${M.||"-"}`,` : ${M.||"-"}`,` : ${M.||"-"}`,` : ${M.||"-"}`],$=[` : ${M.||"-"}`],z=Array.isArray(M.)&&M..length>0?M..map(ie=>` : ${ie}`):[" : -"],F=m8(t),K=[...F.length?F.map(ie=>`${ie}`):[]],Q=[...v8(t,f,m)],Y=({text:ie,color:Se})=>{const J={violet:"bg-violet-100 text-violet-800 border-violet-200 dark:bg-violet-900/30 dark:text-violet-200 dark:border-violet-800",amber:"bg-amber-100 text-amber-800 border-amber-200 dark:bg-amber-900/30 dark:text-amber-200 dark:border-amber-800",blue:"bg-blue-100 text-blue-800 border-blue-200 dark:bg-blue-900/30 dark:text-blue-200 dark:border-blue-800",green:"bg-green-100 text-green-800 border-green-200 dark:bg-green-900/30 dark:text-green-200 dark:border-green-800",red:"bg-red-100 text-red-800 border-red-200 dark:bg-red-900/30 dark:text-red-200 dark:border-red-800"};return g.jsx("span",{className:`inline-block text-xs px-2 py-1 rounded-full border whitespace-nowrap ${J[Se]}`,title:ie,children:ie})},ne=({children:ie})=>g.jsx("li",{className:"!flex flex-wrap gap-1 border border-gray-700 dark:border-gray-200 p-2 rounded-sm",children:ie});return g.jsxs("div",{className:"p-4 rounded-xl bg-neutral-100 dark:bg-neutral-900 space-y-3 text-sm","data-revkey":`gyeok:${n}|${t.join("")}|${D.join(",")}|${$.join(",")}|${z.join(",")}`,children:[g.jsx("div",{className:"font-bold text-base",children:"   "}),g.jsxs("ul",{className:"space-y-1",children:[g.jsx(ne,{children:D.map(ie=>g.jsx(Y,{text:ie,color:"violet"},ie))}),g.jsx(ne,{children:$.map(ie=>g.jsx(Y,{text:ie,color:"amber"},ie))}),g.jsx(ne,{children:z.map(ie=>g.jsx(Y,{text:ie,color:"blue"},ie))}),g.jsx(ne,{children:K.map(ie=>g.jsx(Y,{text:ie,color:"green"},ie))}),g.jsx(ne,{children:Q.map(ie=>g.jsx(Y,{text:ie,color:"red"},ie))})]}),M.reason.length>0&&g.jsxs("div",{className:"mt-2 text-xs text-neutral-600 dark:text-neutral-400",children:[" ",M.reason.join(" / ")]})]})}const fc={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},mc={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},kc={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},DA={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},jf={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},x8=["","","","",""];function i2(e){return x8.includes(e)}const w8={:"",:"",:"",:"",:""},S8={:"",:"",:"",:"",:""},E8={:"",:"",:"",:"",:""},T8={:"",:"",:"",:"",:""};function fd(e){if(!e)return null;const t=e.trim();if(["","","","","","","","","",""].includes(t))return t;if(fc[t])return fc[t];if(["","","","","","","","","","","",""].includes(t))return jf[t]??null;if(mc[t])return jf[mc[t]]??null;const n=t.charAt(0);return fc[n]?fc[n]:["","","","","","","","","",""].includes(n)?n:mc[n]?jf[mc[n]]??null:["","","","","","","","","","","",""].includes(n)?jf[n]??null:null}function k8(e,t){const n=kc[e],i=kc[t];if(!n||!i)return"";let o;i===n?o="":i===w8[n]?o="":i===S8[n]?o="":i===E8[n]?o="":i===T8[n]?o="":o="";const l=i2(e)===i2(t);switch(o){case"":return l?"":"";case"":return l?"":"";case"":return l?"":"";case"":return l?"":"";case"":return l?"":""}}function A8(e){switch(e){case"":case"":return"";case"":case"":return"";case"":case"":return"";case"":case"":return"";case"":case"":return""}}function ep(e){const t=Object.entries(e),n=t.reduce((p,[,y])=>p+(y>0?y:0),0);if(n<=0)return Object.fromEntries(t.map(([p])=>[p,0]));const i=t.map(([p,y])=>[p,(y>0?y:0)*100/n]),o=i.map(([p,y])=>[p,Math.floor(y)]);let l=o.reduce((p,[,y])=>p+y,0);const u=i.map(([p,y])=>[p,y-Math.floor(y)]).sort((p,y)=>y[1]-p[1]),f=Object.fromEntries(o.map(([p,y])=>[p,y]));let m=0;for(;l<100&&m<u.length;)f[u[m][0]]+=1,l+=1,m+=1;return f}function j8(e){const t={:0,:0,:0,:0,:0};for(const[n,i]of Object.entries(e??{})){const o=kc[fd(n)];o&&i>0&&(t[o]+=i)}return ep(t)}function N8(e,t){const n={:0,:0,:0,:0,:0,:0,:0,:0,:0,:0};for(const[i,o]of Object.entries(e??{})){if(o<=0)continue;const l=fd(i);if(!l)continue;const u=k8(t,l);n[u]+=o}return n}function O8(e){const t={:0,:0,:0,:0,:0};for(const[n,i]of Object.entries(e)){const o=A8(n);t[o]+=i}return ep(t)}function Jg(e){if(!e)return"";const t=e.replace(/[()[\]{}]/g,"").replace(/\s+/g,"").replace(/[:\-_.]/g,""),n=t.match(/([]).*?([])/);if(n)return`${n[1]}${n[2]}`;const i=t.match(/([]).*?([])/);return i?`${fc[i[1]]}${mc[i[2]]}`:""}function s2(e){const t=Array.isArray(e)?e.slice(0,4):[];for(;t.length<4;)t.push("");return t.map((n,i)=>{if(!n)return"";const o=n.replace(/[()[\]{}]/g,"").replace(/\s+/g,"").replace(/[:\-_.]/g,""),l=o.match(/([]).*?([])/);if(l)return`${l[1]}${l[2]}`;const u=o.match(/([]).*?([])/);return u?`${fc[u[1]]}${mc[u[2]]}`:i<=2?"--":""})}function D8(e,t){const n={:!1,:!1,:!1,:!1,:!1};for(const i of e){if(!i)continue;const o=kc[i.charAt(0)];o&&(n[o]=!0);{const l=DA[i.charAt(1)];l&&(n[l]=!0)}}return n}function M8(e){const t={:0,:0,:0,:0,:0};for(const n of e){if(!n)continue;const i=kc[n.charAt(0)],o=DA[n.charAt(1)];i&&(t[i]+=10),o&&(t[o]+=6)}return t}function Qg(e){return e[0]?.length===2&&e[1]?.length===2&&e[2]?.length===2}const C8=["","","","","","","","","",""];function R8(e){const t={};for(const[n,i]of Object.entries(e??{})){if(i<=0)continue;const o=fd(n);o&&(t[o]=(t[o]??0)+i)}return t}function L8(e){const n={...{:0,:0,:0,:0,:0,:0,:0,:0,:0,:0}};for(const i of C8){const o=kc[i],l=`${i}${o}`;n[l]=Math.max(0,Math.round(e[i]??0))}return n}const B8={natal:50,dae:30,se:20,wol:7,il:3};function P8(e){const t={};for(const{kind:i,bare:o}of e){const l=B8[i]??0;if(l<=0)continue;const u=ep(o);for(const[f,m]of Object.entries(u))t[f]=(t[f]??0)+m*l}const n=Object.values(t).reduce((i,o)=>i+o,0);if(n>0)for(const i of Object.keys(t))t[i]=t[i]/n*100;return t}function $8(e){if(!e)return[];const t=fd(e.charAt(0)),n=fd(e.charAt(1));return[t,n].filter(Boolean)}function Nf(e){const t=$8(e),n={};for(const i of t)n[i]=(n[i]??0)+1;return n}function I8({data:e,pillars:t,lunarPillars:n,daewoonGz:i}){const o=Wn(Ee=>Ee.settings),[l,u]=R.useState("   "),[f,m]=R.useState(""),[p,y]=R.useState(!0),{date:_,yearGZ:x,monthGZ:S,dayGZ:T}=fi(),k=R.useMemo(()=>Ge(x),[x]),j=R.useMemo(()=>Ge(S),[S]),C=R.useMemo(()=>Ge(T),[T]),P=Td(e,e?.mingSikType),N=R.useMemo(()=>{if(!P?.length)return 0;const Ee=P.findIndex((Ie,Pe)=>{const Ye=P[Pe+1]?.at;return _>=Ie.at&&(!Ye||_<Ye)});return Ee!==-1?Ee:_<P[0].at?0:P.length-1},[P,_]),M=R.useMemo(()=>{const Ee=i??P?.[N]?.gz??"";return Ge(Ee)||null},[i,P,N]),{manualHour:D}=_d(),$=e.mingSikType??"/",z=R.useMemo(()=>s2(t),[t]),F=R.useMemo(()=>s2(n),[n]),K=R.useMemo(()=>{const Ee=[...z];return(!Ee[3]||Ee[3]==="")&&D&&(Ee[3]=D.stem+D.branch),Ee},[z,D]),oe=R.useMemo(()=>{const Ee=[...F];return(!Ee[3]||Ee[3]==="")&&D&&(Ee[3]=D.stem+D.branch),Ee},[F,D]),Q=R.useMemo(()=>{const Ee=Number(e.birthDay?.slice(0,4)),Ie=Number(e.birthDay?.slice(4,6)),Pe=Number(e.birthDay?.slice(6,8));if(!Number.isFinite(Ee)||!Number.isFinite(Ie)||!Number.isFinite(Pe))return null;const Ye=new Date(Ee,Ie-1,Pe,12,0,0,0),Re=Jg(ut(Ye)||""),fe=Jg(jt(Ye)||""),Le=Jg(_t(Ye,$)||"");return[Re,fe,Le,""]},[e.birthDay,$]),Y=Qg(K),ne=Qg(oe),[ie]=R.useState("solar"),Se=ie==="lunar"?ne?"lunar":Y?"solar":"lunar":Y?"solar":ne?"lunar":"solar",J=R.useMemo(()=>{const Ie=[...Se==="lunar"?ne?oe:Y?K:Q??["","","",""]:Y?K:ne?oe:Q??["","","",""]];return(!Ie[3]||Ie[3]==="")&&D&&(Ie[3]=D.stem+D.branch),Ie},[Se,Y,ne,K,oe,Q,D]),le=R.useMemo(()=>D?D.stem+D.branch:J[3]||"",[D,J]),te=R.useMemo(()=>({dae:f!==""?M??null:null,se:f===""||f===""||f===""?k??null:null,wol:f===""||f===""?j??null:null,il:f===""?C??null:null}),[f,M,k,j,C]),be=R.useMemo(()=>TA({natal:J,tab:f,chain:te,hourKey:le}),[J,f,te,le]),Z=R.useMemo(()=>{if(!be)return null;const Ee=R8(be.perStemElementScaled),Ie=te.dae?Nf(te.dae):{},Pe=te.se?Nf(te.se):{},Ye=te.wol?Nf(te.wol):{},Re=te.il?Nf(te.il):{},fe=P8([{kind:"natal",bare:Ee},{kind:"dae",bare:Ie},{kind:"se",bare:Pe},{kind:"wol",bare:Ye},{kind:"il",bare:Re}]),Le=ep(fe),ce=L8(Le),me=N8(fe,be.dayStem),$e=O8(me),He=j8(fe);return{perStemAugBare:fe,perStemAugFull:ce,elemPct100:He,totalsMain:$e,totalsSub:me}},[be,te]),G=R.useMemo(()=>D8(J),[J]),B=R.useMemo(()=>["","","","",""].some(Ee=>!G[Ee]),[G]),q=Z?.elemPct100??be?.elementPercent100??M8(J),V=R.useMemo(()=>{if(!be||!Z)return[];const Ee=nA(be.dayStem);return Object.entries(Z.totalsMain).map(([Ie,Pe])=>({name:Ie,value:Pe,color:Ee[Ie]}))},[be,Z]),H=Z?.elemPct100??{:0,:0,:0,:0,:0},X=Z?.totalsSub??null,W=R.useMemo(()=>D?D.stem+D.branch:J[3]||"",[D,J]),he=R.useMemo(()=>[f,M??"",k??"",j??"",C??"",_?.toISOString?.()??"",W].join("|"),[f,M,k,j,C,_,W]),se=R.useMemo(()=>{const Ee=X?Object.entries(X).sort(([Pe],[Ye])=>Pe.localeCompare(Ye)).map(([Pe,Ye])=>`${Pe}:${Ye}`).join(","):"none",Ie=V.map(Pe=>`${Pe.name}:${Pe.value}`).join(",");return`${he}||${J.join("")}||${Ie}||${Ee}`},[he,J,V,X]),ve=typeof TS=="function"?TS(J,be?.totals):null,ke=R.useMemo(()=>{const Ie=(ve?.ordered??[]).map(Re=>{const fe=Re.element??"",Le=/||wood/i.test(fe)?"":/||fire/i.test(fe)?"":/||earth/i.test(fe)?"":/||metal/i.test(fe)?"":/||water/i.test(fe)?"":null,ce=typeof Re.score=="number"?Re.score:Le?q[Le]??0:0,me=Array.isArray(Re.reasons)?Re.reasons:[];return{element:fe,elNorm:Le,score:ce,reasons:me}}),Pe=Re=>Re?G[Re]:!1,Ye=p?Ie.map(Re=>Re.elNorm&&!Pe(Re.elNorm)?{...Re,score:0,reasons:[...Re.reasons,":    0"]}:Re):Ie;return Ye.sort((Re,fe)=>{const Le=Pe(Re.elNorm)?1:0,ce=Pe(fe.elNorm)?1:0;return p&&Le!==ce?ce-Le:(fe.score??0)!==(Re.score??0)?(fe.score??0)-(Re.score??0):(Re.elNorm??Re.element).localeCompare(fe.elNorm??fe.element)}),Ye},[ve,p,q,G]),je=R.useMemo(()=>Math.max(0,...ke.map(Ee=>Number.isFinite(Ee.score)?Ee.score:0)),[ke]);function Me(Ee){return EA(Ee,{criteriaMode:"modern",useHarmonyOverlay:!0})}return Qg(J)?g.jsxs("div",{className:"space-y-4 mb-4",children:[g.jsx("div",{className:"flex gap-2 justify-center flex-wrap",children:D9.map(Ee=>g.jsx("button",{onClick:()=>m(Ee),className:"px-2 py-1 text-xs rounded border cursor-pointer "+(f===Ee?"bg-yellow-500 text-black border-yellow-600":"bg-neutral-400 dark:bg-neutral-900 text-neutral-100 dark:text-neutral-300 border-neutral-400 dark:border-neutral-700"),children:Ee},Ee))}),g.jsx("div",{className:"flex gap-2 mb-4 justify-center flex-wrap",children:["  ","   ","",""].map(Ee=>g.jsx("button",{onClick:()=>u(Ee),className:"px-3 py-1 text-sm rounded border cursor-pointer "+(l===Ee?"bg-violet-500 text-white border-violet-600":"bg-neutral-400 dark:bg-neutral-900 text-neutral-100 dark:text-neutral-300 border-neutral-400 dark:border-neutral-700"),children:Ee},Ee))}),l===""&&g.jsx(QP,{pillars:J,daewoon:M||void 0,sewoon:k||void 0,wolwoon:j||void 0,ilwoon:C||void 0,tab:f},`harm-${f}-${W}`),l==="   "&&g.jsxs("div",{className:"space-y-4",children:[g.jsx(HP,{data:V,revKey:se,perStemElementScaled:Z?.perStemAugFull,elementPercent:H,dayStem:J[2]?.charAt(0)??null},`pentagon-${se}`),g.jsx(YP,{value:Me(J)}),g.jsx(t$,{natal:J}),g.jsxs("div",{className:"w-full p-4 rounded-xl bg-neutral-100 dark:bg-neutral-900 space-y-3",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx("div",{className:"text-sm font-bold",children:" "}),B&&g.jsxs("button",{type:"button",onClick:()=>y(Ee=>!Ee),className:`text-xs px-2 py-1 rounded-lg border transition cursor-pointer
                    ${p?"bg-violet-100 text-violet-800 border-violet-200 whitespace-nowrap dark:bg-violet-900/30 dark:text-violet-200 dark:border-violet-800":"bg-white text-neutral-700 border-neutral-300 hover:bg-neutral-50 dark:bg-neutral-800 dark:text-neutral-200 dark:border-neutral-700"}`,"aria-pressed":p,children:[": ",p?"ON":"OFF"]})]}),g.jsx("ul",{className:"space-y-2",children:ke.map((Ee,Ie)=>g.jsxs("li",{className:"flex items-start justify-between gap-3 rounded-lg border border-neutral-200 dark:border-neutral-800 p-2",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("span",{className:"text-xs px-2 py-0.5 rounded-full bg-neutral-200 dark:bg-neutral-800 text-neutral-800 dark:text-neutral-200",children:[Ie+1,""]}),g.jsx("span",{className:"text-sm font-semibold",children:Ee.element})]}),g.jsxs("div",{className:"flex-1",children:[g.jsx("div",{className:"mt-1 h-1.5 w-full rounded bg-neutral-300 dark:bg-neutral-800 overflow-hidden",children:g.jsx("div",{className:"h-1.5 rounded bg-white dark:bg-neutral-100",style:{width:`${je>0?Math.max(2,Math.min(100,Math.round((Ee.score??0)/je*100))):12}%`},title:` ${Ee.score}`})}),g.jsx("div",{className:"mt-2 flex flex-wrap gap-1.5",children:(Ee.reasons??[]).map((Pe,Ye)=>g.jsx("span",{className:"text-[11px] px-2 py-0.5 rounded-full bg-neutral-200 dark:bg-neutral-800 text-neutral-700 dark:text-neutral-300",children:Pe},Ye))})]})]},Ee.elNorm??Ee.element))})]})]}),l===""&&g.jsx(Y6,{pillars:J,daewoon:M||void 0,sewoon:k||void 0,wolwoon:j||void 0,ilwoon:C||void 0,tab:f},`shin-${f}-${W}`),l==="  "&&g.jsx(_8,{unified:be,pillars:J,tab:f,mapping:o.hiddenStemMode},`gyeok-${f}-${W}`)]}):g.jsx("div",{className:"p-4 rounded-xl bg-neutral-100 dark:bg-neutral-900 text-sm",children:"   ."})}const z8=!1,a2=e=>e<10?`0${e}`:`${e}`,U8=e=>typeof e=="string"&&e.length>=2,H8=e=>Array.isArray(e)&&e.length===4&&e.every(U8);function G8(e){const t=e,n=typeof t.birthDay=="string"?t.birthDay:"",i=typeof t.calendarType=="string"?t.calendarType:"solar";if(n.length<8)return e;const o=Number(n.slice(0,4)),l=Number(n.slice(4,6)),u=Number(n.slice(6,8)),f=["isLeap","isLeapMonth","leapMonth","leap","lunarLeap"];let m=!1;for(const p of f){const y=t[p];if(typeof y=="boolean"){m=y;break}if(typeof y=="number"){m=y===1;break}if(typeof y=="string"){m=y==="1"||y.toLowerCase()==="true";break}}if(i==="lunar")try{const p=br(o,l,u,0,0),y=`${p.getFullYear()}${a2(p.getMonth()+1)}${a2(p.getDate())}`;return{...e,birthDay:y,calendarType:"solar"}}catch{return e}return e}function F8({data:e}){const[t,n]=R.useState("un"),i=R.useMemo(()=>{try{const f=G8(e);return Xa(f)}catch{return new Date}},[e]),o=R.useMemo(()=>Km(e,i),[e,i]),l=!e.birthTime||e.birthTime==="",u=R.useMemo(()=>{try{const f=ut(o,e.birthPlace?.lon),m=jt(o,e.birthPlace?.lon),p=_t(o,e.mingSikType),y=l?"":$i(o,e.mingSikType);return[f,m,p,y]}catch{return[]}},[o,e?.mingSikType,e?.birthPlace?.lon,l]);return g.jsxs("div",{className:"w-[96%] max-w-[640px] mx-auto",children:[g.jsxs("div",{className:"flex border-b border-neutral-700 mb-4",children:[g.jsx("button",{onClick:()=>n("un"),className:`px-2 desk:px-4 py-2 text-xs desk:text-sm cursor-pointer border-b hover:border-purple-500 hover:text-purple-500 font-bold ${t==="un"?"border-purple-500 text-purple-500":"border-transparent text-neutral-400"}`,children:" "}),g.jsx("button",{onClick:()=>n("myoun"),className:`px-2 desk:px-4 py-2 text-xs desk:text-sm cursor-pointer border-b hover:border-purple-500 hover:text-purple-500 font-bold ${t==="myoun"?"border-purple-500 text-purple-500":"border-transparent text-neutral-400"}`,children:" "}),g.jsx("button",{onClick:()=>n("report"),className:`px-2 desk:px-4 py-2 text-xs desk:text-sm cursor-pointer border-b hover:border-purple-500 hover:text-purple-500 font-bold ${t==="report"?"border-purple-500 text-purple-500":"border-transparent text-neutral-400"}`,children:" "})]}),t==="un"&&g.jsx(TP,{data:e}),t==="myoun"&&g.jsx(RP,{data:e}),t==="report"&&g.jsx(I8,{data:e,pillars:H8(u)?u:[]})]})}/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y8=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),q8=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,i)=>i?i.toUpperCase():n.toLowerCase()),o2=e=>{const t=q8(e);return t.charAt(0).toUpperCase()+t.slice(1)},MA=(...e)=>e.filter((t,n,i)=>!!t&&t.trim()!==""&&i.indexOf(t)===n).join(" ").trim(),Z8=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var V8={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K8=R.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:o="",children:l,iconNode:u,...f},m)=>R.createElement("svg",{ref:m,...V8,width:t,height:t,stroke:e,strokeWidth:i?Number(n)*24/Number(t):n,className:MA("lucide",o),...!l&&!Z8(f)&&{"aria-hidden":"true"},...f},[...u.map(([p,y])=>R.createElement(p,y)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pi=(e,t)=>{const n=R.forwardRef(({className:i,...o},l)=>R.createElement(K8,{ref:l,iconNode:t,className:MA(`lucide-${Y8(o2(e))}`,`lucide-${e}`,i),...o}));return n.displayName=o2(e),n};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W8=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],X8=pi("chevron-down",W8);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J8=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Q8=pi("chevron-up",J8);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eI=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],tI=pi("circle-x",eI);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nI=[["path",{d:"M19.414 14.414C21 12.828 22 11.5 22 9.5a5.5 5.5 0 0 0-9.591-3.676.6.6 0 0 1-.818.001A5.5 5.5 0 0 0 2 9.5c0 2.3 1.5 4 3 5.5l5.535 5.362a2 2 0 0 0 2.879.052 2.12 2.12 0 0 0-.004-3 2.124 2.124 0 1 0 3-3 2.124 2.124 0 0 0 3.004 0 2 2 0 0 0 0-2.828l-1.881-1.882a2.41 2.41 0 0 0-3.409 0l-1.71 1.71a2 2 0 0 1-2.828 0 2 2 0 0 1 0-2.828l2.823-2.762",key:"17lmqv"}]],rI=pi("heart-handshake",nI);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iI=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],sI=pi("house",iI);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aI=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],oI=pi("log-out",aI);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lI=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],cI=pi("menu",lI);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uI=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],dI=pi("plus",uI);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hI=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],fI=pi("settings",hI);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mI=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 21v-2a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2",key:"1m6ac2"}]],pI=pi("square-user",mI);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gI=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],l2=pi("star",gI);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bI=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],yI=pi("user-plus",bI);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vI=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],CA=pi("x",vI);function _I({onOpenSidebar:e,onAddNew:t,onOpenCustom:n}){return g.jsx("header",{className:"fixed min-w-[320px] top-0 left-0 right-0 bg-white dark:bg-neutral-950 border-b border-neutral-200 dark:border-neutral-800 z-55 px-2 desk:px-3 transition-colors",children:g.jsxs("div",{className:"relative max-w-[640px] w-full mx-auto h-12 sm:h-14 flex justify-between items-center",children:[g.jsx("button",{type:"button",onClick:e,"aria-label":" ",className:"p-2 rounded-full text-neutral-700 dark:text-neutral-200 hover:bg-neutral-100 dark:hover:bg-neutral-800 hover:text-purple-600 dark:hover:text-purple-400 focus:outline-none focus:ring-2 focus:ring-purple-500 cursor-pointer transition-colors",children:g.jsx(cI,{size:22})}),g.jsx("h1",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 mx-auto text-base sm:text-lg font-bold tracking-tight text-neutral-900 dark:text-neutral-100",children:""}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("button",{type:"button",onClick:t,"aria-label":" ",className:"w-8 h-8 sm:w-10 sm:h-10 flex items-center justify-center rounded-md bg-purple-600 text-white hover:bg-purple-700 dark:bg-purple-600 dark:hover:bg-purple-500 focus:outline-none focus:ring-2 focus:ring-purple-500 cursor-pointer transition-colors",children:g.jsx(yI,{size:18})}),g.jsx("button",{type:"button",onClick:n,"aria-label":" ",className:"w-8 h-8 sm:w-10 sm:h-10 flex items-center justify-center rounded-md bg-orange-600 text-white hover:bg-orange-700 dark:bg-orange-600 dark:hover:bg-orange-500 focus:outline-none focus:ring-2 focus:ring-purple-500 cursor-pointer transition-colors",children:g.jsx(pI,{size:18})})]})]})})}function xI(e){R.useEffect(()=>{const t=e??N2()??(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");O2(t),e&&$f(e)},[e])}const RA=["theme","hiddenStem","hiddenStemMode","sinsalMode","sinsalBase","sinsalBloom","exposure","charType","thinEum","visibility","difficultyMode"];function wI(e){return typeof e=="string"&&RA.includes(e)}function eb(e){const t=Array.isArray(e)?e.filter(wI):[],n=RA.filter(i=>!t.includes(i));return[...t,...n]}function SI({open:e,onClose:t}){const{settings:n,setSettings:i,saveToServer:o}=Wn(),l=R.useMemo(()=>eb(n.sectionOrder),[n.sectionOrder]),u=R.useMemo(()=>({...il,...n,sectionOrder:eb(n.sectionOrder)}),[n]),[f,m]=R.useState(l),[p,y]=R.useState(u),[_,x]=R.useState(null),[S,T]=R.useState(!1),k=R.useCallback(()=>x(null),[]),j=p.theme??n.theme??"dark";xI(j),R.useEffect(()=>{$f(j)},[j]),R.useEffect(()=>{if(!e)return;const D=eb(n.sectionOrder);S||(y({...il,...n,sectionOrder:D}),m(D),T(!1))},[e,n,S]);const C=(D,$)=>{y(z=>{const F={...z,[D]:$};return D==="theme"&&$f($),T(!0),F})},P=()=>{const D={...il,...p,sectionOrder:f};try{typeof window<"u"&&window.localStorage.removeItem("settings_v1")}catch{}i(D),D.theme&&$f(D.theme),o(!0),x(" "),T(!1),t()},N=D=>{const{destination:$,source:z}=D;if(!$||$.index===z.index)return;const F=Array.from(f),[K]=F.splice(z.index,1);F.splice($.index,0,K),m(F)},M=D=>{switch(D){case"theme":return g.jsx(Ji,{title:"",children:g.jsx(EI,{value:p.theme??"dark",onChange:$=>C("theme",$)})});case"hiddenStem":return g.jsx(Ji,{title:"  ",children:g.jsx(ic,{value:p.hiddenStem,onChange:$=>C("hiddenStem",$),options:[{label:"",value:"all"},{label:" ",value:"regular"}]})});case"hiddenStemMode":return g.jsx(Ji,{title:" ",children:g.jsx(ic,{value:p.hiddenStemMode,onChange:$=>C("hiddenStemMode",$),options:[{label:"",value:"classic"},{label:"",value:"hgc"}]})});case"sinsalMode":return g.jsx(Ji,{title:"",children:g.jsx(ic,{value:p.sinsalMode,onChange:$=>C("sinsalMode",$),options:[{label:"",value:"classic"},{label:"",value:"modern"}]})});case"sinsalBase":return g.jsx(Ji,{title:"",children:g.jsx(ic,{value:p.sinsalBase,onChange:$=>C("sinsalBase",$),options:[{label:"",value:""},{label:"",value:""}]})});case"sinsalBloom":return g.jsx(Ji,{title:" ",children:g.jsx(Ko,{label:" ",checked:!!p.sinsalBloom,onChange:$=>C("sinsalBloom",$)})});case"exposure":return g.jsx(Ji,{title:" ",children:g.jsx(ic,{value:p.exposure,onChange:$=>C("exposure",$),options:[{label:"",value:""},{label:"",value:""},{label:"",value:""},{label:"",value:""}]})});case"charType":return g.jsx(Ji,{title:" ",children:g.jsx(ic,{value:p.charType,onChange:$=>C("charType",$),options:[{label:"",value:""},{label:"",value:""}]})});case"thinEum":return g.jsx(Ji,{title:" ",children:g.jsx(Ko,{label:" ",checked:!!p.thinEum,onChange:$=>C("thinEum",$)})});case"visibility":return g.jsx(Ji,{title:" ",children:g.jsxs("div",{className:"space-y-2 w-full max-w-[180px] mx-auto",children:[g.jsx(Ko,{label:" ",checked:!!p.showSipSin,onChange:$=>C("showSipSin",$)}),g.jsx(Ko,{label:" ",checked:!!p.showSibiUnseong,onChange:$=>C("showSibiUnseong",$)}),g.jsx(Ko,{label:" ",checked:!!p.showSibiSinsal,onChange:$=>C("showSibiSinsal",$)}),g.jsx(Ko,{label:" ",checked:!!p.showNabeum,onChange:$=>C("showNabeum",$)})]})});case"difficultyMode":return g.jsx(Ji,{title:" UP ver.",children:g.jsx(Ko,{label:" UP ",checked:!!p.difficultyMode,onChange:$=>C("difficultyMode",$)})});default:return null}};return g.jsxs(g.Fragment,{children:[g.jsx("style",{children:"[data-rbd-drag-handle-context-id]{touch-action:none!important}"}),g.jsx("div",{className:`fixed inset-0 bg-black/60 transition-opacity duration-300 z-90 ${e?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,onClick:t}),g.jsxs("div",{className:`fixed inset-x-0 mx-auto w-full max-w-[640px] h-[88dvh] bg-white text-neutral-900 dark:bg-neutral-950 dark:text-white shadow-lg rounded-t-2xl transition-bottom duration-300 z-99 ${e?"bottom-0":"bottom-[-88dvh]"}`,children:[g.jsx("div",{className:"flex justify-between items-center p-4 border-b border-neutral-200 dark:border-neutral-800",children:g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("h2",{className:"text-lg font-bold",children:""}),g.jsx("button",{onClick:P,className:"px-3 py-1 rounded bg-indigo-600 hover:bg-indigo-500 text-white text-sm cursor-pointer",children:""})]})}),e&&g.jsx(Sd,{onDragEnd:N,children:g.jsx(sl,{droppableId:"settings-sections",children:D=>g.jsxs("ul",{ref:D.innerRef,...D.droppableProps,className:"flex flex-col gap-2 p-4 overflow-y-auto max-h-[80dvh] list-none",children:[f.map(($,z)=>g.jsx(Ec,{draggableId:$,index:z,children:F=>g.jsxs("li",{ref:F.innerRef,...F.draggableProps,...F.dragHandleProps,className:"!flex justify-between items-center bg-white dark:bg-neutral-800 p-2 rounded border text-sm desk:text-base select-none cursor-grab active:cursor-grabbing",children:[g.jsx("span",{className:"mr-2 select-none",children:""}),g.jsx("div",{className:"flex-1 min-w-0",children:M($)})]})},$)),D.placeholder]})})})]}),_&&g.jsx(Mk,{message:_,onClose:k,ms:1800})]})}function EI({value:e,onChange:t}){const n=e==="dark";return g.jsxs("button",{"data-no-drag":!0,onClick:()=>t(n?"light":"dark"),className:"flex items-center gap-2 px-3 py-1.5 rounded-md border text-sm cursor-pointer border-neutral-300 bg-white hover:bg-neutral-100 text-neutral-700 dark:border-neutral-700 dark:bg-neutral-900 dark:hover:bg-neutral-800 dark:text-neutral-200",title:"/ ","aria-pressed":n,children:[g.jsx("span",{className:"inline-block w-10 h-5 bg-neutral-300 rounded-full relative after:content-[''] after:w-4 after:h-4 after:bg-white after:rounded-full after:absolute after:top-0.5 after:left-0.5 after:transition-all dark:bg-neutral-700"}),g.jsx("span",{children:n?"":""})]})}function Ji({title:e,children:t}){return g.jsxs("div",{className:"p-3 rounded-lg bg-neutral-50 border border-neutral-200 text-neutral-900 dark:bg-neutral-900 dark:border-neutral-800 dark:text-neutral-100 space-y-3",children:[g.jsx("h3",{className:"text-sm font-semibold text-center",children:e}),g.jsx("div",{className:"flex justify-center",children:t})]})}function ic({value:e,onChange:t,options:n}){return g.jsx("div",{"data-no-drag":!0,className:"inline-flex rounded-md overflow-hidden border border-neutral-300 bg-white dark:border-neutral-700 dark:bg-neutral-800",onMouseDown:i=>i.stopPropagation(),onTouchStart:i=>i.stopPropagation(),children:n.map(i=>{const o=e===i.value;return g.jsx("button",{type:"button",onClick:()=>t(i.value),className:`px-3 py-1 text-sm transition-colors ${o?"bg-indigo-600 text-white":"text-neutral-700 hover:bg-neutral-100 dark:text-neutral-300 dark:hover:bg-neutral-700 cursor-pointer"}`,children:i.label},i.value)})})}function Ko({label:e,checked:t,onChange:n}){const i=`switch-${e}`;return g.jsxs("label",{"data-no-drag":!0,htmlFor:i,className:"flex items-center justify-between w-full max-w-[180px] text-sm cursor-pointer",children:[g.jsx("span",{children:e}),g.jsx("input",{id:i,type:"checkbox",checked:t,onChange:o=>n(o.target.checked),className:"peer hidden"}),g.jsx("span",{className:"w-10 h-5 bg-neutral-300 rounded-full relative after:content-[''] after:w-4 after:h-4 after:bg-white after:rounded-full after:absolute after:top-0.5 after:left-0.5 after:transition-all peer-checked:bg-green-600 peer-checked:after:translate-x-5 dark:bg-neutral-700 dark:peer-checked:bg-green-600"})]})}function TI({onShowToday:e,onShowCouple:t}){const[n,i]=R.useState(!1),[o,l]=R.useState(!1),u=async()=>{if(!o){l(!0);try{await kt.auth.signOut(),window.location.reload()}catch(f){console.error(f),alert(" .  ."),l(!1)}}};return g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"fixed min-w-[320px] h-[64px] bottom-0 left-0 right-0 bg-white border-t border-neutral-200 py-2 text-xs sm:text-sm z-50 dark:bg-neutral-950 dark:border-neutral-800",children:g.jsxs("nav",{className:"flex justify-around items-center max-w-[640px] w-full mx-auto",children:[g.jsx(Of,{icon:g.jsx(sI,{size:22}),label:" ",onClick:e}),g.jsx(Of,{icon:g.jsx(rI,{size:22}),label:"",onClick:t}),g.jsx(Of,{icon:g.jsx(fI,{size:22}),label:"",onClick:()=>i(!0)}),g.jsx(Of,{icon:g.jsx(oI,{size:22}),label:"",onClick:u,disabled:o})]})}),g.jsx(SI,{open:n,onClose:()=>i(!1)})]})}function Of({icon:e,label:t,onClick:n,disabled:i}){return g.jsxs("button",{onClick:n,disabled:i,className:"flex flex-col items-center justify-center text-neutral-600 hover:text-purple-600 transition-colors cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed dark:text-neutral-300 dark:hover:text-purple-400",children:[e,g.jsx("span",{className:"mt-1",children:t})]})}function kI(e,t){const[n,i]=R.useState(()=>{if(typeof window>"u")return{};try{const D=localStorage.getItem(F1);return D?JSON.parse(D):{}}catch{return{}}});R.useEffect(()=>{if(!(typeof window>"u"))try{localStorage.setItem(F1,JSON.stringify(n))}catch{}},[n]);const[o,l]=R.useState({}),[u,f]=R.useState({}),[m,p]=R.useState(""),[y,_]=R.useState(!1),[x,S]=R.useState(()=>{const D=Zf(),$=Vf();return $.length?Zu(D,$):D}),T=R.useRef(!1);R.useEffect(()=>{(async()=>{if(y)return;const{data:{user:$},error:z}=await kt.auth.getUser();if(z||!$)return;const{data:F,error:K}=await kt.from("user_folder_order").select("folder_name, sort_order").eq("user_id",$.id).order("sort_order",{ascending:!0,nullsFirst:!0});if(K){console.error("load folder order from server error:",K),_(!0);return}const oe=Zf(),Q=(F??[]).map(ne=>String(ne.folder_name)).filter(Boolean),Y=Q.length?Zu(oe,Q):Zu(oe,Vf());S(Y),_(!0)})()},[y]);const k=R.useCallback(async D=>{const{data:{user:$},error:z}=await kt.auth.getUser();if(z||!$)return;const F=D.map((oe,Q)=>({user_id:$.id,folder_name:oe,sort_order:Q+1,updated_at:new Date().toISOString()})),{error:K}=await kt.from("user_folder_order").upsert(F,{onConflict:"user_id,folder_name"});K&&console.error("save folder order to server error:",K)},[]);R.useEffect(()=>{if(typeof window>"u")return;const D=()=>{if(T.current){T.current=!1;return}const $=Zf(),z=Vf(),F=z.length?Zu($,z):$;S(F)};return window.addEventListener(Wa,D),()=>window.removeEventListener(Wa,D)},[]),R.useEffect(()=>{l(D=>{const $={...D};for(const z of x)$[z]===void 0&&($[z]=!0);return $})},[x]);const{grouped:j,unassignedItems:C}=R.useMemo(()=>{const D={};x.forEach(F=>{D[F]=[]});const $=[],z=new Set;for(const F of e){if(!F.id||z.has(F.id))continue;const K=F.folder;K&&x.includes(K)?D[K].push(F):$.push(F),z.add(F.id)}return{grouped:D,unassignedItems:$}},[e,x]),P=R.useCallback(D=>{const{source:$,destination:z,type:F}=D;if(!z||F!=="FOLDER")return;const K=$.index,oe=z.index;K!==oe&&S(Q=>{if(!Q.length)return Q;const Y=[...Q],[ne]=Y.splice(K,1);return Y.splice(oe,0,ne),T.current=!0,Qu(Y),Y})},[]);return{folderFavMap:n,setFolderFavMap:i,folderOpenMap:o,setFolderOpenMap:l,memoOpenMap:u,setMemoOpenMap:f,newFolderName:m,setNewFolderName:p,orderedFolders:x,grouped:j,unassignedItems:C,handleDragEnd:P,createFolder:D=>{const $=D.trim();!$||$===pn||(Dk($),S(z=>{if(z.includes($))return z;const F=[...z,$];return Qu(F),k(F),F}))},deleteFolder:D=>{e.forEach($=>{$.folder===D&&t($.id,{folder:void 0})}),i($=>{const z={...$};return delete z[D],z}),S($=>{const z=$.filter(F=>F!==D);return Qu(z),k(z),z}),Nk.includes(D)?n7(D):t7(D)},UNASSIGNED_LABEL:pn}}function c2(e,t){if(!/^\d{8}$/.test(e))return e||"";const n=e.slice(0,4),i=e.slice(4,6),o=e.slice(6,8);return t&&/^\d{4}$/.test(t)?`${n} ${i} ${o} ${t.slice(0,2)}:${t.slice(2,4)}`:t===""?`${n} ${i} ${o} ( )`:`${n} ${i} ${o}`}function AI(e){if(!e)return"";const t=e.split(/[\s,]+/).filter(Boolean);if(t.length===0)return"";const n=u=>t.find(f=>u.some(m=>f.endsWith(m))),i=n(["","",""]),o=n(["","","",""]);return t.length===1||!n(["","","","","","",""])&&!n(["","","","",""])?e:i&&o?`${i} ${o}`:i||e}function Fb(e){return(e.ganji??"").replace(/\r\n/g,`
`).replace(/\s*null\s*/gi,"").trim()}const jI="list:__unassigned__",NI=e=>`list:${e}`,u2=e=>{if(!e.startsWith("list:"))return;const t=e.slice(5);return t==="__unassigned__"?void 0:t},OI="myeoun:folder-updated",d2=()=>{typeof window>"u"||window.dispatchEvent(new Event(OI))};function DI(e){const t=Fb(e),n=String(e.birthDay??"").trim();if(!/^\d{8}$/.test(n))return t;const i=Number(n.slice(0,4)),o=Number(n.slice(4,6)),l=Number(n.slice(6,8));if(!pm(i,o,l)||!e.birthTime||e.birthTime==="")return t;const u=Number(e.birthTime.slice(0,2)),f=e.birthTime.slice(2,4),m=u-1<0?23:u-1,p=String(m).padStart(2,"0")+f,y=e.corrected instanceof Date?e.corrected:new Date(e.corrected);if(Number.isNaN(y.getTime()))return t;new Date(y.getTime()-3600*1e3);const _=Gm({...e,birthTime:p});return Fb({...e,..._})}function MI({open:e,onClose:t,onView:n,onAddNew:i,onEdit:o,onDeleteView:l}){const{list:u,remove:f,update:m,reorder:p}=ss(),{folderFavMap:y,setFolderFavMap:_,folderOpenMap:x,setFolderOpenMap:S,memoOpenMap:T,setMemoOpenMap:k,newFolderName:j,setNewFolderName:C,orderedFolders:P,grouped:N,unassignedItems:M,handleDragEnd:D,createFolder:$,deleteFolder:z,UNASSIGNED_LABEL:F}=kI(u,m),[K,oe]=R.useState(""),[Q,Y]=R.useState("name"),ne=/\S/.test(K),{filteredUnassigned:ie,filteredGrouped:Se,totalMatches:J}=R.useMemo(()=>{const B=se=>se.toLowerCase().replace(/\s+/g," ").trim();if(!ne)return{filteredUnassigned:M,filteredGrouped:N,totalMatches:M.length+Object.values(N).reduce((se,ve)=>se+ve.length,0)};const q=B(K),V=se=>{const ve=String(se.birthDay??"").trim();let ke="",je="",Me="";if(/^\d{8}$/.test(ve))ke=ve.slice(0,4),je=ve.slice(4,6),Me=ve.slice(6,8);else{const Re=new Date(ve);if(!Number.isNaN(Re.getTime())){const fe=Re.getFullYear(),Le=Re.getMonth()+1,ce=Re.getDate();ke=String(fe).padStart(4,"0"),je=String(Le).padStart(2,"0"),Me=String(ce).padStart(2,"0")}}const Ee=ke&&je&&Me?`${ke}${je}${Me}`:"",Ie=ke&&je&&Me?`${ke}-${je}-${Me}`:"",Pe=ke&&je&&Me?`${ke}.${je}.${Me}`:"",Ye=c2(se.birthDay,se.birthTime);return B([Ee,Ie,Pe,Ye].filter(Boolean).join(" "))},H=se=>Q==="name"?B(se.name??"").includes(q):Q==="ganji"?B(Fb(se)??"").includes(q):V(se).includes(q),X=M.filter(H),W={};let he=X.length;for(const se of P){const ve=(N[se]||[]).filter(H);W[se]=ve,he+=ve.length}return{filteredUnassigned:X,filteredGrouped:W,totalMatches:he}},[K,Q,ne,M,N,P]),le=R.useRef(null),te=R.useRef(null);R.useEffect(()=>{if(te.current==null)return;const B=le.current;B&&(B.scrollTop=te.current,te.current=null)},[u,P]);const be=B=>({...B,transition:B?.transform?"transform 0.15s ease":"none"}),Z=(B,q)=>{const V=DI(B),H=AI(B.birthPlace?.name),X=`item:${B.id}`,W=!!T[B.id],he=B.gender===""?"":B.gender===""?"":B.gender,se=!B.correctedLocal||String(B.correctedLocal).trim()==="",ve=se||!B.corrected?null:new Date(B.corrected),ke=se||!B.birthTime||B.birthTime==="",je=String(B.birthDay).trim();let Me=NaN;if(/^\d{8}$/.test(je)){const Ye=`${je.slice(0,4)}-${je.slice(4,6)}-${je.slice(6,8)}`,Re=new Date(Ye);Number.isNaN(Re.getTime())||(Me=Re.getFullYear())}else{const Ye=new Date(je);Number.isNaN(Ye.getTime())||(Me=Ye.getFullYear())}function Ee(Ye,Re){return Number.isNaN(Ye)?0:Re-Ye+1}const Ie=new Date().getFullYear(),Pe=Ee(Me,Ie);return g.jsx(Ec,{draggableId:X,index:q,isDragDisabled:ne,children:Ye=>g.jsx("li",{ref:Ye.innerRef,...Ye.draggableProps,...Ye.dragHandleProps,style:be(Ye.draggableProps.style),className:`list-none select-none rounded-xl border
                       bg-white dark:bg-neutral-900
                       border-neutral-200 dark:border-neutral-800
                       text-neutral-900 dark:text-neutral-100
                       cursor-grab active:cursor-grabbing`,children:g.jsxs("div",{className:"p-3",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("div",{className:"font-semibold text-sm desk:text-base",children:[B.name," (",Pe,", ",he,")"]}),g.jsx("span",{className:"opacity-40",children:""}),g.jsx("div",{className:"text-sm text-neutral-600 dark:text-neutral-300",children:B.relationship?B.relationship:" "}),g.jsx("span",{className:"ml-auto opacity-50 select-none",children:""})]}),g.jsxs("div",{className:"text-sm text-neutral-600 dark:text-neutral-300 mt-1",children:[c2(B.birthDay,B.birthTime),","," ",B.calendarType==="lunar"?"":""]}),(H||ve)&&g.jsxs("div",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:[H,ve&&g.jsxs("span",{className:"opacity-70",children:[" "," "," ",ke?"":a4(ve)]})]}),V&&g.jsx("div",{className:"text-sm text-neutral-800 dark:text-neutral-200 mt-1 whitespace-pre-wrap break-keep",children:V}),B.memo&&B.memo.trim()!==""&&g.jsxs("div",{children:[g.jsx("button",{type:"button",className:"text-xs text-neutral-500 dark:text-neutral-400 hover:text-neutral-800 dark:hover:text-neutral-200 inline-flex items-center gap-1 cursor-pointer",onClick:Re=>{Re.stopPropagation(),k(fe=>({...fe,[B.id]:!fe[B.id]}))},children:W?" ":" "}),g.jsx("div",{className:W?"mt-1 text-sm text-neutral-800 dark:text-neutral-200 whitespace-pre-wrap":"hidden",children:B.memo})]}),g.jsxs("div",{className:"flex flex-wrap gap-2 mt-3",children:[g.jsx("select",{className:`h-30 text-xs rounded px-2 py-1 cursor-pointer
                             bg-white dark:bg-neutral-900
                             border border-neutral-300 dark:border-neutral-700
                             text-neutral-900 dark:text-neutral-100
                             focus:outline-none focus:ring-2 focus:ring-amber-500/40`,value:B.folder??F,onClick:Re=>Re.stopPropagation(),onChange:Re=>{Re.stopPropagation();const fe=Re.target.value,Le=fe===F?void 0:fe;m(B.id,{folder:Le})},children:[F,...P].map(Re=>g.jsx("option",{value:Re,children:Re},Re))}),g.jsxs("select",{className:`h-30 text-xs rounded px-2 py-1 cursor-pointer
                             bg-white dark:bg-neutral-900
                             border border-neutral-300 dark:border-neutral-700
                             text-neutral-900 dark:text-neutral-100
                             focus:outline-none focus:ring-2 focus:ring-amber-500/40`,value:B.mingSikType??"/",onClick:Re=>Re.stopPropagation(),onChange:Re=>{Re.stopPropagation();const fe=Re.target.value,Le={...B,mingSikType:fe},ce=Gm(Le);m(B.id,{mingSikType:fe,...ce}),n({...Le,...ce}),t()},children:[g.jsx("option",{value:"",children:""}),g.jsx("option",{value:"/",children:"/"}),g.jsx("option",{value:"",children:""})]})]}),g.jsxs("div",{className:"flex gap-2 mt-3",children:[g.jsx("button",{onClick:Re=>{Re.stopPropagation(),n(B),t()},className:`px-3 py-1 rounded text-white text-sm cursor-pointer
                             bg-indigo-600 hover:bg-indigo-500`,children:""}),g.jsx("button",{onClick:Re=>{Re.stopPropagation(),o?.(B)},className:`px-3 py-1 rounded text-white text-sm cursor-pointer
                             bg-amber-600 hover:bg-amber-500`,children:""}),g.jsx("button",{onClick:Re=>{Re.stopPropagation(),confirm(`'${B.name}'  ?`)&&(f(B.id),l&&l())},className:`px-3 py-1 rounded text-white text-sm cursor-pointer
                             bg-red-600 hover:bg-red-500`,children:""}),g.jsx("button",{type:"button",onClick:Re=>{Re.stopPropagation();const fe=!B.favorite;m(B.id,{favorite:fe});const Le=B.folder??"__unassigned__",ce={__unassigned__:[]};P.forEach(Be=>{ce[Be]=[]}),u.forEach(Be=>{const tt=Be.folder??"__unassigned__";ce[tt]||(ce[tt]=[]),ce[tt].push(Be)});const $e=(ce[Le]??[]).filter(Be=>Be.id!==B.id);fe?ce[Le]=[{...B,favorite:fe},...$e]:ce[Le]=[...$e,{...B,favorite:fe}];const He=[...ce.__unassigned__,...P.flatMap(Be=>ce[Be]??[])];p(He)},className:`ml-auto p-1 rounded cursor-pointer ${B.favorite?"text-yellow-400":"text-neutral-400"} hover:text-yellow-400`,children:g.jsx(l2,{size:16,fill:B.favorite?"currentColor":"none"})})]})]})})},X)},G=B=>{const{type:q,source:V,destination:H,draggableId:X}=B;if(!H||ne)return;const W=le.current;if(W&&(te.current=W.scrollTop),q==="FOLDER"){D(B);return}if(q==="ITEM"){if(!X.replace(/^item:/,""))return;const se=u2(V.droppableId),ve=u2(H.droppableId),ke=se??"__unassigned__",je=ve??"__unassigned__",Me={__unassigned__:[...M]};P.forEach(fe=>{Me[fe]=[...N[fe]||[]]});const Ee=Me[ke]??[];if(!Ee[V.index])return;const[Ie]=Ee.splice(V.index,1),Pe={...Ie,folder:ve??void 0},Ye=Me[je]??[];Ye.splice(H.index,0,Pe),Me[ke]=Ee,Me[je]=Ye;const Re=[...Me.__unassigned__,...P.flatMap(fe=>Me[fe]??[])];p(Re)}};return g.jsxs(g.Fragment,{children:[g.jsx("div",{className:`fixed inset-0 bg-black/70 transition-opacity duration-300 z-90 ${e?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,onClick:t}),g.jsxs("div",{className:`fixed top-0 left-0 h-[100dvh] min-w-[320px] w-full desk:w-1/3
                    bg-white dark:bg-neutral-950
                    text-neutral-900 dark:text-white
                    shadow-lg z-99 transition-[left] duration-300
                    overflow-hidden
                    ${e?"left-0":"left-[-100%]"}`,children:[g.jsxs("div",{className:"flex justify-between items-center w-full h-12 desk:h-16 p-4 border-b border-neutral-200 dark:border-neutral-800",children:[g.jsx("h2",{className:"text-lg font-bold",children:" "}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("button",{type:"button",onClick:()=>{i(),t()},className:`inline-flex items-center gap-1 px-3 py-1.5 rounded text-sm cursor-pointer
                         bg-purple-600 hover:bg-purple-500 text-white`,children:[g.jsx(dI,{size:16})," "]}),g.jsx("button",{onClick:t,className:"p-1 rounded cursor-pointer hover:bg-neutral-100 dark:hover:bg-neutral-900",children:g.jsx(CA,{size:22})})]})]}),g.jsx(Sd,{onDragEnd:G,children:g.jsxs("div",{ref:le,className:"p-4 h-[calc(100%-56px)] overflow-y-auto overscroll-contain",style:{touchAction:"pan-y"},children:[g.jsx("div",{className:"mb-3 sticky top-[-16px] z-10 pb-2 pt-2 bg-white dark:bg-neutral-950 z-50",children:g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("select",{value:Q,onChange:B=>Y(B.target.value),className:`h-30 text-xs rounded px-2 py-1 cursor-pointer
                             bg-white dark:bg-neutral-900
                             border border-neutral-300 dark:border-neutral-700
                             text-neutral-900 dark:text-neutral-100
                             focus:outline-none focus:ring-2 focus:ring-amber-500/40`,children:[g.jsx("option",{value:"name",children:""}),g.jsx("option",{value:"ganji",children:""}),g.jsx("option",{value:"birth",children:""})]}),g.jsxs("div",{className:"relative flex-1",children:[g.jsx("input",{type:"text",value:K,onChange:B=>oe(B.target.value),placeholder:Q==="name"?" ":Q==="ganji"?"  (: )":"  (: 19961229, 1996-12-29)",className:`w-full pl-7 pr-8 py-1 h-30 rounded
                               bg-white dark:bg-neutral-900
                               border border-neutral-300 dark:border-neutral-700
                               text-[16px] text-neutral-900 dark:text-neutral-100
                               placeholder-neutral-400 dark:placeholder-neutral-500
                               focus:outline-none focus:ring-2 focus:ring-amber-500/40`}),K&&g.jsx("button",{type:"button",onClick:()=>oe(""),className:"absolute right-2 top-1/2 -translate-y-1/2 opacity-60 hover:opacity-100","aria-label":" ",title:" ",children:g.jsx(tI,{size:16})})]}),ne&&g.jsxs("span",{className:"text-xs text-neutral-500 dark:text-neutral-400 whitespace-nowrap",children:[J,""]})]})}),g.jsxs("div",{className:"flex items-center mb-2 gap-2",children:[g.jsx("input",{type:"text",value:j,onChange:B=>C(B.target.value),placeholder:"  ",className:`flex-1 w-[60%] px-2 py-1 rounded h-30
                           bg-white dark:bg-neutral-900
                           border border-neutral-300 dark:border-neutral-700
                           text-sm text-neutral-900 dark:text-neutral-100
                           placeholder-neutral-400 dark:placeholder-neutral-500`,onClick:B=>B.stopPropagation()}),g.jsx("button",{type:"button",className:`px-3 rounded h-30 text-sm cursor-pointer
                           bg-neutral-100 hover:bg-neutral-200
                           dark:bg-neutral-800 dark:hover:bg-neutral-700
                           text-neutral-900 dark:text-neutral-100
                           border border-neutral-200 dark:border-neutral-700`,onClick:B=>{B.stopPropagation();const q=j.trim();q&&($(q),C(""),d2())},children:""})]}),g.jsx("p",{className:"text-xs text-neutral-600 dark:text-neutral-400 mb-2",children:ne?"   .":"/      ."}),g.jsx(sl,{droppableId:jI,type:"ITEM",direction:"vertical",ignoreContainerClipping:!0,isDropDisabled:ne,children:B=>{const q=ie;return g.jsx("div",{ref:B.innerRef,...B.droppableProps,className:"mb-6",children:g.jsxs("ul",{className:"flex flex-col gap-2",children:[q.map((V,H)=>Z(V,H)),B.placeholder]})})}}),g.jsx(sl,{droppableId:"folders:root",type:"FOLDER",direction:"vertical",ignoreContainerClipping:!0,isDropDisabled:ne,children:B=>g.jsxs("div",{ref:B.innerRef,...B.droppableProps,children:[P.map((q,V)=>{const H=NI(q),X=Se[q]||[],W=!!x[q],he=!!y[q];return g.jsx(Ec,{draggableId:`folder-${q}`,index:V,isDragDisabled:ne,children:se=>g.jsxs("div",{ref:se.innerRef,...se.draggableProps,...se.dragHandleProps,className:"mb-4 cursor-grab active:cursor-grabbing select-none",children:[g.jsxs("div",{className:`flex items-center justify-between px-2 py-2 rounded
                                         bg-neutral-50 dark:bg-neutral-900/70
                                         border border-neutral-200 dark:border-neutral-800
                                         text-neutral-800 dark:text-neutral-200`,children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("button",{type:"button",onClick:ve=>{ve.stopPropagation(),S(ke=>({...ke,[q]:!W}))},className:"inline-flex items-center gap-1 text-sm font-semibold cursor-pointer",children:[W?g.jsx(Q8,{size:16}):g.jsx(X8,{size:16}),g.jsx("span",{className:"text-sm font-semibold",children:q})]}),g.jsx("button",{type:"button",onClick:ve=>{ve.stopPropagation(),_(ke=>({...ke,[q]:!ke[q]}))},className:`p-1 rounded cursor-pointer ${he?"text-yellow-400":"text-neutral-400"} hover:text-yellow-400`,children:g.jsx(l2,{size:16,fill:he?"currentColor":"none"})})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("span",{className:"opacity-60 text-xs",children:[X.length,""]}),g.jsx("button",{type:"button",onClick:ve=>{if(ve.stopPropagation(),y[q]){alert(`'${q}'    .
   .`);return}confirm(`'${q}'  ?
(   )`)&&(z(q),d2())},className:`px-2 py-1 rounded text-xs cursor-pointer
                                             border border-red-300 dark:border-red-700
                                             text-red-700 dark:text-red-300
                                             hover:bg-red-50 dark:hover:bg-red-900/30`,children:""})]})]}),W&&g.jsx(sl,{droppableId:H,type:"ITEM",direction:"vertical",ignoreContainerClipping:!0,isDropDisabled:ne,children:ve=>g.jsx("div",{ref:ve.innerRef,...ve.droppableProps,className:"mt-2",children:g.jsxs("ul",{className:"flex flex-col gap-2",children:[X.map((ke,je)=>Z(ke,je)),ve.placeholder]})})})]})},`folder-${q}`)}),B.placeholder]})})]})})]})]})}const h2="ms_folders",tb="w-full rounded p-2 border transition-colors duration-200 bg-white text-neutral-900 placeholder-neutral-400 border-neutral-300 focus:outline-none focus:ring-2 focus:ring-violet-500 focus:border-transparent dark:bg-neutral-900 dark:text-neutral-100 dark:placeholder-neutral-500 dark:border-neutral-700 dark:focus:ring-violet-400",CI="w-full rounded p-2 border transition-colors duration-200 bg-white text-neutral-900 border-neutral-300 focus:outline-none focus:ring-2 focus:ring-violet-500 focus:border-transparent dark:bg-neutral-900 dark:text-neutral-100 dark:border-neutral-700 dark:focus:ring-violet-400",RI="w-full rounded p-2 border min-h-28 transition-colors duration-200 bg-white text-neutral-900 placeholder-neutral-400 border-neutral-300 focus:outline-none focus:ring-2 focus:ring-violet-500 focus:border-transparent dark:bg-neutral-900 dark:text-neutral-100 dark:placeholder-neutral-500 dark:border-neutral-700 dark:focus:ring-violet-400",Ws="block text-sm mb-1 font-medium text-neutral-800 dark:text-neutral-200",LI="text-xs text-neutral-500 dark:text-neutral-400",Df="accent-violet-600 dark:accent-violet-400",f2="accent-violet-600 dark:accent-violet-400",tp="px-3 py-1.5 rounded text-sm font-medium transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-neutral-900",BI=`${tp} bg-amber-600 text-white hover:bg-amber-500 dark:bg-amber-600 dark:hover:bg-amber-500 cursor-pointer`,PI=`${tp} bg-red-600 text-white hover:bg-red-500 dark:bg-red-600 dark:hover:bg-red-500 cursor-pointer`,m2=`${tp} bg-neutral-800 text-white hover:bg-neutral-700 dark:bg-neutral-700 dark:hover:bg-neutral-600 cursor-pointer`,$I=`${tp} bg-green-600 text-white hover:bg-green-500 dark:bg-green-600 dark:hover:bg-green-500 cursor-pointer`;function II({item:e,onClose:t}){const{list:n,update:i,remove:o}=ss(),[l,u]=R.useState(!1),[f,m]=R.useState({...e,calendarType:e.calendarType??"solar"}),[p,y]=R.useState(!e.birthTime||e.birthTime===""),[_,x]=R.useState(!e.birthPlace||e.birthPlace.name===""),S=R.useMemo(()=>["","","","","",""],[]),[T,k]=R.useState([]);R.useEffect(()=>{try{const D=JSON.parse(localStorage.getItem(h2)||"[]");Array.isArray(D)&&k(D)}catch{}},[]);const j=R.useMemo(()=>{const D=Array.from(new Set(n.map(F=>F.folder).filter(Boolean))),$=new Set([...S,...T,...D]),z=Array.from($).sort((F,K)=>F.localeCompare(K));return[pn,...z]},[n,T,S]),C=()=>{m({...e,calendarType:e.calendarType??"solar"}),y(!e.birthTime||e.birthTime===""),x(!e.birthPlace||e.birthPlace.name==="")},P=()=>{if(!f.name||f.name.trim()==="")return" .";if(!f.birthDay||!/^\d{8}$/.test(f.birthDay))return" YYYYMMDD  .";const D=Number(f.birthDay.slice(0,4)),$=Number(f.birthDay.slice(4,6)),z=Number(f.birthDay.slice(6,8));if(f.calendarType==="lunar")try{br(D,$,z)}catch(F){return F instanceof Error?F.message:"   ."}else{const F=new Date(D,$-1,z);if(F.getFullYear()!==D||F.getMonth()+1!==$||F.getDate()!==z)return"   ."}if(!p){if(!f.birthTime||!/^\d{4}$/.test(f.birthTime))return"  00002359 (4) .";const F=Number(f.birthTime.slice(0,2)),K=Number(f.birthTime.slice(2,4));if(F<0||F>23||K<0||K>59)return"  00002359  ."}return!_&&!f.birthPlace?"   '' .":null},N=()=>{const D=P();if(D){alert(D);return}const $=Number(f.birthDay.slice(0,4)),z=Number(f.birthDay.slice(4,6)),F=Number(f.birthDay.slice(6,8));let K=$,oe=z,Q=F;if(f.calendarType==="lunar"){const W=br($,z,F);K=W.getFullYear(),oe=W.getMonth()+1,Q=W.getDate()}const Y=p?4:Number((f.birthTime??"0430").slice(0,2)),ne=p?30:Number((f.birthTime??"0430").slice(2,4)),ie=_||!f.birthPlace||f.birthPlace.lon===0?127.5:f.birthPlace.lon,Se=new Date(K,oe-1,Q,Y,ne,0,0),J=!f.birthPlace||typeof f.birthPlace=="object"&&f.birthPlace.name==="",le=ul(Se,ie,J),be=ut(le,ie).charAt(0),G=((W,he)=>{const ve=["","","","","","","","","",""].includes(W),ke=(he??"")==="";return ve?ke?"forward":"backward":ke?"backward":"forward"})(be,f.gender??""),B=al(f.folder===pn?void 0:f.folder),q={...e,name:(f.name??"").trim()||"",birthDay:f.birthDay,birthTime:p?"":f.birthTime??"0430",gender:f.gender??"",birthPlace:_?{name:"",lat:0,lon:127.5}:f.birthPlace??{name:"",lat:0,lon:127.5},relationship:f.relationship??"",memo:f.memo??"",folder:B,calendarType:f.calendarType??"solar",mingSikType:f.mingSikType??"/",DayChangeRule:(f.mingSikType??"/")===""?"":"",dir:G,corrected:le,correctedLocal:"",ganji:""},{correctedLocal:V,ganji:H}=Gm(q),X={...q,correctedLocal:V,ganji:H};if(X.folder&&!S.includes(X.folder)&&!T.includes(X.folder)){const W=[...T,X.folder];k(W),localStorage.setItem(h2,JSON.stringify(W))}i(e.id,X),u(!1),t&&t()},M=()=>{confirm(`'${e.name}'  ?`)&&o(e.id)};return l?g.jsxs("div",{className:"space-y-4 max-h-[calc(90dvh_-_40px)] overflow-auto transition-colors duration-200 bg-white text-neutral-900 dark:bg-neutral-950 dark:text-neutral-100 p-4 rounded-xl",children:[g.jsx("h3",{className:"text-lg font-bold",children:" "}),g.jsxs("div",{children:[g.jsx("label",{className:Ws,children:""}),g.jsx("input",{className:tb,value:f.name||"",onChange:D=>m({...f,name:D.target.value}),placeholder:""})]}),g.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[g.jsxs("div",{children:[g.jsx("label",{className:Ws,children:" (YYYYMMDD)"}),g.jsx("input",{className:tb,value:f.birthDay||"",onChange:D=>m({...f,birthDay:D.target.value.replace(/\D/g,"").slice(0,8)}),inputMode:"numeric",maxLength:8,placeholder:": 19900101"}),g.jsxs("div",{className:"flex gap-4 mt-2 items-center justify-between",children:[g.jsxs("div",{className:"flex gap-4",children:[g.jsxs("span",{className:"inline-flex items-center gap-1",children:[g.jsx("input",{type:"radio",className:Df,name:"calendarType",checked:f.calendarType==="solar",onChange:()=>m({...f,calendarType:"solar"}),id:"editor_calendar_solar"}),g.jsx("label",{htmlFor:"editor_calendar_solar",className:"inline-flex items-center gap-1 text-sm text-neutral-800 dark:text-neutral-200 cursor-pointer",children:""})]}),g.jsxs("span",{className:"inline-flex items-center gap-1",children:[g.jsx("input",{type:"radio",className:Df,name:"calendarType",checked:f.calendarType==="lunar",onChange:()=>m({...f,calendarType:"lunar"}),id:"editor_calendar_lunar"}),g.jsx("label",{htmlFor:"editor_calendar_lunar",className:"inline-flex items-center gap-1 text-sm text-neutral-800 dark:text-neutral-200 cursor-pointer",children:""})]})]}),f.calendarType==="lunar"&&f.birthDay?.length===8&&g.jsx("span",{className:LI,children:(()=>{try{const D=Number(f.birthDay.slice(0,4)),$=Number(f.birthDay.slice(4,6)),z=Number(f.birthDay.slice(6,8)),F=br(D,$,z);return`  ${F.getFullYear()}-${String(F.getMonth()+1).padStart(2,"0")}-${String(F.getDate()).padStart(2,"0")}`}catch(D){const $=D instanceof Error?D.message:void 0;return`  ${$?`: ${$}`:""}`}})()})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:Ws,children:"  (HHMM)"}),g.jsx("input",{className:`${tb} disabled:opacity-50`,value:p?"":f.birthTime||"",onChange:D=>m({...f,birthTime:D.target.value.replace(/\D/g,"").slice(0,4)}),inputMode:"numeric",maxLength:4,placeholder:": 1524",disabled:p}),g.jsxs("div",{className:"mt-1 text-sm flex items-center gap-2",children:[g.jsx("input",{type:"checkbox",className:f2,checked:p,onChange:D=>y(D.target.checked),id:"editor_birthTimeX"}),g.jsx("label",{htmlFor:"editor_birthTimeX",className:"text-neutral-800 dark:text-neutral-200 cursor-pointer",children:""})]})]})]}),g.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[g.jsxs("div",{children:[g.jsx("label",{className:Ws,children:" "}),g.jsx("div",{className:"flex gap-4 text-sm",children:["","/",""].map(D=>{const $=`editor_ming_${D}`;return g.jsxs("span",{className:"inline-flex items-center gap-1",children:[g.jsx("input",{type:"radio",className:Df,name:"mingSikType",checked:(f.mingSikType??"")===D,onChange:()=>m({...f,mingSikType:D}),id:$}),g.jsx("label",{htmlFor:$,className:"text-neutral-800 dark:text-neutral-200 cursor-pointer",children:D})]},D)})})]}),g.jsxs("div",{children:[g.jsx("label",{className:Ws,children:""}),g.jsx("div",{className:"flex gap-4 text-sm",children:["",""].map(D=>{const $=`editor_gender_${D}`;return g.jsxs("span",{className:"inline-flex items-center gap-1",children:[g.jsx("input",{type:"radio",className:Df,name:"gender",value:D,checked:f.gender===D,onChange:z=>m({...f,gender:z.target.value}),id:$}),g.jsx("label",{htmlFor:$,className:"text-neutral-800 dark:text-neutral-200 cursor-pointer",children:D})]},D)})})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:Ws,children:" "}),g.jsx(gT,{onSelect:D=>m({...f,birthPlace:D}),value:_?"":f.birthPlace?.name??""}),g.jsxs("div",{className:"mt-1 text-sm flex items-center gap-2",children:[g.jsx("input",{type:"checkbox",className:f2,checked:_,onChange:D=>x(D.target.checked),id:"editor_birthPlaceX"}),g.jsx("label",{htmlFor:"editor_birthPlaceX",className:"text-neutral-800 dark:text-neutral-200 cursor-pointer",children:""})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:Ws,children:""}),g.jsx(jk,{value:f.relationship||"",onChange:D=>m({...f,relationship:D})})]}),g.jsxs("div",{children:[g.jsx("label",{className:Ws,children:""}),g.jsx("select",{className:CI,value:f.folder??pn,onChange:D=>{const $=D.target.value;m($===pn?{...f,folder:void 0}:{...f,folder:$})},children:j.map(D=>g.jsx("option",{value:D===pn?pn:D,children:D},D))})]}),g.jsxs("div",{children:[g.jsx("label",{className:Ws,children:""}),g.jsx("textarea",{className:RI,value:f.memo||"",onChange:D=>m({...f,memo:D.target.value}),placeholder:" "})]}),g.jsxs("div",{className:"flex gap-2 justify-end",children:[g.jsx("button",{className:m2,onClick:()=>{C(),u(!1)},children:""}),g.jsx("button",{className:$I,onClick:N,children:""})]})]}):g.jsxs("div",{className:"p-4 space-y-3 transition-colors duration-200 bg-white text-neutral-900 dark:bg-neutral-950 dark:text-neutral-100",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("h3",{className:"text-lg font-bold",children:[" ",e.name," "]}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("button",{className:BI,onClick:()=>u(!0),children:""}),g.jsx("button",{className:PI,onClick:M,children:""}),t&&g.jsx("button",{className:m2,onClick:t,children:""})]})]}),g.jsxs("div",{className:"text-sm text-neutral-700 dark:text-neutral-300",children:[g.jsxs("div",{children:[": ",e.gender]}),g.jsxs("div",{children:["/: ",e.birthDay," ",e.birthTime===""?"( )":e.birthTime,","," ",e.calendarType==="lunar"?"":""]}),g.jsxs("div",{children:[": ",e.correctedLocal||"-"]}),g.jsxs("div",{children:[": ",e.birthPlace?.name||"-"]}),g.jsxs("div",{children:[": ",e.relationship||"-"]}),g.jsxs("div",{children:[": ",e.folder??pn]})]}),e.ganji&&g.jsx("div",{className:"text-sm text-red-500 whitespace-pre-wrap",children:e.ganji}),e.memo&&g.jsxs("div",{className:"text-sm whitespace-pre-wrap text-neutral-800 dark:text-neutral-200",children:[g.jsx("p",{className:"mb-1 font-semibold",children:""}),e.memo]})]})}function zI({pillarsA:e,pillarsB:t}){const n=JP(e,t);return g.jsxs("div",{className:"rounded-xl p-4 bg-neutral-100 dark:bg-neutral-900 text-neutral-900 dark:text-neutral-100 space-y-2",children:[g.jsx("div",{className:"text-sm font-bold mb-3",children:"   "}),Object.entries(n).map(([i,o])=>o.length>0?g.jsxs("div",{className:"flex gap-2 text-xs",children:[g.jsx("span",{className:"shrink-0 w-20 text-xs font-semibold text-neutral-700 dark:text-neutral-400 mt-1",children:i}),g.jsx("div",{className:"flex flex-wrap gap-2",children:o.map((l,u)=>g.jsx("span",{className:"text-xs px-2 py-1 rounded-full border whitespace-nowrap bg-violet-100 text-violet-800 border-violet-200 dark:bg-violet-900/30 dark:text-violet-200 dark:border-violet-800",children:l},u))})]},i):null)]})}function UI(e){return typeof e=="object"&&e!==null}const HI=["","","","","","","","","","","","","","","","","","","",""],GI=["","","","","","","","","","","","","","","","","","","","","","","",""],FI=new Set(HI),YI=new Set(GI);function p2(e){return typeof e=="string"&&e.length>=2&&FI.has(e[0])&&YI.has(e[1])}function cn(e,...t){if(p2(e))return e;for(const n of t)if(p2(n))return n;return""}function Mf(e,t){let n=null;const i=t.getTime();for(const o of e)if(o.at.getTime()<=i)n=o;else break;return n}function qI(e){const t=n=>String(n).padStart(2,"0");return`${e.getFullYear()}-${t(e.getMonth()+1)}-${t(e.getDate())}T${t(e.getHours())}:${t(e.getMinutes())}`}function g2(e){if(!e)return null;const t=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2})$/.exec(e);if(!t)return null;const[,n,i,o,l,u]=t,f=new Date(+n,+i-1,+o,+l,+u);return Number.isNaN(f.getTime())?null:f}function wm(e){const t=e;return typeof t.name=="string"&&t.name?t.name:typeof t.title=="string"&&t.title?t.title:typeof t.memo=="string"&&t.memo?t.memo:" "}function ZI(e){const t=Number(e.birthDay.slice(0,4)),n=Number(e.birthDay.slice(4,6)),i=Number(e.birthDay.slice(6,8));let o=0,l=0;const u=e;return typeof u.birthTime=="string"&&u.birthTime.length>=4&&(o=Number(u.birthTime.slice(0,2)),l=Number(u.birthTime.slice(2,4))),{y:t,m:n,d:i,hh:o,mm:l}}function np(e){const{y:t,m:n,d:i}=ZI(e),o=e.corrected.getHours(),l=e.corrected.getMinutes();return e.calendarType==="lunar"?br(t,n,i,o,l):new Date(t,n-1,i,o,l)}function VI(e){const t=np(e);return`${wm(e)}-${t.toISOString()}`}function Hu(e){const t=e;return typeof t.id=="string"&&t.id?t.id:VI(e)}function KI(e){return UI(e)&&("Classic"in e||"Modern"in e||"classic"in e||"modern"in e)}function WI(e){const t=dl;return KI(t)?e==="classic"?t.Classic:t.Modern:e}const nb="people_picker_order_v1";function XI(e,t,n){const i=e.slice(),[o]=i.splice(t,1);return i.splice(n,0,o),i}function b2({open:e,list:t,onSelect:n,onClose:i}){const[o,l]=R.useState("");R.useEffect(()=>{e||l("")},[e]);const u=R.useMemo(()=>t.map(Hu),[t]),f=R.useMemo(()=>new Set(u),[u]),[m,p]=R.useState([]);R.useEffect(()=>{const k=localStorage.getItem(nb),j=k?JSON.parse(k):[],C=j.filter(N=>f.has(N)),P=[...C,...u.filter(N=>!C.includes(N))];p(P),JSON.stringify(P)!==JSON.stringify(j)&&localStorage.setItem(nb,JSON.stringify(P))},[u,f]);const y=k=>{p(k),localStorage.setItem(nb,JSON.stringify(k))},_=R.useMemo(()=>{const k=new Map(t.map(C=>[Hu(C),C])),j=[];for(const C of m){const P=k.get(C);P&&j.push(P)}return k.forEach((C,P)=>{m.includes(P)||j.push(C)}),j},[t,m]),x=R.useMemo(()=>{const k=o.trim().toLowerCase();return k?_.filter(j=>wm(j).toLowerCase().includes(k)):_},[_,o]),S=o.trim()==="",T=k=>{const{destination:j,source:C}=k;if(!j||!S||j.index===C.index)return;const P=x.map(Hu),N=XI(P,C.index,j.index),D=_.map(Hu).filter(z=>!P.includes(z)),$=[...N,...D].filter((z,F,K)=>K.indexOf(z)===F);y($)};return g.jsxs(g.Fragment,{children:[g.jsx("style",{children:"[data-rbd-drag-handle-context-id]{touch-action:none!important}"}),g.jsx("div",{className:`fixed inset-0 bg-black/60 transition-opacity duration-200 z-[1000] ${e?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,onClick:i}),g.jsxs("div",{className:`fixed bottom-0 inset-x-0 mx-auto w-full max-w-[640px] max-h-[80dvh] bg-white dark:bg-neutral-950 rounded-t-2xl border border-neutral-200 dark:border-neutral-800 p-4 overflow-auto transition-transform duration-300 z-[1001] ${e?"translate-y-0":"translate-y-full"}`,children:[g.jsxs("div",{className:"flex items-center justify-between mb-3",children:[g.jsx("h3",{className:"text-sm font-semibold text-neutral-900 dark:text-neutral-200",children:" "}),g.jsx("button",{onClick:i,className:"text-neutral-500 hover:text-neutral-900 dark:text-neutral-400 dark:hover:text-white text-sm cursor-pointer",children:""})]}),g.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[g.jsx("input",{placeholder:" ",value:o,onChange:k=>l(k.target.value),className:"flex-1 px-3 py-2 rounded bg-white dark:bg-neutral-900 border border-neutral-300 dark:border-neutral-700 text-sm text-neutral-900 dark:text-neutral-100"}),!S&&g.jsx("span",{className:"text-[11px] text-neutral-500 dark:text-neutral-400 whitespace-nowrap",children:"    "})]}),g.jsx(Sd,{onDragEnd:T,children:g.jsx(sl,{droppableId:"peopleList",children:k=>g.jsxs("ul",{ref:k.innerRef,...k.droppableProps,className:"flex flex-col gap-2 max-h-[60vh] overflow-y-auto",children:[x.map((j,C)=>{const P=String(Hu(j)),N=np(j);return g.jsx(Ec,{draggableId:P,index:C,children:M=>g.jsx("li",{ref:M.innerRef,...M.draggableProps,...M.dragHandleProps,onClick:()=>n(j),className:"w-full text-left p-3 rounded border bg-white dark:bg-neutral-900 border-neutral-300 dark:border-neutral-800 cursor-grab select-none active:cursor-grabbing",children:g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:"mr-2 select-none",children:""}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsx("div",{className:"text-neutral-900 dark:text-neutral-50 text-sm truncate",children:wm(j)}),g.jsx("div",{className:"text-neutral-500 dark:text-neutral-400 text-xs",children:ed(N)})]})]})})},P)}),k.placeholder]})})})]})]})}function rb({label:e,gzHour:t,gzDay:n,gzMonth:i,gzYear:o,dayStem:l,cardSettings:u,sinsalBaseBranch:f,sinsalMode:m,sinsalBloom:p}){const y=k=>{const j=u.showSibiUnseong?Jt(l,k):"",C=u.showSibiSinsal?Qt({baseBranch:f,targetBranch:k,era:WI(m),gaehwa:!!p}):"";return{unseongText:j||void 0,shinsalText:C||void 0}},_=cn(t).charAt(1),x=cn(n).charAt(1),S=cn(i).charAt(1),T=cn(o).charAt(1);return g.jsxs("div",{className:"rounded-lg border bg-white dark:bg-neutral-900 border-neutral-200 dark:border-neutral-800 py-2 desk:p-2",children:[g.jsx("div",{className:"px-2 py-1 text-xs text-neutral-600 dark:text-neutral-300",children:e}),g.jsx("div",{className:"grid grid-cols-4 gap-1 text-neutral-900 dark:text-white",children:[["",cn(t),_],["",cn(n),x],["",cn(i),S],["",cn(o),T]].map(([k,j,C])=>{const{unseongText:P,shinsalText:N}=y(C);return g.jsx(uc,{label:k,gz:j,dayStem:l,settings:Wn.getState().settings,unseongText:P,shinsalText:N,hideBranchSipSin:!0,size:"sm"},`${e}-${k}`)})})]})}function JI(e){if(!e)return"";const t=e,n=f=>typeof t[f]=="string"?String(t[f]).trim().toLowerCase():null,i=f=>typeof t[f]=="boolean"?t[f]:null,o=[n("gender"),n("sex"),n("genderType"),n(""),n("sexType"),n("g")].filter(f=>!!f);for(const f of o){if(["","","male","m","boy","man"].includes(f))return"";if(["","","female","f","girl","woman"].includes(f))return""}const l=i("isMale"),u=i("isFemale");return l===!0?"":u===!0?"":""}function sc({label:e,data:t,mode:n,effectiveDate:i,onPick:o}){const l=Wn(D=>D.settings),u=R.useMemo(()=>t?np(t):null,[t]),f=cn(u?$i(u,"/"):void 0),m=cn(u?_t(u,"/"):void 0),p=cn(u?jt(u):void 0),y=cn(u?ut(u):void 0),_=R.useMemo(()=>m.charAt(0)||"",[m]),x=u,S=R.useMemo(()=>{const D=t?.birthPlace;return!D||D.name===""||!D.lon?127.5:D.lon},[t]),T=t?.mingSikType??"/",k=R.useMemo(()=>{const D=x?_t(x,T).charAt(1):m.charAt(1)||"",$=x?ut(x,S).charAt(1):y.charAt(1)||"";return(l.sinsalBase??"")===""?D:$},[l.sinsalBase,x,T,S,m,y]),j=R.useMemo(()=>{if(n!==""||!u||!t)return null;try{const D=Pk(u,f,t.dir,120,t.mingSikType),$=Ik(D,m,t.dir,t.DayChangeRule),z=Ed(u,p,t.dir,120,t?.birthPlace?.lon??127.5),F=zk(z,y,t.dir,t.DayChangeRule,u),K=i;return{si:cn(Mf(D.events,K)?.gz,f),il:cn(Mf($.events,K)?.gz,m),wl:cn(Mf(z.events,K)?.gz,p),yn:cn(Mf(F.events,K)?.gz,y)}}catch{return null}},[n,u,f,m,p,y,i,t]),C=R.useMemo(()=>{if(n!=="")return null;const D=i;return{si:cn($i(D,"/")),il:cn(_t(D,"/")),wl:cn(jt(D)),yn:cn(ut(D))}},[n,i]),P=t?wm(t):"",N=u?ed(u):"",M=t?JI(t):"";return t?g.jsxs("div",{className:"space-y-2",children:[g.jsx("button",{onClick:o,className:"px-3 py-1 rounded text-xs bg-neutral-900 dark:bg-white text-white dark:text-neutral-900 border border-neutral-900 dark:border-white hover:opacity-90 cursor-pointer",title:" ",children:" "}),g.jsxs("div",{className:"text-[11px] text-neutral-600 dark:text-neutral-300",children:[g.jsx("span",{className:"font-semibold text-neutral-900 dark:text-neutral-200",children:e}),g.jsx("span",{className:"ml-2 text-neutral-900 dark:text-neutral-50",children:P}),M&&g.jsxs("span",{className:"ml-1 text-neutral-500 dark:text-neutral-400",children:[" ",M]}),N&&g.jsx("span",{className:"block desk:inline-block mt-1 text-neutral-500 dark:text-neutral-400 text-[10px]",children:N})]}),n===""&&g.jsx(rb,{label:"",gzHour:f,gzDay:m,gzMonth:p,gzYear:y,dayStem:_,cardSettings:l,sinsalBaseBranch:k,sinsalMode:l.sinsalMode,sinsalBloom:!!l.sinsalBloom}),n===""&&j&&g.jsx(rb,{label:"",gzHour:j.si,gzDay:j.il,gzMonth:j.wl,gzYear:j.yn,dayStem:_,cardSettings:l,sinsalBaseBranch:k,sinsalMode:l.sinsalMode,sinsalBloom:!!l.sinsalBloom}),n===""&&C&&g.jsx(rb,{label:"",gzHour:C.si,gzDay:C.il,gzMonth:C.wl,gzYear:C.yn,dayStem:_,cardSettings:l,sinsalBaseBranch:k,sinsalMode:l.sinsalMode,sinsalBloom:!!l.sinsalBloom})]}):g.jsx("div",{className:"flex items-center justify-center h-48 rounded-lg border border-dashed bg-white dark:bg-neutral-900 border-neutral-300 dark:border-neutral-700",children:g.jsx("button",{onClick:o,className:"px-3 py-2 rounded bg-neutral-900 dark:bg-white text-white dark:text-neutral-900 text-sm hover:opacity-90 cursor-pointer",children:" "})})}function QI({people:e=[]}){const[t,n]=R.useState(),[i,o]=R.useState(),[l,u]=R.useState(!1),[f,m]=R.useState(!1),p=R.useRef(new Date),[y,_]=R.useState(()=>qI(p.current)),x=R.useRef(g2(y)??p.current),S=R.useMemo(()=>{const N=g2(y);return N&&(x.current=N),x.current},[y]),[T,k]=R.useState(!1),[j,C]=R.useState(!1);function P(N){if(!N)return["","","",""];try{const M=np(N),D={hour:cn($i(M,"/")),day:cn(_t(M,"/")),month:cn(jt(M)),year:cn(ut(M))};return[D.year,D.month,D.day,D.hour]}catch{return["","","",""]}}return g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"w-[96%] max-w-[640px] mx-auto bg-white dark:bg-neutral-950 text-neutral-900 dark:text-neutral-100 rounded-xl shadow border border-neutral-200 dark:border-neutral-800 px-2 py-4 desk:p-4",children:[g.jsxs("header",{className:"flex gap-3 justify-between items-center mb-4",children:[g.jsx("div",{className:"font-semibold text-sm text-neutral-900 dark:text-neutral-200",children:" "}),g.jsxs("div",{className:"flex items-center gap-4 text-xs text-neutral-600 dark:text-neutral-400",children:[g.jsxs("label",{className:"flex items-center gap-1 cursor-pointer",children:[g.jsx("input",{type:"checkbox",checked:l,onChange:N=>u(N.target.checked),className:"accent-indigo-500"})," "]}),g.jsx("button",{onClick:()=>m(N=>!N),className:"px-2 py-1 rounded border border-neutral-300 dark:border-neutral-700 hover:border-indigo-500 text-neutral-700 dark:text-neutral-300 bg-white dark:bg-neutral-900 cursor-pointer",children:f?"  ":"  "})]})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-2 desk:gap-4",children:[g.jsx(sc,{label:" A",data:t,mode:"",effectiveDate:S,onPick:()=>k(!0)}),g.jsx(sc,{label:" B",data:i,mode:"",effectiveDate:S,onPick:()=>C(!0)}),l&&t&&g.jsx(sc,{label:" A",data:t,mode:"",effectiveDate:S,onPick:()=>k(!0)}),l&&i&&g.jsx(sc,{label:" B",data:i,mode:"",effectiveDate:S,onPick:()=>C(!0)}),f&&t&&g.jsx(sc,{label:" A",data:t,mode:"",effectiveDate:S,onPick:()=>k(!0)}),f&&i&&g.jsx(sc,{label:" B",data:i,mode:"",effectiveDate:S,onPick:()=>C(!0)})]}),t&&i&&g.jsx("div",{className:"mt-4",children:g.jsx(zI,{pillarsA:P(t),pillarsB:P(i)})}),g.jsxs("div",{className:"mt-4 max-w-[260px] mx-auto text-center",children:[g.jsx("label",{className:"min-w-0 block text-xs text-neutral-600 dark:text-neutral-400 mb-2",children:"/ "}),g.jsx("input",{type:"datetime-local",value:y,onChange:N=>_(N.target.value),className:"min-w-0 bg-white dark:bg-neutral-900 border border-neutral-300 dark:border-neutral-700 rounded px-3 py-1 text-xs w-[260px] max-w-[260px] box-border overflow-x-hidden text-neutral-900 dark:text-neutral-100 h-30",min:"1900-01-01T00:00",max:"2100-12-31T23:59"})]})]}),g.jsx(b2,{open:T,list:e||[],onSelect:N=>{n(N),k(!1)},onClose:()=>k(!1)}),g.jsx(b2,{open:j,list:e||[],onSelect:N=>{o(N),C(!1)},onClose:()=>C(!1)})]})}function ez(){const[e,t]=R.useState(!1),[n,i]=R.useState(!1),o=async()=>{try{const{data:{user:l}}=await kt.auth.getUser();if(!l){alert("  .");return}const u=l.id;await kt.from("profiles").delete().eq("id",u),await kt.from("myeongsik").delete().eq("user_id",u),await kt.auth.admin.deleteUser(u),await kt.auth.signOut(),alert(" ."),window.location.href="/"}catch(l){console.error(l),alert("   .")}};return g.jsxs(g.Fragment,{children:[g.jsxs("footer",{className:"py-8 px-4 border-t border-neutral-200 dark:border-neutral-700",children:[g.jsx("div",{className:"text-center text-[12px] text-orange-600 dark:text-orange-300",children:"Copyright  2025 Hwarim96. All rights reserved."}),g.jsxs("div",{className:"flex flex-col items-center gap-2 mt-3",children:[g.jsx("button",{onClick:()=>t(!0),className:"text-[12px] text-neutral-500 dark:text-neutral-300 underline cursor-pointer hover:text-orange-500 transition",children:" "}),g.jsx("button",{onClick:()=>i(!0),className:"text-[12px] text-red-500 underline hover:text-red-400 transition cursor-pointer",children:""})]})]}),e&&g.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:()=>t(!1),children:g.jsxs("div",{className:"w-full max-w-lg bg-white dark:bg-neutral-900 text-neutral-900 dark:text-neutral-200 p-6 rounded-xl shadow-xl relative animate-fadeInUp",onClick:l=>l.stopPropagation(),children:[g.jsx("h2",{className:"text-lg font-bold mb-4",children:" "}),g.jsxs("div",{className:"text-sm leading-relaxed max-h-[60vh] overflow-y-auto pr-2",children:[g.jsx("p",{className:"mb-2",children:"( )     ,      ."}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"1.  "}),g.jsx("p",{className:"mb-2",children:"   ,  (,  )        ( ,  )"}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"2.  "}),g.jsx("p",{className:"mb-2",children:"                   "}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"3.  "}),g.jsx("p",{className:"mb-2",children:"                 "}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"4. 3 "}),g.jsx("p",{className:"mb-2",children:"          ."}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"5. "}),g.jsx("p",{className:"mb-2",children:" Supabase        ."}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"6. "}),g.jsx("p",{children:"   : unique950318@gmail.com"})]}),g.jsx("button",{onClick:()=>t(!1),className:"cursor-pointer mt-4 w-full py-2 bg-neutral-900 dark:bg-neutral-700 text-white rounded-lg hover:bg-neutral-800 transition",children:""})]})}),n&&g.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:()=>i(!1),children:g.jsxs("div",{className:"w-full max-w-sm bg-white dark:bg-neutral-900 text-neutral-900 dark:text-neutral-200 p-6 rounded-xl shadow-xl relative animate-fadeInUp",onClick:l=>l.stopPropagation(),children:[g.jsx("h2",{className:"text-lg font-bold mb-4 text-red-500",children:" ?"}),g.jsxs("p",{className:"text-sm leading-relaxed mb-6",children:["         .",g.jsx("br",{}),"    ."]}),g.jsxs("div",{className:"flex gap-3",children:[g.jsx("button",{onClick:()=>i(!1),className:"cursor-pointer flex-1 py-2 bg-neutral-300 dark:bg-neutral-700 text-black dark:text-white rounded-lg hover:bg-neutral-400 transition",children:""}),g.jsx("button",{onClick:o,className:"cursor-pointer flex-1 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition",children:""})]})]})})]})}function tz({ms:e}){const{date:t,setDate:n}=fi();R.useEffect(()=>{n(new Date)},[e]);const i=Iy(e),o=R.useMemo(()=>{const f=t??new Date,m=f.getFullYear(),p=String(f.getMonth()+1).padStart(2,"0"),y=String(f.getDate()).padStart(2,"0");return`${m}-${p}-${y}`},[t]),l=f=>{if(!f)return;const[m,p,y]=f.split("-"),_=Number(m),x=Number(p),S=Number(y);if(!Number.isFinite(_)||!Number.isFinite(x)||!Number.isFinite(S))return;const T=t??new Date,k=T.getHours(),j=T.getMinutes(),C=new Date(_,x,0).getDate(),P=Math.min(S,C),N=new Date(_,x-1,P,k,j,0,0);Number.isNaN(N.getTime())||n(N)},u=R.useMemo(()=>{const f=e.ganji,m=i?.dae?.gz?`${i.dae.gz}`:null,p=i?.se?.gz?`${i.se.gz}`:null,y=i?.wol?.gz?`${i.wol.gz}`:null,_=[m,p,y].filter(Boolean).join(" ");return[f,_].filter(Boolean).join(" + ")},[e,i]);return g.jsxs("div",{className:"max-w-[640px] mx-auto mb-4 rounded-xl border border-neutral-200 dark:border-neutral-800 bg-white dark:bg-neutral-950 p-3 space-y-3",children:[u&&g.jsx("div",{className:"text-center text-sm font-medium text-neutral-800 dark:text-neutral-200",children:u}),g.jsx("div",{className:"grid grid-cols-1 gap-3",children:g.jsxs("label",{className:"w-full flex justify-center items-center",children:[g.jsx("span",{className:"text-sm text-neutral-500 mr-4",children:""}),g.jsx("input",{type:"date",value:o,onChange:f=>l(f.target.value),min:"1900-01-01",max:"2100-12-31",className:"w rounded-md border border-neutral-300 dark:border-neutral-700 bg-transparent px-2 py-1 text-sm"})]})})]})}const nz=["23:0000:59","01:0002:59","03:0004:59","05:0006:59","07:0008:59","09:0010:59","11:0012:59","13:0014:59","15:0016:59","17:0018:59","19:0020:59","21:0022:59"];function rz(e){const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()).padStart(2,"0");return`${t}-${n}-${i}`}function Cf(e,t){return e&&t?`${e}${t}`:null}function y2(e){return!!(e.yearStem&&e.yearBranch&&e.monthStem&&e.monthBranch&&e.dayStem&&e.dayBranch&&e.hourStem&&e.hourBranch)}const iz={:0,:1,:2,:3,:4,:5,:6,:7,:8,:9},sz=Bi.,az=["","","","","","","","","","","",""];function v2(e,t){let n;e===""||e===""?n="":e===""||e===""?n="":e===""||e===""?n="":e===""||e===""?n="":n="";const i=iz[n],o=az.indexOf(t),l=(i+(o>=0?o:0))%10;return sz[l]}const oz=Bi..slice(),lz=["","","","","","","","","","","",""];function ac(e,t){const i=(t===""?z2:Jb)[e],o=t===""?oz:lz,l=Bi..reduce((u,f)=>(u[f]="",u),{});for(let u=0;u<12;u++)l[o[u]]=i[u];return l}const cz={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},uz={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};function dz({open:e,onClose:t,onSave:n}){const{settings:i}=Wn(),[o,l]=R.useState(null),[u,f]=R.useState({}),[m,p]=R.useState(null),[y,_]=R.useState(!0),[x,S]=R.useState(!0),[T,k]=R.useState(""),[j,C]=R.useState("male"),[P,N]=R.useState(null),[M,D]=R.useState(!1),[,$]=R.useState(null),[z,F]=R.useState(null),[K,oe]=R.useState({gender:"",mingSikType:"/",DayChangeRule:"",calendarType:"solar"}),[Q,Y]=R.useState(!1),[ne,ie]=R.useState(null),Se=fe=>{ie(fe),setTimeout(()=>ie(null),1800)},[J,le]=R.useState(!1),[te,be]=R.useState(!1);R.useEffect(()=>{if(J){const fe=setTimeout(()=>le(!1),2e3);return()=>clearTimeout(fe)}},[J]),R.useEffect(()=>{if(te){const fe=setTimeout(()=>be(!1),2e3);return()=>clearTimeout(fe)}},[te]);const Z=()=>{const fe=z!==null?P?.filter((Tn,Dn)=>Dn===z)??[]:[];if(fe.length===0){alert("  .");return}const Le=T===""?"/":"",ce=fe[0],[me,$e,He]=ce.date.split("-").map(Number),Be={:{hh:0,mi:0},:{hh:2,mi:0},:{hh:4,mi:0},:{hh:6,mi:0},:{hh:8,mi:0},:{hh:10,mi:0},:{hh:12,mi:0},:{hh:14,mi:0},:{hh:16,mi:0},:{hh:18,mi:0},:{hh:20,mi:0},:{hh:22,mi:0}};let tt=0,et=0;if(ce.hourSlots.length>0){const Tn=ce.hourSlots[0].branch,Dn=Be[Tn];Dn&&(tt=Dn.hh,et=Dn.mi)}const Zt=new Date(me,$e-1,He,tt,et),On=Zt,En="",lr=j==="male"?"":"";function vr(Tn,Dn){const Nr=["","","","","","","","","",""].includes(Tn),cr=Dn==="";return Nr?cr?"forward":"backward":cr?"backward":"forward"}const dn=vr(ce.year.charAt(0),lr),Ct=ut(On,127.5),bn=jt(On,127.5),hn=_t(On,Le),qr=$i(On,Le),ra=[` : ${Ct} ${bn} ${hn}`,qr?`${qr}`:null].filter(Boolean).join(" "),zi={id:pT(),name:"",birthDay:`${me}${String($e).padStart(2,"0")}${String(He).padStart(2,"0")}`,birthTime:`${String(tt).padStart(2,"0")}${String(et).padStart(2,"0")}`,gender:lr,birthPlace:Q?{name:"",lat:0,lon:127.5}:K.birthPlace??{name:"",lat:0,lon:127.5},relationship:K.relationship??"",memo:K.memo??"",folder:al(K.folder),mingSikType:K.mingSikType??"/",DayChangeRule:K.mingSikType===""?"":"",calendarType:K.calendarType??"solar",yearGZ:ce.year,monthGZ:ce.month,dayGZ:ce.day,hourGZ:ce.hour,ganjiText:` : ${ce.year} ${ce.month} ${ce.day} ${ce.hour}`,ganji:ra,dayStem:ce.day.charAt(0),dateObj:Zt,corrected:On,correctedLocal:En,dir:dn};Lm.flushSync(()=>{ss.getState().add(zi)}),n(zi),ie(" !"),oe({gender:"",mingSikType:"/",calendarType:"solar"}),Y(!1),t()},G=y||x,B=!!(u.yearStem&&u.yearBranch),q=!!(u.dayStem&&u.dayBranch),V=!G||B||q,H=!!m&&m.endsWith("Stem"),X=!!m&&m.endsWith("Branch");function W(fe){return fe==="yearStem"?"yearBranch":fe==="yearBranch"?"yearStem":fe==="monthStem"?"monthBranch":fe==="monthBranch"?"monthStem":fe==="dayStem"?"dayBranch":fe==="dayBranch"?"dayStem":fe==="hourStem"?"hourBranch":"hourStem"}const he=R.useCallback((fe,Le)=>{if(!y||!fe.yearStem)return fe;const ce={...fe},me=Jb[fe.yearStem];if(!me)return ce;const $e=Be=>me.filter(tt=>tt.startsWith(Be)),He=Be=>me.find(tt=>tt.endsWith(Be));if(Le==="monthStem"&&ce.monthStem){const Be=$e(ce.monthStem).map(tt=>tt.slice(1));return Be.length>=2?(l(Be.slice(0,2)),p("monthBranch"),ce):(Be.length===1&&(ce.monthBranch=Be[0],l(null)),ce)}if(Le==="monthBranch"&&ce.monthBranch){const Be=He(ce.monthBranch);return Be&&(ce.monthStem=Be.slice(0,1),l(null)),ce}if(Le==="yearStem"){if(ce.monthStem&&!ce.monthBranch){const Be=$e(ce.monthStem).map(tt=>tt.slice(1));if(Be.length>=2)return l(Be.slice(0,2)),p("monthBranch"),ce;Be.length===1&&(ce.monthBranch=Be[0])}else if(ce.monthBranch&&!ce.monthStem){const Be=He(ce.monthBranch);Be&&(ce.monthStem=Be.slice(0,1))}}return ce},[y,p]),se=R.useCallback((fe,Le)=>{if(!x||!fe.dayStem)return fe;const ce={...fe},me=ac(fe.dayStem,T),$e=Be=>Object.entries(me).find(([,tt])=>tt.startsWith(Be)),He=Be=>me[Be];if(Le==="hourStem"&&ce.hourStem){const Be=$e(ce.hourStem);return Be&&(ce.hourBranch=Be[0]),ce}if(Le==="hourBranch"&&ce.hourBranch){const Be=He(ce.hourBranch);return Be&&(ce.hourStem=Be.slice(0,1)),ce}if(Le==="dayStem"){if(ce.hourStem&&!ce.hourBranch){const Be=$e(ce.hourStem);Be&&(ce.hourBranch=Be[0])}else if(ce.hourBranch&&!ce.hourStem){const Be=He(ce.hourBranch);Be&&(ce.hourStem=Be.slice(0,1))}}return ce},[x,T]),ve=R.useCallback(fe=>!y||!fe.yearStem?!1:fe.monthBranch&&fe.monthStem?v2(fe.yearStem,fe.monthBranch)!==fe.monthStem:!1,[y]),ke=R.useCallback(fe=>{if(!x||!fe.dayStem)return!1;if(fe.hourBranch&&fe.hourStem){const ce=ac(fe.dayStem,T)[fe.hourBranch];return ce?ce.slice(0,1)!==fe.hourStem:!1}return!1},[x,T]);R.useEffect(()=>{if(!(!x||!u.dayStem||!u.hourBranch)&&(u.hourBranch===""||u.hourBranch==="")){const Le=ac(u.dayStem,T)[u.hourBranch];Le&&f(ce=>({...ce,hourStem:Le.slice(0,1)}))}},[T,x,u.dayStem,u.hourBranch]);const je=R.useCallback(fe=>{if(!m)return;if(!V&&!(m==="yearStem"||m==="yearBranch"||m==="dayStem"||m==="dayBranch")){$("/  :    ."),setTimeout(()=>$(null),1500);return}let ce={...u,[m]:fe};(m==="yearStem"||m==="monthStem"||m==="monthBranch")&&(ce=he(ce,m)),(m==="dayStem"||m==="hourStem"||m==="hourBranch")&&(ce=se(ce,m)),f(ce);let me=!1;ve(ce)&&(_(!1),me=!0),ke(ce)&&(S(!1),me=!0),me&&Se("/  .   ."),f(ce),N(null);const $e=W(m);p($e),setTimeout(()=>{const He={...ce};if(He.yearStem&&He.yearBranch&&!He.monthStem){p("monthStem");return}if(He.monthStem&&He.monthBranch&&!He.dayStem){p("dayStem");return}if(He.dayStem&&He.dayBranch&&!He.hourStem){p("hourStem");return}},0)},[m,u,V,he,se,ve,ke]),Me=y2(u),Ee=R.useCallback(async()=>{if(N(null),$(null),!y2(u)){$("   .");return}const fe=Cf(u.yearStem,u.yearBranch),Le=Cf(u.monthStem,u.monthBranch),ce=Cf(u.dayStem,u.dayBranch),me=Cf(u.hourStem,u.hourBranch),$e=300,He=[];D(!0);try{const Be=new Date(1900,0,1,12,0,0),tt=new Date(2100,11,31,12,0,0);for(let et=Be.getTime();et<=tt.getTime();et+=24*3600*1e3){const Zt=new Date(et),On=T===""?"/":"",En=ut(Zt);if(En!==fe)continue;const lr=jt(Zt);if(lr!==Le)continue;const vr=_t(Zt,On);if(vr!==ce)continue;const dn=ac(u.dayStem,T),Ct=[];for(let bn=0;bn<12;bn++){const hn=Bi.[bn];dn[hn]===me&&Ct.push({branch:hn,time:nz[bn]})}if(Ct.length!==0&&(He.push({date:rz(Zt),year:En,month:lr,day:vr,hour:me,hourSlots:Ct}),He.length>=$e))break}He.length===0&&$("  . (: 19002100)"),N(He)}catch(Be){Be instanceof Error?$(Be.message):$(String(Be))}finally{D(!1)}},[u,T]),Ie=()=>{f({}),N(null),$(null),p(null)},Pe=fe=>{N(null),fe&&f(Le=>{const ce={...Le};return ce.yearStem&&ce.monthBranch&&(ce.monthStem=v2(ce.yearStem,ce.monthBranch)),ce}),_(fe)},Ye=fe=>{N(null),fe&&f(Le=>{const ce={...Le};if(ce.dayStem&&ce.hourBranch){const $e=ac(ce.dayStem,T)[ce.hourBranch];$e&&(ce.hourStem=$e.slice(0,1))}return ce}),S(fe)};if(!e)return null;const Re=fe=>{if(N(null),k(fe),x&&u.dayStem&&u.hourBranch&&(u.hourBranch===""||u.hourBranch==="")){const ce=ac(u.dayStem,fe)[u.hourBranch];ce&&f(me=>({...me,hourStem:ce.slice(0,1)}))}};return g.jsx("div",{className:"fixed min-w-[320px] inset-0 z-[1000] flex items-center justify-center bg-black/50",children:g.jsxs("div",{className:"bg-white max-w-[360px] dark:bg-neutral-900 rounded-xl shadow-xl w-full max-w-5xl p-4 relative",children:[g.jsx("button",{onClick:t,className:"absolute top-3 right-3 text-neutral-500 hover:text-neutral-800 dark:hover:text-neutral-200 cursor-pointer","aria-label":"",children:g.jsx(CA,{size:20})}),g.jsx("h2",{className:"text-lg font-semibold mb-4",children:"  "}),g.jsxs("div",{className:"flex flex-wrap items-center gap-6 mb-4",children:[g.jsxs("div",{children:[g.jsx("p",{className:"font-medium mb-2",children:"/"}),g.jsxs("span",{className:"mr-3 chkContainer",children:[g.jsx("input",{type:"checkbox",id:"useWoldu",checked:y,onChange:fe=>Pe(fe.target.checked)}),g.jsx("label",{htmlFor:"useWoldu",className:"ml-1",children:" "})]}),g.jsxs("span",{className:"chkContainer",children:[g.jsx("input",{type:"checkbox",id:"useSidu",checked:x,onChange:fe=>Ye(fe.target.checked)}),g.jsx("label",{htmlFor:"useSidu",className:"ml-1",children:" "})]})]}),g.jsxs("div",{children:[g.jsx("p",{className:"font-medium mb-2",children:" "}),g.jsxs("span",{className:"mr-3 chkContainer",children:[g.jsx("input",{type:"radio",id:"jasi",checked:T==="",onChange:()=>Re("")}),g.jsx("label",{htmlFor:"jasi",className:"ml-1",children:""})]}),g.jsxs("span",{className:"chkContainer",children:[g.jsx("input",{type:"radio",id:"insi",checked:T==="",onChange:()=>Re("")}),g.jsx("label",{htmlFor:"insi",className:"ml-1",children:""})]})]}),g.jsxs("div",{children:[g.jsx("p",{className:"font-medium mb-2",children:""}),g.jsxs("span",{className:"mr-3 chkContainer",children:[g.jsx("input",{type:"radio",id:"male",checked:j==="male",onChange:()=>C("male")}),g.jsx("label",{htmlFor:"male",className:"ml-1",children:""})]}),g.jsxs("span",{className:"chkContainer",children:[g.jsx("input",{type:"radio",id:"female",checked:j==="female",onChange:()=>C("female")}),g.jsx("label",{htmlFor:"female",className:"ml-1",children:""})]})]})]}),G&&!V&&g.jsxs("div",{className:"mb-3 text-sm text-orange-700 bg-orange-50 dark:text-orange-300 dark:bg-orange-900/30 rounded p-2 text-center",children:["/  . ",g.jsx("br",{}),g.jsx("b",{children:""}),"  ",g.jsx("b",{children:""}),"  ."]}),g.jsx("div",{className:"grid grid-cols-4 gap-2 mb-4",children:[["hourStem",""],["dayStem",""],["monthStem",""],["yearStem",""],["hourBranch",""],["dayBranch",""],["monthBranch",""],["yearBranch",""]].map(([fe,Le])=>{const ce=!V&&!(fe==="yearStem"||fe==="yearBranch"||fe==="dayStem"||fe==="dayBranch"),me=m===fe;return g.jsxs("button",{onClick:()=>!ce&&p(fe),disabled:ce,className:["border rounded p-2 text-center cursor-pointer",me?"border-purple-500 bg-purple-100 dark:bg-purple-900/30":"border-neutral-300 dark:border-neutral-700",ce?"opacity-50 cursor-not-allowed":""].join(" "),children:[Le,g.jsx("br",{}),g.jsx("span",{className:"font-bold",children:u[fe]??"-"})]},fe)})}),o&&o.length>0&&g.jsxs("div",{className:"mb-3",children:[g.jsx("p",{className:"text-sm mb-1",children:"  :"}),g.jsx("div",{className:"flex gap-2",children:o.map(fe=>g.jsx("button",{onClick:()=>{let Le={...u,monthBranch:fe};l(null),Le=he(Le,"monthBranch"),f(Le),p("dayStem")},className:"flex-1 px-2 py-1 border rounded hover:bg-orange-100 dark:hover:bg-orange-800 cursor-pointer",children:fe},fe))})]}),g.jsx("div",{className:"flex w-full flex-wrap gap-6 mb-4",children:m?g.jsxs("div",{className:"w-full",children:[H&&g.jsxs("div",{children:[g.jsx("p",{className:"font-medium mb-2",children:""}),g.jsx("div",{className:"grid grid-cols-5 gap-2",children:Bi..map(fe=>g.jsx("button",{onClick:()=>je(fe),className:`border rounded px-2 py-1 cursor-pointer ${hi(fe,"stem",i)}`,children:fe},fe))})]}),X&&g.jsxs("div",{children:[g.jsx("p",{className:"font-medium mb-2",children:""}),g.jsx("div",{className:"grid grid-cols-6 gap-2",children:Bi..filter(fe=>{const Le=W(m),ce=u[Le];return ce?uz[fe]===cz[ce]:!0}).map(fe=>g.jsx("button",{onClick:()=>je(fe),className:`border rounded px-2 py-1 cursor-pointer ${hi(fe,"branch",i)}`,children:fe},fe))})]})]}):g.jsx("div",{className:"text-sm text-neutral-500 p-2 border rounded w-full text-center",children:"    ."})}),g.jsxs("div",{className:"flex justify-between items-center gap-3 mb-4",children:[g.jsx("span",{children:g.jsx("button",{type:"button",onClick:()=>{if(!Me){le(!0);return}Ee()},disabled:M,className:"px-2 py-1 rounded-md bg-blue-600 text-white disabled:opacity-50 cursor-pointer",children:M?" ...":""})}),g.jsxs("span",{className:"flex items-center gap-2",children:[g.jsx("button",{type:"button",onClick:Ie,className:"px-2 py-1 rounded-md bg-red-600 border border-neutral-300 dark:border-neutral-700 cursor-pointer",children:""}),g.jsx("button",{type:"button",onClick:()=>{if((z!==null?P?.filter((Le,ce)=>ce===z)??[]:[]).length===0){be(!0);return}Z()},className:"px-2 py-1 rounded-md border bg-yellow-600 border-neutral-300 dark:border-neutral-700 cursor-pointer",children:""})]})]}),g.jsx("div",{className:"max-h-[40vh] overflow-auto rounded border border-neutral-200 dark:border-neutral-800",children:P?P.length===0?g.jsx("div",{className:"p-4 text-neutral-500",children:"  ."}):g.jsxs("table",{className:"w-full text-xs",children:[g.jsx("thead",{className:"sticky top-0 bg-neutral-50 dark:bg-neutral-800",children:g.jsxs("tr",{children:[g.jsx("th",{className:"p-1 text-center",children:""}),g.jsx("th",{className:"p-1 text-center",children:""}),g.jsx("th",{className:"p-1 text-center",children:""}),g.jsx("th",{className:"p-1 text-center",children:""}),g.jsx("th",{className:"p-1 text-center",children:""}),g.jsx("th",{className:"p-1 text-center",children:""}),g.jsx("th",{className:"p-1 text-center",children:""})]})}),g.jsx("tbody",{children:P.map((fe,Le)=>g.jsxs("tr",{className:"border-t border-neutral-200 dark:border-neutral-800",children:[g.jsx("td",{className:"p-1 text-center",children:g.jsxs("span",{className:"chkContainer",children:[g.jsx("input",{type:"radio",name:"selectRow",id:`selectRow-${Le}`,checked:z===Le,onChange:()=>F(Le)}),g.jsx("label",{htmlFor:`selectRow-${Le}`,children:"ON"})]})}),g.jsx("td",{className:"p-1 text-center",children:fe.date}),g.jsx("td",{className:"p-1 text-center",children:fe.year}),g.jsx("td",{className:"p-1 text-center",children:fe.month}),g.jsx("td",{className:"p-1 text-center",children:fe.day}),g.jsx("td",{className:"p-1 text-center",children:g.jsx("div",{className:"flex flex-wrap gap-1",children:fe.hourSlots.map((ce,me)=>g.jsx("span",{className:"inline-flex items-center mx-auto gap-1 px-1 py-0.5 rounded bg-neutral-100 dark:bg-neutral-800 border border-neutral-200 dark:border-neutral-700",children:g.jsx("b",{children:ce.branch})},me))})}),g.jsx("td",{className:"p-1 text-center",children:j==="male"?"":""})]},`${fe.date}-${Le}`))})]}):g.jsx("div",{className:"p-2 text-neutral-500 text-sm text-center",children:"   ."})}),ne&&g.jsx("div",{className:"pointer-events-none fixed left-1/2 -translate-x-1/2 top-6 z-[1100] border border-white/30",children:g.jsx("div",{className:"px-4 py-2 rounded-md bg-black/80 text-white text-sm shadow-lg",children:ne})}),J&&g.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-[2000]",children:g.jsx("div",{className:"bg-black text-white px-4 py-2 rounded-lg shadow-lg",children:" 4  ."})}),te&&g.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-[2000]",children:g.jsxs("div",{className:"bg-black text-white px-4 py-2 rounded-lg shadow-lg text-center",children:[" .",g.jsx("br",{})," ,  ."]})})]})})}const LA=bd(e=>({shinsalBase:"",shinsalEra:"",shinsalGaehwa:!1,hiddenStemMode:"hgc",setShinsalBase:t=>e({shinsalBase:t}),setShinsalEra:t=>e({shinsalEra:t}),setShinsalGaehwa:t=>e({shinsalGaehwa:t}),setHiddenStemMode:t=>e({hiddenStemMode:t})}));function Sm(e){if(!e)return["","","",""];let t=Number(e.birthDay?.slice(0,4)??2e3),n=Number(e.birthDay?.slice(4,6)??1),i=Number(e.birthDay?.slice(6,8)??1);if(e.calendarType==="lunar"){const N=br(t,n,i);t=N.getFullYear(),n=N.getMonth()+1,i=N.getDate()}const o=!e.birthTime||e.birthTime==="",l=o?4:Number(e.birthTime.slice(0,2)),u=o?30:Number(e.birthTime.slice(2,4)),f=new Date(t,n-1,i,l,u,0,0),m=!e.birthPlace||e.birthPlace.name===""||!e.birthPlace.lon?127.5:e.birthPlace.lon,p=ul(f,m,o),y=e.mingSikType??"/",_=ut(p,m),x=jt(p,m),S=_t(p,y),T=o?null:$i(p,y),k=Ge(_),j=Ge(x),C=Ge(S),P=T?Ge(T):"";return[k,j,C,P]}function BA(e){const t=new Date(e.corrected),n=Sm(e),i=n[0].charAt(0),l=["","","","",""].includes(i),u=e.gender==="",f=u&&l||!u&&!l?"forward":"backward",m=Ed(t,n[1],f,120,e.birthPlace?.lon??127.5),p=m.firstChange;if(!p)return[];const y=[];let _=Ge(m.events[0]?.gz??n[1]);for(let x=0;x<10;x++){const S=new Date(p);if(S.setFullYear(S.getFullYear()+x*10),x>0){const T=m.events[x];T&&(_=Ge(T.gz))}y.push(`${S.getFullYear()} ${String(S.getMonth()+1).padStart(2,"0")} ${_}  `)}return y}const hz=!1,_2=e=>e<10?`0${e}`:`${e}`;function PA(e){const t=e,n=typeof t.birthDay=="string"?t.birthDay:"",i=typeof t.calendarType=="string"?t.calendarType:"solar";if(n.length<8)return e;const o=Number(n.slice(0,4)),l=Number(n.slice(4,6)),u=Number(n.slice(6,8));if(i==="lunar")try{const f=br(o,l,u,0,0),m=`${f.getFullYear()}${_2(f.getMonth()+1)}${_2(f.getDate())}`;return{...e,birthDay:m,calendarType:"solar"}}catch{return e}return e}const Vu={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Ku={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},md={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Rf={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},fz=["","","","",""];function x2(e){return fz.includes(e)}const $A={:"",:"",:"",:"",:""},IA={:"",:"",:"",:"",:""},zA={:"",:"",:"",:"",:""},UA={:"",:"",:"",:"",:""};function Yb(e){if(!e)return null;const t=e.trim();if(["","","","","","","","","",""].includes(t))return t;if(Vu[t])return Vu[t];if(["","","","","","","","","","","",""].includes(t))return Rf[t]??null;if(Ku[t])return Rf[Ku[t]]??null;const n=t.charAt(0);return Vu[n]?Vu[n]:["","","","","","","","","",""].includes(n)?n:Ku[n]?Rf[Ku[n]]??null:["","","","","","","","","","","",""].includes(n)?Rf[n]??null:null}function mz(e,t){const n=md[e],i=md[t];if(!n||!i)return"";let o;i===n?o="":i===$A[n]?o="":i===IA[n]?o="":i===zA[n]?o="":i===UA[n]?o="":o="";const l=x2(e)===x2(t);switch(o){case"":return l?"":"";case"":return l?"":"";case"":return l?"":"";case"":return l?"":"";case"":return l?"":""}}function HA(e){const t=Object.entries(e),n=t.reduce((p,[,y])=>p+(y>0?y:0),0);if(n<=0)return Object.fromEntries(t.map(([p])=>[p,0]));const i=t.map(([p,y])=>[p,(y>0?y:0)*100/n]),o=i.map(([p,y])=>[p,Math.floor(y)]);let l=o.reduce((p,[,y])=>p+y,0);const u=i.map(([p,y])=>[p,y-Math.floor(y)]).sort((p,y)=>y[1]-p[1]),f=Object.fromEntries(o.map(([p,y])=>[p,y]));let m=0;for(;l<100&&m<u.length;)f[u[m][0]]+=1,l+=1,m+=1;return f}function pz(e){const t={};for(const[n,i]of Object.entries(e??{})){if(i<=0)continue;const o=Yb(n);o&&(t[o]=(t[o]??0)+i)}return t}function gz(e){if(!e)return[];const t=Yb(e.charAt(0)),n=Yb(e.charAt(1));return[t,n].filter(Boolean)}function Lf(e){const t=gz(e),n={};for(const i of t)n[i]=(n[i]??0)+1;return n}function ai(e,t){return t===e?"":t===$A[e]?"":t===IA[e]?"":t===zA[e]?"":t===UA[e]?"":""}const bz={:{name:"",element:"",brief:"  ",keywords:" "},:{name:"",element:"",brief:"  ",keywords:" "},:{name:"",element:"",brief:"  ",keywords:" "},:{name:"",element:"",brief:"  ",keywords:" "},:{name:"",element:"",brief:"  ",keywords:""},:{name:"",element:"",brief:"  ",keywords:""},:{name:"",element:"",brief:" ",keywords:"/"},:{name:"",element:"",brief:" ",keywords:"/"},:{name:"",element:"",brief:" ",keywords:""},:{name:"",element:"",brief:" ",keywords:""},:{name:"",element:"",brief:" ()",keywords:""},:{name:"",element:"",brief:" ()",keywords:""},:{name:"",element:"",brief:"  ",keywords:" "},:{name:"",element:"",brief:"  ",keywords:" "},:{name:"",element:"",brief:" ",keywords:"/"},:{name:"",element:"",brief:" ",keywords:"/"},:{name:"",element:"",brief:"   ",keywords:"  "},:{name:"",element:"",brief:"   ",keywords:"  "},:{name:"",element:"",brief:"",keywords:""},:{name:"",element:"",brief:"",keywords:""},:{name:"",element:"",brief:"/ ",keywords:""},:{name:"",element:"",brief:"/ ",keywords:""},:{name:"",element:"",brief:"  ",keywords:"  /"},:{name:"",element:"",brief:"  ",keywords:"  /"},:{name:"",element:"",brief:"",keywords:"/"},:{name:"",element:"",brief:"",keywords:"/"},:{name:"",element:"",brief:"",keywords:""},:{name:"",element:"",brief:"",keywords:""},:{name:"",element:"",brief:"  ",keywords:""},:{name:"",element:"",brief:"  ",keywords:""},:{name:"",element:"",brief:" ",keywords:"/ "},:{name:"",element:"",brief:" ",keywords:"/ "},:{name:"",element:"",brief:"  ",keywords:"/"},:{name:"",element:"",brief:"  ",keywords:"/"},:{name:"",element:"",brief:" ",keywords:" "},:{name:"",element:"",brief:" ",keywords:" "},:{name:"",element:"",brief:"  ()",keywords:"/"},:{name:"",element:"",brief:"  ()",keywords:"/"},:{name:"",element:"",brief:"()",keywords:" "},:{name:"",element:"",brief:"()",keywords:" "},:{name:"",element:"",brief:"( )",keywords:" "},:{name:"",element:"",brief:"( )",keywords:" "},:{name:"",element:"",brief:" ()",keywords:"  "},:{name:"",element:"",brief:" ()",keywords:"  "},:{name:"",element:"",brief:"/ ",keywords:" "},:{name:"",element:"",brief:"/ ",keywords:" "},:{name:"",element:"",brief:" ",keywords:"/"},:{name:"",element:"",brief:" ",keywords:"/"},:{name:"",element:"",brief:"",keywords:""},:{name:"",element:"",brief:"",keywords:""},:{name:"",element:"",brief:"  ",keywords:" "},:{name:"",element:"",brief:"  ",keywords:" "},:{name:"",element:"",brief:"",keywords:" "},:{name:"",element:"",brief:"",keywords:" "},:{name:"",element:"",brief:" ()",keywords:""},:{name:"",element:"",brief:" ()",keywords:""},:{name:"",element:"",brief:"",keywords:""},:{name:"",element:"",brief:"",keywords:""},:{name:"",element:"",brief:"  ",keywords:"/"},:{name:"",element:"",brief:"  ",keywords:"/"}};function yz(e){if(!e||e.length<2)return e;const t=e.charAt(0),n=e.charAt(1),i=Vu[t]??t,o=Ku[n]??n;return`${i}${o}`}function ar(e){const t=yz(e),n=bz[t];return n?{...n,code:t}:null}function vz(e){const t={:0,:0,:0,:0,:0};for(const[n,i]of Object.entries(e)){const o=md[n];o&&(t[o]+=i)}return t}function _z(e,t){const n={:0,:0,:0,:0,:0,:0,:0,:0,:0,:0};for(const[i,o]of Object.entries(e)){if(o<=0)continue;const l=mz(t,i);n[l]+=o}return n}function xz(e){return{:e.+e.,:e.+e.,:e.+e.,:e.+e.,:e.+e.}}const wz={natal:50,dae:30,se:20,wol:7,il:3};function Sz(e){const t={};for(const{kind:i,bare:o}of e){const l=wz[i]??0;if(l<=0)continue;const u=HA(o);for(const[f,m]of Object.entries(u))t[f]=(t[f]??0)+m*l}const n=Object.values(t).reduce((i,o)=>i+o,0);if(n>0)for(const i of Object.keys(t))t[i]=t[i]/n*100;return t}function es(e,t,n){const i=pz(e.perStemElementScaled),o=t!==""&&n?.dae?Lf(n.dae):{},l=(t===""||t===""||t==="")&&n?.se?Lf(n.se):{},u=(t===""||t==="")&&n?.wol?Lf(n.wol):{},f=t===""&&n?.il?Lf(n.il):{},m=Sz([{kind:"natal",bare:i},{kind:"dae",bare:o},{kind:"se",bare:l},{kind:"wol",bare:u},{kind:"il",bare:f}]),p=HA(m),y=vz(p),_=_z(p,e.dayStem),x=xz(_);return{perStemAugBare:p,elementPercent:y,totalsSub:_,totalsMain:x}}function Ez(e,t){return e[3]&&e[3]!==""?["","","",!t.birthTime||t.birthTime===""?"()":""]:["","",""]}const ib=e=>typeof e=="object"&&e!==null&&!Array.isArray(e),qb=e=>{if(Array.isArray(e)){const t=e.map(qb).filter(n=>!(n==null||Array.isArray(n)&&n.length===0||ib(n)&&Object.keys(n).length===0));return t.length>0?t:void 0}if(ib(e)){const t={};for(const[n,i]of Object.entries(e)){const o=qb(i);o!==void 0&&(Array.isArray(o)&&o.length===0||ib(o)&&Object.keys(o).length===0||(t[n]=o))}return Object.keys(t).length>0?t:void 0}if(e!=null)return e},Tz=e=>{const t=qb(e);return t===void 0?"":typeof t=="string"||typeof t=="number"||typeof t=="boolean"?String(t):["```json",JSON.stringify(t,null,2),"```"].join(`
`)},si=(e,t)=>{const n=Tz(t);return n?`## ${e}
${n}`:""};function kz(e){const{ms:t,natal:n,chain:i,basis:o,tab:l,unified:u,percent:f,category:m,topic:p,subTopic:y,relationMode:_,teacherMode:x}=e,S=[Ge(n[0]??""),Ge(n[1]??""),Ge(n[2]??""),Ge(n[3]??"")],T=BA(t).slice(0,10),k=gr({natal:S,daewoon:l!==""?i?.dae??void 0:void 0,sewoon:l===""||l===""||l===""?i?.se??void 0:void 0,wolwoon:l===""||l===""?i?.wol??void 0:void 0,ilwoon:l===""?i?.il??void 0:void 0}),j=Gr({natal:S,daewoon:l!==""?i?.dae??void 0:void 0,sewoon:l===""||l===""||l===""?i?.se??void 0:void 0,wolwoon:l===""||l===""?i?.wol??void 0:void 0,ilwoon:l===""?i?.il??void 0:void 0}),{shinsalEra:C,shinsalGaehwa:P,shinsalBase:N}=LA.getState(),M=N===""?S[0]?.charAt(1)??"":S[2]?.charAt(1)??"",D=es(u,l,i),$=D.elementPercent,z=D.totalsSub,{flags:F}=wA(S,u.elementScoreRaw),K=`${m} (${f.toFixed(1)}%)  ${[` ${F..||F..||F..||F..?"":""}`,` ${F..||F..||F..||F..?"":""}`,` ${F..||F..?"":""}`].join(", ")}`,oe=!t.birthTime||t.birthTime==="";function Q(B){const V=PA(B).birthDay??"",H=V.slice(0,4),X=V.slice(4,6),W=V.slice(6,8);let he="";if(B.corrected instanceof Date&&!isNaN(B.corrected.getTime())){const se=String(B.corrected.getHours()).padStart(2,"0"),ve=String(B.corrected.getMinutes()).padStart(2,"0");he=oe?"":`${se}:${ve}`}return`${H} ${X} ${W}  ${he}`}function Y(B,q){if(!q)return"()";const V=[];return(B===""||B===""||B===""||B==="")&&q.dae&&V.push(`:${Ge(q.dae)}`),(B===""||B===""||B==="")&&q.se&&V.push(`:${Ge(q.se)}`),(B===""||B==="")&&q.wol&&V.push(`:${Ge(q.wol)}`),B===""&&q.il&&V.push(`:${Ge(q.il)}`),V.length>0?V.join(" / "):"()"}const ne=Ez(S,t),ie=u.dayStem,Se=md[ie],J=[` : ${t.name??""} (${Q(t)}) : ${t.gender}`,` ${S[0]} ${S[1]} ${S[2]}`+(S[3]?` ${S[3]}${!t.birthTime||t.birthTime===""?"()":""}`:""),`: ${Y(l,i)}`].join(`
`),le=[];if(le.push(si("  (10)",T)),le.push(si("",K)),le.push(si("(  )",Object.fromEntries(Object.entries(u.natalFixed.elementPercent100).map(([B,q])=>[`${B}(${ai(Se,B)})`,q])))),l!==""&&le.push(si(`(=${l})`,Object.fromEntries(Object.entries($).map(([B,q])=>[`${B}(${ai(Se,B)})`,q])))),le.push(si(" ( 10 100)",u.natalFixed.totalsSub)),l!==""&&le.push(si(` ( 10=${l} 100)`,z)),le.push(si("(+ )",l===""?S.map((B,q)=>!B||q>=ne.length?null:{pos:ne[q],gz:B,unseong:Jt(S[2]?.charAt(0)??"",B.charAt(1))}).filter(Boolean):[...S.map((B,q)=>!B||q>=ne.length?null:{pos:ne[q],gz:B,unseong:Jt(S[2]?.charAt(0)??"",B.charAt(1))}).filter(Boolean),...i?.dae?[{pos:"",gz:i.dae,unseong:Jt(S[2]?.charAt(0)??"",i.dae.charAt(1))}]:[],...(l===""||l===""||l==="")&&i?.se?[{pos:"",gz:i.se,unseong:Jt(S[2]?.charAt(0)??"",i.se.charAt(1))}]:[],...(l===""||l==="")&&i?.wol?[{pos:"",gz:i.wol,unseong:Jt(S[2]?.charAt(0)??"",i.wol.charAt(1))}]:[],...l===""&&i?.il?[{pos:"",gz:i.il,unseong:Jt(S[2]?.charAt(0)??"",i.il.charAt(1))}]:[]].filter(Boolean))),le.push(si("(+  )",l===""?S.map((B,q)=>!B||q>=ne.length?null:{pos:ne[q],gz:B,shinsal:Qt({baseBranch:M,targetBranch:B.charAt(1),era:C,gaehwa:P})}).filter(Boolean):[...S.map((B,q)=>!B||q>=ne.length?null:{pos:ne[q],gz:B,shinsal:Qt({baseBranch:M,targetBranch:B.charAt(1),era:C,gaehwa:P})}).filter(Boolean),...i?.dae?[{pos:"",gz:i.dae,shinsal:Qt({baseBranch:M,targetBranch:i.dae.charAt(1),era:C,gaehwa:P})}]:[],...(l===""||l===""||l==="")&&i?.se?[{pos:"",gz:i.se,shinsal:Qt({baseBranch:M,targetBranch:i.se.charAt(1),era:C,gaehwa:P})}]:[],...(l===""||l==="")&&i?.wol?[{pos:"",gz:i.wol,shinsal:Qt({baseBranch:M,targetBranch:i.wol.charAt(1),era:C,gaehwa:P})}]:[],...l===""&&i?.il?[{pos:"",gz:i.il,shinsal:Qt({baseBranch:M,targetBranch:i.il.charAt(1),era:C,gaehwa:P})}]:[]].filter(Boolean))),le.push(si("(+ )",l===""?S.map((B,q)=>{if(!B||q>=ne.length)return null;const V=ar(B);return V?{pos:ne[q],gz:B,nabeum:V.name,element:V.element,code:V.code}:{pos:ne[q],gz:B,nabeum:null}}).filter(Boolean):[...S.map((B,q)=>{if(!B||q>=ne.length)return null;const V=ar(B);return V?{pos:ne[q],gz:B,nabeum:V.name,element:V.element,code:V.code}:{pos:ne[q],gz:B,nabeum:null}}).filter(Boolean),...i?.dae?(()=>{const B=ar(i.dae);return B?[{pos:"",gz:i.dae,nabeum:B.name,element:B.element,code:B.code}]:[]})():[],...(l===""||l===""||l==="")&&i?.se?(()=>{const B=ar(i.se);return B?[{pos:"",gz:i.se,nabeum:B.name,element:B.element,code:B.code}]:[]})():[],...(l===""||l==="")&&i?.wol?(()=>{const B=ar(i.wol);return B?[{pos:"",gz:i.wol,nabeum:B.name,element:B.element,code:B.code}]:[]})():[],...l===""&&i?.il?(()=>{const B=ar(i.il);return B?[{pos:"",gz:i.il,nabeum:B.name,element:B.element,code:B.code}]:[]})():[]].filter(Boolean))),le.push(si("()",Qy(S.filter((B,q)=>q<ne.length)))),le.push(si("( :  )",k)),l===""){const B=Gr({natal:S,daewoon:null,sewoon:null,wolwoon:null,ilwoon:null,basis:o});le.push(si("( )",{good:B.good,bad:B.bad,meta:B.meta}))}else le.push(si(`( =${l})`,j));const te=le.filter(B=>B&&B.trim().length>0).join(`

`),be=ZA({topic:p,subTopic:y,timeMode:"single",tab:l,relationMode:_,teacherMode:x}),Z=["-----","  ","","1.       (////)  .","2.  ,        ."];be&&Z.push("","  ( )",be);const G=Z.join(`
`);return[J,te,G].join(`

`)}function Az(e,t){return e[3]&&e[3]!==""?["","","",!t.birthTime||t.birthTime===""?"()":""]:["","",""]}const jz=e=>typeof e=="object"&&e!==null&&!Array.isArray(e);function iv(e){return new Date(e.startYear,(e.startMonth??1)-1,e.startDay??1)}function GA(e,t){const n=e[t],i=e[t+1];return i?iv(i):new Date(n.endYear+1,0,1)}function FA(e,t,n,i){return e<i&&t>n}function YA(e,t,n){const i=new Date(t,0,1),o=new Date(n+1,0,1),l=[];for(let u=0;u<e.length;u++){const f=e[u],m=iv(f),p=GA(e,u);FA(m,p,i,o)&&(l.some(y=>y.gz===f.gz&&y.startYear===f.startYear)||l.push(f))}return l}function w2(e,t){return YA(e,t,t)}function Bf(e,t,n){const i=new Date(t,n-1,1),o=new Date(t,n,1),l=[];for(let u=0;u<e.length;u++){const f=e[u],m=iv(f),p=GA(e,u);FA(m,p,i,o)&&(l.some(y=>y.gz===f.gz&&y.startYear===f.startYear)||l.push(f))}return l}function qA(e){const t=315569259747e-1,o=Date.UTC(1900,1,4,7,15,0)+(e-1900)*t+3*t/24,l=new Date(o);return new Date(l.getTime()+540*60*1e3)}function Pf(e,t){const n=[],i=new Date(e,t-1,15,0,0,0),o=new Date(e,t,1,15,0,0),l=qA(e),u=ut(new Date(e-1,5,15)),f=ut(new Date(e,5,15)),m=ut(new Date(e+1,5,15));if(o<=l)u&&n.push(Ge(u));else if(i>=l)f&&n.push(Ge(f));else if(u&&n.push(Ge(u)),f){const p=Ge(f);n.includes(p)||n.push(p)}if(t===12&&m){const p=Ge(m);n.includes(p)||n.push(p)}return n}function Nz(e,t){const n=qA(e),i=new Date(e,t-1,1),o=[];return i<n&&o.push(e-1),i>=n&&o.push(e),t===12&&o.push(e+1),o}const ws=(e,t)=>{if(!e)return{};const n=t,i=f=>{if(!f)return;const m={};for(const[p,y]of Object.entries(f)){if(!Array.isArray(y))continue;const _=y.filter(x=>typeof x=="string"&&x.includes(n));_.length>0&&(m[p]=_)}if(Object.keys(m).length!==0)return m},o=i(e.good),l=i(e.bad),u={};return o&&(u.good=o),l&&(u.bad=l),u};function Zb(e){if(e!=null){if(Array.isArray(e)){const t=e.map(n=>Zb(n)).filter(n=>n!==void 0);return t.length>0?t:void 0}if(jz(e)){const t={};for(const[n,i]of Object.entries(e)){const o=Zb(i);o!==void 0&&(t[n]=o)}return Object.keys(t).length>0?t:void 0}return e}}const Oz=e=>e==null?"":typeof e=="string"?e:JSON.stringify(e,null,2),Vn=(e,t)=>{const n=Zb(t);if(n===void 0)return"";const i=Oz(n);return i.trim()?`## ${e}
${i}`:""},Xs=(e,t)=>{const n={};if(!e||typeof e!="object")return n;for(const[i,o]of Object.entries(e)){if(!Array.isArray(o))continue;const l=Array.from(new Set(o.filter(u=>typeof u=="string"&&u.includes(t))));l.length>0&&(n[i]=l)}return n};function Dz(e){const{ms:t,natal:n,basis:i,unified:o,percent:l,category:u,selectedDaeList:f,daeList:m,seYears:p,wolMonths:y,ilDays:_,topic:x,subTopic:S,teacherMode:T}=e,k=[Ge(n[0]??""),Ge(n[1]??""),Ge(n[2]??""),Ge(n[3]??"")],j=!t.birthTime||t.birthTime==="",C=Az(k,t),P=o.dayStem,N=md[P],{shinsalEra:M,shinsalGaehwa:D,shinsalBase:$}=LA.getState(),z=$===""?k[0]?.charAt(1)??"":k[2]?.charAt(1)??"",{flags:F}=wA(k,o.elementScoreRaw),K=`${u} (${l.toFixed(1)}%)  ${[` ${F..||F..||F..||F..?"":""}`,` ${F..||F..||F..||F..?"":""}`,` ${F..||F..?"":""}`].join(", ")}`;function oe(te){const Z=PA(te).birthDay??"",G=Z.slice(0,4),B=Z.slice(4,6),q=Z.slice(6,8);let V="";if(te.corrected instanceof Date&&!isNaN(te.corrected.getTime())){const H=String(te.corrected.getHours()).padStart(2,"0"),X=String(te.corrected.getMinutes()).padStart(2,"0");V=j?"":`${H}:${X}`}return`${G} ${B} ${q}  ${V}`}const Q=[` : ${t.name??""} (${oe(t)}) : ${t.gender}`,` ${k[0]} ${k[1]} ${k[2]}`+(k[3]?` ${k[3]}${!t.birthTime||t.birthTime===""?"()":""}`:"")].join(`
`),Y=[];Y.push(Vn("",K)),Y.push(Vn("()",Object.fromEntries(Object.entries(o.natalFixed.elementPercent100).map(([te,be])=>[`${te}(${ai(N,te)})`,be])))),Y.push(Vn(" ( 10 100)",o.natalFixed.totalsSub)),Y.push(Vn("()",Qy(k.filter((te,be)=>be<C.length))));const ne=Gr({natal:k,daewoon:null,sewoon:null,wolwoon:null,ilwoon:null,basis:i});if(Y.push(Vn("()",{good:ne.good,bad:ne.bad,meta:ne.meta})),Y.push(Vn("()",k.map((te,be)=>{if(!te||be>=C.length)return null;const Z=ar(te);return Z?{pos:C[be],gz:te,nabeum:Z.name,element:Z.element,code:Z.code}:{pos:C[be],gz:te,nabeum:null}}).filter(Boolean))),Y.push(Vn("()",k.map((te,be)=>!te||be>=C.length?null:{pos:C[be],gz:te,unseong:Jt(k[2]?.charAt(0)??"",te.charAt(1))}).filter(Boolean))),Y.push(Vn("()",k.map((te,be)=>!te||be>=C.length?null:{pos:C[be],gz:te,shinsal:Qt({baseBranch:z,targetBranch:te.charAt(1),era:M,gaehwa:D})}).filter(Boolean))),m.length>0)for(const te of f){const be={dae:te.gz,se:null,wol:null,il:null},Z=es(o,"",be),G=gr({natal:k,daewoon:te.gz,sewoon:void 0,wolwoon:void 0,ilwoon:void 0}),B=Gr({natal:k,daewoon:te.gz,sewoon:void 0,wolwoon:void 0,ilwoon:void 0,basis:i}),q=ar(te.gz),V=Jt(k[2]?.charAt(0)??"",te.gz.charAt(1)),H=Qt({baseBranch:z,targetBranch:te.gz.charAt(1),era:M,gaehwa:D});Y.push(Vn(`${te.age} ${te.gz} (${te.startYear}~${te.endYear})`,{:Object.fromEntries(Object.entries(Z.elementPercent).map(([X,W])=>[`${X}(${ai(N,X)})`,W])),:Z.totalsSub,:G,:ws(B,""),:q?{gz:te.gz,nabeum:q.name,element:q.element,code:q.code}:null,:{pos:"",gz:te.gz,unseong:V},:{pos:"",gz:te.gz,shinsal:H}}))}if(p.length>0){const te=p[0],be=p[p.length-1],Z=YA(m,te,be);if(Z.length>0){const G=te,B=ut(new Date(G,5,15)),q=Ge(B||""),V={:Z.map(H=>{const X={dae:H.gz,se:q||null,wol:null,il:null},W=es(o,"",X),he=gr({natal:k,daewoon:H.gz,sewoon:q||void 0,wolwoon:void 0,ilwoon:void 0}),se=Gr({natal:k,daewoon:H.gz,sewoon:q||void 0,wolwoon:void 0,ilwoon:void 0,basis:i}),ve=ar(H.gz),ke=Jt(k[2]?.charAt(0)??"",H.gz.charAt(1)),je=Qt({baseBranch:z,targetBranch:H.gz.charAt(1),era:M,gaehwa:D});return{:`${H.age} ${H.gz} (${H.startYear}~${H.endYear})`,:H.gz,:Object.fromEntries(Object.entries(W.elementPercent).map(([Me,Ee])=>[`${Me}(${ai(N,Me)})`,Ee])),:W.totalsSub,:Xs(he,""),:ws(se,""),:ve?{gz:H.gz,nabeum:ve.name,element:ve.element,code:ve.code}:null,:{pos:"",gz:H.gz,unseong:ke},:{pos:"",gz:H.gz,shinsal:je}}})};Y.push(Vn("",V))}for(const G of p){const B=ut(new Date(G,5,15)),q=w2(m,G),V=q.length>0?q[0]:null,H={dae:V?V.gz:null,se:Ge(B||""),wol:null,il:null},X=es(o,"",H),W=gr({natal:k,daewoon:V?.gz,sewoon:Ge(B||""),wolwoon:void 0,ilwoon:void 0}),he=Gr({natal:k,daewoon:V?.gz,sewoon:Ge(B||""),wolwoon:void 0,ilwoon:void 0,basis:i}),se=ar(Ge(B||"")),ve=Jt(k[2]?.charAt(0)??"",(B||"").charAt(1)),ke=Qt({baseBranch:z,targetBranch:(B||"").charAt(1),era:M,gaehwa:D}),je={:{:`${G} ${Ge(B||"")}`,:Ge(B||""),:Object.fromEntries(Object.entries(X.elementPercent).map(([Me,Ee])=>[`${Me}(${ai(N,Me)})`,Ee])),:X.totalsSub,:Xs(W,""),:ws(he,""),:se?{gz:Ge(B||""),nabeum:se.name,element:se.element,code:se.code}:null,:{pos:"",gz:Ge(B||""),unseong:ve},:{pos:"",gz:Ge(B||""),shinsal:ke}}};Y.push(Vn(` ${G}`,je))}}if(y.length>0){const te=[],be=new Map;for(const V of y){const[H,X]=V.split("-").map(Number);Bf(m,H,X).forEach(ve=>{te.some(ke=>ke.gz===ve.gz&&ke.startYear===ve.startYear)||te.push(ve)});const he=Nz(H,X);Pf(H,X).forEach((ve,ke)=>{const je=he[ke]??he[he.length-1];be.has(ve)||be.set(ve,{year:je,month:X})})}const[Z]=y[0].split("-").map(Number),G=ut(new Date(Z,5,15)),B=Ge(G||"");if(te.length>0){const V={:te.map(H=>{const X={dae:H.gz,se:B||null,wol:null,il:null},W=es(o,"",X),he=gr({natal:k,daewoon:H.gz,sewoon:B||void 0,wolwoon:void 0,ilwoon:void 0}),se=Gr({natal:k,daewoon:H.gz,sewoon:B||void 0,wolwoon:void 0,ilwoon:void 0,basis:i}),ve=ar(H.gz),ke=Jt(k[2]?.charAt(0)??"",H.gz.charAt(1)),je=Qt({baseBranch:z,targetBranch:H.gz.charAt(1),era:M,gaehwa:D});return{:`${H.age} ${H.gz} (${H.startYear}~${H.endYear})`,:H.gz,:Object.fromEntries(Object.entries(W.elementPercent).map(([Me,Ee])=>[`${Me}(${ai(N,Me)})`,Ee])),:W.totalsSub,:Xs(he,""),:ws(se,""),:ve?{gz:H.gz,nabeum:ve.name,element:ve.element,code:ve.code}:null,:{pos:"",gz:H.gz,unseong:ke},:{pos:"",gz:H.gz,shinsal:je}}})};Y.push(Vn("",V))}const q=Array.from(be.keys());if(q.length>0){const V={:q.map(H=>{const W=be.get(H).year,se=w2(m,W)[0]??te[0]??null,ve={dae:se?se.gz:null,se:H,wol:null,il:null},ke=es(o,"",ve),je=gr({natal:k,daewoon:se?.gz,sewoon:H,wolwoon:void 0,ilwoon:void 0}),Me=Gr({natal:k,daewoon:se?.gz,sewoon:H,wolwoon:void 0,ilwoon:void 0,basis:i}),Ee=ar(H),Ie=Jt(k[2]?.charAt(0)??"",H.charAt(1)),Pe=Qt({baseBranch:z,targetBranch:H.charAt(1),era:M,gaehwa:D});return{:`${W} ${H}`,:H,:Object.fromEntries(Object.entries(ke.elementPercent).map(([Ye,Re])=>[`${Ye}(${ai(N,Ye)})`,Re])),:ke.totalsSub,:Xs(je,""),:ws(Me,""),:Ee?{gz:H,nabeum:Ee.name,element:Ee.element,code:Ee.code}:null,:{pos:"",gz:H,unseong:Ie},:{pos:"",gz:H,shinsal:Pe}}})};Y.push(Vn("",V))}for(const V of y){const[H,X]=V.split("-").map(Number),W=new Date(H,X-1,15),he=jt(W),se=Bf(m,H,X),ve=se.length>0?se[0]:null,ke=Pf(H,X),je=ke.length>0?ke[ke.length-1]:"",Me={dae:ve?ve.gz:null,se:je||null,wol:Ge(he||""),il:null},Ee=es(o,"",Me),Ie=gr({natal:k,daewoon:ve?.gz,sewoon:je||void 0,wolwoon:Ge(he||""),ilwoon:void 0}),Pe=Gr({natal:k,daewoon:ve?.gz,sewoon:je||void 0,wolwoon:Ge(he||""),ilwoon:void 0,basis:i}),Ye=ar(Ge(he||"")),Re=Jt(k[2]?.charAt(0)??"",(he||"").charAt(1)),fe=Qt({baseBranch:z,targetBranch:(he||"").charAt(1),era:M,gaehwa:D}),Le={:{:`${V} ${Ge(he||"")}`,:Ge(he||""),:Object.fromEntries(Object.entries(Ee.elementPercent).map(([ce,me])=>[`${ce}(${ai(N,ce)})`,me])),:Ee.totalsSub,:Xs(Ie,""),:ws(Pe,""),:Ye?{gz:Ge(he||""),nabeum:Ye.name,element:Ye.element,code:Ye.code}:null,:{pos:"",gz:Ge(he||""),unseong:Re},:{pos:"",gz:Ge(he||""),shinsal:fe}}};Y.push(Vn(` ${V}`,Le))}}if(_.length>0){const te=t.mingSikType??"/",[be,Z,G]=_[0].split("-").map(Number),B=new Date(be,Z-1,G,4,0);if(!isNaN(B.getTime())){const q=Bf(m,be,Z),V=q.length>0?q[0]:null,H=Pf(be,Z),X=H.length>0?H[H.length-1]:"",W=jt(new Date(be,Z-1,15)),he=_t(B,te),se=Ge(W||""),ve=Ge(X||""),ke=Ge(he||"");if(V){const je={dae:V.gz,se:ve,wol:se,il:ke},Me=es(o,"",je),Ee=gr({natal:k,daewoon:V.gz,sewoon:ve,wolwoon:se,ilwoon:ke}),Ie=Gr({natal:k,daewoon:V.gz,sewoon:ve,wolwoon:se,ilwoon:ke,basis:i}),Pe=ar(V.gz),Ye=Jt(k[2]?.charAt(0)??"",V.gz.charAt(1)),Re=Qt({baseBranch:z,targetBranch:V.gz.charAt(1),era:M,gaehwa:D});Y.push(Vn("",{:`${V.age} ${V.gz} (${V.startYear}~${V.endYear})`,:V.gz,:Object.fromEntries(Object.entries(Me.elementPercent).map(([fe,Le])=>[`${fe}(${ai(N,fe)})`,Le])),:Me.totalsSub,:Xs(Ee,""),:ws(Ie,""),:Pe?{gz:V.gz,nabeum:Pe.name,element:Pe.element,code:Pe.code}:null,:{pos:"",gz:V.gz,unseong:Ye},:{pos:"",gz:V.gz,shinsal:Re}}))}if(ve){const je={dae:V?V.gz:null,se:ve,wol:se,il:ke},Me=es(o,"",je),Ee=gr({natal:k,daewoon:V?.gz,sewoon:ve,wolwoon:se,ilwoon:ke}),Ie=Gr({natal:k,daewoon:V?.gz,sewoon:ve,wolwoon:se,ilwoon:ke,basis:i}),Pe=ar(ve),Ye=Jt(k[2]?.charAt(0)??"",ve.charAt(1)),Re=Qt({baseBranch:z,targetBranch:ve.charAt(1),era:M,gaehwa:D});Y.push(Vn("",{:`${be} ${ve}`,:ve,:Object.fromEntries(Object.entries(Me.elementPercent).map(([fe,Le])=>[`${fe}(${ai(N,fe)})`,Le])),:Me.totalsSub,:Xs(Ee,""),:ws(Ie,""),:Pe?{gz:ve,nabeum:Pe.name,element:Pe.element,code:Pe.code}:null,:{pos:"",gz:ve,unseong:Ye},:{pos:"",gz:ve,shinsal:Re}}))}if(se){const je={dae:V?V.gz:null,se:ve,wol:se,il:ke},Me=es(o,"",je),Ee=gr({natal:k,daewoon:V?.gz,sewoon:ve,wolwoon:se,ilwoon:ke}),Ie=Gr({natal:k,daewoon:V?.gz,sewoon:ve,wolwoon:se,ilwoon:ke,basis:i}),Pe=ar(se),Ye=Jt(k[2]?.charAt(0)??"",se.charAt(1)),Re=Qt({baseBranch:z,targetBranch:se.charAt(1),era:M,gaehwa:D});Y.push(Vn("",{:`${be}-${String(Z).padStart(2,"0")} ${se}`,:se,:Object.fromEntries(Object.entries(Me.elementPercent).map(([fe,Le])=>[`${fe}(${ai(N,fe)})`,Le])),:Me.totalsSub,:Xs(Ee,""),:ws(Ie,""),:Pe?{gz:se,nabeum:Pe.name,element:Pe.element,code:Pe.code}:null,:{pos:"",gz:se,unseong:Ye},:{pos:"",gz:se,shinsal:Re}}))}}for(const q of _){const[V,H,X]=q.split("-").map(Number),W=new Date(V,H-1,X,4,0);if(isNaN(W.getTime()))continue;const he=Bf(m,V,H),se=he.length>0?he[0]:null,ve=Pf(V,H),ke=ve.length>0?ve[ve.length-1]:"",je=jt(new Date(V,H-1,15)),Me=_t(W,te),Ee=Ge(je||""),Ie=Ge(ke||""),Pe=Ge(Me||""),Ye={dae:se?se.gz:null,se:Ie||null,wol:Ee,il:Pe},Re=es(o,"",Ye),fe=gr({natal:k,daewoon:se?.gz,sewoon:Ie||void 0,wolwoon:Ee||void 0,ilwoon:Pe||void 0}),Le=Gr({natal:k,daewoon:se?.gz,sewoon:Ie||void 0,wolwoon:Ee||void 0,ilwoon:Pe||void 0,basis:i}),ce=ar(Pe),me=Jt(k[2]?.charAt(0)??"",Pe.charAt(1)),$e=Qt({baseBranch:z,targetBranch:Pe.charAt(1),era:M,gaehwa:D}),He={:{:`${q} ${Pe}`,:Pe,:Object.fromEntries(Object.entries(Re.elementPercent).map(([Be,tt])=>[`${Be}(${ai(N,Be)})`,tt])),:Re.totalsSub,:Xs(fe,""),:ws(Le,""),:ce?{gz:Pe,nabeum:ce.name,element:ce.element,code:ce.code}:null,:{pos:"",gz:Pe,unseong:me},:{pos:"",gz:Pe,shinsal:$e}}};Y.push(Vn(` ${q}`,He))}}const ie=Y.filter(te=>te.trim().length>0).join(`

`),Se=ZA({topic:x,subTopic:S,timeMode:"single",teacherMode:T}),J=["-----","  ","","1.       (////)  .","2.  ,        ."];Se&&J.push("","  ( )",Se);const le=J.join(`
`);return[Q,ie,le].join(`

`)}function ZA(e){const{topic:t,subTopic:n,timeMode:i="single",tab:o,relationMode:l,teacherMode:u}=e;if(!t)return"";const f=[];switch(u===!0?f.push("-   ,     (, ,   )  .","-         ,   .","-    .    .","-  ,     .","-    ,    .","- JSON/  ,     ."):f.push("- AI     ,      . (, ,   )","-   ,  . (     )","-  /    .","- , , , ,       ,    .","-     , (~, ~  ) .","-    .","-  JSON/      .","-       .","-         .","-   ,    ."),i==="single"?o?f.push(`-    (${o})   ,         .`,"-   ,             ."):f.push("-    ,          ."):f.push("-  (///)  ,           .","-      ,    ,           ."),t){case"personality":{f.push("-    /  .","-  ,       ."),(!n||n==="overview"||n==="personality_basic")&&f.push("-        .","  1)   : /, , /,        ,      .","  2)   :    VS   ,   VS   ,  VS      .","  3) /:   ,     , /        .","  4)   : //  ,    ,       .","  5)  :     ,    ,       .","-          ."),n==="personality_shadow"&&f.push("-     ,              .","-           ."),n==="personality_relationshipStyle"&&f.push("-    ,   ,       /    ."),n==="personality_workStyle"&&f.push("-     ,     /      ."),n==="personality_stressPattern"&&f.push("-   ,    vs       .","-      (, , ) .");break}case"lifeFlow":{f.push("-         .","-   ,      .","-  , 20, 30    ,       .","-    ,        ."),n==="lifeFlow_turningPoint"&&f.push("-       ,        .");break}case"love":{f.push("-   //   .","-  ,   ,      ."),(!n||n==="overview"||n==="love_pattern")&&f.push("-      ,     ,       ."),n==="love_timing"&&f.push("-     ,    ,       ."),n==="love_partner"&&f.push("-    ,        ."),n==="love_current"&&f.push("-       ,     ,     ."),n==="love_breakup"&&f.push("- /   ,      ,     ."),n==="love_marriageChange"&&f.push("-          ."),l==="solo"?f.push("-  ' ,  /   ' .","-     ,      .","-    , /     ."):l==="couple"&&f.push("-  '  ,      ' .","-            .","-      /   .","-      ,        .");break}case"career":{f.push("-   ///  .","-    ,      ,     ."),(!n||n==="overview")&&f.push("-  / VS       ,    .","-    VS          ."),n==="career_aptitude"&&f.push("-   (: , ,  ,  )    ."),n==="career_mode"&&f.push("- , , ,        ."),n==="career_jobChange"&&f.push("- /   ,    ,    ."),n==="career_promotion"&&f.push("-     ,    (, ,  )  ."),(n==="career_study"||n==="career_exam")&&f.push("- /   ,        .");break}case"money":{f.push("-   //  .","-     ,  ,   ,   ."),(!n||n==="overview"||n==="money_flow")&&f.push("-   ( ,  ,  )   ."),n==="money_income"&&f.push("- , ,        ( , ,  )  ."),n==="money_spending"&&f.push("-   ,   ,        ."),(n==="money_saving"||n==="money_asset")&&f.push("-   ,        ,   ."),n==="money_debt"&&f.push("- /      ,       ."),n==="money_invest"&&f.push("- /   ,          ."),n==="money_bigEvent"&&f.push("- , ,         ,      .");break}case"family":{f.push("-   /   .","- ()  ()        ."),(!n||n==="overview"||n==="family_current")&&f.push("-        ,     ."),(n==="family_origin"||n==="family_parents")&&f.push("-     (, ,  )     ."),n==="family_siblings"&&f.push("-   (  , / ) ."),n==="family_children"&&f.push("-   ,            .");break}case"health":{f.push("-   /  .","-    ,   (, , ,  ) ."),(!n||n==="overview"||n==="health_overall")&&f.push("-   (:   /     )   ."),n==="health_physical"&&f.push("-    (, ,   )   ."),n==="health_mental"&&f.push("-    (, ,  ) ,        ."),n==="health_stress"&&f.push("-      ,      ."),n==="health_accident"&&f.push("- /   ,    ,   (, ,  )  .");break}case"move":{f.push("-   /  .","-    , ,     ."),(!n||n==="overview"||n==="move_chance")&&f.push("-    ,         ."),n==="move_timing"&&f.push("-    ,           ."),n==="move_targetHouse"&&f.push("-     ,   ,      ,      ."),n==="move_environment"&&f.push("- / (, ,  )     ."),n==="move_finance"&&f.push("- //      ,       .");break}case"social":{f.push("-   //  .","-  ,  ,      ."),(!n||n==="overview"||n==="social_overall")&&f.push("-       ."),n==="social_friend"&&f.push("-      ,      ."),n==="social_workspace"&&f.push("-      (, ,  ) ."),n==="social_network"&&f.push("-   (  vs   )    ,    ."),n==="social_conflict"&&f.push("-    ,  ,      ,    .");break}case"compat":{f.push("-   /   .","-  /  ,        ."),(!n||n==="overview"||n==="compat_overall")&&f.push("-     , //      ."),(n==="compat_love"||n==="compat_marriage")&&f.push("- /  ,  ,        ."),n==="compat_work"&&f.push("- /   ,  ,     ."),(n==="compat_family"||n==="compat_friend")&&f.push("- /       ,       .");break}case"risk":{f.push("-   /   .","-  ,        ."),(!n||n==="overview")&&f.push("- , , ,           ."),n==="risk_money"&&f.push("-   ( , ,   ) ,       ."),n==="risk_relationship"&&f.push("-      (, ,   )  ."),n==="risk_health"&&f.push("- /  ,        ."),n==="risk_lawsuit"&&f.push("-  //     ,         ."),n==="risk_burnout"&&f.push("- /    ,          .");break}case"meta":{f.push("-         .","-    ,         ,     ."),(n==="meta_structure"||!n||n==="overview")&&f.push("-     / ,     ."),n==="meta_cycle"&&f.push("- /   ,     ."),n==="meta_trigger"&&f.push("- , ,           ,   ."),n==="meta_usage"&&f.push("-         ,        .");break}}return f.join(`
`)}function Mz({date:e,onChange:t,min:n="1900-01-01",max:i="2100-12-31"}){const o=R.useMemo(()=>{const u=e.getFullYear(),f=String(e.getMonth()+1).padStart(2,"0"),m=String(e.getDate()).padStart(2,"0");return`${u}-${f}-${m}`},[e]),l=u=>{if(!u)return;const[f,m,p]=u.split("-"),y=Number(f),_=Number(m),x=Number(p),S=e.getHours(),T=e.getMinutes(),k=new Date(y,_,0).getDate(),j=Math.min(x,k),C=new Date(y,_-1,j,S,T);Number.isNaN(C.getTime())||t(C)};return g.jsx("input",{type:"date",value:o,onChange:u=>l(u.target.value),min:n,max:i,className:"w rounded-md border border-neutral-300 dark:border-neutral-700 bg-transparent px-2 py-1 text-sm"})}const sb={analysis:{label:"",desc:`-   ,   
- "     "  
- ST   `},teacher:{label:"",desc:`-   
-    
- ,     `},mentor:{label:"",desc:`-        
-   X,   X
-    ~~  `},speed:{label:"",desc:`-   
- 2~4  
-    `},dryHumor:{label:"",desc:`-   +  
-           `},softWarm:{label:"",desc:`-      
-    `},ect:{label:"",desc:"-    "}},Cz=["","","","",""],VA={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},KA={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},S2={personality:{label:"     "},lifeFlow:{label:"    "},love:{label:"    "},career:{label:"      "},money:{label:"      "},family:{label:"      "},health:{label:"      "},move:{label:"       "},social:{label:"     "},compat:{label:"   "},risk:{label:"    "},meta:{label:"    "},etc:{label:"  "}},E2={personality:[{key:"overview",label:"  "},{key:"personality_basic",label:"  "},{key:"personality_shadow",label:" "},{key:"personality_relationshipStyle",label:"  "},{key:"personality_workStyle",label:"  "},{key:"personality_stressPattern",label:" "}],lifeFlow:[{key:"overview",label:"  "},{key:"lifeFlow_cycle",label:" "},{key:"lifeFlow_turningPoint",label:""},{key:"lifeFlow_peak",label:""},{key:"lifeFlow_down",label:""},{key:"lifeFlow_theme",label:"  "}],love:[{key:"love_pattern",label:" "},{key:"love_timing",label:" /"},{key:"love_partner",label:" "},{key:"love_current",label:" / "},{key:"love_breakup",label:"/ "},{key:"love_marriageChange",label:" "}],career:[{key:"career_aptitude",label:" "},{key:"career_mode",label:" vs /"},{key:"career_jobChange",label:"/ "},{key:"career_promotion",label:""},{key:"career_study",label:""},{key:"career_exam",label:""}],money:[{key:"overview",label:"  "},{key:"money_flow",label:"  "},{key:"money_income",label:""},{key:"money_spending",label:" "},{key:"money_saving",label:" "},{key:"money_asset",label:" "},{key:"money_debt",label:" "},{key:"money_invest",label:" "},{key:"money_bigEvent",label:"  "}],family:[{key:"overview",label:"  "},{key:"family_origin",label:"()"},{key:"family_current",label:" "},{key:"family_parents",label:" "},{key:"family_siblings",label:" "},{key:"family_children",label:""},{key:"family_care",label:" "}],health:[{key:"overview",label:" "},{key:"health_overall",label:" "},{key:"health_physical",label:" "},{key:"health_mental",label:" "},{key:"health_stress",label:" "},{key:"health_accident",label:" "}],move:[{key:"overview",label:"  "},{key:"move_timing",label:" "},{key:"move_chance",label:"  "},{key:"move_targetHouse",label:"   "},{key:"move_environment",label:" "},{key:"move_finance",label:" "}],social:[{key:"overview",label:" "},{key:"social_overall",label:"  "},{key:"social_friend",label:"  "},{key:"social_workspace",label:"  "},{key:"social_network",label:""},{key:"social_conflict",label:" "}],compat:[{key:"overview",label:"  "},{key:"compat_overall",label:"  "},{key:"compat_love",label:" "},{key:"compat_marriage",label:"  "},{key:"compat_work",label:" "},{key:"compat_family",label:"  "},{key:"compat_friend",label:" "}],risk:[{key:"overview",label:" "},{key:"risk_money",label:" "},{key:"risk_relationship",label:" "},{key:"risk_health",label:" "},{key:"risk_lawsuit",label:" "},{key:"risk_burnout",label:" "}],meta:[{key:"overview",label:"  "},{key:"meta_structure",label:"  "},{key:"meta_cycle",label:"  "},{key:"meta_trigger",label:"  "},{key:"meta_usage",label:"  "}],etc:[]};function oc(e){if(!e)return"";if(e.length===2)return e;const t=e.replace(/[()[\]{}]/g,"").replace(/\s+/g,"").replace(/[:\-_.]/g,""),n=t.match(/([]).*?([])/);if(n)return`${n[1]}${n[2]}`;const i=t.match(/([]).*?([])/);if(i){const o=VA[i[1]],l=KA[i[2]];return o&&l?`${o}${l}`:""}return""}function T2(e){return e[0]?.length===2&&e[1]?.length===2&&e[2]?.length===2}function k2(e){const t=Array.isArray(e)?e.slice(0,4):[];for(;t.length<4;)t.push("");return t.map((n,i)=>{if(!n)return"";const o=n.replace(/[()[\]{}]/g,"").replace(/\s+/g,"").replace(/[:\-_.]/g,""),l=o.match(/([]).*?([])/);if(l)return`${l[1]}${l[2]}`;const u=o.match(/([]).*?([])/);return u?`${VA[u[1]]}${KA[u[2]]}`:i<=2?"--":""})}function Rz({ms:e,natal:t,chain:n,basis:i,lunarPillars:o,includeTenGod:l=!1}){const[u,f]=R.useState("analysis"),[m,p]=R.useState(!1),[y,_]=R.useState(!1),[x,S]=R.useState(()=>new Date),{list:T,currentId:k}=ss.getState(),[j,C]=R.useState(""),[P,N]=R.useState("personality"),[M,D]=R.useState("overview"),$=R.useMemo(()=>j?T.find(pe=>pe.id===j)??null:null,[j,T]),[z,F]=R.useState(""),[K,oe]=R.useState("solo");R.useEffect(()=>{P!=="love"&&P!=="compat"&&(oe("solo"),C(""))},[P]);const[Q,Y]=R.useState(!1),[ne,ie]=R.useState(""),[Se,J]=R.useState([]),[le,te]=R.useState(new Date().getFullYear()),[be,Z]=R.useState(new Date().getFullYear()),[G,B]=R.useState(()=>{const pe=new Date;return`${pe.getFullYear()}-${String(pe.getMonth()+1).padStart(2,"0")}`}),[q,V]=R.useState(()=>{const pe=new Date;return`${pe.getFullYear()}-${String(pe.getMonth()+1).padStart(2,"0")}`}),[H,X]=R.useState(()=>{const pe=new Date,Fe=pe.getFullYear(),lt=String(pe.getMonth()+1).padStart(2,"0"),pt=String(pe.getDate()).padStart(2,"0");return`${Fe}-${lt}-${pt}`}),[W,he]=R.useState(()=>{const pe=new Date,Fe=pe.getFullYear(),lt=String(pe.getMonth()+1).padStart(2,"0"),pt=String(pe.getDate()).padStart(2,"0");return`${Fe}-${lt}-${pt}`}),se=1e3*60*60*24;function ve(pe,Fe){return(Fe.getFullYear()-pe.getFullYear())*12+(Fe.getMonth()-pe.getMonth())}function ke(pe){return`${pe.getFullYear()}-${String(pe.getMonth()+1).padStart(2,"0")}`}function je(pe){return`${pe.getFullYear()}-${String(pe.getMonth()+1).padStart(2,"0")}-${String(pe.getDate()).padStart(2,"0")}`}const Me=pe=>{te(pe)},Ee=pe=>{Z(pe)},Ie=()=>{const pe=le;let Fe=be;Fe<pe&&(Fe=pe),Fe-pe>9&&(Fe=pe+9),Z(Fe)},Pe=()=>{let pe=le;const Fe=be;Fe<pe&&(pe=Fe),Fe-pe>9&&(pe=Fe-9),te(pe)},Ye=pe=>{B(pe)},Re=()=>{const[pe,Fe]=G.split("-").map(Number),[lt,pt]=q.split("-").map(Number),nt=new Date(pe,Fe-1),dt=new Date(lt,pt-1);if(dt<nt){V(ke(nt));return}if(ve(nt,dt)>11){const mt=new Date(nt);mt.setMonth(nt.getMonth()+11),V(ke(mt))}},fe=pe=>{V(pe)},Le=()=>{const[pe,Fe]=G.split("-").map(Number),[lt,pt]=q.split("-").map(Number),nt=new Date(pe,Fe-1),dt=new Date(lt,pt-1);if(dt<nt){B(ke(dt));return}if(ve(nt,dt)>11){const mt=new Date(dt);mt.setMonth(dt.getMonth()-11),B(ke(mt))}},ce=pe=>{X(pe)},me=()=>{if(!H||!W)return;const[pe,Fe,lt]=H.split("-").map(Number),[pt,nt,dt]=W.split("-").map(Number),xt=new Date(pe,Fe-1,lt,4,0,0),mt=new Date(pt,nt-1,dt,4,0,0);if(mt<xt){he(je(xt));return}if(Math.floor((mt.getTime()-xt.getTime())/se)>7){const wt=new Date(xt);wt.setDate(xt.getDate()+6),he(je(wt))}},$e=pe=>{he(pe)},He=()=>{if(!H||!W)return;const[pe,Fe,lt]=H.split("-").map(Number),[pt,nt,dt]=W.split("-").map(Number),xt=new Date(pe,Fe-1,lt,4,0,0),mt=new Date(pt,nt-1,dt,4,0,0);if(xt>mt){X(je(mt));return}if(Math.floor((mt.getTime()-xt.getTime())/se)>7){const wt=new Date(mt);wt.setDate(mt.getDate()-6),X(je(wt))}},Be=e.mingSikType??"/",tt=R.useMemo(()=>{if(n)return{dae:n.dae??null,se:n.se??null,wol:n.wol??null,il:n.il??null};const pe=x??new Date,Fe=oc(ut(pe)||""),lt=oc(jt(pe)||""),pt=oc(_t(pe,Be)||"");return{dae:null,se:Fe||null,wol:lt||null,il:pt||null}},[n,x,Be]),et=_d.getState().manualHour,Zt=R.useMemo(()=>k2(t),[t]),On=R.useMemo(()=>k2(o),[o]),En=R.useMemo(()=>{const pe=[...Zt];return(!pe[3]||pe[3]==="")&&et&&(pe[3]=et.stem+et.branch),pe},[Zt,et]),lr=R.useMemo(()=>{const pe=[...On];return(!pe[3]||pe[3]==="")&&et&&(pe[3]=et.stem+et.branch),pe},[On,et]),vr=R.useMemo(()=>{const pe=Number(e.birthDay?.slice(0,4)),Fe=Number(e.birthDay?.slice(4,6)),lt=Number(e.birthDay?.slice(6,8));if(!Number.isFinite(pe)||!Number.isFinite(Fe)||!Number.isFinite(lt))return null;const pt=new Date(pe,Fe-1,lt,12,4,0,0),nt=oc(ut(pt)||""),dt=oc(jt(pt)||""),xt=oc(_t(pt,Be)||"");return[nt,dt,xt,""]},[e.birthDay,Be]),dn=T2(En),Ct=T2(lr),[bn]=R.useState("solar"),hn=bn==="lunar"?Ct?"lunar":dn?"solar":"lunar":dn?"solar":Ct?"lunar":"solar",qr=R.useMemo(()=>{const Fe=[...hn==="lunar"?Ct?lr:dn?En:vr??["","","",""]:dn?En:Ct?lr:vr??["","","",""]];return(!Fe[3]||Fe[3]==="")&&et&&(Fe[3]=et.stem+et.branch),Fe},[hn,dn,Ct,En,lr,vr,et]),ra=R.useMemo(()=>et?et.stem+et.branch:qr[3]||"",[et,qr]);(!t||t.length===0)&&(t=Sm(e));const zi=et?et.stem+et.branch:"",Tn=R.useMemo(()=>{const pe=Sm(e);return zi&&zi.length===2&&(pe[3]=zi),pe},[e,zi]),Dn=R.useMemo(()=>TA({natal:Tn,tab:z,chain:tt,hourKey:ra}),[Tn,z,tt,ra]);function os(pe){return EA(pe,{criteriaMode:"modern",useHarmonyOverlay:!0})}const Nr=os(Tn),cr=R.useMemo(()=>Hy(Nr),[Nr]),gi=R.useMemo(()=>Xk(cr),[cr]),ia=R.useMemo(()=>{const pe=BA(e).slice(0,10),Fe=e.birthDay?Number(e.birthDay.slice(0,4)):0;return pe.map((lt,pt)=>{const nt=lt.match(/(\d{4})\s+(\d{1,2})\s+([-]{2})\s+/),dt=nt?Number(nt[1]):0,xt=nt?Number(nt[2]):1,mt=1,In=nt?nt[3]:"",wt=Fe>0?Lz(Fe,dt):pt*10;return{gz:In,age:wt,startYear:dt,startMonth:xt,startDay:mt,endYear:dt+10}})},[e]),Qa=E2[P],eo=R.useMemo(()=>e?kz({ms:e,natal:Tn,chain:tt,basis:i,tab:z,unified:Dn,percent:cr,category:gi,topic:P,subTopic:M,relationMode:K,teacherMode:y}):"",[e,i,l,z,tt,Dn,cr,gi,Tn,P,M,K,$,y]),Ui=R.useMemo(()=>{if(!e||!Q)return"";const pe=Se.map(nt=>ia[nt]).filter(nt=>nt),Fe=ne===""?(()=>{const nt=[];for(let dt=le;dt<=be&&nt.length<10;dt++)nt.push(dt);return nt})():[],lt=ne===""?(()=>{const nt=[],[dt,xt]=G.split("-").map(Number),[mt,In]=q.split("-").map(Number),wt=new Date(dt,xt-1),aa=new Date(mt,In-1);for(;wt<=aa&&nt.length<12;)nt.push(`${wt.getFullYear()}-${String(wt.getMonth()+1).padStart(2,"0")}`),wt.setMonth(wt.getMonth()+1);return nt})():[],pt=ne===""?(()=>{const nt=[],[dt,xt,mt]=H.split("-").map(Number),[In,wt,aa]=W.split("-").map(Number),io=new Date(dt,xt-1,mt,4,0,0),yi=new Date(In,wt-1,aa,4,0,0);if(isNaN(io.getTime())||isNaN(yi.getTime()))return nt;const Jn=new Date(io);for(;Jn<=yi&&nt.length<31;){const As=Jn.getFullYear(),so=String(Jn.getMonth()+1).padStart(2,"0"),ao=String(Jn.getDate()).padStart(2,"0");nt.push(`${As}-${so}-${ao}`),Jn.setDate(Jn.getDate()+1)}return nt})():[];return Dz({ms:e,natal:Tn,basis:i,unified:Dn,percent:cr,category:gi,selectedDaeList:pe,daeList:ia,seYears:Fe,wolMonths:lt,ilDays:pt,topic:P,subTopic:M,teacherMode:y})},[e,Q,ne,Se,ia,le,be,G,q,H,W,Tn,i,l,Dn,cr,gi,P,M,K,$,y]),to=R.useMemo(()=>{if(K!=="couple"||!$)return"";const pe=$.name||"";let Fe="";if($.birthDay&&$.birthDay.length===8){const dt=$.birthDay.slice(0,4),xt=$.birthDay.slice(4,6),mt=$.birthDay.slice(6,8);Fe=`${dt}-${xt}-${mt}`}else $.birthDay&&(Fe=$.birthDay);let lt="";if($.birthTime&&$.birthTime.trim().length>0){const xt=$.birthTime.trim().padEnd(4,"0").slice(0,4),mt=xt.slice(0,2),In=xt.slice(2,4);lt=`${mt}:${In}`}let pt="";$.birthPlace&&typeof $.birthPlace=="object"&&(pt=$.birthPlace.name||"");const nt=$.ganji||$.ganjiText||"";return["","","[  - () ]"," ",`-  : ${pe}`,`-  : ${Fe}`,`-   : ${lt}`,`-   : ${pt}`,`- ${nt}`,""," //,       ,","           .",""].join(`
`)},[K,$]),sa=Q?Ui:eo,no=R.useMemo(()=>{switch(u){case"analysis":return`     .
`;case"teacher":return`    '' .
`;case"mentor":return`      .
`;case"speed":return`     .
`;case"dryHumor":return`   ,    .
`;case"softWarm":return`    .
`;default:return""}},[u]),ro=m?`   ,   .
`:"",$n=R.useMemo(()=>sa||to?`${sa}${to}
${no}${ro}`:"",[no,ro,sa,to]),[Ve,ks]=R.useState(""),[Or,ur]=R.useState([]);R.useEffect(()=>{ks(""),ur([])},[e.id]);const sn=R.useMemo(()=>{if(!$n)return"";if(Or.length===0)return $n;const pe=["","-----","     ","",...Or.map((Fe,lt)=>`${lt+1}. ${Fe}`)];return`${$n}
${pe.join(`
`)}`},[$n,Or]),[kn,Zr]=R.useState(!1);async function bi(){if(sn)try{await navigator.clipboard.writeText(sn),Zr(!0),setTimeout(()=>Zr(!1),1200)}catch{Zr(!1)}}return e?g.jsxs("div",{className:"rounded-xl border border-neutral-200 dark:border-neutral-800 bg-white dark:bg-neutral-900 p-3 space-y-3",children:[g.jsxs("div",{className:"flex items-center justify-between gap-2",children:[g.jsx("div",{className:"text-sm font-semibold text-neutral-700 dark:text-neutral-200",children:"GPT  "}),g.jsx("button",{onClick:bi,className:`px-3 py-1 rounded-md text-xs cursor-pointer ${kn?"bg-green-600 text-white":"bg-neutral-900 text-white dark:bg-yellow-500 dark:text-black"}`,children:kn?"!":" "})]}),g.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[g.jsxs("div",{className:"w-full mt-2 p-2 border rounded-md bg-neutral-50 dark:bg-neutral-800",children:[g.jsx("div",{className:"text-xs font-semibold mb-1 text-neutral-700 dark:text-neutral-200",children:"  "}),g.jsx("div",{className:"flex gap-1.5 mb-2",children:Object.keys(sb).map(pe=>g.jsx("button",{onClick:()=>f(pe),className:`flex-1 px-2 py-1 text-[10px] rounded border cursor-pointer ${u===pe?"bg-neutral-900 text-white dark:bg-yellow-500 dark:text-black":"bg-white dark:bg-neutral-700 text-neutral-700 dark:text-neutral-200"}`,children:sb[pe].label},pe))}),g.jsx("div",{className:"text-[11px] whitespace-pre-line text-neutral-600 dark:text-neutral-300 leading-4",children:sb[u].desc}),g.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[g.jsxs("div",{className:"mr-1 flex items-center gap-2",children:[g.jsx("input",{type:"checkbox",id:"friendMode",checked:m,onChange:pe=>p(pe.target.checked),className:"w-3 h-3"}),g.jsx("label",{htmlFor:"friendMode",className:"text-[11px] text-neutral-700 dark:text-neutral-200 cursor-pointer",children:""})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("input",{type:"checkbox",id:"teacherMode",checked:y,onChange:pe=>_(pe.target.checked),className:"w-3 h-3"}),g.jsx("label",{htmlFor:"teacherMode",className:"text-[11px] text-neutral-700 dark:text-neutral-200 cursor-pointer",children:"(/)"})]})]})]}),g.jsx("select",{value:P,onChange:pe=>{const Fe=pe.target.value;N(Fe);const lt=E2[Fe];lt.length>0?D(lt[0].key):D("overview"),Fe!=="love"&&Fe!=="compat"&&oe("solo")},className:"px-2.5 h-30 h-8 text-[11px] rounded-md border bg-white dark:bg-neutral-800 text-neutral-700 dark:text-neutral-200 border-neutral-200 dark:border-neutral-700",children:Object.keys(S2).map(pe=>{const Fe=S2[pe];return g.jsx("option",{value:pe,children:Fe.label},pe)})}),Qa.length>0&&g.jsx("select",{value:M,onChange:pe=>D(pe.target.value),className:"px-2.5 h-30 h-8 text-[11px] rounded-md border bg-white dark:bg-neutral-800 text-neutral-700 dark:text-neutral-200 border-neutral-200 dark:border-neutral-700",children:Qa.map(pe=>g.jsx("option",{value:pe.key,children:pe.label},pe.key))})]}),(P==="love"||P==="compat")&&g.jsxs("div",{className:"flex flex-col gap-1.5 text-[11px] text-neutral-700 dark:text-neutral-200",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:"font-semibold",children:" "}),g.jsxs("div",{className:"inline-flex rounded-full border border-neutral-200 dark:border-neutral-700 overflow-hidden",children:[g.jsx("button",{type:"button",onClick:()=>oe("solo"),className:`px-3 py-1 cursor-pointer ${K==="solo"?"bg-neutral-900 text-white dark:bg-yellow-500 dark:text-black":"bg-neutral-50 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-300"}`,children:" "}),g.jsx("button",{type:"button",onClick:()=>oe("couple"),className:`px-3 py-1 cursor-pointer ${K==="couple"?"bg-neutral-900 text-white dark:bg-yellow-500 dark:text-black":"bg-neutral-50 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-300"}`,children:" "})]})]}),K==="couple"&&g.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[g.jsx("span",{className:"font-semibold",children:"  "}),g.jsxs("select",{value:j,onChange:pe=>C(pe.target.value),className:"min-w-[180px] h-30 px-2 py-1 border rounded bg-white dark:bg-neutral-800",children:[g.jsx("option",{value:"",children:"  "}),T.filter(pe=>pe.id!==k).map(pe=>g.jsxs("option",{value:pe.id,children:[pe.name||" "," ",pe.birthDay?`(${pe.birthDay})`:""]},pe.id))]})]})]}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("button",{onClick:()=>Y(!1),className:`px-3 py-1.5 text-xs rounded-md border cursor-pointer ${Q?"bg-neutral-100 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-300":"bg-neutral-900 text-white dark:bg-yellow-500 dark:text-black"}`,children:" "}),g.jsx("button",{onClick:()=>Y(!0),className:`px-3 py-1.5 text-xs rounded-md border cursor-pointer ${Q?"bg-neutral-900 text-white dark:bg-yellow-500 dark:text-black":"bg-neutral-100 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-300"}`,children:""})]}),!Q&&g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"flex desk:justify-between flex-col desk:flex-row gap-2",children:[g.jsx("div",{className:"flex gap-1 flex-wrap",children:Cz.map(pe=>g.jsx("button",{onClick:()=>F(pe),className:`px-2 py-1 text-xs rounded-md border cursor-pointer ${z===pe?"bg-neutral-900 text-white dark:bg-yellow-500 dark:text-black":"bg-neutral-100 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-300"}`,children:pe},pe))}),g.jsx(Mz,{date:x,onChange:S})]}),g.jsxs("div",{className:"text-[11px] text-neutral-500 dark:text-neutral-400",children:[g.jsx("p",{children:"     ."}),g.jsx("p",{children:"  ,  ."}),g.jsx("p",{children:"   ,   ."})]})]}),Q&&g.jsxs("div",{className:"space-y-3 p-3 bg-neutral-50 dark:bg-neutral-800 rounded-lg",children:[g.jsx("div",{className:"flex gap-1.5 border-b pb-2",children:["","","",""].map(pe=>g.jsx("button",{onClick:()=>ie(pe),className:`px-3 py-1.5 text-xs rounded-md cursor-pointer transition-colors ${ne===pe?"bg-blue-600 text-white font-semibold":"bg-white dark:bg-neutral-700 text-neutral-600 dark:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-neutral-600"}`,children:pe},pe))}),ne===""&&g.jsxs("div",{children:[g.jsx("div",{className:"text-xs font-semibold mb-2 text-neutral-700 dark:text-neutral-200",children:"  (  )"}),g.jsx("div",{className:"grid grid-cols-2 gap-1.5",children:ia.map((pe,Fe)=>g.jsxs("button",{onClick:()=>{J(lt=>lt.includes(Fe)?lt.filter(pt=>pt!==Fe):[...lt,Fe])},className:`px-2 py-1.5 text-xs rounded border cursor-pointer text-left ${Se.includes(Fe)?"bg-blue-600 text-white border-blue-600":"bg-white dark:bg-neutral-700 border-neutral-300 dark:border-neutral-600"}`,children:[g.jsx("div",{className:"font-mono",children:pe.gz}),g.jsxs("div",{className:"text-[10px] opacity-80",children:[pe.age," (",pe.startYear,"~",pe.endYear,")"]})]},Fe))})]}),ne===""&&g.jsxs("div",{children:[g.jsx("div",{className:"text-xs font-semibold mb-2 text-neutral-700 dark:text-neutral-200",children:"  ( 10)"}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("input",{type:"number",value:le,onChange:pe=>Me(Number(pe.target.value)),onBlur:Ie,className:"w-24 h-30 px-2 text-[16px] desk:text-xs border rounded bg-white dark:bg-neutral-700",placeholder:""}),g.jsx("span",{className:"text-xs",children:"~"}),g.jsx("input",{type:"number",value:be,onChange:pe=>Ee(Number(pe.target.value)),onBlur:Pe,className:"w-24 h-30 px-2 text-[16px] desk:text-xs border rounded bg-white dark:bg-neutral-700",placeholder:""})]}),g.jsxs("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 mt-1",children:[" :"," ",be-le+1,""]})]}),ne===""&&g.jsxs("div",{children:[g.jsx("div",{className:"text-xs font-semibold mb-2 text-neutral-700 dark:text-neutral-200",children:"  ( 12)"}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("input",{type:"month",value:G,onChange:pe=>Ye(pe.target.value),onBlur:Re,className:"px-2 py-1 text-xs border rounded bg-white dark:bg-neutral-700"}),g.jsx("span",{className:"text-xs",children:"~"}),g.jsx("input",{type:"month",value:q,onChange:pe=>fe(pe.target.value),onBlur:Le,className:"px-2 py-1 text-xs border rounded bg-white dark:bg-neutral-700"})]}),g.jsxs("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 mt-1",children:[" :"," ",(()=>{const[pe,Fe]=G.split("-").map(Number),[lt,pt]=q.split("-").map(Number);return(lt-pe)*12+(pt-Fe)+1})(),""]})]}),ne===""&&g.jsxs("div",{children:[g.jsx("div",{className:"text-xs font-semibold mb-2 text-neutral-700 dark:text-neutral-200",children:"  ( 7)"}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("input",{type:"date",value:H,onChange:pe=>ce(pe.target.value),onBlur:me,className:"px-2 py-1 text-xs border rounded bg-white dark:bg-neutral-700"}),g.jsx("span",{className:"text-xs",children:"~"}),g.jsx("input",{type:"date",value:W,onChange:pe=>$e(pe.target.value),onBlur:He,className:"px-2 py-1 text-xs border rounded bg-white dark:bg-neutral-700"})]}),g.jsxs("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 mt-1",children:[" :"," ",(()=>{const[pe,Fe,lt]=H.split("-").map(Number),[pt,nt,dt]=W.split("-").map(Number),xt=new Date(pe,Fe-1,lt,4,0,0),mt=new Date(pt,nt-1,dt,4,0,0);return isNaN(xt.getTime())||isNaN(mt.getTime())||mt<xt?0:Math.floor((mt.getTime()-xt.getTime())/se)+1})(),""]})]}),g.jsxs("div",{className:"text-[11px] text-neutral-500 dark:text-neutral-400",children:[g.jsxs("p",{children:[" ",ne,"   ."]}),g.jsx("p",{children:"    ."})]})]}),g.jsxs("div",{className:"space-y-1",children:[g.jsxs("div",{className:"flex items-center justify-between gap-2",children:[g.jsx("div",{className:"text-xs font-semibold text-neutral-700 dark:text-neutral-200",children:"   ()"}),Or.length>0&&g.jsx("button",{type:"button",onClick:()=>ur([]),className:"px-2 py-1 text-[10px] rounded-md border border-neutral-300 dark:border-neutral-600 text-neutral-500 dark:text-neutral-300 cursor-pointer",children:" "})]}),g.jsx("textarea",{value:Ve,onChange:pe=>ks(pe.target.value),placeholder:" GPT     , ' '  .",rows:3,className:"w-full text-xs rounded-md border bg-white dark:bg-neutral-800 p-2"}),g.jsxs("div",{className:"mb-4 text-center",children:[g.jsx("button",{type:"button",onClick:()=>{const pe=Ve.trim();pe&&(ur(Fe=>[...Fe,pe]),ks(""))},className:"w-full desk:max-w-[160px] px-1 py-1.5 text-xs rounded-md border bg-neutral-900 text-white dark:bg-yellow-500 dark:text-black cursor-pointer",children:" "}),Or.length>0&&g.jsxs("div",{className:"flex-1 text-[11px] text-neutral-500 dark:text-neutral-400 text-right",children:[" "," ",Or.length,""]})]}),Or.length>0&&g.jsx("ul",{className:"mt-1 space-y-1 max-h-24 overflow-y-auto text-[11px] text-neutral-700 dark:text-neutral-200",children:Or.map((pe,Fe)=>g.jsxs("li",{className:"flex gap-1 items-start",children:[g.jsxs("span",{className:"shrink-0",children:[Fe+1,"."]}),g.jsx("span",{className:"whitespace-pre-wrap break-words flex-1",children:pe}),g.jsx("button",{type:"button",onClick:()=>{ur(lt=>lt.filter((pt,nt)=>nt!==Fe))},className:"shrink-0 ml-2 text-[10px] text-red-500 hover:underline",children:""})]},Fe))})]}),g.jsx("textarea",{readOnly:!0,value:sn,placeholder:"   .",className:"w-full min-h-[320px] text-xs font-mono rounded-md border bg-neutral-50 dark:bg-neutral-800 p-2"})]}):g.jsx("div",{className:"p-4 border rounded bg-neutral-50 dark:bg-neutral-900 text-sm text-neutral-500",children:"   ."})}function Lz(e,t){return t-e+1}function Bz(e){const t=fi(o=>o.date),n=fi(o=>o.rule),i=Td(e);return R.useMemo(()=>{if(!e)return{dae:null,se:null,wol:null,il:null};const o=Vm(i,t),l=o>=0?i[o]?.gz??null:null,u=ut(t),f=jt(t),m=_t(t,n);return{dae:l,se:u,wol:f,il:m}},[e,i,t,n])}function Pz(){const[e,t]=R.useState(!1),[n,i]=R.useState(!1),[o,l]=R.useState(!1),[u,f]=R.useState(!1),[m,p]=R.useState(!1);R.useEffect(()=>{setTimeout(()=>t(!0),50),setTimeout(()=>i(!0),250),setTimeout(()=>l(!0),450)},[]);const y=async()=>{if(!m){lO.error(`   
  .`);return}const{error:_}=await kt.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/`}});_&&(console.error("Google Login Error:",_),alert("   ."))};return g.jsxs("main",{className:`flex min-h-screen items-center justify-center bg-neutral-950 text-white px-4 transition-opacity duration-500 ${e?"opacity-100":"opacity-0"}`,children:[g.jsxs("div",{className:`transform transition-all duration-500 ${n?"translate-y-0 opacity-100":"translate-y-4 opacity-0"} absolute top-16 text-center`,children:[g.jsx("h1",{className:"text-3xl font-bold tracking-tight mb-1",children:""}),g.jsx("p",{className:"text-sm text-neutral-400",children:"    "})]}),g.jsxs("div",{className:`w-full max-w-sm rounded-2xl bg-neutral-900 p-8 shadow-xl border border-neutral-800 transition-all duration-500 ${o?"opacity-100 translate-y-0":"opacity-0 translate-y-6"}`,children:[g.jsx("h1",{className:"mb-2 text-2xl font-bold tracking-tight text-center",children:""}),g.jsxs("p",{className:"mb-6 text-sm text-neutral-400 text-center leading-relaxed",children:["  .",g.jsx("br",{}),"     "]}),g.jsx("div",{className:"mb-5 space-y-2",children:g.jsxs("label",{className:"flex items-start gap-2 text-sm text-neutral-300 cursor-pointer",children:[g.jsx("input",{type:"checkbox",checked:m,onChange:()=>p(!m),className:"mt-[2px]"}),g.jsxs("span",{children:["  .",g.jsx("button",{type:"button",onClick:()=>f(!0),className:"ml-1 underline text-orange-400 hover:text-orange-300 cursor-pointer",children:"( )"})]})]})}),g.jsxs("button",{type:"button",onClick:y,"aria-disabled":!m,className:`flex items-center justify-center gap-3 w-full py-3 rounded-lg font-medium text-sm shadow transition-all 
            ${m?"bg-white text-black hover:bg-neutral-100 active:scale-[0.98] cursor-pointer":"bg-neutral-700 text-neutral-400 cursor-pointer"}`,children:[g.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",alt:"Google Logo",className:"w-5 h-5 opacity-90"}),g.jsx("span",{children:"  "})]})]}),g.jsx(I2,{position:"top-center",toastOptions:{duration:2e3}}),u&&g.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:()=>f(!1),children:g.jsxs("div",{className:"w-full max-w-lg bg-white dark:bg-neutral-900 text-neutral-900 dark:text-neutral-200 p-6 rounded-xl shadow-xl relative animate-fadeInUp",onClick:_=>_.stopPropagation(),children:[g.jsx("h2",{className:"text-lg font-bold mb-4",children:" "}),g.jsxs("div",{className:"text-sm leading-relaxed max-h-[60vh] overflow-y-auto pr-2",children:[g.jsx("p",{className:"mb-2",children:"( )     ,      ."}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"1.  "}),g.jsx("p",{className:"mb-2",children:"   ,  (,  )        ( ,  )"}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"2.  "}),g.jsx("p",{className:"mb-2",children:"                   "}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"3.  "}),g.jsx("p",{className:"mb-2",children:"                 "}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"4. 3 "}),g.jsx("p",{className:"mb-2",children:"          ."}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"5. "}),g.jsx("p",{className:"mb-2",children:" Supabase        ."}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"6. "}),g.jsx("p",{children:"   : unique950318@gmail.com"})]}),g.jsx("button",{onClick:()=>f(!1),className:"mt-4 w-full py-2 bg-neutral-900 dark:bg-neutral-700 text-white rounded-lg hover:bg-neutral-800 transition",children:""})]})})]})}const $z={id:"empty",name:"",birthDay:"",birthTime:"",gender:"",birthPlace:{name:"",lat:0,lon:0},relationship:"",memo:"",folder:"",mingSikType:"",DayChangeRule:"",favorite:!1,dateObj:new Date,corrected:new Date,correctedLocal:"",dayStem:"",ganjiText:"",ganji:"",calendarType:"solar",dir:"forward"};function Iz(){const[e,t]=R.useState(!1),[n,i]=R.useState(!1),o=ss(p=>p.migrateLocalToServer),l=ss(p=>p.loadFromServer),u=ss(p=>p.loading),f=Wn(p=>p.loaded),m=Wn(p=>p.loadFromServer);return R.useEffect(()=>{const p=kt;(async()=>{const{data:x,error:S}=await p.auth.getSession();if(S){i(!1),t(!0);return}i(!!x.session),t(!0)})();const{data:{subscription:_}}=p.auth.onAuthStateChange((x,S)=>{i(!!S),t(!0)});return()=>{_.unsubscribe()}},[]),R.useEffect(()=>{n&&(async()=>(await o(),await l(),await m()))()},[n,o,l,m]),e?n?f?u?g.jsx("main",{className:"flex min-h-screen items-center justify-center",children:g.jsx("p",{className:"text-sm text-neutral-500",children:"  ..."})}):g.jsx(zz,{isLoggedIn:n}):g.jsx("main",{className:"flex min-h-screen items-center justify-center",children:g.jsx("p",{className:"text-sm text-neutral-500",children:"  ..."})}):g.jsx(Pz,{}):g.jsx("main",{className:"flex min-h-screen items-center justify-center",children:g.jsx("p",{className:"text-sm text-neutral-500",children:"   ..."})})}function zz({isLoggedIn:e}){const{list:t}=ss(),[n,i]=R.useState(()=>t.length>0?t[0].id:""),[o,l]=R.useState(!1),[u,f]=R.useState(!1),[m,p]=R.useState(null),[y,_]=R.useState(!1),[x,S]=R.useState(!1),[T,k]=R.useState(!1);R.useEffect(()=>{_(!0),S(!1)},[]);const j=R.useMemo(()=>t.find(ie=>ie.id===n)??t[0],[t,n]),C=t.length>0&&!!j&&typeof j.birthDay=="string",P=C?j:$z,N=R.useMemo(()=>Sm(P),[P]),M=Bz(P),D=ie=>typeof ie=="string"&&ie.length>=2,$=ie=>Array.isArray(ie)&&ie.length===4&&ie.every(D),z=()=>l(!0),{settings:F,loadFromServer:K,saveToServer:oe,loaded:Q}=Wn();R.useEffect(()=>{e&&K()},[e,K]),R.useEffect(()=>{!e||!Q||oe()},[e,Q,F,oe]);const Y=F.sinsalBase===""?"day":"year",ne=F.sinsalBase===""?"day":"year";return g.jsxs("div",{className:"min-h-screen pb-16",children:[g.jsx(_I,{onOpenSidebar:()=>f(!0),onAddNew:z,onOpenCustom:()=>k(!0)}),g.jsx(dz,{open:T,onClose:()=>k(!1),onSave:ie=>{i(ie.id),_(!1),S(!1),f(!1)}}),g.jsx(I2,{position:"top-center"}),g.jsx(MI,{open:u,onClose:()=>f(!1),onView:ie=>{i(ie.id),f(!1),_(!1),S(!1);const Se=new Date;Se.setHours(12,0,0,0),fi.getState().setDate(Se),C&&j.id===ie.id?(_(!1),S(!1),f(!1)):(i(ie.id),f(!1),_(!1),S(!1))},onAddNew:z,onEdit:ie=>{p(ie),i(ie.id),f(!1),_(!1),S(!1)},onDeleteView:()=>{const ie=ss.getState().list[0]?.id??"";i(ie),_(!0),S(!1)}}),y&&g.jsx(fC,{}),o&&g.jsxs(g.Fragment,{children:[g.jsx("div",{id:"wizard-dim",className:"bg-black opacity-80 fixed inset-0 w-full min-h-full z-99"}),g.jsx("div",{className:"absolute inset-0 transition-opacity duration-150 opacity-100 z-100",children:g.jsx("div",{className:"py-6 pb-16 overflow-y-auto min-h-[100dvh]",children:g.jsx(d7,{onSave:ie=>{i(ie.id),_(!1),S(!1),f(!1),requestAnimationFrame(()=>l(!1))},onClose:()=>l(!1)})})})]}),C&&!y&&!x&&g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"pt-18 pb-4",children:g.jsx(E4,{data:j,hourTable:j.mingSikType??"/"})}),g.jsx(tz,{ms:j}),g.jsx("div",{children:g.jsx(F8,{data:j})}),g.jsx("div",{className:"max-w-[640px] mx-auto mb-8",children:g.jsx(Rz,{ms:j,natal:$(N)?N:[],chain:M,basis:{voidBasis:Y,samjaeBasis:ne},includeTenGod:!0,lunarPillars:[]})})]}),x&&g.jsx("div",{className:"pt-18 pb-4",children:g.jsx(QI,{people:t})}),m&&g.jsx("div",{className:"fixed inset-0 z-55 flex items-center justify-center bg-black/60",children:g.jsx("div",{className:"bg-white dark:bg-neutral-950 p-4 rounded-xl w-full max-h-[90dvh] max-w-xl shadow-lg",children:g.jsx(II,{item:m,onClose:()=>{p(null)}})})}),g.jsx(TI,{onShowToday:()=>{_(!0),S(!1)},onShowCouple:()=>{S(!0),_(!1)}}),g.jsx(ez,{})]})}_N.createRoot(document.getElementById("root")).render(g.jsx(R.StrictMode,{children:g.jsx(Iz,{})}));
