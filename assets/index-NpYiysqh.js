function TE(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(e,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();function wi(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function dp(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var n=function r(){var i=!1;try{i=this instanceof r}catch{}return i?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var N_={exports:{}},zh={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CC;function jG(){if(CC)return zh;CC=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,i,a){var o=null;if(a!==void 0&&(o=""+a),i.key!==void 0&&(o=""+i.key),"key"in i){a={};for(var l in i)l!=="key"&&(a[l]=i[l])}else a=i;return i=a.ref,{$$typeof:e,type:r,key:o,ref:i!==void 0?i:null,props:a}}return zh.Fragment=t,zh.jsx=n,zh.jsxs=n,zh}var MC;function OG(){return MC||(MC=1,N_.exports=jG()),N_.exports}var g=OG();const P$="harim.theme",yk="harim.settings.v1";function R$(){try{const e=localStorage.getItem(P$);if(e==="dark"||e==="light")return e;const t=localStorage.getItem(yk);if(t){const r=JSON.parse(t)?.theme;if(r==="dark"||r==="light")return r}return null}catch{return null}}function L$(e){try{localStorage.setItem(P$,e);const t=localStorage.getItem(yk),n=t?JSON.parse(t):{};localStorage.setItem(yk,JSON.stringify({...n,theme:e}))}catch{}}function I$(e){const t=document.documentElement;t.classList.toggle("dark",e==="dark"),t.style.setProperty("color-scheme",e)}(function(){try{const e=R$()??(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");I$(e)}catch{}})();var C_={exports:{}},Uh={},M_={exports:{}},D_={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DC;function NG(){return DC||(DC=1,(function(e){function t(G,J){var te=G.length;G.push(J);e:for(;0<te;){var ce=te-1>>>1,oe=G[ce];if(0<i(oe,J))G[ce]=J,G[te]=oe,te=ce;else break e}}function n(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var J=G[0],te=G.pop();if(te!==J){G[0]=te;e:for(var ce=0,oe=G.length,B=oe>>>1;ce<B;){var V=2*(ce+1)-1,ie=G[V],Q=V+1,se=G[Q];if(0>i(ie,te))Q<oe&&0>i(se,ie)?(G[ce]=se,G[Q]=te,ce=Q):(G[ce]=ie,G[V]=te,ce=V);else if(Q<oe&&0>i(se,te))G[ce]=se,G[Q]=te,ce=Q;else break e}}return J}function i(G,J){var te=G.sortIndex-J.sortIndex;return te!==0?te:G.id-J.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var u=[],d=[],h=1,p=null,b=3,y=!1,S=!1,_=!1,k=!1,A=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;function C(G){for(var J=n(d);J!==null;){if(J.callback===null)r(d);else if(J.startTime<=G)r(d),J.sortIndex=J.expirationTime,t(u,J);else break;J=n(d)}}function D(G){if(_=!1,C(G),!S)if(n(u)!==null)S=!0,P||(P=!0,z());else{var J=n(d);J!==null&&Z(D,J.startTime-G)}}var P=!1,$=-1,U=5,Y=-1;function K(){return k?!0:!(e.unstable_now()-Y<U)}function F(){if(k=!1,P){var G=e.unstable_now();Y=G;var J=!0;try{e:{S=!1,_&&(_=!1,N($),$=-1),y=!0;var te=b;try{t:{for(C(G),p=n(u);p!==null&&!(p.expirationTime>G&&K());){var ce=p.callback;if(typeof ce=="function"){p.callback=null,b=p.priorityLevel;var oe=ce(p.expirationTime<=G);if(G=e.unstable_now(),typeof oe=="function"){p.callback=oe,C(G),J=!0;break t}p===n(u)&&r(u),C(G)}else r(u);p=n(u)}if(p!==null)J=!0;else{var B=n(d);B!==null&&Z(D,B.startTime-G),J=!1}}break e}finally{p=null,b=te,y=!1}J=void 0}}finally{J?z():P=!1}}}var z;if(typeof j=="function")z=function(){j(F)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,X=W.port2;W.port1.onmessage=F,z=function(){X.postMessage(null)}}else z=function(){A(F,0)};function Z(G,J){$=A(function(){G(e.unstable_now())},J)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(G){G.callback=null},e.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<G?Math.floor(1e3/G):5},e.unstable_getCurrentPriorityLevel=function(){return b},e.unstable_next=function(G){switch(b){case 1:case 2:case 3:var J=3;break;default:J=b}var te=b;b=J;try{return G()}finally{b=te}},e.unstable_requestPaint=function(){k=!0},e.unstable_runWithPriority=function(G,J){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var te=b;b=G;try{return J()}finally{b=te}},e.unstable_scheduleCallback=function(G,J,te){var ce=e.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?ce+te:ce):te=ce,G){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=te+oe,G={id:h++,callback:J,priorityLevel:G,startTime:te,expirationTime:oe,sortIndex:-1},te>ce?(G.sortIndex=te,t(d,G),n(u)===null&&G===n(d)&&(_?(N($),$=-1):_=!0,Z(D,te-ce))):(G.sortIndex=oe,t(u,G),S||y||(S=!0,P||(P=!0,z()))),G},e.unstable_shouldYield=K,e.unstable_wrapCallback=function(G){var J=b;return function(){var te=b;b=J;try{return G.apply(this,arguments)}finally{b=te}}}})(D_)),D_}var PC;function CG(){return PC||(PC=1,M_.exports=NG()),M_.exports}var P_={exports:{}},ut={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RC;function MG(){if(RC)return ut;RC=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),b=Symbol.iterator;function y(B){return B===null||typeof B!="object"?null:(B=b&&B[b]||B["@@iterator"],typeof B=="function"?B:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,k={};function A(B,V,ie){this.props=B,this.context=V,this.refs=k,this.updater=ie||S}A.prototype.isReactComponent={},A.prototype.setState=function(B,V){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,V,"setState")},A.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function N(){}N.prototype=A.prototype;function j(B,V,ie){this.props=B,this.context=V,this.refs=k,this.updater=ie||S}var C=j.prototype=new N;C.constructor=j,_(C,A.prototype),C.isPureReactComponent=!0;var D=Array.isArray;function P(){}var $={H:null,A:null,T:null,S:null},U=Object.prototype.hasOwnProperty;function Y(B,V,ie){var Q=ie.ref;return{$$typeof:e,type:B,key:V,ref:Q!==void 0?Q:null,props:ie}}function K(B,V){return Y(B.type,V,B.props)}function F(B){return typeof B=="object"&&B!==null&&B.$$typeof===e}function z(B){var V={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(ie){return V[ie]})}var W=/\/+/g;function X(B,V){return typeof B=="object"&&B!==null&&B.key!=null?z(""+B.key):V.toString(36)}function Z(B){switch(B.status){case"fulfilled":return B.value;case"rejected":throw B.reason;default:switch(typeof B.status=="string"?B.then(P,P):(B.status="pending",B.then(function(V){B.status==="pending"&&(B.status="fulfilled",B.value=V)},function(V){B.status==="pending"&&(B.status="rejected",B.reason=V)})),B.status){case"fulfilled":return B.value;case"rejected":throw B.reason}}throw B}function G(B,V,ie,Q,se){var me=typeof B;(me==="undefined"||me==="boolean")&&(B=null);var he=!1;if(B===null)he=!0;else switch(me){case"bigint":case"string":case"number":he=!0;break;case"object":switch(B.$$typeof){case e:case t:he=!0;break;case h:return he=B._init,G(he(B._payload),V,ie,Q,se)}}if(he)return se=se(B),he=Q===""?"."+X(B,0):Q,D(se)?(ie="",he!=null&&(ie=he.replace(W,"$&/")+"/"),G(se,V,ie,"",function(Ee){return Ee})):se!=null&&(F(se)&&(se=K(se,ie+(se.key==null||B&&B.key===se.key?"":(""+se.key).replace(W,"$&/")+"/")+he)),V.push(se)),1;he=0;var _e=Q===""?".":Q+":";if(D(B))for(var re=0;re<B.length;re++)Q=B[re],me=_e+X(Q,re),he+=G(Q,V,ie,me,se);else if(re=y(B),typeof re=="function")for(B=re.call(B),re=0;!(Q=B.next()).done;)Q=Q.value,me=_e+X(Q,re++),he+=G(Q,V,ie,me,se);else if(me==="object"){if(typeof B.then=="function")return G(Z(B),V,ie,Q,se);throw V=String(B),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.")}return he}function J(B,V,ie){if(B==null)return B;var Q=[],se=0;return G(B,Q,"","",function(me){return V.call(ie,me,se++)}),Q}function te(B){if(B._status===-1){var V=B._result;V=V(),V.then(function(ie){(B._status===0||B._status===-1)&&(B._status=1,B._result=ie)},function(ie){(B._status===0||B._status===-1)&&(B._status=2,B._result=ie)}),B._status===-1&&(B._status=0,B._result=V)}if(B._status===1)return B._result.default;throw B._result}var ce=typeof reportError=="function"?reportError:function(B){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var V=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof B=="object"&&B!==null&&typeof B.message=="string"?String(B.message):String(B),error:B});if(!window.dispatchEvent(V))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",B);return}console.error(B)},oe={map:J,forEach:function(B,V,ie){J(B,function(){V.apply(this,arguments)},ie)},count:function(B){var V=0;return J(B,function(){V++}),V},toArray:function(B){return J(B,function(V){return V})||[]},only:function(B){if(!F(B))throw Error("React.Children.only expected to receive a single React element child.");return B}};return ut.Activity=p,ut.Children=oe,ut.Component=A,ut.Fragment=n,ut.Profiler=i,ut.PureComponent=j,ut.StrictMode=r,ut.Suspense=u,ut.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=$,ut.__COMPILER_RUNTIME={__proto__:null,c:function(B){return $.H.useMemoCache(B)}},ut.cache=function(B){return function(){return B.apply(null,arguments)}},ut.cacheSignal=function(){return null},ut.cloneElement=function(B,V,ie){if(B==null)throw Error("The argument must be a React element, but you passed "+B+".");var Q=_({},B.props),se=B.key;if(V!=null)for(me in V.key!==void 0&&(se=""+V.key),V)!U.call(V,me)||me==="key"||me==="__self"||me==="__source"||me==="ref"&&V.ref===void 0||(Q[me]=V[me]);var me=arguments.length-2;if(me===1)Q.children=ie;else if(1<me){for(var he=Array(me),_e=0;_e<me;_e++)he[_e]=arguments[_e+2];Q.children=he}return Y(B.type,se,Q)},ut.createContext=function(B){return B={$$typeof:o,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null},B.Provider=B,B.Consumer={$$typeof:a,_context:B},B},ut.createElement=function(B,V,ie){var Q,se={},me=null;if(V!=null)for(Q in V.key!==void 0&&(me=""+V.key),V)U.call(V,Q)&&Q!=="key"&&Q!=="__self"&&Q!=="__source"&&(se[Q]=V[Q]);var he=arguments.length-2;if(he===1)se.children=ie;else if(1<he){for(var _e=Array(he),re=0;re<he;re++)_e[re]=arguments[re+2];se.children=_e}if(B&&B.defaultProps)for(Q in he=B.defaultProps,he)se[Q]===void 0&&(se[Q]=he[Q]);return Y(B,me,se)},ut.createRef=function(){return{current:null}},ut.forwardRef=function(B){return{$$typeof:l,render:B}},ut.isValidElement=F,ut.lazy=function(B){return{$$typeof:h,_payload:{_status:-1,_result:B},_init:te}},ut.memo=function(B,V){return{$$typeof:d,type:B,compare:V===void 0?null:V}},ut.startTransition=function(B){var V=$.T,ie={};$.T=ie;try{var Q=B(),se=$.S;se!==null&&se(ie,Q),typeof Q=="object"&&Q!==null&&typeof Q.then=="function"&&Q.then(P,ce)}catch(me){ce(me)}finally{V!==null&&ie.types!==null&&(V.types=ie.types),$.T=V}},ut.unstable_useCacheRefresh=function(){return $.H.useCacheRefresh()},ut.use=function(B){return $.H.use(B)},ut.useActionState=function(B,V,ie){return $.H.useActionState(B,V,ie)},ut.useCallback=function(B,V){return $.H.useCallback(B,V)},ut.useContext=function(B){return $.H.useContext(B)},ut.useDebugValue=function(){},ut.useDeferredValue=function(B,V){return $.H.useDeferredValue(B,V)},ut.useEffect=function(B,V){return $.H.useEffect(B,V)},ut.useEffectEvent=function(B){return $.H.useEffectEvent(B)},ut.useId=function(){return $.H.useId()},ut.useImperativeHandle=function(B,V,ie){return $.H.useImperativeHandle(B,V,ie)},ut.useInsertionEffect=function(B,V){return $.H.useInsertionEffect(B,V)},ut.useLayoutEffect=function(B,V){return $.H.useLayoutEffect(B,V)},ut.useMemo=function(B,V){return $.H.useMemo(B,V)},ut.useOptimistic=function(B,V){return $.H.useOptimistic(B,V)},ut.useReducer=function(B,V,ie){return $.H.useReducer(B,V,ie)},ut.useRef=function(B){return $.H.useRef(B)},ut.useState=function(B){return $.H.useState(B)},ut.useSyncExternalStore=function(B,V,ie){return $.H.useSyncExternalStore(B,V,ie)},ut.useTransition=function(){return $.H.useTransition()},ut.version="19.2.1",ut}var LC;function ff(){return LC||(LC=1,P_.exports=MG()),P_.exports}var R_={exports:{}},Dr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IC;function DG(){if(IC)return Dr;IC=1;var e=ff();function t(u){var d="https://react.dev/errors/"+u;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)d+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+u+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(u,d,h){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:p==null?null:""+p,children:u,containerInfo:d,implementation:h}}var o=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(u,d){if(u==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return Dr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Dr.createPortal=function(u,d){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(t(299));return a(u,d,null,h)},Dr.flushSync=function(u){var d=o.T,h=r.p;try{if(o.T=null,r.p=2,u)return u()}finally{o.T=d,r.p=h,r.d.f()}},Dr.preconnect=function(u,d){typeof u=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,r.d.C(u,d))},Dr.prefetchDNS=function(u){typeof u=="string"&&r.d.D(u)},Dr.preinit=function(u,d){if(typeof u=="string"&&d&&typeof d.as=="string"){var h=d.as,p=l(h,d.crossOrigin),b=typeof d.integrity=="string"?d.integrity:void 0,y=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;h==="style"?r.d.S(u,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:p,integrity:b,fetchPriority:y}):h==="script"&&r.d.X(u,{crossOrigin:p,integrity:b,fetchPriority:y,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},Dr.preinitModule=function(u,d){if(typeof u=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var h=l(d.as,d.crossOrigin);r.d.M(u,{crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&r.d.M(u)},Dr.preload=function(u,d){if(typeof u=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var h=d.as,p=l(h,d.crossOrigin);r.d.L(u,h,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},Dr.preloadModule=function(u,d){if(typeof u=="string")if(d){var h=l(d.as,d.crossOrigin);r.d.m(u,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else r.d.m(u)},Dr.requestFormReset=function(u){r.d.r(u)},Dr.unstable_batchedUpdates=function(u,d){return u(d)},Dr.useFormState=function(u,d,h){return o.H.useFormState(u,d,h)},Dr.useFormStatus=function(){return o.H.useHostTransitionStatus()},Dr.version="19.2.1",Dr}var $C;function $$(){if($C)return R_.exports;$C=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),R_.exports=DG(),R_.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BC;function PG(){if(BC)return Uh;BC=1;var e=CG(),t=ff(),n=$$();function r(s){var c="https://react.dev/errors/"+s;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)c+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+s+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var c=s,m=s;if(s.alternate)for(;c.return;)c=c.return;else{s=c;do c=s,(c.flags&4098)!==0&&(m=c.return),s=c.return;while(s)}return c.tag===3?m:null}function o(s){if(s.tag===13){var c=s.memoizedState;if(c===null&&(s=s.alternate,s!==null&&(c=s.memoizedState)),c!==null)return c.dehydrated}return null}function l(s){if(s.tag===31){var c=s.memoizedState;if(c===null&&(s=s.alternate,s!==null&&(c=s.memoizedState)),c!==null)return c.dehydrated}return null}function u(s){if(a(s)!==s)throw Error(r(188))}function d(s){var c=s.alternate;if(!c){if(c=a(s),c===null)throw Error(r(188));return c!==s?null:s}for(var m=s,x=c;;){var T=m.return;if(T===null)break;var O=T.alternate;if(O===null){if(x=T.return,x!==null){m=x;continue}break}if(T.child===O.child){for(O=T.child;O;){if(O===m)return u(T),s;if(O===x)return u(T),c;O=O.sibling}throw Error(r(188))}if(m.return!==x.return)m=T,x=O;else{for(var I=!1,q=T.child;q;){if(q===m){I=!0,m=T,x=O;break}if(q===x){I=!0,x=T,m=O;break}q=q.sibling}if(!I){for(q=O.child;q;){if(q===m){I=!0,m=O,x=T;break}if(q===x){I=!0,x=O,m=T;break}q=q.sibling}if(!I)throw Error(r(189))}}if(m.alternate!==x)throw Error(r(190))}if(m.tag!==3)throw Error(r(188));return m.stateNode.current===m?s:c}function h(s){var c=s.tag;if(c===5||c===26||c===27||c===6)return s;for(s=s.child;s!==null;){if(c=h(s),c!==null)return c;s=s.sibling}return null}var p=Object.assign,b=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),N=Symbol.for("react.consumer"),j=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),$=Symbol.for("react.memo"),U=Symbol.for("react.lazy"),Y=Symbol.for("react.activity"),K=Symbol.for("react.memo_cache_sentinel"),F=Symbol.iterator;function z(s){return s===null||typeof s!="object"?null:(s=F&&s[F]||s["@@iterator"],typeof s=="function"?s:null)}var W=Symbol.for("react.client.reference");function X(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===W?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case _:return"Fragment";case A:return"Profiler";case k:return"StrictMode";case D:return"Suspense";case P:return"SuspenseList";case Y:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case S:return"Portal";case j:return s.displayName||"Context";case N:return(s._context.displayName||"Context")+".Consumer";case C:var c=s.render;return s=s.displayName,s||(s=c.displayName||c.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case $:return c=s.displayName||null,c!==null?c:X(s.type)||"Memo";case U:c=s._payload,s=s._init;try{return X(s(c))}catch{}}return null}var Z=Array.isArray,G=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te={pending:!1,data:null,method:null,action:null},ce=[],oe=-1;function B(s){return{current:s}}function V(s){0>oe||(s.current=ce[oe],ce[oe]=null,oe--)}function ie(s,c){oe++,ce[oe]=s.current,s.current=c}var Q=B(null),se=B(null),me=B(null),he=B(null);function _e(s,c){switch(ie(me,c),ie(se,s),ie(Q,null),c.nodeType){case 9:case 11:s=(s=c.documentElement)&&(s=s.namespaceURI)?eC(s):0;break;default:if(s=c.tagName,c=c.namespaceURI)c=eC(c),s=tC(c,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}V(Q),ie(Q,s)}function re(){V(Q),V(se),V(me)}function Ee(s){s.memoizedState!==null&&ie(he,s);var c=Q.current,m=tC(c,s.type);c!==m&&(ie(se,s),ie(Q,m))}function we(s){se.current===s&&(V(Q),V(se)),he.current===s&&(V(he),Lh._currentValue=te)}var le,Ue;function Fe(s){if(le===void 0)try{throw Error()}catch(m){var c=m.stack.trim().match(/\n( *(at )?)/);le=c&&c[1]||"",Ue=-1<m.stack.indexOf(`
    at`)?" (<anonymous>)":-1<m.stack.indexOf("@")?"@unknown:0:0":""}return`
`+le+s+Ue}var Ne=!1;function Pe(s,c){if(!s||Ne)return"";Ne=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var x={DetermineComponentFrameRoot:function(){try{if(c){var je=function(){throw Error()};if(Object.defineProperty(je.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(je,[])}catch(ve){var ye=ve}Reflect.construct(s,[],je)}else{try{je.call()}catch(ve){ye=ve}s.call(je.prototype)}}else{try{throw Error()}catch(ve){ye=ve}(je=s())&&typeof je.catch=="function"&&je.catch(function(){})}}catch(ve){if(ve&&ye&&typeof ve.stack=="string")return[ve.stack,ye.stack]}return[null,null]}};x.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var T=Object.getOwnPropertyDescriptor(x.DetermineComponentFrameRoot,"name");T&&T.configurable&&Object.defineProperty(x.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var O=x.DetermineComponentFrameRoot(),I=O[0],q=O[1];if(I&&q){var ne=I.split(`
`),ge=q.split(`
`);for(T=x=0;x<ne.length&&!ne[x].includes("DetermineComponentFrameRoot");)x++;for(;T<ge.length&&!ge[T].includes("DetermineComponentFrameRoot");)T++;if(x===ne.length||T===ge.length)for(x=ne.length-1,T=ge.length-1;1<=x&&0<=T&&ne[x]!==ge[T];)T--;for(;1<=x&&0<=T;x--,T--)if(ne[x]!==ge[T]){if(x!==1||T!==1)do if(x--,T--,0>T||ne[x]!==ge[T]){var ke=`
`+ne[x].replace(" at new "," at ");return s.displayName&&ke.includes("<anonymous>")&&(ke=ke.replace("<anonymous>",s.displayName)),ke}while(1<=x&&0<=T);break}}}finally{Ne=!1,Error.prepareStackTrace=m}return(m=s?s.displayName||s.name:"")?Fe(m):""}function Ge(s,c){switch(s.tag){case 26:case 27:case 5:return Fe(s.type);case 16:return Fe("Lazy");case 13:return s.child!==c&&c!==null?Fe("Suspense Fallback"):Fe("Suspense");case 19:return Fe("SuspenseList");case 0:case 15:return Pe(s.type,!1);case 11:return Pe(s.type.render,!1);case 1:return Pe(s.type,!0);case 31:return Fe("Activity");default:return""}}function Oe(s){try{var c="",m=null;do c+=Ge(s,m),m=s,s=s.return;while(s);return c}catch(x){return`
Error generating stack: `+x.message+`
`+x.stack}}var Me=Object.prototype.hasOwnProperty,Be=e.unstable_scheduleCallback,lt=e.unstable_cancelCallback,ue=e.unstable_shouldYield,Ce=e.unstable_requestPaint,ze=e.unstable_now,it=e.unstable_getCurrentPriorityLevel,Et=e.unstable_ImmediatePriority,pt=e.unstable_UserBlockingPriority,Qt=e.unstable_NormalPriority,$r=e.unstable_LowPriority,Br=e.unstable_IdlePriority,Zi=e.log,ao=e.unstable_setDisableYieldValue,It=null,an=null;function zr(s){if(typeof Zi=="function"&&ao(s),an&&typeof an.setStrictMode=="function")try{an.setStrictMode(It,s)}catch{}}var Yn=Math.clz32?Math.clz32:De,qo=Math.log,If=Math.LN2;function De(s){return s>>>=0,s===0?32:31-(qo(s)/If|0)|0}var nt=256,Dt=262144,br=4194304;function ei(s){var c=s&42;if(c!==0)return c;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function ju(s,c,m){var x=s.pendingLanes;if(x===0)return 0;var T=0,O=s.suspendedLanes,I=s.pingedLanes;s=s.warmLanes;var q=x&134217727;return q!==0?(x=q&~O,x!==0?T=ei(x):(I&=q,I!==0?T=ei(I):m||(m=q&~s,m!==0&&(T=ei(m))))):(q=x&~O,q!==0?T=ei(q):I!==0?T=ei(I):m||(m=x&~s,m!==0&&(T=ei(m)))),T===0?0:c!==0&&c!==T&&(c&O)===0&&(O=T&-T,m=c&-c,O>=m||O===32&&(m&4194048)!==0)?c:T}function tc(s,c){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&c)===0}function Ix(s,c){switch(s){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Wp(){var s=br;return br<<=1,(br&62914560)===0&&(br=4194304),s}function $f(s){for(var c=[],m=0;31>m;m++)c.push(s);return c}function Yo(s,c){s.pendingLanes|=c,c!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function $x(s,c,m,x,T,O){var I=s.pendingLanes;s.pendingLanes=m,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=m,s.entangledLanes&=m,s.errorRecoveryDisabledLanes&=m,s.shellSuspendCounter=0;var q=s.entanglements,ne=s.expirationTimes,ge=s.hiddenUpdates;for(m=I&~m;0<m;){var ke=31-Yn(m),je=1<<ke;q[ke]=0,ne[ke]=-1;var ye=ge[ke];if(ye!==null)for(ge[ke]=null,ke=0;ke<ye.length;ke++){var ve=ye[ke];ve!==null&&(ve.lane&=-536870913)}m&=~je}x!==0&&Vp(s,x,0),O!==0&&T===0&&s.tag!==0&&(s.suspendedLanes|=O&~(I&~c))}function Vp(s,c,m){s.pendingLanes|=c,s.suspendedLanes&=~c;var x=31-Yn(c);s.entangledLanes|=c,s.entanglements[x]=s.entanglements[x]|1073741824|m&261930}function Zp(s,c){var m=s.entangledLanes|=c;for(s=s.entanglements;m;){var x=31-Yn(m),T=1<<x;T&c|s[x]&c&&(s[x]|=c),m&=~T}}function Xp(s,c){var m=c&-c;return m=(m&42)!==0?1:ti(m),(m&(s.suspendedLanes|c))!==0?0:m}function ti(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function We(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Bf(){var s=J.p;return s!==0?s:(s=window.event,s===void 0?32:kC(s.type))}function zf(s,c){var m=J.p;try{return J.p=s,c()}finally{J.p=m}}var Na=Math.random().toString(36).slice(2),Pn="__reactFiber$"+Na,ir="__reactProps$"+Na,Ko="__reactContainer$"+Na,oo="__reactEvents$"+Na,Jp="__reactListeners$"+Na,Bx="__reactHandles$"+Na,Qp="__reactResources$"+Na,nc="__reactMarker$"+Na;function Uf(s){delete s[Pn],delete s[ir],delete s[oo],delete s[Jp],delete s[Bx]}function Wo(s){var c=s[Pn];if(c)return c;for(var m=s.parentNode;m;){if(c=m[Ko]||m[Pn]){if(m=c.alternate,c.child!==null||m!==null&&m.child!==null)for(s=lC(s);s!==null;){if(m=s[Pn])return m;s=lC(s)}return c}s=m,m=s.parentNode}return null}function Ks(s){if(s=s[Pn]||s[Ko]){var c=s.tag;if(c===5||c===6||c===13||c===31||c===26||c===27||c===3)return s}return null}function so(s){var c=s.tag;if(c===5||c===26||c===27||c===6)return s.stateNode;throw Error(r(33))}function Ws(s){var c=s[Qp];return c||(c=s[Qp]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function Rn(s){s[nc]=!0}var eg=new Set,tg={};function Vo(s,c){lo(s,c),lo(s+"Capture",c)}function lo(s,c){for(tg[s]=c,s=0;s<c.length;s++)eg.add(c[s])}var rc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ff={},Hf={};function ic(s){return Me.call(Hf,s)?!0:Me.call(Ff,s)?!1:rc.test(s)?Hf[s]=!0:(Ff[s]=!0,!1)}function gt(s,c,m){if(ic(c))if(m===null)s.removeAttribute(c);else{switch(typeof m){case"undefined":case"function":case"symbol":s.removeAttribute(c);return;case"boolean":var x=c.toLowerCase().slice(0,5);if(x!=="data-"&&x!=="aria-"){s.removeAttribute(c);return}}s.setAttribute(c,""+m)}}function Ut(s,c,m){if(m===null)s.removeAttribute(c);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(c);return}s.setAttribute(c,""+m)}}function ni(s,c,m,x){if(x===null)s.removeAttribute(m);else{switch(typeof x){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(m);return}s.setAttributeNS(c,m,""+x)}}function Kn(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Zo(s){var c=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function Gf(s,c,m){var x=Object.getOwnPropertyDescriptor(s.constructor.prototype,c);if(!s.hasOwnProperty(c)&&typeof x<"u"&&typeof x.get=="function"&&typeof x.set=="function"){var T=x.get,O=x.set;return Object.defineProperty(s,c,{configurable:!0,get:function(){return T.call(this)},set:function(I){m=""+I,O.call(this,I)}}),Object.defineProperty(s,c,{enumerable:x.enumerable}),{getValue:function(){return m},setValue:function(I){m=""+I},stopTracking:function(){s._valueTracker=null,delete s[c]}}}}function ct(s){if(!s._valueTracker){var c=Zo(s)?"checked":"value";s._valueTracker=Gf(s,c,""+s[c])}}function on(s){if(!s)return!1;var c=s._valueTracker;if(!c)return!0;var m=c.getValue(),x="";return s&&(x=Zo(s)?s.checked?"true":"false":s.value),s=x,s!==m?(c.setValue(s),!0):!1}function Vs(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Ou=/[\n"\\]/g;function en(s){return s.replace(Ou,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function qf(s,c,m,x,T,O,I,q){s.name="",I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?s.type=I:s.removeAttribute("type"),c!=null?I==="number"?(c===0&&s.value===""||s.value!=c)&&(s.value=""+Kn(c)):s.value!==""+Kn(c)&&(s.value=""+Kn(c)):I!=="submit"&&I!=="reset"||s.removeAttribute("value"),c!=null?Ca(s,I,Kn(c)):m!=null?Ca(s,I,Kn(m)):x!=null&&s.removeAttribute("value"),T==null&&O!=null&&(s.defaultChecked=!!O),T!=null&&(s.checked=T&&typeof T!="function"&&typeof T!="symbol"),q!=null&&typeof q!="function"&&typeof q!="symbol"&&typeof q!="boolean"?s.name=""+Kn(q):s.removeAttribute("name")}function ac(s,c,m,x,T,O,I,q){if(O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"&&(s.type=O),c!=null||m!=null){if(!(O!=="submit"&&O!=="reset"||c!=null)){ct(s);return}m=m!=null?""+Kn(m):"",c=c!=null?""+Kn(c):m,q||c===s.value||(s.value=c),s.defaultValue=c}x=x??T,x=typeof x!="function"&&typeof x!="symbol"&&!!x,s.checked=q?s.checked:!!x,s.defaultChecked=!!x,I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"&&(s.name=I),ct(s)}function Ca(s,c,m){c==="number"&&Vs(s.ownerDocument)===s||s.defaultValue===""+m||(s.defaultValue=""+m)}function qt(s,c,m,x){if(s=s.options,c){c={};for(var T=0;T<m.length;T++)c["$"+m[T]]=!0;for(m=0;m<s.length;m++)T=c.hasOwnProperty("$"+s[m].value),s[m].selected!==T&&(s[m].selected=T),T&&x&&(s[m].defaultSelected=!0)}else{for(m=""+Kn(m),c=null,T=0;T<s.length;T++){if(s[T].value===m){s[T].selected=!0,x&&(s[T].defaultSelected=!0);return}c!==null||s[T].disabled||(c=s[T])}c!==null&&(c.selected=!0)}}function co(s,c,m){if(c!=null&&(c=""+Kn(c),c!==s.value&&(s.value=c),m==null)){s.defaultValue!==c&&(s.defaultValue=c);return}s.defaultValue=m!=null?""+Kn(m):""}function Zs(s,c,m,x){if(c==null){if(x!=null){if(m!=null)throw Error(r(92));if(Z(x)){if(1<x.length)throw Error(r(93));x=x[0]}m=x}m==null&&(m=""),c=m}m=Kn(c),s.defaultValue=m,x=s.textContent,x===m&&x!==""&&x!==null&&(s.value=x),ct(s)}function Xi(s,c){if(c){var m=s.firstChild;if(m&&m===s.lastChild&&m.nodeType===3){m.nodeValue=c;return}}s.textContent=c}var Yf=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Xs(s,c,m){var x=c.indexOf("--")===0;m==null||typeof m=="boolean"||m===""?x?s.setProperty(c,""):c==="float"?s.cssFloat="":s[c]="":x?s.setProperty(c,m):typeof m!="number"||m===0||Yf.has(c)?c==="float"?s.cssFloat=m:s[c]=(""+m).trim():s[c]=m+"px"}function Nu(s,c,m){if(c!=null&&typeof c!="object")throw Error(r(62));if(s=s.style,m!=null){for(var x in m)!m.hasOwnProperty(x)||c!=null&&c.hasOwnProperty(x)||(x.indexOf("--")===0?s.setProperty(x,""):x==="float"?s.cssFloat="":s[x]="");for(var T in c)x=c[T],c.hasOwnProperty(T)&&m[T]!==x&&Xs(s,T,x)}else for(var O in c)c.hasOwnProperty(O)&&Xs(s,O,c[O])}function oc(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Cu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Kf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Js(s){return Kf.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function ri(){}var Mu=null;function sc(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Qs=null,ot=null;function Ei(s){var c=Ks(s);if(c&&(s=c.stateNode)){var m=s[ir]||null;e:switch(s=c.stateNode,c.type){case"input":if(qf(s,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name),c=m.name,m.type==="radio"&&c!=null){for(m=s;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll('input[name="'+en(""+c)+'"][type="radio"]'),c=0;c<m.length;c++){var x=m[c];if(x!==s&&x.form===s.form){var T=x[ir]||null;if(!T)throw Error(r(90));qf(x,T.value,T.defaultValue,T.defaultValue,T.checked,T.defaultChecked,T.type,T.name)}}for(c=0;c<m.length;c++)x=m[c],x.form===s.form&&on(x)}break e;case"textarea":co(s,m.value,m.defaultValue);break e;case"select":c=m.value,c!=null&&qt(s,!!m.multiple,c,!1)}}}var Pt=!1;function Wf(s,c,m){if(Pt)return s(c,m);Pt=!0;try{var x=s(c);return x}finally{if(Pt=!1,(Qs!==null||ot!==null)&&(Xg(),Qs&&(c=Qs,s=ot,ot=Qs=null,Ei(c),s)))for(c=0;c<s.length;c++)Ei(s[c])}}function Xo(s,c){var m=s.stateNode;if(m===null)return null;var x=m[ir]||null;if(x===null)return null;m=x[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(x=!x.disabled)||(s=s.type,x=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!x;break e;default:s=!1}if(s)return null;if(m&&typeof m!="function")throw Error(r(231,c,typeof m));return m}var Ti=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),lc=!1;if(Ti)try{var Ai={};Object.defineProperty(Ai,"passive",{get:function(){lc=!0}}),window.addEventListener("test",Ai,Ai),window.removeEventListener("test",Ai,Ai)}catch{lc=!1}var Ji=null,Jo=null,wn=null;function uo(){if(wn)return wn;var s,c=Jo,m=c.length,x,T="value"in Ji?Ji.value:Ji.textContent,O=T.length;for(s=0;s<m&&c[s]===T[s];s++);var I=m-s;for(x=1;x<=I&&c[m-x]===T[O-x];x++);return wn=T.slice(s,1<x?1-x:void 0)}function cc(s){var c=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&c===13&&(s=13)):s=c,s===10&&(s=13),32<=s||s===13?s:0}function uc(){return!0}function ng(){return!1}function yr(s){function c(m,x,T,O,I){this._reactName=m,this._targetInst=T,this.type=x,this.nativeEvent=O,this.target=I,this.currentTarget=null;for(var q in s)s.hasOwnProperty(q)&&(m=s[q],this[q]=m?m(O):O[q]);return this.isDefaultPrevented=(O.defaultPrevented!=null?O.defaultPrevented:O.returnValue===!1)?uc:ng,this.isPropagationStopped=ng,this}return p(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=uc)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=uc)},persist:function(){},isPersistent:uc}),c}var Ma={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Du=yr(Ma),el=p({},Ma,{view:0,detail:0}),xt=yr(el),Vf,Ur,Da,dc=p({},el,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:th,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Da&&(Da&&s.type==="mousemove"?(Vf=s.screenX-Da.screenX,Ur=s.screenY-Da.screenY):Ur=Vf=0,Da=s),Vf)},movementY:function(s){return"movementY"in s?s.movementY:Ur}}),rg=yr(dc),Zf=p({},dc,{dataTransfer:0}),zx=yr(Zf),ig=p({},el,{relatedTarget:0}),Xf=yr(ig),Ux=p({},Ma,{animationName:0,elapsedTime:0,pseudoElement:0}),Jf=yr(Ux),Fx=p({},Ma,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Qi=yr(Fx),Hx=p({},Ma,{data:0}),Qf=yr(Hx),fo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ag={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},og={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function eh(s){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(s):(s=og[s])?!!c[s]:!1}function th(){return eh}var sg=p({},el,{key:function(s){if(s.key){var c=fo[s.key]||s.key;if(c!=="Unidentified")return c}return s.type==="keypress"?(s=cc(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?ag[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:th,charCode:function(s){return s.type==="keypress"?cc(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?cc(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),lg=yr(sg),Gx=p({},dc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cg=yr(Gx),nh=p({},el,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:th}),qx=yr(nh),ug=p({},Ma,{propertyName:0,elapsedTime:0,pseudoElement:0}),dg=yr(ug),Pu=p({},dc,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Qo=yr(Pu),Yx=p({},Ma,{newState:0,oldState:0}),fc=yr(Yx),ii=[9,13,27,32],Ru=Ti&&"CompositionEvent"in window,tl=null;Ti&&"documentMode"in document&&(tl=document.documentMode);var Kx=Ti&&"TextEvent"in window&&!tl,Lu=Ti&&(!Ru||tl&&8<tl&&11>=tl),Iu=" ",fg=!1;function hg(s,c){switch(s){case"keyup":return ii.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rh(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var nl=!1;function ji(s,c){switch(s){case"compositionend":return rh(c);case"keypress":return c.which!==32?null:(fg=!0,Iu);case"textInput":return s=c.data,s===Iu&&fg?null:s;default:return null}}function rl(s,c){if(nl)return s==="compositionend"||!Ru&&hg(s,c)?(s=uo(),wn=Jo=Ji=null,nl=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return Lu&&c.locale!=="ko"?null:c.data;default:return null}}var Wx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ea(s){var c=s&&s.nodeName&&s.nodeName.toLowerCase();return c==="input"?!!Wx[s.type]:c==="textarea"}function mg(s,c,m,x){Qs?ot?ot.push(x):ot=[x]:Qs=x,c=i0(c,"onChange"),0<c.length&&(m=new Du("onChange","change",null,m,x),s.push({event:m,listeners:c}))}var ta=null,hc=null;function mc(s){WN(s,0)}function pc(s){var c=so(s);if(on(c))return s}function gc(s,c){if(s==="change")return c}var pg=!1;if(Ti){var na;if(Ti){var il="oninput"in document;if(!il){var gg=document.createElement("div");gg.setAttribute("oninput","return;"),il=typeof gg.oninput=="function"}na=il}else na=!1;pg=na&&(!document.documentMode||9<document.documentMode)}function $u(){ta&&(ta.detachEvent("onpropertychange",bg),hc=ta=null)}function bg(s){if(s.propertyName==="value"&&pc(hc)){var c=[];mg(c,hc,s,sc(s)),Wf(mc,c)}}function Pa(s,c,m){s==="focusin"?($u(),ta=c,hc=m,ta.attachEvent("onpropertychange",bg)):s==="focusout"&&$u()}function Vx(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return pc(hc)}function al(s,c){if(s==="click")return pc(c)}function Zx(s,c){if(s==="input"||s==="change")return pc(c)}function Ra(s,c){return s===c&&(s!==0||1/s===1/c)||s!==s&&c!==c}var ar=typeof Object.is=="function"?Object.is:Ra;function ol(s,c){if(ar(s,c))return!0;if(typeof s!="object"||s===null||typeof c!="object"||c===null)return!1;var m=Object.keys(s),x=Object.keys(c);if(m.length!==x.length)return!1;for(x=0;x<m.length;x++){var T=m[x];if(!Me.call(c,T)||!ar(s[T],c[T]))return!1}return!0}function Bu(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function bc(s,c){var m=Bu(s);s=0;for(var x;m;){if(m.nodeType===3){if(x=s+m.textContent.length,s<=c&&x>=c)return{node:m,offset:c-s};s=x}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=Bu(m)}}function zu(s,c){return s&&c?s===c?!0:s&&s.nodeType===3?!1:c&&c.nodeType===3?zu(s,c.parentNode):"contains"in s?s.contains(c):s.compareDocumentPosition?!!(s.compareDocumentPosition(c)&16):!1:!1}function yc(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var c=Vs(s.document);c instanceof s.HTMLIFrameElement;){try{var m=typeof c.contentWindow.location.href=="string"}catch{m=!1}if(m)s=c.contentWindow;else break;c=Vs(s.document)}return c}function ho(s){var c=s&&s.nodeName&&s.nodeName.toLowerCase();return c&&(c==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||c==="textarea"||s.contentEditable==="true")}var Uu=Ti&&"documentMode"in document&&11>=document.documentMode,mo=null,Fu=null,vc=null,sl=!1;function yg(s,c,m){var x=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;sl||mo==null||mo!==Vs(x)||(x=mo,"selectionStart"in x&&ho(x)?x={start:x.selectionStart,end:x.selectionEnd}:(x=(x.ownerDocument&&x.ownerDocument.defaultView||window).getSelection(),x={anchorNode:x.anchorNode,anchorOffset:x.anchorOffset,focusNode:x.focusNode,focusOffset:x.focusOffset}),vc&&ol(vc,x)||(vc=x,x=i0(Fu,"onSelect"),0<x.length&&(c=new Du("onSelect","select",null,c,m),s.push({event:c,listeners:x}),c.target=mo)))}function po(s,c){var m={};return m[s.toLowerCase()]=c.toLowerCase(),m["Webkit"+s]="webkit"+c,m["Moz"+s]="moz"+c,m}var ll={animationend:po("Animation","AnimationEnd"),animationiteration:po("Animation","AnimationIteration"),animationstart:po("Animation","AnimationStart"),transitionrun:po("Transition","TransitionRun"),transitionstart:po("Transition","TransitionStart"),transitioncancel:po("Transition","TransitionCancel"),transitionend:po("Transition","TransitionEnd")},Hu={},vg={};Ti&&(vg=document.createElement("div").style,"AnimationEvent"in window||(delete ll.animationend.animation,delete ll.animationiteration.animation,delete ll.animationstart.animation),"TransitionEvent"in window||delete ll.transitionend.transition);function or(s){if(Hu[s])return Hu[s];if(!ll[s])return s;var c=ll[s],m;for(m in c)if(c.hasOwnProperty(m)&&m in vg)return Hu[s]=c[m];return s}var xc=or("animationend"),xg=or("animationiteration"),wc=or("animationstart"),Xx=or("transitionrun"),wg=or("transitionstart"),Jx=or("transitioncancel"),cl=or("transitionend"),_g=new Map,go="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");go.push("scrollEnd");function ai(s,c){_g.set(s,c),Vo(c,[s])}var _c=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},oi=[],Cr=0,Gu=0;function Sc(){for(var s=Cr,c=Gu=Cr=0;c<s;){var m=oi[c];oi[c++]=null;var x=oi[c];oi[c++]=null;var T=oi[c];oi[c++]=null;var O=oi[c];if(oi[c++]=null,x!==null&&T!==null){var I=x.pending;I===null?T.next=T:(T.next=I.next,I.next=T),x.pending=T}O!==0&&ul(m,T,O)}}function bo(s,c,m,x){oi[Cr++]=s,oi[Cr++]=c,oi[Cr++]=m,oi[Cr++]=x,Gu|=x,s.lanes|=x,s=s.alternate,s!==null&&(s.lanes|=x)}function ih(s,c,m,x){return bo(s,c,m,x),kc(s)}function ra(s,c){return bo(s,null,null,c),kc(s)}function ul(s,c,m){s.lanes|=m;var x=s.alternate;x!==null&&(x.lanes|=m);for(var T=!1,O=s.return;O!==null;)O.childLanes|=m,x=O.alternate,x!==null&&(x.childLanes|=m),O.tag===22&&(s=O.stateNode,s===null||s._visibility&1||(T=!0)),s=O,O=O.return;return s.tag===3?(O=s.stateNode,T&&c!==null&&(T=31-Yn(m),s=O.hiddenUpdates,x=s[T],x===null?s[T]=[c]:x.push(c),c.lane=m|536870912),O):null}function kc(s){if(50<Oh)throw Oh=0,e_=null,Error(r(185));for(var c=s.return;c!==null;)s=c,c=s.return;return s.tag===3?s.stateNode:null}var es={};function Qx(s,c,m,x){this.tag=s,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=x,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mr(s,c,m,x){return new Qx(s,c,m,x)}function qu(s){return s=s.prototype,!(!s||!s.isReactComponent)}function ia(s,c){var m=s.alternate;return m===null?(m=Mr(s.tag,c,s.key,s.mode),m.elementType=s.elementType,m.type=s.type,m.stateNode=s.stateNode,m.alternate=s,s.alternate=m):(m.pendingProps=c,m.type=s.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=s.flags&65011712,m.childLanes=s.childLanes,m.lanes=s.lanes,m.child=s.child,m.memoizedProps=s.memoizedProps,m.memoizedState=s.memoizedState,m.updateQueue=s.updateQueue,c=s.dependencies,m.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},m.sibling=s.sibling,m.index=s.index,m.ref=s.ref,m.refCleanup=s.refCleanup,m}function ah(s,c){s.flags&=65011714;var m=s.alternate;return m===null?(s.childLanes=0,s.lanes=c,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=m.childLanes,s.lanes=m.lanes,s.child=m.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=m.memoizedProps,s.memoizedState=m.memoizedState,s.updateQueue=m.updateQueue,s.type=m.type,c=m.dependencies,s.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),s}function Ec(s,c,m,x,T,O){var I=0;if(x=s,typeof s=="function")qu(s)&&(I=1);else if(typeof s=="string")I=gG(s,m,Q.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case Y:return s=Mr(31,m,c,T),s.elementType=Y,s.lanes=O,s;case _:return ts(m.children,T,O,c);case k:I=8,T|=24;break;case A:return s=Mr(12,m,c,T|2),s.elementType=A,s.lanes=O,s;case D:return s=Mr(13,m,c,T),s.elementType=D,s.lanes=O,s;case P:return s=Mr(19,m,c,T),s.elementType=P,s.lanes=O,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case j:I=10;break e;case N:I=9;break e;case C:I=11;break e;case $:I=14;break e;case U:I=16,x=null;break e}I=29,m=Error(r(130,s===null?"null":typeof s,"")),x=null}return c=Mr(I,m,c,T),c.elementType=s,c.type=x,c.lanes=O,c}function ts(s,c,m,x){return s=Mr(7,s,x,c),s.lanes=m,s}function Yu(s,c,m){return s=Mr(6,s,null,c),s.lanes=m,s}function oh(s){var c=Mr(18,null,null,0);return c.stateNode=s,c}function sh(s,c,m){return c=Mr(4,s.children!==null?s.children:[],s.key,c),c.lanes=m,c.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},c}var f=new WeakMap;function v(s,c){if(typeof s=="object"&&s!==null){var m=f.get(s);return m!==void 0?m:(c={value:s,source:c,stack:Oe(c)},f.set(s,c),c)}return{value:s,source:c,stack:Oe(c)}}var E=[],M=0,R=null,H=0,ee=[],fe=0,be=null,Ae=1,$e="";function Ze(s,c){E[M++]=H,E[M++]=R,R=s,H=c}function ft(s,c,m){ee[fe++]=Ae,ee[fe++]=$e,ee[fe++]=be,be=s;var x=Ae;s=$e;var T=32-Yn(x)-1;x&=~(1<<T),m+=1;var O=32-Yn(c)+T;if(30<O){var I=T-T%5;O=(x&(1<<I)-1).toString(32),x>>=I,T-=I,Ae=1<<32-Yn(c)+T|m<<T|x,$e=O+s}else Ae=1<<O|m<<T|x,$e=s}function Wn(s){s.return!==null&&(Ze(s,1),ft(s,1,0))}function _n(s){for(;s===R;)R=E[--M],E[M]=null,H=E[--M],E[M]=null;for(;s===be;)be=ee[--fe],ee[fe]=null,$e=ee[--fe],ee[fe]=null,Ae=ee[--fe],ee[fe]=null}function Fr(s,c){ee[fe++]=Ae,ee[fe++]=$e,ee[fe++]=be,Ae=c.id,$e=c.overflow,be=s}var Tt=null,At=null,bt=!1,yo=null,si=!1,Ku=Error(r(519));function vo(s){var c=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Tc(v(c,s)),Ku}function lh(s){var c=s.stateNode,m=s.type,x=s.memoizedProps;switch(c[Pn]=s,c[ir]=x,m){case"dialog":vt("cancel",c),vt("close",c);break;case"iframe":case"object":case"embed":vt("load",c);break;case"video":case"audio":for(m=0;m<Ch.length;m++)vt(Ch[m],c);break;case"source":vt("error",c);break;case"img":case"image":case"link":vt("error",c),vt("load",c);break;case"details":vt("toggle",c);break;case"input":vt("invalid",c),ac(c,x.value,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name,!0);break;case"select":vt("invalid",c);break;case"textarea":vt("invalid",c),Zs(c,x.value,x.defaultValue,x.children)}m=x.children,typeof m!="string"&&typeof m!="number"&&typeof m!="bigint"||c.textContent===""+m||x.suppressHydrationWarning===!0||JN(c.textContent,m)?(x.popover!=null&&(vt("beforetoggle",c),vt("toggle",c)),x.onScroll!=null&&vt("scroll",c),x.onScrollEnd!=null&&vt("scrollend",c),x.onClick!=null&&(c.onclick=ri),c=!0):c=!1,c||vo(s,!0)}function pn(s){for(Tt=s.return;Tt;)switch(Tt.tag){case 5:case 31:case 13:si=!1;return;case 27:case 3:si=!0;return;default:Tt=Tt.return}}function La(s){if(s!==Tt)return!1;if(!bt)return pn(s),bt=!0,!1;var c=s.tag,m;if((m=c!==3&&c!==27)&&((m=c===5)&&(m=s.type,m=!(m!=="form"&&m!=="button")||p_(s.type,s.memoizedProps)),m=!m),m&&At&&vo(s),pn(s),c===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));At=sC(s)}else if(c===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));At=sC(s)}else c===27?(c=At,kl(s.type)?(s=x_,x_=null,At=s):At=c):At=Tt?oa(s.stateNode.nextSibling):null;return!0}function ns(){At=Tt=null,bt=!1}function ch(){var s=yo;return s!==null&&(di===null?di=s:di.push.apply(di,s),yo=null),s}function Tc(s){yo===null?yo=[s]:yo.push(s)}var Ac=B(null),xo=null,Ia=null;function dl(s,c,m){ie(Ac,c._currentValue),c._currentValue=m}function rs(s){s._currentValue=Ac.current,V(Ac)}function ew(s,c,m){for(;s!==null;){var x=s.alternate;if((s.childLanes&c)!==c?(s.childLanes|=c,x!==null&&(x.childLanes|=c)):x!==null&&(x.childLanes&c)!==c&&(x.childLanes|=c),s===m)break;s=s.return}}function tw(s,c,m,x){var T=s.child;for(T!==null&&(T.return=s);T!==null;){var O=T.dependencies;if(O!==null){var I=T.child;O=O.firstContext;e:for(;O!==null;){var q=O;O=T;for(var ne=0;ne<c.length;ne++)if(q.context===c[ne]){O.lanes|=m,q=O.alternate,q!==null&&(q.lanes|=m),ew(O.return,m,s),x||(I=null);break e}O=q.next}}else if(T.tag===18){if(I=T.return,I===null)throw Error(r(341));I.lanes|=m,O=I.alternate,O!==null&&(O.lanes|=m),ew(I,m,s),I=null}else I=T.child;if(I!==null)I.return=T;else for(I=T;I!==null;){if(I===s){I=null;break}if(T=I.sibling,T!==null){T.return=I.return,I=T;break}I=I.return}T=I}}function Wu(s,c,m,x){s=null;for(var T=c,O=!1;T!==null;){if(!O){if((T.flags&524288)!==0)O=!0;else if((T.flags&262144)!==0)break}if(T.tag===10){var I=T.alternate;if(I===null)throw Error(r(387));if(I=I.memoizedProps,I!==null){var q=T.type;ar(T.pendingProps.value,I.value)||(s!==null?s.push(q):s=[q])}}else if(T===he.current){if(I=T.alternate,I===null)throw Error(r(387));I.memoizedState.memoizedState!==T.memoizedState.memoizedState&&(s!==null?s.push(Lh):s=[Lh])}T=T.return}s!==null&&tw(c,s,m,x),c.flags|=262144}function Sg(s){for(s=s.firstContext;s!==null;){if(!ar(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function jc(s){xo=s,Ia=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function vr(s){return Ij(xo,s)}function kg(s,c){return xo===null&&jc(s),Ij(s,c)}function Ij(s,c){var m=c._currentValue;if(c={context:c,memoizedValue:m,next:null},Ia===null){if(s===null)throw Error(r(308));Ia=c,s.dependencies={lanes:0,firstContext:c},s.flags|=524288}else Ia=Ia.next=c;return m}var fH=typeof AbortController<"u"?AbortController:function(){var s=[],c=this.signal={aborted:!1,addEventListener:function(m,x){s.push(x)}};this.abort=function(){c.aborted=!0,s.forEach(function(m){return m()})}},hH=e.unstable_scheduleCallback,mH=e.unstable_NormalPriority,Ln={$$typeof:j,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function nw(){return{controller:new fH,data:new Map,refCount:0}}function uh(s){s.refCount--,s.refCount===0&&hH(mH,function(){s.controller.abort()})}var dh=null,rw=0,Vu=0,Zu=null;function pH(s,c){if(dh===null){var m=dh=[];rw=0,Vu=o_(),Zu={status:"pending",value:void 0,then:function(x){m.push(x)}}}return rw++,c.then($j,$j),c}function $j(){if(--rw===0&&dh!==null){Zu!==null&&(Zu.status="fulfilled");var s=dh;dh=null,Vu=0,Zu=null;for(var c=0;c<s.length;c++)(0,s[c])()}}function gH(s,c){var m=[],x={status:"pending",value:null,reason:null,then:function(T){m.push(T)}};return s.then(function(){x.status="fulfilled",x.value=c;for(var T=0;T<m.length;T++)(0,m[T])(c)},function(T){for(x.status="rejected",x.reason=T,T=0;T<m.length;T++)(0,m[T])(void 0)}),x}var Bj=G.S;G.S=function(s,c){_N=ze(),typeof c=="object"&&c!==null&&typeof c.then=="function"&&pH(s,c),Bj!==null&&Bj(s,c)};var Oc=B(null);function iw(){var s=Oc.current;return s!==null?s:Yt.pooledCache}function Eg(s,c){c===null?ie(Oc,Oc.current):ie(Oc,c.pool)}function zj(){var s=iw();return s===null?null:{parent:Ln._currentValue,pool:s}}var Xu=Error(r(460)),aw=Error(r(474)),Tg=Error(r(542)),Ag={then:function(){}};function Uj(s){return s=s.status,s==="fulfilled"||s==="rejected"}function Fj(s,c,m){switch(m=s[m],m===void 0?s.push(c):m!==c&&(c.then(ri,ri),c=m),c.status){case"fulfilled":return c.value;case"rejected":throw s=c.reason,Gj(s),s;default:if(typeof c.status=="string")c.then(ri,ri);else{if(s=Yt,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=c,s.status="pending",s.then(function(x){if(c.status==="pending"){var T=c;T.status="fulfilled",T.value=x}},function(x){if(c.status==="pending"){var T=c;T.status="rejected",T.reason=x}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw s=c.reason,Gj(s),s}throw Cc=c,Xu}}function Nc(s){try{var c=s._init;return c(s._payload)}catch(m){throw m!==null&&typeof m=="object"&&typeof m.then=="function"?(Cc=m,Xu):m}}var Cc=null;function Hj(){if(Cc===null)throw Error(r(459));var s=Cc;return Cc=null,s}function Gj(s){if(s===Xu||s===Tg)throw Error(r(483))}var Ju=null,fh=0;function jg(s){var c=fh;return fh+=1,Ju===null&&(Ju=[]),Fj(Ju,s,c)}function hh(s,c){c=c.props.ref,s.ref=c!==void 0?c:null}function Og(s,c){throw c.$$typeof===b?Error(r(525)):(s=Object.prototype.toString.call(c),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":s)))}function qj(s){function c(de,ae){if(s){var pe=de.deletions;pe===null?(de.deletions=[ae],de.flags|=16):pe.push(ae)}}function m(de,ae){if(!s)return null;for(;ae!==null;)c(de,ae),ae=ae.sibling;return null}function x(de){for(var ae=new Map;de!==null;)de.key!==null?ae.set(de.key,de):ae.set(de.index,de),de=de.sibling;return ae}function T(de,ae){return de=ia(de,ae),de.index=0,de.sibling=null,de}function O(de,ae,pe){return de.index=pe,s?(pe=de.alternate,pe!==null?(pe=pe.index,pe<ae?(de.flags|=67108866,ae):pe):(de.flags|=67108866,ae)):(de.flags|=1048576,ae)}function I(de){return s&&de.alternate===null&&(de.flags|=67108866),de}function q(de,ae,pe,Te){return ae===null||ae.tag!==6?(ae=Yu(pe,de.mode,Te),ae.return=de,ae):(ae=T(ae,pe),ae.return=de,ae)}function ne(de,ae,pe,Te){var et=pe.type;return et===_?ke(de,ae,pe.props.children,Te,pe.key):ae!==null&&(ae.elementType===et||typeof et=="object"&&et!==null&&et.$$typeof===U&&Nc(et)===ae.type)?(ae=T(ae,pe.props),hh(ae,pe),ae.return=de,ae):(ae=Ec(pe.type,pe.key,pe.props,null,de.mode,Te),hh(ae,pe),ae.return=de,ae)}function ge(de,ae,pe,Te){return ae===null||ae.tag!==4||ae.stateNode.containerInfo!==pe.containerInfo||ae.stateNode.implementation!==pe.implementation?(ae=sh(pe,de.mode,Te),ae.return=de,ae):(ae=T(ae,pe.children||[]),ae.return=de,ae)}function ke(de,ae,pe,Te,et){return ae===null||ae.tag!==7?(ae=ts(pe,de.mode,Te,et),ae.return=de,ae):(ae=T(ae,pe),ae.return=de,ae)}function je(de,ae,pe){if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return ae=Yu(""+ae,de.mode,pe),ae.return=de,ae;if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case y:return pe=Ec(ae.type,ae.key,ae.props,null,de.mode,pe),hh(pe,ae),pe.return=de,pe;case S:return ae=sh(ae,de.mode,pe),ae.return=de,ae;case U:return ae=Nc(ae),je(de,ae,pe)}if(Z(ae)||z(ae))return ae=ts(ae,de.mode,pe,null),ae.return=de,ae;if(typeof ae.then=="function")return je(de,jg(ae),pe);if(ae.$$typeof===j)return je(de,kg(de,ae),pe);Og(de,ae)}return null}function ye(de,ae,pe,Te){var et=ae!==null?ae.key:null;if(typeof pe=="string"&&pe!==""||typeof pe=="number"||typeof pe=="bigint")return et!==null?null:q(de,ae,""+pe,Te);if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case y:return pe.key===et?ne(de,ae,pe,Te):null;case S:return pe.key===et?ge(de,ae,pe,Te):null;case U:return pe=Nc(pe),ye(de,ae,pe,Te)}if(Z(pe)||z(pe))return et!==null?null:ke(de,ae,pe,Te,null);if(typeof pe.then=="function")return ye(de,ae,jg(pe),Te);if(pe.$$typeof===j)return ye(de,ae,kg(de,pe),Te);Og(de,pe)}return null}function ve(de,ae,pe,Te,et){if(typeof Te=="string"&&Te!==""||typeof Te=="number"||typeof Te=="bigint")return de=de.get(pe)||null,q(ae,de,""+Te,et);if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case y:return de=de.get(Te.key===null?pe:Te.key)||null,ne(ae,de,Te,et);case S:return de=de.get(Te.key===null?pe:Te.key)||null,ge(ae,de,Te,et);case U:return Te=Nc(Te),ve(de,ae,pe,Te,et)}if(Z(Te)||z(Te))return de=de.get(pe)||null,ke(ae,de,Te,et,null);if(typeof Te.then=="function")return ve(de,ae,pe,jg(Te),et);if(Te.$$typeof===j)return ve(de,ae,pe,kg(ae,Te),et);Og(ae,Te)}return null}function qe(de,ae,pe,Te){for(var et=null,jt=null,Ke=ae,ht=ae=0,_t=null;Ke!==null&&ht<pe.length;ht++){Ke.index>ht?(_t=Ke,Ke=null):_t=Ke.sibling;var Ot=ye(de,Ke,pe[ht],Te);if(Ot===null){Ke===null&&(Ke=_t);break}s&&Ke&&Ot.alternate===null&&c(de,Ke),ae=O(Ot,ae,ht),jt===null?et=Ot:jt.sibling=Ot,jt=Ot,Ke=_t}if(ht===pe.length)return m(de,Ke),bt&&Ze(de,ht),et;if(Ke===null){for(;ht<pe.length;ht++)Ke=je(de,pe[ht],Te),Ke!==null&&(ae=O(Ke,ae,ht),jt===null?et=Ke:jt.sibling=Ke,jt=Ke);return bt&&Ze(de,ht),et}for(Ke=x(Ke);ht<pe.length;ht++)_t=ve(Ke,de,ht,pe[ht],Te),_t!==null&&(s&&_t.alternate!==null&&Ke.delete(_t.key===null?ht:_t.key),ae=O(_t,ae,ht),jt===null?et=_t:jt.sibling=_t,jt=_t);return s&&Ke.forEach(function(Ol){return c(de,Ol)}),bt&&Ze(de,ht),et}function rt(de,ae,pe,Te){if(pe==null)throw Error(r(151));for(var et=null,jt=null,Ke=ae,ht=ae=0,_t=null,Ot=pe.next();Ke!==null&&!Ot.done;ht++,Ot=pe.next()){Ke.index>ht?(_t=Ke,Ke=null):_t=Ke.sibling;var Ol=ye(de,Ke,Ot.value,Te);if(Ol===null){Ke===null&&(Ke=_t);break}s&&Ke&&Ol.alternate===null&&c(de,Ke),ae=O(Ol,ae,ht),jt===null?et=Ol:jt.sibling=Ol,jt=Ol,Ke=_t}if(Ot.done)return m(de,Ke),bt&&Ze(de,ht),et;if(Ke===null){for(;!Ot.done;ht++,Ot=pe.next())Ot=je(de,Ot.value,Te),Ot!==null&&(ae=O(Ot,ae,ht),jt===null?et=Ot:jt.sibling=Ot,jt=Ot);return bt&&Ze(de,ht),et}for(Ke=x(Ke);!Ot.done;ht++,Ot=pe.next())Ot=ve(Ke,de,ht,Ot.value,Te),Ot!==null&&(s&&Ot.alternate!==null&&Ke.delete(Ot.key===null?ht:Ot.key),ae=O(Ot,ae,ht),jt===null?et=Ot:jt.sibling=Ot,jt=Ot);return s&&Ke.forEach(function(AG){return c(de,AG)}),bt&&Ze(de,ht),et}function Gt(de,ae,pe,Te){if(typeof pe=="object"&&pe!==null&&pe.type===_&&pe.key===null&&(pe=pe.props.children),typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case y:e:{for(var et=pe.key;ae!==null;){if(ae.key===et){if(et=pe.type,et===_){if(ae.tag===7){m(de,ae.sibling),Te=T(ae,pe.props.children),Te.return=de,de=Te;break e}}else if(ae.elementType===et||typeof et=="object"&&et!==null&&et.$$typeof===U&&Nc(et)===ae.type){m(de,ae.sibling),Te=T(ae,pe.props),hh(Te,pe),Te.return=de,de=Te;break e}m(de,ae);break}else c(de,ae);ae=ae.sibling}pe.type===_?(Te=ts(pe.props.children,de.mode,Te,pe.key),Te.return=de,de=Te):(Te=Ec(pe.type,pe.key,pe.props,null,de.mode,Te),hh(Te,pe),Te.return=de,de=Te)}return I(de);case S:e:{for(et=pe.key;ae!==null;){if(ae.key===et)if(ae.tag===4&&ae.stateNode.containerInfo===pe.containerInfo&&ae.stateNode.implementation===pe.implementation){m(de,ae.sibling),Te=T(ae,pe.children||[]),Te.return=de,de=Te;break e}else{m(de,ae);break}else c(de,ae);ae=ae.sibling}Te=sh(pe,de.mode,Te),Te.return=de,de=Te}return I(de);case U:return pe=Nc(pe),Gt(de,ae,pe,Te)}if(Z(pe))return qe(de,ae,pe,Te);if(z(pe)){if(et=z(pe),typeof et!="function")throw Error(r(150));return pe=et.call(pe),rt(de,ae,pe,Te)}if(typeof pe.then=="function")return Gt(de,ae,jg(pe),Te);if(pe.$$typeof===j)return Gt(de,ae,kg(de,pe),Te);Og(de,pe)}return typeof pe=="string"&&pe!==""||typeof pe=="number"||typeof pe=="bigint"?(pe=""+pe,ae!==null&&ae.tag===6?(m(de,ae.sibling),Te=T(ae,pe),Te.return=de,de=Te):(m(de,ae),Te=Yu(pe,de.mode,Te),Te.return=de,de=Te),I(de)):m(de,ae)}return function(de,ae,pe,Te){try{fh=0;var et=Gt(de,ae,pe,Te);return Ju=null,et}catch(Ke){if(Ke===Xu||Ke===Tg)throw Ke;var jt=Mr(29,Ke,null,de.mode);return jt.lanes=Te,jt.return=de,jt}finally{}}}var Mc=qj(!0),Yj=qj(!1),fl=!1;function ow(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function sw(s,c){s=s.updateQueue,c.updateQueue===s&&(c.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function hl(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function ml(s,c,m){var x=s.updateQueue;if(x===null)return null;if(x=x.shared,(Ct&2)!==0){var T=x.pending;return T===null?c.next=c:(c.next=T.next,T.next=c),x.pending=c,c=kc(s),ul(s,null,m),c}return bo(s,x,c,m),kc(s)}function mh(s,c,m){if(c=c.updateQueue,c!==null&&(c=c.shared,(m&4194048)!==0)){var x=c.lanes;x&=s.pendingLanes,m|=x,c.lanes=m,Zp(s,m)}}function lw(s,c){var m=s.updateQueue,x=s.alternate;if(x!==null&&(x=x.updateQueue,m===x)){var T=null,O=null;if(m=m.firstBaseUpdate,m!==null){do{var I={lane:m.lane,tag:m.tag,payload:m.payload,callback:null,next:null};O===null?T=O=I:O=O.next=I,m=m.next}while(m!==null);O===null?T=O=c:O=O.next=c}else T=O=c;m={baseState:x.baseState,firstBaseUpdate:T,lastBaseUpdate:O,shared:x.shared,callbacks:x.callbacks},s.updateQueue=m;return}s=m.lastBaseUpdate,s===null?m.firstBaseUpdate=c:s.next=c,m.lastBaseUpdate=c}var cw=!1;function ph(){if(cw){var s=Zu;if(s!==null)throw s}}function gh(s,c,m,x){cw=!1;var T=s.updateQueue;fl=!1;var O=T.firstBaseUpdate,I=T.lastBaseUpdate,q=T.shared.pending;if(q!==null){T.shared.pending=null;var ne=q,ge=ne.next;ne.next=null,I===null?O=ge:I.next=ge,I=ne;var ke=s.alternate;ke!==null&&(ke=ke.updateQueue,q=ke.lastBaseUpdate,q!==I&&(q===null?ke.firstBaseUpdate=ge:q.next=ge,ke.lastBaseUpdate=ne))}if(O!==null){var je=T.baseState;I=0,ke=ge=ne=null,q=O;do{var ye=q.lane&-536870913,ve=ye!==q.lane;if(ve?(wt&ye)===ye:(x&ye)===ye){ye!==0&&ye===Vu&&(cw=!0),ke!==null&&(ke=ke.next={lane:0,tag:q.tag,payload:q.payload,callback:null,next:null});e:{var qe=s,rt=q;ye=c;var Gt=m;switch(rt.tag){case 1:if(qe=rt.payload,typeof qe=="function"){je=qe.call(Gt,je,ye);break e}je=qe;break e;case 3:qe.flags=qe.flags&-65537|128;case 0:if(qe=rt.payload,ye=typeof qe=="function"?qe.call(Gt,je,ye):qe,ye==null)break e;je=p({},je,ye);break e;case 2:fl=!0}}ye=q.callback,ye!==null&&(s.flags|=64,ve&&(s.flags|=8192),ve=T.callbacks,ve===null?T.callbacks=[ye]:ve.push(ye))}else ve={lane:ye,tag:q.tag,payload:q.payload,callback:q.callback,next:null},ke===null?(ge=ke=ve,ne=je):ke=ke.next=ve,I|=ye;if(q=q.next,q===null){if(q=T.shared.pending,q===null)break;ve=q,q=ve.next,ve.next=null,T.lastBaseUpdate=ve,T.shared.pending=null}}while(!0);ke===null&&(ne=je),T.baseState=ne,T.firstBaseUpdate=ge,T.lastBaseUpdate=ke,O===null&&(T.shared.lanes=0),vl|=I,s.lanes=I,s.memoizedState=je}}function Kj(s,c){if(typeof s!="function")throw Error(r(191,s));s.call(c)}function Wj(s,c){var m=s.callbacks;if(m!==null)for(s.callbacks=null,s=0;s<m.length;s++)Kj(m[s],c)}var Qu=B(null),Ng=B(0);function Vj(s,c){s=fs,ie(Ng,s),ie(Qu,c),fs=s|c.baseLanes}function uw(){ie(Ng,fs),ie(Qu,Qu.current)}function dw(){fs=Ng.current,V(Qu),V(Ng)}var Oi=B(null),aa=null;function pl(s){var c=s.alternate;ie(On,On.current&1),ie(Oi,s),aa===null&&(c===null||Qu.current!==null||c.memoizedState!==null)&&(aa=s)}function fw(s){ie(On,On.current),ie(Oi,s),aa===null&&(aa=s)}function Zj(s){s.tag===22?(ie(On,On.current),ie(Oi,s),aa===null&&(aa=s)):gl()}function gl(){ie(On,On.current),ie(Oi,Oi.current)}function Ni(s){V(Oi),aa===s&&(aa=null),V(On)}var On=B(0);function Cg(s){for(var c=s;c!==null;){if(c.tag===13){var m=c.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||y_(m)||v_(m)))return c}else if(c.tag===19&&(c.memoizedProps.revealOrder==="forwards"||c.memoizedProps.revealOrder==="backwards"||c.memoizedProps.revealOrder==="unstable_legacy-backwards"||c.memoizedProps.revealOrder==="together")){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===s)break;for(;c.sibling===null;){if(c.return===null||c.return===s)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var is=0,dt=null,Ft=null,In=null,Mg=!1,ed=!1,Dc=!1,Dg=0,bh=0,td=null,bH=0;function Sn(){throw Error(r(321))}function hw(s,c){if(c===null)return!1;for(var m=0;m<c.length&&m<s.length;m++)if(!ar(s[m],c[m]))return!1;return!0}function mw(s,c,m,x,T,O){return is=O,dt=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,G.H=s===null||s.memoizedState===null?DO:Ow,Dc=!1,O=m(x,T),Dc=!1,ed&&(O=Jj(c,m,x,T)),Xj(s),O}function Xj(s){G.H=xh;var c=Ft!==null&&Ft.next!==null;if(is=0,In=Ft=dt=null,Mg=!1,bh=0,td=null,c)throw Error(r(300));s===null||$n||(s=s.dependencies,s!==null&&Sg(s)&&($n=!0))}function Jj(s,c,m,x){dt=s;var T=0;do{if(ed&&(td=null),bh=0,ed=!1,25<=T)throw Error(r(301));if(T+=1,In=Ft=null,s.updateQueue!=null){var O=s.updateQueue;O.lastEffect=null,O.events=null,O.stores=null,O.memoCache!=null&&(O.memoCache.index=0)}G.H=PO,O=c(m,x)}while(ed);return O}function yH(){var s=G.H,c=s.useState()[0];return c=typeof c.then=="function"?yh(c):c,s=s.useState()[0],(Ft!==null?Ft.memoizedState:null)!==s&&(dt.flags|=1024),c}function pw(){var s=Dg!==0;return Dg=0,s}function gw(s,c,m){c.updateQueue=s.updateQueue,c.flags&=-2053,s.lanes&=~m}function bw(s){if(Mg){for(s=s.memoizedState;s!==null;){var c=s.queue;c!==null&&(c.pending=null),s=s.next}Mg=!1}is=0,In=Ft=dt=null,ed=!1,bh=Dg=0,td=null}function Hr(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return In===null?dt.memoizedState=In=s:In=In.next=s,In}function Nn(){if(Ft===null){var s=dt.alternate;s=s!==null?s.memoizedState:null}else s=Ft.next;var c=In===null?dt.memoizedState:In.next;if(c!==null)In=c,Ft=s;else{if(s===null)throw dt.alternate===null?Error(r(467)):Error(r(310));Ft=s,s={memoizedState:Ft.memoizedState,baseState:Ft.baseState,baseQueue:Ft.baseQueue,queue:Ft.queue,next:null},In===null?dt.memoizedState=In=s:In=In.next=s}return In}function Pg(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function yh(s){var c=bh;return bh+=1,td===null&&(td=[]),s=Fj(td,s,c),c=dt,(In===null?c.memoizedState:In.next)===null&&(c=c.alternate,G.H=c===null||c.memoizedState===null?DO:Ow),s}function Rg(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return yh(s);if(s.$$typeof===j)return vr(s)}throw Error(r(438,String(s)))}function yw(s){var c=null,m=dt.updateQueue;if(m!==null&&(c=m.memoCache),c==null){var x=dt.alternate;x!==null&&(x=x.updateQueue,x!==null&&(x=x.memoCache,x!=null&&(c={data:x.data.map(function(T){return T.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),m===null&&(m=Pg(),dt.updateQueue=m),m.memoCache=c,m=c.data[c.index],m===void 0)for(m=c.data[c.index]=Array(s),x=0;x<s;x++)m[x]=K;return c.index++,m}function as(s,c){return typeof c=="function"?c(s):c}function Lg(s){var c=Nn();return vw(c,Ft,s)}function vw(s,c,m){var x=s.queue;if(x===null)throw Error(r(311));x.lastRenderedReducer=m;var T=s.baseQueue,O=x.pending;if(O!==null){if(T!==null){var I=T.next;T.next=O.next,O.next=I}c.baseQueue=T=O,x.pending=null}if(O=s.baseState,T===null)s.memoizedState=O;else{c=T.next;var q=I=null,ne=null,ge=c,ke=!1;do{var je=ge.lane&-536870913;if(je!==ge.lane?(wt&je)===je:(is&je)===je){var ye=ge.revertLane;if(ye===0)ne!==null&&(ne=ne.next={lane:0,revertLane:0,gesture:null,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null}),je===Vu&&(ke=!0);else if((is&ye)===ye){ge=ge.next,ye===Vu&&(ke=!0);continue}else je={lane:0,revertLane:ge.revertLane,gesture:null,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null},ne===null?(q=ne=je,I=O):ne=ne.next=je,dt.lanes|=ye,vl|=ye;je=ge.action,Dc&&m(O,je),O=ge.hasEagerState?ge.eagerState:m(O,je)}else ye={lane:je,revertLane:ge.revertLane,gesture:ge.gesture,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null},ne===null?(q=ne=ye,I=O):ne=ne.next=ye,dt.lanes|=je,vl|=je;ge=ge.next}while(ge!==null&&ge!==c);if(ne===null?I=O:ne.next=q,!ar(O,s.memoizedState)&&($n=!0,ke&&(m=Zu,m!==null)))throw m;s.memoizedState=O,s.baseState=I,s.baseQueue=ne,x.lastRenderedState=O}return T===null&&(x.lanes=0),[s.memoizedState,x.dispatch]}function xw(s){var c=Nn(),m=c.queue;if(m===null)throw Error(r(311));m.lastRenderedReducer=s;var x=m.dispatch,T=m.pending,O=c.memoizedState;if(T!==null){m.pending=null;var I=T=T.next;do O=s(O,I.action),I=I.next;while(I!==T);ar(O,c.memoizedState)||($n=!0),c.memoizedState=O,c.baseQueue===null&&(c.baseState=O),m.lastRenderedState=O}return[O,x]}function Qj(s,c,m){var x=dt,T=Nn(),O=bt;if(O){if(m===void 0)throw Error(r(407));m=m()}else m=c();var I=!ar((Ft||T).memoizedState,m);if(I&&(T.memoizedState=m,$n=!0),T=T.queue,Sw(nO.bind(null,x,T,s),[s]),T.getSnapshot!==c||I||In!==null&&In.memoizedState.tag&1){if(x.flags|=2048,nd(9,{destroy:void 0},tO.bind(null,x,T,m,c),null),Yt===null)throw Error(r(349));O||(is&127)!==0||eO(x,c,m)}return m}function eO(s,c,m){s.flags|=16384,s={getSnapshot:c,value:m},c=dt.updateQueue,c===null?(c=Pg(),dt.updateQueue=c,c.stores=[s]):(m=c.stores,m===null?c.stores=[s]:m.push(s))}function tO(s,c,m,x){c.value=m,c.getSnapshot=x,rO(c)&&iO(s)}function nO(s,c,m){return m(function(){rO(c)&&iO(s)})}function rO(s){var c=s.getSnapshot;s=s.value;try{var m=c();return!ar(s,m)}catch{return!0}}function iO(s){var c=ra(s,2);c!==null&&fi(c,s,2)}function ww(s){var c=Hr();if(typeof s=="function"){var m=s;if(s=m(),Dc){zr(!0);try{m()}finally{zr(!1)}}}return c.memoizedState=c.baseState=s,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:as,lastRenderedState:s},c}function aO(s,c,m,x){return s.baseState=m,vw(s,Ft,typeof x=="function"?x:as)}function vH(s,c,m,x,T){if(Bg(s))throw Error(r(485));if(s=c.action,s!==null){var O={payload:T,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(I){O.listeners.push(I)}};G.T!==null?m(!0):O.isTransition=!1,x(O),m=c.pending,m===null?(O.next=c.pending=O,oO(c,O)):(O.next=m.next,c.pending=m.next=O)}}function oO(s,c){var m=c.action,x=c.payload,T=s.state;if(c.isTransition){var O=G.T,I={};G.T=I;try{var q=m(T,x),ne=G.S;ne!==null&&ne(I,q),sO(s,c,q)}catch(ge){_w(s,c,ge)}finally{O!==null&&I.types!==null&&(O.types=I.types),G.T=O}}else try{O=m(T,x),sO(s,c,O)}catch(ge){_w(s,c,ge)}}function sO(s,c,m){m!==null&&typeof m=="object"&&typeof m.then=="function"?m.then(function(x){lO(s,c,x)},function(x){return _w(s,c,x)}):lO(s,c,m)}function lO(s,c,m){c.status="fulfilled",c.value=m,cO(c),s.state=m,c=s.pending,c!==null&&(m=c.next,m===c?s.pending=null:(m=m.next,c.next=m,oO(s,m)))}function _w(s,c,m){var x=s.pending;if(s.pending=null,x!==null){x=x.next;do c.status="rejected",c.reason=m,cO(c),c=c.next;while(c!==x)}s.action=null}function cO(s){s=s.listeners;for(var c=0;c<s.length;c++)(0,s[c])()}function uO(s,c){return c}function dO(s,c){if(bt){var m=Yt.formState;if(m!==null){e:{var x=dt;if(bt){if(At){t:{for(var T=At,O=si;T.nodeType!==8;){if(!O){T=null;break t}if(T=oa(T.nextSibling),T===null){T=null;break t}}O=T.data,T=O==="F!"||O==="F"?T:null}if(T){At=oa(T.nextSibling),x=T.data==="F!";break e}}vo(x)}x=!1}x&&(c=m[0])}}return m=Hr(),m.memoizedState=m.baseState=c,x={pending:null,lanes:0,dispatch:null,lastRenderedReducer:uO,lastRenderedState:c},m.queue=x,m=NO.bind(null,dt,x),x.dispatch=m,x=ww(!1),O=jw.bind(null,dt,!1,x.queue),x=Hr(),T={state:c,dispatch:null,action:s,pending:null},x.queue=T,m=vH.bind(null,dt,T,O,m),T.dispatch=m,x.memoizedState=s,[c,m,!1]}function fO(s){var c=Nn();return hO(c,Ft,s)}function hO(s,c,m){if(c=vw(s,c,uO)[0],s=Lg(as)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var x=yh(c)}catch(I){throw I===Xu?Tg:I}else x=c;c=Nn();var T=c.queue,O=T.dispatch;return m!==c.memoizedState&&(dt.flags|=2048,nd(9,{destroy:void 0},xH.bind(null,T,m),null)),[x,O,s]}function xH(s,c){s.action=c}function mO(s){var c=Nn(),m=Ft;if(m!==null)return hO(c,m,s);Nn(),c=c.memoizedState,m=Nn();var x=m.queue.dispatch;return m.memoizedState=s,[c,x,!1]}function nd(s,c,m,x){return s={tag:s,create:m,deps:x,inst:c,next:null},c=dt.updateQueue,c===null&&(c=Pg(),dt.updateQueue=c),m=c.lastEffect,m===null?c.lastEffect=s.next=s:(x=m.next,m.next=s,s.next=x,c.lastEffect=s),s}function pO(){return Nn().memoizedState}function Ig(s,c,m,x){var T=Hr();dt.flags|=s,T.memoizedState=nd(1|c,{destroy:void 0},m,x===void 0?null:x)}function $g(s,c,m,x){var T=Nn();x=x===void 0?null:x;var O=T.memoizedState.inst;Ft!==null&&x!==null&&hw(x,Ft.memoizedState.deps)?T.memoizedState=nd(c,O,m,x):(dt.flags|=s,T.memoizedState=nd(1|c,O,m,x))}function gO(s,c){Ig(8390656,8,s,c)}function Sw(s,c){$g(2048,8,s,c)}function wH(s){dt.flags|=4;var c=dt.updateQueue;if(c===null)c=Pg(),dt.updateQueue=c,c.events=[s];else{var m=c.events;m===null?c.events=[s]:m.push(s)}}function bO(s){var c=Nn().memoizedState;return wH({ref:c,nextImpl:s}),function(){if((Ct&2)!==0)throw Error(r(440));return c.impl.apply(void 0,arguments)}}function yO(s,c){return $g(4,2,s,c)}function vO(s,c){return $g(4,4,s,c)}function xO(s,c){if(typeof c=="function"){s=s();var m=c(s);return function(){typeof m=="function"?m():c(null)}}if(c!=null)return s=s(),c.current=s,function(){c.current=null}}function wO(s,c,m){m=m!=null?m.concat([s]):null,$g(4,4,xO.bind(null,c,s),m)}function kw(){}function _O(s,c){var m=Nn();c=c===void 0?null:c;var x=m.memoizedState;return c!==null&&hw(c,x[1])?x[0]:(m.memoizedState=[s,c],s)}function SO(s,c){var m=Nn();c=c===void 0?null:c;var x=m.memoizedState;if(c!==null&&hw(c,x[1]))return x[0];if(x=s(),Dc){zr(!0);try{s()}finally{zr(!1)}}return m.memoizedState=[x,c],x}function Ew(s,c,m){return m===void 0||(is&1073741824)!==0&&(wt&261930)===0?s.memoizedState=c:(s.memoizedState=m,s=kN(),dt.lanes|=s,vl|=s,m)}function kO(s,c,m,x){return ar(m,c)?m:Qu.current!==null?(s=Ew(s,m,x),ar(s,c)||($n=!0),s):(is&42)===0||(is&1073741824)!==0&&(wt&261930)===0?($n=!0,s.memoizedState=m):(s=kN(),dt.lanes|=s,vl|=s,c)}function EO(s,c,m,x,T){var O=J.p;J.p=O!==0&&8>O?O:8;var I=G.T,q={};G.T=q,jw(s,!1,c,m);try{var ne=T(),ge=G.S;if(ge!==null&&ge(q,ne),ne!==null&&typeof ne=="object"&&typeof ne.then=="function"){var ke=gH(ne,x);vh(s,c,ke,Di(s))}else vh(s,c,x,Di(s))}catch(je){vh(s,c,{then:function(){},status:"rejected",reason:je},Di())}finally{J.p=O,I!==null&&q.types!==null&&(I.types=q.types),G.T=I}}function _H(){}function Tw(s,c,m,x){if(s.tag!==5)throw Error(r(476));var T=TO(s).queue;EO(s,T,c,te,m===null?_H:function(){return AO(s),m(x)})}function TO(s){var c=s.memoizedState;if(c!==null)return c;c={memoizedState:te,baseState:te,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:as,lastRenderedState:te},next:null};var m={};return c.next={memoizedState:m,baseState:m,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:as,lastRenderedState:m},next:null},s.memoizedState=c,s=s.alternate,s!==null&&(s.memoizedState=c),c}function AO(s){var c=TO(s);c.next===null&&(c=s.alternate.memoizedState),vh(s,c.next.queue,{},Di())}function Aw(){return vr(Lh)}function jO(){return Nn().memoizedState}function OO(){return Nn().memoizedState}function SH(s){for(var c=s.return;c!==null;){switch(c.tag){case 24:case 3:var m=Di();s=hl(m);var x=ml(c,s,m);x!==null&&(fi(x,c,m),mh(x,c,m)),c={cache:nw()},s.payload=c;return}c=c.return}}function kH(s,c,m){var x=Di();m={lane:x,revertLane:0,gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null},Bg(s)?CO(c,m):(m=ih(s,c,m,x),m!==null&&(fi(m,s,x),MO(m,c,x)))}function NO(s,c,m){var x=Di();vh(s,c,m,x)}function vh(s,c,m,x){var T={lane:x,revertLane:0,gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null};if(Bg(s))CO(c,T);else{var O=s.alternate;if(s.lanes===0&&(O===null||O.lanes===0)&&(O=c.lastRenderedReducer,O!==null))try{var I=c.lastRenderedState,q=O(I,m);if(T.hasEagerState=!0,T.eagerState=q,ar(q,I))return bo(s,c,T,0),Yt===null&&Sc(),!1}catch{}finally{}if(m=ih(s,c,T,x),m!==null)return fi(m,s,x),MO(m,c,x),!0}return!1}function jw(s,c,m,x){if(x={lane:2,revertLane:o_(),gesture:null,action:x,hasEagerState:!1,eagerState:null,next:null},Bg(s)){if(c)throw Error(r(479))}else c=ih(s,m,x,2),c!==null&&fi(c,s,2)}function Bg(s){var c=s.alternate;return s===dt||c!==null&&c===dt}function CO(s,c){ed=Mg=!0;var m=s.pending;m===null?c.next=c:(c.next=m.next,m.next=c),s.pending=c}function MO(s,c,m){if((m&4194048)!==0){var x=c.lanes;x&=s.pendingLanes,m|=x,c.lanes=m,Zp(s,m)}}var xh={readContext:vr,use:Rg,useCallback:Sn,useContext:Sn,useEffect:Sn,useImperativeHandle:Sn,useLayoutEffect:Sn,useInsertionEffect:Sn,useMemo:Sn,useReducer:Sn,useRef:Sn,useState:Sn,useDebugValue:Sn,useDeferredValue:Sn,useTransition:Sn,useSyncExternalStore:Sn,useId:Sn,useHostTransitionStatus:Sn,useFormState:Sn,useActionState:Sn,useOptimistic:Sn,useMemoCache:Sn,useCacheRefresh:Sn};xh.useEffectEvent=Sn;var DO={readContext:vr,use:Rg,useCallback:function(s,c){return Hr().memoizedState=[s,c===void 0?null:c],s},useContext:vr,useEffect:gO,useImperativeHandle:function(s,c,m){m=m!=null?m.concat([s]):null,Ig(4194308,4,xO.bind(null,c,s),m)},useLayoutEffect:function(s,c){return Ig(4194308,4,s,c)},useInsertionEffect:function(s,c){Ig(4,2,s,c)},useMemo:function(s,c){var m=Hr();c=c===void 0?null:c;var x=s();if(Dc){zr(!0);try{s()}finally{zr(!1)}}return m.memoizedState=[x,c],x},useReducer:function(s,c,m){var x=Hr();if(m!==void 0){var T=m(c);if(Dc){zr(!0);try{m(c)}finally{zr(!1)}}}else T=c;return x.memoizedState=x.baseState=T,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:T},x.queue=s,s=s.dispatch=kH.bind(null,dt,s),[x.memoizedState,s]},useRef:function(s){var c=Hr();return s={current:s},c.memoizedState=s},useState:function(s){s=ww(s);var c=s.queue,m=NO.bind(null,dt,c);return c.dispatch=m,[s.memoizedState,m]},useDebugValue:kw,useDeferredValue:function(s,c){var m=Hr();return Ew(m,s,c)},useTransition:function(){var s=ww(!1);return s=EO.bind(null,dt,s.queue,!0,!1),Hr().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,c,m){var x=dt,T=Hr();if(bt){if(m===void 0)throw Error(r(407));m=m()}else{if(m=c(),Yt===null)throw Error(r(349));(wt&127)!==0||eO(x,c,m)}T.memoizedState=m;var O={value:m,getSnapshot:c};return T.queue=O,gO(nO.bind(null,x,O,s),[s]),x.flags|=2048,nd(9,{destroy:void 0},tO.bind(null,x,O,m,c),null),m},useId:function(){var s=Hr(),c=Yt.identifierPrefix;if(bt){var m=$e,x=Ae;m=(x&~(1<<32-Yn(x)-1)).toString(32)+m,c="_"+c+"R_"+m,m=Dg++,0<m&&(c+="H"+m.toString(32)),c+="_"}else m=bH++,c="_"+c+"r_"+m.toString(32)+"_";return s.memoizedState=c},useHostTransitionStatus:Aw,useFormState:dO,useActionState:dO,useOptimistic:function(s){var c=Hr();c.memoizedState=c.baseState=s;var m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=m,c=jw.bind(null,dt,!0,m),m.dispatch=c,[s,c]},useMemoCache:yw,useCacheRefresh:function(){return Hr().memoizedState=SH.bind(null,dt)},useEffectEvent:function(s){var c=Hr(),m={impl:s};return c.memoizedState=m,function(){if((Ct&2)!==0)throw Error(r(440));return m.impl.apply(void 0,arguments)}}},Ow={readContext:vr,use:Rg,useCallback:_O,useContext:vr,useEffect:Sw,useImperativeHandle:wO,useInsertionEffect:yO,useLayoutEffect:vO,useMemo:SO,useReducer:Lg,useRef:pO,useState:function(){return Lg(as)},useDebugValue:kw,useDeferredValue:function(s,c){var m=Nn();return kO(m,Ft.memoizedState,s,c)},useTransition:function(){var s=Lg(as)[0],c=Nn().memoizedState;return[typeof s=="boolean"?s:yh(s),c]},useSyncExternalStore:Qj,useId:jO,useHostTransitionStatus:Aw,useFormState:fO,useActionState:fO,useOptimistic:function(s,c){var m=Nn();return aO(m,Ft,s,c)},useMemoCache:yw,useCacheRefresh:OO};Ow.useEffectEvent=bO;var PO={readContext:vr,use:Rg,useCallback:_O,useContext:vr,useEffect:Sw,useImperativeHandle:wO,useInsertionEffect:yO,useLayoutEffect:vO,useMemo:SO,useReducer:xw,useRef:pO,useState:function(){return xw(as)},useDebugValue:kw,useDeferredValue:function(s,c){var m=Nn();return Ft===null?Ew(m,s,c):kO(m,Ft.memoizedState,s,c)},useTransition:function(){var s=xw(as)[0],c=Nn().memoizedState;return[typeof s=="boolean"?s:yh(s),c]},useSyncExternalStore:Qj,useId:jO,useHostTransitionStatus:Aw,useFormState:mO,useActionState:mO,useOptimistic:function(s,c){var m=Nn();return Ft!==null?aO(m,Ft,s,c):(m.baseState=s,[s,m.queue.dispatch])},useMemoCache:yw,useCacheRefresh:OO};PO.useEffectEvent=bO;function Nw(s,c,m,x){c=s.memoizedState,m=m(x,c),m=m==null?c:p({},c,m),s.memoizedState=m,s.lanes===0&&(s.updateQueue.baseState=m)}var Cw={enqueueSetState:function(s,c,m){s=s._reactInternals;var x=Di(),T=hl(x);T.payload=c,m!=null&&(T.callback=m),c=ml(s,T,x),c!==null&&(fi(c,s,x),mh(c,s,x))},enqueueReplaceState:function(s,c,m){s=s._reactInternals;var x=Di(),T=hl(x);T.tag=1,T.payload=c,m!=null&&(T.callback=m),c=ml(s,T,x),c!==null&&(fi(c,s,x),mh(c,s,x))},enqueueForceUpdate:function(s,c){s=s._reactInternals;var m=Di(),x=hl(m);x.tag=2,c!=null&&(x.callback=c),c=ml(s,x,m),c!==null&&(fi(c,s,m),mh(c,s,m))}};function RO(s,c,m,x,T,O,I){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(x,O,I):c.prototype&&c.prototype.isPureReactComponent?!ol(m,x)||!ol(T,O):!0}function LO(s,c,m,x){s=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(m,x),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(m,x),c.state!==s&&Cw.enqueueReplaceState(c,c.state,null)}function Pc(s,c){var m=c;if("ref"in c){m={};for(var x in c)x!=="ref"&&(m[x]=c[x])}if(s=s.defaultProps){m===c&&(m=p({},m));for(var T in s)m[T]===void 0&&(m[T]=s[T])}return m}function IO(s){_c(s)}function $O(s){console.error(s)}function BO(s){_c(s)}function zg(s,c){try{var m=s.onUncaughtError;m(c.value,{componentStack:c.stack})}catch(x){setTimeout(function(){throw x})}}function zO(s,c,m){try{var x=s.onCaughtError;x(m.value,{componentStack:m.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(T){setTimeout(function(){throw T})}}function Mw(s,c,m){return m=hl(m),m.tag=3,m.payload={element:null},m.callback=function(){zg(s,c)},m}function UO(s){return s=hl(s),s.tag=3,s}function FO(s,c,m,x){var T=m.type.getDerivedStateFromError;if(typeof T=="function"){var O=x.value;s.payload=function(){return T(O)},s.callback=function(){zO(c,m,x)}}var I=m.stateNode;I!==null&&typeof I.componentDidCatch=="function"&&(s.callback=function(){zO(c,m,x),typeof T!="function"&&(xl===null?xl=new Set([this]):xl.add(this));var q=x.stack;this.componentDidCatch(x.value,{componentStack:q!==null?q:""})})}function EH(s,c,m,x,T){if(m.flags|=32768,x!==null&&typeof x=="object"&&typeof x.then=="function"){if(c=m.alternate,c!==null&&Wu(c,m,T,!0),m=Oi.current,m!==null){switch(m.tag){case 31:case 13:return aa===null?Jg():m.alternate===null&&kn===0&&(kn=3),m.flags&=-257,m.flags|=65536,m.lanes=T,x===Ag?m.flags|=16384:(c=m.updateQueue,c===null?m.updateQueue=new Set([x]):c.add(x),r_(s,x,T)),!1;case 22:return m.flags|=65536,x===Ag?m.flags|=16384:(c=m.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([x])},m.updateQueue=c):(m=c.retryQueue,m===null?c.retryQueue=new Set([x]):m.add(x)),r_(s,x,T)),!1}throw Error(r(435,m.tag))}return r_(s,x,T),Jg(),!1}if(bt)return c=Oi.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=T,x!==Ku&&(s=Error(r(422),{cause:x}),Tc(v(s,m)))):(x!==Ku&&(c=Error(r(423),{cause:x}),Tc(v(c,m))),s=s.current.alternate,s.flags|=65536,T&=-T,s.lanes|=T,x=v(x,m),T=Mw(s.stateNode,x,T),lw(s,T),kn!==4&&(kn=2)),!1;var O=Error(r(520),{cause:x});if(O=v(O,m),jh===null?jh=[O]:jh.push(O),kn!==4&&(kn=2),c===null)return!0;x=v(x,m),m=c;do{switch(m.tag){case 3:return m.flags|=65536,s=T&-T,m.lanes|=s,s=Mw(m.stateNode,x,s),lw(m,s),!1;case 1:if(c=m.type,O=m.stateNode,(m.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(xl===null||!xl.has(O))))return m.flags|=65536,T&=-T,m.lanes|=T,T=UO(T),FO(T,s,m,x),lw(m,T),!1}m=m.return}while(m!==null);return!1}var Dw=Error(r(461)),$n=!1;function xr(s,c,m,x){c.child=s===null?Yj(c,null,m,x):Mc(c,s.child,m,x)}function HO(s,c,m,x,T){m=m.render;var O=c.ref;if("ref"in x){var I={};for(var q in x)q!=="ref"&&(I[q]=x[q])}else I=x;return jc(c),x=mw(s,c,m,I,O,T),q=pw(),s!==null&&!$n?(gw(s,c,T),os(s,c,T)):(bt&&q&&Wn(c),c.flags|=1,xr(s,c,x,T),c.child)}function GO(s,c,m,x,T){if(s===null){var O=m.type;return typeof O=="function"&&!qu(O)&&O.defaultProps===void 0&&m.compare===null?(c.tag=15,c.type=O,qO(s,c,O,x,T)):(s=Ec(m.type,null,x,c,c.mode,T),s.ref=c.ref,s.return=c,c.child=s)}if(O=s.child,!Uw(s,T)){var I=O.memoizedProps;if(m=m.compare,m=m!==null?m:ol,m(I,x)&&s.ref===c.ref)return os(s,c,T)}return c.flags|=1,s=ia(O,x),s.ref=c.ref,s.return=c,c.child=s}function qO(s,c,m,x,T){if(s!==null){var O=s.memoizedProps;if(ol(O,x)&&s.ref===c.ref)if($n=!1,c.pendingProps=x=O,Uw(s,T))(s.flags&131072)!==0&&($n=!0);else return c.lanes=s.lanes,os(s,c,T)}return Pw(s,c,m,x,T)}function YO(s,c,m,x){var T=x.children,O=s!==null?s.memoizedState:null;if(s===null&&c.stateNode===null&&(c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),x.mode==="hidden"){if((c.flags&128)!==0){if(O=O!==null?O.baseLanes|m:m,s!==null){for(x=c.child=s.child,T=0;x!==null;)T=T|x.lanes|x.childLanes,x=x.sibling;x=T&~O}else x=0,c.child=null;return KO(s,c,O,m,x)}if((m&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},s!==null&&Eg(c,O!==null?O.cachePool:null),O!==null?Vj(c,O):uw(),Zj(c);else return x=c.lanes=536870912,KO(s,c,O!==null?O.baseLanes|m:m,m,x)}else O!==null?(Eg(c,O.cachePool),Vj(c,O),gl(),c.memoizedState=null):(s!==null&&Eg(c,null),uw(),gl());return xr(s,c,T,m),c.child}function wh(s,c){return s!==null&&s.tag===22||c.stateNode!==null||(c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.sibling}function KO(s,c,m,x,T){var O=iw();return O=O===null?null:{parent:Ln._currentValue,pool:O},c.memoizedState={baseLanes:m,cachePool:O},s!==null&&Eg(c,null),uw(),Zj(c),s!==null&&Wu(s,c,x,!0),c.childLanes=T,null}function Ug(s,c){return c=Hg({mode:c.mode,children:c.children},s.mode),c.ref=s.ref,s.child=c,c.return=s,c}function WO(s,c,m){return Mc(c,s.child,null,m),s=Ug(c,c.pendingProps),s.flags|=2,Ni(c),c.memoizedState=null,s}function TH(s,c,m){var x=c.pendingProps,T=(c.flags&128)!==0;if(c.flags&=-129,s===null){if(bt){if(x.mode==="hidden")return s=Ug(c,x),c.lanes=536870912,wh(null,s);if(fw(c),(s=At)?(s=oC(s,si),s=s!==null&&s.data==="&"?s:null,s!==null&&(c.memoizedState={dehydrated:s,treeContext:be!==null?{id:Ae,overflow:$e}:null,retryLane:536870912,hydrationErrors:null},m=oh(s),m.return=c,c.child=m,Tt=c,At=null)):s=null,s===null)throw vo(c);return c.lanes=536870912,null}return Ug(c,x)}var O=s.memoizedState;if(O!==null){var I=O.dehydrated;if(fw(c),T)if(c.flags&256)c.flags&=-257,c=WO(s,c,m);else if(c.memoizedState!==null)c.child=s.child,c.flags|=128,c=null;else throw Error(r(558));else if($n||Wu(s,c,m,!1),T=(m&s.childLanes)!==0,$n||T){if(x=Yt,x!==null&&(I=Xp(x,m),I!==0&&I!==O.retryLane))throw O.retryLane=I,ra(s,I),fi(x,s,I),Dw;Jg(),c=WO(s,c,m)}else s=O.treeContext,At=oa(I.nextSibling),Tt=c,bt=!0,yo=null,si=!1,s!==null&&Fr(c,s),c=Ug(c,x),c.flags|=4096;return c}return s=ia(s.child,{mode:x.mode,children:x.children}),s.ref=c.ref,c.child=s,s.return=c,s}function Fg(s,c){var m=c.ref;if(m===null)s!==null&&s.ref!==null&&(c.flags|=4194816);else{if(typeof m!="function"&&typeof m!="object")throw Error(r(284));(s===null||s.ref!==m)&&(c.flags|=4194816)}}function Pw(s,c,m,x,T){return jc(c),m=mw(s,c,m,x,void 0,T),x=pw(),s!==null&&!$n?(gw(s,c,T),os(s,c,T)):(bt&&x&&Wn(c),c.flags|=1,xr(s,c,m,T),c.child)}function VO(s,c,m,x,T,O){return jc(c),c.updateQueue=null,m=Jj(c,x,m,T),Xj(s),x=pw(),s!==null&&!$n?(gw(s,c,O),os(s,c,O)):(bt&&x&&Wn(c),c.flags|=1,xr(s,c,m,O),c.child)}function ZO(s,c,m,x,T){if(jc(c),c.stateNode===null){var O=es,I=m.contextType;typeof I=="object"&&I!==null&&(O=vr(I)),O=new m(x,O),c.memoizedState=O.state!==null&&O.state!==void 0?O.state:null,O.updater=Cw,c.stateNode=O,O._reactInternals=c,O=c.stateNode,O.props=x,O.state=c.memoizedState,O.refs={},ow(c),I=m.contextType,O.context=typeof I=="object"&&I!==null?vr(I):es,O.state=c.memoizedState,I=m.getDerivedStateFromProps,typeof I=="function"&&(Nw(c,m,I,x),O.state=c.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof O.getSnapshotBeforeUpdate=="function"||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(I=O.state,typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount(),I!==O.state&&Cw.enqueueReplaceState(O,O.state,null),gh(c,x,O,T),ph(),O.state=c.memoizedState),typeof O.componentDidMount=="function"&&(c.flags|=4194308),x=!0}else if(s===null){O=c.stateNode;var q=c.memoizedProps,ne=Pc(m,q);O.props=ne;var ge=O.context,ke=m.contextType;I=es,typeof ke=="object"&&ke!==null&&(I=vr(ke));var je=m.getDerivedStateFromProps;ke=typeof je=="function"||typeof O.getSnapshotBeforeUpdate=="function",q=c.pendingProps!==q,ke||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(q||ge!==I)&&LO(c,O,x,I),fl=!1;var ye=c.memoizedState;O.state=ye,gh(c,x,O,T),ph(),ge=c.memoizedState,q||ye!==ge||fl?(typeof je=="function"&&(Nw(c,m,je,x),ge=c.memoizedState),(ne=fl||RO(c,m,ne,x,ye,ge,I))?(ke||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount()),typeof O.componentDidMount=="function"&&(c.flags|=4194308)):(typeof O.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=x,c.memoizedState=ge),O.props=x,O.state=ge,O.context=I,x=ne):(typeof O.componentDidMount=="function"&&(c.flags|=4194308),x=!1)}else{O=c.stateNode,sw(s,c),I=c.memoizedProps,ke=Pc(m,I),O.props=ke,je=c.pendingProps,ye=O.context,ge=m.contextType,ne=es,typeof ge=="object"&&ge!==null&&(ne=vr(ge)),q=m.getDerivedStateFromProps,(ge=typeof q=="function"||typeof O.getSnapshotBeforeUpdate=="function")||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(I!==je||ye!==ne)&&LO(c,O,x,ne),fl=!1,ye=c.memoizedState,O.state=ye,gh(c,x,O,T),ph();var ve=c.memoizedState;I!==je||ye!==ve||fl||s!==null&&s.dependencies!==null&&Sg(s.dependencies)?(typeof q=="function"&&(Nw(c,m,q,x),ve=c.memoizedState),(ke=fl||RO(c,m,ke,x,ye,ve,ne)||s!==null&&s.dependencies!==null&&Sg(s.dependencies))?(ge||typeof O.UNSAFE_componentWillUpdate!="function"&&typeof O.componentWillUpdate!="function"||(typeof O.componentWillUpdate=="function"&&O.componentWillUpdate(x,ve,ne),typeof O.UNSAFE_componentWillUpdate=="function"&&O.UNSAFE_componentWillUpdate(x,ve,ne)),typeof O.componentDidUpdate=="function"&&(c.flags|=4),typeof O.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof O.componentDidUpdate!="function"||I===s.memoizedProps&&ye===s.memoizedState||(c.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||I===s.memoizedProps&&ye===s.memoizedState||(c.flags|=1024),c.memoizedProps=x,c.memoizedState=ve),O.props=x,O.state=ve,O.context=ne,x=ke):(typeof O.componentDidUpdate!="function"||I===s.memoizedProps&&ye===s.memoizedState||(c.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||I===s.memoizedProps&&ye===s.memoizedState||(c.flags|=1024),x=!1)}return O=x,Fg(s,c),x=(c.flags&128)!==0,O||x?(O=c.stateNode,m=x&&typeof m.getDerivedStateFromError!="function"?null:O.render(),c.flags|=1,s!==null&&x?(c.child=Mc(c,s.child,null,T),c.child=Mc(c,null,m,T)):xr(s,c,m,T),c.memoizedState=O.state,s=c.child):s=os(s,c,T),s}function XO(s,c,m,x){return ns(),c.flags|=256,xr(s,c,m,x),c.child}var Rw={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Lw(s){return{baseLanes:s,cachePool:zj()}}function Iw(s,c,m){return s=s!==null?s.childLanes&~m:0,c&&(s|=Mi),s}function JO(s,c,m){var x=c.pendingProps,T=!1,O=(c.flags&128)!==0,I;if((I=O)||(I=s!==null&&s.memoizedState===null?!1:(On.current&2)!==0),I&&(T=!0,c.flags&=-129),I=(c.flags&32)!==0,c.flags&=-33,s===null){if(bt){if(T?pl(c):gl(),(s=At)?(s=oC(s,si),s=s!==null&&s.data!=="&"?s:null,s!==null&&(c.memoizedState={dehydrated:s,treeContext:be!==null?{id:Ae,overflow:$e}:null,retryLane:536870912,hydrationErrors:null},m=oh(s),m.return=c,c.child=m,Tt=c,At=null)):s=null,s===null)throw vo(c);return v_(s)?c.lanes=32:c.lanes=536870912,null}var q=x.children;return x=x.fallback,T?(gl(),T=c.mode,q=Hg({mode:"hidden",children:q},T),x=ts(x,T,m,null),q.return=c,x.return=c,q.sibling=x,c.child=q,x=c.child,x.memoizedState=Lw(m),x.childLanes=Iw(s,I,m),c.memoizedState=Rw,wh(null,x)):(pl(c),$w(c,q))}var ne=s.memoizedState;if(ne!==null&&(q=ne.dehydrated,q!==null)){if(O)c.flags&256?(pl(c),c.flags&=-257,c=Bw(s,c,m)):c.memoizedState!==null?(gl(),c.child=s.child,c.flags|=128,c=null):(gl(),q=x.fallback,T=c.mode,x=Hg({mode:"visible",children:x.children},T),q=ts(q,T,m,null),q.flags|=2,x.return=c,q.return=c,x.sibling=q,c.child=x,Mc(c,s.child,null,m),x=c.child,x.memoizedState=Lw(m),x.childLanes=Iw(s,I,m),c.memoizedState=Rw,c=wh(null,x));else if(pl(c),v_(q)){if(I=q.nextSibling&&q.nextSibling.dataset,I)var ge=I.dgst;I=ge,x=Error(r(419)),x.stack="",x.digest=I,Tc({value:x,source:null,stack:null}),c=Bw(s,c,m)}else if($n||Wu(s,c,m,!1),I=(m&s.childLanes)!==0,$n||I){if(I=Yt,I!==null&&(x=Xp(I,m),x!==0&&x!==ne.retryLane))throw ne.retryLane=x,ra(s,x),fi(I,s,x),Dw;y_(q)||Jg(),c=Bw(s,c,m)}else y_(q)?(c.flags|=192,c.child=s.child,c=null):(s=ne.treeContext,At=oa(q.nextSibling),Tt=c,bt=!0,yo=null,si=!1,s!==null&&Fr(c,s),c=$w(c,x.children),c.flags|=4096);return c}return T?(gl(),q=x.fallback,T=c.mode,ne=s.child,ge=ne.sibling,x=ia(ne,{mode:"hidden",children:x.children}),x.subtreeFlags=ne.subtreeFlags&65011712,ge!==null?q=ia(ge,q):(q=ts(q,T,m,null),q.flags|=2),q.return=c,x.return=c,x.sibling=q,c.child=x,wh(null,x),x=c.child,q=s.child.memoizedState,q===null?q=Lw(m):(T=q.cachePool,T!==null?(ne=Ln._currentValue,T=T.parent!==ne?{parent:ne,pool:ne}:T):T=zj(),q={baseLanes:q.baseLanes|m,cachePool:T}),x.memoizedState=q,x.childLanes=Iw(s,I,m),c.memoizedState=Rw,wh(s.child,x)):(pl(c),m=s.child,s=m.sibling,m=ia(m,{mode:"visible",children:x.children}),m.return=c,m.sibling=null,s!==null&&(I=c.deletions,I===null?(c.deletions=[s],c.flags|=16):I.push(s)),c.child=m,c.memoizedState=null,m)}function $w(s,c){return c=Hg({mode:"visible",children:c},s.mode),c.return=s,s.child=c}function Hg(s,c){return s=Mr(22,s,null,c),s.lanes=0,s}function Bw(s,c,m){return Mc(c,s.child,null,m),s=$w(c,c.pendingProps.children),s.flags|=2,c.memoizedState=null,s}function QO(s,c,m){s.lanes|=c;var x=s.alternate;x!==null&&(x.lanes|=c),ew(s.return,c,m)}function zw(s,c,m,x,T,O){var I=s.memoizedState;I===null?s.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:x,tail:m,tailMode:T,treeForkCount:O}:(I.isBackwards=c,I.rendering=null,I.renderingStartTime=0,I.last=x,I.tail=m,I.tailMode=T,I.treeForkCount=O)}function eN(s,c,m){var x=c.pendingProps,T=x.revealOrder,O=x.tail;x=x.children;var I=On.current,q=(I&2)!==0;if(q?(I=I&1|2,c.flags|=128):I&=1,ie(On,I),xr(s,c,x,m),x=bt?H:0,!q&&s!==null&&(s.flags&128)!==0)e:for(s=c.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&QO(s,m,c);else if(s.tag===19)QO(s,m,c);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===c)break e;for(;s.sibling===null;){if(s.return===null||s.return===c)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(T){case"forwards":for(m=c.child,T=null;m!==null;)s=m.alternate,s!==null&&Cg(s)===null&&(T=m),m=m.sibling;m=T,m===null?(T=c.child,c.child=null):(T=m.sibling,m.sibling=null),zw(c,!1,T,m,O,x);break;case"backwards":case"unstable_legacy-backwards":for(m=null,T=c.child,c.child=null;T!==null;){if(s=T.alternate,s!==null&&Cg(s)===null){c.child=T;break}s=T.sibling,T.sibling=m,m=T,T=s}zw(c,!0,m,null,O,x);break;case"together":zw(c,!1,null,null,void 0,x);break;default:c.memoizedState=null}return c.child}function os(s,c,m){if(s!==null&&(c.dependencies=s.dependencies),vl|=c.lanes,(m&c.childLanes)===0)if(s!==null){if(Wu(s,c,m,!1),(m&c.childLanes)===0)return null}else return null;if(s!==null&&c.child!==s.child)throw Error(r(153));if(c.child!==null){for(s=c.child,m=ia(s,s.pendingProps),c.child=m,m.return=c;s.sibling!==null;)s=s.sibling,m=m.sibling=ia(s,s.pendingProps),m.return=c;m.sibling=null}return c.child}function Uw(s,c){return(s.lanes&c)!==0?!0:(s=s.dependencies,!!(s!==null&&Sg(s)))}function AH(s,c,m){switch(c.tag){case 3:_e(c,c.stateNode.containerInfo),dl(c,Ln,s.memoizedState.cache),ns();break;case 27:case 5:Ee(c);break;case 4:_e(c,c.stateNode.containerInfo);break;case 10:dl(c,c.type,c.memoizedProps.value);break;case 31:if(c.memoizedState!==null)return c.flags|=128,fw(c),null;break;case 13:var x=c.memoizedState;if(x!==null)return x.dehydrated!==null?(pl(c),c.flags|=128,null):(m&c.child.childLanes)!==0?JO(s,c,m):(pl(c),s=os(s,c,m),s!==null?s.sibling:null);pl(c);break;case 19:var T=(s.flags&128)!==0;if(x=(m&c.childLanes)!==0,x||(Wu(s,c,m,!1),x=(m&c.childLanes)!==0),T){if(x)return eN(s,c,m);c.flags|=128}if(T=c.memoizedState,T!==null&&(T.rendering=null,T.tail=null,T.lastEffect=null),ie(On,On.current),x)break;return null;case 22:return c.lanes=0,YO(s,c,m,c.pendingProps);case 24:dl(c,Ln,s.memoizedState.cache)}return os(s,c,m)}function tN(s,c,m){if(s!==null)if(s.memoizedProps!==c.pendingProps)$n=!0;else{if(!Uw(s,m)&&(c.flags&128)===0)return $n=!1,AH(s,c,m);$n=(s.flags&131072)!==0}else $n=!1,bt&&(c.flags&1048576)!==0&&ft(c,H,c.index);switch(c.lanes=0,c.tag){case 16:e:{var x=c.pendingProps;if(s=Nc(c.elementType),c.type=s,typeof s=="function")qu(s)?(x=Pc(s,x),c.tag=1,c=ZO(null,c,s,x,m)):(c.tag=0,c=Pw(null,c,s,x,m));else{if(s!=null){var T=s.$$typeof;if(T===C){c.tag=11,c=HO(null,c,s,x,m);break e}else if(T===$){c.tag=14,c=GO(null,c,s,x,m);break e}}throw c=X(s)||s,Error(r(306,c,""))}}return c;case 0:return Pw(s,c,c.type,c.pendingProps,m);case 1:return x=c.type,T=Pc(x,c.pendingProps),ZO(s,c,x,T,m);case 3:e:{if(_e(c,c.stateNode.containerInfo),s===null)throw Error(r(387));x=c.pendingProps;var O=c.memoizedState;T=O.element,sw(s,c),gh(c,x,null,m);var I=c.memoizedState;if(x=I.cache,dl(c,Ln,x),x!==O.cache&&tw(c,[Ln],m,!0),ph(),x=I.element,O.isDehydrated)if(O={element:x,isDehydrated:!1,cache:I.cache},c.updateQueue.baseState=O,c.memoizedState=O,c.flags&256){c=XO(s,c,x,m);break e}else if(x!==T){T=v(Error(r(424)),c),Tc(T),c=XO(s,c,x,m);break e}else{switch(s=c.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(At=oa(s.firstChild),Tt=c,bt=!0,yo=null,si=!0,m=Yj(c,null,x,m),c.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling}else{if(ns(),x===T){c=os(s,c,m);break e}xr(s,c,x,m)}c=c.child}return c;case 26:return Fg(s,c),s===null?(m=fC(c.type,null,c.pendingProps,null))?c.memoizedState=m:bt||(m=c.type,s=c.pendingProps,x=a0(me.current).createElement(m),x[Pn]=c,x[ir]=s,wr(x,m,s),Rn(x),c.stateNode=x):c.memoizedState=fC(c.type,s.memoizedProps,c.pendingProps,s.memoizedState),null;case 27:return Ee(c),s===null&&bt&&(x=c.stateNode=cC(c.type,c.pendingProps,me.current),Tt=c,si=!0,T=At,kl(c.type)?(x_=T,At=oa(x.firstChild)):At=T),xr(s,c,c.pendingProps.children,m),Fg(s,c),s===null&&(c.flags|=4194304),c.child;case 5:return s===null&&bt&&((T=x=At)&&(x=rG(x,c.type,c.pendingProps,si),x!==null?(c.stateNode=x,Tt=c,At=oa(x.firstChild),si=!1,T=!0):T=!1),T||vo(c)),Ee(c),T=c.type,O=c.pendingProps,I=s!==null?s.memoizedProps:null,x=O.children,p_(T,O)?x=null:I!==null&&p_(T,I)&&(c.flags|=32),c.memoizedState!==null&&(T=mw(s,c,yH,null,null,m),Lh._currentValue=T),Fg(s,c),xr(s,c,x,m),c.child;case 6:return s===null&&bt&&((s=m=At)&&(m=iG(m,c.pendingProps,si),m!==null?(c.stateNode=m,Tt=c,At=null,s=!0):s=!1),s||vo(c)),null;case 13:return JO(s,c,m);case 4:return _e(c,c.stateNode.containerInfo),x=c.pendingProps,s===null?c.child=Mc(c,null,x,m):xr(s,c,x,m),c.child;case 11:return HO(s,c,c.type,c.pendingProps,m);case 7:return xr(s,c,c.pendingProps,m),c.child;case 8:return xr(s,c,c.pendingProps.children,m),c.child;case 12:return xr(s,c,c.pendingProps.children,m),c.child;case 10:return x=c.pendingProps,dl(c,c.type,x.value),xr(s,c,x.children,m),c.child;case 9:return T=c.type._context,x=c.pendingProps.children,jc(c),T=vr(T),x=x(T),c.flags|=1,xr(s,c,x,m),c.child;case 14:return GO(s,c,c.type,c.pendingProps,m);case 15:return qO(s,c,c.type,c.pendingProps,m);case 19:return eN(s,c,m);case 31:return TH(s,c,m);case 22:return YO(s,c,m,c.pendingProps);case 24:return jc(c),x=vr(Ln),s===null?(T=iw(),T===null&&(T=Yt,O=nw(),T.pooledCache=O,O.refCount++,O!==null&&(T.pooledCacheLanes|=m),T=O),c.memoizedState={parent:x,cache:T},ow(c),dl(c,Ln,T)):((s.lanes&m)!==0&&(sw(s,c),gh(c,null,null,m),ph()),T=s.memoizedState,O=c.memoizedState,T.parent!==x?(T={parent:x,cache:x},c.memoizedState=T,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=T),dl(c,Ln,x)):(x=O.cache,dl(c,Ln,x),x!==T.cache&&tw(c,[Ln],m,!0))),xr(s,c,c.pendingProps.children,m),c.child;case 29:throw c.pendingProps}throw Error(r(156,c.tag))}function ss(s){s.flags|=4}function Fw(s,c,m,x,T){if((c=(s.mode&32)!==0)&&(c=!1),c){if(s.flags|=16777216,(T&335544128)===T)if(s.stateNode.complete)s.flags|=8192;else if(jN())s.flags|=8192;else throw Cc=Ag,aw}else s.flags&=-16777217}function nN(s,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!bC(c))if(jN())s.flags|=8192;else throw Cc=Ag,aw}function Gg(s,c){c!==null&&(s.flags|=4),s.flags&16384&&(c=s.tag!==22?Wp():536870912,s.lanes|=c,od|=c)}function _h(s,c){if(!bt)switch(s.tailMode){case"hidden":c=s.tail;for(var m=null;c!==null;)c.alternate!==null&&(m=c),c=c.sibling;m===null?s.tail=null:m.sibling=null;break;case"collapsed":m=s.tail;for(var x=null;m!==null;)m.alternate!==null&&(x=m),m=m.sibling;x===null?c||s.tail===null?s.tail=null:s.tail.sibling=null:x.sibling=null}}function tn(s){var c=s.alternate!==null&&s.alternate.child===s.child,m=0,x=0;if(c)for(var T=s.child;T!==null;)m|=T.lanes|T.childLanes,x|=T.subtreeFlags&65011712,x|=T.flags&65011712,T.return=s,T=T.sibling;else for(T=s.child;T!==null;)m|=T.lanes|T.childLanes,x|=T.subtreeFlags,x|=T.flags,T.return=s,T=T.sibling;return s.subtreeFlags|=x,s.childLanes=m,c}function jH(s,c,m){var x=c.pendingProps;switch(_n(c),c.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tn(c),null;case 1:return tn(c),null;case 3:return m=c.stateNode,x=null,s!==null&&(x=s.memoizedState.cache),c.memoizedState.cache!==x&&(c.flags|=2048),rs(Ln),re(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(s===null||s.child===null)&&(La(c)?ss(c):s===null||s.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,ch())),tn(c),null;case 26:var T=c.type,O=c.memoizedState;return s===null?(ss(c),O!==null?(tn(c),nN(c,O)):(tn(c),Fw(c,T,null,x,m))):O?O!==s.memoizedState?(ss(c),tn(c),nN(c,O)):(tn(c),c.flags&=-16777217):(s=s.memoizedProps,s!==x&&ss(c),tn(c),Fw(c,T,s,x,m)),null;case 27:if(we(c),m=me.current,T=c.type,s!==null&&c.stateNode!=null)s.memoizedProps!==x&&ss(c);else{if(!x){if(c.stateNode===null)throw Error(r(166));return tn(c),null}s=Q.current,La(c)?lh(c):(s=cC(T,x,m),c.stateNode=s,ss(c))}return tn(c),null;case 5:if(we(c),T=c.type,s!==null&&c.stateNode!=null)s.memoizedProps!==x&&ss(c);else{if(!x){if(c.stateNode===null)throw Error(r(166));return tn(c),null}if(O=Q.current,La(c))lh(c);else{var I=a0(me.current);switch(O){case 1:O=I.createElementNS("http://www.w3.org/2000/svg",T);break;case 2:O=I.createElementNS("http://www.w3.org/1998/Math/MathML",T);break;default:switch(T){case"svg":O=I.createElementNS("http://www.w3.org/2000/svg",T);break;case"math":O=I.createElementNS("http://www.w3.org/1998/Math/MathML",T);break;case"script":O=I.createElement("div"),O.innerHTML="<script><\/script>",O=O.removeChild(O.firstChild);break;case"select":O=typeof x.is=="string"?I.createElement("select",{is:x.is}):I.createElement("select"),x.multiple?O.multiple=!0:x.size&&(O.size=x.size);break;default:O=typeof x.is=="string"?I.createElement(T,{is:x.is}):I.createElement(T)}}O[Pn]=c,O[ir]=x;e:for(I=c.child;I!==null;){if(I.tag===5||I.tag===6)O.appendChild(I.stateNode);else if(I.tag!==4&&I.tag!==27&&I.child!==null){I.child.return=I,I=I.child;continue}if(I===c)break e;for(;I.sibling===null;){if(I.return===null||I.return===c)break e;I=I.return}I.sibling.return=I.return,I=I.sibling}c.stateNode=O;e:switch(wr(O,T,x),T){case"button":case"input":case"select":case"textarea":x=!!x.autoFocus;break e;case"img":x=!0;break e;default:x=!1}x&&ss(c)}}return tn(c),Fw(c,c.type,s===null?null:s.memoizedProps,c.pendingProps,m),null;case 6:if(s&&c.stateNode!=null)s.memoizedProps!==x&&ss(c);else{if(typeof x!="string"&&c.stateNode===null)throw Error(r(166));if(s=me.current,La(c)){if(s=c.stateNode,m=c.memoizedProps,x=null,T=Tt,T!==null)switch(T.tag){case 27:case 5:x=T.memoizedProps}s[Pn]=c,s=!!(s.nodeValue===m||x!==null&&x.suppressHydrationWarning===!0||JN(s.nodeValue,m)),s||vo(c,!0)}else s=a0(s).createTextNode(x),s[Pn]=c,c.stateNode=s}return tn(c),null;case 31:if(m=c.memoizedState,s===null||s.memoizedState!==null){if(x=La(c),m!==null){if(s===null){if(!x)throw Error(r(318));if(s=c.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(557));s[Pn]=c}else ns(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;tn(c),s=!1}else m=ch(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=m),s=!0;if(!s)return c.flags&256?(Ni(c),c):(Ni(c),null);if((c.flags&128)!==0)throw Error(r(558))}return tn(c),null;case 13:if(x=c.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(T=La(c),x!==null&&x.dehydrated!==null){if(s===null){if(!T)throw Error(r(318));if(T=c.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(r(317));T[Pn]=c}else ns(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;tn(c),T=!1}else T=ch(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=T),T=!0;if(!T)return c.flags&256?(Ni(c),c):(Ni(c),null)}return Ni(c),(c.flags&128)!==0?(c.lanes=m,c):(m=x!==null,s=s!==null&&s.memoizedState!==null,m&&(x=c.child,T=null,x.alternate!==null&&x.alternate.memoizedState!==null&&x.alternate.memoizedState.cachePool!==null&&(T=x.alternate.memoizedState.cachePool.pool),O=null,x.memoizedState!==null&&x.memoizedState.cachePool!==null&&(O=x.memoizedState.cachePool.pool),O!==T&&(x.flags|=2048)),m!==s&&m&&(c.child.flags|=8192),Gg(c,c.updateQueue),tn(c),null);case 4:return re(),s===null&&u_(c.stateNode.containerInfo),tn(c),null;case 10:return rs(c.type),tn(c),null;case 19:if(V(On),x=c.memoizedState,x===null)return tn(c),null;if(T=(c.flags&128)!==0,O=x.rendering,O===null)if(T)_h(x,!1);else{if(kn!==0||s!==null&&(s.flags&128)!==0)for(s=c.child;s!==null;){if(O=Cg(s),O!==null){for(c.flags|=128,_h(x,!1),s=O.updateQueue,c.updateQueue=s,Gg(c,s),c.subtreeFlags=0,s=m,m=c.child;m!==null;)ah(m,s),m=m.sibling;return ie(On,On.current&1|2),bt&&Ze(c,x.treeForkCount),c.child}s=s.sibling}x.tail!==null&&ze()>Vg&&(c.flags|=128,T=!0,_h(x,!1),c.lanes=4194304)}else{if(!T)if(s=Cg(O),s!==null){if(c.flags|=128,T=!0,s=s.updateQueue,c.updateQueue=s,Gg(c,s),_h(x,!0),x.tail===null&&x.tailMode==="hidden"&&!O.alternate&&!bt)return tn(c),null}else 2*ze()-x.renderingStartTime>Vg&&m!==536870912&&(c.flags|=128,T=!0,_h(x,!1),c.lanes=4194304);x.isBackwards?(O.sibling=c.child,c.child=O):(s=x.last,s!==null?s.sibling=O:c.child=O,x.last=O)}return x.tail!==null?(s=x.tail,x.rendering=s,x.tail=s.sibling,x.renderingStartTime=ze(),s.sibling=null,m=On.current,ie(On,T?m&1|2:m&1),bt&&Ze(c,x.treeForkCount),s):(tn(c),null);case 22:case 23:return Ni(c),dw(),x=c.memoizedState!==null,s!==null?s.memoizedState!==null!==x&&(c.flags|=8192):x&&(c.flags|=8192),x?(m&536870912)!==0&&(c.flags&128)===0&&(tn(c),c.subtreeFlags&6&&(c.flags|=8192)):tn(c),m=c.updateQueue,m!==null&&Gg(c,m.retryQueue),m=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(m=s.memoizedState.cachePool.pool),x=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(x=c.memoizedState.cachePool.pool),x!==m&&(c.flags|=2048),s!==null&&V(Oc),null;case 24:return m=null,s!==null&&(m=s.memoizedState.cache),c.memoizedState.cache!==m&&(c.flags|=2048),rs(Ln),tn(c),null;case 25:return null;case 30:return null}throw Error(r(156,c.tag))}function OH(s,c){switch(_n(c),c.tag){case 1:return s=c.flags,s&65536?(c.flags=s&-65537|128,c):null;case 3:return rs(Ln),re(),s=c.flags,(s&65536)!==0&&(s&128)===0?(c.flags=s&-65537|128,c):null;case 26:case 27:case 5:return we(c),null;case 31:if(c.memoizedState!==null){if(Ni(c),c.alternate===null)throw Error(r(340));ns()}return s=c.flags,s&65536?(c.flags=s&-65537|128,c):null;case 13:if(Ni(c),s=c.memoizedState,s!==null&&s.dehydrated!==null){if(c.alternate===null)throw Error(r(340));ns()}return s=c.flags,s&65536?(c.flags=s&-65537|128,c):null;case 19:return V(On),null;case 4:return re(),null;case 10:return rs(c.type),null;case 22:case 23:return Ni(c),dw(),s!==null&&V(Oc),s=c.flags,s&65536?(c.flags=s&-65537|128,c):null;case 24:return rs(Ln),null;case 25:return null;default:return null}}function rN(s,c){switch(_n(c),c.tag){case 3:rs(Ln),re();break;case 26:case 27:case 5:we(c);break;case 4:re();break;case 31:c.memoizedState!==null&&Ni(c);break;case 13:Ni(c);break;case 19:V(On);break;case 10:rs(c.type);break;case 22:case 23:Ni(c),dw(),s!==null&&V(Oc);break;case 24:rs(Ln)}}function Sh(s,c){try{var m=c.updateQueue,x=m!==null?m.lastEffect:null;if(x!==null){var T=x.next;m=T;do{if((m.tag&s)===s){x=void 0;var O=m.create,I=m.inst;x=O(),I.destroy=x}m=m.next}while(m!==T)}}catch(q){Bt(c,c.return,q)}}function bl(s,c,m){try{var x=c.updateQueue,T=x!==null?x.lastEffect:null;if(T!==null){var O=T.next;x=O;do{if((x.tag&s)===s){var I=x.inst,q=I.destroy;if(q!==void 0){I.destroy=void 0,T=c;var ne=m,ge=q;try{ge()}catch(ke){Bt(T,ne,ke)}}}x=x.next}while(x!==O)}}catch(ke){Bt(c,c.return,ke)}}function iN(s){var c=s.updateQueue;if(c!==null){var m=s.stateNode;try{Wj(c,m)}catch(x){Bt(s,s.return,x)}}}function aN(s,c,m){m.props=Pc(s.type,s.memoizedProps),m.state=s.memoizedState;try{m.componentWillUnmount()}catch(x){Bt(s,c,x)}}function kh(s,c){try{var m=s.ref;if(m!==null){switch(s.tag){case 26:case 27:case 5:var x=s.stateNode;break;case 30:x=s.stateNode;break;default:x=s.stateNode}typeof m=="function"?s.refCleanup=m(x):m.current=x}}catch(T){Bt(s,c,T)}}function wo(s,c){var m=s.ref,x=s.refCleanup;if(m!==null)if(typeof x=="function")try{x()}catch(T){Bt(s,c,T)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof m=="function")try{m(null)}catch(T){Bt(s,c,T)}else m.current=null}function oN(s){var c=s.type,m=s.memoizedProps,x=s.stateNode;try{e:switch(c){case"button":case"input":case"select":case"textarea":m.autoFocus&&x.focus();break e;case"img":m.src?x.src=m.src:m.srcSet&&(x.srcset=m.srcSet)}}catch(T){Bt(s,s.return,T)}}function Hw(s,c,m){try{var x=s.stateNode;XH(x,s.type,m,c),x[ir]=c}catch(T){Bt(s,s.return,T)}}function sN(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&kl(s.type)||s.tag===4}function Gw(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||sN(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&kl(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function qw(s,c,m){var x=s.tag;if(x===5||x===6)s=s.stateNode,c?(m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m).insertBefore(s,c):(c=m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m,c.appendChild(s),m=m._reactRootContainer,m!=null||c.onclick!==null||(c.onclick=ri));else if(x!==4&&(x===27&&kl(s.type)&&(m=s.stateNode,c=null),s=s.child,s!==null))for(qw(s,c,m),s=s.sibling;s!==null;)qw(s,c,m),s=s.sibling}function qg(s,c,m){var x=s.tag;if(x===5||x===6)s=s.stateNode,c?m.insertBefore(s,c):m.appendChild(s);else if(x!==4&&(x===27&&kl(s.type)&&(m=s.stateNode),s=s.child,s!==null))for(qg(s,c,m),s=s.sibling;s!==null;)qg(s,c,m),s=s.sibling}function lN(s){var c=s.stateNode,m=s.memoizedProps;try{for(var x=s.type,T=c.attributes;T.length;)c.removeAttributeNode(T[0]);wr(c,x,m),c[Pn]=s,c[ir]=m}catch(O){Bt(s,s.return,O)}}var ls=!1,Bn=!1,Yw=!1,cN=typeof WeakSet=="function"?WeakSet:Set,sr=null;function NH(s,c){if(s=s.containerInfo,h_=f0,s=yc(s),ho(s)){if("selectionStart"in s)var m={start:s.selectionStart,end:s.selectionEnd};else e:{m=(m=s.ownerDocument)&&m.defaultView||window;var x=m.getSelection&&m.getSelection();if(x&&x.rangeCount!==0){m=x.anchorNode;var T=x.anchorOffset,O=x.focusNode;x=x.focusOffset;try{m.nodeType,O.nodeType}catch{m=null;break e}var I=0,q=-1,ne=-1,ge=0,ke=0,je=s,ye=null;t:for(;;){for(var ve;je!==m||T!==0&&je.nodeType!==3||(q=I+T),je!==O||x!==0&&je.nodeType!==3||(ne=I+x),je.nodeType===3&&(I+=je.nodeValue.length),(ve=je.firstChild)!==null;)ye=je,je=ve;for(;;){if(je===s)break t;if(ye===m&&++ge===T&&(q=I),ye===O&&++ke===x&&(ne=I),(ve=je.nextSibling)!==null)break;je=ye,ye=je.parentNode}je=ve}m=q===-1||ne===-1?null:{start:q,end:ne}}else m=null}m=m||{start:0,end:0}}else m=null;for(m_={focusedElem:s,selectionRange:m},f0=!1,sr=c;sr!==null;)if(c=sr,s=c.child,(c.subtreeFlags&1028)!==0&&s!==null)s.return=c,sr=s;else for(;sr!==null;){switch(c=sr,O=c.alternate,s=c.flags,c.tag){case 0:if((s&4)!==0&&(s=c.updateQueue,s=s!==null?s.events:null,s!==null))for(m=0;m<s.length;m++)T=s[m],T.ref.impl=T.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&O!==null){s=void 0,m=c,T=O.memoizedProps,O=O.memoizedState,x=m.stateNode;try{var qe=Pc(m.type,T);s=x.getSnapshotBeforeUpdate(qe,O),x.__reactInternalSnapshotBeforeUpdate=s}catch(rt){Bt(m,m.return,rt)}}break;case 3:if((s&1024)!==0){if(s=c.stateNode.containerInfo,m=s.nodeType,m===9)b_(s);else if(m===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":b_(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=c.sibling,s!==null){s.return=c.return,sr=s;break}sr=c.return}}function uN(s,c,m){var x=m.flags;switch(m.tag){case 0:case 11:case 15:us(s,m),x&4&&Sh(5,m);break;case 1:if(us(s,m),x&4)if(s=m.stateNode,c===null)try{s.componentDidMount()}catch(I){Bt(m,m.return,I)}else{var T=Pc(m.type,c.memoizedProps);c=c.memoizedState;try{s.componentDidUpdate(T,c,s.__reactInternalSnapshotBeforeUpdate)}catch(I){Bt(m,m.return,I)}}x&64&&iN(m),x&512&&kh(m,m.return);break;case 3:if(us(s,m),x&64&&(s=m.updateQueue,s!==null)){if(c=null,m.child!==null)switch(m.child.tag){case 27:case 5:c=m.child.stateNode;break;case 1:c=m.child.stateNode}try{Wj(s,c)}catch(I){Bt(m,m.return,I)}}break;case 27:c===null&&x&4&&lN(m);case 26:case 5:us(s,m),c===null&&x&4&&oN(m),x&512&&kh(m,m.return);break;case 12:us(s,m);break;case 31:us(s,m),x&4&&hN(s,m);break;case 13:us(s,m),x&4&&mN(s,m),x&64&&(s=m.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(m=BH.bind(null,m),aG(s,m))));break;case 22:if(x=m.memoizedState!==null||ls,!x){c=c!==null&&c.memoizedState!==null||Bn,T=ls;var O=Bn;ls=x,(Bn=c)&&!O?ds(s,m,(m.subtreeFlags&8772)!==0):us(s,m),ls=T,Bn=O}break;case 30:break;default:us(s,m)}}function dN(s){var c=s.alternate;c!==null&&(s.alternate=null,dN(c)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(c=s.stateNode,c!==null&&Uf(c)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var sn=null,li=!1;function cs(s,c,m){for(m=m.child;m!==null;)fN(s,c,m),m=m.sibling}function fN(s,c,m){if(an&&typeof an.onCommitFiberUnmount=="function")try{an.onCommitFiberUnmount(It,m)}catch{}switch(m.tag){case 26:Bn||wo(m,c),cs(s,c,m),m.memoizedState?m.memoizedState.count--:m.stateNode&&(m=m.stateNode,m.parentNode.removeChild(m));break;case 27:Bn||wo(m,c);var x=sn,T=li;kl(m.type)&&(sn=m.stateNode,li=!1),cs(s,c,m),Dh(m.stateNode),sn=x,li=T;break;case 5:Bn||wo(m,c);case 6:if(x=sn,T=li,sn=null,cs(s,c,m),sn=x,li=T,sn!==null)if(li)try{(sn.nodeType===9?sn.body:sn.nodeName==="HTML"?sn.ownerDocument.body:sn).removeChild(m.stateNode)}catch(O){Bt(m,c,O)}else try{sn.removeChild(m.stateNode)}catch(O){Bt(m,c,O)}break;case 18:sn!==null&&(li?(s=sn,iC(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,m.stateNode),md(s)):iC(sn,m.stateNode));break;case 4:x=sn,T=li,sn=m.stateNode.containerInfo,li=!0,cs(s,c,m),sn=x,li=T;break;case 0:case 11:case 14:case 15:bl(2,m,c),Bn||bl(4,m,c),cs(s,c,m);break;case 1:Bn||(wo(m,c),x=m.stateNode,typeof x.componentWillUnmount=="function"&&aN(m,c,x)),cs(s,c,m);break;case 21:cs(s,c,m);break;case 22:Bn=(x=Bn)||m.memoizedState!==null,cs(s,c,m),Bn=x;break;default:cs(s,c,m)}}function hN(s,c){if(c.memoizedState===null&&(s=c.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{md(s)}catch(m){Bt(c,c.return,m)}}}function mN(s,c){if(c.memoizedState===null&&(s=c.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{md(s)}catch(m){Bt(c,c.return,m)}}function CH(s){switch(s.tag){case 31:case 13:case 19:var c=s.stateNode;return c===null&&(c=s.stateNode=new cN),c;case 22:return s=s.stateNode,c=s._retryCache,c===null&&(c=s._retryCache=new cN),c;default:throw Error(r(435,s.tag))}}function Yg(s,c){var m=CH(s);c.forEach(function(x){if(!m.has(x)){m.add(x);var T=zH.bind(null,s,x);x.then(T,T)}})}function ci(s,c){var m=c.deletions;if(m!==null)for(var x=0;x<m.length;x++){var T=m[x],O=s,I=c,q=I;e:for(;q!==null;){switch(q.tag){case 27:if(kl(q.type)){sn=q.stateNode,li=!1;break e}break;case 5:sn=q.stateNode,li=!1;break e;case 3:case 4:sn=q.stateNode.containerInfo,li=!0;break e}q=q.return}if(sn===null)throw Error(r(160));fN(O,I,T),sn=null,li=!1,O=T.alternate,O!==null&&(O.return=null),T.return=null}if(c.subtreeFlags&13886)for(c=c.child;c!==null;)pN(c,s),c=c.sibling}var $a=null;function pN(s,c){var m=s.alternate,x=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:ci(c,s),ui(s),x&4&&(bl(3,s,s.return),Sh(3,s),bl(5,s,s.return));break;case 1:ci(c,s),ui(s),x&512&&(Bn||m===null||wo(m,m.return)),x&64&&ls&&(s=s.updateQueue,s!==null&&(x=s.callbacks,x!==null&&(m=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=m===null?x:m.concat(x))));break;case 26:var T=$a;if(ci(c,s),ui(s),x&512&&(Bn||m===null||wo(m,m.return)),x&4){var O=m!==null?m.memoizedState:null;if(x=s.memoizedState,m===null)if(x===null)if(s.stateNode===null){e:{x=s.type,m=s.memoizedProps,T=T.ownerDocument||T;t:switch(x){case"title":O=T.getElementsByTagName("title")[0],(!O||O[nc]||O[Pn]||O.namespaceURI==="http://www.w3.org/2000/svg"||O.hasAttribute("itemprop"))&&(O=T.createElement(x),T.head.insertBefore(O,T.querySelector("head > title"))),wr(O,x,m),O[Pn]=s,Rn(O),x=O;break e;case"link":var I=pC("link","href",T).get(x+(m.href||""));if(I){for(var q=0;q<I.length;q++)if(O=I[q],O.getAttribute("href")===(m.href==null||m.href===""?null:m.href)&&O.getAttribute("rel")===(m.rel==null?null:m.rel)&&O.getAttribute("title")===(m.title==null?null:m.title)&&O.getAttribute("crossorigin")===(m.crossOrigin==null?null:m.crossOrigin)){I.splice(q,1);break t}}O=T.createElement(x),wr(O,x,m),T.head.appendChild(O);break;case"meta":if(I=pC("meta","content",T).get(x+(m.content||""))){for(q=0;q<I.length;q++)if(O=I[q],O.getAttribute("content")===(m.content==null?null:""+m.content)&&O.getAttribute("name")===(m.name==null?null:m.name)&&O.getAttribute("property")===(m.property==null?null:m.property)&&O.getAttribute("http-equiv")===(m.httpEquiv==null?null:m.httpEquiv)&&O.getAttribute("charset")===(m.charSet==null?null:m.charSet)){I.splice(q,1);break t}}O=T.createElement(x),wr(O,x,m),T.head.appendChild(O);break;default:throw Error(r(468,x))}O[Pn]=s,Rn(O),x=O}s.stateNode=x}else gC(T,s.type,s.stateNode);else s.stateNode=mC(T,x,s.memoizedProps);else O!==x?(O===null?m.stateNode!==null&&(m=m.stateNode,m.parentNode.removeChild(m)):O.count--,x===null?gC(T,s.type,s.stateNode):mC(T,x,s.memoizedProps)):x===null&&s.stateNode!==null&&Hw(s,s.memoizedProps,m.memoizedProps)}break;case 27:ci(c,s),ui(s),x&512&&(Bn||m===null||wo(m,m.return)),m!==null&&x&4&&Hw(s,s.memoizedProps,m.memoizedProps);break;case 5:if(ci(c,s),ui(s),x&512&&(Bn||m===null||wo(m,m.return)),s.flags&32){T=s.stateNode;try{Xi(T,"")}catch(qe){Bt(s,s.return,qe)}}x&4&&s.stateNode!=null&&(T=s.memoizedProps,Hw(s,T,m!==null?m.memoizedProps:T)),x&1024&&(Yw=!0);break;case 6:if(ci(c,s),ui(s),x&4){if(s.stateNode===null)throw Error(r(162));x=s.memoizedProps,m=s.stateNode;try{m.nodeValue=x}catch(qe){Bt(s,s.return,qe)}}break;case 3:if(l0=null,T=$a,$a=o0(c.containerInfo),ci(c,s),$a=T,ui(s),x&4&&m!==null&&m.memoizedState.isDehydrated)try{md(c.containerInfo)}catch(qe){Bt(s,s.return,qe)}Yw&&(Yw=!1,gN(s));break;case 4:x=$a,$a=o0(s.stateNode.containerInfo),ci(c,s),ui(s),$a=x;break;case 12:ci(c,s),ui(s);break;case 31:ci(c,s),ui(s),x&4&&(x=s.updateQueue,x!==null&&(s.updateQueue=null,Yg(s,x)));break;case 13:ci(c,s),ui(s),s.child.flags&8192&&s.memoizedState!==null!=(m!==null&&m.memoizedState!==null)&&(Wg=ze()),x&4&&(x=s.updateQueue,x!==null&&(s.updateQueue=null,Yg(s,x)));break;case 22:T=s.memoizedState!==null;var ne=m!==null&&m.memoizedState!==null,ge=ls,ke=Bn;if(ls=ge||T,Bn=ke||ne,ci(c,s),Bn=ke,ls=ge,ui(s),x&8192)e:for(c=s.stateNode,c._visibility=T?c._visibility&-2:c._visibility|1,T&&(m===null||ne||ls||Bn||Rc(s)),m=null,c=s;;){if(c.tag===5||c.tag===26){if(m===null){ne=m=c;try{if(O=ne.stateNode,T)I=O.style,typeof I.setProperty=="function"?I.setProperty("display","none","important"):I.display="none";else{q=ne.stateNode;var je=ne.memoizedProps.style,ye=je!=null&&je.hasOwnProperty("display")?je.display:null;q.style.display=ye==null||typeof ye=="boolean"?"":(""+ye).trim()}}catch(qe){Bt(ne,ne.return,qe)}}}else if(c.tag===6){if(m===null){ne=c;try{ne.stateNode.nodeValue=T?"":ne.memoizedProps}catch(qe){Bt(ne,ne.return,qe)}}}else if(c.tag===18){if(m===null){ne=c;try{var ve=ne.stateNode;T?aC(ve,!0):aC(ne.stateNode,!1)}catch(qe){Bt(ne,ne.return,qe)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===s)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===s)break e;for(;c.sibling===null;){if(c.return===null||c.return===s)break e;m===c&&(m=null),c=c.return}m===c&&(m=null),c.sibling.return=c.return,c=c.sibling}x&4&&(x=s.updateQueue,x!==null&&(m=x.retryQueue,m!==null&&(x.retryQueue=null,Yg(s,m))));break;case 19:ci(c,s),ui(s),x&4&&(x=s.updateQueue,x!==null&&(s.updateQueue=null,Yg(s,x)));break;case 30:break;case 21:break;default:ci(c,s),ui(s)}}function ui(s){var c=s.flags;if(c&2){try{for(var m,x=s.return;x!==null;){if(sN(x)){m=x;break}x=x.return}if(m==null)throw Error(r(160));switch(m.tag){case 27:var T=m.stateNode,O=Gw(s);qg(s,O,T);break;case 5:var I=m.stateNode;m.flags&32&&(Xi(I,""),m.flags&=-33);var q=Gw(s);qg(s,q,I);break;case 3:case 4:var ne=m.stateNode.containerInfo,ge=Gw(s);qw(s,ge,ne);break;default:throw Error(r(161))}}catch(ke){Bt(s,s.return,ke)}s.flags&=-3}c&4096&&(s.flags&=-4097)}function gN(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var c=s;gN(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),s=s.sibling}}function us(s,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)uN(s,c.alternate,c),c=c.sibling}function Rc(s){for(s=s.child;s!==null;){var c=s;switch(c.tag){case 0:case 11:case 14:case 15:bl(4,c,c.return),Rc(c);break;case 1:wo(c,c.return);var m=c.stateNode;typeof m.componentWillUnmount=="function"&&aN(c,c.return,m),Rc(c);break;case 27:Dh(c.stateNode);case 26:case 5:wo(c,c.return),Rc(c);break;case 22:c.memoizedState===null&&Rc(c);break;case 30:Rc(c);break;default:Rc(c)}s=s.sibling}}function ds(s,c,m){for(m=m&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var x=c.alternate,T=s,O=c,I=O.flags;switch(O.tag){case 0:case 11:case 15:ds(T,O,m),Sh(4,O);break;case 1:if(ds(T,O,m),x=O,T=x.stateNode,typeof T.componentDidMount=="function")try{T.componentDidMount()}catch(ge){Bt(x,x.return,ge)}if(x=O,T=x.updateQueue,T!==null){var q=x.stateNode;try{var ne=T.shared.hiddenCallbacks;if(ne!==null)for(T.shared.hiddenCallbacks=null,T=0;T<ne.length;T++)Kj(ne[T],q)}catch(ge){Bt(x,x.return,ge)}}m&&I&64&&iN(O),kh(O,O.return);break;case 27:lN(O);case 26:case 5:ds(T,O,m),m&&x===null&&I&4&&oN(O),kh(O,O.return);break;case 12:ds(T,O,m);break;case 31:ds(T,O,m),m&&I&4&&hN(T,O);break;case 13:ds(T,O,m),m&&I&4&&mN(T,O);break;case 22:O.memoizedState===null&&ds(T,O,m),kh(O,O.return);break;case 30:break;default:ds(T,O,m)}c=c.sibling}}function Kw(s,c){var m=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(m=s.memoizedState.cachePool.pool),s=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(s=c.memoizedState.cachePool.pool),s!==m&&(s!=null&&s.refCount++,m!=null&&uh(m))}function Ww(s,c){s=null,c.alternate!==null&&(s=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==s&&(c.refCount++,s!=null&&uh(s))}function Ba(s,c,m,x){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)bN(s,c,m,x),c=c.sibling}function bN(s,c,m,x){var T=c.flags;switch(c.tag){case 0:case 11:case 15:Ba(s,c,m,x),T&2048&&Sh(9,c);break;case 1:Ba(s,c,m,x);break;case 3:Ba(s,c,m,x),T&2048&&(s=null,c.alternate!==null&&(s=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==s&&(c.refCount++,s!=null&&uh(s)));break;case 12:if(T&2048){Ba(s,c,m,x),s=c.stateNode;try{var O=c.memoizedProps,I=O.id,q=O.onPostCommit;typeof q=="function"&&q(I,c.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(ne){Bt(c,c.return,ne)}}else Ba(s,c,m,x);break;case 31:Ba(s,c,m,x);break;case 13:Ba(s,c,m,x);break;case 23:break;case 22:O=c.stateNode,I=c.alternate,c.memoizedState!==null?O._visibility&2?Ba(s,c,m,x):Eh(s,c):O._visibility&2?Ba(s,c,m,x):(O._visibility|=2,rd(s,c,m,x,(c.subtreeFlags&10256)!==0||!1)),T&2048&&Kw(I,c);break;case 24:Ba(s,c,m,x),T&2048&&Ww(c.alternate,c);break;default:Ba(s,c,m,x)}}function rd(s,c,m,x,T){for(T=T&&((c.subtreeFlags&10256)!==0||!1),c=c.child;c!==null;){var O=s,I=c,q=m,ne=x,ge=I.flags;switch(I.tag){case 0:case 11:case 15:rd(O,I,q,ne,T),Sh(8,I);break;case 23:break;case 22:var ke=I.stateNode;I.memoizedState!==null?ke._visibility&2?rd(O,I,q,ne,T):Eh(O,I):(ke._visibility|=2,rd(O,I,q,ne,T)),T&&ge&2048&&Kw(I.alternate,I);break;case 24:rd(O,I,q,ne,T),T&&ge&2048&&Ww(I.alternate,I);break;default:rd(O,I,q,ne,T)}c=c.sibling}}function Eh(s,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var m=s,x=c,T=x.flags;switch(x.tag){case 22:Eh(m,x),T&2048&&Kw(x.alternate,x);break;case 24:Eh(m,x),T&2048&&Ww(x.alternate,x);break;default:Eh(m,x)}c=c.sibling}}var Th=8192;function id(s,c,m){if(s.subtreeFlags&Th)for(s=s.child;s!==null;)yN(s,c,m),s=s.sibling}function yN(s,c,m){switch(s.tag){case 26:id(s,c,m),s.flags&Th&&s.memoizedState!==null&&bG(m,$a,s.memoizedState,s.memoizedProps);break;case 5:id(s,c,m);break;case 3:case 4:var x=$a;$a=o0(s.stateNode.containerInfo),id(s,c,m),$a=x;break;case 22:s.memoizedState===null&&(x=s.alternate,x!==null&&x.memoizedState!==null?(x=Th,Th=16777216,id(s,c,m),Th=x):id(s,c,m));break;default:id(s,c,m)}}function vN(s){var c=s.alternate;if(c!==null&&(s=c.child,s!==null)){c.child=null;do c=s.sibling,s.sibling=null,s=c;while(s!==null)}}function Ah(s){var c=s.deletions;if((s.flags&16)!==0){if(c!==null)for(var m=0;m<c.length;m++){var x=c[m];sr=x,wN(x,s)}vN(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)xN(s),s=s.sibling}function xN(s){switch(s.tag){case 0:case 11:case 15:Ah(s),s.flags&2048&&bl(9,s,s.return);break;case 3:Ah(s);break;case 12:Ah(s);break;case 22:var c=s.stateNode;s.memoizedState!==null&&c._visibility&2&&(s.return===null||s.return.tag!==13)?(c._visibility&=-3,Kg(s)):Ah(s);break;default:Ah(s)}}function Kg(s){var c=s.deletions;if((s.flags&16)!==0){if(c!==null)for(var m=0;m<c.length;m++){var x=c[m];sr=x,wN(x,s)}vN(s)}for(s=s.child;s!==null;){switch(c=s,c.tag){case 0:case 11:case 15:bl(8,c,c.return),Kg(c);break;case 22:m=c.stateNode,m._visibility&2&&(m._visibility&=-3,Kg(c));break;default:Kg(c)}s=s.sibling}}function wN(s,c){for(;sr!==null;){var m=sr;switch(m.tag){case 0:case 11:case 15:bl(8,m,c);break;case 23:case 22:if(m.memoizedState!==null&&m.memoizedState.cachePool!==null){var x=m.memoizedState.cachePool.pool;x!=null&&x.refCount++}break;case 24:uh(m.memoizedState.cache)}if(x=m.child,x!==null)x.return=m,sr=x;else e:for(m=s;sr!==null;){x=sr;var T=x.sibling,O=x.return;if(dN(x),x===m){sr=null;break e}if(T!==null){T.return=O,sr=T;break e}sr=O}}}var MH={getCacheForType:function(s){var c=vr(Ln),m=c.data.get(s);return m===void 0&&(m=s(),c.data.set(s,m)),m},cacheSignal:function(){return vr(Ln).controller.signal}},DH=typeof WeakMap=="function"?WeakMap:Map,Ct=0,Yt=null,yt=null,wt=0,$t=0,Ci=null,yl=!1,ad=!1,Vw=!1,fs=0,kn=0,vl=0,Lc=0,Zw=0,Mi=0,od=0,jh=null,di=null,Xw=!1,Wg=0,_N=0,Vg=1/0,Zg=null,xl=null,Vn=0,wl=null,sd=null,hs=0,Jw=0,Qw=null,SN=null,Oh=0,e_=null;function Di(){return(Ct&2)!==0&&wt!==0?wt&-wt:G.T!==null?o_():Bf()}function kN(){if(Mi===0)if((wt&536870912)===0||bt){var s=Dt;Dt<<=1,(Dt&3932160)===0&&(Dt=262144),Mi=s}else Mi=536870912;return s=Oi.current,s!==null&&(s.flags|=32),Mi}function fi(s,c,m){(s===Yt&&($t===2||$t===9)||s.cancelPendingCommit!==null)&&(ld(s,0),_l(s,wt,Mi,!1)),Yo(s,m),((Ct&2)===0||s!==Yt)&&(s===Yt&&((Ct&2)===0&&(Lc|=m),kn===4&&_l(s,wt,Mi,!1)),_o(s))}function EN(s,c,m){if((Ct&6)!==0)throw Error(r(327));var x=!m&&(c&127)===0&&(c&s.expiredLanes)===0||tc(s,c),T=x?LH(s,c):n_(s,c,!0),O=x;do{if(T===0){ad&&!x&&_l(s,c,0,!1);break}else{if(m=s.current.alternate,O&&!PH(m)){T=n_(s,c,!1),O=!1;continue}if(T===2){if(O=c,s.errorRecoveryDisabledLanes&O)var I=0;else I=s.pendingLanes&-536870913,I=I!==0?I:I&536870912?536870912:0;if(I!==0){c=I;e:{var q=s;T=jh;var ne=q.current.memoizedState.isDehydrated;if(ne&&(ld(q,I).flags|=256),I=n_(q,I,!1),I!==2){if(Vw&&!ne){q.errorRecoveryDisabledLanes|=O,Lc|=O,T=4;break e}O=di,di=T,O!==null&&(di===null?di=O:di.push.apply(di,O))}T=I}if(O=!1,T!==2)continue}}if(T===1){ld(s,0),_l(s,c,0,!0);break}e:{switch(x=s,O=T,O){case 0:case 1:throw Error(r(345));case 4:if((c&4194048)!==c)break;case 6:_l(x,c,Mi,!yl);break e;case 2:di=null;break;case 3:case 5:break;default:throw Error(r(329))}if((c&62914560)===c&&(T=Wg+300-ze(),10<T)){if(_l(x,c,Mi,!yl),ju(x,0,!0)!==0)break e;hs=c,x.timeoutHandle=nC(TN.bind(null,x,m,di,Zg,Xw,c,Mi,Lc,od,yl,O,"Throttled",-0,0),T);break e}TN(x,m,di,Zg,Xw,c,Mi,Lc,od,yl,O,null,-0,0)}}break}while(!0);_o(s)}function TN(s,c,m,x,T,O,I,q,ne,ge,ke,je,ye,ve){if(s.timeoutHandle=-1,je=c.subtreeFlags,je&8192||(je&16785408)===16785408){je={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ri},yN(c,O,je);var qe=(O&62914560)===O?Wg-ze():(O&4194048)===O?_N-ze():0;if(qe=yG(je,qe),qe!==null){hs=O,s.cancelPendingCommit=qe(PN.bind(null,s,c,O,m,x,T,I,q,ne,ke,je,null,ye,ve)),_l(s,O,I,!ge);return}}PN(s,c,O,m,x,T,I,q,ne)}function PH(s){for(var c=s;;){var m=c.tag;if((m===0||m===11||m===15)&&c.flags&16384&&(m=c.updateQueue,m!==null&&(m=m.stores,m!==null)))for(var x=0;x<m.length;x++){var T=m[x],O=T.getSnapshot;T=T.value;try{if(!ar(O(),T))return!1}catch{return!1}}if(m=c.child,c.subtreeFlags&16384&&m!==null)m.return=c,c=m;else{if(c===s)break;for(;c.sibling===null;){if(c.return===null||c.return===s)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function _l(s,c,m,x){c&=~Zw,c&=~Lc,s.suspendedLanes|=c,s.pingedLanes&=~c,x&&(s.warmLanes|=c),x=s.expirationTimes;for(var T=c;0<T;){var O=31-Yn(T),I=1<<O;x[O]=-1,T&=~I}m!==0&&Vp(s,m,c)}function Xg(){return(Ct&6)===0?(Nh(0),!1):!0}function t_(){if(yt!==null){if($t===0)var s=yt.return;else s=yt,Ia=xo=null,bw(s),Ju=null,fh=0,s=yt;for(;s!==null;)rN(s.alternate,s),s=s.return;yt=null}}function ld(s,c){var m=s.timeoutHandle;m!==-1&&(s.timeoutHandle=-1,eG(m)),m=s.cancelPendingCommit,m!==null&&(s.cancelPendingCommit=null,m()),hs=0,t_(),Yt=s,yt=m=ia(s.current,null),wt=c,$t=0,Ci=null,yl=!1,ad=tc(s,c),Vw=!1,od=Mi=Zw=Lc=vl=kn=0,di=jh=null,Xw=!1,(c&8)!==0&&(c|=c&32);var x=s.entangledLanes;if(x!==0)for(s=s.entanglements,x&=c;0<x;){var T=31-Yn(x),O=1<<T;c|=s[T],x&=~O}return fs=c,Sc(),m}function AN(s,c){dt=null,G.H=xh,c===Xu||c===Tg?(c=Hj(),$t=3):c===aw?(c=Hj(),$t=4):$t=c===Dw?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,Ci=c,yt===null&&(kn=1,zg(s,v(c,s.current)))}function jN(){var s=Oi.current;return s===null?!0:(wt&4194048)===wt?aa===null:(wt&62914560)===wt||(wt&536870912)!==0?s===aa:!1}function ON(){var s=G.H;return G.H=xh,s===null?xh:s}function NN(){var s=G.A;return G.A=MH,s}function Jg(){kn=4,yl||(wt&4194048)!==wt&&Oi.current!==null||(ad=!0),(vl&134217727)===0&&(Lc&134217727)===0||Yt===null||_l(Yt,wt,Mi,!1)}function n_(s,c,m){var x=Ct;Ct|=2;var T=ON(),O=NN();(Yt!==s||wt!==c)&&(Zg=null,ld(s,c)),c=!1;var I=kn;e:do try{if($t!==0&&yt!==null){var q=yt,ne=Ci;switch($t){case 8:t_(),I=6;break e;case 3:case 2:case 9:case 6:Oi.current===null&&(c=!0);var ge=$t;if($t=0,Ci=null,cd(s,q,ne,ge),m&&ad){I=0;break e}break;default:ge=$t,$t=0,Ci=null,cd(s,q,ne,ge)}}RH(),I=kn;break}catch(ke){AN(s,ke)}while(!0);return c&&s.shellSuspendCounter++,Ia=xo=null,Ct=x,G.H=T,G.A=O,yt===null&&(Yt=null,wt=0,Sc()),I}function RH(){for(;yt!==null;)CN(yt)}function LH(s,c){var m=Ct;Ct|=2;var x=ON(),T=NN();Yt!==s||wt!==c?(Zg=null,Vg=ze()+500,ld(s,c)):ad=tc(s,c);e:do try{if($t!==0&&yt!==null){c=yt;var O=Ci;t:switch($t){case 1:$t=0,Ci=null,cd(s,c,O,1);break;case 2:case 9:if(Uj(O)){$t=0,Ci=null,MN(c);break}c=function(){$t!==2&&$t!==9||Yt!==s||($t=7),_o(s)},O.then(c,c);break e;case 3:$t=7;break e;case 4:$t=5;break e;case 7:Uj(O)?($t=0,Ci=null,MN(c)):($t=0,Ci=null,cd(s,c,O,7));break;case 5:var I=null;switch(yt.tag){case 26:I=yt.memoizedState;case 5:case 27:var q=yt;if(I?bC(I):q.stateNode.complete){$t=0,Ci=null;var ne=q.sibling;if(ne!==null)yt=ne;else{var ge=q.return;ge!==null?(yt=ge,Qg(ge)):yt=null}break t}}$t=0,Ci=null,cd(s,c,O,5);break;case 6:$t=0,Ci=null,cd(s,c,O,6);break;case 8:t_(),kn=6;break e;default:throw Error(r(462))}}IH();break}catch(ke){AN(s,ke)}while(!0);return Ia=xo=null,G.H=x,G.A=T,Ct=m,yt!==null?0:(Yt=null,wt=0,Sc(),kn)}function IH(){for(;yt!==null&&!ue();)CN(yt)}function CN(s){var c=tN(s.alternate,s,fs);s.memoizedProps=s.pendingProps,c===null?Qg(s):yt=c}function MN(s){var c=s,m=c.alternate;switch(c.tag){case 15:case 0:c=VO(m,c,c.pendingProps,c.type,void 0,wt);break;case 11:c=VO(m,c,c.pendingProps,c.type.render,c.ref,wt);break;case 5:bw(c);default:rN(m,c),c=yt=ah(c,fs),c=tN(m,c,fs)}s.memoizedProps=s.pendingProps,c===null?Qg(s):yt=c}function cd(s,c,m,x){Ia=xo=null,bw(c),Ju=null,fh=0;var T=c.return;try{if(EH(s,T,c,m,wt)){kn=1,zg(s,v(m,s.current)),yt=null;return}}catch(O){if(T!==null)throw yt=T,O;kn=1,zg(s,v(m,s.current)),yt=null;return}c.flags&32768?(bt||x===1?s=!0:ad||(wt&536870912)!==0?s=!1:(yl=s=!0,(x===2||x===9||x===3||x===6)&&(x=Oi.current,x!==null&&x.tag===13&&(x.flags|=16384))),DN(c,s)):Qg(c)}function Qg(s){var c=s;do{if((c.flags&32768)!==0){DN(c,yl);return}s=c.return;var m=jH(c.alternate,c,fs);if(m!==null){yt=m;return}if(c=c.sibling,c!==null){yt=c;return}yt=c=s}while(c!==null);kn===0&&(kn=5)}function DN(s,c){do{var m=OH(s.alternate,s);if(m!==null){m.flags&=32767,yt=m;return}if(m=s.return,m!==null&&(m.flags|=32768,m.subtreeFlags=0,m.deletions=null),!c&&(s=s.sibling,s!==null)){yt=s;return}yt=s=m}while(s!==null);kn=6,yt=null}function PN(s,c,m,x,T,O,I,q,ne){s.cancelPendingCommit=null;do e0();while(Vn!==0);if((Ct&6)!==0)throw Error(r(327));if(c!==null){if(c===s.current)throw Error(r(177));if(O=c.lanes|c.childLanes,O|=Gu,$x(s,m,O,I,q,ne),s===Yt&&(yt=Yt=null,wt=0),sd=c,wl=s,hs=m,Jw=O,Qw=T,SN=x,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,UH(Qt,function(){return BN(),null})):(s.callbackNode=null,s.callbackPriority=0),x=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||x){x=G.T,G.T=null,T=J.p,J.p=2,I=Ct,Ct|=4;try{NH(s,c,m)}finally{Ct=I,J.p=T,G.T=x}}Vn=1,RN(),LN(),IN()}}function RN(){if(Vn===1){Vn=0;var s=wl,c=sd,m=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||m){m=G.T,G.T=null;var x=J.p;J.p=2;var T=Ct;Ct|=4;try{pN(c,s);var O=m_,I=yc(s.containerInfo),q=O.focusedElem,ne=O.selectionRange;if(I!==q&&q&&q.ownerDocument&&zu(q.ownerDocument.documentElement,q)){if(ne!==null&&ho(q)){var ge=ne.start,ke=ne.end;if(ke===void 0&&(ke=ge),"selectionStart"in q)q.selectionStart=ge,q.selectionEnd=Math.min(ke,q.value.length);else{var je=q.ownerDocument||document,ye=je&&je.defaultView||window;if(ye.getSelection){var ve=ye.getSelection(),qe=q.textContent.length,rt=Math.min(ne.start,qe),Gt=ne.end===void 0?rt:Math.min(ne.end,qe);!ve.extend&&rt>Gt&&(I=Gt,Gt=rt,rt=I);var de=bc(q,rt),ae=bc(q,Gt);if(de&&ae&&(ve.rangeCount!==1||ve.anchorNode!==de.node||ve.anchorOffset!==de.offset||ve.focusNode!==ae.node||ve.focusOffset!==ae.offset)){var pe=je.createRange();pe.setStart(de.node,de.offset),ve.removeAllRanges(),rt>Gt?(ve.addRange(pe),ve.extend(ae.node,ae.offset)):(pe.setEnd(ae.node,ae.offset),ve.addRange(pe))}}}}for(je=[],ve=q;ve=ve.parentNode;)ve.nodeType===1&&je.push({element:ve,left:ve.scrollLeft,top:ve.scrollTop});for(typeof q.focus=="function"&&q.focus(),q=0;q<je.length;q++){var Te=je[q];Te.element.scrollLeft=Te.left,Te.element.scrollTop=Te.top}}f0=!!h_,m_=h_=null}finally{Ct=T,J.p=x,G.T=m}}s.current=c,Vn=2}}function LN(){if(Vn===2){Vn=0;var s=wl,c=sd,m=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||m){m=G.T,G.T=null;var x=J.p;J.p=2;var T=Ct;Ct|=4;try{uN(s,c.alternate,c)}finally{Ct=T,J.p=x,G.T=m}}Vn=3}}function IN(){if(Vn===4||Vn===3){Vn=0,Ce();var s=wl,c=sd,m=hs,x=SN;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?Vn=5:(Vn=0,sd=wl=null,$N(s,s.pendingLanes));var T=s.pendingLanes;if(T===0&&(xl=null),We(m),c=c.stateNode,an&&typeof an.onCommitFiberRoot=="function")try{an.onCommitFiberRoot(It,c,void 0,(c.current.flags&128)===128)}catch{}if(x!==null){c=G.T,T=J.p,J.p=2,G.T=null;try{for(var O=s.onRecoverableError,I=0;I<x.length;I++){var q=x[I];O(q.value,{componentStack:q.stack})}}finally{G.T=c,J.p=T}}(hs&3)!==0&&e0(),_o(s),T=s.pendingLanes,(m&261930)!==0&&(T&42)!==0?s===e_?Oh++:(Oh=0,e_=s):Oh=0,Nh(0)}}function $N(s,c){(s.pooledCacheLanes&=c)===0&&(c=s.pooledCache,c!=null&&(s.pooledCache=null,uh(c)))}function e0(){return RN(),LN(),IN(),BN()}function BN(){if(Vn!==5)return!1;var s=wl,c=Jw;Jw=0;var m=We(hs),x=G.T,T=J.p;try{J.p=32>m?32:m,G.T=null,m=Qw,Qw=null;var O=wl,I=hs;if(Vn=0,sd=wl=null,hs=0,(Ct&6)!==0)throw Error(r(331));var q=Ct;if(Ct|=4,xN(O.current),bN(O,O.current,I,m),Ct=q,Nh(0,!1),an&&typeof an.onPostCommitFiberRoot=="function")try{an.onPostCommitFiberRoot(It,O)}catch{}return!0}finally{J.p=T,G.T=x,$N(s,c)}}function zN(s,c,m){c=v(m,c),c=Mw(s.stateNode,c,2),s=ml(s,c,2),s!==null&&(Yo(s,2),_o(s))}function Bt(s,c,m){if(s.tag===3)zN(s,s,m);else for(;c!==null;){if(c.tag===3){zN(c,s,m);break}else if(c.tag===1){var x=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof x.componentDidCatch=="function"&&(xl===null||!xl.has(x))){s=v(m,s),m=UO(2),x=ml(c,m,2),x!==null&&(FO(m,x,c,s),Yo(x,2),_o(x));break}}c=c.return}}function r_(s,c,m){var x=s.pingCache;if(x===null){x=s.pingCache=new DH;var T=new Set;x.set(c,T)}else T=x.get(c),T===void 0&&(T=new Set,x.set(c,T));T.has(m)||(Vw=!0,T.add(m),s=$H.bind(null,s,c,m),c.then(s,s))}function $H(s,c,m){var x=s.pingCache;x!==null&&x.delete(c),s.pingedLanes|=s.suspendedLanes&m,s.warmLanes&=~m,Yt===s&&(wt&m)===m&&(kn===4||kn===3&&(wt&62914560)===wt&&300>ze()-Wg?(Ct&2)===0&&ld(s,0):Zw|=m,od===wt&&(od=0)),_o(s)}function UN(s,c){c===0&&(c=Wp()),s=ra(s,c),s!==null&&(Yo(s,c),_o(s))}function BH(s){var c=s.memoizedState,m=0;c!==null&&(m=c.retryLane),UN(s,m)}function zH(s,c){var m=0;switch(s.tag){case 31:case 13:var x=s.stateNode,T=s.memoizedState;T!==null&&(m=T.retryLane);break;case 19:x=s.stateNode;break;case 22:x=s.stateNode._retryCache;break;default:throw Error(r(314))}x!==null&&x.delete(c),UN(s,m)}function UH(s,c){return Be(s,c)}var t0=null,ud=null,i_=!1,n0=!1,a_=!1,Sl=0;function _o(s){s!==ud&&s.next===null&&(ud===null?t0=ud=s:ud=ud.next=s),n0=!0,i_||(i_=!0,HH())}function Nh(s,c){if(!a_&&n0){a_=!0;do for(var m=!1,x=t0;x!==null;){if(s!==0){var T=x.pendingLanes;if(T===0)var O=0;else{var I=x.suspendedLanes,q=x.pingedLanes;O=(1<<31-Yn(42|s)+1)-1,O&=T&~(I&~q),O=O&201326741?O&201326741|1:O?O|2:0}O!==0&&(m=!0,qN(x,O))}else O=wt,O=ju(x,x===Yt?O:0,x.cancelPendingCommit!==null||x.timeoutHandle!==-1),(O&3)===0||tc(x,O)||(m=!0,qN(x,O));x=x.next}while(m);a_=!1}}function FH(){FN()}function FN(){n0=i_=!1;var s=0;Sl!==0&&QH()&&(s=Sl);for(var c=ze(),m=null,x=t0;x!==null;){var T=x.next,O=HN(x,c);O===0?(x.next=null,m===null?t0=T:m.next=T,T===null&&(ud=m)):(m=x,(s!==0||(O&3)!==0)&&(n0=!0)),x=T}Vn!==0&&Vn!==5||Nh(s),Sl!==0&&(Sl=0)}function HN(s,c){for(var m=s.suspendedLanes,x=s.pingedLanes,T=s.expirationTimes,O=s.pendingLanes&-62914561;0<O;){var I=31-Yn(O),q=1<<I,ne=T[I];ne===-1?((q&m)===0||(q&x)!==0)&&(T[I]=Ix(q,c)):ne<=c&&(s.expiredLanes|=q),O&=~q}if(c=Yt,m=wt,m=ju(s,s===c?m:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),x=s.callbackNode,m===0||s===c&&($t===2||$t===9)||s.cancelPendingCommit!==null)return x!==null&&x!==null&&lt(x),s.callbackNode=null,s.callbackPriority=0;if((m&3)===0||tc(s,m)){if(c=m&-m,c===s.callbackPriority)return c;switch(x!==null&&lt(x),We(m)){case 2:case 8:m=pt;break;case 32:m=Qt;break;case 268435456:m=Br;break;default:m=Qt}return x=GN.bind(null,s),m=Be(m,x),s.callbackPriority=c,s.callbackNode=m,c}return x!==null&&x!==null&&lt(x),s.callbackPriority=2,s.callbackNode=null,2}function GN(s,c){if(Vn!==0&&Vn!==5)return s.callbackNode=null,s.callbackPriority=0,null;var m=s.callbackNode;if(e0()&&s.callbackNode!==m)return null;var x=wt;return x=ju(s,s===Yt?x:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),x===0?null:(EN(s,x,c),HN(s,ze()),s.callbackNode!=null&&s.callbackNode===m?GN.bind(null,s):null)}function qN(s,c){if(e0())return null;EN(s,c,!0)}function HH(){tG(function(){(Ct&6)!==0?Be(Et,FH):FN()})}function o_(){if(Sl===0){var s=Vu;s===0&&(s=nt,nt<<=1,(nt&261888)===0&&(nt=256)),Sl=s}return Sl}function YN(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Js(""+s)}function KN(s,c){var m=c.ownerDocument.createElement("input");return m.name=c.name,m.value=c.value,s.id&&m.setAttribute("form",s.id),c.parentNode.insertBefore(m,c),s=new FormData(s),m.parentNode.removeChild(m),s}function GH(s,c,m,x,T){if(c==="submit"&&m&&m.stateNode===T){var O=YN((T[ir]||null).action),I=x.submitter;I&&(c=(c=I[ir]||null)?YN(c.formAction):I.getAttribute("formAction"),c!==null&&(O=c,I=null));var q=new Du("action","action",null,x,T);s.push({event:q,listeners:[{instance:null,listener:function(){if(x.defaultPrevented){if(Sl!==0){var ne=I?KN(T,I):new FormData(T);Tw(m,{pending:!0,data:ne,method:T.method,action:O},null,ne)}}else typeof O=="function"&&(q.preventDefault(),ne=I?KN(T,I):new FormData(T),Tw(m,{pending:!0,data:ne,method:T.method,action:O},O,ne))},currentTarget:T}]})}}for(var s_=0;s_<go.length;s_++){var l_=go[s_],qH=l_.toLowerCase(),YH=l_[0].toUpperCase()+l_.slice(1);ai(qH,"on"+YH)}ai(xc,"onAnimationEnd"),ai(xg,"onAnimationIteration"),ai(wc,"onAnimationStart"),ai("dblclick","onDoubleClick"),ai("focusin","onFocus"),ai("focusout","onBlur"),ai(Xx,"onTransitionRun"),ai(wg,"onTransitionStart"),ai(Jx,"onTransitionCancel"),ai(cl,"onTransitionEnd"),lo("onMouseEnter",["mouseout","mouseover"]),lo("onMouseLeave",["mouseout","mouseover"]),lo("onPointerEnter",["pointerout","pointerover"]),lo("onPointerLeave",["pointerout","pointerover"]),Vo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Vo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Vo("onBeforeInput",["compositionend","keypress","textInput","paste"]),Vo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Vo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Vo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ch="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),KH=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ch));function WN(s,c){c=(c&4)!==0;for(var m=0;m<s.length;m++){var x=s[m],T=x.event;x=x.listeners;e:{var O=void 0;if(c)for(var I=x.length-1;0<=I;I--){var q=x[I],ne=q.instance,ge=q.currentTarget;if(q=q.listener,ne!==O&&T.isPropagationStopped())break e;O=q,T.currentTarget=ge;try{O(T)}catch(ke){_c(ke)}T.currentTarget=null,O=ne}else for(I=0;I<x.length;I++){if(q=x[I],ne=q.instance,ge=q.currentTarget,q=q.listener,ne!==O&&T.isPropagationStopped())break e;O=q,T.currentTarget=ge;try{O(T)}catch(ke){_c(ke)}T.currentTarget=null,O=ne}}}}function vt(s,c){var m=c[oo];m===void 0&&(m=c[oo]=new Set);var x=s+"__bubble";m.has(x)||(VN(c,s,2,!1),m.add(x))}function c_(s,c,m){var x=0;c&&(x|=4),VN(m,s,x,c)}var r0="_reactListening"+Math.random().toString(36).slice(2);function u_(s){if(!s[r0]){s[r0]=!0,eg.forEach(function(m){m!=="selectionchange"&&(KH.has(m)||c_(m,!1,s),c_(m,!0,s))});var c=s.nodeType===9?s:s.ownerDocument;c===null||c[r0]||(c[r0]=!0,c_("selectionchange",!1,c))}}function VN(s,c,m,x){switch(kC(c)){case 2:var T=wG;break;case 8:T=_G;break;default:T=E_}m=T.bind(null,c,m,s),T=void 0,!lc||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(T=!0),x?T!==void 0?s.addEventListener(c,m,{capture:!0,passive:T}):s.addEventListener(c,m,!0):T!==void 0?s.addEventListener(c,m,{passive:T}):s.addEventListener(c,m,!1)}function d_(s,c,m,x,T){var O=x;if((c&1)===0&&(c&2)===0&&x!==null)e:for(;;){if(x===null)return;var I=x.tag;if(I===3||I===4){var q=x.stateNode.containerInfo;if(q===T)break;if(I===4)for(I=x.return;I!==null;){var ne=I.tag;if((ne===3||ne===4)&&I.stateNode.containerInfo===T)return;I=I.return}for(;q!==null;){if(I=Wo(q),I===null)return;if(ne=I.tag,ne===5||ne===6||ne===26||ne===27){x=O=I;continue e}q=q.parentNode}}x=x.return}Wf(function(){var ge=O,ke=sc(m),je=[];e:{var ye=_g.get(s);if(ye!==void 0){var ve=Du,qe=s;switch(s){case"keypress":if(cc(m)===0)break e;case"keydown":case"keyup":ve=lg;break;case"focusin":qe="focus",ve=Xf;break;case"focusout":qe="blur",ve=Xf;break;case"beforeblur":case"afterblur":ve=Xf;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ve=rg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ve=zx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ve=qx;break;case xc:case xg:case wc:ve=Jf;break;case cl:ve=dg;break;case"scroll":case"scrollend":ve=xt;break;case"wheel":ve=Qo;break;case"copy":case"cut":case"paste":ve=Qi;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ve=cg;break;case"toggle":case"beforetoggle":ve=fc}var rt=(c&4)!==0,Gt=!rt&&(s==="scroll"||s==="scrollend"),de=rt?ye!==null?ye+"Capture":null:ye;rt=[];for(var ae=ge,pe;ae!==null;){var Te=ae;if(pe=Te.stateNode,Te=Te.tag,Te!==5&&Te!==26&&Te!==27||pe===null||de===null||(Te=Xo(ae,de),Te!=null&&rt.push(Mh(ae,Te,pe))),Gt)break;ae=ae.return}0<rt.length&&(ye=new ve(ye,qe,null,m,ke),je.push({event:ye,listeners:rt}))}}if((c&7)===0){e:{if(ye=s==="mouseover"||s==="pointerover",ve=s==="mouseout"||s==="pointerout",ye&&m!==Mu&&(qe=m.relatedTarget||m.fromElement)&&(Wo(qe)||qe[Ko]))break e;if((ve||ye)&&(ye=ke.window===ke?ke:(ye=ke.ownerDocument)?ye.defaultView||ye.parentWindow:window,ve?(qe=m.relatedTarget||m.toElement,ve=ge,qe=qe?Wo(qe):null,qe!==null&&(Gt=a(qe),rt=qe.tag,qe!==Gt||rt!==5&&rt!==27&&rt!==6)&&(qe=null)):(ve=null,qe=ge),ve!==qe)){if(rt=rg,Te="onMouseLeave",de="onMouseEnter",ae="mouse",(s==="pointerout"||s==="pointerover")&&(rt=cg,Te="onPointerLeave",de="onPointerEnter",ae="pointer"),Gt=ve==null?ye:so(ve),pe=qe==null?ye:so(qe),ye=new rt(Te,ae+"leave",ve,m,ke),ye.target=Gt,ye.relatedTarget=pe,Te=null,Wo(ke)===ge&&(rt=new rt(de,ae+"enter",qe,m,ke),rt.target=pe,rt.relatedTarget=Gt,Te=rt),Gt=Te,ve&&qe)t:{for(rt=WH,de=ve,ae=qe,pe=0,Te=de;Te;Te=rt(Te))pe++;Te=0;for(var et=ae;et;et=rt(et))Te++;for(;0<pe-Te;)de=rt(de),pe--;for(;0<Te-pe;)ae=rt(ae),Te--;for(;pe--;){if(de===ae||ae!==null&&de===ae.alternate){rt=de;break t}de=rt(de),ae=rt(ae)}rt=null}else rt=null;ve!==null&&ZN(je,ye,ve,rt,!1),qe!==null&&Gt!==null&&ZN(je,Gt,qe,rt,!0)}}e:{if(ye=ge?so(ge):window,ve=ye.nodeName&&ye.nodeName.toLowerCase(),ve==="select"||ve==="input"&&ye.type==="file")var jt=gc;else if(ea(ye))if(pg)jt=Zx;else{jt=Vx;var Ke=Pa}else ve=ye.nodeName,!ve||ve.toLowerCase()!=="input"||ye.type!=="checkbox"&&ye.type!=="radio"?ge&&oc(ge.elementType)&&(jt=gc):jt=al;if(jt&&(jt=jt(s,ge))){mg(je,jt,m,ke);break e}Ke&&Ke(s,ye,ge),s==="focusout"&&ge&&ye.type==="number"&&ge.memoizedProps.value!=null&&Ca(ye,"number",ye.value)}switch(Ke=ge?so(ge):window,s){case"focusin":(ea(Ke)||Ke.contentEditable==="true")&&(mo=Ke,Fu=ge,vc=null);break;case"focusout":vc=Fu=mo=null;break;case"mousedown":sl=!0;break;case"contextmenu":case"mouseup":case"dragend":sl=!1,yg(je,m,ke);break;case"selectionchange":if(Uu)break;case"keydown":case"keyup":yg(je,m,ke)}var ht;if(Ru)e:{switch(s){case"compositionstart":var _t="onCompositionStart";break e;case"compositionend":_t="onCompositionEnd";break e;case"compositionupdate":_t="onCompositionUpdate";break e}_t=void 0}else nl?hg(s,m)&&(_t="onCompositionEnd"):s==="keydown"&&m.keyCode===229&&(_t="onCompositionStart");_t&&(Lu&&m.locale!=="ko"&&(nl||_t!=="onCompositionStart"?_t==="onCompositionEnd"&&nl&&(ht=uo()):(Ji=ke,Jo="value"in Ji?Ji.value:Ji.textContent,nl=!0)),Ke=i0(ge,_t),0<Ke.length&&(_t=new Qf(_t,s,null,m,ke),je.push({event:_t,listeners:Ke}),ht?_t.data=ht:(ht=rh(m),ht!==null&&(_t.data=ht)))),(ht=Kx?ji(s,m):rl(s,m))&&(_t=i0(ge,"onBeforeInput"),0<_t.length&&(Ke=new Qf("onBeforeInput","beforeinput",null,m,ke),je.push({event:Ke,listeners:_t}),Ke.data=ht)),GH(je,s,ge,m,ke)}WN(je,c)})}function Mh(s,c,m){return{instance:s,listener:c,currentTarget:m}}function i0(s,c){for(var m=c+"Capture",x=[];s!==null;){var T=s,O=T.stateNode;if(T=T.tag,T!==5&&T!==26&&T!==27||O===null||(T=Xo(s,m),T!=null&&x.unshift(Mh(s,T,O)),T=Xo(s,c),T!=null&&x.push(Mh(s,T,O))),s.tag===3)return x;s=s.return}return[]}function WH(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function ZN(s,c,m,x,T){for(var O=c._reactName,I=[];m!==null&&m!==x;){var q=m,ne=q.alternate,ge=q.stateNode;if(q=q.tag,ne!==null&&ne===x)break;q!==5&&q!==26&&q!==27||ge===null||(ne=ge,T?(ge=Xo(m,O),ge!=null&&I.unshift(Mh(m,ge,ne))):T||(ge=Xo(m,O),ge!=null&&I.push(Mh(m,ge,ne)))),m=m.return}I.length!==0&&s.push({event:c,listeners:I})}var VH=/\r\n?/g,ZH=/\u0000|\uFFFD/g;function XN(s){return(typeof s=="string"?s:""+s).replace(VH,`
`).replace(ZH,"")}function JN(s,c){return c=XN(c),XN(s)===c}function Ht(s,c,m,x,T,O){switch(m){case"children":typeof x=="string"?c==="body"||c==="textarea"&&x===""||Xi(s,x):(typeof x=="number"||typeof x=="bigint")&&c!=="body"&&Xi(s,""+x);break;case"className":Ut(s,"class",x);break;case"tabIndex":Ut(s,"tabindex",x);break;case"dir":case"role":case"viewBox":case"width":case"height":Ut(s,m,x);break;case"style":Nu(s,x,O);break;case"data":if(c!=="object"){Ut(s,"data",x);break}case"src":case"href":if(x===""&&(c!=="a"||m!=="href")){s.removeAttribute(m);break}if(x==null||typeof x=="function"||typeof x=="symbol"||typeof x=="boolean"){s.removeAttribute(m);break}x=Js(""+x),s.setAttribute(m,x);break;case"action":case"formAction":if(typeof x=="function"){s.setAttribute(m,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof O=="function"&&(m==="formAction"?(c!=="input"&&Ht(s,c,"name",T.name,T,null),Ht(s,c,"formEncType",T.formEncType,T,null),Ht(s,c,"formMethod",T.formMethod,T,null),Ht(s,c,"formTarget",T.formTarget,T,null)):(Ht(s,c,"encType",T.encType,T,null),Ht(s,c,"method",T.method,T,null),Ht(s,c,"target",T.target,T,null)));if(x==null||typeof x=="symbol"||typeof x=="boolean"){s.removeAttribute(m);break}x=Js(""+x),s.setAttribute(m,x);break;case"onClick":x!=null&&(s.onclick=ri);break;case"onScroll":x!=null&&vt("scroll",s);break;case"onScrollEnd":x!=null&&vt("scrollend",s);break;case"dangerouslySetInnerHTML":if(x!=null){if(typeof x!="object"||!("__html"in x))throw Error(r(61));if(m=x.__html,m!=null){if(T.children!=null)throw Error(r(60));s.innerHTML=m}}break;case"multiple":s.multiple=x&&typeof x!="function"&&typeof x!="symbol";break;case"muted":s.muted=x&&typeof x!="function"&&typeof x!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(x==null||typeof x=="function"||typeof x=="boolean"||typeof x=="symbol"){s.removeAttribute("xlink:href");break}m=Js(""+x),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",m);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":x!=null&&typeof x!="function"&&typeof x!="symbol"?s.setAttribute(m,""+x):s.removeAttribute(m);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":x&&typeof x!="function"&&typeof x!="symbol"?s.setAttribute(m,""):s.removeAttribute(m);break;case"capture":case"download":x===!0?s.setAttribute(m,""):x!==!1&&x!=null&&typeof x!="function"&&typeof x!="symbol"?s.setAttribute(m,x):s.removeAttribute(m);break;case"cols":case"rows":case"size":case"span":x!=null&&typeof x!="function"&&typeof x!="symbol"&&!isNaN(x)&&1<=x?s.setAttribute(m,x):s.removeAttribute(m);break;case"rowSpan":case"start":x==null||typeof x=="function"||typeof x=="symbol"||isNaN(x)?s.removeAttribute(m):s.setAttribute(m,x);break;case"popover":vt("beforetoggle",s),vt("toggle",s),gt(s,"popover",x);break;case"xlinkActuate":ni(s,"http://www.w3.org/1999/xlink","xlink:actuate",x);break;case"xlinkArcrole":ni(s,"http://www.w3.org/1999/xlink","xlink:arcrole",x);break;case"xlinkRole":ni(s,"http://www.w3.org/1999/xlink","xlink:role",x);break;case"xlinkShow":ni(s,"http://www.w3.org/1999/xlink","xlink:show",x);break;case"xlinkTitle":ni(s,"http://www.w3.org/1999/xlink","xlink:title",x);break;case"xlinkType":ni(s,"http://www.w3.org/1999/xlink","xlink:type",x);break;case"xmlBase":ni(s,"http://www.w3.org/XML/1998/namespace","xml:base",x);break;case"xmlLang":ni(s,"http://www.w3.org/XML/1998/namespace","xml:lang",x);break;case"xmlSpace":ni(s,"http://www.w3.org/XML/1998/namespace","xml:space",x);break;case"is":gt(s,"is",x);break;case"innerText":case"textContent":break;default:(!(2<m.length)||m[0]!=="o"&&m[0]!=="O"||m[1]!=="n"&&m[1]!=="N")&&(m=Cu.get(m)||m,gt(s,m,x))}}function f_(s,c,m,x,T,O){switch(m){case"style":Nu(s,x,O);break;case"dangerouslySetInnerHTML":if(x!=null){if(typeof x!="object"||!("__html"in x))throw Error(r(61));if(m=x.__html,m!=null){if(T.children!=null)throw Error(r(60));s.innerHTML=m}}break;case"children":typeof x=="string"?Xi(s,x):(typeof x=="number"||typeof x=="bigint")&&Xi(s,""+x);break;case"onScroll":x!=null&&vt("scroll",s);break;case"onScrollEnd":x!=null&&vt("scrollend",s);break;case"onClick":x!=null&&(s.onclick=ri);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!tg.hasOwnProperty(m))e:{if(m[0]==="o"&&m[1]==="n"&&(T=m.endsWith("Capture"),c=m.slice(2,T?m.length-7:void 0),O=s[ir]||null,O=O!=null?O[m]:null,typeof O=="function"&&s.removeEventListener(c,O,T),typeof x=="function")){typeof O!="function"&&O!==null&&(m in s?s[m]=null:s.hasAttribute(m)&&s.removeAttribute(m)),s.addEventListener(c,x,T);break e}m in s?s[m]=x:x===!0?s.setAttribute(m,""):gt(s,m,x)}}}function wr(s,c,m){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":vt("error",s),vt("load",s);var x=!1,T=!1,O;for(O in m)if(m.hasOwnProperty(O)){var I=m[O];if(I!=null)switch(O){case"src":x=!0;break;case"srcSet":T=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,c));default:Ht(s,c,O,I,m,null)}}T&&Ht(s,c,"srcSet",m.srcSet,m,null),x&&Ht(s,c,"src",m.src,m,null);return;case"input":vt("invalid",s);var q=O=I=T=null,ne=null,ge=null;for(x in m)if(m.hasOwnProperty(x)){var ke=m[x];if(ke!=null)switch(x){case"name":T=ke;break;case"type":I=ke;break;case"checked":ne=ke;break;case"defaultChecked":ge=ke;break;case"value":O=ke;break;case"defaultValue":q=ke;break;case"children":case"dangerouslySetInnerHTML":if(ke!=null)throw Error(r(137,c));break;default:Ht(s,c,x,ke,m,null)}}ac(s,O,q,ne,ge,I,T,!1);return;case"select":vt("invalid",s),x=I=O=null;for(T in m)if(m.hasOwnProperty(T)&&(q=m[T],q!=null))switch(T){case"value":O=q;break;case"defaultValue":I=q;break;case"multiple":x=q;default:Ht(s,c,T,q,m,null)}c=O,m=I,s.multiple=!!x,c!=null?qt(s,!!x,c,!1):m!=null&&qt(s,!!x,m,!0);return;case"textarea":vt("invalid",s),O=T=x=null;for(I in m)if(m.hasOwnProperty(I)&&(q=m[I],q!=null))switch(I){case"value":x=q;break;case"defaultValue":T=q;break;case"children":O=q;break;case"dangerouslySetInnerHTML":if(q!=null)throw Error(r(91));break;default:Ht(s,c,I,q,m,null)}Zs(s,x,T,O);return;case"option":for(ne in m)if(m.hasOwnProperty(ne)&&(x=m[ne],x!=null))switch(ne){case"selected":s.selected=x&&typeof x!="function"&&typeof x!="symbol";break;default:Ht(s,c,ne,x,m,null)}return;case"dialog":vt("beforetoggle",s),vt("toggle",s),vt("cancel",s),vt("close",s);break;case"iframe":case"object":vt("load",s);break;case"video":case"audio":for(x=0;x<Ch.length;x++)vt(Ch[x],s);break;case"image":vt("error",s),vt("load",s);break;case"details":vt("toggle",s);break;case"embed":case"source":case"link":vt("error",s),vt("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ge in m)if(m.hasOwnProperty(ge)&&(x=m[ge],x!=null))switch(ge){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,c));default:Ht(s,c,ge,x,m,null)}return;default:if(oc(c)){for(ke in m)m.hasOwnProperty(ke)&&(x=m[ke],x!==void 0&&f_(s,c,ke,x,m,void 0));return}}for(q in m)m.hasOwnProperty(q)&&(x=m[q],x!=null&&Ht(s,c,q,x,m,null))}function XH(s,c,m,x){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var T=null,O=null,I=null,q=null,ne=null,ge=null,ke=null;for(ve in m){var je=m[ve];if(m.hasOwnProperty(ve)&&je!=null)switch(ve){case"checked":break;case"value":break;case"defaultValue":ne=je;default:x.hasOwnProperty(ve)||Ht(s,c,ve,null,x,je)}}for(var ye in x){var ve=x[ye];if(je=m[ye],x.hasOwnProperty(ye)&&(ve!=null||je!=null))switch(ye){case"type":O=ve;break;case"name":T=ve;break;case"checked":ge=ve;break;case"defaultChecked":ke=ve;break;case"value":I=ve;break;case"defaultValue":q=ve;break;case"children":case"dangerouslySetInnerHTML":if(ve!=null)throw Error(r(137,c));break;default:ve!==je&&Ht(s,c,ye,ve,x,je)}}qf(s,I,q,ne,ge,ke,O,T);return;case"select":ve=I=q=ye=null;for(O in m)if(ne=m[O],m.hasOwnProperty(O)&&ne!=null)switch(O){case"value":break;case"multiple":ve=ne;default:x.hasOwnProperty(O)||Ht(s,c,O,null,x,ne)}for(T in x)if(O=x[T],ne=m[T],x.hasOwnProperty(T)&&(O!=null||ne!=null))switch(T){case"value":ye=O;break;case"defaultValue":q=O;break;case"multiple":I=O;default:O!==ne&&Ht(s,c,T,O,x,ne)}c=q,m=I,x=ve,ye!=null?qt(s,!!m,ye,!1):!!x!=!!m&&(c!=null?qt(s,!!m,c,!0):qt(s,!!m,m?[]:"",!1));return;case"textarea":ve=ye=null;for(q in m)if(T=m[q],m.hasOwnProperty(q)&&T!=null&&!x.hasOwnProperty(q))switch(q){case"value":break;case"children":break;default:Ht(s,c,q,null,x,T)}for(I in x)if(T=x[I],O=m[I],x.hasOwnProperty(I)&&(T!=null||O!=null))switch(I){case"value":ye=T;break;case"defaultValue":ve=T;break;case"children":break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(r(91));break;default:T!==O&&Ht(s,c,I,T,x,O)}co(s,ye,ve);return;case"option":for(var qe in m)if(ye=m[qe],m.hasOwnProperty(qe)&&ye!=null&&!x.hasOwnProperty(qe))switch(qe){case"selected":s.selected=!1;break;default:Ht(s,c,qe,null,x,ye)}for(ne in x)if(ye=x[ne],ve=m[ne],x.hasOwnProperty(ne)&&ye!==ve&&(ye!=null||ve!=null))switch(ne){case"selected":s.selected=ye&&typeof ye!="function"&&typeof ye!="symbol";break;default:Ht(s,c,ne,ye,x,ve)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var rt in m)ye=m[rt],m.hasOwnProperty(rt)&&ye!=null&&!x.hasOwnProperty(rt)&&Ht(s,c,rt,null,x,ye);for(ge in x)if(ye=x[ge],ve=m[ge],x.hasOwnProperty(ge)&&ye!==ve&&(ye!=null||ve!=null))switch(ge){case"children":case"dangerouslySetInnerHTML":if(ye!=null)throw Error(r(137,c));break;default:Ht(s,c,ge,ye,x,ve)}return;default:if(oc(c)){for(var Gt in m)ye=m[Gt],m.hasOwnProperty(Gt)&&ye!==void 0&&!x.hasOwnProperty(Gt)&&f_(s,c,Gt,void 0,x,ye);for(ke in x)ye=x[ke],ve=m[ke],!x.hasOwnProperty(ke)||ye===ve||ye===void 0&&ve===void 0||f_(s,c,ke,ye,x,ve);return}}for(var de in m)ye=m[de],m.hasOwnProperty(de)&&ye!=null&&!x.hasOwnProperty(de)&&Ht(s,c,de,null,x,ye);for(je in x)ye=x[je],ve=m[je],!x.hasOwnProperty(je)||ye===ve||ye==null&&ve==null||Ht(s,c,je,ye,x,ve)}function QN(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function JH(){if(typeof performance.getEntriesByType=="function"){for(var s=0,c=0,m=performance.getEntriesByType("resource"),x=0;x<m.length;x++){var T=m[x],O=T.transferSize,I=T.initiatorType,q=T.duration;if(O&&q&&QN(I)){for(I=0,q=T.responseEnd,x+=1;x<m.length;x++){var ne=m[x],ge=ne.startTime;if(ge>q)break;var ke=ne.transferSize,je=ne.initiatorType;ke&&QN(je)&&(ne=ne.responseEnd,I+=ke*(ne<q?1:(q-ge)/(ne-ge)))}if(--x,c+=8*(O+I)/(T.duration/1e3),s++,10<s)break}}if(0<s)return c/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var h_=null,m_=null;function a0(s){return s.nodeType===9?s:s.ownerDocument}function eC(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function tC(s,c){if(s===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&c==="foreignObject"?0:s}function p_(s,c){return s==="textarea"||s==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var g_=null;function QH(){var s=window.event;return s&&s.type==="popstate"?s===g_?!1:(g_=s,!0):(g_=null,!1)}var nC=typeof setTimeout=="function"?setTimeout:void 0,eG=typeof clearTimeout=="function"?clearTimeout:void 0,rC=typeof Promise=="function"?Promise:void 0,tG=typeof queueMicrotask=="function"?queueMicrotask:typeof rC<"u"?function(s){return rC.resolve(null).then(s).catch(nG)}:nC;function nG(s){setTimeout(function(){throw s})}function kl(s){return s==="head"}function iC(s,c){var m=c,x=0;do{var T=m.nextSibling;if(s.removeChild(m),T&&T.nodeType===8)if(m=T.data,m==="/$"||m==="/&"){if(x===0){s.removeChild(T),md(c);return}x--}else if(m==="$"||m==="$?"||m==="$~"||m==="$!"||m==="&")x++;else if(m==="html")Dh(s.ownerDocument.documentElement);else if(m==="head"){m=s.ownerDocument.head,Dh(m);for(var O=m.firstChild;O;){var I=O.nextSibling,q=O.nodeName;O[nc]||q==="SCRIPT"||q==="STYLE"||q==="LINK"&&O.rel.toLowerCase()==="stylesheet"||m.removeChild(O),O=I}}else m==="body"&&Dh(s.ownerDocument.body);m=T}while(m);md(c)}function aC(s,c){var m=s;s=0;do{var x=m.nextSibling;if(m.nodeType===1?c?(m._stashedDisplay=m.style.display,m.style.display="none"):(m.style.display=m._stashedDisplay||"",m.getAttribute("style")===""&&m.removeAttribute("style")):m.nodeType===3&&(c?(m._stashedText=m.nodeValue,m.nodeValue=""):m.nodeValue=m._stashedText||""),x&&x.nodeType===8)if(m=x.data,m==="/$"){if(s===0)break;s--}else m!=="$"&&m!=="$?"&&m!=="$~"&&m!=="$!"||s++;m=x}while(m)}function b_(s){var c=s.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var m=c;switch(c=c.nextSibling,m.nodeName){case"HTML":case"HEAD":case"BODY":b_(m),Uf(m);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(m.rel.toLowerCase()==="stylesheet")continue}s.removeChild(m)}}function rG(s,c,m,x){for(;s.nodeType===1;){var T=m;if(s.nodeName.toLowerCase()!==c.toLowerCase()){if(!x&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(x){if(!s[nc])switch(c){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(O=s.getAttribute("rel"),O==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(O!==T.rel||s.getAttribute("href")!==(T.href==null||T.href===""?null:T.href)||s.getAttribute("crossorigin")!==(T.crossOrigin==null?null:T.crossOrigin)||s.getAttribute("title")!==(T.title==null?null:T.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(O=s.getAttribute("src"),(O!==(T.src==null?null:T.src)||s.getAttribute("type")!==(T.type==null?null:T.type)||s.getAttribute("crossorigin")!==(T.crossOrigin==null?null:T.crossOrigin))&&O&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(c==="input"&&s.type==="hidden"){var O=T.name==null?null:""+T.name;if(T.type==="hidden"&&s.getAttribute("name")===O)return s}else return s;if(s=oa(s.nextSibling),s===null)break}return null}function iG(s,c,m){if(c==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!m||(s=oa(s.nextSibling),s===null))return null;return s}function oC(s,c){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!c||(s=oa(s.nextSibling),s===null))return null;return s}function y_(s){return s.data==="$?"||s.data==="$~"}function v_(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function aG(s,c){var m=s.ownerDocument;if(s.data==="$~")s._reactRetry=c;else if(s.data!=="$?"||m.readyState!=="loading")c();else{var x=function(){c(),m.removeEventListener("DOMContentLoaded",x)};m.addEventListener("DOMContentLoaded",x),s._reactRetry=x}}function oa(s){for(;s!=null;s=s.nextSibling){var c=s.nodeType;if(c===1||c===3)break;if(c===8){if(c=s.data,c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"||c==="F!"||c==="F")break;if(c==="/$"||c==="/&")return null}}return s}var x_=null;function sC(s){s=s.nextSibling;for(var c=0;s;){if(s.nodeType===8){var m=s.data;if(m==="/$"||m==="/&"){if(c===0)return oa(s.nextSibling);c--}else m!=="$"&&m!=="$!"&&m!=="$?"&&m!=="$~"&&m!=="&"||c++}s=s.nextSibling}return null}function lC(s){s=s.previousSibling;for(var c=0;s;){if(s.nodeType===8){var m=s.data;if(m==="$"||m==="$!"||m==="$?"||m==="$~"||m==="&"){if(c===0)return s;c--}else m!=="/$"&&m!=="/&"||c++}s=s.previousSibling}return null}function cC(s,c,m){switch(c=a0(m),s){case"html":if(s=c.documentElement,!s)throw Error(r(452));return s;case"head":if(s=c.head,!s)throw Error(r(453));return s;case"body":if(s=c.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function Dh(s){for(var c=s.attributes;c.length;)s.removeAttributeNode(c[0]);Uf(s)}var sa=new Map,uC=new Set;function o0(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var ms=J.d;J.d={f:oG,r:sG,D:lG,C:cG,L:uG,m:dG,X:hG,S:fG,M:mG};function oG(){var s=ms.f(),c=Xg();return s||c}function sG(s){var c=Ks(s);c!==null&&c.tag===5&&c.type==="form"?AO(c):ms.r(s)}var dd=typeof document>"u"?null:document;function dC(s,c,m){var x=dd;if(x&&typeof c=="string"&&c){var T=en(c);T='link[rel="'+s+'"][href="'+T+'"]',typeof m=="string"&&(T+='[crossorigin="'+m+'"]'),uC.has(T)||(uC.add(T),s={rel:s,crossOrigin:m,href:c},x.querySelector(T)===null&&(c=x.createElement("link"),wr(c,"link",s),Rn(c),x.head.appendChild(c)))}}function lG(s){ms.D(s),dC("dns-prefetch",s,null)}function cG(s,c){ms.C(s,c),dC("preconnect",s,c)}function uG(s,c,m){ms.L(s,c,m);var x=dd;if(x&&s&&c){var T='link[rel="preload"][as="'+en(c)+'"]';c==="image"&&m&&m.imageSrcSet?(T+='[imagesrcset="'+en(m.imageSrcSet)+'"]',typeof m.imageSizes=="string"&&(T+='[imagesizes="'+en(m.imageSizes)+'"]')):T+='[href="'+en(s)+'"]';var O=T;switch(c){case"style":O=fd(s);break;case"script":O=hd(s)}sa.has(O)||(s=p({rel:"preload",href:c==="image"&&m&&m.imageSrcSet?void 0:s,as:c},m),sa.set(O,s),x.querySelector(T)!==null||c==="style"&&x.querySelector(Ph(O))||c==="script"&&x.querySelector(Rh(O))||(c=x.createElement("link"),wr(c,"link",s),Rn(c),x.head.appendChild(c)))}}function dG(s,c){ms.m(s,c);var m=dd;if(m&&s){var x=c&&typeof c.as=="string"?c.as:"script",T='link[rel="modulepreload"][as="'+en(x)+'"][href="'+en(s)+'"]',O=T;switch(x){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":O=hd(s)}if(!sa.has(O)&&(s=p({rel:"modulepreload",href:s},c),sa.set(O,s),m.querySelector(T)===null)){switch(x){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(m.querySelector(Rh(O)))return}x=m.createElement("link"),wr(x,"link",s),Rn(x),m.head.appendChild(x)}}}function fG(s,c,m){ms.S(s,c,m);var x=dd;if(x&&s){var T=Ws(x).hoistableStyles,O=fd(s);c=c||"default";var I=T.get(O);if(!I){var q={loading:0,preload:null};if(I=x.querySelector(Ph(O)))q.loading=5;else{s=p({rel:"stylesheet",href:s,"data-precedence":c},m),(m=sa.get(O))&&w_(s,m);var ne=I=x.createElement("link");Rn(ne),wr(ne,"link",s),ne._p=new Promise(function(ge,ke){ne.onload=ge,ne.onerror=ke}),ne.addEventListener("load",function(){q.loading|=1}),ne.addEventListener("error",function(){q.loading|=2}),q.loading|=4,s0(I,c,x)}I={type:"stylesheet",instance:I,count:1,state:q},T.set(O,I)}}}function hG(s,c){ms.X(s,c);var m=dd;if(m&&s){var x=Ws(m).hoistableScripts,T=hd(s),O=x.get(T);O||(O=m.querySelector(Rh(T)),O||(s=p({src:s,async:!0},c),(c=sa.get(T))&&__(s,c),O=m.createElement("script"),Rn(O),wr(O,"link",s),m.head.appendChild(O)),O={type:"script",instance:O,count:1,state:null},x.set(T,O))}}function mG(s,c){ms.M(s,c);var m=dd;if(m&&s){var x=Ws(m).hoistableScripts,T=hd(s),O=x.get(T);O||(O=m.querySelector(Rh(T)),O||(s=p({src:s,async:!0,type:"module"},c),(c=sa.get(T))&&__(s,c),O=m.createElement("script"),Rn(O),wr(O,"link",s),m.head.appendChild(O)),O={type:"script",instance:O,count:1,state:null},x.set(T,O))}}function fC(s,c,m,x){var T=(T=me.current)?o0(T):null;if(!T)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof m.precedence=="string"&&typeof m.href=="string"?(c=fd(m.href),m=Ws(T).hoistableStyles,x=m.get(c),x||(x={type:"style",instance:null,count:0,state:null},m.set(c,x)),x):{type:"void",instance:null,count:0,state:null};case"link":if(m.rel==="stylesheet"&&typeof m.href=="string"&&typeof m.precedence=="string"){s=fd(m.href);var O=Ws(T).hoistableStyles,I=O.get(s);if(I||(T=T.ownerDocument||T,I={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},O.set(s,I),(O=T.querySelector(Ph(s)))&&!O._p&&(I.instance=O,I.state.loading=5),sa.has(s)||(m={rel:"preload",as:"style",href:m.href,crossOrigin:m.crossOrigin,integrity:m.integrity,media:m.media,hrefLang:m.hrefLang,referrerPolicy:m.referrerPolicy},sa.set(s,m),O||pG(T,s,m,I.state))),c&&x===null)throw Error(r(528,""));return I}if(c&&x!==null)throw Error(r(529,""));return null;case"script":return c=m.async,m=m.src,typeof m=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=hd(m),m=Ws(T).hoistableScripts,x=m.get(c),x||(x={type:"script",instance:null,count:0,state:null},m.set(c,x)),x):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function fd(s){return'href="'+en(s)+'"'}function Ph(s){return'link[rel="stylesheet"]['+s+"]"}function hC(s){return p({},s,{"data-precedence":s.precedence,precedence:null})}function pG(s,c,m,x){s.querySelector('link[rel="preload"][as="style"]['+c+"]")?x.loading=1:(c=s.createElement("link"),x.preload=c,c.addEventListener("load",function(){return x.loading|=1}),c.addEventListener("error",function(){return x.loading|=2}),wr(c,"link",m),Rn(c),s.head.appendChild(c))}function hd(s){return'[src="'+en(s)+'"]'}function Rh(s){return"script[async]"+s}function mC(s,c,m){if(c.count++,c.instance===null)switch(c.type){case"style":var x=s.querySelector('style[data-href~="'+en(m.href)+'"]');if(x)return c.instance=x,Rn(x),x;var T=p({},m,{"data-href":m.href,"data-precedence":m.precedence,href:null,precedence:null});return x=(s.ownerDocument||s).createElement("style"),Rn(x),wr(x,"style",T),s0(x,m.precedence,s),c.instance=x;case"stylesheet":T=fd(m.href);var O=s.querySelector(Ph(T));if(O)return c.state.loading|=4,c.instance=O,Rn(O),O;x=hC(m),(T=sa.get(T))&&w_(x,T),O=(s.ownerDocument||s).createElement("link"),Rn(O);var I=O;return I._p=new Promise(function(q,ne){I.onload=q,I.onerror=ne}),wr(O,"link",x),c.state.loading|=4,s0(O,m.precedence,s),c.instance=O;case"script":return O=hd(m.src),(T=s.querySelector(Rh(O)))?(c.instance=T,Rn(T),T):(x=m,(T=sa.get(O))&&(x=p({},m),__(x,T)),s=s.ownerDocument||s,T=s.createElement("script"),Rn(T),wr(T,"link",x),s.head.appendChild(T),c.instance=T);case"void":return null;default:throw Error(r(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(x=c.instance,c.state.loading|=4,s0(x,m.precedence,s));return c.instance}function s0(s,c,m){for(var x=m.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),T=x.length?x[x.length-1]:null,O=T,I=0;I<x.length;I++){var q=x[I];if(q.dataset.precedence===c)O=q;else if(O!==T)break}O?O.parentNode.insertBefore(s,O.nextSibling):(c=m.nodeType===9?m.head:m,c.insertBefore(s,c.firstChild))}function w_(s,c){s.crossOrigin==null&&(s.crossOrigin=c.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=c.referrerPolicy),s.title==null&&(s.title=c.title)}function __(s,c){s.crossOrigin==null&&(s.crossOrigin=c.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=c.referrerPolicy),s.integrity==null&&(s.integrity=c.integrity)}var l0=null;function pC(s,c,m){if(l0===null){var x=new Map,T=l0=new Map;T.set(m,x)}else T=l0,x=T.get(m),x||(x=new Map,T.set(m,x));if(x.has(s))return x;for(x.set(s,null),m=m.getElementsByTagName(s),T=0;T<m.length;T++){var O=m[T];if(!(O[nc]||O[Pn]||s==="link"&&O.getAttribute("rel")==="stylesheet")&&O.namespaceURI!=="http://www.w3.org/2000/svg"){var I=O.getAttribute(c)||"";I=s+I;var q=x.get(I);q?q.push(O):x.set(I,[O])}}return x}function gC(s,c,m){s=s.ownerDocument||s,s.head.insertBefore(m,c==="title"?s.querySelector("head > title"):null)}function gG(s,c,m){if(m===1||c.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;switch(c.rel){case"stylesheet":return s=c.disabled,typeof c.precedence=="string"&&s==null;default:return!0}case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function bC(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function bG(s,c,m,x){if(m.type==="stylesheet"&&(typeof x.media!="string"||matchMedia(x.media).matches!==!1)&&(m.state.loading&4)===0){if(m.instance===null){var T=fd(x.href),O=c.querySelector(Ph(T));if(O){c=O._p,c!==null&&typeof c=="object"&&typeof c.then=="function"&&(s.count++,s=c0.bind(s),c.then(s,s)),m.state.loading|=4,m.instance=O,Rn(O);return}O=c.ownerDocument||c,x=hC(x),(T=sa.get(T))&&w_(x,T),O=O.createElement("link"),Rn(O);var I=O;I._p=new Promise(function(q,ne){I.onload=q,I.onerror=ne}),wr(O,"link",x),m.instance=O}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(m,c),(c=m.state.preload)&&(m.state.loading&3)===0&&(s.count++,m=c0.bind(s),c.addEventListener("load",m),c.addEventListener("error",m))}}var S_=0;function yG(s,c){return s.stylesheets&&s.count===0&&d0(s,s.stylesheets),0<s.count||0<s.imgCount?function(m){var x=setTimeout(function(){if(s.stylesheets&&d0(s,s.stylesheets),s.unsuspend){var O=s.unsuspend;s.unsuspend=null,O()}},6e4+c);0<s.imgBytes&&S_===0&&(S_=62500*JH());var T=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&d0(s,s.stylesheets),s.unsuspend)){var O=s.unsuspend;s.unsuspend=null,O()}},(s.imgBytes>S_?50:800)+c);return s.unsuspend=m,function(){s.unsuspend=null,clearTimeout(x),clearTimeout(T)}}:null}function c0(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)d0(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var u0=null;function d0(s,c){s.stylesheets=null,s.unsuspend!==null&&(s.count++,u0=new Map,c.forEach(vG,s),u0=null,c0.call(s))}function vG(s,c){if(!(c.state.loading&4)){var m=u0.get(s);if(m)var x=m.get(null);else{m=new Map,u0.set(s,m);for(var T=s.querySelectorAll("link[data-precedence],style[data-precedence]"),O=0;O<T.length;O++){var I=T[O];(I.nodeName==="LINK"||I.getAttribute("media")!=="not all")&&(m.set(I.dataset.precedence,I),x=I)}x&&m.set(null,x)}T=c.instance,I=T.getAttribute("data-precedence"),O=m.get(I)||x,O===x&&m.set(null,T),m.set(I,T),this.count++,x=c0.bind(this),T.addEventListener("load",x),T.addEventListener("error",x),O?O.parentNode.insertBefore(T,O.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(T,s.firstChild)),c.state.loading|=4}}var Lh={$$typeof:j,Provider:null,Consumer:null,_currentValue:te,_currentValue2:te,_threadCount:0};function xG(s,c,m,x,T,O,I,q,ne){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=$f(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$f(0),this.hiddenUpdates=$f(null),this.identifierPrefix=x,this.onUncaughtError=T,this.onCaughtError=O,this.onRecoverableError=I,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ne,this.incompleteTransitions=new Map}function yC(s,c,m,x,T,O,I,q,ne,ge,ke,je){return s=new xG(s,c,m,I,ne,ge,ke,je,q),c=1,O===!0&&(c|=24),O=Mr(3,null,null,c),s.current=O,O.stateNode=s,c=nw(),c.refCount++,s.pooledCache=c,c.refCount++,O.memoizedState={element:x,isDehydrated:m,cache:c},ow(O),s}function vC(s){return s?(s=es,s):es}function xC(s,c,m,x,T,O){T=vC(T),x.context===null?x.context=T:x.pendingContext=T,x=hl(c),x.payload={element:m},O=O===void 0?null:O,O!==null&&(x.callback=O),m=ml(s,x,c),m!==null&&(fi(m,s,c),mh(m,s,c))}function wC(s,c){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var m=s.retryLane;s.retryLane=m!==0&&m<c?m:c}}function k_(s,c){wC(s,c),(s=s.alternate)&&wC(s,c)}function _C(s){if(s.tag===13||s.tag===31){var c=ra(s,67108864);c!==null&&fi(c,s,67108864),k_(s,67108864)}}function SC(s){if(s.tag===13||s.tag===31){var c=Di();c=ti(c);var m=ra(s,c);m!==null&&fi(m,s,c),k_(s,c)}}var f0=!0;function wG(s,c,m,x){var T=G.T;G.T=null;var O=J.p;try{J.p=2,E_(s,c,m,x)}finally{J.p=O,G.T=T}}function _G(s,c,m,x){var T=G.T;G.T=null;var O=J.p;try{J.p=8,E_(s,c,m,x)}finally{J.p=O,G.T=T}}function E_(s,c,m,x){if(f0){var T=T_(x);if(T===null)d_(s,c,x,h0,m),EC(s,x);else if(kG(T,s,c,m,x))x.stopPropagation();else if(EC(s,x),c&4&&-1<SG.indexOf(s)){for(;T!==null;){var O=Ks(T);if(O!==null)switch(O.tag){case 3:if(O=O.stateNode,O.current.memoizedState.isDehydrated){var I=ei(O.pendingLanes);if(I!==0){var q=O;for(q.pendingLanes|=2,q.entangledLanes|=2;I;){var ne=1<<31-Yn(I);q.entanglements[1]|=ne,I&=~ne}_o(O),(Ct&6)===0&&(Vg=ze()+500,Nh(0))}}break;case 31:case 13:q=ra(O,2),q!==null&&fi(q,O,2),Xg(),k_(O,2)}if(O=T_(x),O===null&&d_(s,c,x,h0,m),O===T)break;T=O}T!==null&&x.stopPropagation()}else d_(s,c,x,null,m)}}function T_(s){return s=sc(s),A_(s)}var h0=null;function A_(s){if(h0=null,s=Wo(s),s!==null){var c=a(s);if(c===null)s=null;else{var m=c.tag;if(m===13){if(s=o(c),s!==null)return s;s=null}else if(m===31){if(s=l(c),s!==null)return s;s=null}else if(m===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;s=null}else c!==s&&(s=null)}}return h0=s,null}function kC(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(it()){case Et:return 2;case pt:return 8;case Qt:case $r:return 32;case Br:return 268435456;default:return 32}default:return 32}}var j_=!1,El=null,Tl=null,Al=null,Ih=new Map,$h=new Map,jl=[],SG="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function EC(s,c){switch(s){case"focusin":case"focusout":El=null;break;case"dragenter":case"dragleave":Tl=null;break;case"mouseover":case"mouseout":Al=null;break;case"pointerover":case"pointerout":Ih.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":$h.delete(c.pointerId)}}function Bh(s,c,m,x,T,O){return s===null||s.nativeEvent!==O?(s={blockedOn:c,domEventName:m,eventSystemFlags:x,nativeEvent:O,targetContainers:[T]},c!==null&&(c=Ks(c),c!==null&&_C(c)),s):(s.eventSystemFlags|=x,c=s.targetContainers,T!==null&&c.indexOf(T)===-1&&c.push(T),s)}function kG(s,c,m,x,T){switch(c){case"focusin":return El=Bh(El,s,c,m,x,T),!0;case"dragenter":return Tl=Bh(Tl,s,c,m,x,T),!0;case"mouseover":return Al=Bh(Al,s,c,m,x,T),!0;case"pointerover":var O=T.pointerId;return Ih.set(O,Bh(Ih.get(O)||null,s,c,m,x,T)),!0;case"gotpointercapture":return O=T.pointerId,$h.set(O,Bh($h.get(O)||null,s,c,m,x,T)),!0}return!1}function TC(s){var c=Wo(s.target);if(c!==null){var m=a(c);if(m!==null){if(c=m.tag,c===13){if(c=o(m),c!==null){s.blockedOn=c,zf(s.priority,function(){SC(m)});return}}else if(c===31){if(c=l(m),c!==null){s.blockedOn=c,zf(s.priority,function(){SC(m)});return}}else if(c===3&&m.stateNode.current.memoizedState.isDehydrated){s.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}s.blockedOn=null}function m0(s){if(s.blockedOn!==null)return!1;for(var c=s.targetContainers;0<c.length;){var m=T_(s.nativeEvent);if(m===null){m=s.nativeEvent;var x=new m.constructor(m.type,m);Mu=x,m.target.dispatchEvent(x),Mu=null}else return c=Ks(m),c!==null&&_C(c),s.blockedOn=m,!1;c.shift()}return!0}function AC(s,c,m){m0(s)&&m.delete(c)}function EG(){j_=!1,El!==null&&m0(El)&&(El=null),Tl!==null&&m0(Tl)&&(Tl=null),Al!==null&&m0(Al)&&(Al=null),Ih.forEach(AC),$h.forEach(AC)}function p0(s,c){s.blockedOn===c&&(s.blockedOn=null,j_||(j_=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,EG)))}var g0=null;function jC(s){g0!==s&&(g0=s,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){g0===s&&(g0=null);for(var c=0;c<s.length;c+=3){var m=s[c],x=s[c+1],T=s[c+2];if(typeof x!="function"){if(A_(x||m)===null)continue;break}var O=Ks(m);O!==null&&(s.splice(c,3),c-=3,Tw(O,{pending:!0,data:T,method:m.method,action:x},x,T))}}))}function md(s){function c(ne){return p0(ne,s)}El!==null&&p0(El,s),Tl!==null&&p0(Tl,s),Al!==null&&p0(Al,s),Ih.forEach(c),$h.forEach(c);for(var m=0;m<jl.length;m++){var x=jl[m];x.blockedOn===s&&(x.blockedOn=null)}for(;0<jl.length&&(m=jl[0],m.blockedOn===null);)TC(m),m.blockedOn===null&&jl.shift();if(m=(s.ownerDocument||s).$$reactFormReplay,m!=null)for(x=0;x<m.length;x+=3){var T=m[x],O=m[x+1],I=T[ir]||null;if(typeof O=="function")I||jC(m);else if(I){var q=null;if(O&&O.hasAttribute("formAction")){if(T=O,I=O[ir]||null)q=I.formAction;else if(A_(T)!==null)continue}else q=I.action;typeof q=="function"?m[x+1]=q:(m.splice(x,3),x-=3),jC(m)}}}function OC(){function s(O){O.canIntercept&&O.info==="react-transition"&&O.intercept({handler:function(){return new Promise(function(I){return T=I})},focusReset:"manual",scroll:"manual"})}function c(){T!==null&&(T(),T=null),x||setTimeout(m,20)}function m(){if(!x&&!navigation.transition){var O=navigation.currentEntry;O&&O.url!=null&&navigation.navigate(O.url,{state:O.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var x=!1,T=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",c),navigation.addEventListener("navigateerror",c),setTimeout(m,100),function(){x=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",c),navigation.removeEventListener("navigateerror",c),T!==null&&(T(),T=null)}}}function O_(s){this._internalRoot=s}b0.prototype.render=O_.prototype.render=function(s){var c=this._internalRoot;if(c===null)throw Error(r(409));var m=c.current,x=Di();xC(m,x,s,c,null,null)},b0.prototype.unmount=O_.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var c=s.containerInfo;xC(s.current,2,null,s,null,null),Xg(),c[Ko]=null}};function b0(s){this._internalRoot=s}b0.prototype.unstable_scheduleHydration=function(s){if(s){var c=Bf();s={blockedOn:null,target:s,priority:c};for(var m=0;m<jl.length&&c!==0&&c<jl[m].priority;m++);jl.splice(m,0,s),m===0&&TC(s)}};var NC=t.version;if(NC!=="19.2.1")throw Error(r(527,NC,"19.2.1"));J.findDOMNode=function(s){var c=s._reactInternals;if(c===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=d(c),s=s!==null?h(s):null,s=s===null?null:s.stateNode,s};var TG={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var y0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!y0.isDisabled&&y0.supportsFiber)try{It=y0.inject(TG),an=y0}catch{}}return Uh.createRoot=function(s,c){if(!i(s))throw Error(r(299));var m=!1,x="",T=IO,O=$O,I=BO;return c!=null&&(c.unstable_strictMode===!0&&(m=!0),c.identifierPrefix!==void 0&&(x=c.identifierPrefix),c.onUncaughtError!==void 0&&(T=c.onUncaughtError),c.onCaughtError!==void 0&&(O=c.onCaughtError),c.onRecoverableError!==void 0&&(I=c.onRecoverableError)),c=yC(s,1,!1,null,null,m,x,null,T,O,I,OC),s[Ko]=c.current,u_(s),new O_(c)},Uh.hydrateRoot=function(s,c,m){if(!i(s))throw Error(r(299));var x=!1,T="",O=IO,I=$O,q=BO,ne=null;return m!=null&&(m.unstable_strictMode===!0&&(x=!0),m.identifierPrefix!==void 0&&(T=m.identifierPrefix),m.onUncaughtError!==void 0&&(O=m.onUncaughtError),m.onCaughtError!==void 0&&(I=m.onCaughtError),m.onRecoverableError!==void 0&&(q=m.onRecoverableError),m.formState!==void 0&&(ne=m.formState)),c=yC(s,1,!0,c,m??null,x,T,ne,O,I,q,OC),c.context=vC(null),m=c.current,x=Di(),x=ti(x),T=hl(x),T.callback=null,ml(m,T,x),m=x,c.current.lanes=m,Yo(c,m),_o(c),s[Ko]=c.current,u_(s),new b0(c)},Uh.version="19.2.1",Uh}var zC;function RG(){if(zC)return C_.exports;zC=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),C_.exports=PG(),C_.exports}var LG=RG(),w=ff();const Xt=wi(w),IG=TE({__proto__:null,default:Xt},[w]);/**
 * react-router v7.10.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var UC="popstate";function $G(e={}){function t(r,i){let{pathname:a,search:o,hash:l}=r.location;return vk("",{pathname:a,search:o,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Mm(i)}return zG(t,n,null,e)}function hn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function wa(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function BG(){return Math.random().toString(36).substring(2,10)}function FC(e,t){return{usr:e.state,key:e.key,idx:t}}function vk(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?hf(t):t,state:n,key:t&&t.key||r||BG()}}function Mm({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function hf(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function zG(e,t,n,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,o=i.history,l="POP",u=null,d=h();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function h(){return(o.state||{idx:null}).idx}function p(){l="POP";let k=h(),A=k==null?null:k-d;d=k,u&&u({action:l,location:_.location,delta:A})}function b(k,A){l="PUSH";let N=vk(_.location,k,A);d=h()+1;let j=FC(N,d),C=_.createHref(N);try{o.pushState(j,"",C)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;i.location.assign(C)}a&&u&&u({action:l,location:_.location,delta:1})}function y(k,A){l="REPLACE";let N=vk(_.location,k,A);d=h();let j=FC(N,d),C=_.createHref(N);o.replaceState(j,"",C),a&&u&&u({action:l,location:_.location,delta:0})}function S(k){return UG(k)}let _={get action(){return l},get location(){return e(i,o)},listen(k){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(UC,p),u=k,()=>{i.removeEventListener(UC,p),u=null}},createHref(k){return t(i,k)},createURL:S,encodeLocation(k){let A=S(k);return{pathname:A.pathname,search:A.search,hash:A.hash}},push:b,replace:y,go(k){return o.go(k)}};return _}function UG(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),hn(n,"No window.location.(origin|href) available to create URL");let r=typeof e=="string"?e:Mm(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function B$(e,t,n="/"){return FG(e,t,n,!1)}function FG(e,t,n,r){let i=typeof t=="string"?hf(t):t,a=Os(i.pathname||"/",n);if(a==null)return null;let o=z$(e);HG(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let d=eq(a);l=JG(o[u],d,r)}return l}function z$(e,t=[],n=[],r="",i=!1){let a=(o,l,u=i,d)=>{let h={relativePath:d===void 0?o.path||"":d,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(r)&&u)return;hn(h.relativePath.startsWith(r),`Absolute route path "${h.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(r.length)}let p=Ts([r,h.relativePath]),b=n.concat(h);o.children&&o.children.length>0&&(hn(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),z$(o.children,t,b,p,u)),!(o.path==null&&!o.index)&&t.push({path:p,score:ZG(p,o.index),routesMeta:b})};return e.forEach((o,l)=>{if(o.path===""||!o.path?.includes("?"))a(o,l);else for(let u of U$(o.path))a(o,l,!0,u)}),t}function U$(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let o=U$(r.join("/")),l=[];return l.push(...o.map(u=>u===""?a:[a,u].join("/"))),i&&l.push(...o),l.map(u=>e.startsWith("/")&&u===""?"/":u)}function HG(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:XG(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var GG=/^:[\w-]+$/,qG=3,YG=2,KG=1,WG=10,VG=-2,HC=e=>e==="*";function ZG(e,t){let n=e.split("/"),r=n.length;return n.some(HC)&&(r+=VG),t&&(r+=YG),n.filter(i=>!HC(i)).reduce((i,a)=>i+(GG.test(a)?qG:a===""?KG:WG),r)}function XG(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function JG(e,t,n=!1){let{routesMeta:r}=e,i={},a="/",o=[];for(let l=0;l<r.length;++l){let u=r[l],d=l===r.length-1,h=a==="/"?t:t.slice(a.length)||"/",p=Gb({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},h),b=u.route;if(!p&&d&&n&&!r[r.length-1].route.index&&(p=Gb({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},h)),!p)return null;Object.assign(i,p.params),o.push({params:i,pathname:Ts([a,p.pathname]),pathnameBase:aq(Ts([a,p.pathnameBase])),route:b}),p.pathnameBase!=="/"&&(a=Ts([a,p.pathnameBase]))}return o}function Gb(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=QG(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((d,{paramName:h,isOptional:p},b)=>{if(h==="*"){let S=l[b]||"";o=a.slice(0,a.length-S.length).replace(/(.)\/+$/,"$1")}const y=l[b];return p&&!y?d[h]=void 0:d[h]=(y||"").replace(/%2F/g,"/"),d},{}),pathname:a,pathnameBase:o,pattern:e}}function QG(e,t=!1,n=!0){wa(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(r.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function eq(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return wa(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Os(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}var tq=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,nq=e=>tq.test(e);function rq(e,t="/"){let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?hf(e):e,a;if(n)if(nq(n))a=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),wa(!1,`Pathnames cannot have embedded double slashes - normalizing ${o} -> ${n}`)}n.startsWith("/")?a=GC(n.substring(1),"/"):a=GC(n,t)}else a=t;return{pathname:a,search:oq(r),hash:sq(i)}}function GC(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function L_(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function iq(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function AE(e){let t=iq(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function jE(e,t,n,r=!1){let i;typeof e=="string"?i=hf(e):(i={...e},hn(!i.pathname||!i.pathname.includes("?"),L_("?","pathname","search",i)),hn(!i.pathname||!i.pathname.includes("#"),L_("#","pathname","hash",i)),hn(!i.search||!i.search.includes("#"),L_("#","search","hash",i)));let a=e===""||i.pathname==="",o=a?"/":i.pathname,l;if(o==null)l=n;else{let p=t.length-1;if(!r&&o.startsWith("..")){let b=o.split("/");for(;b[0]==="..";)b.shift(),p-=1;i.pathname=b.join("/")}l=p>=0?t[p]:"/"}let u=rq(i,l),d=o&&o!=="/"&&o.endsWith("/"),h=(a||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||h)&&(u.pathname+="/"),u}var Ts=e=>e.join("/").replace(/\/\/+/g,"/"),aq=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),oq=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,sq=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function lq(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function cq(e){return e.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var F$=["POST","PUT","PATCH","DELETE"];new Set(F$);var uq=["GET",...F$];new Set(uq);var mf=w.createContext(null);mf.displayName="DataRouter";var xv=w.createContext(null);xv.displayName="DataRouterState";w.createContext(!1);var H$=w.createContext({isTransitioning:!1});H$.displayName="ViewTransition";var dq=w.createContext(new Map);dq.displayName="Fetchers";var fq=w.createContext(null);fq.displayName="Await";var Aa=w.createContext(null);Aa.displayName="Navigation";var fp=w.createContext(null);fp.displayName="Location";var Uo=w.createContext({outlet:null,matches:[],isDataRoute:!1});Uo.displayName="Route";var OE=w.createContext(null);OE.displayName="RouteError";function hq(e,{relative:t}={}){hn(pf(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=w.useContext(Aa),{hash:i,pathname:a,search:o}=hp(e,{relative:t}),l=a;return n!=="/"&&(l=a==="/"?n:Ts([n,a])),r.createHref({pathname:l,search:o,hash:i})}function pf(){return w.useContext(fp)!=null}function _i(){return hn(pf(),"useLocation() may be used only in the context of a <Router> component."),w.useContext(fp).location}var G$="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function q$(e){w.useContext(Aa).static||w.useLayoutEffect(e)}function gf(){let{isDataRoute:e}=w.useContext(Uo);return e?Tq():mq()}function mq(){hn(pf(),"useNavigate() may be used only in the context of a <Router> component.");let e=w.useContext(mf),{basename:t,navigator:n}=w.useContext(Aa),{matches:r}=w.useContext(Uo),{pathname:i}=_i(),a=JSON.stringify(AE(r)),o=w.useRef(!1);return q$(()=>{o.current=!0}),w.useCallback((u,d={})=>{if(wa(o.current,G$),!o.current)return;if(typeof u=="number"){n.go(u);return}let h=jE(u,JSON.parse(a),i,d.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:Ts([t,h.pathname])),(d.replace?n.replace:n.push)(h,d.state,d)},[t,n,a,i,e])}w.createContext(null);function hp(e,{relative:t}={}){let{matches:n}=w.useContext(Uo),{pathname:r}=_i(),i=JSON.stringify(AE(n));return w.useMemo(()=>jE(e,JSON.parse(i),r,t==="path"),[e,i,r,t])}function pq(e,t){return Y$(e,t)}function Y$(e,t,n,r,i){hn(pf(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=w.useContext(Aa),{matches:o}=w.useContext(Uo),l=o[o.length-1],u=l?l.params:{},d=l?l.pathname:"/",h=l?l.pathnameBase:"/",p=l&&l.route;{let N=p&&p.path||"";K$(d,!p||N.endsWith("*")||N.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${N}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${N}"> to <Route path="${N==="/"?"*":`${N}/*`}">.`)}let b=_i(),y;if(t){let N=typeof t=="string"?hf(t):t;hn(h==="/"||N.pathname?.startsWith(h),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${N.pathname}" was given in the \`location\` prop.`),y=N}else y=b;let S=y.pathname||"/",_=S;if(h!=="/"){let N=h.replace(/^\//,"").split("/");_="/"+S.replace(/^\//,"").split("/").slice(N.length).join("/")}let k=B$(e,{pathname:_});wa(p||k!=null,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),wa(k==null||k[k.length-1].route.element!==void 0||k[k.length-1].route.Component!==void 0||k[k.length-1].route.lazy!==void 0,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let A=xq(k&&k.map(N=>Object.assign({},N,{params:Object.assign({},u,N.params),pathname:Ts([h,a.encodeLocation?a.encodeLocation(N.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?h:Ts([h,a.encodeLocation?a.encodeLocation(N.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:N.pathnameBase])})),o,n,r,i);return t&&A?w.createElement(fp.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...y},navigationType:"POP"}},A):A}function gq(){let e=Eq(),t=lq(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=w.createElement(w.Fragment,null,w.createElement("p",null," Hey developer "),w.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",w.createElement("code",{style:a},"ErrorBoundary")," or"," ",w.createElement("code",{style:a},"errorElement")," prop on your route.")),w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},t),n?w.createElement("pre",{style:i},n):null,o)}var bq=w.createElement(gq,null),yq=class extends w.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?w.createElement(Uo.Provider,{value:this.props.routeContext},w.createElement(OE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function vq({routeContext:e,match:t,children:n}){let r=w.useContext(mf);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),w.createElement(Uo.Provider,{value:e},n)}function xq(e,t=[],n=null,r=null,i=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,o=n?.errors;if(o!=null){let h=a.findIndex(p=>p.route.id&&o?.[p.route.id]!==void 0);hn(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),a=a.slice(0,Math.min(a.length,h+1))}let l=!1,u=-1;if(n)for(let h=0;h<a.length;h++){let p=a[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(u=h),p.route.id){let{loaderData:b,errors:y}=n,S=p.route.loader&&!b.hasOwnProperty(p.route.id)&&(!y||y[p.route.id]===void 0);if(p.route.lazy||S){l=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}let d=n&&r?(h,p)=>{r(h,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:cq(n.matches),errorInfo:p})}:void 0;return a.reduceRight((h,p,b)=>{let y,S=!1,_=null,k=null;n&&(y=o&&p.route.id?o[p.route.id]:void 0,_=p.route.errorElement||bq,l&&(u<0&&b===0?(K$("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),S=!0,k=null):u===b&&(S=!0,k=p.route.hydrateFallbackElement||null)));let A=t.concat(a.slice(0,b+1)),N=()=>{let j;return y?j=_:S?j=k:p.route.Component?j=w.createElement(p.route.Component,null):p.route.element?j=p.route.element:j=h,w.createElement(vq,{match:p,routeContext:{outlet:h,matches:A,isDataRoute:n!=null},children:j})};return n&&(p.route.ErrorBoundary||p.route.errorElement||b===0)?w.createElement(yq,{location:n.location,revalidation:n.revalidation,component:_,error:y,children:N(),routeContext:{outlet:null,matches:A,isDataRoute:!0},onError:d}):N()},null)}function NE(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function wq(e){let t=w.useContext(mf);return hn(t,NE(e)),t}function _q(e){let t=w.useContext(xv);return hn(t,NE(e)),t}function Sq(e){let t=w.useContext(Uo);return hn(t,NE(e)),t}function CE(e){let t=Sq(e),n=t.matches[t.matches.length-1];return hn(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function kq(){return CE("useRouteId")}function Eq(){let e=w.useContext(OE),t=_q("useRouteError"),n=CE("useRouteError");return e!==void 0?e:t.errors?.[n]}function Tq(){let{router:e}=wq("useNavigate"),t=CE("useNavigate"),n=w.useRef(!1);return q$(()=>{n.current=!0}),w.useCallback(async(i,a={})=>{wa(n.current,G$),n.current&&(typeof i=="number"?await e.navigate(i):await e.navigate(i,{fromRouteId:t,...a}))},[e,t])}var qC={};function K$(e,t,n){!t&&!qC[e]&&(qC[e]=!0,wa(!1,n))}w.memo(Aq);function Aq({routes:e,future:t,state:n,unstable_onError:r}){return Y$(e,void 0,n,r,t)}function jq({to:e,replace:t,state:n,relative:r}){hn(pf(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=w.useContext(Aa);wa(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=w.useContext(Uo),{pathname:o}=_i(),l=gf(),u=jE(e,AE(a),o,r==="path"),d=JSON.stringify(u);return w.useEffect(()=>{l(JSON.parse(d),{replace:t,state:n,relative:r})},[l,d,r,t,n]),null}function Ua(e){hn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Oq({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:i,static:a=!1,unstable_useTransitions:o}){hn(!pf(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=e.replace(/^\/*/,"/"),u=w.useMemo(()=>({basename:l,navigator:i,static:a,unstable_useTransitions:o,future:{}}),[l,i,a,o]);typeof n=="string"&&(n=hf(n));let{pathname:d="/",search:h="",hash:p="",state:b=null,key:y="default"}=n,S=w.useMemo(()=>{let _=Os(d,l);return _==null?null:{location:{pathname:_,search:h,hash:p,state:b,key:y},navigationType:r}},[l,d,h,p,b,y,r]);return wa(S!=null,`<Router basename="${l}"> is not able to match the URL "${d}${h}${p}" because it does not start with the basename, so the <Router> won't render anything.`),S==null?null:w.createElement(Aa.Provider,{value:u},w.createElement(fp.Provider,{children:t,value:S}))}function Nq({children:e,location:t}){return pq(xk(e),t)}function xk(e,t=[]){let n=[];return w.Children.forEach(e,(r,i)=>{if(!w.isValidElement(r))return;let a=[...t,i];if(r.type===w.Fragment){n.push.apply(n,xk(r.props.children,a));return}hn(r.type===Ua,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),hn(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=xk(r.props.children,a)),n.push(o)}),n}var Tb="get",Ab="application/x-www-form-urlencoded";function wv(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function Cq(e){return wv(e)&&e.tagName.toLowerCase()==="button"}function Mq(e){return wv(e)&&e.tagName.toLowerCase()==="form"}function Dq(e){return wv(e)&&e.tagName.toLowerCase()==="input"}function Pq(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Rq(e,t){return e.button===0&&(!t||t==="_self")&&!Pq(e)}var v0=null;function Lq(){if(v0===null)try{new FormData(document.createElement("form"),0),v0=!1}catch{v0=!0}return v0}var Iq=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function I_(e){return e!=null&&!Iq.has(e)?(wa(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ab}"`),null):e}function $q(e,t){let n,r,i,a,o;if(Mq(e)){let l=e.getAttribute("action");r=l?Os(l,t):null,n=e.getAttribute("method")||Tb,i=I_(e.getAttribute("enctype"))||Ab,a=new FormData(e)}else if(Cq(e)||Dq(e)&&(e.type==="submit"||e.type==="image")){let l=e.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=e.getAttribute("formaction")||l.getAttribute("action");if(r=u?Os(u,t):null,n=e.getAttribute("formmethod")||l.getAttribute("method")||Tb,i=I_(e.getAttribute("formenctype"))||I_(l.getAttribute("enctype"))||Ab,a=new FormData(l,e),!Lq()){let{name:d,type:h,value:p}=e;if(h==="image"){let b=d?`${d}.`:"";a.append(`${b}x`,"0"),a.append(`${b}y`,"0")}else d&&a.append(d,p)}}else{if(wv(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Tb,r=null,i=Ab,o=e}return a&&i==="text/plain"&&(o=a,a=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:a,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function ME(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Bq(e,t,n){let r=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return r.pathname==="/"?r.pathname=`_root.${n}`:t&&Os(r.pathname,t)==="/"?r.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function zq(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Uq(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function Fq(e,t,n){let r=await Promise.all(e.map(async i=>{let a=t.routes[i.route.id];if(a){let o=await zq(a,n);return o.links?o.links():[]}return[]}));return Yq(r.flat(1).filter(Uq).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function YC(e,t,n,r,i,a){let o=(u,d)=>n[d]?u.route.id!==n[d].route.id:!0,l=(u,d)=>n[d].pathname!==u.pathname||n[d].route.path?.endsWith("*")&&n[d].params["*"]!==u.params["*"];return a==="assets"?t.filter((u,d)=>o(u,d)||l(u,d)):a==="data"?t.filter((u,d)=>{let h=r.routes[u.route.id];if(!h||!h.hasLoader)return!1;if(o(u,d)||l(u,d))return!0;if(u.route.shouldRevalidate){let p=u.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function Hq(e,t,{includeHydrateFallback:n}={}){return Gq(e.map(r=>{let i=t.routes[r.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function Gq(e){return[...new Set(e)]}function qq(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function Yq(e,t){let n=new Set;return new Set(t),e.reduce((r,i)=>{let a=JSON.stringify(qq(i));return n.has(a)||(n.add(a),r.push({key:a,link:i})),r},[])}function W$(){let e=w.useContext(mf);return ME(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function Kq(){let e=w.useContext(xv);return ME(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var DE=w.createContext(void 0);DE.displayName="FrameworkContext";function V$(){let e=w.useContext(DE);return ME(e,"You must render this element inside a <HydratedRouter> element"),e}function Wq(e,t){let n=w.useContext(DE),[r,i]=w.useState(!1),[a,o]=w.useState(!1),{onFocus:l,onBlur:u,onMouseEnter:d,onMouseLeave:h,onTouchStart:p}=t,b=w.useRef(null);w.useEffect(()=>{if(e==="render"&&o(!0),e==="viewport"){let _=A=>{A.forEach(N=>{o(N.isIntersecting)})},k=new IntersectionObserver(_,{threshold:.5});return b.current&&k.observe(b.current),()=>{k.disconnect()}}},[e]),w.useEffect(()=>{if(r){let _=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(_)}}},[r]);let y=()=>{i(!0)},S=()=>{i(!1),o(!1)};return n?e!=="intent"?[a,b,{}]:[a,b,{onFocus:Fh(l,y),onBlur:Fh(u,S),onMouseEnter:Fh(d,y),onMouseLeave:Fh(h,S),onTouchStart:Fh(p,y)}]:[!1,b,{}]}function Fh(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function Vq({page:e,...t}){let{router:n}=W$(),r=w.useMemo(()=>B$(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?w.createElement(Xq,{page:e,matches:r,...t}):null}function Zq(e){let{manifest:t,routeModules:n}=V$(),[r,i]=w.useState([]);return w.useEffect(()=>{let a=!1;return Fq(e,t,n).then(o=>{a||i(o)}),()=>{a=!0}},[e,t,n]),r}function Xq({page:e,matches:t,...n}){let r=_i(),{manifest:i,routeModules:a}=V$(),{basename:o}=W$(),{loaderData:l,matches:u}=Kq(),d=w.useMemo(()=>YC(e,t,u,i,r,"data"),[e,t,u,i,r]),h=w.useMemo(()=>YC(e,t,u,i,r,"assets"),[e,t,u,i,r]),p=w.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let S=new Set,_=!1;if(t.forEach(A=>{let N=i.routes[A.route.id];!N||!N.hasLoader||(!d.some(j=>j.route.id===A.route.id)&&A.route.id in l&&a[A.route.id]?.shouldRevalidate||N.hasClientLoader?_=!0:S.add(A.route.id))}),S.size===0)return[];let k=Bq(e,o,"data");return _&&S.size>0&&k.searchParams.set("_routes",t.filter(A=>S.has(A.route.id)).map(A=>A.route.id).join(",")),[k.pathname+k.search]},[o,l,r,i,d,t,e,a]),b=w.useMemo(()=>Hq(h,i),[h,i]),y=Zq(h);return w.createElement(w.Fragment,null,p.map(S=>w.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...n})),b.map(S=>w.createElement("link",{key:S,rel:"modulepreload",href:S,...n})),y.map(({key:S,link:_})=>w.createElement("link",{key:S,nonce:n.nonce,..._})))}function Jq(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var Z$=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Z$&&(window.__reactRouterVersion="7.10.1")}catch{}function Qq({basename:e,children:t,unstable_useTransitions:n,window:r}){let i=w.useRef();i.current==null&&(i.current=$G({window:r,v5Compat:!0}));let a=i.current,[o,l]=w.useState({action:a.action,location:a.location}),u=w.useCallback(d=>{n===!1?l(d):w.startTransition(()=>l(d))},[n]);return w.useLayoutEffect(()=>a.listen(u),[a,u]),w.createElement(Oq,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:a,unstable_useTransitions:n===!0})}var X$=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,PE=w.forwardRef(function({onClick:t,discover:n="render",prefetch:r="none",relative:i,reloadDocument:a,replace:o,state:l,target:u,to:d,preventScrollReset:h,viewTransition:p,...b},y){let{basename:S,unstable_useTransitions:_}=w.useContext(Aa),k=typeof d=="string"&&X$.test(d),A,N=!1;if(typeof d=="string"&&k&&(A=d,Z$))try{let K=new URL(window.location.href),F=d.startsWith("//")?new URL(K.protocol+d):new URL(d),z=Os(F.pathname,S);F.origin===K.origin&&z!=null?d=z+F.search+F.hash:N=!0}catch{wa(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let j=hq(d,{relative:i}),[C,D,P]=Wq(r,b),$=rY(d,{replace:o,state:l,target:u,preventScrollReset:h,relative:i,viewTransition:p,unstable_useTransitions:_});function U(K){t&&t(K),K.defaultPrevented||$(K)}let Y=w.createElement("a",{...b,...P,href:A||j,onClick:N||a?t:U,ref:Jq(y,D),target:u,"data-discover":!k&&n==="render"?"true":void 0});return C&&!k?w.createElement(w.Fragment,null,Y,w.createElement(Vq,{page:j})):Y});PE.displayName="Link";var eY=w.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:r="",end:i=!1,style:a,to:o,viewTransition:l,children:u,...d},h){let p=hp(o,{relative:d.relative}),b=_i(),y=w.useContext(xv),{navigator:S,basename:_}=w.useContext(Aa),k=y!=null&&lY(p)&&l===!0,A=S.encodeLocation?S.encodeLocation(p).pathname:p.pathname,N=b.pathname,j=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;n||(N=N.toLowerCase(),j=j?j.toLowerCase():null,A=A.toLowerCase()),j&&_&&(j=Os(j,_)||j);const C=A!=="/"&&A.endsWith("/")?A.length-1:A.length;let D=N===A||!i&&N.startsWith(A)&&N.charAt(C)==="/",P=j!=null&&(j===A||!i&&j.startsWith(A)&&j.charAt(A.length)==="/"),$={isActive:D,isPending:P,isTransitioning:k},U=D?t:void 0,Y;typeof r=="function"?Y=r($):Y=[r,D?"active":null,P?"pending":null,k?"transitioning":null].filter(Boolean).join(" ");let K=typeof a=="function"?a($):a;return w.createElement(PE,{...d,"aria-current":U,className:Y,ref:h,style:K,to:o,viewTransition:l},typeof u=="function"?u($):u)});eY.displayName="NavLink";var tY=w.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:i,state:a,method:o=Tb,action:l,onSubmit:u,relative:d,preventScrollReset:h,viewTransition:p,...b},y)=>{let{unstable_useTransitions:S}=w.useContext(Aa),_=oY(),k=sY(l,{relative:d}),A=o.toLowerCase()==="get"?"get":"post",N=typeof l=="string"&&X$.test(l),j=C=>{if(u&&u(C),C.defaultPrevented)return;C.preventDefault();let D=C.nativeEvent.submitter,P=D?.getAttribute("formmethod")||o,$=()=>_(D||C.currentTarget,{fetcherKey:t,method:P,navigate:n,replace:i,state:a,relative:d,preventScrollReset:h,viewTransition:p});S&&n!==!1?w.startTransition(()=>$()):$()};return w.createElement("form",{ref:y,method:A,action:k,onSubmit:r?u:j,...b,"data-discover":!N&&e==="render"?"true":void 0})});tY.displayName="Form";function nY(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function J$(e){let t=w.useContext(mf);return hn(t,nY(e)),t}function rY(e,{target:t,replace:n,state:r,preventScrollReset:i,relative:a,viewTransition:o,unstable_useTransitions:l}={}){let u=gf(),d=_i(),h=hp(e,{relative:a});return w.useCallback(p=>{if(Rq(p,t)){p.preventDefault();let b=n!==void 0?n:Mm(d)===Mm(h),y=()=>u(e,{replace:b,state:r,preventScrollReset:i,relative:a,viewTransition:o});l?w.startTransition(()=>y()):y()}},[d,u,h,n,r,t,e,i,a,o,l])}var iY=0,aY=()=>`__${String(++iY)}__`;function oY(){let{router:e}=J$("useSubmit"),{basename:t}=w.useContext(Aa),n=kq(),r=e.fetch,i=e.navigate;return w.useCallback(async(a,o={})=>{let{action:l,method:u,encType:d,formData:h,body:p}=$q(a,t);if(o.navigate===!1){let b=o.fetcherKey||aY();await r(b,n,o.action||l,{preventScrollReset:o.preventScrollReset,formData:h,body:p,formMethod:o.method||u,formEncType:o.encType||d,flushSync:o.flushSync})}else await i(o.action||l,{preventScrollReset:o.preventScrollReset,formData:h,body:p,formMethod:o.method||u,formEncType:o.encType||d,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[r,i,t,n])}function sY(e,{relative:t}={}){let{basename:n}=w.useContext(Aa),r=w.useContext(Uo);hn(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...hp(e||".",{relative:t})},o=_i();if(e==null){a.search=o.search;let l=new URLSearchParams(a.search),u=l.getAll("index");if(u.some(h=>h==="")){l.delete("index"),u.filter(p=>p).forEach(p=>l.append("index",p));let h=l.toString();a.search=h?`?${h}`:""}}return(!e||e===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:Ts([n,a.pathname])),Mm(a)}function lY(e,{relative:t}={}){let n=w.useContext(H$);hn(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=J$("useViewTransitionState"),i=hp(e,{relative:t});if(!n.isTransitioning)return!1;let a=Os(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Os(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Gb(i.pathname,o)!=null||Gb(i.pathname,a)!=null}var ku=$$();const cY=wi(ku);let uY={data:""},dY=e=>typeof window=="object"?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||uY,fY=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,hY=/\/\*[^]*?\*\/|  +/g,KC=/\n+/g,Dl=(e,t)=>{let n="",r="",i="";for(let a in e){let o=e[a];a[0]=="@"?a[1]=="i"?n=a+" "+o+";":r+=a[1]=="f"?Dl(o,a):a+"{"+Dl(o,a[1]=="k"?"":t)+"}":typeof o=="object"?r+=Dl(o,t?t.replace(/([^,])+/g,l=>a.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,u=>/&/.test(u)?u.replace(/&/g,l):l?l+" "+u:u)):a):o!=null&&(a=/^--/.test(a)?a:a.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=Dl.p?Dl.p(a,o):a+":"+o+";")}return n+(t&&i?t+"{"+i+"}":i)+r},ps={},Q$=e=>{if(typeof e=="object"){let t="";for(let n in e)t+=n+Q$(e[n]);return t}return e},mY=(e,t,n,r,i)=>{let a=Q$(e),o=ps[a]||(ps[a]=(u=>{let d=0,h=11;for(;d<u.length;)h=101*h+u.charCodeAt(d++)>>>0;return"go"+h})(a));if(!ps[o]){let u=a!==e?e:(d=>{let h,p,b=[{}];for(;h=fY.exec(d.replace(hY,""));)h[4]?b.shift():h[3]?(p=h[3].replace(KC," ").trim(),b.unshift(b[0][p]=b[0][p]||{})):b[0][h[1]]=h[2].replace(KC," ").trim();return b[0]})(e);ps[o]=Dl(i?{["@keyframes "+o]:u}:u,n?"":"."+o)}let l=n&&ps.g?ps.g:null;return n&&(ps.g=ps[o]),((u,d,h,p)=>{p?d.data=d.data.replace(p,u):d.data.indexOf(u)===-1&&(d.data=h?u+d.data:d.data+u)})(ps[o],t,r,l),o},pY=(e,t,n)=>e.reduce((r,i,a)=>{let o=t[a];if(o&&o.call){let l=o(n),u=l&&l.props&&l.props.className||/^go/.test(l)&&l;o=u?"."+u:l&&typeof l=="object"?l.props?"":Dl(l,""):l===!1?"":l}return r+i+(o??"")},"");function _v(e){let t=this||{},n=e.call?e(t.p):e;return mY(n.unshift?n.raw?pY(n,[].slice.call(arguments,1),t.p):n.reduce((r,i)=>Object.assign(r,i&&i.call?i(t.p):i),{}):n,dY(t.target),t.g,t.o,t.k)}let e5,wk,_k;_v.bind({g:1});let Ns=_v.bind({k:1});function gY(e,t,n,r){Dl.p=t,e5=e,wk=n,_k=r}function Zl(e,t){let n=this||{};return function(){let r=arguments;function i(a,o){let l=Object.assign({},a),u=l.className||i.className;n.p=Object.assign({theme:wk&&wk()},l),n.o=/ *go\d+/.test(u),l.className=_v.apply(n,r)+(u?" "+u:"");let d=e;return e[0]&&(d=l.as||e,delete l.as),_k&&d[0]&&_k(l),e5(d,l)}return i}}var bY=e=>typeof e=="function",qb=(e,t)=>bY(e)?e(t):e,yY=(()=>{let e=0;return()=>(++e).toString()})(),t5=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),vY=20,RE="default",n5=(e,t)=>{let{toastLimit:n}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,n)};case 1:return{...e,toasts:e.toasts.map(o=>o.id===t.toast.id?{...o,...t.toast}:o)};case 2:let{toast:r}=t;return n5(e,{type:e.toasts.find(o=>o.id===r.id)?1:0,toast:r});case 3:let{toastId:i}=t;return{...e,toasts:e.toasts.map(o=>o.id===i||i===void 0?{...o,dismissed:!0,visible:!1}:o)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(o=>o.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let a=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(o=>({...o,pauseDuration:o.pauseDuration+a}))}}},jb=[],r5={toasts:[],pausedAt:void 0,settings:{toastLimit:vY}},Mo={},i5=(e,t=RE)=>{Mo[t]=n5(Mo[t]||r5,e),jb.forEach(([n,r])=>{n===t&&r(Mo[t])})},a5=e=>Object.keys(Mo).forEach(t=>i5(e,t)),xY=e=>Object.keys(Mo).find(t=>Mo[t].toasts.some(n=>n.id===e)),Sv=(e=RE)=>t=>{i5(t,e)},wY={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},_Y=(e={},t=RE)=>{let[n,r]=w.useState(Mo[t]||r5),i=w.useRef(Mo[t]);w.useEffect(()=>(i.current!==Mo[t]&&r(Mo[t]),jb.push([t,r]),()=>{let o=jb.findIndex(([l])=>l===t);o>-1&&jb.splice(o,1)}),[t]);let a=n.toasts.map(o=>{var l,u,d;return{...e,...e[o.type],...o,removeDelay:o.removeDelay||((l=e[o.type])==null?void 0:l.removeDelay)||e?.removeDelay,duration:o.duration||((u=e[o.type])==null?void 0:u.duration)||e?.duration||wY[o.type],style:{...e.style,...(d=e[o.type])==null?void 0:d.style,...o.style}}});return{...n,toasts:a}},SY=(e,t="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...n,id:n?.id||yY()}),mp=e=>(t,n)=>{let r=SY(t,e,n);return Sv(r.toasterId||xY(r.id))({type:2,toast:r}),r.id},Dn=(e,t)=>mp("blank")(e,t);Dn.error=mp("error");Dn.success=mp("success");Dn.loading=mp("loading");Dn.custom=mp("custom");Dn.dismiss=(e,t)=>{let n={type:3,toastId:e};t?Sv(t)(n):a5(n)};Dn.dismissAll=e=>Dn.dismiss(void 0,e);Dn.remove=(e,t)=>{let n={type:4,toastId:e};t?Sv(t)(n):a5(n)};Dn.removeAll=e=>Dn.remove(void 0,e);Dn.promise=(e,t,n)=>{let r=Dn.loading(t.loading,{...n,...n?.loading});return typeof e=="function"&&(e=e()),e.then(i=>{let a=t.success?qb(t.success,i):void 0;return a?Dn.success(a,{id:r,...n,...n?.success}):Dn.dismiss(r),i}).catch(i=>{let a=t.error?qb(t.error,i):void 0;a?Dn.error(a,{id:r,...n,...n?.error}):Dn.dismiss(r)}),e};var kY=1e3,EY=(e,t="default")=>{let{toasts:n,pausedAt:r}=_Y(e,t),i=w.useRef(new Map).current,a=w.useCallback((p,b=kY)=>{if(i.has(p))return;let y=setTimeout(()=>{i.delete(p),o({type:4,toastId:p})},b);i.set(p,y)},[]);w.useEffect(()=>{if(r)return;let p=Date.now(),b=n.map(y=>{if(y.duration===1/0)return;let S=(y.duration||0)+y.pauseDuration-(p-y.createdAt);if(S<0){y.visible&&Dn.dismiss(y.id);return}return setTimeout(()=>Dn.dismiss(y.id,t),S)});return()=>{b.forEach(y=>y&&clearTimeout(y))}},[n,r,t]);let o=w.useCallback(Sv(t),[t]),l=w.useCallback(()=>{o({type:5,time:Date.now()})},[o]),u=w.useCallback((p,b)=>{o({type:1,toast:{id:p,height:b}})},[o]),d=w.useCallback(()=>{r&&o({type:6,time:Date.now()})},[r,o]),h=w.useCallback((p,b)=>{let{reverseOrder:y=!1,gutter:S=8,defaultPosition:_}=b||{},k=n.filter(j=>(j.position||_)===(p.position||_)&&j.height),A=k.findIndex(j=>j.id===p.id),N=k.filter((j,C)=>C<A&&j.visible).length;return k.filter(j=>j.visible).slice(...y?[N+1]:[0,N]).reduce((j,C)=>j+(C.height||0)+S,0)},[n]);return w.useEffect(()=>{n.forEach(p=>{if(p.dismissed)a(p.id,p.removeDelay);else{let b=i.get(p.id);b&&(clearTimeout(b),i.delete(p.id))}})},[n,a]),{toasts:n,handlers:{updateHeight:u,startPause:l,endPause:d,calculateOffset:h}}},TY=Ns`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,AY=Ns`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,jY=Ns`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,OY=Zl("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${TY} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${AY} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${jY} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,NY=Ns`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,CY=Zl("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${NY} 1s linear infinite;
`,MY=Ns`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,DY=Ns`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,PY=Zl("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${MY} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${DY} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,RY=Zl("div")`
  position: absolute;
`,LY=Zl("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,IY=Ns`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,$Y=Zl("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${IY} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,BY=({toast:e})=>{let{icon:t,type:n,iconTheme:r}=e;return t!==void 0?typeof t=="string"?w.createElement($Y,null,t):t:n==="blank"?null:w.createElement(LY,null,w.createElement(CY,{...r}),n!=="loading"&&w.createElement(RY,null,n==="error"?w.createElement(OY,{...r}):w.createElement(PY,{...r})))},zY=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,UY=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,FY="0%{opacity:0;} 100%{opacity:1;}",HY="0%{opacity:1;} 100%{opacity:0;}",GY=Zl("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,qY=Zl("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,YY=(e,t)=>{let n=e.includes("top")?1:-1,[r,i]=t5()?[FY,HY]:[zY(n),UY(n)];return{animation:t?`${Ns(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Ns(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},KY=w.memo(({toast:e,position:t,style:n,children:r})=>{let i=e.height?YY(e.position||t||"top-center",e.visible):{opacity:0},a=w.createElement(BY,{toast:e}),o=w.createElement(qY,{...e.ariaProps},qb(e.message,e));return w.createElement(GY,{className:e.className,style:{...i,...n,...e.style}},typeof r=="function"?r({icon:a,message:o}):w.createElement(w.Fragment,null,a,o))});gY(w.createElement);var WY=({id:e,className:t,style:n,onHeightUpdate:r,children:i})=>{let a=w.useCallback(o=>{if(o){let l=()=>{let u=o.getBoundingClientRect().height;r(e,u)};l(),new MutationObserver(l).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[e,r]);return w.createElement("div",{ref:a,className:t,style:n},i)},VY=(e,t)=>{let n=e.includes("top"),r=n?{top:0}:{bottom:0},i=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:t5()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(n?1:-1)}px)`,...r,...i}},ZY=_v`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,x0=16,o5=({reverseOrder:e,position:t="top-center",toastOptions:n,gutter:r,children:i,toasterId:a,containerStyle:o,containerClassName:l})=>{let{toasts:u,handlers:d}=EY(n,a);return w.createElement("div",{"data-rht-toaster":a||"",style:{position:"fixed",zIndex:9999,top:x0,left:x0,right:x0,bottom:x0,pointerEvents:"none",...o},className:l,onMouseEnter:d.startPause,onMouseLeave:d.endPause},u.map(h=>{let p=h.position||t,b=d.calculateOffset(h,{reverseOrder:e,gutter:r,defaultPosition:t}),y=VY(p,b);return w.createElement(WY,{id:h.id,key:h.id,onHeightUpdate:d.updateHeight,className:h.visible?ZY:"",style:y},h.type==="custom"?qb(h.message,h):i?i(h):w.createElement(KY,{toast:h,position:p}))}))},fa=Dn;function XY(e,t,n,r=0,i=0){t<=2&&(e-=1,t+=12);const a=Math.floor(e/100),o=2-a+Math.floor(a/4),l=n+(r+i/60)/24;return Math.floor(365.25*(e+4716))+Math.floor(30.6001*(t+1))+l+o-1524.5}const JY=864e5;function QY(e){const t=(e-24405875e-1)*JY;return new Date(t)}function eK(e,t=7){const n=e+(t-.5)/12;if(n>=1986&&n<2005){const i=n-2e3;return 63.86+.3345*i-.060374*i*i+.0017275*i**3+651814e-9*i**4+2373599e-11*i**5}if(n>=2005&&n<2050){const i=n-2e3;return 62.92+.32217*i+.005589*i*i}if(n>=2050&&n<=2150){const i=(n-1820)/100;return-20+32*i*i-.5628*(2150-n)}if(n>=1900&&n<1986)return-2.79+1.494119*(n-1900)-.0598939*(n-1900)**2+.0061966*(n-1900)**3-197e-6*(n-1900)**4;if(n>=1800&&n<1900){const i=(n-1800)/100;return 13.72-33.244*i+68.612*i**2-65.3*i**3-1.653*i**4+.3343*i**5-.012125*i**6+1348e-7*i**7-175e-8*i**8}const r=(n-1820)/100;return-20+32*r*r}function tK(e){const t=Math.floor(e+.5),n=e+.5-t;let r=t;if(t>=2299161){const p=Math.floor((t-186721625e-2)/36524.25);r=t+1+p-Math.floor(p/4)}const i=r+1524,a=Math.floor((i-122.1)/365.25),o=Math.floor(365.25*a),l=Math.floor((i-o)/30.6001),u=i-o-Math.floor(30.6001*l)+n;let d=l-1;d>12&&(d-=12);let h=a-4715;return d>2&&(h-=1),[h,d,u]}const km=Math.PI,Qc=km/180,nK=180/km,rK=86400;function iK(e){return e%=360,e<0?e+360:e}function aK(e,t){return(e-t+540)%360-180}function WC(e,t){for(;e-t>180;)e-=360;for(;e-t<-180;)e+=360;return e}function oK(e){const[t,n]=tK(e);return e+eK(t,Math.round(n))/rK}function VC(e,t){let n=0,r=1;for(let i=0;i<e.length;i++){let a=0;for(const[o,l,u]of e[i])a+=o*Math.cos(l+u*t);n+=a*r,r*=t}return n*1e-8}function sK(e){const t=(e-2451545)/36525,n=(297.85036+445267.11148*t-.0019142*t*t+t*t*t/189474)*Qc,r=(357.52772+35999.05034*t-1603e-7*t*t-t*t*t/3e5)*Qc,i=(134.96298+477198.867398*t+.0086972*t*t+t*t*t/56250)*Qc,a=(93.27191+483202.017538*t-.0036825*t*t+t*t*t/327270)*Qc,o=(125.04452-1934.136261*t+.0020708*t*t+t*t*t/45e4)*Qc,l=[[0,0,0,0,1,-171996,-174.2,92025,8.9],[0,0,2,-2,2,-13187,-1.6,5736,-3.1],[0,0,2,0,2,-2274,-.2,977,-.5],[0,0,0,0,2,2062,.2,-895,.5],[0,1,0,0,0,1426,-3.4,54,-.1],[1,0,0,0,0,712,.1,-7,0],[0,1,2,-2,2,-517,1.2,224,-.6],[0,0,2,0,1,-386,-.4,200,0],[1,0,2,0,2,-301,0,129,-.1],[0,-1,2,-2,2,217,-.5,-95,.3]];let u=0,d=0;for(const[h,p,b,y,S,_,k,A,N]of l){const j=h*n+p*r+b*i+y*a+S*o;u+=(_+k*t)*Math.sin(j),d+=(A+N*t)*Math.cos(j)}return u*=1e-4,d*=1e-4,{dpsi:u,deps:d}}function w0(e){const t=oK(e),n=(t-2451545)/365250,r=VC(ZC.L,n),i=VC(ZC.R,n);let a=r+km;a>2*km&&(a-=2*km);const{dpsi:o}=sK(t),l=o/3600*Qc,u=20.4898/(3600*i),d=a+l-u*Qc;return iK(d*nK)}function An(e,t,n){const r=(t%360+360)%360,i=XY(e,1,1),a=w0(i);let o=r-a;o<0&&(o+=360);let l=i+o/.98564736;const u=1e-6,d=5e-6;for(let b=0;b<25;b++){const y=w0(l),S=aK(r,y);if(Math.abs(S)<u)break;const _=w0(l+d),k=w0(l-d),A=WC(_,y),N=WC(k,y),j=(A-N)/(2*d);l+=S/j}const h=QY(l),p=new Date(h.getFullYear(),h.getMonth(),h.getDate(),h.getHours(),h.getMinutes(),0,0);if(Number.isFinite(n)){const b=n/15-9;if(Math.abs(b)>1e-12)return new Date(p.getTime()+b*36e5)}return p}const ZC={L:[[[175347046,0,0],[3341656,4.6692568,6283.07585],[34894,4.6261,12566.1517],[3497,2.7441,5753.3849],[3418,2.8289,3.5231],[3136,3.6277,77713.7715],[2676,4.4181,7860.4194],[2343,6.1352,3930.2097],[1324,.7425,11506.7698],[1273,2.0371,529.691],[1199,1.1096,1577.3435],[990,5.233,5884.927],[902,2.045,26.298],[857,3.508,398.149],[780,1.179,5223.694],[753,2.533,5507.553],[505,4.583,18849.228],[492,4.205,775.523],[357,2.92,.067],[317,5.849,11790.629]],[[628331966747,0,0],[206059,2.678235,6283.07585],[4303,2.6351,12566.1517],[425,1.59,3.523],[119,5.796,26.298],[109,2.966,1577.344],[93,2.59,18849.23],[72,1.14,529.69],[68,1.87,398.15],[67,4.41,5507.55],[59,2.89,5223.69],[56,2.17,155.42]],[[52919,0,0],[8720,1.0721,6283.0758],[309,.867,12566.152]],[[289,5.844,6283.076],[35,0,0]],[[114,3.142,0],[8,4.13,6283.08]],[[1,3.14,0]]],R:[[[100013989,0,0],[1670700,3.0984635,6283.07585],[13956,3.05525,12566.1517],[3084,5.1985,77713.7715],[1628,1.1739,5753.3849],[1576,2.8469,7860.4194],[925,5.453,11506.77],[542,4.564,3930.21],[472,3.661,5884.927],[346,.964,5507.553],[329,5.9,5223.694]],[[103019,1.10749,6283.07585],[1721,1.0644,12566.1517],[702,3.142,0],[32,1.02,18849.23]],[[4359,5.7846,6283.0758],[124,5.579,12566.152],[12,3.14,0]],[[145,4.273,6283.076]]]},lK=(e,t)=>(e%t+t)%t,s5=(e,t)=>(e%t+t)%t,l5=e=>e instanceof Date&&!Number.isNaN(e.getTime()),XC=new Map;function c5(e,t=127.5){const n=`${e}@${t}`,r=XC.get(n);if(r)return r;const i=An(e,315,t);if(!i)throw new Error(`    : year=${e}, lon=${t}`);return XC.set(n,i),i}function u5(e,t=127.5){if(!l5(e))throw new Error("resolveYearIndex: invalid date");const n=e.getFullYear(),r=c5(n,t),i=e<r?n-1:n,a=lK(i-4,60);return{useYear:i,index60Num:a}}const Zr=["","","","","","","","","",""],vi=["","","","","","","","","","","",""],Sk={:["","","","","","","","","",""],:["","","","","","","","","","","",""]},io={:["","","","","","","","","",""],:["","","","","","","","","","","",""]},cK=["","","","","","","","","",""],uK=["","","","","","","","","","","",""],dK=["","","","","","","","","","","","","","","","","","","",""],fK=["","","","","","","","","","","","","","","","","","","","","","","",""],Wd=new Set(Zr),Dm=new Set(vi),Gn={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Qn={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},LE=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],Yb=[{branch:"",hanja:"",start:1380,end:60},{branch:"",hanja:"",start:60,end:180},{branch:"",hanja:"",start:180,end:300},{branch:"",hanja:"",start:300,end:420},{branch:"",hanja:"",start:420,end:540},{branch:"",hanja:"",start:540,end:660},{branch:"",hanja:"",start:660,end:780},{branch:"",hanja:"",start:780,end:900},{branch:"",hanja:"",start:900,end:1020},{branch:"",hanja:"",start:1020,end:1140},{branch:"",hanja:"",start:1140,end:1260},{branch:"",hanja:"",start:1260,end:1380}],hK={:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}},mK={:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}};function st(e,t=127.5){const{index60Num:n}=u5(e,t);return LE[n]}function pK(e,t=127.5){return(st(e,t)||"").charAt(0)}const gK=[2,4,6,8,0,2,4,6,8,0];function bK(e,t=127.5){const n=new Array(12);return n[0]=c5(e,t),n[1]=An(e,345,t),n[2]=An(e,15,t),n[3]=An(e,45,t),n[4]=An(e,75,t),n[5]=An(e,105,t),n[6]=An(e,135,t),n[7]=An(e,165,t),n[8]=An(e,195,t),n[9]=An(e,225,t),n[10]=An(e,255,t),n[11]=An(e+1,285,t),n.map(r=>new Date(r.getTime()+1800*1e3))}function yK(e,t=127.5){const{useYear:n}=u5(e,t),r=bK(n,t);let i=0;for(let o=0;o<12;o+=1)e>=r[o]&&(i=o);return{monthIndex:i+1,useYear:n,boundaries:r}}function vK(e,t=127.5){const n=pK(e,t),r=Sk..indexOf(n);if(r<0)throw new Error(`resolveFirstMonthStemIdx: invalid year stem "${n}"`);return gK[r]}function xK(e,t,n=127.5){return(vK(e,n)+(t-1))%10}function St(e,t=127.5){if(!l5(e))return"";const{monthIndex:n}=yK(e,t),r=(2+(n-1))%12,i=Sk.[r],a=xK(e,n,t);return Sk.[a]+i}const Kb={JDN:2445731,idx:0};function d5(e,t,n,r=0,i=0,a=0){t<=2&&(e-=1,t+=12);const o=Math.floor(e/100),l=2-o+Math.floor(o/4),u=(r+i/60+a/3600)/24;return Math.floor(365.25*(e+4716))+Math.floor(30.6001*(t+1))+n+u+l-1524.5}function wK(e,t){const n=e.getHours(),r=e.getMinutes(),i=n*60+r,a=kK(e);return t===""&&a===""?i>=1380?1:0:t===""&&(a===""||a==="")?i<180?-1:0:(i<0,0)}function _K(e,t){const r=e.getHours()*60+e.getMinutes();return t===""?r>=1380?1:0:t===""&&r<180?-1:0}function mt(e,t){const n=wK(e,t),r=new Date(e.getTime());r.setDate(r.getDate()+n);const i=d5(r.getFullYear(),r.getMonth()+1,r.getDate(),r.getHours(),r.getMinutes()),a=Math.floor(i+.5),o=s5(a-Kb.JDN+Kb.idx,60),l=LE[o];if(!l)throw new Error(`getDayGanZhi: idx=${o} out of range (jdn=${a}, jd=${i})`);return l}function SK(e,t){const n=new Date(e),r=_K(n,t),i=new Date(e.getTime());i.setDate(i.getDate()+r);const a=d5(i.getFullYear(),i.getMonth()+1,i.getDate(),i.getHours(),i.getMinutes()),o=Math.floor(a+.5),l=s5(o-Kb.JDN+Kb.idx,60),u=LE[l];if(!u)throw new Error(`getDayGanZhi: idx=${l} out of range (jdn=${o}, jd=${a})`);return u}function kK(e){e instanceof Date||(e=new Date(e));const t=e.getHours()*60+e.getMinutes();for(let n=0;n<Yb.length;n+=1){const{branch:r,start:i,end:a}=Yb[n];if(i<a){if(t>=i&&t<a)return r}else if(t>=i||t<a)return r}return""}function EK(e){e instanceof Date||(e=new Date(e));const t=e.getHours()*60+e.getMinutes();for(let n=0;n<Yb.length;n+=1){const{branch:r,start:i,end:a}=Yb[n];if(i<a){if(t>=i&&t<a)return r}else if(t>=i||t<a)return r}return""}function TK(e,t,n,r){const i=Zr.indexOf(t);if(i<0)return"";let a=(i%5*2+n)%10;const o=e.getHours();return(r===""||r==="/"&&o>=3)&&(n===0||n===1)&&(a=(a+2)%10),Zr[a]}function Qa(e,t,n){e instanceof Date||(e=new Date(e));const r=EK(e),i=vi.indexOf(r),o=(n??mt(e,t)).charAt(0);return TK(e,o,i,t)+r}const JC=e=>{let t;const n=new Set,r=(d,h)=>{const p=typeof d=="function"?d(t):d;if(!Object.is(p,t)){const b=t;t=h??(typeof p!="object"||p===null)?p:Object.assign({},t,p),n.forEach(y=>y(t,b))}},i=()=>t,l={setState:r,getState:i,getInitialState:()=>u,subscribe:d=>(n.add(d),()=>n.delete(d))},u=t=e(r,i,l);return l},AK=(e=>e?JC(e):JC),jK=e=>e;function OK(e,t=jK){const n=Xt.useSyncExternalStore(e.subscribe,Xt.useCallback(()=>t(e.getState()),[e,t]),Xt.useCallback(()=>t(e.getInitialState()),[e,t]));return Xt.useDebugValue(n),n}const QC=e=>{const t=AK(e),n=r=>OK(t,r);return Object.assign(n,t),n},Fo=(e=>e?QC(e):QC);function NK(e,t){let n;try{n=e()}catch{return}return{getItem:i=>{var a;const o=u=>u===null?null:JSON.parse(u,void 0),l=(a=n.getItem(i))!=null?a:null;return l instanceof Promise?l.then(o):o(l)},setItem:(i,a)=>n.setItem(i,JSON.stringify(a,void 0)),removeItem:i=>n.removeItem(i)}}const kk=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then(r){return kk(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return kk(r)(n)}}}},CK=(e,t)=>(n,r,i)=>{let a={storage:NK(()=>localStorage),partialize:_=>_,version:0,merge:(_,k)=>({...k,..._}),...t},o=!1;const l=new Set,u=new Set;let d=a.storage;if(!d)return e((..._)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(..._)},r,i);const h=()=>{const _=a.partialize({...r()});return d.setItem(a.name,{state:_,version:a.version})},p=i.setState;i.setState=(_,k)=>(p(_,k),h());const b=e((..._)=>(n(..._),h()),r,i);i.getInitialState=()=>b;let y;const S=()=>{var _,k;if(!d)return;o=!1,l.forEach(N=>{var j;return N((j=r())!=null?j:b)});const A=((k=a.onRehydrateStorage)==null?void 0:k.call(a,(_=r())!=null?_:b))||void 0;return kk(d.getItem.bind(d))(a.name).then(N=>{if(N)if(typeof N.version=="number"&&N.version!==a.version){if(a.migrate){const j=a.migrate(N.state,N.version);return j instanceof Promise?j.then(C=>[!0,C]):[!0,j]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,N.state];return[!1,void 0]}).then(N=>{var j;const[C,D]=N;if(y=a.merge(D,(j=r())!=null?j:b),n(y,!0),C)return h()}).then(()=>{A?.(y,void 0),y=r(),o=!0,u.forEach(N=>N(y))}).catch(N=>{A?.(void 0,N)})};return i.persist={setOptions:_=>{a={...a,..._},_.storage&&(d=_.storage)},clearStorage:()=>{d?.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>S(),hasHydrated:()=>o,onHydrate:_=>(l.add(_),()=>{l.delete(_)}),onFinishHydration:_=>(u.add(_),()=>{u.delete(_)})},a.skipHydration||S(),y||b},f5=CK;var gs={},_0={},Ek=function(e,t){return Ek=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},Ek(e,t)};function h5(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Ek(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var Wb=function(){return Wb=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},Wb.apply(this,arguments)};function bf(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function m5(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}function p5(e,t){return function(n,r){t(n,r,e)}}function g5(e,t,n,r,i,a){function o(A){if(A!==void 0&&typeof A!="function")throw new TypeError("Function expected");return A}for(var l=r.kind,u=l==="getter"?"get":l==="setter"?"set":"value",d=!t&&e?r.static?e:e.prototype:null,h=t||(d?Object.getOwnPropertyDescriptor(d,r.name):{}),p,b=!1,y=n.length-1;y>=0;y--){var S={};for(var _ in r)S[_]=_==="access"?{}:r[_];for(var _ in r.access)S.access[_]=r.access[_];S.addInitializer=function(A){if(b)throw new TypeError("Cannot add initializers after decoration has completed");a.push(o(A||null))};var k=(0,n[y])(l==="accessor"?{get:h.get,set:h.set}:h[u],S);if(l==="accessor"){if(k===void 0)continue;if(k===null||typeof k!="object")throw new TypeError("Object expected");(p=o(k.get))&&(h.get=p),(p=o(k.set))&&(h.set=p),(p=o(k.init))&&i.unshift(p)}else(p=o(k))&&(l==="field"?i.unshift(p):h[u]=p)}d&&Object.defineProperty(d,r.name,h),b=!0}function b5(e,t,n){for(var r=arguments.length>2,i=0;i<t.length;i++)n=r?t[i].call(e,n):t[i].call(e);return r?n:void 0}function y5(e){return typeof e=="symbol"?e:"".concat(e)}function v5(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})}function x5(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function Ye(e,t,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function l(h){try{d(r.next(h))}catch(p){o(p)}}function u(h){try{d(r.throw(h))}catch(p){o(p)}}function d(h){h.done?a(h.value):i(h.value).then(l,u)}d((r=r.apply(e,t||[])).next())})}function w5(e,t){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=l(0),o.throw=l(1),o.return=l(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(d){return function(h){return u([d,h])}}function u(d){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,d[0]&&(n=0)),n;)try{if(r=1,i&&(a=d[0]&2?i.return:d[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,d[1])).done)return a;switch(i=0,a&&(d=[d[0]&2,a.value]),d[0]){case 0:case 1:a=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,i=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(d[0]===6||d[0]===2)){n=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){n.label=d[1];break}if(d[0]===6&&n.label<a[1]){n.label=a[1],a=d;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(d);break}a[2]&&n.ops.pop(),n.trys.pop();continue}d=t.call(e,n)}catch(h){d=[6,h],i=0}finally{r=a=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}var kv=Object.create?(function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}):(function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]});function _5(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&kv(t,e,n)}function Vb(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function IE(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(l){o={error:l}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function S5(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(IE(arguments[t]));return e}function k5(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var a=arguments[t],o=0,l=a.length;o<l;o++,i++)r[i]=a[o];return r}function E5(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,a;r<i;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))}function Vd(e){return this instanceof Vd?(this.v=e,this):new Vd(e)}function T5(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,a=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(y){return function(S){return Promise.resolve(S).then(y,p)}}function l(y,S){r[y]&&(i[y]=function(_){return new Promise(function(k,A){a.push([y,_,k,A])>1||u(y,_)})},S&&(i[y]=S(i[y])))}function u(y,S){try{d(r[y](S))}catch(_){b(a[0][3],_)}}function d(y){y.value instanceof Vd?Promise.resolve(y.value.v).then(h,p):b(a[0][2],y)}function h(y){u("next",y)}function p(y){u("throw",y)}function b(y,S){y(S),a.shift(),a.length&&u(a[0][0],a[0][1])}}function A5(e){var t,n;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,a){t[i]=e[i]?function(o){return(n=!n)?{value:Vd(e[i](o)),done:!1}:a?a(o):o}:a}}function j5(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Vb=="function"?Vb(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(a){n[a]=e[a]&&function(o){return new Promise(function(l,u){o=e[a](o),i(l,u,o.done,o.value)})}}function i(a,o,l,u){Promise.resolve(u).then(function(d){a({value:d,done:l})},o)}}function O5(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var MK=Object.create?(function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}):function(e,t){e.default=t},Tk=function(e){return Tk=Object.getOwnPropertyNames||function(t){var n=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[n.length]=r);return n},Tk(e)};function N5(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n=Tk(e),r=0;r<n.length;r++)n[r]!=="default"&&kv(t,e,n[r]);return MK(t,e),t}function C5(e){return e&&e.__esModule?e:{default:e}}function M5(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)}function D5(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n}function P5(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function R5(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,i;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(i=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");i&&(r=function(){try{i.call(this)}catch(a){return Promise.reject(a)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t}var DK=typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r};function L5(e){function t(a){e.error=e.hasError?new DK(a,e.error,"An error was suppressed during disposal."):a,e.hasError=!0}var n,r=0;function i(){for(;n=e.stack.pop();)try{if(!n.async&&r===1)return r=0,e.stack.push(n),Promise.resolve().then(i);if(n.dispose){var a=n.dispose.call(n.value);if(n.async)return r|=2,Promise.resolve(a).then(i,function(o){return t(o),i()})}else r|=1}catch(o){t(o)}if(r===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return i()}function I5(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,r,i,a,o){return r?t?".jsx":".js":i&&(!a||!o)?n:i+a+"."+o.toLowerCase()+"js"}):e}const PK={__extends:h5,__assign:Wb,__rest:bf,__decorate:m5,__param:p5,__esDecorate:g5,__runInitializers:b5,__propKey:y5,__setFunctionName:v5,__metadata:x5,__awaiter:Ye,__generator:w5,__createBinding:kv,__exportStar:_5,__values:Vb,__read:IE,__spread:S5,__spreadArrays:k5,__spreadArray:E5,__await:Vd,__asyncGenerator:T5,__asyncDelegator:A5,__asyncValues:j5,__makeTemplateObject:O5,__importStar:N5,__importDefault:C5,__classPrivateFieldGet:M5,__classPrivateFieldSet:D5,__classPrivateFieldIn:P5,__addDisposableResource:R5,__disposeResources:L5,__rewriteRelativeImportExtension:I5},RK=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:R5,get __assign(){return Wb},__asyncDelegator:A5,__asyncGenerator:T5,__asyncValues:j5,__await:Vd,__awaiter:Ye,__classPrivateFieldGet:M5,__classPrivateFieldIn:P5,__classPrivateFieldSet:D5,__createBinding:kv,__decorate:m5,__disposeResources:L5,__esDecorate:g5,__exportStar:_5,__extends:h5,__generator:w5,__importDefault:C5,__importStar:N5,__makeTemplateObject:O5,__metadata:x5,__param:p5,__propKey:y5,__read:IE,__rest:bf,__rewriteRelativeImportExtension:I5,__runInitializers:b5,__setFunctionName:v5,__spread:S5,__spreadArray:E5,__spreadArrays:k5,__values:Vb,default:PK},Symbol.toStringTag,{value:"Module"})),LK=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);let Ev=class extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}},$5=class extends Ev{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}},Ak=class extends Ev{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}},jk=class extends Ev{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}};var Zb;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Zb||(Zb={}));class IK{constructor(t,{headers:n={},customFetch:r,region:i=Zb.Any}={}){this.url=t,this.headers=n,this.region=i,this.fetch=LK(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return Ye(this,arguments,void 0,function*(n,r={}){var i;let a,o;try{const{headers:l,method:u,body:d,signal:h,timeout:p}=r;let b={},{region:y}=r;y||(y=this.region);const S=new URL(`${this.url}/${n}`);y&&y!=="any"&&(b["x-region"]=y,S.searchParams.set("forceFunctionRegion",y));let _;d&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)?typeof Blob<"u"&&d instanceof Blob||d instanceof ArrayBuffer?(b["Content-Type"]="application/octet-stream",_=d):typeof d=="string"?(b["Content-Type"]="text/plain",_=d):typeof FormData<"u"&&d instanceof FormData?_=d:(b["Content-Type"]="application/json",_=JSON.stringify(d)):_=d;let k=h;p&&(o=new AbortController,a=setTimeout(()=>o.abort(),p),h?(k=o.signal,h.addEventListener("abort",()=>o.abort())):k=o.signal);const A=yield this.fetch(S.toString(),{method:u||"POST",headers:Object.assign(Object.assign(Object.assign({},b),this.headers),l),body:_,signal:k}).catch(D=>{throw new $5(D)}),N=A.headers.get("x-relay-error");if(N&&N==="true")throw new Ak(A);if(!A.ok)throw new jk(A);let j=((i=A.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),C;return j==="application/json"?C=yield A.json():j==="application/octet-stream"||j==="application/pdf"?C=yield A.blob():j==="text/event-stream"?C=A:j==="multipart/form-data"?C=yield A.formData():C=yield A.text(),{data:C,error:null,response:A}}catch(l){return{data:null,error:l,response:l instanceof jk||l instanceof Ak?l.context:void 0}}finally{a&&clearTimeout(a)}})}}const $K=Object.freeze(Object.defineProperty({__proto__:null,get FunctionRegion(){return Zb},FunctionsClient:IK,FunctionsError:Ev,FunctionsFetchError:$5,FunctionsHttpError:jk,FunctionsRelayError:Ak},Symbol.toStringTag,{value:"Module"})),B5=dp($K);var Pr={};const yf=dp(RK);var S0={},k0={},E0={},T0={},A0={},j0={},eM;function z5(){if(eM)return j0;eM=1,Object.defineProperty(j0,"__esModule",{value:!0});class e extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return j0.default=e,j0}var tM;function U5(){if(tM)return A0;tM=1,Object.defineProperty(A0,"__esModule",{value:!0});const t=yf.__importDefault(z5());let n=class{constructor(i){var a,o;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(a=i.shouldThrowOnError)!==null&&a!==void 0?a:!1,this.signal=i.signal,this.isMaybeSingle=(o=i.isMaybeSingle)!==null&&o!==void 0?o:!1,i.fetch?this.fetch=i.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,a){return this.headers=new Headers(this.headers),this.headers.set(i,a),this}then(i,a){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const o=this.fetch;let l=o(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async u=>{var d,h,p,b;let y=null,S=null,_=null,k=u.status,A=u.statusText;if(u.ok){if(this.method!=="HEAD"){const D=await u.text();D===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((d=this.headers.get("Accept"))===null||d===void 0)&&d.includes("application/vnd.pgrst.plan+text"))?S=D:S=JSON.parse(D))}const j=(h=this.headers.get("Prefer"))===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),C=(p=u.headers.get("content-range"))===null||p===void 0?void 0:p.split("/");j&&C&&C.length>1&&(_=parseInt(C[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(S)&&(S.length>1?(y={code:"PGRST116",details:`Results contain ${S.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},S=null,_=null,k=406,A="Not Acceptable"):S.length===1?S=S[0]:S=null)}else{const j=await u.text();try{y=JSON.parse(j),Array.isArray(y)&&u.status===404&&(S=[],y=null,k=200,A="OK")}catch{u.status===404&&j===""?(k=204,A="No Content"):y={message:j}}if(y&&this.isMaybeSingle&&(!((b=y?.details)===null||b===void 0)&&b.includes("0 rows"))&&(y=null,k=200,A="OK"),y&&this.shouldThrowOnError)throw new t.default(y)}return{error:y,data:S,count:_,status:k,statusText:A}});return this.shouldThrowOnError||(l=l.catch(u=>{var d,h,p,b,y,S;let _="";const k=u?.cause;if(k){const A=(d=k?.message)!==null&&d!==void 0?d:"",N=(h=k?.code)!==null&&h!==void 0?h:"";_=`${(p=u?.name)!==null&&p!==void 0?p:"FetchError"}: ${u?.message}`,_+=`

Caused by: ${(b=k?.name)!==null&&b!==void 0?b:"Error"}: ${A}`,N&&(_+=` (${N})`),k?.stack&&(_+=`
${k.stack}`)}else _=(y=u?.stack)!==null&&y!==void 0?y:"";return{error:{message:`${(S=u?.name)!==null&&S!==void 0?S:"FetchError"}: ${u?.message}`,details:_,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),l.then(i,a)}returns(){return this}overrideTypes(){return this}};return A0.default=n,A0}var nM;function F5(){if(nM)return T0;nM=1,Object.defineProperty(T0,"__esModule",{value:!0});const t=yf.__importDefault(U5());let n=class extends t.default{select(i){let a=!1;const o=(i??"*").split("").map(l=>/\s/.test(l)&&!a?"":(l==='"'&&(a=!a),l)).join("");return this.url.searchParams.set("select",o),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:a=!0,nullsFirst:o,foreignTable:l,referencedTable:u=l}={}){const d=u?`${u}.order`:"order",h=this.url.searchParams.get(d);return this.url.searchParams.set(d,`${h?`${h},`:""}${i}.${a?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:a,referencedTable:o=a}={}){const l=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(l,`${i}`),this}range(i,a,{foreignTable:o,referencedTable:l=o}={}){const u=typeof l>"u"?"offset":`${l}.offset`,d=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(u,`${i}`),this.url.searchParams.set(d,`${a-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:a=!1,settings:o=!1,buffers:l=!1,wal:u=!1,format:d="text"}={}){var h;const p=[i?"analyze":null,a?"verbose":null,o?"settings":null,l?"buffers":null,u?"wal":null].filter(Boolean).join("|"),b=(h=this.headers.get("Accept"))!==null&&h!==void 0?h:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${d}; for="${b}"; options=${p};`),d==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}};return T0.default=n,T0}var rM;function $E(){if(rM)return E0;rM=1,Object.defineProperty(E0,"__esModule",{value:!0});const t=yf.__importDefault(F5()),n=new RegExp("[,()]");let r=class extends t.default{eq(a,o){return this.url.searchParams.append(a,`eq.${o}`),this}neq(a,o){return this.url.searchParams.append(a,`neq.${o}`),this}gt(a,o){return this.url.searchParams.append(a,`gt.${o}`),this}gte(a,o){return this.url.searchParams.append(a,`gte.${o}`),this}lt(a,o){return this.url.searchParams.append(a,`lt.${o}`),this}lte(a,o){return this.url.searchParams.append(a,`lte.${o}`),this}like(a,o){return this.url.searchParams.append(a,`like.${o}`),this}likeAllOf(a,o){return this.url.searchParams.append(a,`like(all).{${o.join(",")}}`),this}likeAnyOf(a,o){return this.url.searchParams.append(a,`like(any).{${o.join(",")}}`),this}ilike(a,o){return this.url.searchParams.append(a,`ilike.${o}`),this}ilikeAllOf(a,o){return this.url.searchParams.append(a,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(a,o){return this.url.searchParams.append(a,`ilike(any).{${o.join(",")}}`),this}regexMatch(a,o){return this.url.searchParams.append(a,`match.${o}`),this}regexIMatch(a,o){return this.url.searchParams.append(a,`imatch.${o}`),this}is(a,o){return this.url.searchParams.append(a,`is.${o}`),this}isDistinct(a,o){return this.url.searchParams.append(a,`isdistinct.${o}`),this}in(a,o){const l=Array.from(new Set(o)).map(u=>typeof u=="string"&&n.test(u)?`"${u}"`:`${u}`).join(",");return this.url.searchParams.append(a,`in.(${l})`),this}contains(a,o){return typeof o=="string"?this.url.searchParams.append(a,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(a,`cs.{${o.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(o)}`),this}containedBy(a,o){return typeof o=="string"?this.url.searchParams.append(a,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(a,`cd.{${o.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(o)}`),this}rangeGt(a,o){return this.url.searchParams.append(a,`sr.${o}`),this}rangeGte(a,o){return this.url.searchParams.append(a,`nxl.${o}`),this}rangeLt(a,o){return this.url.searchParams.append(a,`sl.${o}`),this}rangeLte(a,o){return this.url.searchParams.append(a,`nxr.${o}`),this}rangeAdjacent(a,o){return this.url.searchParams.append(a,`adj.${o}`),this}overlaps(a,o){return typeof o=="string"?this.url.searchParams.append(a,`ov.${o}`):this.url.searchParams.append(a,`ov.{${o.join(",")}}`),this}textSearch(a,o,{config:l,type:u}={}){let d="";u==="plain"?d="pl":u==="phrase"?d="ph":u==="websearch"&&(d="w");const h=l===void 0?"":`(${l})`;return this.url.searchParams.append(a,`${d}fts${h}.${o}`),this}match(a){return Object.entries(a).forEach(([o,l])=>{this.url.searchParams.append(o,`eq.${l}`)}),this}not(a,o,l){return this.url.searchParams.append(a,`not.${o}.${l}`),this}or(a,{foreignTable:o,referencedTable:l=o}={}){const u=l?`${l}.or`:"or";return this.url.searchParams.append(u,`(${a})`),this}filter(a,o,l){return this.url.searchParams.append(a,`${o}.${l}`),this}};return E0.default=r,E0}var iM;function H5(){if(iM)return k0;iM=1,Object.defineProperty(k0,"__esModule",{value:!0});const t=yf.__importDefault($E());let n=class{constructor(i,{headers:a={},schema:o,fetch:l}){this.url=i,this.headers=new Headers(a),this.schema=o,this.fetch=l}select(i,a){const{head:o=!1,count:l}=a??{},u=o?"HEAD":"GET";let d=!1;const h=(i??"*").split("").map(p=>/\s/.test(p)&&!d?"":(p==='"'&&(d=!d),p)).join("");return this.url.searchParams.set("select",h),l&&this.headers.append("Prefer",`count=${l}`),new t.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:a,defaultToNull:o=!0}={}){var l;const u="POST";if(a&&this.headers.append("Prefer",`count=${a}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const d=i.reduce((h,p)=>h.concat(Object.keys(p)),[]);if(d.length>0){const h=[...new Set(d)].map(p=>`"${p}"`);this.url.searchParams.set("columns",h.join(","))}}return new t.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}upsert(i,{onConflict:a,ignoreDuplicates:o=!1,count:l,defaultToNull:u=!0}={}){var d;const h="POST";if(this.headers.append("Prefer",`resolution=${o?"ignore":"merge"}-duplicates`),a!==void 0&&this.url.searchParams.set("on_conflict",a),l&&this.headers.append("Prefer",`count=${l}`),u||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const p=i.reduce((b,y)=>b.concat(Object.keys(y)),[]);if(p.length>0){const b=[...new Set(p)].map(y=>`"${y}"`);this.url.searchParams.set("columns",b.join(","))}}return new t.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}update(i,{count:a}={}){var o;const l="PATCH";return a&&this.headers.append("Prefer",`count=${a}`),new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}delete({count:i}={}){var a;const o="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new t.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}};return k0.default=n,k0}var aM;function BK(){if(aM)return S0;aM=1,Object.defineProperty(S0,"__esModule",{value:!0});const e=yf,t=e.__importDefault(H5()),n=e.__importDefault($E());let r=class G5{constructor(a,{headers:o={},schema:l,fetch:u}={}){this.url=a,this.headers=new Headers(o),this.schemaName=l,this.fetch=u}from(a){if(!a||typeof a!="string"||a.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const o=new URL(`${this.url}/${a}`);return new t.default(o,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(a){return new G5(this.url,{headers:this.headers,schema:a,fetch:this.fetch})}rpc(a,o={},{head:l=!1,get:u=!1,count:d}={}){var h;let p;const b=new URL(`${this.url}/rpc/${a}`);let y;l||u?(p=l?"HEAD":"GET",Object.entries(o).filter(([_,k])=>k!==void 0).map(([_,k])=>[_,Array.isArray(k)?`{${k.join(",")}}`:`${k}`]).forEach(([_,k])=>{b.searchParams.append(_,k)})):(p="POST",y=o);const S=new Headers(this.headers);return d&&S.set("Prefer",`count=${d}`),new n.default({method:p,url:b,headers:S,schema:this.schemaName,body:y,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}};return S0.default=r,S0}var oM;function q5(){if(oM)return Pr;oM=1,Object.defineProperty(Pr,"__esModule",{value:!0}),Pr.PostgrestError=Pr.PostgrestBuilder=Pr.PostgrestTransformBuilder=Pr.PostgrestFilterBuilder=Pr.PostgrestQueryBuilder=Pr.PostgrestClient=void 0;const e=yf,t=e.__importDefault(BK());Pr.PostgrestClient=t.default;const n=e.__importDefault(H5());Pr.PostgrestQueryBuilder=n.default;const r=e.__importDefault($E());Pr.PostgrestFilterBuilder=r.default;const i=e.__importDefault(F5());Pr.PostgrestTransformBuilder=i.default;const a=e.__importDefault(U5());Pr.PostgrestBuilder=a.default;const o=e.__importDefault(z5());return Pr.PostgrestError=o.default,Pr.default={PostgrestClient:t.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:i.default,PostgrestBuilder:a.default,PostgrestError:o.default},Pr}class Y5{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const zK="2.86.2",UK=`realtime-js/${zK}`,K5="1.0.0",FK="2.0.0",sM=K5,Ok=1e4,HK=1e3,GK=100;var eu;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(eu||(eu={}));var Un;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Un||(Un={}));var Ga;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Ga||(Ga={}));var Nk;(function(e){e.websocket="websocket"})(Nk||(Nk={}));var tu;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(tu||(tu={}));class qK{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,n){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(t));let r=[t.join_ref,t.ref,t.topic,t.event,t.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(t){var n;return this._isArrayBuffer((n=t.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var n,r;const i=(r=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(t){var n,r;const i=(r=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},o=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(t,n,r){var i,a;const o=t.topic,l=(i=t.ref)!==null&&i!==void 0?i:"",u=(a=t.join_ref)!==null&&a!==void 0?a:"",d=t.payload.event,h=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},p=Object.keys(h).length===0?"":JSON.stringify(h);if(u.length>255)throw new Error(`joinRef length ${u.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`ref length ${l.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`userEvent length ${d.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`metadata length ${p.length} exceeds maximum of 255`);const b=this.USER_BROADCAST_PUSH_META_LENGTH+u.length+l.length+o.length+d.length+p.length,y=new ArrayBuffer(this.HEADER_LENGTH+b);let S=new DataView(y),_=0;S.setUint8(_++,this.KINDS.userBroadcastPush),S.setUint8(_++,u.length),S.setUint8(_++,l.length),S.setUint8(_++,o.length),S.setUint8(_++,d.length),S.setUint8(_++,p.length),S.setUint8(_++,n),Array.from(u,A=>S.setUint8(_++,A.charCodeAt(0))),Array.from(l,A=>S.setUint8(_++,A.charCodeAt(0))),Array.from(o,A=>S.setUint8(_++,A.charCodeAt(0))),Array.from(d,A=>S.setUint8(_++,A.charCodeAt(0))),Array.from(p,A=>S.setUint8(_++,A.charCodeAt(0)));var k=new Uint8Array(y.byteLength+r.byteLength);return k.set(new Uint8Array(y),0),k.set(new Uint8Array(r),y.byteLength),k.buffer}decode(t,n){if(this._isArrayBuffer(t)){let r=this._binaryDecode(t);return n(r)}if(typeof t=="string"){const r=JSON.parse(t),[i,a,o,l,u]=r;return n({join_ref:i,ref:a,topic:o,event:l,payload:u})}return n({})}_binaryDecode(t){const n=new DataView(t),r=n.getUint8(0),i=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,n,i)}}_decodeUserBroadcast(t,n,r){const i=n.getUint8(1),a=n.getUint8(2),o=n.getUint8(3),l=n.getUint8(4);let u=this.HEADER_LENGTH+4;const d=r.decode(t.slice(u,u+i));u=u+i;const h=r.decode(t.slice(u,u+a));u=u+a;const p=r.decode(t.slice(u,u+o));u=u+o;const b=t.slice(u,t.byteLength),y=l===this.JSON_ENCODING?JSON.parse(r.decode(b)):b,S={type:this.BROADCAST_EVENT,event:h,payload:y};return o>0&&(S.meta=JSON.parse(p)),{join_ref:null,ref:null,topic:d,event:this.BROADCAST_EVENT,payload:S}}_isArrayBuffer(t){var n;return t instanceof ArrayBuffer||((n=t?.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(t,n){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([r])=>n.includes(r)))}}class W5{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Vt;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Vt||(Vt={}));const lM=(e,t,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return t?Object.keys(t).reduce((a,o)=>(a[o]=YK(o,e,t,i),a),{}):{}},YK=(e,t,n,r)=>{const i=t.find(l=>l.name===e),a=i?.type,o=n[e];return a&&!r.includes(a)?V5(a,o):Ck(o)},V5=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return ZK(t,n)}switch(e){case Vt.bool:return KK(t);case Vt.float4:case Vt.float8:case Vt.int2:case Vt.int4:case Vt.int8:case Vt.numeric:case Vt.oid:return WK(t);case Vt.json:case Vt.jsonb:return VK(t);case Vt.timestamp:return XK(t);case Vt.abstime:case Vt.date:case Vt.daterange:case Vt.int4range:case Vt.int8range:case Vt.money:case Vt.reltime:case Vt.text:case Vt.time:case Vt.timestamptz:case Vt.timetz:case Vt.tsrange:case Vt.tstzrange:return Ck(t);default:return Ck(t)}},Ck=e=>e,KK=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},WK=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},VK=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},ZK=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let a;const o=e.slice(1,n);try{a=JSON.parse("["+o+"]")}catch{a=o?o.split(","):[]}return a.map(l=>V5(t,l))}return e},XK=e=>typeof e=="string"?e.replace(" ","T"):e,Z5=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class $_{constructor(t,n,r={},i=Ok){this.channel=t,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Mk;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Mk||(Mk={}));let X5=class Ob{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=n?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:a,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ob.syncState(this.state,i,a,o),this.pendingDiffs.forEach(u=>{this.state=Ob.syncDiff(this.state,u,a,o)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},i=>{const{onJoin:a,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Ob.syncDiff(this.state,i,a,o),l())}),this.onJoin((i,a,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:a,newPresences:o})}),this.onLeave((i,a,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:a,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,i){const a=this.cloneDeep(t),o=this.transformState(n),l={},u={};return this.map(a,(d,h)=>{o[d]||(u[d]=h)}),this.map(o,(d,h)=>{const p=a[d];if(p){const b=h.map(k=>k.presence_ref),y=p.map(k=>k.presence_ref),S=h.filter(k=>y.indexOf(k.presence_ref)<0),_=p.filter(k=>b.indexOf(k.presence_ref)<0);S.length>0&&(l[d]=S),_.length>0&&(u[d]=_)}else l[d]=h}),this.syncDiff(a,{joins:l,leaves:u},r,i)}static syncDiff(t,n,r,i){const{joins:a,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(a,(l,u)=>{var d;const h=(d=t[l])!==null&&d!==void 0?d:[];if(t[l]=this.cloneDeep(u),h.length>0){const p=t[l].map(y=>y.presence_ref),b=h.filter(y=>p.indexOf(y.presence_ref)<0);t[l].unshift(...b)}r(l,h,u)}),this.map(o,(l,u)=>{let d=t[l];if(!d)return;const h=u.map(p=>p.presence_ref);d=d.filter(p=>h.indexOf(p.presence_ref)<0),t[l]=d,i(l,d,u),d.length===0&&delete t[l]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const i=t[r];return"metas"in i?n[r]=i.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):n[r]=i,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var Dk;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Dk||(Dk={}));var zd;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(zd||(zd={}));var Ao;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Ao||(Ao={}));const JK=Un;let J5=class Q5{constructor(t,n={config:{}},r){var i,a;if(this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=Un.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new $_(this,Ga.join,this.params,this.timeout),this.rejoinTimer=new W5(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Un.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Un.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Un.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Un.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Un.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ga.reply,{},(o,l)=>{this._trigger(this._replyEventName(l),o)}),this.presence=new X5(this),this.broadcastEndpointURL=Z5(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var r,i,a;if(this.socket.isConnected()||this.socket.connect(),this.state==Un.closed){const{config:{broadcast:o,presence:l,private:u}}=this.params,d=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(y=>y.filter))!==null&&i!==void 0?i:[],h=!!this.bindings[zd.PRESENCE]&&this.bindings[zd.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,p={},b={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:h}),postgres_changes:d,private:u};this.socket.accessTokenValue&&(p.access_token=this.socket.accessTokenValue),this._onError(y=>t?.(Ao.CHANNEL_ERROR,y)),this._onClose(()=>t?.(Ao.CLOSED)),this.updateJoinPayload(Object.assign({config:b},p)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:y})=>{var S;if(this.socket.setAuth(),y===void 0){t?.(Ao.SUBSCRIBED);return}else{const _=this.bindings.postgres_changes,k=(S=_?.length)!==null&&S!==void 0?S:0,A=[];for(let N=0;N<k;N++){const j=_[N],{filter:{event:C,schema:D,table:P,filter:$}}=j,U=y&&y[N];if(U&&U.event===C&&U.schema===D&&U.table===P&&U.filter===$)A.push(Object.assign(Object.assign({},j),{id:U.id}));else{this.unsubscribe(),this.state=Un.errored,t?.(Ao.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=A,t&&t(Ao.SUBSCRIBED);return}}).receive("error",y=>{this.state=Un.errored,t?.(Ao.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(y).join(", ")||"error")))}).receive("timeout",()=>{t?.(Ao.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===Un.joined&&t===zd.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,r)}async httpSend(t,n,r={}){var i;const a=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(n==null)return Promise.reject("Payload is required for httpSend()");const o={method:"POST",headers:{Authorization:a,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:n,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);if(l.status===202)return{success:!0};let u=l.statusText;try{const d=await l.json();u=d.error||d.message||u}catch{}return Promise.reject(new Error(u))}async send(t,n={}){var r,i;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:o}=t,u={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:o,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=d.body)===null||i===void 0?void 0:i.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var o,l,u;const d=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((u=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||u===void 0)&&u.ack)&&a("ok"),d.receive("ok",()=>a("ok")),d.receive("error",()=>a("error")),d.receive("timeout",()=>a("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Un.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ga.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new $_(this,Ga.leave,{},t),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r?.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Un.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const i=new AbortController,a=setTimeout(()=>i.abort(),r),o=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(a),o}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new $_(this,t,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>GK){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var i,a;const o=t.toLocaleLowerCase(),{close:l,error:u,leave:d,join:h}=Ga;if(r&&[l,u,d,h].indexOf(o)>=0&&r!==this._joinRef())return;let b=this._onMessage(o,n,r);if(n&&!b)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(y=>{var S,_,k;return((S=y.filter)===null||S===void 0?void 0:S.event)==="*"||((k=(_=y.filter)===null||_===void 0?void 0:_.event)===null||k===void 0?void 0:k.toLocaleLowerCase())===o}).map(y=>y.callback(b,r)):(a=this.bindings[o])===null||a===void 0||a.filter(y=>{var S,_,k,A,N,j;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in y){const C=y.id,D=(S=y.filter)===null||S===void 0?void 0:S.event;return C&&((_=n.ids)===null||_===void 0?void 0:_.includes(C))&&(D==="*"||D?.toLocaleLowerCase()===((k=n.data)===null||k===void 0?void 0:k.type.toLocaleLowerCase()))}else{const C=(N=(A=y?.filter)===null||A===void 0?void 0:A.event)===null||N===void 0?void 0:N.toLocaleLowerCase();return C==="*"||C===((j=n?.event)===null||j===void 0?void 0:j.toLocaleLowerCase())}else return y.type.toLocaleLowerCase()===o}).map(y=>{if(typeof b=="object"&&"ids"in b){const S=b.data,{schema:_,table:k,commit_timestamp:A,type:N,errors:j}=S;b=Object.assign(Object.assign({},{schema:_,table:k,commit_timestamp:A,eventType:N,new:{},old:{},errors:j}),this._getPayloadRecords(S))}y.callback(b,r)})}_isClosed(){return this.state===Un.closed}_isJoined(){return this.state===Un.joined}_isJoining(){return this.state===Un.joining}_isLeaving(){return this.state===Un.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const i=t.toLocaleLowerCase(),a={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(a):this.bindings[i]=[a],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var a;return!(((a=i.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===r&&Q5.isEqual(i.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Ga.close,{},t)}_onError(t){this._on(Ga.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Un.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=lM(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=lM(t.columns,t.old_record)),n}};const B_=()=>{},O0={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},QK=[1e3,2e3,5e3,1e4],eW=1e4,tW=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;let nW=class{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Ok,this.transport=null,this.heartbeatIntervalMs=O0.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=B_,this.ref=0,this.reconnectTimer=null,this.vsn=sM,this.logger=B_,this.conn=null,this.sendBuffer=[],this.serializer=new qK,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>i?(...a)=>i(...a):(...a)=>fetch(...a),!(!((r=n?.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${Nk.websocket}`,this.httpEndpoint=Z5(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Y5.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case eu.connecting:return tu.Connecting;case eu.open:return tu.Open;case eu.closing:return tu.Closing;default:return tu.Closed}}isConnected(){return this.connectionState()===tu.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,i=this.getChannels().find(a=>a.topic===r);if(i)return i;{const a=new J5(`realtime:${t}`,n,this);return this.channels.push(a),a}}push(t){const{topic:n,event:r,payload:i,ref:a}=t,o=()=>{this.encode(t,l=>{var u;(u=this.conn)===null||u===void 0||u.send(l)})};this.log("push",`${n} ${r} (${a})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(HK,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},O0.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(d){this.log("error","error in heartbeat callback",d)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:a,ref:o}=n,l=o?`(${o})`:"",u=a.status||"";this.log("receive",`${u} ${r} ${i} ${l}`.trim(),a),this.channels.filter(d=>d._isMember(r)).forEach(d=>d._trigger(i,a,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){if(this.conn){if(this.conn.readyState===eu.open||this.conn.readyState===eu.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Ga.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${t}${r}${i}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([tW],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const i={access_token:n,version:UK};n&&r.updateJoinPayload(i),r.joinedOnce&&r._isJoined()&&r._push(Ga.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${t} callback`,i)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new W5(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},O0.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,i,a,o,l,u,d,h,p,b,y;switch(this.transport=(n=t?.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t?.timeout)!==null&&r!==void 0?r:Ok,this.heartbeatIntervalMs=(i=t?.heartbeatIntervalMs)!==null&&i!==void 0?i:O0.HEARTBEAT_INTERVAL,this.worker=(a=t?.worker)!==null&&a!==void 0?a:!1,this.accessToken=(o=t?.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=t?.heartbeatCallback)!==null&&l!==void 0?l:B_,this.vsn=(u=t?.vsn)!==null&&u!==void 0?u:sM,t?.params&&(this.params=t.params),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(d=t?.reconnectAfterMs)!==null&&d!==void 0?d:(S=>QK[S-1]||eW),this.vsn){case K5:this.encode=(h=t?.encode)!==null&&h!==void 0?h:((S,_)=>_(JSON.stringify(S))),this.decode=(p=t?.decode)!==null&&p!==void 0?p:((S,_)=>_(JSON.parse(S)));break;case FK:this.encode=(b=t?.encode)!==null&&b!==void 0?b:this.serializer.encode.bind(this.serializer),this.decode=(y=t?.decode)!==null&&y!==void 0?y:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t?.workerUrl}}};const rW=Object.freeze(Object.defineProperty({__proto__:null,REALTIME_CHANNEL_STATES:JK,get REALTIME_LISTEN_TYPES(){return zd},get REALTIME_POSTGRES_CHANGES_LISTEN_EVENT(){return Dk},get REALTIME_PRESENCE_LISTEN_EVENTS(){return Mk},get REALTIME_SUBSCRIBE_STATES(){return Ao},RealtimeChannel:J5,RealtimeClient:nW,RealtimePresence:X5,WebSocketFactory:Y5},Symbol.toStringTag,{value:"Module"})),eB=dp(rW);class pp extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function ln(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class tB extends pp{constructor(t,n,r){super(t),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Xb extends pp{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}const BE=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),iW=()=>Response,Pk=e=>{if(Array.isArray(e))return e.map(n=>Pk(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));t[i]=Pk(r)}),t},aW=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},oW=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e),z_=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},sW=(e,t,n)=>Ye(void 0,void 0,void 0,function*(){const r=yield iW();e instanceof r&&!n?.noResolveJson?e.json().then(i=>{const a=e.status||500,o=i?.statusCode||a+"";t(new tB(z_(i),a,o))}).catch(i=>{t(new Xb(z_(i),i))}):t(new Xb(z_(e),e))}),lW=(e,t,n,r)=>{const i={method:e,headers:t?.headers||{}};return e==="GET"||!r?i:(aW(r)?(i.headers=Object.assign({"Content-Type":"application/json"},t?.headers),i.body=JSON.stringify(r)):i.body=r,t?.duplex&&(i.duplex=t.duplex),Object.assign(Object.assign({},i),n))};function gp(e,t,n,r,i,a){return Ye(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(n,lW(t,r,i,a)).then(u=>{if(!u.ok)throw u;return r?.noResolveJson?u:u.json()}).then(u=>o(u)).catch(u=>sW(u,l,r))})})}function Pm(e,t,n,r){return Ye(this,void 0,void 0,function*(){return gp(e,"GET",t,n,r)})}function Ha(e,t,n,r,i){return Ye(this,void 0,void 0,function*(){return gp(e,"POST",t,r,i,n)})}function Rk(e,t,n,r,i){return Ye(this,void 0,void 0,function*(){return gp(e,"PUT",t,r,i,n)})}function cW(e,t,n,r){return Ye(this,void 0,void 0,function*(){return gp(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function zE(e,t,n,r,i){return Ye(this,void 0,void 0,function*(){return gp(e,"DELETE",t,r,i,n)})}class uW{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n}then(t,n){return this.execute().then(t,n)}execute(){return Ye(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ln(t))return{data:null,error:t};throw t}})}}var nB;class dW{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n,this[nB]="BlobDownloadBuilder",this.promise=null}asStream(){return new uW(this.downloadFn,this.shouldThrowOnError)}then(t,n){return this.getPromise().then(t,n)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return Ye(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ln(t))return{data:null,error:t};throw t}})}}nB=Symbol.toStringTag;const fW={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},cM={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class hW{constructor(t,n={},r,i){this.shouldThrowOnError=!1,this.url=t,this.headers=n,this.bucketId=r,this.fetch=BE(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,n,r,i){return Ye(this,void 0,void 0,function*(){try{let a;const o=Object.assign(Object.assign({},cM),i);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const u=o.metadata;typeof Blob<"u"&&r instanceof Blob?(a=new FormData,a.append("cacheControl",o.cacheControl),u&&a.append("metadata",this.encodeMetadata(u)),a.append("",r)):typeof FormData<"u"&&r instanceof FormData?(a=r,a.has("cacheControl")||a.append("cacheControl",o.cacheControl),u&&!a.has("metadata")&&a.append("metadata",this.encodeMetadata(u))):(a=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,u&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(u))),(typeof ReadableStream<"u"&&a instanceof ReadableStream||a&&typeof a=="object"&&"pipe"in a&&typeof a.pipe=="function")&&!o.duplex&&(o.duplex="half")),i?.headers&&(l=Object.assign(Object.assign({},l),i.headers));const d=this._removeEmptyFolders(n),h=this._getFinalPath(d),p=yield(t=="PUT"?Rk:Ha)(this.fetch,`${this.url}/object/${h}`,a,Object.assign({headers:l},o?.duplex?{duplex:o.duplex}:{}));return{data:{path:d,id:p.Id,fullPath:p.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ln(a))return{data:null,error:a};throw a}})}upload(t,n,r){return Ye(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,i){return Ye(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(t),o=this._getFinalPath(a),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",n);try{let u;const d=Object.assign({upsert:cM.upsert},i),h=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&r instanceof Blob?(u=new FormData,u.append("cacheControl",d.cacheControl),u.append("",r)):typeof FormData<"u"&&r instanceof FormData?(u=r,u.append("cacheControl",d.cacheControl)):(u=r,h["cache-control"]=`max-age=${d.cacheControl}`,h["content-type"]=d.contentType);const p=yield Rk(this.fetch,l.toString(),u,{headers:h});return{data:{path:a,fullPath:p.Key},error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(ln(u))return{data:null,error:u};throw u}})}createSignedUploadUrl(t,n){return Ye(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const i=Object.assign({},this.headers);n?.upsert&&(i["x-upsert"]="true");const a=yield Ha(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),o=new URL(this.url+a.url),l=o.searchParams.get("token");if(!l)throw new pp("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ln(r))return{data:null,error:r};throw r}})}update(t,n,r){return Ye(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return Ye(this,void 0,void 0,function*(){try{return{data:yield Ha(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r?.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ln(i))return{data:null,error:i};throw i}})}copy(t,n,r){return Ye(this,void 0,void 0,function*(){try{return{data:{path:(yield Ha(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ln(i))return{data:null,error:i};throw i}})}createSignedUrl(t,n,r){return Ye(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t),a=yield Ha(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},r?.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r?.download?`&download=${r.download===!0?"":r.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${o}`)},{data:a,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ln(i))return{data:null,error:i};throw i}})}createSignedUrls(t,n,r){return Ye(this,void 0,void 0,function*(){try{const i=yield Ha(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),a=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${a}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ln(i))return{data:null,error:i};throw i}})}download(t,n){const i=typeof n?.transform<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString(n?.transform||{}),o=a?`?${a}`:"",l=this._getFinalPath(t),u=()=>Pm(this.fetch,`${this.url}/${i}/${l}${o}`,{headers:this.headers,noResolveJson:!0});return new dW(u,this.shouldThrowOnError)}info(t){return Ye(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield Pm(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Pk(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ln(r))return{data:null,error:r};throw r}})}exists(t){return Ye(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield cW(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ln(r)&&r instanceof Xb){const i=r.originalError;if([400,404].includes(i?.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),i=[],a=n?.download?`download=${n.download===!0?"":n.download}`:"";a!==""&&i.push(a);const l=typeof n?.transform<"u"?"render/image":"object",u=this.transformOptsToQueryString(n?.transform||{});u!==""&&i.push(u);let d=i.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${d}`)}}}remove(t){return Ye(this,void 0,void 0,function*(){try{return{data:yield zE(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ln(n))return{data:null,error:n};throw n}})}list(t,n,r){return Ye(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},fW),n),{prefix:t||""});return{data:yield Ha(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ln(i))return{data:null,error:i};throw i}})}listV2(t,n){return Ye(this,void 0,void 0,function*(){try{const r=Object.assign({},t);return{data:yield Ha(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ln(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const rB="2.86.2",iB={"X-Client-Info":`storage-js/${rB}`};class mW{constructor(t,n={},r,i){this.shouldThrowOnError=!1;const a=new URL(t);i?.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},iB),n),this.fetch=BE(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(t){return Ye(this,void 0,void 0,function*(){try{const n=this.listBucketOptionsToQueryString(t);return{data:yield Pm(this.fetch,`${this.url}/bucket${n}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ln(n))return{data:null,error:n};throw n}})}getBucket(t){return Ye(this,void 0,void 0,function*(){try{return{data:yield Pm(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ln(n))return{data:null,error:n};throw n}})}createBucket(t){return Ye(this,arguments,void 0,function*(n,r={public:!1}){try{return{data:yield Ha(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ln(i))return{data:null,error:i};throw i}})}updateBucket(t,n){return Ye(this,void 0,void 0,function*(){try{return{data:yield Rk(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ln(r))return{data:null,error:r};throw r}})}emptyBucket(t){return Ye(this,void 0,void 0,function*(){try{return{data:yield Ha(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ln(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Ye(this,void 0,void 0,function*(){try{return{data:yield zE(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ln(n))return{data:null,error:n};throw n}})}listBucketOptionsToQueryString(t){const n={};return t&&("limit"in t&&(n.limit=String(t.limit)),"offset"in t&&(n.offset=String(t.offset)),t.search&&(n.search=t.search),t.sortColumn&&(n.sortColumn=t.sortColumn),t.sortOrder&&(n.sortOrder=t.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}}var Rm=class extends Error{constructor(e,t){super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&t.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function pW(e,t,n){const r=new URL(t,e);if(n)for(const[i,a]of Object.entries(n))a!==void 0&&r.searchParams.set(i,a);return r.toString()}async function gW(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function bW(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:i,body:a,headers:o}){const l=pW(e.baseUrl,r,i),u=await gW(e.auth),d=await t(l,{method:n,headers:{...a?{"Content-Type":"application/json"}:{},...u,...o},body:a?JSON.stringify(a):void 0}),h=await d.text(),p=(d.headers.get("content-type")||"").includes("application/json"),b=p&&h?JSON.parse(h):h;if(!d.ok){const y=p?b:void 0,S=y?.error;throw new Rm(S?.message??`Request failed with status ${d.status}`,{status:d.status,icebergType:S?.type,icebergCode:S?.code,details:y})}return{status:d.status,headers:d.headers,data:b}}}}function N0(e){return e.join("")}var yW=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:N0(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(e,t){const n={namespace:e.namespace,properties:t?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${N0(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${N0(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${N0(e.namespace)}`}),!0}catch(t){if(t instanceof Rm&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(n){if(n instanceof Rm&&n.status===409)return;throw n}}};function pd(e){return e.join("")}var vW=class{constructor(e,t="",n){this.client=e,this.prefix=t,this.accessDelegation=n}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${pd(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${pd(e.namespace)}/tables`,body:t,headers:n})).data.metadata}async updateTable(e,t){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${pd(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${pd(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String(t?.purge??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${pd(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${pd(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(n){if(n instanceof Rm&&n.status===404)return!1;throw n}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(n){if(n instanceof Rm&&n.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw n}}},xW=class{constructor(e){let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const n=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=bW({baseUrl:n,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=e.accessDelegation?.join(","),this.namespaceOps=new yW(this.client,t),this.tableOps=new vW(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}};class aB{constructor(t,n={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},iB),n),this.fetch=BE(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return Ye(this,void 0,void 0,function*(){try{return{data:yield Ha(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ln(n))return{data:null,error:n};throw n}})}listBuckets(t){return Ye(this,void 0,void 0,function*(){try{const n=new URLSearchParams;t?.limit!==void 0&&n.set("limit",t.limit.toString()),t?.offset!==void 0&&n.set("offset",t.offset.toString()),t?.sortColumn&&n.set("sortColumn",t.sortColumn),t?.sortOrder&&n.set("sortOrder",t.sortOrder),t?.search&&n.set("search",t.search);const r=n.toString(),i=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`;return{data:yield Pm(this.fetch,i,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ln(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Ye(this,void 0,void 0,function*(){try{return{data:yield zE(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ln(n))return{data:null,error:n};throw n}})}from(t){if(!oW(t))throw new pp("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");return new xW({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:()=>Ye(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch})}}const UE={"X-Client-Info":`storage-js/${rB}`,"Content-Type":"application/json"};class FE extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function bi(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}class Nb extends FE{constructor(t,n,r){super(t),this.name="StorageVectorsApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class oB extends FE{constructor(t,n){super(t),this.name="StorageVectorsUnknownError",this.originalError=n}}var Lk;(function(e){e.InternalError="InternalError",e.S3VectorConflictException="S3VectorConflictException",e.S3VectorNotFoundException="S3VectorNotFoundException",e.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",e.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",e.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(Lk||(Lk={}));const Tv=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),wW=()=>Response,sB=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},_W=e=>Array.from(new Float32Array(e)),SW=(e,t)=>{if(t!==void 0&&e.float32.length!==t)throw new Error(`Vector dimension mismatch: expected ${t}, got ${e.float32.length}`)},uM=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),kW=(e,t,n)=>Ye(void 0,void 0,void 0,function*(){if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!n?.noResolveJson){const i=e.status||500,a=e;if(typeof a.json=="function")a.json().then(o=>{const l=o?.statusCode||o?.code||i+"";t(new Nb(uM(o),i,l))}).catch(()=>{const o=i+"",l=a.statusText||`HTTP ${i} error`;t(new Nb(l,i,o))});else{const o=i+"",l=a.statusText||`HTTP ${i} error`;t(new Nb(l,i,o))}}else t(new oB(uM(e),e))}),EW=(e,t,n,r)=>{const i={method:e,headers:t?.headers||{}};return r?(sB(r)?(i.headers=Object.assign({"Content-Type":"application/json"},t?.headers),i.body=JSON.stringify(r)):i.body=r,Object.assign(Object.assign({},i),n)):i};function TW(e,t,n,r,i,a){return Ye(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(n,EW(t,r,i,a)).then(u=>{if(!u.ok)throw u;if(r?.noResolveJson)return u;const d=u.headers.get("content-type");return!d||!d.includes("application/json")?{}:u.json()}).then(u=>o(u)).catch(u=>kW(u,l,r))})})}function Bi(e,t,n,r,i){return Ye(this,void 0,void 0,function*(){return TW(e,"POST",t,r,i,n)})}class lB{constructor(t,n={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},UE),n),this.fetch=Tv(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return Ye(this,void 0,void 0,function*(){try{return{data:(yield Bi(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(bi(n))return{data:null,error:n};throw n}})}getIndex(t,n){return Ye(this,void 0,void 0,function*(){try{return{data:yield Bi(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:n},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(bi(r))return{data:null,error:r};throw r}})}listIndexes(t){return Ye(this,void 0,void 0,function*(){try{return{data:yield Bi(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(bi(n))return{data:null,error:n};throw n}})}deleteIndex(t,n){return Ye(this,void 0,void 0,function*(){try{return{data:(yield Bi(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:n},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(bi(r))return{data:null,error:r};throw r}})}}class cB{constructor(t,n={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},UE),n),this.fetch=Tv(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return Ye(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Bi(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(bi(n))return{data:null,error:n};throw n}})}getVectors(t){return Ye(this,void 0,void 0,function*(){try{return{data:yield Bi(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(bi(n))return{data:null,error:n};throw n}})}listVectors(t){return Ye(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield Bi(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(bi(n))return{data:null,error:n};throw n}})}queryVectors(t){return Ye(this,void 0,void 0,function*(){try{return{data:yield Bi(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(bi(n))return{data:null,error:n};throw n}})}deleteVectors(t){return Ye(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Bi(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(bi(n))return{data:null,error:n};throw n}})}}class uB{constructor(t,n={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},UE),n),this.fetch=Tv(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return Ye(this,void 0,void 0,function*(){try{return{data:(yield Bi(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(bi(n))return{data:null,error:n};throw n}})}getBucket(t){return Ye(this,void 0,void 0,function*(){try{return{data:yield Bi(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(bi(n))return{data:null,error:n};throw n}})}listBuckets(){return Ye(this,arguments,void 0,function*(t={}){try{return{data:yield Bi(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(bi(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Ye(this,void 0,void 0,function*(){try{return{data:(yield Bi(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(bi(n))return{data:null,error:n};throw n}})}}class dB extends uB{constructor(t,n={}){super(t,n.headers||{},n.fetch)}from(t){return new fB(this.url,this.headers,t,this.fetch)}createBucket(t){const n=Object.create(null,{createBucket:{get:()=>super.createBucket}});return Ye(this,void 0,void 0,function*(){return n.createBucket.call(this,t)})}getBucket(t){const n=Object.create(null,{getBucket:{get:()=>super.getBucket}});return Ye(this,void 0,void 0,function*(){return n.getBucket.call(this,t)})}listBuckets(){const t=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return Ye(this,arguments,void 0,function*(n={}){return t.listBuckets.call(this,n)})}deleteBucket(t){const n=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return Ye(this,void 0,void 0,function*(){return n.deleteBucket.call(this,t)})}}class fB extends lB{constructor(t,n,r,i){super(t,n,i),this.vectorBucketName=r}createIndex(t){const n=Object.create(null,{createIndex:{get:()=>super.createIndex}});return Ye(this,void 0,void 0,function*(){return n.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return Ye(this,arguments,void 0,function*(n={}){return t.listIndexes.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){const n=Object.create(null,{getIndex:{get:()=>super.getIndex}});return Ye(this,void 0,void 0,function*(){return n.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){const n=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return Ye(this,void 0,void 0,function*(){return n.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new hB(this.url,this.headers,this.vectorBucketName,t,this.fetch)}}class hB extends cB{constructor(t,n,r,i,a){super(t,n,a),this.vectorBucketName=r,this.indexName=i}putVectors(t){const n=Object.create(null,{putVectors:{get:()=>super.putVectors}});return Ye(this,void 0,void 0,function*(){return n.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){const n=Object.create(null,{getVectors:{get:()=>super.getVectors}});return Ye(this,void 0,void 0,function*(){return n.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return Ye(this,arguments,void 0,function*(n={}){return t.listVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){const n=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return Ye(this,void 0,void 0,function*(){return n.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){const n=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return Ye(this,void 0,void 0,function*(){return n.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class AW extends mW{constructor(t,n={},r,i){super(t,n,r,i)}from(t){return new hW(this.url,this.headers,t,this.fetch)}get vectors(){return new dB(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new aB(this.url+"/iceberg",this.headers,this.fetch)}}const jW=Object.freeze(Object.defineProperty({__proto__:null,StorageAnalyticsClient:aB,StorageApiError:tB,StorageClient:AW,StorageError:pp,StorageUnknownError:Xb,StorageVectorsApiError:Nb,StorageVectorsClient:dB,StorageVectorsError:FE,get StorageVectorsErrorCode(){return Lk},StorageVectorsUnknownError:oB,VectorBucketApi:uB,VectorBucketScope:fB,VectorDataApi:cB,VectorIndexApi:lB,VectorIndexScope:hB,isPlainObject:sB,isStorageError:ln,isStorageVectorsError:bi,normalizeToFloat32:_W,resolveFetch:Tv,resolveResponse:wW,validateVectorDimension:SW},Symbol.toStringTag,{value:"Module"})),OW=dp(jW);var U_={},Hh={},dM;function NW(){return dM||(dM=1,Object.defineProperty(Hh,"__esModule",{value:!0}),Hh.version=void 0,Hh.version="2.86.2"),Hh}var fM;function CW(){return fM||(fM=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_REALTIME_OPTIONS=e.DEFAULT_AUTH_OPTIONS=e.DEFAULT_DB_OPTIONS=e.DEFAULT_GLOBAL_OPTIONS=e.DEFAULT_HEADERS=void 0;const t=NW();let n="";typeof Deno<"u"?n="deno":typeof document<"u"?n="web":typeof navigator<"u"&&navigator.product==="ReactNative"?n="react-native":n="node",e.DEFAULT_HEADERS={"X-Client-Info":`supabase-js-${n}/${t.version}`},e.DEFAULT_GLOBAL_OPTIONS={headers:e.DEFAULT_HEADERS},e.DEFAULT_DB_OPTIONS={schema:"public"},e.DEFAULT_AUTH_OPTIONS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},e.DEFAULT_REALTIME_OPTIONS={}})(U_)),U_}var F_={},hM;function MW(){return hM||(hM=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.fetchWithAuth=e.resolveHeadersConstructor=e.resolveFetch=void 0;const t=i=>i?(...a)=>i(...a):(...a)=>fetch(...a);e.resolveFetch=t;const n=()=>Headers;e.resolveHeadersConstructor=n;const r=(i,a,o)=>{const l=(0,e.resolveFetch)(o),u=(0,e.resolveHeadersConstructor)();return async(d,h)=>{var p;const b=(p=await a())!==null&&p!==void 0?p:i;let y=new u(h?.headers);return y.has("apikey")||y.set("apikey",i),y.has("Authorization")||y.set("Authorization",`Bearer ${b}`),l(d,Object.assign(Object.assign({},h),{headers:y}))}};e.fetchWithAuth=r})(F_)),F_}var bs={},mM;function DW(){if(mM)return bs;mM=1,Object.defineProperty(bs,"__esModule",{value:!0}),bs.isBrowser=void 0,bs.uuid=e,bs.ensureTrailingSlash=t,bs.applySettingDefaults=r,bs.validateSupabaseUrl=i;function e(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var o=Math.random()*16|0,l=a=="x"?o:o&3|8;return l.toString(16)})}function t(a){return a.endsWith("/")?a:a+"/"}const n=()=>typeof window<"u";bs.isBrowser=n;function r(a,o){var l,u;const{db:d,auth:h,realtime:p,global:b}=a,{db:y,auth:S,realtime:_,global:k}=o,A={db:Object.assign(Object.assign({},y),d),auth:Object.assign(Object.assign({},S),h),realtime:Object.assign(Object.assign({},_),p),storage:{},global:Object.assign(Object.assign(Object.assign({},k),b),{headers:Object.assign(Object.assign({},(l=k?.headers)!==null&&l!==void 0?l:{}),(u=b?.headers)!==null&&u!==void 0?u:{})}),accessToken:async()=>""};return a.accessToken?A.accessToken=a.accessToken:delete A.accessToken,A}function i(a){const o=a?.trim();if(!o)throw new Error("supabaseUrl is required.");if(!o.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(t(o))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}return bs}var Gh={};const mB="2.86.2",Od=30*1e3,Ik=3,H_=Ik*Od,PW="http://localhost:9999",RW="supabase.auth.token",LW={"X-Client-Info":`gotrue-js/${mB}`},$k="X-Supabase-Api-Version",pB={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},IW=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,$W=600*1e3;let Zd=class extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}};function Ve(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}let gB=class extends Zd{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}};function bB(e){return Ve(e)&&e.name==="AuthApiError"}let Pl=class extends Zd{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}},$s=class extends Zd{constructor(t,n,r,i){super(t,r,i),this.name=n,this.status=r}},hi=class extends $s{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function yB(e){return Ve(e)&&e.name==="AuthSessionMissingError"}let Yc=class extends $s{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},gm=class extends $s{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}},bm=class extends $s{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function vB(e){return Ve(e)&&e.name==="AuthImplicitGrantRedirectError"}let Bk=class extends $s{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},Jb=class extends $s{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}};function Cb(e){return Ve(e)&&e.name==="AuthRetryableFetchError"}let zk=class extends $s{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}};function BW(e){return Ve(e)&&e.name==="AuthWeakPasswordError"}let Qb=class extends $s{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}};const ey="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),pM=` 	
\r=`.split(""),zW=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<pM.length;t+=1)e[pM[t].charCodeAt(0)]=-2;for(let t=0;t<ey.length;t+=1)e[ey[t].charCodeAt(0)]=t;return e})();function gM(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(ey[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(ey[r]),t.queuedBits-=6}}function xB(e,t,n){const r=zW[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function bM(e){const t=[],n=o=>{t.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},a=o=>{HW(o,r,n)};for(let o=0;o<e.length;o+=1)xB(e.charCodeAt(o),i,a);return t.join("")}function UW(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function FW(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}UW(r,t)}}function HW(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if((e>>7-r&1)===0){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function Ud(e){const t=[],n={queue:0,queuedBits:0},r=i=>{t.push(i)};for(let i=0;i<e.length;i+=1)xB(e.charCodeAt(i),n,r);return new Uint8Array(t)}function GW(e){const t=[];return FW(e,n=>t.push(n)),new Uint8Array(t)}function iu(e){const t=[],n={queue:0,queuedBits:0},r=i=>{t.push(i)};return e.forEach(i=>gM(i,n,r)),gM(null,n,r),t.join("")}function qW(e){return Math.round(Date.now()/1e3)+e}function YW(){return Symbol("auth-callback")}const kr=()=>typeof window<"u"&&typeof document<"u",Ic={tested:!1,writable:!1},wB=()=>{if(!kr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ic.tested)return Ic.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Ic.tested=!0,Ic.writable=!0}catch{Ic.tested=!0,Ic.writable=!1}return Ic.writable};function KW(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,a)=>{t[a]=i})}catch{}return n.searchParams.forEach((r,i)=>{t[i]=r}),t}const _B=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),WW=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Nd=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},$c=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},_r=async(e,t)=>{await e.removeItem(t)};class Av{constructor(){this.promise=new Av.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}Av.promiseConstructor=Promise;function G_(e){const t=e.split(".");if(t.length!==3)throw new Qb("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!IW.test(t[r]))throw new Qb("JWT not in base64url format");return{header:JSON.parse(bM(t[0])),payload:JSON.parse(bM(t[1])),signature:Ud(t[2]),raw:{header:t[0],payload:t[1]}}}async function VW(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function ZW(e,t){return new Promise((r,i)=>{(async()=>{for(let a=0;a<1/0;a++)try{const o=await e(a);if(!t(a,null,o)){r(o);return}}catch(o){if(!t(a,o)){i(o);return}}})()})}function XW(e){return("0"+e.toString(16)).substr(-2)}function JW(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let a=0;a<56;a++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(t),Array.from(t,XW).join("")}async function QW(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(a=>String.fromCharCode(a)).join("")}async function eV(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await QW(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function gd(e,t,n=!1){const r=JW();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await Nd(e,`${t}-code-verifier`,i);const a=await eV(r);return[a,r===a?"plain":"s256"]}const tV=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function nV(e){const t=e.headers.get($k);if(!t||!t.match(tV))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function rV(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function iV(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const aV=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function bd(e){if(!aV.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function q_(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function oV(e,t){return new Proxy(e,{get:(n,r,i)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const a=r.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)"||a==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,i)}return!t.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(n,r,i)}})}function yM(e){return JSON.parse(JSON.stringify(e))}const Kc=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),sV=[502,503,504];async function vM(e){var t;if(!WW(e))throw new Jb(Kc(e),0);if(sV.includes(e.status))throw new Jb(Kc(e),e.status);let n;try{n=await e.json()}catch(a){throw new Pl(Kc(a),a)}let r;const i=nV(e);if(i&&i.getTime()>=pB["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new zk(Kc(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new hi}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((a,o)=>a&&typeof o=="string",!0))throw new zk(Kc(n),e.status,n.weak_password.reasons);throw new gB(Kc(n),e.status||500,r)}const lV=(e,t,n,r)=>{const i={method:e,headers:t?.headers||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function at(e,t,n,r){var i;const a=Object.assign({},r?.headers);a[$k]||(a[$k]=pB["2024-01-01"].name),r?.jwt&&(a.Authorization=`Bearer ${r.jwt}`);const o=(i=r?.query)!==null&&i!==void 0?i:{};r?.redirectTo&&(o.redirect_to=r.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",u=await cV(e,t,n+l,{headers:a,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(u):{data:Object.assign({},u),error:null}}async function cV(e,t,n,r,i,a){const o=lV(t,r,i,a);let l;try{l=await e(n,Object.assign({},o))}catch(u){throw console.error(u),new Jb(Kc(u),0)}if(l.ok||await vM(l),r?.noResolveJson)return l;try{return await l.json()}catch(u){await vM(u)}}function Fa(e){var t;let n=null;fV(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=qW(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function xM(e){const t=Fa(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Rl(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function uV(e){return{data:e,error:null}}function dV(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:a}=e,o=bf(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:a},u=Object.assign({},o);return{data:{properties:l,user:u},error:null}}function wM(e){return e}function fV(e){return e.access_token&&e.refresh_token&&e.expires_in}const Mb=["global","local","others"];let HE=class{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=_B(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=Mb[0]){if(Mb.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Mb.join(", ")}`);try{return await at(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Ve(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await at(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Rl})}catch(r){if(Ve(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=bf(t,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r?.newEmail,delete i.newEmail),await at(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:dV,redirectTo:n?.redirectTo})}catch(n){if(Ve(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await at(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Rl})}catch(n){if(Ve(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,i,a,o,l,u;try{const d={nextPage:null,lastPage:0,total:0},h=await at(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t?.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(a=(i=t?.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:wM});if(h.error)throw h.error;const p=await h.json(),b=(o=h.headers.get("x-total-count"))!==null&&o!==void 0?o:0,y=(u=(l=h.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&u!==void 0?u:[];return y.length>0&&(y.forEach(S=>{const _=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(S.split(";")[1].split("=")[1]);d[`${k}Page`]=_}),d.total=parseInt(b)),{data:Object.assign(Object.assign({},p),d),error:null}}catch(d){if(Ve(d))return{data:{users:[]},error:d};throw d}}async getUserById(t){bd(t);try{return await at(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Rl})}catch(n){if(Ve(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){bd(t);try{return await at(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Rl})}catch(r){if(Ve(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){bd(t);try{return await at(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Rl})}catch(r){if(Ve(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){bd(t.userId);try{const{data:n,error:r}=await at(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(Ve(n))return{data:null,error:n};throw n}}async _deleteFactor(t){bd(t.userId),bd(t.id);try{return{data:await at(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(Ve(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,r,i,a,o,l,u;try{const d={nextPage:null,lastPage:0,total:0},h=await at(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t?.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(a=(i=t?.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:wM});if(h.error)throw h.error;const p=await h.json(),b=(o=h.headers.get("x-total-count"))!==null&&o!==void 0?o:0,y=(u=(l=h.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&u!==void 0?u:[];return y.length>0&&(y.forEach(S=>{const _=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(S.split(";")[1].split("=")[1]);d[`${k}Page`]=_}),d.total=parseInt(b)),{data:Object.assign(Object.assign({},p),d),error:null}}catch(d){if(Ve(d))return{data:{clients:[]},error:d};throw d}}async _createOAuthClient(t){try{return await at(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ve(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await at(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ve(n))return{data:null,error:n};throw n}}async _updateOAuthClient(t,n){try{return await at(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Ve(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(t){try{return await at(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Ve(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await at(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ve(n))return{data:null,error:n};throw n}}};function _M(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const Wc={debug:!!(globalThis&&wB()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class GE extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}let SB=class extends GE{};class hV extends GE{}async function kB(e,t,n){Wc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),Wc.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){Wc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,i.name);try{return await n()}finally{Wc.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,i.name)}}else{if(t===0)throw Wc.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new SB(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Wc.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}const SM={};async function mV(e,t,n){var r;const i=(r=SM[e])!==null&&r!==void 0?r:Promise.resolve(),a=Promise.race([i.catch(()=>null),t>=0?new Promise((o,l)=>{setTimeout(()=>{l(new hV(`Acquring process lock with name "${e}" timed out`))},t)}):null].filter(o=>o)).catch(o=>{if(o&&o.isAcquireTimeout)throw o;return null}).then(async()=>await n());return SM[e]=a.catch(async o=>{if(o&&o.isAcquireTimeout)return await i,null;throw o}),await a}function pV(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function EB(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function gV(e){return parseInt(e,16)}function bV(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,r=>r.toString(16).padStart(2,"0")).join("")}function yV(e){var t;const{chainId:n,domain:r,expirationTime:i,issuedAt:a=new Date,nonce:o,notBefore:l,requestId:u,resources:d,scheme:h,uri:p,version:b}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!p)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(b!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${b}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const y=EB(e.address),S=h?`${h}://${r}`:r,_=e.statement?`${e.statement}
`:"",k=`${S} wants you to sign in with your Ethereum account:
${y}

${_}`;let A=`URI: ${p}
Version: ${b}
Chain ID: ${n}${o?`
Nonce: ${o}`:""}
Issued At: ${a.toISOString()}`;if(i&&(A+=`
Expiration Time: ${i.toISOString()}`),l&&(A+=`
Not Before: ${l.toISOString()}`),u&&(A+=`
Request ID: ${u}`),d){let N=`
Resources:`;for(const j of d){if(!j||typeof j!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${j}`);N+=`
- ${j}`}A+=N}return`${k}
${A}`}class Fn extends Error{constructor({message:t,code:n,cause:r,name:i}){var a;super(t,{cause:r}),this.__isWebAuthnError=!0,this.name=(a=i??(r instanceof Error?r.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=n}}class ty extends Fn{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}}function vV({error:e,options:t}){var n,r,i;const{publicKey:a}=t;if(!a)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Fn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=a.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Fn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((r=a.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Fn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((i=a.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Fn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new Fn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new Fn({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return a.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new Fn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Fn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const o=window.location.hostname;if(TB(o)){if(a.rp.id!==o)return new Fn({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Fn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new Fn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new Fn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Fn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function xV({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Fn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new Fn({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const r=window.location.hostname;if(TB(r)){if(n.rpId!==r)return new Fn({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Fn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new Fn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Fn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class wV{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const _V=new wV;function SV(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:r}=e,i=bf(e,["challenge","user","excludeCredentials"]),a=Ud(t).buffer,o=Object.assign(Object.assign({},n),{id:Ud(n.id).buffer}),l=Object.assign(Object.assign({},i),{challenge:a,user:o});if(r&&r.length>0){l.excludeCredentials=new Array(r.length);for(let u=0;u<r.length;u++){const d=r[u];l.excludeCredentials[u]=Object.assign(Object.assign({},d),{id:Ud(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return l}function kV(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,r=bf(e,["challenge","allowCredentials"]),i=Ud(t).buffer,a=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){a.allowCredentials=new Array(n.length);for(let o=0;o<n.length;o++){const l=n[o];a.allowCredentials[o]=Object.assign(Object.assign({},l),{id:Ud(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return a}function EV(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:iu(new Uint8Array(e.response.attestationObject)),clientDataJSON:iu(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function TV(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e,r=e.getClientExtensionResults(),i=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:iu(new Uint8Array(i.authenticatorData)),clientDataJSON:iu(new Uint8Array(i.clientDataJSON)),signature:iu(new Uint8Array(i.signature)),userHandle:i.userHandle?iu(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function TB(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function kM(){var e,t;return!!(kr()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.get)=="function")}async function AV(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new ty("Browser returned unexpected credential type",t)}:{data:null,error:new ty("Empty credential response",t)}}catch(t){return{data:null,error:vV({error:t,options:e})}}}async function jV(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new ty("Browser returned unexpected credential type",t)}:{data:null,error:new ty("Empty credential response",t)}}catch(t){return{data:null,error:xV({error:t,options:e})}}}const OV={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},NV={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function ny(...e){const t=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of e)if(i)for(const a in i){const o=i[a];if(o!==void 0)if(Array.isArray(o))r[a]=o;else if(n(o))r[a]=o;else if(t(o)){const l=r[a];t(l)?r[a]=ny(l,o):r[a]=ny(o)}else r[a]=o}return r}function CV(e,t){return ny(OV,e,t||{})}function MV(e,t){return ny(NV,e,t||{})}class DV{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:r,signal:i},a){try{const{data:o,error:l}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!o)return{data:null,error:l};const u=i??_V.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:d}=o.webauthn.credential_options.publicKey;d.name||(d.name=`${d.id}:${r}`),d.displayName||(d.displayName=d.name)}switch(o.webauthn.type){case"create":{const d=CV(o.webauthn.credential_options.publicKey,a?.create),{data:h,error:p}=await AV({publicKey:d,signal:u});return h?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:h}},error:null}:{data:null,error:p}}case"request":{const d=MV(o.webauthn.credential_options.publicKey,a?.request),{data:h,error:p}=await jV(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:d,signal:u}));return h?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:h}},error:null}:{data:null,error:p}}}}catch(o){return Ve(o)?{data:null,error:o}:{data:null,error:new Pl("Unexpected error in challenge",o)}}}async _verify({challengeId:t,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:r})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},a){if(!n)return{data:null,error:new Zd("rpId is required for WebAuthn authentication")};try{if(!kM())return{data:null,error:new Pl("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:r},signal:i},{request:a});if(!o)return{data:null,error:l};const{webauthn:u}=o;return this._verify({factorId:t,challengeId:o.challengeId,webauthn:{type:u.type,rpId:n,rpOrigins:r,credential_response:u.credential_response}})}catch(o){return Ve(o)?{data:null,error:o}:{data:null,error:new Pl("Unexpected error in authenticate",o)}}}async _register({friendlyName:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},a){if(!n)return{data:null,error:new Zd("rpId is required for WebAuthn registration")};try{if(!kM())return{data:null,error:new Pl("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this._enroll({friendlyName:t});if(!o)return await this.client.mfa.listFactors().then(h=>{var p;return(p=h.data)===null||p===void 0?void 0:p.all.find(b=>b.factor_type==="webauthn"&&b.friendly_name===t&&b.status!=="unverified")}).then(h=>h?this.client.mfa.unenroll({factorId:h?.id}):void 0),{data:null,error:l};const{data:u,error:d}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:i},{create:a});return u?this._verify({factorId:o.id,challengeId:u.challengeId,webauthn:{rpId:n,rpOrigins:r,type:u.webauthn.type,credential_response:u.webauthn.credential_response}}):{data:null,error:d}}catch(o){return Ve(o)?{data:null,error:o}:{data:null,error:new Pl("Unexpected error in register",o)}}}}pV();const PV={url:PW,storageKey:RW,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:LW,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function EM(e,t,n){return await n()}const yd={};let qE=class Uk{get jwks(){var t,n;return(n=(t=yd[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){yd[this.storageKey]=Object.assign(Object.assign({},yd[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=yd[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){yd[this.storageKey]=Object.assign(Object.assign({},yd[this.storageKey]),{cachedAt:t})}constructor(t){var n,r,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const a=Object.assign(Object.assign({},PV),t);if(this.storageKey=a.storageKey,this.instanceID=(n=Uk.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,Uk.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.instanceID>0&&kr()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=a.persistSession,this.autoRefreshToken=a.autoRefreshToken,this.admin=new HE({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=_B(a.fetch),this.lock=a.lock||EM,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,this.throwOnError=a.throwOnError,a.lock?this.lock=a.lock:kr()&&(!((r=globalThis?.navigator)===null||r===void 0)&&r.locks)?this.lock=kB:this.lock=EM,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new DV(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:wB()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=_M(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=_M(this.memoryStorage)),kr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${mB}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let n={},r="none";if(kr()&&(n=KW(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),kr()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:a}=await this._getSessionFromURL(n,r);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),vB(a)){const u=(t=a.details)===null||t===void 0?void 0:t.code;if(u==="identity_already_exists"||u==="identity_not_found"||u==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:o,redirectType:l}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Ve(n)?this._returnResult({error:n}):this._returnResult({error:new Pl("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,i;try{const a=await at(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t?.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=t?.options)===null||i===void 0?void 0:i.captchaToken}},xform:Fa}),{data:o,error:l}=a;if(l||!o)return this._returnResult({data:{user:null,session:null},error:l});const u=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",u)),this._returnResult({data:{user:d,session:u},error:null})}catch(a){if(Ve(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signUp(t){var n,r,i;try{let a;if("email"in t){const{email:h,password:p,options:b}=t;let y=null,S=null;this.flowType==="pkce"&&([y,S]=await gd(this.storage,this.storageKey)),a=await at(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:b?.emailRedirectTo,body:{email:h,password:p,data:(n=b?.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:b?.captchaToken},code_challenge:y,code_challenge_method:S},xform:Fa})}else if("phone"in t){const{phone:h,password:p,options:b}=t;a=await at(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:p,data:(r=b?.data)!==null&&r!==void 0?r:{},channel:(i=b?.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:b?.captchaToken}},xform:Fa})}else throw new gm("You must provide either an email or phone number and a password");const{data:o,error:l}=a;if(l||!o)return await _r(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:l});const u=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",u)),this._returnResult({data:{user:d,session:u},error:null})}catch(a){if(await _r(this.storage,`${this.storageKey}-code-verifier`),Ve(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithPassword(t){try{let n;if("email"in t){const{email:a,password:o,options:l}=t;n=await at(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:o,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:xM})}else if("phone"in t){const{phone:a,password:o,options:l}=t;n=await at(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:o,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:xM})}else throw new gm("You must provide either an email or phone number and a password");const{data:r,error:i}=n;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!r||!r.session||!r.user){const a=new Yc;return this._returnResult({data:{user:null,session:null},error:a})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(Ve(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(t){var n,r,i,a;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=t.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(a=t.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,r,i,a,o,l,u,d,h,p,b;let y,S;if("message"in t)y=t.message,S=t.signature;else{const{chain:_,wallet:k,statement:A,options:N}=t;let j;if(kr())if(typeof k=="object")j=k;else{const Y=window;if("ethereum"in Y&&typeof Y.ethereum=="object"&&"request"in Y.ethereum&&typeof Y.ethereum.request=="function")j=Y.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof k!="object"||!N?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=k}const C=new URL((n=N?.url)!==null&&n!==void 0?n:window.location.href),D=await j.request({method:"eth_requestAccounts"}).then(Y=>Y).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!D||D.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const P=EB(D[0]);let $=(r=N?.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!$){const Y=await j.request({method:"eth_chainId"});$=gV(Y)}const U={domain:C.host,address:P,statement:A,uri:C.href,version:"1",chainId:$,nonce:(i=N?.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(o=(a=N?.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(l=N?.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(u=N?.signInWithEthereum)===null||u===void 0?void 0:u.notBefore,requestId:(d=N?.signInWithEthereum)===null||d===void 0?void 0:d.requestId,resources:(h=N?.signInWithEthereum)===null||h===void 0?void 0:h.resources};y=yV(U),S=await j.request({method:"personal_sign",params:[bV(y),P]})}try{const{data:_,error:k}=await at(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:y,signature:S},!((p=t.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(b=t.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:Fa});if(k)throw k;if(!_||!_.session||!_.user){const A=new Yc;return this._returnResult({data:{user:null,session:null},error:A})}return _.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),this._returnResult({data:Object.assign({},_),error:k})}catch(_){if(Ve(_))return this._returnResult({data:{user:null,session:null},error:_});throw _}}async signInWithSolana(t){var n,r,i,a,o,l,u,d,h,p,b,y;let S,_;if("message"in t)S=t.message,_=t.signature;else{const{chain:k,wallet:A,statement:N,options:j}=t;let C;if(kr())if(typeof A=="object")C=A;else{const P=window;if("solana"in P&&typeof P.solana=="object"&&("signIn"in P.solana&&typeof P.solana.signIn=="function"||"signMessage"in P.solana&&typeof P.solana.signMessage=="function"))C=P.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof A!="object"||!j?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");C=A}const D=new URL((n=j?.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in C&&C.signIn){const P=await C.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},j?.signInWithSolana),{version:"1",domain:D.host,uri:D.href}),N?{statement:N}:null));let $;if(Array.isArray(P)&&P[0]&&typeof P[0]=="object")$=P[0];else if(P&&typeof P=="object"&&"signedMessage"in P&&"signature"in P)$=P;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in $&&"signature"in $&&(typeof $.signedMessage=="string"||$.signedMessage instanceof Uint8Array)&&$.signature instanceof Uint8Array)S=typeof $.signedMessage=="string"?$.signedMessage:new TextDecoder().decode($.signedMessage),_=$.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in C)||typeof C.signMessage!="function"||!("publicKey"in C)||typeof C!="object"||!C.publicKey||!("toBase58"in C.publicKey)||typeof C.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");S=[`${D.host} wants you to sign in with your Solana account:`,C.publicKey.toBase58(),...N?["",N,""]:[""],"Version: 1",`URI: ${D.href}`,`Issued At: ${(i=(r=j?.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((a=j?.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${j.signInWithSolana.notBefore}`]:[],...!((o=j?.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${j.signInWithSolana.expirationTime}`]:[],...!((l=j?.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${j.signInWithSolana.chainId}`]:[],...!((u=j?.signInWithSolana)===null||u===void 0)&&u.nonce?[`Nonce: ${j.signInWithSolana.nonce}`]:[],...!((d=j?.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${j.signInWithSolana.requestId}`]:[],...!((p=(h=j?.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||p===void 0)&&p.length?["Resources",...j.signInWithSolana.resources.map($=>`- ${$}`)]:[]].join(`
`);const P=await C.signMessage(new TextEncoder().encode(S),"utf8");if(!P||!(P instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");_=P}}try{const{data:k,error:A}=await at(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:S,signature:iu(_)},!((b=t.options)===null||b===void 0)&&b.captchaToken?{gotrue_meta_security:{captcha_token:(y=t.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:Fa});if(A)throw A;if(!k||!k.session||!k.user){const N=new Yc;return this._returnResult({data:{user:null,session:null},error:N})}return k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("SIGNED_IN",k.session)),this._returnResult({data:Object.assign({},k),error:A})}catch(k){if(Ve(k))return this._returnResult({data:{user:null,session:null},error:k});throw k}}async _exchangeCodeForSession(t){const n=await $c(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{const{data:a,error:o}=await at(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:Fa});if(await _r(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!a||!a.session||!a.user){const l=new Yc;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),this._returnResult({data:Object.assign(Object.assign({},a),{redirectType:i??null}),error:o})}catch(a){if(await _r(this.storage,`${this.storageKey}-code-verifier`),Ve(a))return this._returnResult({data:{user:null,session:null,redirectType:null},error:a});throw a}}async signInWithIdToken(t){try{const{options:n,provider:r,token:i,access_token:a,nonce:o}=t,l=await at(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:a,nonce:o,gotrue_meta_security:{captcha_token:n?.captchaToken}},xform:Fa}),{data:u,error:d}=l;if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!u||!u.session||!u.user){const h=new Yc;return this._returnResult({data:{user:null,session:null},error:h})}return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),this._returnResult({data:u,error:d})}catch(n){if(Ve(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(t){var n,r,i,a,o;try{if("email"in t){const{email:l,options:u}=t;let d=null,h=null;this.flowType==="pkce"&&([d,h]=await gd(this.storage,this.storageKey));const{error:p}=await at(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=u?.data)!==null&&n!==void 0?n:{},create_user:(r=u?.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:u?.captchaToken},code_challenge:d,code_challenge_method:h},redirectTo:u?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:p})}if("phone"in t){const{phone:l,options:u}=t,{data:d,error:h}=await at(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(i=u?.data)!==null&&i!==void 0?i:{},create_user:(a=u?.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:u?.captchaToken},channel:(o=u?.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:d?.message_id},error:h})}throw new gm("You must provide either an email or phone number.")}catch(l){if(await _r(this.storage,`${this.storageKey}-code-verifier`),Ve(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(t){var n,r;try{let i,a;"options"in t&&(i=(n=t.options)===null||n===void 0?void 0:n.redirectTo,a=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:l}=await at(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:a}}),redirectTo:i,xform:Fa});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const u=o.session,d=o.user;return u?.access_token&&(await this._saveSession(u),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",u)),this._returnResult({data:{user:d,session:u},error:null})}catch(i){if(Ve(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(t){var n,r,i,a,o;try{let l=null,u=null;this.flowType==="pkce"&&([l,u]=await gd(this.storage,this.storageKey));const d=await at(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=t?.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:u}),headers:this.headers,xform:uV});return!((a=d.data)===null||a===void 0)&&a.url&&kr()&&!(!((o=t.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(d.data.url),this._returnResult(d)}catch(l){if(await _r(this.storage,`${this.storageKey}-code-verifier`),Ve(l))return this._returnResult({data:null,error:l});throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new hi;const{error:i}=await at(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(t){if(Ve(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:i,options:a}=t,{error:o}=await at(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:a?.captchaToken}},redirectTo:a?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in t){const{phone:r,type:i,options:a}=t,{data:o,error:l}=await at(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:a?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o?.message_id},error:l})}throw new gm("You must provide either an email or phone number and a type")}catch(n){if(Ve(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await $c(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<H_:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const o=await $c(this.userStorage,this.storageKey+"-user");o?.user?t.user=o.user:t.user=q_()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};t.user=oV(t.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:i,error:a}=await this._callRefreshToken(t.refresh_token);return a?this._returnResult({data:{session:null},error:a}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const n=await this._acquireLock(-1,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(t){try{return t?await at(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Rl}):await this._useSession(async n=>{var r,i,a;const{data:o,error:l}=n;if(l)throw l;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new hi}:await at(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0,xform:Rl})})}catch(n){if(Ve(n))return yB(n)&&(await this._removeSession(),await _r(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:i,error:a}=r;if(a)throw a;if(!i.session)throw new hi;const o=i.session;let l=null,u=null;this.flowType==="pkce"&&t.email!=null&&([l,u]=await gd(this.storage,this.storageKey));const{data:d,error:h}=await at(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n?.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:u}),jwt:o.access_token,xform:Rl});if(h)throw h;return o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(r){if(await _r(this.storage,`${this.storageKey}-code-verifier`),Ve(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new hi;const n=Date.now()/1e3;let r=n,i=!0,a=null;const{payload:o}=G_(t.access_token);if(o.exp&&(r=o.exp,i=r<=n),i){const{data:l,error:u}=await this._callRefreshToken(t.refresh_token);if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!l)return{data:{user:null,session:null},error:null};a=l}else{const{data:l,error:u}=await this._getUser(t.access_token);if(u)throw u;a={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return this._returnResult({data:{user:a.user,session:a},error:null})}catch(n){if(Ve(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:o,error:l}=n;if(l)throw l;t=(r=o.session)!==null&&r!==void 0?r:void 0}if(!t?.refresh_token)throw new hi;const{data:i,error:a}=await this._callRefreshToken(t.refresh_token);return a?this._returnResult({data:{user:null,session:null},error:a}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(Ve(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(t,n){try{if(!kr())throw new bm("No browser detected.");if(t.error||t.error_description||t.error_code)throw new bm(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Bk("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new bm("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Bk("No code detected.");const{data:N,error:j}=await this._exchangeCodeForSession(t.code);if(j)throw j;const C=new URL(window.location.href);return C.searchParams.delete("code"),window.history.replaceState(window.history.state,"",C.toString()),{data:{session:N.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:a,refresh_token:o,expires_in:l,expires_at:u,token_type:d}=t;if(!a||!l||!o||!d)throw new bm("No session defined in URL");const h=Math.round(Date.now()/1e3),p=parseInt(l);let b=h+p;u&&(b=parseInt(u));const y=b-h;y*1e3<=Od&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${y}s, should have been closer to ${p}s`);const S=b-p;h-S>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",S,b,h):h-S<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",S,b,h);const{data:_,error:k}=await this._getUser(a);if(k)throw k;const A={provider_token:r,provider_refresh_token:i,access_token:a,expires_in:p,expires_at:b,refresh_token:o,token_type:d,user:_.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:A,redirectType:t.type},error:null})}catch(r){if(Ve(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await $c(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:a}=n;if(a)return this._returnResult({error:a});const o=(r=i.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(bB(l)&&(l.status===404||l.status===401||l.status===403)))return this._returnResult({error:l})}return t!=="others"&&(await this._removeSession(),await _r(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const n=YW(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,i;try{const{data:{session:a},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",t,"session",a)}catch(a){await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",a),console.error(a)}})}async resetPasswordForEmail(t,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await gd(this.storage,this.storageKey,!0));try{return await at(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(a){if(await _r(this.storage,`${this.storageKey}-code-verifier`),Ve(a))return this._returnResult({data:null,error:a});throw a}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(n){if(Ve(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var n;try{const{data:r,error:i}=await this._useSession(async a=>{var o,l,u,d,h;const{data:p,error:b}=a;if(b)throw b;const y=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(u=t.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:!0});return await at(this.fetch,"GET",y,{headers:this.headers,jwt:(h=(d=p.session)===null||d===void 0?void 0:d.access_token)!==null&&h!==void 0?h:void 0})});if(i)throw i;return kr()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r?.url),this._returnResult({data:{provider:t.provider,url:r?.url},error:null})}catch(r){if(Ve(r))return this._returnResult({data:{provider:t.provider,url:null},error:r});throw r}}async linkIdentityIdToken(t){return await this._useSession(async n=>{var r;try{const{error:i,data:{session:a}}=n;if(i)throw i;const{options:o,provider:l,token:u,access_token:d,nonce:h}=t,p=await at(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=a?.access_token)!==null&&r!==void 0?r:void 0,body:{provider:l,id_token:u,access_token:d,nonce:h,link_identity:!0,gotrue_meta_security:{captcha_token:o?.captchaToken}},xform:Fa}),{data:b,error:y}=p;return y?this._returnResult({data:{user:null,session:null},error:y}):!b||!b.session||!b.user?this._returnResult({data:{user:null,session:null},error:new Yc}):(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("USER_UPDATED",b.session)),this._returnResult({data:b,error:y}))}catch(i){if(await _r(this.storage,`${this.storageKey}-code-verifier`),Ve(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,i;const{data:a,error:o}=n;if(o)throw o;return await at(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(i=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(Ve(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await ZW(async i=>(i>0&&await VW(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await at(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Fa})),(i,a)=>{const o=200*Math.pow(2,i);return a&&Cb(a)&&Date.now()+o-r<Od})}catch(r){if(this._debug(n,"error",r),Ve(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),kr()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await $c(this.storage,this.storageKey);if(i&&this.userStorage){let o=await $c(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:i.user},await Nd(this.userStorage,this.storageKey+"-user",o)),i.user=(t=o?.user)!==null&&t!==void 0?t:q_()}else if(i&&!i.user&&!i.user){const o=await $c(this.storage,this.storageKey+"-user");o&&o?.user?(i.user=o.user,await _r(this.storage,this.storageKey+"-user"),await Nd(this.storage,this.storageKey,i)):i.user=q_()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const a=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<H_;if(this._debug(r,`session has${a?"":" not"} expired with margin of ${H_}s`),a){if(this.autoRefreshToken&&i.refresh_token){const{error:o}=await this._callRefreshToken(i.refresh_token);o&&(console.error(o),Cb(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(i.access_token);!l&&o?.user?(i.user=o.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new hi;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Av;const{data:a,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!a.session)throw new hi;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const l={data:a.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(a){if(this._debug(i,"error",a),Ve(a)){const o={data:null,error:a};return Cb(a)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(a),a}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(t,n,r=!0){const i=`#_notifyAllSubscribers(${t})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const a=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,n)}catch(u){a.push(u)}});if(await Promise.all(o),a.length>0){for(let l=0;l<a.length;l+=1)console.error(a[l]);throw a[0]}}finally{this._debug(i,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await _r(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Nd(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const a=yM(i);await Nd(this.storage,this.storageKey,a)}else{const i=yM(n);await Nd(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await _r(this.storage,this.storageKey),await _r(this.storage,this.storageKey+"-code-verifier"),await _r(this.storage,this.storageKey+"-user"),this.userStorage&&await _r(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&kr()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Od);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-t)/Od);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Od}ms, refresh threshold is ${Ik} ticks`),i<=Ik&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof GE)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!kr()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r?.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r?.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[a,o]=await gd(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(l.toString())}if(r?.queryParams){const a=new URLSearchParams(r.queryParams);i.push(a.toString())}return r?.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${i.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:i,error:a}=n;return a?this._returnResult({data:null,error:a}):await at(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Ve(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,i;const{data:a,error:o}=n;if(o)return this._returnResult({data:null,error:o});const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:u,error:d}=await at(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=a?.session)===null||r===void 0?void 0:r.access_token});return d?this._returnResult({data:null,error:d}):(t.factorType==="totp"&&u.type==="totp"&&(!((i=u?.totp)===null||i===void 0)&&i.qr_code)&&(u.totp.qr_code=`data:image/svg+xml;utf-8,${u.totp.qr_code}`),this._returnResult({data:u,error:null}))})}catch(n){if(Ve(n))return this._returnResult({data:null,error:n});throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:a}=n;if(a)return this._returnResult({data:null,error:a});const o=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?EV(t.webauthn.credential_response):TV(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:u}=await at(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:o,headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token});return u?this._returnResult({data:null,error:u}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:u}))})}catch(n){if(Ve(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:a}=n;if(a)return this._returnResult({data:null,error:a});const o=await at(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token});if(o.error)return o;const{data:l}=o;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:SV(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:kV(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(Ve(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){var t;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const a of(t=n?.factors)!==null&&t!==void 0?t:[])i.all.push(a),a.status==="verified"&&i[a.factor_type].push(a);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var t,n;const{data:{session:r},error:i}=await this.getSession();if(i)return this._returnResult({data:null,error:i});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=G_(r.access_token);let o=null;a.aal&&(o=a.aal);let l=o;((n=(t=r.user.factors)===null||t===void 0?void 0:t.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(l="aal2");const d=a.amr||[];return{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:d},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?await at(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:r.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new hi})})}catch(n){if(Ve(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(t,n){try{return await this._useSession(async r=>{const{data:{session:i},error:a}=r;if(a)return this._returnResult({data:null,error:a});if(!i)return this._returnResult({data:null,error:new hi});const o=await at(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&kr()&&!n?.skipBrowserRedirect&&window.location.assign(o.data.redirect_url),o})}catch(r){if(Ve(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(t,n){try{return await this._useSession(async r=>{const{data:{session:i},error:a}=r;if(a)return this._returnResult({data:null,error:a});if(!i)return this._returnResult({data:null,error:new hi});const o=await at(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&kr()&&!n?.skipBrowserRedirect&&window.location.assign(o.data.redirect_url),o})}catch(r){if(Ve(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;return r?this._returnResult({data:null,error:r}):n?await at(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new hi})})}catch(t){if(Ve(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?(await at(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new hi})})}catch(n){if(Ve(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(l=>l.kid===t);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(l=>l.kid===t),r&&this.jwks_cached_at+$W>i)return r;const{data:a,error:o}=await at(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=i,r=a.keys.find(l=>l.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:y,error:S}=await this.getSession();if(S||!y.session)return this._returnResult({data:null,error:S});r=y.session.access_token}const{header:i,payload:a,signature:o,raw:{header:l,payload:u}}=G_(r);n?.allowExpired||rV(a.exp);const d=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n?.keys?{keys:n.keys}:n?.jwks);if(!d){const{error:y}=await this.getUser(r);if(y)throw y;return{data:{claims:a,header:i,signature:o},error:null}}const h=iV(i.alg),p=await crypto.subtle.importKey("jwk",d,h,!0,["verify"]);if(!await crypto.subtle.verify(h,p,o,GW(`${l}.${u}`)))throw new Qb("Invalid JWT signature");return{data:{claims:a,header:i,signature:o},error:null}}catch(r){if(Ve(r))return this._returnResult({data:null,error:r});throw r}}};qE.nextInstanceID={};const RV=HE,LV=qE,IV=Object.freeze(Object.defineProperty({__proto__:null,AuthAdminApi:RV,AuthApiError:gB,AuthClient:LV,AuthError:Zd,AuthImplicitGrantRedirectError:bm,AuthInvalidCredentialsError:gm,AuthInvalidJwtError:Qb,AuthInvalidTokenResponseError:Yc,AuthPKCEGrantCodeExchangeError:Bk,AuthRetryableFetchError:Jb,AuthSessionMissingError:hi,AuthUnknownError:Pl,AuthWeakPasswordError:zk,CustomAuthError:$s,GoTrueAdminApi:HE,GoTrueClient:qE,NavigatorLockAcquireTimeoutError:SB,SIGN_OUT_SCOPES:Mb,isAuthApiError:bB,isAuthError:Ve,isAuthImplicitGrantRedirectError:vB,isAuthRetryableFetchError:Cb,isAuthSessionMissingError:yB,isAuthWeakPasswordError:BW,lockInternals:Wc,navigatorLock:kB,processLock:mV},Symbol.toStringTag,{value:"Module"})),AB=dp(IV);var TM;function $V(){if(TM)return Gh;TM=1,Object.defineProperty(Gh,"__esModule",{value:!0}),Gh.SupabaseAuthClient=void 0;const e=AB;let t=class extends e.AuthClient{constructor(r){super(r)}};return Gh.SupabaseAuthClient=t,Gh}var AM;function jM(){if(AM)return _0;AM=1,Object.defineProperty(_0,"__esModule",{value:!0});const e=B5,t=q5(),n=eB,r=OW,i=CW(),a=MW(),o=DW(),l=$V();class u{constructor(h,p,b){var y,S,_;this.supabaseUrl=h,this.supabaseKey=p;const k=(0,o.validateSupabaseUrl)(h);if(!p)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",k),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",k),this.storageUrl=new URL("storage/v1",k),this.functionsUrl=new URL("functions/v1",k);const A=`sb-${k.hostname.split(".")[0]}-auth-token`,N={db:i.DEFAULT_DB_OPTIONS,realtime:i.DEFAULT_REALTIME_OPTIONS,auth:Object.assign(Object.assign({},i.DEFAULT_AUTH_OPTIONS),{storageKey:A}),global:i.DEFAULT_GLOBAL_OPTIONS},j=(0,o.applySettingDefaults)(b??{},N);this.storageKey=(y=j.auth.storageKey)!==null&&y!==void 0?y:"",this.headers=(S=j.global.headers)!==null&&S!==void 0?S:{},j.accessToken?(this.accessToken=j.accessToken,this.auth=new Proxy({},{get:(C,D)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(D)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((_=j.auth)!==null&&_!==void 0?_:{},this.headers,j.global.fetch),this.fetch=(0,a.fetchWithAuth)(p,this._getAccessToken.bind(this),j.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},j.realtime)),this.accessToken&&this.accessToken().then(C=>this.realtime.setAuth(C)).catch(C=>console.warn("Failed to set initial Realtime auth token:",C)),this.rest=new t.PostgrestClient(new URL("rest/v1",k).href,{headers:this.headers,schema:j.db.schema,fetch:this.fetch}),this.storage=new r.StorageClient(this.storageUrl.href,this.headers,this.fetch,b?.storage),j.accessToken||this._listenForAuthEvents()}get functions(){return new e.FunctionsClient(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(h){return this.rest.from(h)}schema(h){return this.rest.schema(h)}rpc(h,p={},b={head:!1,get:!1,count:void 0}){return this.rest.rpc(h,p,b)}channel(h,p={config:{}}){return this.realtime.channel(h,p)}getChannels(){return this.realtime.getChannels()}removeChannel(h){return this.realtime.removeChannel(h)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var h,p;if(this.accessToken)return await this.accessToken();const{data:b}=await this.auth.getSession();return(p=(h=b.session)===null||h===void 0?void 0:h.access_token)!==null&&p!==void 0?p:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:h,persistSession:p,detectSessionInUrl:b,storage:y,userStorage:S,storageKey:_,flowType:k,lock:A,debug:N,throwOnError:j},C,D){const P={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new l.SupabaseAuthClient({url:this.authUrl.href,headers:Object.assign(Object.assign({},P),C),storageKey:_,autoRefreshToken:h,persistSession:p,detectSessionInUrl:b,storage:y,userStorage:S,flowType:k,lock:A,debug:N,throwOnError:j,fetch:D,hasCustomAuthorizationHeader:Object.keys(this.headers).some($=>$.toLowerCase()==="authorization")})}_initRealtimeClient(h){return new n.RealtimeClient(this.realtimeUrl.href,Object.assign(Object.assign({},h),{params:Object.assign({apikey:this.supabaseKey},h?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((p,b)=>{this._handleTokenChanged(p,"CLIENT",b?.access_token)})}_handleTokenChanged(h,p,b){(h==="TOKEN_REFRESHED"||h==="SIGNED_IN")&&this.changedAccessToken!==b?(this.changedAccessToken=b,this.realtime.setAuth(b)):h==="SIGNED_OUT"&&(this.realtime.setAuth(),p=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}return _0.default=u,_0}var OM;function BV(){return OM||(OM=1,(function(e){var t=gs&&gs.__createBinding||(Object.create?(function(h,p,b,y){y===void 0&&(y=b);var S=Object.getOwnPropertyDescriptor(p,b);(!S||("get"in S?!p.__esModule:S.writable||S.configurable))&&(S={enumerable:!0,get:function(){return p[b]}}),Object.defineProperty(h,y,S)}):(function(h,p,b,y){y===void 0&&(y=b),h[y]=p[b]})),n=gs&&gs.__exportStar||function(h,p){for(var b in h)b!=="default"&&!Object.prototype.hasOwnProperty.call(p,b)&&t(p,h,b)},r=gs&&gs.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(e,"__esModule",{value:!0}),e.createClient=e.SupabaseClient=e.FunctionRegion=e.FunctionsError=e.FunctionsRelayError=e.FunctionsFetchError=e.FunctionsHttpError=e.PostgrestError=void 0;const i=r(jM());n(AB,e);var a=q5();Object.defineProperty(e,"PostgrestError",{enumerable:!0,get:function(){return a.PostgrestError}});var o=B5;Object.defineProperty(e,"FunctionsHttpError",{enumerable:!0,get:function(){return o.FunctionsHttpError}}),Object.defineProperty(e,"FunctionsFetchError",{enumerable:!0,get:function(){return o.FunctionsFetchError}}),Object.defineProperty(e,"FunctionsRelayError",{enumerable:!0,get:function(){return o.FunctionsRelayError}}),Object.defineProperty(e,"FunctionsError",{enumerable:!0,get:function(){return o.FunctionsError}}),Object.defineProperty(e,"FunctionRegion",{enumerable:!0,get:function(){return o.FunctionRegion}}),n(eB,e);var l=jM();Object.defineProperty(e,"SupabaseClient",{enumerable:!0,get:function(){return r(l).default}});const u=(h,p,b)=>new i.default(h,p,b);e.createClient=u;function d(){if(typeof window<"u"||typeof process>"u")return!1;const h=process.version;if(h==null)return!1;const p=h.match(/^v(\d+)\./);return p?parseInt(p[1],10)<=18:!1}d()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217")})(gs)),gs}var jB=BV();const OB=wi(jB),zV=TE({__proto__:null,default:OB},[jB]),{PostgrestError:wNe,FunctionsHttpError:_Ne,FunctionsFetchError:SNe,FunctionsRelayError:kNe,FunctionsError:ENe,FunctionRegion:TNe,SupabaseClient:ANe,createClient:UV,GoTrueAdminApi:jNe,GoTrueClient:ONe,AuthAdminApi:NNe,AuthClient:CNe,navigatorLock:MNe,NavigatorLockAcquireTimeoutError:DNe,lockInternals:PNe,processLock:RNe,SIGN_OUT_SCOPES:LNe,AuthError:INe,AuthApiError:$Ne,AuthUnknownError:BNe,CustomAuthError:zNe,AuthSessionMissingError:UNe,AuthInvalidTokenResponseError:FNe,AuthInvalidCredentialsError:HNe,AuthImplicitGrantRedirectError:GNe,AuthPKCEGrantCodeExchangeError:qNe,AuthRetryableFetchError:YNe,AuthWeakPasswordError:KNe,AuthInvalidJwtError:WNe,isAuthError:VNe,isAuthApiError:ZNe,isAuthSessionMissingError:XNe,isAuthImplicitGrantRedirectError:JNe,isAuthRetryableFetchError:QNe,isAuthWeakPasswordError:eCe,RealtimePresence:tCe,RealtimeChannel:nCe,RealtimeClient:rCe,REALTIME_LISTEN_TYPES:iCe,REALTIME_POSTGRES_CHANGES_LISTEN_EVENT:aCe,REALTIME_PRESENCE_LISTEN_EVENTS:oCe,REALTIME_SUBSCRIBE_STATES:sCe,REALTIME_CHANNEL_STATES:lCe}=OB||zV,FV="https://jouhybyquybxbnqztxum.supabase.co",HV="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpvdWh5YnlxdXlieGJucXp0eHVtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ5NjIwOTgsImV4cCI6MjA4MDUzODA5OH0.qAD7S7yRW8GxcRze_3dyirReIy6HvMr9DeET-djp1Fw",Ie=UV(FV,HV,{auth:{flowType:"pkce",persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,storage:localStorage}}),NB="settings_v1",Fk=()=>{try{typeof window<"u"&&window.localStorage.removeItem(NB)}catch{}},Ll={hiddenStem:"all",hiddenStemMode:"classic",ilunRule:"/",sinsalMode:"classic",sinsalBase:"",sinsalBloom:!1,exposure:"",charType:"",thinEum:!1,showSipSin:!0,showSibiSinsal:!0,showSibiUnseong:!0,showNabeum:!0,showEtcShinsal:!0,showRelationBox:!0,showPromptBox:!0,theme:"dark",difficultyMode:!1,sidebarCardsCollapsed:!1,sidebarCardCollapsedMap:{},sidebarCollapseInitDone:!0,sectionOrder:["hiddenStem","hiddenStemMode","ilunRule","sinsalMode","sinsalBase","sinsalBloom","exposure","charType","thinEum","visibility","difficultyMode"]},NM=["theme","hiddenStem","hiddenStemMode","ilunRule","sinsalMode","sinsalBase","sinsalBloom","exposure","charType","thinEum","visibility","difficultyMode"],GV=e=>{const t=Array.isArray(e)?e.filter(r=>typeof r=="string"&&NM.includes(r)):[],n=NM.filter(r=>!t.includes(r));return[...t,...n]},Fd=e=>({...Ll,...e,sectionOrder:GV(e.sectionOrder)}),qV=e=>{if(e&&typeof e=="object"){const t=e;if(t.settings&&typeof t.settings=="object")return Fd(t.settings);if(t.state&&typeof t.state=="object"){const n=t.state;if(n.settings&&typeof n.settings=="object")return Fd(n.settings)}}return Fd(e??{})},YV=e=>{if(!e||typeof e!="object")return!1;const t=e;return!!(t.state||t.settings)};Fk();const vn=Fo()(f5((e,t)=>({settings:Ll,syncing:!1,loaded:!1,setSettings:n=>e({settings:Fd(n)}),setKey:(n,r)=>e({settings:Fd({...t().settings,[n]:r})}),reset:()=>e({settings:Ll,loaded:!0}),loadFromServer:async n=>{const r=t();if(!r.syncing&&!(!n?.force&&r.loaded))try{e({syncing:!0}),Fk();const{data:i,error:a}=await Ie.auth.getUser(),o=i?.user??null;if(a||!o){e({settings:Ll,syncing:!1,loaded:!0});return}const l=t();!n?.force&&l.loaded&&l.syncing;const{data:u,error:d}=await Ie.from("user_settings").select("payload").eq("user_id",o.id).maybeSingle();if(!u&&!d&&await Ie.from("user_settings").upsert({user_id:o.id,payload:{}}),d&&d.code!=="PGRST116"){console.error("loadFromServer(settings) error:",d),e({syncing:!1,loaded:!0});return}if(u?.payload){const h=qV(u.payload),b=u.payload?.sidebarCollapseInitDone===!0;b||(h.sidebarCardsCollapsed=Ll.sidebarCardsCollapsed,h.sidebarCardCollapsedMap={},h.sidebarCollapseInitDone=!0),e({settings:h,syncing:!1,loaded:!0}),(YV(u.payload)||!b)&&await Ie.from("user_settings").upsert({user_id:o.id,payload:h,updated_at:new Date().toISOString()});return}await t().saveToServer(!0),e({syncing:!1,loaded:!0})}catch(i){console.error("loadFromServer(settings) exception:",i),e({syncing:!1,loaded:!0})}},saveToServer:async(n=!1)=>{try{if(!t().loaded&&!n)return;e({syncing:!0}),Fk();const{data:r,error:i}=await Ie.auth.getUser(),a=r?.user??null;if(i||!a){e({syncing:!1,loaded:!0,settings:Ll});return}const o=Fd(t().settings),{error:l}=await Ie.from("user_settings").upsert({user_id:a.id,payload:o,updated_at:new Date().toISOString()});l&&console.error("saveToServer(settings) error:",l),e({syncing:!1,loaded:!0})}catch(r){console.error("saveToServer(settings) exception:",r),e({syncing:!1,loaded:!0})}}}),{name:NB,storage:{getItem:()=>null,setItem:()=>null,removeItem:()=>null},merge:(e,t)=>t}));function Hk(e){const t=Zr.indexOf(e);if(t!==-1)return Zr[t];const n=io..indexOf(e);return n!==-1?Zr[n]:null}function CB(e){const t=vi.indexOf(e);if(t!==-1)return vi[t];const n=io..indexOf(e);return n!==-1?vi[n]:null}function CM(e,t){if(t?.difficultyMode)return t?.theme==="light"?"bg-white border border-gray-300 text-neutral-900":"bg-white text-black";switch(e){case"":return"bg-green-600 text-white";case"":return"bg-red-600 text-white";case"":return"bg-yellow-500 text-white";case"":return"bg-gray-400 text-white";case"":return"bg-black text-white";default:return"bg-neutral-700 text-white"}}function Yi(e,t,n){if(t==="stem"){const r=Hk(e);if(!r)return console.warn("Invalid stem:",e),"bg-neutral-700";const i=Zr.indexOf(r),a=i>=0?cK[i]:void 0;return CM(a,n)}else{const r=CB(e);if(!r)return console.warn("Invalid branch:",e),"bg-neutral-700";const i=vi.indexOf(r),a=i>=0?uK[i]:void 0;return CM(a,n)}}function _a(e,t){const n=Hk(e);if(!n)throw new Error(`getSipSin: invalid dayStem ${e}`);if(t.stem){const r=Hk(t.stem);if(!r)throw new Error(`getSipSin: invalid stem ${t.stem}`);return hK[n][r]}if(t.branch){const r=CB(t.branch);if(!r)throw new Error(`getSipSin: invalid branch ${t.branch}`);return mK[n][r]}throw new Error("getSipSin: stem or branch required")}const jv={:["","(-)",""],:["","",""],:["","",""],:["","(-)",""],:["","",""],:["","",""],:["","",""],:["","",""],:["","",""],:["","(-)",""],:["","",""],:["","",""]},Ov={:["(-)","(-)",""],:["","",""],:["(-)","",""],:["(-)","(-)",""],:["","",""],:["(-)","",""],:["(-)","(-)",""],:["","",""],:["(-)","",""],:["(-)","(-)",""],:["","",""],:["(-)","",""]};function MB({branch:e,dayStem:t,mode:n="all",mapping:r="classic",variant:i="auto",isUnknownTime:a=!1}){const o=(r==="hgc"?Ov:jv)[e]??[],l=n==="main"?[o[2]]:o,u=i==="white",d=u?"text-white":"text-neutral-800 dark:text-white",h=u?"border-white":"border-neutral-800 dark: border-neutral-200",p=u?"text-yellow-900":"text-red-600 dark:text-yellow-300";return g.jsx("div",{className:"w-full flex flex-col gap-1 mt-1",children:l.map((b,y)=>b==="(-)"||a?g.jsx("div",{className:`w-full max-w-[80px] mx-auto text-[10px] desk:text-xs text-neutral-500 py-0.5 desk:px-1 border ${h} ${d} rounded text-center text-nowrap`,children:"(-) ()"},y):g.jsxs("div",{className:`w-full max-w-[80px] mx-auto text-[10px] desk:text-xs py-0.5 desk:px-1 border ${h} ${d} rounded text-center text-nowrap 
            ${n==="main"||y===2?`jeonggi bg-neutral-500/50 ${p} font-bold`:""}`,children:[b," (",_a(t,{stem:b}),")"]},y))})}const bp=Fo(e=>({manualHour:null,setManualHour:t=>e({manualHour:t}),clearManualHour:()=>e({manualHour:null})})),DB=Object.fromEntries(Object.entries(Gn).map(([e,t])=>[t,e])),PB=Object.fromEntries(Object.entries(Qn).map(([e,t])=>[t,e])),KV=new Set(Object.keys(Gn)),WV=new Set(Object.keys(Qn)),VV=new Set(["","","","","","","","","",""]),ZV=new Set(["","","","","","","","","","","",""]);function xi(e,t,n){return n===""?t==="stem"?Gn[e]??e:Qn[e]??e:t==="stem"?DB[e]??e:PB[e]??e}function MM(e){const t=DB[e]??e;return KV.has(t)?t:""}function XV(e){const t=PB[e]??e;return WV.has(t)?t:""}function Nv(e){if(Wd.has(e))return e;const t=Gn[e]??e;return Wd.has(t)?t:""}function YE(e){if(Dm.has(e))return e;const t=Qn[e]??e;return Dm.has(t)?t:""}function eo(e,t){return t==="stem"?VV.has(e):ZV.has(e)}function Md({label:e,gz:t,dayStem:n,settings:r,unseongText:i,shinsalText:a,hideBranchSipSin:o=!0,hideHiddenStems:l=!1,size:u="sm",variant:d="auto",isUnknownTime:h=!1}){const{manualHour:p}=bp(),b=h&&!p,y=t.charAt(0),S=t.charAt(1),_=xi(y,"stem",r.charType),k=xi(S,"branch",r.charType),A=MM(y),N=XV(S),j=MM(n),C=YE(S),D=Nv(n),P=r.showSipSin?_a(j,{stem:A}):null,$=!o&&r.showSipSin?_a(j,{branch:N}):null,U=r.thinEum&&eo(y,"stem")?"font-thin":"font-bold",Y=r.thinEum&&eo(S,"branch")?"font-thin":"font-bold",K={sm:"w-10 h-10 sm:w-12 sm:h-12",md:"w-12 h-12 sm:w-14 sm:h-14 md:w-16 md:h-16",lg:"w-14 h-14 sm:w-16 sm:h-16 md:w-20 md:h-20"},F=!l&&!!r.hiddenStem,z=r.hiddenStem==="regular"?"main":"all",W=r.hiddenStemMode==="hgc"?"hgc":"classic",X=d==="white",Z=X?"bg-white text-neutral-900 border border-neutral-200":"bg-white dark:bg-neutral-900 text-neutral-900 dark:text-neutral-100 border border-neutral-200 dark:border-neutral-800",G=X?"bg-neutral-100 text-neutral-700":"bg-neutral-100 dark:bg-neutral-800/60 text-neutral-700 dark:text-neutral-200",J=X?"border-neutral-200":"border-neutral-200 dark:border-neutral-800",te=X?"text-neutral-500":"text-neutral-400",ce=X?"text-neutral-500":"text-neutral-400",{settings:oe}=vn(),B=b?`bg-white ${J}`:`${Yi(A,"stem",oe)} ${J}`,V=b?`bg-white ${J}`:`${Yi(N,"branch",oe)} ${J}`,ie=b?"text-black":oe.difficultyMode?oe.theme==="light"?"text-neutral-900":"text-black":"text-white",Q=b?"text-black":oe.difficultyMode?oe.theme==="light"?"text-neutral-900":"text-black":"text-white";return g.jsxs("div",{className:`rounded-sm desk:rounded-xl overflow-hidden ${Z}`,children:[g.jsx("div",{className:`py-2 text-center text-[10px] desk:text-xs tracking-wider ${G} text-nowrap`,children:e}),g.jsxs("div",{className:"py-3 flex flex-col items-center gap-1",children:[P&&g.jsx("div",{className:`text-[10px] desk:text-xs ${te} text-nowrap`,children:h&&!p?"-":P}),g.jsx("div",{className:`${K[u]} rounded-sm desk:rounded-lg flex items-center justify-center border ${B}`,children:g.jsx("span",{className:`text-2xl md:text-3xl ${ie} ${U}`,children:b?"-":_})}),g.jsx("div",{className:`${K[u]} rounded-sm desk:rounded-lg flex items-center justify-center border ${V}`,children:g.jsx("span",{className:`text-2xl md:text-3xl ${Q} ${Y}`,children:b?"-":k})}),F&&g.jsx(MB,{branch:C,dayStem:D,mode:z,mapping:W,isUnknownTime:h&&!p&&(e===""||e==="")}),$&&g.jsx("div",{className:`text-[10px] desk:text-xs ${ce}`,children:h&&!p?"-":$}),r.showSibiUnseong&&g.jsx("div",{className:`text-[10px] desk:text-xs ${ce} text-nowrap`,children:h&&!p?"-":i||""}),r.showSibiSinsal&&g.jsx("div",{className:`text-[10px] desk:text-xs ${ce} text-nowrap`,children:h&&!p?"-":a||""})]})]})}/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JV=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),QV=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),DM=e=>{const t=QV(e);return t.charAt(0).toUpperCase()+t.slice(1)},RB=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim(),eZ=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var tZ={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nZ=w.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:o,...l},u)=>w.createElement("svg",{ref:u,...tZ,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:RB("lucide",i),...!a&&!eZ(l)&&{"aria-hidden":"true"},...l},[...o.map(([d,h])=>w.createElement(d,h)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Or=(e,t)=>{const n=w.forwardRef(({className:r,...i},a)=>w.createElement(nZ,{ref:a,iconNode:t,className:RB(`lucide-${JV(DM(e))}`,`lucide-${e}`,r),...i}));return n.displayName=DM(e),n};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rZ=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],iZ=Or("chevron-down",rZ);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aZ=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],oZ=Or("chevron-up",aZ);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sZ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],LB=Or("circle-question-mark",sZ);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lZ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],cZ=Or("circle-x",lZ);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uZ=[["path",{d:"M19.414 14.414C21 12.828 22 11.5 22 9.5a5.5 5.5 0 0 0-9.591-3.676.6.6 0 0 1-.818.001A5.5 5.5 0 0 0 2 9.5c0 2.3 1.5 4 3 5.5l5.535 5.362a2 2 0 0 0 2.879.052 2.12 2.12 0 0 0-.004-3 2.124 2.124 0 1 0 3-3 2.124 2.124 0 0 0 3.004 0 2 2 0 0 0 0-2.828l-1.881-1.882a2.41 2.41 0 0 0-3.409 0l-1.71 1.71a2 2 0 0 1-2.828 0 2 2 0 0 1 0-2.828l2.823-2.762",key:"17lmqv"}]],dZ=Or("heart-handshake",uZ);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fZ=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],hZ=Or("house",fZ);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mZ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],pZ=Or("info",mZ);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gZ=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],IB=Or("log-in",gZ);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bZ=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],yZ=Or("log-out",bZ);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vZ=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],xZ=Or("menu",vZ);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wZ=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],_Z=Or("plus",wZ);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SZ=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],kZ=Or("settings",SZ);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EZ=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],TZ=Or("sparkles",EZ);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AZ=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 21v-2a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2",key:"1m6ac2"}]],jZ=Or("square-user",AZ);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OZ=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],$B=Or("star",OZ);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NZ=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],CZ=Or("user-plus",NZ);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MZ=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ry=Or("x",MZ);function DZ(){const[e,t]=w.useState(!1);return g.jsx("div",{className:"z-[60] pointer-events-none mt-2",children:g.jsx("div",{className:"max-w-[700px] w-full mx-auto pb-2 pointer-events-auto",children:g.jsxs("div",{className:"rounded-xl border border-neutral-200 bg-white/90 backdrop-blur shadow-sm dark:border-neutral-800 dark:bg-neutral-950/80",children:[g.jsxs("button",{type:"button",onClick:()=>t(n=>!n),className:"w-full flex flex-col desk:flex-row items-center justify-between gap-2 px-3 py-2 cursor-pointer",children:[g.jsx("div",{className:"flex items-center gap-2 min-w-0",children:g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(pZ,{className:"w-4 h-4 text-neutral-600 dark:text-neutral-300 hidden desk:block"}),g.jsx("span",{className:"text-xs text-neutral-700 dark:text-neutral-200",children:"         ."})]})}),g.jsx("span",{className:"text-[11px] text-neutral-500 dark:text-neutral-400",children:e?"":""})]}),e&&g.jsx("div",{className:"px-3 pb-3",children:g.jsxs("div",{className:"text-[12px] leading-relaxed text-neutral-700 dark:text-neutral-200",children:[g.jsx("p",{className:"mt-1 text-neutral-500 dark:text-neutral-400",children:"  /     ."}),g.jsx("p",{children:g.jsx("a",{href:"https://yavares.tistory.com/1013",target:"_blank",children:g.jsx("ins",{className:"text-amber-500",children:"     !"})})})]})})]})})})}const PZ=new Set(io.);function RZ(e){return Wd.has(e)?e:PZ.has(e)?Gn[e]:""}function LZ(e){if(!e||e<=0)return"0";const t=Math.floor(e/1e3),n=Math.floor(t/86400),r=Math.floor(t%86400/3600),i=Math.floor(t%3600/60);return n>=1?`${n} ${r}`:r>=1?`${r} ${i}`:`${i}`}function IZ({label:e,settings:t,hideBranchSipSin:n=!0}){const r=t.showSipSin,i=!!t.hiddenStem,o=(t.hiddenStem==="regular"?"main":"all")==="main"?1:3,l=t.showSipSin&&!n;return g.jsxs("div",{className:"rounded-sm desk:rounded-xl bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 overflow-hidden transition-colors",children:[g.jsx("div",{className:"py-2 text-center text-[10px] desk:text-xs tracking-wider bg-neutral-100 dark:bg-neutral-800/60 text-neutral-700 dark:text-neutral-200 text-nowrap",children:e}),g.jsxs("div",{className:"p-3 flex flex-col items-center gap-1",children:[r&&g.jsx("div",{className:"text-[10px] desk:text-xs text-neutral-500 dark:text-neutral-400 text-nowrap",children:"-"}),g.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-sm desk:rounded-lg flex items-center justify-center border border-neutral-200 dark:border-neutral-800 bg-white",children:g.jsx("span",{className:"text-2xl md:text-3xl font-bold text-neutral-900",children:"-"})}),g.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-sm desk:rounded-lg flex items-center justify-center border border-neutral-200 dark:border-neutral-800 bg-white",children:g.jsx("span",{className:"text-2xl md:text-3xl font-bold text-neutral-900",children:"-"})}),i&&g.jsx("div",{className:"flex flex-col gap-1 mt-1 w-full",children:Array.from({length:o}).map((u,d)=>g.jsx("div",{className:"w-full max-w-[80px] mx-auto text-[10px] desk:text-xs py-0.5 desk:px-1 border border-neutral-200 dark:border-neutral-800 rounded text-center text-nowrap text-neutral-500 dark:text-neutral-400",children:"-"},d))}),l&&g.jsx("div",{className:"text-[10px] desk:text-xs text-neutral-500 dark:text-neutral-400",children:"-"})]})]})}function $Z(){const e=vn(k=>k.settings),[t,n]=w.useState(new Date),[r,i]=w.useState(!0),[a,o]=w.useState("/"),[l,u]=w.useState(!1),[d,h]=w.useState(null);w.useEffect(()=>{if(!r)return;const k=setInterval(()=>n(new Date),1e3);return()=>clearInterval(k)},[r]),w.useEffect(()=>{let k=!0;const A=async()=>{const{data:C}=await Ie.auth.getSession(),D=C.session?.user?.id;if(!D){k&&h(null);return}const{data:P,error:$}=await Ie.from("user_activity").select("total_active_ms").eq("user_id",D).maybeSingle();if($){k&&h(null);return}const U=P?.total_active_ms;k&&h(typeof U=="number"?U:null)};A();const N=window.setInterval(()=>void A(),6e4),j=()=>{document.visibilityState==="visible"&&A()};return document.addEventListener("visibilitychange",j),()=>{k=!1,window.clearInterval(N),document.removeEventListener("visibilitychange",j)}},[]);const p=st(t),b=St(t),y=mt(t,a),S=Qa(t,"/"),_=RZ(y.charAt(0));return g.jsxs("div",{className:"flex flex-col justify-center items-center pt-20 desk:pt-16 desk:mt-12 w-full h-auto desk:h-[calc(100dvh_-_212px)] ",children:[g.jsxs("div",{className:`w-[96%] max-w-[640px] mx-auto mb-2 p-2 bg-white dark:bg-neutral-950
                      text-neutral-900 dark:text-neutral-100 text-xs text-center
                      rounded-xl shadow border border-neutral-200 dark:border-neutral-800 transition-colors`,children:["   ^^ ",g.jsx("br",{}),"      ! (   !)"]}),g.jsxs("div",{className:`w-[96%] max-w-[640px] mx-auto mb-4 p-4
                      bg-white dark:bg-neutral-950
                      text-neutral-900 dark:text-neutral-100
                      rounded-xl shadow border border-neutral-200 dark:border-neutral-800 transition-colors`,children:[g.jsxs("div",{className:"mb-3 text-xs desk:text-sm text-neutral-600 dark:text-neutral-300",children:["  :"," ",g.jsx("span",{className:"font-semibold text-neutral-900 dark:text-neutral-100",children:LZ(d)})]}),g.jsxs("header",{className:"flex flex-col desk:flex-row items-center justify-center desk:justify-between mb-4 gap-2",children:[g.jsxs("div",{className:"font-semibold text-sm desk:text-base",children:[" "," ",g.jsxs("span",{className:"text-neutral-500 dark:text-neutral-400",children:["(",r?"":"",") ",UZ(t)]})]}),g.jsxs("div",{className:"flex gap-2 items-center",children:[g.jsxs("select",{value:a,onChange:k=>o(k.target.value),className:`text-xs rounded px-2 py-1 h-30 cursor-pointer
                        bg-white dark:bg-neutral-900
                        border border-neutral-300 dark:border-neutral-700
                        text-neutral-900 dark:text-neutral-100
                        focus:outline-none focus:ring-2 focus:ring-amber-500/40`,children:[g.jsx("option",{value:"",children:" ( 23)"}),g.jsx("option",{value:"/",children:"/ ()"}),g.jsx("option",{value:"",children:" ( 3)"})]}),g.jsx("button",{onClick:()=>u(k=>!k),className:`text-xs px-3 py-1 rounded border transition-colors cursor-pointer
                          ${l?"bg-white text-neutral-900 border-neutral-300 hover:bg-neutral-100":"bg-neutral-100 text-neutral-900 border-neutral-200 hover:bg-neutral-200 dark:bg-neutral-800 dark:text-neutral-100 dark:border-neutral-700 dark:hover:bg-neutral-700"}`,title:"     ",children:l?" ":" "})]})]}),g.jsxs("div",{className:"grid grid-cols-4 gap-3 mb-6",children:[l?g.jsx(IZ,{label:"",settings:e,hideBranchSipSin:!0}):g.jsx(Md,{label:"",gz:S,dayStem:_,settings:e,hideBranchSipSin:!0}),g.jsx(Md,{label:"",gz:y,dayStem:_,settings:e,hideBranchSipSin:!0}),g.jsx(Md,{label:"",gz:b,dayStem:_,settings:e,hideBranchSipSin:!0}),g.jsx(Md,{label:"",gz:p,dayStem:_,settings:e,hideBranchSipSin:!0})]}),g.jsxs("div",{className:"flex flex-col desk:flex-row gap-2 desk:gap-3 items-center",children:[g.jsx("label",{className:"text-sm text-neutral-600 dark:text-neutral-300",children:"/ "}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("input",{type:"datetime-local",value:BZ(t),disabled:r,onChange:k=>{const A=zZ(k.target.value);A&&n(A)},className:`h-30 rounded px-3 py-1 text-sm transition-colors
                          bg-white dark:bg-neutral-900
                          border border-neutral-300 dark:border-neutral-700
                          text-neutral-900 dark:text-neutral-100
                          focus:outline-none focus:ring-2 focus:ring-amber-500/40
                          ${r?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,min:"1900-01-01T00:00",max:"2100-12-31T23:59"}),g.jsx("button",{onClick:()=>i(!r),className:`text-xs px-3 py-1 rounded transition-colors cursor-pointer
                        bg-neutral-100 hover:bg-neutral-200
                        dark:bg-neutral-800 dark:hover:bg-neutral-700
                        text-neutral-900 dark:text-neutral-100
                        border border-neutral-200 dark:border-neutral-700`,children:r?" ":" "})]})]}),g.jsx(DZ,{})]})]})}function BZ(e){const t=n=>n.toString().padStart(2,"0");return`${e.getFullYear()}-${t(e.getMonth()+1)}-${t(e.getDate())}T${t(e.getHours())}:${t(e.getMinutes())}`}function zZ(e){if(!e)return null;const[t,n]=e.split("T");if(!t||!n)return null;const[r,i,a]=t.split("-").map(Number),[o,l]=n.split(":").map(Number),u=new Date(r,i-1,a,o,l);return Number.isNaN(u.getTime())?null:u}function UZ(e){const t=n=>n.toString().padStart(2,"0");return`${t(e.getHours())}:${t(e.getMinutes())}:${t(e.getSeconds())}`}function FZ({placeholderText:e,value:t}){const[n,r]=w.useState(e),[i,a]=w.useState(!1),[o,l]=w.useState(t??""),u=w.useRef(null),d=w.useRef(null),h=w.useRef(null),p=w.useRef(null);return w.useEffect(()=>{t!==void 0&&l(t)},[t]),{btnText:n,setBtnText:r,open:i,setOpen:a,localValue:o,setLocalValue:l,nameRef:u,latRef:d,lonRef:h,triggerBtnRef:p}}var ym={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var HZ=ym.exports,PM;function GZ(){return PM||(PM=1,(function(e,t){(function(n,r){r(t)})(HZ,(function(n){var r="1.9.4";function i(f){var v,E,M,R;for(E=1,M=arguments.length;E<M;E++){R=arguments[E];for(v in R)f[v]=R[v]}return f}var a=Object.create||(function(){function f(){}return function(v){return f.prototype=v,new f}})();function o(f,v){var E=Array.prototype.slice;if(f.bind)return f.bind.apply(f,E.call(arguments,1));var M=E.call(arguments,2);return function(){return f.apply(v,M.length?M.concat(E.call(arguments)):arguments)}}var l=0;function u(f){return"_leaflet_id"in f||(f._leaflet_id=++l),f._leaflet_id}function d(f,v,E){var M,R,H,ee;return ee=function(){M=!1,R&&(H.apply(E,R),R=!1)},H=function(){M?R=arguments:(f.apply(E,arguments),setTimeout(ee,v),M=!0)},H}function h(f,v,E){var M=v[1],R=v[0],H=M-R;return f===M&&E?f:((f-R)%H+H)%H+R}function p(){return!1}function b(f,v){if(v===!1)return f;var E=Math.pow(10,v===void 0?6:v);return Math.round(f*E)/E}function y(f){return f.trim?f.trim():f.replace(/^\s+|\s+$/g,"")}function S(f){return y(f).split(/\s+/)}function _(f,v){Object.prototype.hasOwnProperty.call(f,"options")||(f.options=f.options?a(f.options):{});for(var E in v)f.options[E]=v[E];return f.options}function k(f,v,E){var M=[];for(var R in f)M.push(encodeURIComponent(E?R.toUpperCase():R)+"="+encodeURIComponent(f[R]));return(!v||v.indexOf("?")===-1?"?":"&")+M.join("&")}var A=/\{ *([\w_ -]+) *\}/g;function N(f,v){return f.replace(A,function(E,M){var R=v[M];if(R===void 0)throw new Error("No value provided for variable "+E);return typeof R=="function"&&(R=R(v)),R})}var j=Array.isArray||function(f){return Object.prototype.toString.call(f)==="[object Array]"};function C(f,v){for(var E=0;E<f.length;E++)if(f[E]===v)return E;return-1}var D="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function P(f){return window["webkit"+f]||window["moz"+f]||window["ms"+f]}var $=0;function U(f){var v=+new Date,E=Math.max(0,16-(v-$));return $=v+E,window.setTimeout(f,E)}var Y=window.requestAnimationFrame||P("RequestAnimationFrame")||U,K=window.cancelAnimationFrame||P("CancelAnimationFrame")||P("CancelRequestAnimationFrame")||function(f){window.clearTimeout(f)};function F(f,v,E){if(E&&Y===U)f.call(v);else return Y.call(window,o(f,v))}function z(f){f&&K.call(window,f)}var W={__proto__:null,extend:i,create:a,bind:o,get lastId(){return l},stamp:u,throttle:d,wrapNum:h,falseFn:p,formatNum:b,trim:y,splitWords:S,setOptions:_,getParamString:k,template:N,isArray:j,indexOf:C,emptyImageUrl:D,requestFn:Y,cancelFn:K,requestAnimFrame:F,cancelAnimFrame:z};function X(){}X.extend=function(f){var v=function(){_(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},E=v.__super__=this.prototype,M=a(E);M.constructor=v,v.prototype=M;for(var R in this)Object.prototype.hasOwnProperty.call(this,R)&&R!=="prototype"&&R!=="__super__"&&(v[R]=this[R]);return f.statics&&i(v,f.statics),f.includes&&(Z(f.includes),i.apply(null,[M].concat(f.includes))),i(M,f),delete M.statics,delete M.includes,M.options&&(M.options=E.options?a(E.options):{},i(M.options,f.options)),M._initHooks=[],M.callInitHooks=function(){if(!this._initHooksCalled){E.callInitHooks&&E.callInitHooks.call(this),this._initHooksCalled=!0;for(var H=0,ee=M._initHooks.length;H<ee;H++)M._initHooks[H].call(this)}},v},X.include=function(f){var v=this.prototype.options;return i(this.prototype,f),f.options&&(this.prototype.options=v,this.mergeOptions(f.options)),this},X.mergeOptions=function(f){return i(this.prototype.options,f),this},X.addInitHook=function(f){var v=Array.prototype.slice.call(arguments,1),E=typeof f=="function"?f:function(){this[f].apply(this,v)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(E),this};function Z(f){if(!(typeof L>"u"||!L||!L.Mixin)){f=j(f)?f:[f];for(var v=0;v<f.length;v++)f[v]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var G={on:function(f,v,E){if(typeof f=="object")for(var M in f)this._on(M,f[M],v);else{f=S(f);for(var R=0,H=f.length;R<H;R++)this._on(f[R],v,E)}return this},off:function(f,v,E){if(!arguments.length)delete this._events;else if(typeof f=="object")for(var M in f)this._off(M,f[M],v);else{f=S(f);for(var R=arguments.length===1,H=0,ee=f.length;H<ee;H++)R?this._off(f[H]):this._off(f[H],v,E)}return this},_on:function(f,v,E,M){if(typeof v!="function"){console.warn("wrong listener type: "+typeof v);return}if(this._listens(f,v,E)===!1){E===this&&(E=void 0);var R={fn:v,ctx:E};M&&(R.once=!0),this._events=this._events||{},this._events[f]=this._events[f]||[],this._events[f].push(R)}},_off:function(f,v,E){var M,R,H;if(this._events&&(M=this._events[f],!!M)){if(arguments.length===1){if(this._firingCount)for(R=0,H=M.length;R<H;R++)M[R].fn=p;delete this._events[f];return}if(typeof v!="function"){console.warn("wrong listener type: "+typeof v);return}var ee=this._listens(f,v,E);if(ee!==!1){var fe=M[ee];this._firingCount&&(fe.fn=p,this._events[f]=M=M.slice()),M.splice(ee,1)}}},fire:function(f,v,E){if(!this.listens(f,E))return this;var M=i({},v,{type:f,target:this,sourceTarget:v&&v.sourceTarget||this});if(this._events){var R=this._events[f];if(R){this._firingCount=this._firingCount+1||1;for(var H=0,ee=R.length;H<ee;H++){var fe=R[H],be=fe.fn;fe.once&&this.off(f,be,fe.ctx),be.call(fe.ctx||this,M)}this._firingCount--}}return E&&this._propagateEvent(M),this},listens:function(f,v,E,M){typeof f!="string"&&console.warn('"string" type argument expected');var R=v;typeof v!="function"&&(M=!!v,R=void 0,E=void 0);var H=this._events&&this._events[f];if(H&&H.length&&this._listens(f,R,E)!==!1)return!0;if(M){for(var ee in this._eventParents)if(this._eventParents[ee].listens(f,v,E,M))return!0}return!1},_listens:function(f,v,E){if(!this._events)return!1;var M=this._events[f]||[];if(!v)return!!M.length;E===this&&(E=void 0);for(var R=0,H=M.length;R<H;R++)if(M[R].fn===v&&M[R].ctx===E)return R;return!1},once:function(f,v,E){if(typeof f=="object")for(var M in f)this._on(M,f[M],v,!0);else{f=S(f);for(var R=0,H=f.length;R<H;R++)this._on(f[R],v,E,!0)}return this},addEventParent:function(f){return this._eventParents=this._eventParents||{},this._eventParents[u(f)]=f,this},removeEventParent:function(f){return this._eventParents&&delete this._eventParents[u(f)],this},_propagateEvent:function(f){for(var v in this._eventParents)this._eventParents[v].fire(f.type,i({layer:f.target,propagatedFrom:f.target},f),!0)}};G.addEventListener=G.on,G.removeEventListener=G.clearAllEventListeners=G.off,G.addOneTimeEventListener=G.once,G.fireEvent=G.fire,G.hasEventListeners=G.listens;var J=X.extend(G);function te(f,v,E){this.x=E?Math.round(f):f,this.y=E?Math.round(v):v}var ce=Math.trunc||function(f){return f>0?Math.floor(f):Math.ceil(f)};te.prototype={clone:function(){return new te(this.x,this.y)},add:function(f){return this.clone()._add(oe(f))},_add:function(f){return this.x+=f.x,this.y+=f.y,this},subtract:function(f){return this.clone()._subtract(oe(f))},_subtract:function(f){return this.x-=f.x,this.y-=f.y,this},divideBy:function(f){return this.clone()._divideBy(f)},_divideBy:function(f){return this.x/=f,this.y/=f,this},multiplyBy:function(f){return this.clone()._multiplyBy(f)},_multiplyBy:function(f){return this.x*=f,this.y*=f,this},scaleBy:function(f){return new te(this.x*f.x,this.y*f.y)},unscaleBy:function(f){return new te(this.x/f.x,this.y/f.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ce(this.x),this.y=ce(this.y),this},distanceTo:function(f){f=oe(f);var v=f.x-this.x,E=f.y-this.y;return Math.sqrt(v*v+E*E)},equals:function(f){return f=oe(f),f.x===this.x&&f.y===this.y},contains:function(f){return f=oe(f),Math.abs(f.x)<=Math.abs(this.x)&&Math.abs(f.y)<=Math.abs(this.y)},toString:function(){return"Point("+b(this.x)+", "+b(this.y)+")"}};function oe(f,v,E){return f instanceof te?f:j(f)?new te(f[0],f[1]):f==null?f:typeof f=="object"&&"x"in f&&"y"in f?new te(f.x,f.y):new te(f,v,E)}function B(f,v){if(f)for(var E=v?[f,v]:f,M=0,R=E.length;M<R;M++)this.extend(E[M])}B.prototype={extend:function(f){var v,E;if(!f)return this;if(f instanceof te||typeof f[0]=="number"||"x"in f)v=E=oe(f);else if(f=V(f),v=f.min,E=f.max,!v||!E)return this;return!this.min&&!this.max?(this.min=v.clone(),this.max=E.clone()):(this.min.x=Math.min(v.x,this.min.x),this.max.x=Math.max(E.x,this.max.x),this.min.y=Math.min(v.y,this.min.y),this.max.y=Math.max(E.y,this.max.y)),this},getCenter:function(f){return oe((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,f)},getBottomLeft:function(){return oe(this.min.x,this.max.y)},getTopRight:function(){return oe(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(f){var v,E;return typeof f[0]=="number"||f instanceof te?f=oe(f):f=V(f),f instanceof B?(v=f.min,E=f.max):v=E=f,v.x>=this.min.x&&E.x<=this.max.x&&v.y>=this.min.y&&E.y<=this.max.y},intersects:function(f){f=V(f);var v=this.min,E=this.max,M=f.min,R=f.max,H=R.x>=v.x&&M.x<=E.x,ee=R.y>=v.y&&M.y<=E.y;return H&&ee},overlaps:function(f){f=V(f);var v=this.min,E=this.max,M=f.min,R=f.max,H=R.x>v.x&&M.x<E.x,ee=R.y>v.y&&M.y<E.y;return H&&ee},isValid:function(){return!!(this.min&&this.max)},pad:function(f){var v=this.min,E=this.max,M=Math.abs(v.x-E.x)*f,R=Math.abs(v.y-E.y)*f;return V(oe(v.x-M,v.y-R),oe(E.x+M,E.y+R))},equals:function(f){return f?(f=V(f),this.min.equals(f.getTopLeft())&&this.max.equals(f.getBottomRight())):!1}};function V(f,v){return!f||f instanceof B?f:new B(f,v)}function ie(f,v){if(f)for(var E=v?[f,v]:f,M=0,R=E.length;M<R;M++)this.extend(E[M])}ie.prototype={extend:function(f){var v=this._southWest,E=this._northEast,M,R;if(f instanceof se)M=f,R=f;else if(f instanceof ie){if(M=f._southWest,R=f._northEast,!M||!R)return this}else return f?this.extend(me(f)||Q(f)):this;return!v&&!E?(this._southWest=new se(M.lat,M.lng),this._northEast=new se(R.lat,R.lng)):(v.lat=Math.min(M.lat,v.lat),v.lng=Math.min(M.lng,v.lng),E.lat=Math.max(R.lat,E.lat),E.lng=Math.max(R.lng,E.lng)),this},pad:function(f){var v=this._southWest,E=this._northEast,M=Math.abs(v.lat-E.lat)*f,R=Math.abs(v.lng-E.lng)*f;return new ie(new se(v.lat-M,v.lng-R),new se(E.lat+M,E.lng+R))},getCenter:function(){return new se((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new se(this.getNorth(),this.getWest())},getSouthEast:function(){return new se(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(f){typeof f[0]=="number"||f instanceof se||"lat"in f?f=me(f):f=Q(f);var v=this._southWest,E=this._northEast,M,R;return f instanceof ie?(M=f.getSouthWest(),R=f.getNorthEast()):M=R=f,M.lat>=v.lat&&R.lat<=E.lat&&M.lng>=v.lng&&R.lng<=E.lng},intersects:function(f){f=Q(f);var v=this._southWest,E=this._northEast,M=f.getSouthWest(),R=f.getNorthEast(),H=R.lat>=v.lat&&M.lat<=E.lat,ee=R.lng>=v.lng&&M.lng<=E.lng;return H&&ee},overlaps:function(f){f=Q(f);var v=this._southWest,E=this._northEast,M=f.getSouthWest(),R=f.getNorthEast(),H=R.lat>v.lat&&M.lat<E.lat,ee=R.lng>v.lng&&M.lng<E.lng;return H&&ee},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(f,v){return f?(f=Q(f),this._southWest.equals(f.getSouthWest(),v)&&this._northEast.equals(f.getNorthEast(),v)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Q(f,v){return f instanceof ie?f:new ie(f,v)}function se(f,v,E){if(isNaN(f)||isNaN(v))throw new Error("Invalid LatLng object: ("+f+", "+v+")");this.lat=+f,this.lng=+v,E!==void 0&&(this.alt=+E)}se.prototype={equals:function(f,v){if(!f)return!1;f=me(f);var E=Math.max(Math.abs(this.lat-f.lat),Math.abs(this.lng-f.lng));return E<=(v===void 0?1e-9:v)},toString:function(f){return"LatLng("+b(this.lat,f)+", "+b(this.lng,f)+")"},distanceTo:function(f){return _e.distance(this,me(f))},wrap:function(){return _e.wrapLatLng(this)},toBounds:function(f){var v=180*f/40075017,E=v/Math.cos(Math.PI/180*this.lat);return Q([this.lat-v,this.lng-E],[this.lat+v,this.lng+E])},clone:function(){return new se(this.lat,this.lng,this.alt)}};function me(f,v,E){return f instanceof se?f:j(f)&&typeof f[0]!="object"?f.length===3?new se(f[0],f[1],f[2]):f.length===2?new se(f[0],f[1]):null:f==null?f:typeof f=="object"&&"lat"in f?new se(f.lat,"lng"in f?f.lng:f.lon,f.alt):v===void 0?null:new se(f,v,E)}var he={latLngToPoint:function(f,v){var E=this.projection.project(f),M=this.scale(v);return this.transformation._transform(E,M)},pointToLatLng:function(f,v){var E=this.scale(v),M=this.transformation.untransform(f,E);return this.projection.unproject(M)},project:function(f){return this.projection.project(f)},unproject:function(f){return this.projection.unproject(f)},scale:function(f){return 256*Math.pow(2,f)},zoom:function(f){return Math.log(f/256)/Math.LN2},getProjectedBounds:function(f){if(this.infinite)return null;var v=this.projection.bounds,E=this.scale(f),M=this.transformation.transform(v.min,E),R=this.transformation.transform(v.max,E);return new B(M,R)},infinite:!1,wrapLatLng:function(f){var v=this.wrapLng?h(f.lng,this.wrapLng,!0):f.lng,E=this.wrapLat?h(f.lat,this.wrapLat,!0):f.lat,M=f.alt;return new se(E,v,M)},wrapLatLngBounds:function(f){var v=f.getCenter(),E=this.wrapLatLng(v),M=v.lat-E.lat,R=v.lng-E.lng;if(M===0&&R===0)return f;var H=f.getSouthWest(),ee=f.getNorthEast(),fe=new se(H.lat-M,H.lng-R),be=new se(ee.lat-M,ee.lng-R);return new ie(fe,be)}},_e=i({},he,{wrapLng:[-180,180],R:6371e3,distance:function(f,v){var E=Math.PI/180,M=f.lat*E,R=v.lat*E,H=Math.sin((v.lat-f.lat)*E/2),ee=Math.sin((v.lng-f.lng)*E/2),fe=H*H+Math.cos(M)*Math.cos(R)*ee*ee,be=2*Math.atan2(Math.sqrt(fe),Math.sqrt(1-fe));return this.R*be}}),re=6378137,Ee={R:re,MAX_LATITUDE:85.0511287798,project:function(f){var v=Math.PI/180,E=this.MAX_LATITUDE,M=Math.max(Math.min(E,f.lat),-E),R=Math.sin(M*v);return new te(this.R*f.lng*v,this.R*Math.log((1+R)/(1-R))/2)},unproject:function(f){var v=180/Math.PI;return new se((2*Math.atan(Math.exp(f.y/this.R))-Math.PI/2)*v,f.x*v/this.R)},bounds:(function(){var f=re*Math.PI;return new B([-f,-f],[f,f])})()};function we(f,v,E,M){if(j(f)){this._a=f[0],this._b=f[1],this._c=f[2],this._d=f[3];return}this._a=f,this._b=v,this._c=E,this._d=M}we.prototype={transform:function(f,v){return this._transform(f.clone(),v)},_transform:function(f,v){return v=v||1,f.x=v*(this._a*f.x+this._b),f.y=v*(this._c*f.y+this._d),f},untransform:function(f,v){return v=v||1,new te((f.x/v-this._b)/this._a,(f.y/v-this._d)/this._c)}};function le(f,v,E,M){return new we(f,v,E,M)}var Ue=i({},_e,{code:"EPSG:3857",projection:Ee,transformation:(function(){var f=.5/(Math.PI*Ee.R);return le(f,.5,-f,.5)})()}),Fe=i({},Ue,{code:"EPSG:900913"});function Ne(f){return document.createElementNS("http://www.w3.org/2000/svg",f)}function Pe(f,v){var E="",M,R,H,ee,fe,be;for(M=0,H=f.length;M<H;M++){for(fe=f[M],R=0,ee=fe.length;R<ee;R++)be=fe[R],E+=(R?"L":"M")+be.x+" "+be.y;E+=v?We.svg?"z":"x":""}return E||"M0 0"}var Ge=document.documentElement.style,Oe="ActiveXObject"in window,Me=Oe&&!document.addEventListener,Be="msLaunchUri"in navigator&&!("documentMode"in document),lt=ti("webkit"),ue=ti("android"),Ce=ti("android 2")||ti("android 3"),ze=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),it=ue&&ti("Google")&&ze<537&&!("AudioNode"in window),Et=!!window.opera,pt=!Be&&ti("chrome"),Qt=ti("gecko")&&!lt&&!Et&&!Oe,$r=!pt&&ti("safari"),Br=ti("phantom"),Zi="OTransition"in Ge,ao=navigator.platform.indexOf("Win")===0,It=Oe&&"transition"in Ge,an="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Ce,zr="MozPerspective"in Ge,Yn=!window.L_DISABLE_3D&&(It||an||zr)&&!Zi&&!Br,qo=typeof orientation<"u"||ti("mobile"),If=qo&&lt,De=qo&&an,nt=!window.PointerEvent&&window.MSPointerEvent,Dt=!!(window.PointerEvent||nt),br="ontouchstart"in window||!!window.TouchEvent,ei=!window.L_NO_TOUCH&&(br||Dt),ju=qo&&Et,tc=qo&&Qt,Ix=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Wp=(function(){var f=!1;try{var v=Object.defineProperty({},"passive",{get:function(){f=!0}});window.addEventListener("testPassiveEventSupport",p,v),window.removeEventListener("testPassiveEventSupport",p,v)}catch{}return f})(),$f=(function(){return!!document.createElement("canvas").getContext})(),Yo=!!(document.createElementNS&&Ne("svg").createSVGRect),$x=!!Yo&&(function(){var f=document.createElement("div");return f.innerHTML="<svg/>",(f.firstChild&&f.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),Vp=!Yo&&(function(){try{var f=document.createElement("div");f.innerHTML='<v:shape adj="1"/>';var v=f.firstChild;return v.style.behavior="url(#default#VML)",v&&typeof v.adj=="object"}catch{return!1}})(),Zp=navigator.platform.indexOf("Mac")===0,Xp=navigator.platform.indexOf("Linux")===0;function ti(f){return navigator.userAgent.toLowerCase().indexOf(f)>=0}var We={ie:Oe,ielt9:Me,edge:Be,webkit:lt,android:ue,android23:Ce,androidStock:it,opera:Et,chrome:pt,gecko:Qt,safari:$r,phantom:Br,opera12:Zi,win:ao,ie3d:It,webkit3d:an,gecko3d:zr,any3d:Yn,mobile:qo,mobileWebkit:If,mobileWebkit3d:De,msPointer:nt,pointer:Dt,touch:ei,touchNative:br,mobileOpera:ju,mobileGecko:tc,retina:Ix,passiveEvents:Wp,canvas:$f,svg:Yo,vml:Vp,inlineSvg:$x,mac:Zp,linux:Xp},Bf=We.msPointer?"MSPointerDown":"pointerdown",zf=We.msPointer?"MSPointerMove":"pointermove",Na=We.msPointer?"MSPointerUp":"pointerup",Pn=We.msPointer?"MSPointerCancel":"pointercancel",ir={touchstart:Bf,touchmove:zf,touchend:Na,touchcancel:Pn},Ko={touchstart:Ws,touchmove:so,touchend:so,touchcancel:so},oo={},Jp=!1;function Bx(f,v,E){return v==="touchstart"&&Ks(),Ko[v]?(E=Ko[v].bind(this,E),f.addEventListener(ir[v],E,!1),E):(console.warn("wrong event specified:",v),p)}function Qp(f,v,E){if(!ir[v]){console.warn("wrong event specified:",v);return}f.removeEventListener(ir[v],E,!1)}function nc(f){oo[f.pointerId]=f}function Uf(f){oo[f.pointerId]&&(oo[f.pointerId]=f)}function Wo(f){delete oo[f.pointerId]}function Ks(){Jp||(document.addEventListener(Bf,nc,!0),document.addEventListener(zf,Uf,!0),document.addEventListener(Na,Wo,!0),document.addEventListener(Pn,Wo,!0),Jp=!0)}function so(f,v){if(v.pointerType!==(v.MSPOINTER_TYPE_MOUSE||"mouse")){v.touches=[];for(var E in oo)v.touches.push(oo[E]);v.changedTouches=[v],f(v)}}function Ws(f,v){v.MSPOINTER_TYPE_TOUCH&&v.pointerType===v.MSPOINTER_TYPE_TOUCH&&wn(v),so(f,v)}function Rn(f){var v={},E,M;for(M in f)E=f[M],v[M]=E&&E.bind?E.bind(f):E;return f=v,v.type="dblclick",v.detail=2,v.isTrusted=!1,v._simulated=!0,v}var eg=200;function tg(f,v){f.addEventListener("dblclick",v);var E=0,M;function R(H){if(H.detail!==1){M=H.detail;return}if(!(H.pointerType==="mouse"||H.sourceCapabilities&&!H.sourceCapabilities.firesTouchEvents)){var ee=cc(H);if(!(ee.some(function(be){return be instanceof HTMLLabelElement&&be.attributes.for})&&!ee.some(function(be){return be instanceof HTMLInputElement||be instanceof HTMLSelectElement}))){var fe=Date.now();fe-E<=eg?(M++,M===2&&v(Rn(H))):M=1,E=fe}}}return f.addEventListener("click",R),{dblclick:v,simDblclick:R}}function Vo(f,v){f.removeEventListener("dblclick",v.dblclick),f.removeEventListener("click",v.simDblclick)}var lo=ac(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),rc=ac(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Ff=rc==="webkitTransition"||rc==="OTransition"?rc+"End":"transitionend";function Hf(f){return typeof f=="string"?document.getElementById(f):f}function ic(f,v){var E=f.style[v]||f.currentStyle&&f.currentStyle[v];if((!E||E==="auto")&&document.defaultView){var M=document.defaultView.getComputedStyle(f,null);E=M?M[v]:null}return E==="auto"?null:E}function gt(f,v,E){var M=document.createElement(f);return M.className=v||"",E&&E.appendChild(M),M}function Ut(f){var v=f.parentNode;v&&v.removeChild(f)}function ni(f){for(;f.firstChild;)f.removeChild(f.firstChild)}function Kn(f){var v=f.parentNode;v&&v.lastChild!==f&&v.appendChild(f)}function Zo(f){var v=f.parentNode;v&&v.firstChild!==f&&v.insertBefore(f,v.firstChild)}function Gf(f,v){if(f.classList!==void 0)return f.classList.contains(v);var E=Ou(f);return E.length>0&&new RegExp("(^|\\s)"+v+"(\\s|$)").test(E)}function ct(f,v){if(f.classList!==void 0)for(var E=S(v),M=0,R=E.length;M<R;M++)f.classList.add(E[M]);else if(!Gf(f,v)){var H=Ou(f);Vs(f,(H?H+" ":"")+v)}}function on(f,v){f.classList!==void 0?f.classList.remove(v):Vs(f,y((" "+Ou(f)+" ").replace(" "+v+" "," ")))}function Vs(f,v){f.className.baseVal===void 0?f.className=v:f.className.baseVal=v}function Ou(f){return f.correspondingElement&&(f=f.correspondingElement),f.className.baseVal===void 0?f.className:f.className.baseVal}function en(f,v){"opacity"in f.style?f.style.opacity=v:"filter"in f.style&&qf(f,v)}function qf(f,v){var E=!1,M="DXImageTransform.Microsoft.Alpha";try{E=f.filters.item(M)}catch{if(v===1)return}v=Math.round(v*100),E?(E.Enabled=v!==100,E.Opacity=v):f.style.filter+=" progid:"+M+"(opacity="+v+")"}function ac(f){for(var v=document.documentElement.style,E=0;E<f.length;E++)if(f[E]in v)return f[E];return!1}function Ca(f,v,E){var M=v||new te(0,0);f.style[lo]=(We.ie3d?"translate("+M.x+"px,"+M.y+"px)":"translate3d("+M.x+"px,"+M.y+"px,0)")+(E?" scale("+E+")":"")}function qt(f,v){f._leaflet_pos=v,We.any3d?Ca(f,v):(f.style.left=v.x+"px",f.style.top=v.y+"px")}function co(f){return f._leaflet_pos||new te(0,0)}var Zs,Xi,Yf;if("onselectstart"in document)Zs=function(){ot(window,"selectstart",wn)},Xi=function(){Pt(window,"selectstart",wn)};else{var Xs=ac(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Zs=function(){if(Xs){var f=document.documentElement.style;Yf=f[Xs],f[Xs]="none"}},Xi=function(){Xs&&(document.documentElement.style[Xs]=Yf,Yf=void 0)}}function Nu(){ot(window,"dragstart",wn)}function oc(){Pt(window,"dragstart",wn)}var Cu,Kf;function Js(f){for(;f.tabIndex===-1;)f=f.parentNode;f.style&&(ri(),Cu=f,Kf=f.style.outlineStyle,f.style.outlineStyle="none",ot(window,"keydown",ri))}function ri(){Cu&&(Cu.style.outlineStyle=Kf,Cu=void 0,Kf=void 0,Pt(window,"keydown",ri))}function Mu(f){do f=f.parentNode;while((!f.offsetWidth||!f.offsetHeight)&&f!==document.body);return f}function sc(f){var v=f.getBoundingClientRect();return{x:v.width/f.offsetWidth||1,y:v.height/f.offsetHeight||1,boundingClientRect:v}}var Qs={__proto__:null,TRANSFORM:lo,TRANSITION:rc,TRANSITION_END:Ff,get:Hf,getStyle:ic,create:gt,remove:Ut,empty:ni,toFront:Kn,toBack:Zo,hasClass:Gf,addClass:ct,removeClass:on,setClass:Vs,getClass:Ou,setOpacity:en,testProp:ac,setTransform:Ca,setPosition:qt,getPosition:co,get disableTextSelection(){return Zs},get enableTextSelection(){return Xi},disableImageDrag:Nu,enableImageDrag:oc,preventOutline:Js,restoreOutline:ri,getSizedParentNode:Mu,getScale:sc};function ot(f,v,E,M){if(v&&typeof v=="object")for(var R in v)Ti(f,R,v[R],E);else{v=S(v);for(var H=0,ee=v.length;H<ee;H++)Ti(f,v[H],E,M)}return this}var Ei="_leaflet_events";function Pt(f,v,E,M){if(arguments.length===1)Wf(f),delete f[Ei];else if(v&&typeof v=="object")for(var R in v)lc(f,R,v[R],E);else if(v=S(v),arguments.length===2)Wf(f,function(fe){return C(v,fe)!==-1});else for(var H=0,ee=v.length;H<ee;H++)lc(f,v[H],E,M);return this}function Wf(f,v){for(var E in f[Ei]){var M=E.split(/\d/)[0];(!v||v(M))&&lc(f,M,null,null,E)}}var Xo={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Ti(f,v,E,M){var R=v+u(E)+(M?"_"+u(M):"");if(f[Ei]&&f[Ei][R])return this;var H=function(fe){return E.call(M||f,fe||window.event)},ee=H;!We.touchNative&&We.pointer&&v.indexOf("touch")===0?H=Bx(f,v,H):We.touch&&v==="dblclick"?H=tg(f,H):"addEventListener"in f?v==="touchstart"||v==="touchmove"||v==="wheel"||v==="mousewheel"?f.addEventListener(Xo[v]||v,H,We.passiveEvents?{passive:!1}:!1):v==="mouseenter"||v==="mouseleave"?(H=function(fe){fe=fe||window.event,Ma(f,fe)&&ee(fe)},f.addEventListener(Xo[v],H,!1)):f.addEventListener(v,ee,!1):f.attachEvent("on"+v,H),f[Ei]=f[Ei]||{},f[Ei][R]=H}function lc(f,v,E,M,R){R=R||v+u(E)+(M?"_"+u(M):"");var H=f[Ei]&&f[Ei][R];if(!H)return this;!We.touchNative&&We.pointer&&v.indexOf("touch")===0?Qp(f,v,H):We.touch&&v==="dblclick"?Vo(f,H):"removeEventListener"in f?f.removeEventListener(Xo[v]||v,H,!1):f.detachEvent("on"+v,H),f[Ei][R]=null}function Ai(f){return f.stopPropagation?f.stopPropagation():f.originalEvent?f.originalEvent._stopped=!0:f.cancelBubble=!0,this}function Ji(f){return Ti(f,"wheel",Ai),this}function Jo(f){return ot(f,"mousedown touchstart dblclick contextmenu",Ai),f._leaflet_disable_click=!0,this}function wn(f){return f.preventDefault?f.preventDefault():f.returnValue=!1,this}function uo(f){return wn(f),Ai(f),this}function cc(f){if(f.composedPath)return f.composedPath();for(var v=[],E=f.target;E;)v.push(E),E=E.parentNode;return v}function uc(f,v){if(!v)return new te(f.clientX,f.clientY);var E=sc(v),M=E.boundingClientRect;return new te((f.clientX-M.left)/E.x-v.clientLeft,(f.clientY-M.top)/E.y-v.clientTop)}var ng=We.linux&&We.chrome?window.devicePixelRatio:We.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function yr(f){return We.edge?f.wheelDeltaY/2:f.deltaY&&f.deltaMode===0?-f.deltaY/ng:f.deltaY&&f.deltaMode===1?-f.deltaY*20:f.deltaY&&f.deltaMode===2?-f.deltaY*60:f.deltaX||f.deltaZ?0:f.wheelDelta?(f.wheelDeltaY||f.wheelDelta)/2:f.detail&&Math.abs(f.detail)<32765?-f.detail*20:f.detail?f.detail/-32765*60:0}function Ma(f,v){var E=v.relatedTarget;if(!E)return!0;try{for(;E&&E!==f;)E=E.parentNode}catch{return!1}return E!==f}var Du={__proto__:null,on:ot,off:Pt,stopPropagation:Ai,disableScrollPropagation:Ji,disableClickPropagation:Jo,preventDefault:wn,stop:uo,getPropagationPath:cc,getMousePosition:uc,getWheelDelta:yr,isExternalTarget:Ma,addListener:ot,removeListener:Pt},el=J.extend({run:function(f,v,E,M){this.stop(),this._el=f,this._inProgress=!0,this._duration=E||.25,this._easeOutPower=1/Math.max(M||.5,.2),this._startPos=co(f),this._offset=v.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=F(this._animate,this),this._step()},_step:function(f){var v=+new Date-this._startTime,E=this._duration*1e3;v<E?this._runFrame(this._easeOut(v/E),f):(this._runFrame(1),this._complete())},_runFrame:function(f,v){var E=this._startPos.add(this._offset.multiplyBy(f));v&&E._round(),qt(this._el,E),this.fire("step")},_complete:function(){z(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(f){return 1-Math.pow(1-f,this._easeOutPower)}}),xt=J.extend({options:{crs:Ue,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(f,v){v=_(this,v),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(f),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),v.maxBounds&&this.setMaxBounds(v.maxBounds),v.zoom!==void 0&&(this._zoom=this._limitZoom(v.zoom)),v.center&&v.zoom!==void 0&&this.setView(me(v.center),v.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=rc&&We.any3d&&!We.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ot(this._proxy,Ff,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(f,v,E){if(v=v===void 0?this._zoom:this._limitZoom(v),f=this._limitCenter(me(f),v,this.options.maxBounds),E=E||{},this._stop(),this._loaded&&!E.reset&&E!==!0){E.animate!==void 0&&(E.zoom=i({animate:E.animate},E.zoom),E.pan=i({animate:E.animate,duration:E.duration},E.pan));var M=this._zoom!==v?this._tryAnimatedZoom&&this._tryAnimatedZoom(f,v,E.zoom):this._tryAnimatedPan(f,E.pan);if(M)return clearTimeout(this._sizeTimer),this}return this._resetView(f,v,E.pan&&E.pan.noMoveStart),this},setZoom:function(f,v){return this._loaded?this.setView(this.getCenter(),f,{zoom:v}):(this._zoom=f,this)},zoomIn:function(f,v){return f=f||(We.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+f,v)},zoomOut:function(f,v){return f=f||(We.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-f,v)},setZoomAround:function(f,v,E){var M=this.getZoomScale(v),R=this.getSize().divideBy(2),H=f instanceof te?f:this.latLngToContainerPoint(f),ee=H.subtract(R).multiplyBy(1-1/M),fe=this.containerPointToLatLng(R.add(ee));return this.setView(fe,v,{zoom:E})},_getBoundsCenterZoom:function(f,v){v=v||{},f=f.getBounds?f.getBounds():Q(f);var E=oe(v.paddingTopLeft||v.padding||[0,0]),M=oe(v.paddingBottomRight||v.padding||[0,0]),R=this.getBoundsZoom(f,!1,E.add(M));if(R=typeof v.maxZoom=="number"?Math.min(v.maxZoom,R):R,R===1/0)return{center:f.getCenter(),zoom:R};var H=M.subtract(E).divideBy(2),ee=this.project(f.getSouthWest(),R),fe=this.project(f.getNorthEast(),R),be=this.unproject(ee.add(fe).divideBy(2).add(H),R);return{center:be,zoom:R}},fitBounds:function(f,v){if(f=Q(f),!f.isValid())throw new Error("Bounds are not valid.");var E=this._getBoundsCenterZoom(f,v);return this.setView(E.center,E.zoom,v)},fitWorld:function(f){return this.fitBounds([[-90,-180],[90,180]],f)},panTo:function(f,v){return this.setView(f,this._zoom,{pan:v})},panBy:function(f,v){if(f=oe(f).round(),v=v||{},!f.x&&!f.y)return this.fire("moveend");if(v.animate!==!0&&!this.getSize().contains(f))return this._resetView(this.unproject(this.project(this.getCenter()).add(f)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new el,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),v.noMoveStart||this.fire("movestart"),v.animate!==!1){ct(this._mapPane,"leaflet-pan-anim");var E=this._getMapPanePos().subtract(f).round();this._panAnim.run(this._mapPane,E,v.duration||.25,v.easeLinearity)}else this._rawPanBy(f),this.fire("move").fire("moveend");return this},flyTo:function(f,v,E){if(E=E||{},E.animate===!1||!We.any3d)return this.setView(f,v,E);this._stop();var M=this.project(this.getCenter()),R=this.project(f),H=this.getSize(),ee=this._zoom;f=me(f),v=v===void 0?ee:v;var fe=Math.max(H.x,H.y),be=fe*this.getZoomScale(ee,v),Ae=R.distanceTo(M)||1,$e=1.42,Ze=$e*$e;function ft(pn){var La=pn?-1:1,ns=pn?be:fe,ch=be*be-fe*fe+La*Ze*Ze*Ae*Ae,Tc=2*ns*Ze*Ae,Ac=ch/Tc,xo=Math.sqrt(Ac*Ac+1)-Ac,Ia=xo<1e-9?-18:Math.log(xo);return Ia}function Wn(pn){return(Math.exp(pn)-Math.exp(-pn))/2}function _n(pn){return(Math.exp(pn)+Math.exp(-pn))/2}function Fr(pn){return Wn(pn)/_n(pn)}var Tt=ft(0);function At(pn){return fe*(_n(Tt)/_n(Tt+$e*pn))}function bt(pn){return fe*(_n(Tt)*Fr(Tt+$e*pn)-Wn(Tt))/Ze}function yo(pn){return 1-Math.pow(1-pn,1.5)}var si=Date.now(),Ku=(ft(1)-Tt)/$e,vo=E.duration?1e3*E.duration:1e3*Ku*.8;function lh(){var pn=(Date.now()-si)/vo,La=yo(pn)*Ku;pn<=1?(this._flyToFrame=F(lh,this),this._move(this.unproject(M.add(R.subtract(M).multiplyBy(bt(La)/Ae)),ee),this.getScaleZoom(fe/At(La),ee),{flyTo:!0})):this._move(f,v)._moveEnd(!0)}return this._moveStart(!0,E.noMoveStart),lh.call(this),this},flyToBounds:function(f,v){var E=this._getBoundsCenterZoom(f,v);return this.flyTo(E.center,E.zoom,v)},setMaxBounds:function(f){return f=Q(f),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),f.isValid()?(this.options.maxBounds=f,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(f){var v=this.options.minZoom;return this.options.minZoom=f,this._loaded&&v!==f&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(f):this},setMaxZoom:function(f){var v=this.options.maxZoom;return this.options.maxZoom=f,this._loaded&&v!==f&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(f):this},panInsideBounds:function(f,v){this._enforcingBounds=!0;var E=this.getCenter(),M=this._limitCenter(E,this._zoom,Q(f));return E.equals(M)||this.panTo(M,v),this._enforcingBounds=!1,this},panInside:function(f,v){v=v||{};var E=oe(v.paddingTopLeft||v.padding||[0,0]),M=oe(v.paddingBottomRight||v.padding||[0,0]),R=this.project(this.getCenter()),H=this.project(f),ee=this.getPixelBounds(),fe=V([ee.min.add(E),ee.max.subtract(M)]),be=fe.getSize();if(!fe.contains(H)){this._enforcingBounds=!0;var Ae=H.subtract(fe.getCenter()),$e=fe.extend(H).getSize().subtract(be);R.x+=Ae.x<0?-$e.x:$e.x,R.y+=Ae.y<0?-$e.y:$e.y,this.panTo(this.unproject(R),v),this._enforcingBounds=!1}return this},invalidateSize:function(f){if(!this._loaded)return this;f=i({animate:!1,pan:!0},f===!0?{animate:!0}:f);var v=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var E=this.getSize(),M=v.divideBy(2).round(),R=E.divideBy(2).round(),H=M.subtract(R);return!H.x&&!H.y?this:(f.animate&&f.pan?this.panBy(H):(f.pan&&this._rawPanBy(H),this.fire("move"),f.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:v,newSize:E}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(f){if(f=this._locateOptions=i({timeout:1e4,watch:!1},f),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var v=o(this._handleGeolocationResponse,this),E=o(this._handleGeolocationError,this);return f.watch?this._locationWatchId=navigator.geolocation.watchPosition(v,E,f):navigator.geolocation.getCurrentPosition(v,E,f),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(f){if(this._container._leaflet_id){var v=f.code,E=f.message||(v===1?"permission denied":v===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:v,message:"Geolocation error: "+E+"."})}},_handleGeolocationResponse:function(f){if(this._container._leaflet_id){var v=f.coords.latitude,E=f.coords.longitude,M=new se(v,E),R=M.toBounds(f.coords.accuracy*2),H=this._locateOptions;if(H.setView){var ee=this.getBoundsZoom(R);this.setView(M,H.maxZoom?Math.min(ee,H.maxZoom):ee)}var fe={latlng:M,bounds:R,timestamp:f.timestamp};for(var be in f.coords)typeof f.coords[be]=="number"&&(fe[be]=f.coords[be]);this.fire("locationfound",fe)}},addHandler:function(f,v){if(!v)return this;var E=this[f]=new v(this);return this._handlers.push(E),this.options[f]&&E.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Ut(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(z(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var f;for(f in this._layers)this._layers[f].remove();for(f in this._panes)Ut(this._panes[f]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(f,v){var E="leaflet-pane"+(f?" leaflet-"+f.replace("Pane","")+"-pane":""),M=gt("div",E,v||this._mapPane);return f&&(this._panes[f]=M),M},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var f=this.getPixelBounds(),v=this.unproject(f.getBottomLeft()),E=this.unproject(f.getTopRight());return new ie(v,E)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(f,v,E){f=Q(f),E=oe(E||[0,0]);var M=this.getZoom()||0,R=this.getMinZoom(),H=this.getMaxZoom(),ee=f.getNorthWest(),fe=f.getSouthEast(),be=this.getSize().subtract(E),Ae=V(this.project(fe,M),this.project(ee,M)).getSize(),$e=We.any3d?this.options.zoomSnap:1,Ze=be.x/Ae.x,ft=be.y/Ae.y,Wn=v?Math.max(Ze,ft):Math.min(Ze,ft);return M=this.getScaleZoom(Wn,M),$e&&(M=Math.round(M/($e/100))*($e/100),M=v?Math.ceil(M/$e)*$e:Math.floor(M/$e)*$e),Math.max(R,Math.min(H,M))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new te(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(f,v){var E=this._getTopLeftPoint(f,v);return new B(E,E.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(f){return this.options.crs.getProjectedBounds(f===void 0?this.getZoom():f)},getPane:function(f){return typeof f=="string"?this._panes[f]:f},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(f,v){var E=this.options.crs;return v=v===void 0?this._zoom:v,E.scale(f)/E.scale(v)},getScaleZoom:function(f,v){var E=this.options.crs;v=v===void 0?this._zoom:v;var M=E.zoom(f*E.scale(v));return isNaN(M)?1/0:M},project:function(f,v){return v=v===void 0?this._zoom:v,this.options.crs.latLngToPoint(me(f),v)},unproject:function(f,v){return v=v===void 0?this._zoom:v,this.options.crs.pointToLatLng(oe(f),v)},layerPointToLatLng:function(f){var v=oe(f).add(this.getPixelOrigin());return this.unproject(v)},latLngToLayerPoint:function(f){var v=this.project(me(f))._round();return v._subtract(this.getPixelOrigin())},wrapLatLng:function(f){return this.options.crs.wrapLatLng(me(f))},wrapLatLngBounds:function(f){return this.options.crs.wrapLatLngBounds(Q(f))},distance:function(f,v){return this.options.crs.distance(me(f),me(v))},containerPointToLayerPoint:function(f){return oe(f).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(f){return oe(f).add(this._getMapPanePos())},containerPointToLatLng:function(f){var v=this.containerPointToLayerPoint(oe(f));return this.layerPointToLatLng(v)},latLngToContainerPoint:function(f){return this.layerPointToContainerPoint(this.latLngToLayerPoint(me(f)))},mouseEventToContainerPoint:function(f){return uc(f,this._container)},mouseEventToLayerPoint:function(f){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(f))},mouseEventToLatLng:function(f){return this.layerPointToLatLng(this.mouseEventToLayerPoint(f))},_initContainer:function(f){var v=this._container=Hf(f);if(v){if(v._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ot(v,"scroll",this._onScroll,this),this._containerId=u(v)},_initLayout:function(){var f=this._container;this._fadeAnimated=this.options.fadeAnimation&&We.any3d,ct(f,"leaflet-container"+(We.touch?" leaflet-touch":"")+(We.retina?" leaflet-retina":"")+(We.ielt9?" leaflet-oldie":"")+(We.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var v=ic(f,"position");v!=="absolute"&&v!=="relative"&&v!=="fixed"&&v!=="sticky"&&(f.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var f=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),qt(this._mapPane,new te(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ct(f.markerPane,"leaflet-zoom-hide"),ct(f.shadowPane,"leaflet-zoom-hide"))},_resetView:function(f,v,E){qt(this._mapPane,new te(0,0));var M=!this._loaded;this._loaded=!0,v=this._limitZoom(v),this.fire("viewprereset");var R=this._zoom!==v;this._moveStart(R,E)._move(f,v)._moveEnd(R),this.fire("viewreset"),M&&this.fire("load")},_moveStart:function(f,v){return f&&this.fire("zoomstart"),v||this.fire("movestart"),this},_move:function(f,v,E,M){v===void 0&&(v=this._zoom);var R=this._zoom!==v;return this._zoom=v,this._lastCenter=f,this._pixelOrigin=this._getNewPixelOrigin(f),M?E&&E.pinch&&this.fire("zoom",E):((R||E&&E.pinch)&&this.fire("zoom",E),this.fire("move",E)),this},_moveEnd:function(f){return f&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return z(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(f){qt(this._mapPane,this._getMapPanePos().subtract(f))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(f){this._targets={},this._targets[u(this._container)]=this;var v=f?Pt:ot;v(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&v(window,"resize",this._onResize,this),We.any3d&&this.options.transform3DLimit&&(f?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){z(this._resizeRequest),this._resizeRequest=F(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var f=this._getMapPanePos();Math.max(Math.abs(f.x),Math.abs(f.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(f,v){for(var E=[],M,R=v==="mouseout"||v==="mouseover",H=f.target||f.srcElement,ee=!1;H;){if(M=this._targets[u(H)],M&&(v==="click"||v==="preclick")&&this._draggableMoved(M)){ee=!0;break}if(M&&M.listens(v,!0)&&(R&&!Ma(H,f)||(E.push(M),R))||H===this._container)break;H=H.parentNode}return!E.length&&!ee&&!R&&this.listens(v,!0)&&(E=[this]),E},_isClickDisabled:function(f){for(;f&&f!==this._container;){if(f._leaflet_disable_click)return!0;f=f.parentNode}},_handleDOMEvent:function(f){var v=f.target||f.srcElement;if(!(!this._loaded||v._leaflet_disable_events||f.type==="click"&&this._isClickDisabled(v))){var E=f.type;E==="mousedown"&&Js(v),this._fireDOMEvent(f,E)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(f,v,E){if(f.type==="click"){var M=i({},f);M.type="preclick",this._fireDOMEvent(M,M.type,E)}var R=this._findEventTargets(f,v);if(E){for(var H=[],ee=0;ee<E.length;ee++)E[ee].listens(v,!0)&&H.push(E[ee]);R=H.concat(R)}if(R.length){v==="contextmenu"&&wn(f);var fe=R[0],be={originalEvent:f};if(f.type!=="keypress"&&f.type!=="keydown"&&f.type!=="keyup"){var Ae=fe.getLatLng&&(!fe._radius||fe._radius<=10);be.containerPoint=Ae?this.latLngToContainerPoint(fe.getLatLng()):this.mouseEventToContainerPoint(f),be.layerPoint=this.containerPointToLayerPoint(be.containerPoint),be.latlng=Ae?fe.getLatLng():this.layerPointToLatLng(be.layerPoint)}for(ee=0;ee<R.length;ee++)if(R[ee].fire(v,be,!0),be.originalEvent._stopped||R[ee].options.bubblingMouseEvents===!1&&C(this._mouseEvents,v)!==-1)return}},_draggableMoved:function(f){return f=f.dragging&&f.dragging.enabled()?f:this,f.dragging&&f.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var f=0,v=this._handlers.length;f<v;f++)this._handlers[f].disable()},whenReady:function(f,v){return this._loaded?f.call(v||this,{target:this}):this.on("load",f,v),this},_getMapPanePos:function(){return co(this._mapPane)||new te(0,0)},_moved:function(){var f=this._getMapPanePos();return f&&!f.equals([0,0])},_getTopLeftPoint:function(f,v){var E=f&&v!==void 0?this._getNewPixelOrigin(f,v):this.getPixelOrigin();return E.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(f,v){var E=this.getSize()._divideBy(2);return this.project(f,v)._subtract(E)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(f,v,E){var M=this._getNewPixelOrigin(E,v);return this.project(f,v)._subtract(M)},_latLngBoundsToNewLayerBounds:function(f,v,E){var M=this._getNewPixelOrigin(E,v);return V([this.project(f.getSouthWest(),v)._subtract(M),this.project(f.getNorthWest(),v)._subtract(M),this.project(f.getSouthEast(),v)._subtract(M),this.project(f.getNorthEast(),v)._subtract(M)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(f){return this.latLngToLayerPoint(f).subtract(this._getCenterLayerPoint())},_limitCenter:function(f,v,E){if(!E)return f;var M=this.project(f,v),R=this.getSize().divideBy(2),H=new B(M.subtract(R),M.add(R)),ee=this._getBoundsOffset(H,E,v);return Math.abs(ee.x)<=1&&Math.abs(ee.y)<=1?f:this.unproject(M.add(ee),v)},_limitOffset:function(f,v){if(!v)return f;var E=this.getPixelBounds(),M=new B(E.min.add(f),E.max.add(f));return f.add(this._getBoundsOffset(M,v))},_getBoundsOffset:function(f,v,E){var M=V(this.project(v.getNorthEast(),E),this.project(v.getSouthWest(),E)),R=M.min.subtract(f.min),H=M.max.subtract(f.max),ee=this._rebound(R.x,-H.x),fe=this._rebound(R.y,-H.y);return new te(ee,fe)},_rebound:function(f,v){return f+v>0?Math.round(f-v)/2:Math.max(0,Math.ceil(f))-Math.max(0,Math.floor(v))},_limitZoom:function(f){var v=this.getMinZoom(),E=this.getMaxZoom(),M=We.any3d?this.options.zoomSnap:1;return M&&(f=Math.round(f/M)*M),Math.max(v,Math.min(E,f))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){on(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(f,v){var E=this._getCenterOffset(f)._trunc();return(v&&v.animate)!==!0&&!this.getSize().contains(E)?!1:(this.panBy(E,v),!0)},_createAnimProxy:function(){var f=this._proxy=gt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(f),this.on("zoomanim",function(v){var E=lo,M=this._proxy.style[E];Ca(this._proxy,this.project(v.center,v.zoom),this.getZoomScale(v.zoom,1)),M===this._proxy.style[E]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Ut(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var f=this.getCenter(),v=this.getZoom();Ca(this._proxy,this.project(f,v),this.getZoomScale(v,1))},_catchTransitionEnd:function(f){this._animatingZoom&&f.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(f,v,E){if(this._animatingZoom)return!0;if(E=E||{},!this._zoomAnimated||E.animate===!1||this._nothingToAnimate()||Math.abs(v-this._zoom)>this.options.zoomAnimationThreshold)return!1;var M=this.getZoomScale(v),R=this._getCenterOffset(f)._divideBy(1-1/M);return E.animate!==!0&&!this.getSize().contains(R)?!1:(F(function(){this._moveStart(!0,E.noMoveStart||!1)._animateZoom(f,v,!0)},this),!0)},_animateZoom:function(f,v,E,M){this._mapPane&&(E&&(this._animatingZoom=!0,this._animateToCenter=f,this._animateToZoom=v,ct(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:f,zoom:v,noUpdate:M}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&on(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Vf(f,v){return new xt(f,v)}var Ur=X.extend({options:{position:"topright"},initialize:function(f){_(this,f)},getPosition:function(){return this.options.position},setPosition:function(f){var v=this._map;return v&&v.removeControl(this),this.options.position=f,v&&v.addControl(this),this},getContainer:function(){return this._container},addTo:function(f){this.remove(),this._map=f;var v=this._container=this.onAdd(f),E=this.getPosition(),M=f._controlCorners[E];return ct(v,"leaflet-control"),E.indexOf("bottom")!==-1?M.insertBefore(v,M.firstChild):M.appendChild(v),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Ut(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(f){this._map&&f&&f.screenX>0&&f.screenY>0&&this._map.getContainer().focus()}}),Da=function(f){return new Ur(f)};xt.include({addControl:function(f){return f.addTo(this),this},removeControl:function(f){return f.remove(),this},_initControlPos:function(){var f=this._controlCorners={},v="leaflet-",E=this._controlContainer=gt("div",v+"control-container",this._container);function M(R,H){var ee=v+R+" "+v+H;f[R+H]=gt("div",ee,E)}M("top","left"),M("top","right"),M("bottom","left"),M("bottom","right")},_clearControlPos:function(){for(var f in this._controlCorners)Ut(this._controlCorners[f]);Ut(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var dc=Ur.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(f,v,E,M){return E<M?-1:M<E?1:0}},initialize:function(f,v,E){_(this,E),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var M in f)this._addLayer(f[M],M);for(M in v)this._addLayer(v[M],M,!0)},onAdd:function(f){this._initLayout(),this._update(),this._map=f,f.on("zoomend",this._checkDisabledLayers,this);for(var v=0;v<this._layers.length;v++)this._layers[v].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(f){return Ur.prototype.addTo.call(this,f),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var f=0;f<this._layers.length;f++)this._layers[f].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(f,v){return this._addLayer(f,v),this._map?this._update():this},addOverlay:function(f,v){return this._addLayer(f,v,!0),this._map?this._update():this},removeLayer:function(f){f.off("add remove",this._onLayerChange,this);var v=this._getLayer(u(f));return v&&this._layers.splice(this._layers.indexOf(v),1),this._map?this._update():this},expand:function(){ct(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var f=this._map.getSize().y-(this._container.offsetTop+50);return f<this._section.clientHeight?(ct(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=f+"px"):on(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return on(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var f="leaflet-control-layers",v=this._container=gt("div",f),E=this.options.collapsed;v.setAttribute("aria-haspopup",!0),Jo(v),Ji(v);var M=this._section=gt("section",f+"-list");E&&(this._map.on("click",this.collapse,this),ot(v,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var R=this._layersLink=gt("a",f+"-toggle",v);R.href="#",R.title="Layers",R.setAttribute("role","button"),ot(R,{keydown:function(H){H.keyCode===13&&this._expandSafely()},click:function(H){wn(H),this._expandSafely()}},this),E||this.expand(),this._baseLayersList=gt("div",f+"-base",M),this._separator=gt("div",f+"-separator",M),this._overlaysList=gt("div",f+"-overlays",M),v.appendChild(M)},_getLayer:function(f){for(var v=0;v<this._layers.length;v++)if(this._layers[v]&&u(this._layers[v].layer)===f)return this._layers[v]},_addLayer:function(f,v,E){this._map&&f.on("add remove",this._onLayerChange,this),this._layers.push({layer:f,name:v,overlay:E}),this.options.sortLayers&&this._layers.sort(o(function(M,R){return this.options.sortFunction(M.layer,R.layer,M.name,R.name)},this)),this.options.autoZIndex&&f.setZIndex&&(this._lastZIndex++,f.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ni(this._baseLayersList),ni(this._overlaysList),this._layerControlInputs=[];var f,v,E,M,R=0;for(E=0;E<this._layers.length;E++)M=this._layers[E],this._addItem(M),v=v||M.overlay,f=f||!M.overlay,R+=M.overlay?0:1;return this.options.hideSingleBase&&(f=f&&R>1,this._baseLayersList.style.display=f?"":"none"),this._separator.style.display=v&&f?"":"none",this},_onLayerChange:function(f){this._handlingClick||this._update();var v=this._getLayer(u(f.target)),E=v.overlay?f.type==="add"?"overlayadd":"overlayremove":f.type==="add"?"baselayerchange":null;E&&this._map.fire(E,v)},_createRadioElement:function(f,v){var E='<input type="radio" class="leaflet-control-layers-selector" name="'+f+'"'+(v?' checked="checked"':"")+"/>",M=document.createElement("div");return M.innerHTML=E,M.firstChild},_addItem:function(f){var v=document.createElement("label"),E=this._map.hasLayer(f.layer),M;f.overlay?(M=document.createElement("input"),M.type="checkbox",M.className="leaflet-control-layers-selector",M.defaultChecked=E):M=this._createRadioElement("leaflet-base-layers_"+u(this),E),this._layerControlInputs.push(M),M.layerId=u(f.layer),ot(M,"click",this._onInputClick,this);var R=document.createElement("span");R.innerHTML=" "+f.name;var H=document.createElement("span");v.appendChild(H),H.appendChild(M),H.appendChild(R);var ee=f.overlay?this._overlaysList:this._baseLayersList;return ee.appendChild(v),this._checkDisabledLayers(),v},_onInputClick:function(){if(!this._preventClick){var f=this._layerControlInputs,v,E,M=[],R=[];this._handlingClick=!0;for(var H=f.length-1;H>=0;H--)v=f[H],E=this._getLayer(v.layerId).layer,v.checked?M.push(E):v.checked||R.push(E);for(H=0;H<R.length;H++)this._map.hasLayer(R[H])&&this._map.removeLayer(R[H]);for(H=0;H<M.length;H++)this._map.hasLayer(M[H])||this._map.addLayer(M[H]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var f=this._layerControlInputs,v,E,M=this._map.getZoom(),R=f.length-1;R>=0;R--)v=f[R],E=this._getLayer(v.layerId).layer,v.disabled=E.options.minZoom!==void 0&&M<E.options.minZoom||E.options.maxZoom!==void 0&&M>E.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var f=this._section;this._preventClick=!0,ot(f,"click",wn),this.expand();var v=this;setTimeout(function(){Pt(f,"click",wn),v._preventClick=!1})}}),rg=function(f,v,E){return new dc(f,v,E)},Zf=Ur.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(f){var v="leaflet-control-zoom",E=gt("div",v+" leaflet-bar"),M=this.options;return this._zoomInButton=this._createButton(M.zoomInText,M.zoomInTitle,v+"-in",E,this._zoomIn),this._zoomOutButton=this._createButton(M.zoomOutText,M.zoomOutTitle,v+"-out",E,this._zoomOut),this._updateDisabled(),f.on("zoomend zoomlevelschange",this._updateDisabled,this),E},onRemove:function(f){f.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(f){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(f.shiftKey?3:1))},_zoomOut:function(f){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(f.shiftKey?3:1))},_createButton:function(f,v,E,M,R){var H=gt("a",E,M);return H.innerHTML=f,H.href="#",H.title=v,H.setAttribute("role","button"),H.setAttribute("aria-label",v),Jo(H),ot(H,"click",uo),ot(H,"click",R,this),ot(H,"click",this._refocusOnMap,this),H},_updateDisabled:function(){var f=this._map,v="leaflet-disabled";on(this._zoomInButton,v),on(this._zoomOutButton,v),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||f._zoom===f.getMinZoom())&&(ct(this._zoomOutButton,v),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||f._zoom===f.getMaxZoom())&&(ct(this._zoomInButton,v),this._zoomInButton.setAttribute("aria-disabled","true"))}});xt.mergeOptions({zoomControl:!0}),xt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Zf,this.addControl(this.zoomControl))});var zx=function(f){return new Zf(f)},ig=Ur.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(f){var v="leaflet-control-scale",E=gt("div",v),M=this.options;return this._addScales(M,v+"-line",E),f.on(M.updateWhenIdle?"moveend":"move",this._update,this),f.whenReady(this._update,this),E},onRemove:function(f){f.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(f,v,E){f.metric&&(this._mScale=gt("div",v,E)),f.imperial&&(this._iScale=gt("div",v,E))},_update:function(){var f=this._map,v=f.getSize().y/2,E=f.distance(f.containerPointToLatLng([0,v]),f.containerPointToLatLng([this.options.maxWidth,v]));this._updateScales(E)},_updateScales:function(f){this.options.metric&&f&&this._updateMetric(f),this.options.imperial&&f&&this._updateImperial(f)},_updateMetric:function(f){var v=this._getRoundNum(f),E=v<1e3?v+" m":v/1e3+" km";this._updateScale(this._mScale,E,v/f)},_updateImperial:function(f){var v=f*3.2808399,E,M,R;v>5280?(E=v/5280,M=this._getRoundNum(E),this._updateScale(this._iScale,M+" mi",M/E)):(R=this._getRoundNum(v),this._updateScale(this._iScale,R+" ft",R/v))},_updateScale:function(f,v,E){f.style.width=Math.round(this.options.maxWidth*E)+"px",f.innerHTML=v},_getRoundNum:function(f){var v=Math.pow(10,(Math.floor(f)+"").length-1),E=f/v;return E=E>=10?10:E>=5?5:E>=3?3:E>=2?2:1,v*E}}),Xf=function(f){return new ig(f)},Ux='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Jf=Ur.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(We.inlineSvg?Ux+" ":"")+"Leaflet</a>"},initialize:function(f){_(this,f),this._attributions={}},onAdd:function(f){f.attributionControl=this,this._container=gt("div","leaflet-control-attribution"),Jo(this._container);for(var v in f._layers)f._layers[v].getAttribution&&this.addAttribution(f._layers[v].getAttribution());return this._update(),f.on("layeradd",this._addAttribution,this),this._container},onRemove:function(f){f.off("layeradd",this._addAttribution,this)},_addAttribution:function(f){f.layer.getAttribution&&(this.addAttribution(f.layer.getAttribution()),f.layer.once("remove",function(){this.removeAttribution(f.layer.getAttribution())},this))},setPrefix:function(f){return this.options.prefix=f,this._update(),this},addAttribution:function(f){return f?(this._attributions[f]||(this._attributions[f]=0),this._attributions[f]++,this._update(),this):this},removeAttribution:function(f){return f?(this._attributions[f]&&(this._attributions[f]--,this._update()),this):this},_update:function(){if(this._map){var f=[];for(var v in this._attributions)this._attributions[v]&&f.push(v);var E=[];this.options.prefix&&E.push(this.options.prefix),f.length&&E.push(f.join(", ")),this._container.innerHTML=E.join(' <span aria-hidden="true">|</span> ')}}});xt.mergeOptions({attributionControl:!0}),xt.addInitHook(function(){this.options.attributionControl&&new Jf().addTo(this)});var Fx=function(f){return new Jf(f)};Ur.Layers=dc,Ur.Zoom=Zf,Ur.Scale=ig,Ur.Attribution=Jf,Da.layers=rg,Da.zoom=zx,Da.scale=Xf,Da.attribution=Fx;var Qi=X.extend({initialize:function(f){this._map=f},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Qi.addTo=function(f,v){return f.addHandler(v,this),this};var Hx={Events:G},Qf=We.touch?"touchstart mousedown":"mousedown",fo=J.extend({options:{clickTolerance:3},initialize:function(f,v,E,M){_(this,M),this._element=f,this._dragStartTarget=v||f,this._preventOutline=E},enable:function(){this._enabled||(ot(this._dragStartTarget,Qf,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(fo._dragging===this&&this.finishDrag(!0),Pt(this._dragStartTarget,Qf,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(f){if(this._enabled&&(this._moved=!1,!Gf(this._element,"leaflet-zoom-anim"))){if(f.touches&&f.touches.length!==1){fo._dragging===this&&this.finishDrag();return}if(!(fo._dragging||f.shiftKey||f.which!==1&&f.button!==1&&!f.touches)&&(fo._dragging=this,this._preventOutline&&Js(this._element),Nu(),Zs(),!this._moving)){this.fire("down");var v=f.touches?f.touches[0]:f,E=Mu(this._element);this._startPoint=new te(v.clientX,v.clientY),this._startPos=co(this._element),this._parentScale=sc(E);var M=f.type==="mousedown";ot(document,M?"mousemove":"touchmove",this._onMove,this),ot(document,M?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(f){if(this._enabled){if(f.touches&&f.touches.length>1){this._moved=!0;return}var v=f.touches&&f.touches.length===1?f.touches[0]:f,E=new te(v.clientX,v.clientY)._subtract(this._startPoint);!E.x&&!E.y||Math.abs(E.x)+Math.abs(E.y)<this.options.clickTolerance||(E.x/=this._parentScale.x,E.y/=this._parentScale.y,wn(f),this._moved||(this.fire("dragstart"),this._moved=!0,ct(document.body,"leaflet-dragging"),this._lastTarget=f.target||f.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ct(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(E),this._moving=!0,this._lastEvent=f,this._updatePosition())}},_updatePosition:function(){var f={originalEvent:this._lastEvent};this.fire("predrag",f),qt(this._element,this._newPos),this.fire("drag",f)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(f){on(document.body,"leaflet-dragging"),this._lastTarget&&(on(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Pt(document,"mousemove touchmove",this._onMove,this),Pt(document,"mouseup touchend touchcancel",this._onUp,this),oc(),Xi();var v=this._moved&&this._moving;this._moving=!1,fo._dragging=!1,v&&this.fire("dragend",{noInertia:f,distance:this._newPos.distanceTo(this._startPos)})}});function ag(f,v,E){var M,R=[1,4,2,8],H,ee,fe,be,Ae,$e,Ze,ft;for(H=0,$e=f.length;H<$e;H++)f[H]._code=Qo(f[H],v);for(fe=0;fe<4;fe++){for(Ze=R[fe],M=[],H=0,$e=f.length,ee=$e-1;H<$e;ee=H++)be=f[H],Ae=f[ee],be._code&Ze?Ae._code&Ze||(ft=Pu(Ae,be,Ze,v,E),ft._code=Qo(ft,v),M.push(ft)):(Ae._code&Ze&&(ft=Pu(Ae,be,Ze,v,E),ft._code=Qo(ft,v),M.push(ft)),M.push(be));f=M}return f}function og(f,v){var E,M,R,H,ee,fe,be,Ae,$e;if(!f||f.length===0)throw new Error("latlngs not passed");ii(f)||(console.warn("latlngs are not flat! Only the first ring will be used"),f=f[0]);var Ze=me([0,0]),ft=Q(f),Wn=ft.getNorthWest().distanceTo(ft.getSouthWest())*ft.getNorthEast().distanceTo(ft.getNorthWest());Wn<1700&&(Ze=eh(f));var _n=f.length,Fr=[];for(E=0;E<_n;E++){var Tt=me(f[E]);Fr.push(v.project(me([Tt.lat-Ze.lat,Tt.lng-Ze.lng])))}for(fe=be=Ae=0,E=0,M=_n-1;E<_n;M=E++)R=Fr[E],H=Fr[M],ee=R.y*H.x-H.y*R.x,be+=(R.x+H.x)*ee,Ae+=(R.y+H.y)*ee,fe+=ee*3;fe===0?$e=Fr[0]:$e=[be/fe,Ae/fe];var At=v.unproject(oe($e));return me([At.lat+Ze.lat,At.lng+Ze.lng])}function eh(f){for(var v=0,E=0,M=0,R=0;R<f.length;R++){var H=me(f[R]);v+=H.lat,E+=H.lng,M++}return me([v/M,E/M])}var th={__proto__:null,clipPolygon:ag,polygonCenter:og,centroid:eh};function sg(f,v){if(!v||!f.length)return f.slice();var E=v*v;return f=qx(f,E),f=cg(f,E),f}function lg(f,v,E){return Math.sqrt(fc(f,v,E,!0))}function Gx(f,v,E){return fc(f,v,E)}function cg(f,v){var E=f.length,M=typeof Uint8Array<"u"?Uint8Array:Array,R=new M(E);R[0]=R[E-1]=1,nh(f,R,v,0,E-1);var H,ee=[];for(H=0;H<E;H++)R[H]&&ee.push(f[H]);return ee}function nh(f,v,E,M,R){var H=0,ee,fe,be;for(fe=M+1;fe<=R-1;fe++)be=fc(f[fe],f[M],f[R],!0),be>H&&(ee=fe,H=be);H>E&&(v[ee]=1,nh(f,v,E,M,ee),nh(f,v,E,ee,R))}function qx(f,v){for(var E=[f[0]],M=1,R=0,H=f.length;M<H;M++)Yx(f[M],f[R])>v&&(E.push(f[M]),R=M);return R<H-1&&E.push(f[H-1]),E}var ug;function dg(f,v,E,M,R){var H=M?ug:Qo(f,E),ee=Qo(v,E),fe,be,Ae;for(ug=ee;;){if(!(H|ee))return[f,v];if(H&ee)return!1;fe=H||ee,be=Pu(f,v,fe,E,R),Ae=Qo(be,E),fe===H?(f=be,H=Ae):(v=be,ee=Ae)}}function Pu(f,v,E,M,R){var H=v.x-f.x,ee=v.y-f.y,fe=M.min,be=M.max,Ae,$e;return E&8?(Ae=f.x+H*(be.y-f.y)/ee,$e=be.y):E&4?(Ae=f.x+H*(fe.y-f.y)/ee,$e=fe.y):E&2?(Ae=be.x,$e=f.y+ee*(be.x-f.x)/H):E&1&&(Ae=fe.x,$e=f.y+ee*(fe.x-f.x)/H),new te(Ae,$e,R)}function Qo(f,v){var E=0;return f.x<v.min.x?E|=1:f.x>v.max.x&&(E|=2),f.y<v.min.y?E|=4:f.y>v.max.y&&(E|=8),E}function Yx(f,v){var E=v.x-f.x,M=v.y-f.y;return E*E+M*M}function fc(f,v,E,M){var R=v.x,H=v.y,ee=E.x-R,fe=E.y-H,be=ee*ee+fe*fe,Ae;return be>0&&(Ae=((f.x-R)*ee+(f.y-H)*fe)/be,Ae>1?(R=E.x,H=E.y):Ae>0&&(R+=ee*Ae,H+=fe*Ae)),ee=f.x-R,fe=f.y-H,M?ee*ee+fe*fe:new te(R,H)}function ii(f){return!j(f[0])||typeof f[0][0]!="object"&&typeof f[0][0]<"u"}function Ru(f){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),ii(f)}function tl(f,v){var E,M,R,H,ee,fe,be,Ae;if(!f||f.length===0)throw new Error("latlngs not passed");ii(f)||(console.warn("latlngs are not flat! Only the first ring will be used"),f=f[0]);var $e=me([0,0]),Ze=Q(f),ft=Ze.getNorthWest().distanceTo(Ze.getSouthWest())*Ze.getNorthEast().distanceTo(Ze.getNorthWest());ft<1700&&($e=eh(f));var Wn=f.length,_n=[];for(E=0;E<Wn;E++){var Fr=me(f[E]);_n.push(v.project(me([Fr.lat-$e.lat,Fr.lng-$e.lng])))}for(E=0,M=0;E<Wn-1;E++)M+=_n[E].distanceTo(_n[E+1])/2;if(M===0)Ae=_n[0];else for(E=0,H=0;E<Wn-1;E++)if(ee=_n[E],fe=_n[E+1],R=ee.distanceTo(fe),H+=R,H>M){be=(H-M)/R,Ae=[fe.x-be*(fe.x-ee.x),fe.y-be*(fe.y-ee.y)];break}var Tt=v.unproject(oe(Ae));return me([Tt.lat+$e.lat,Tt.lng+$e.lng])}var Kx={__proto__:null,simplify:sg,pointToSegmentDistance:lg,closestPointOnSegment:Gx,clipSegment:dg,_getEdgeIntersection:Pu,_getBitCode:Qo,_sqClosestPointOnSegment:fc,isFlat:ii,_flat:Ru,polylineCenter:tl},Lu={project:function(f){return new te(f.lng,f.lat)},unproject:function(f){return new se(f.y,f.x)},bounds:new B([-180,-90],[180,90])},Iu={R:6378137,R_MINOR:6356752314245179e-9,bounds:new B([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(f){var v=Math.PI/180,E=this.R,M=f.lat*v,R=this.R_MINOR/E,H=Math.sqrt(1-R*R),ee=H*Math.sin(M),fe=Math.tan(Math.PI/4-M/2)/Math.pow((1-ee)/(1+ee),H/2);return M=-E*Math.log(Math.max(fe,1e-10)),new te(f.lng*v*E,M)},unproject:function(f){for(var v=180/Math.PI,E=this.R,M=this.R_MINOR/E,R=Math.sqrt(1-M*M),H=Math.exp(-f.y/E),ee=Math.PI/2-2*Math.atan(H),fe=0,be=.1,Ae;fe<15&&Math.abs(be)>1e-7;fe++)Ae=R*Math.sin(ee),Ae=Math.pow((1-Ae)/(1+Ae),R/2),be=Math.PI/2-2*Math.atan(H*Ae)-ee,ee+=be;return new se(ee*v,f.x*v/E)}},fg={__proto__:null,LonLat:Lu,Mercator:Iu,SphericalMercator:Ee},hg=i({},_e,{code:"EPSG:3395",projection:Iu,transformation:(function(){var f=.5/(Math.PI*Iu.R);return le(f,.5,-f,.5)})()}),rh=i({},_e,{code:"EPSG:4326",projection:Lu,transformation:le(1/180,1,-1/180,.5)}),nl=i({},he,{projection:Lu,transformation:le(1,0,-1,0),scale:function(f){return Math.pow(2,f)},zoom:function(f){return Math.log(f)/Math.LN2},distance:function(f,v){var E=v.lng-f.lng,M=v.lat-f.lat;return Math.sqrt(E*E+M*M)},infinite:!0});he.Earth=_e,he.EPSG3395=hg,he.EPSG3857=Ue,he.EPSG900913=Fe,he.EPSG4326=rh,he.Simple=nl;var ji=J.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(f){return f.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(f){return f&&f.removeLayer(this),this},getPane:function(f){return this._map.getPane(f?this.options[f]||f:this.options.pane)},addInteractiveTarget:function(f){return this._map._targets[u(f)]=this,this},removeInteractiveTarget:function(f){return delete this._map._targets[u(f)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(f){var v=f.target;if(v.hasLayer(this)){if(this._map=v,this._zoomAnimated=v._zoomAnimated,this.getEvents){var E=this.getEvents();v.on(E,this),this.once("remove",function(){v.off(E,this)},this)}this.onAdd(v),this.fire("add"),v.fire("layeradd",{layer:this})}}});xt.include({addLayer:function(f){if(!f._layerAdd)throw new Error("The provided object is not a Layer.");var v=u(f);return this._layers[v]?this:(this._layers[v]=f,f._mapToAdd=this,f.beforeAdd&&f.beforeAdd(this),this.whenReady(f._layerAdd,f),this)},removeLayer:function(f){var v=u(f);return this._layers[v]?(this._loaded&&f.onRemove(this),delete this._layers[v],this._loaded&&(this.fire("layerremove",{layer:f}),f.fire("remove")),f._map=f._mapToAdd=null,this):this},hasLayer:function(f){return u(f)in this._layers},eachLayer:function(f,v){for(var E in this._layers)f.call(v,this._layers[E]);return this},_addLayers:function(f){f=f?j(f)?f:[f]:[];for(var v=0,E=f.length;v<E;v++)this.addLayer(f[v])},_addZoomLimit:function(f){(!isNaN(f.options.maxZoom)||!isNaN(f.options.minZoom))&&(this._zoomBoundLayers[u(f)]=f,this._updateZoomLevels())},_removeZoomLimit:function(f){var v=u(f);this._zoomBoundLayers[v]&&(delete this._zoomBoundLayers[v],this._updateZoomLevels())},_updateZoomLevels:function(){var f=1/0,v=-1/0,E=this._getZoomSpan();for(var M in this._zoomBoundLayers){var R=this._zoomBoundLayers[M].options;f=R.minZoom===void 0?f:Math.min(f,R.minZoom),v=R.maxZoom===void 0?v:Math.max(v,R.maxZoom)}this._layersMaxZoom=v===-1/0?void 0:v,this._layersMinZoom=f===1/0?void 0:f,E!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var rl=ji.extend({initialize:function(f,v){_(this,v),this._layers={};var E,M;if(f)for(E=0,M=f.length;E<M;E++)this.addLayer(f[E])},addLayer:function(f){var v=this.getLayerId(f);return this._layers[v]=f,this._map&&this._map.addLayer(f),this},removeLayer:function(f){var v=f in this._layers?f:this.getLayerId(f);return this._map&&this._layers[v]&&this._map.removeLayer(this._layers[v]),delete this._layers[v],this},hasLayer:function(f){var v=typeof f=="number"?f:this.getLayerId(f);return v in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(f){var v=Array.prototype.slice.call(arguments,1),E,M;for(E in this._layers)M=this._layers[E],M[f]&&M[f].apply(M,v);return this},onAdd:function(f){this.eachLayer(f.addLayer,f)},onRemove:function(f){this.eachLayer(f.removeLayer,f)},eachLayer:function(f,v){for(var E in this._layers)f.call(v,this._layers[E]);return this},getLayer:function(f){return this._layers[f]},getLayers:function(){var f=[];return this.eachLayer(f.push,f),f},setZIndex:function(f){return this.invoke("setZIndex",f)},getLayerId:function(f){return u(f)}}),Wx=function(f,v){return new rl(f,v)},ea=rl.extend({addLayer:function(f){return this.hasLayer(f)?this:(f.addEventParent(this),rl.prototype.addLayer.call(this,f),this.fire("layeradd",{layer:f}))},removeLayer:function(f){return this.hasLayer(f)?(f in this._layers&&(f=this._layers[f]),f.removeEventParent(this),rl.prototype.removeLayer.call(this,f),this.fire("layerremove",{layer:f})):this},setStyle:function(f){return this.invoke("setStyle",f)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var f=new ie;for(var v in this._layers){var E=this._layers[v];f.extend(E.getBounds?E.getBounds():E.getLatLng())}return f}}),mg=function(f,v){return new ea(f,v)},ta=X.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(f){_(this,f)},createIcon:function(f){return this._createIcon("icon",f)},createShadow:function(f){return this._createIcon("shadow",f)},_createIcon:function(f,v){var E=this._getIconUrl(f);if(!E){if(f==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var M=this._createImg(E,v&&v.tagName==="IMG"?v:null);return this._setIconStyles(M,f),(this.options.crossOrigin||this.options.crossOrigin==="")&&(M.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),M},_setIconStyles:function(f,v){var E=this.options,M=E[v+"Size"];typeof M=="number"&&(M=[M,M]);var R=oe(M),H=oe(v==="shadow"&&E.shadowAnchor||E.iconAnchor||R&&R.divideBy(2,!0));f.className="leaflet-marker-"+v+" "+(E.className||""),H&&(f.style.marginLeft=-H.x+"px",f.style.marginTop=-H.y+"px"),R&&(f.style.width=R.x+"px",f.style.height=R.y+"px")},_createImg:function(f,v){return v=v||document.createElement("img"),v.src=f,v},_getIconUrl:function(f){return We.retina&&this.options[f+"RetinaUrl"]||this.options[f+"Url"]}});function hc(f){return new ta(f)}var mc=ta.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(f){return typeof mc.imagePath!="string"&&(mc.imagePath=this._detectIconPath()),(this.options.imagePath||mc.imagePath)+ta.prototype._getIconUrl.call(this,f)},_stripUrl:function(f){var v=function(E,M,R){var H=M.exec(E);return H&&H[R]};return f=v(f,/^url\((['"])?(.+)\1\)$/,2),f&&v(f,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var f=gt("div","leaflet-default-icon-path",document.body),v=ic(f,"background-image")||ic(f,"backgroundImage");if(document.body.removeChild(f),v=this._stripUrl(v),v)return v;var E=document.querySelector('link[href$="leaflet.css"]');return E?E.href.substring(0,E.href.length-11-1):""}}),pc=Qi.extend({initialize:function(f){this._marker=f},addHooks:function(){var f=this._marker._icon;this._draggable||(this._draggable=new fo(f,f,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ct(f,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&on(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(f){var v=this._marker,E=v._map,M=this._marker.options.autoPanSpeed,R=this._marker.options.autoPanPadding,H=co(v._icon),ee=E.getPixelBounds(),fe=E.getPixelOrigin(),be=V(ee.min._subtract(fe).add(R),ee.max._subtract(fe).subtract(R));if(!be.contains(H)){var Ae=oe((Math.max(be.max.x,H.x)-be.max.x)/(ee.max.x-be.max.x)-(Math.min(be.min.x,H.x)-be.min.x)/(ee.min.x-be.min.x),(Math.max(be.max.y,H.y)-be.max.y)/(ee.max.y-be.max.y)-(Math.min(be.min.y,H.y)-be.min.y)/(ee.min.y-be.min.y)).multiplyBy(M);E.panBy(Ae,{animate:!1}),this._draggable._newPos._add(Ae),this._draggable._startPos._add(Ae),qt(v._icon,this._draggable._newPos),this._onDrag(f),this._panRequest=F(this._adjustPan.bind(this,f))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(f){this._marker.options.autoPan&&(z(this._panRequest),this._panRequest=F(this._adjustPan.bind(this,f)))},_onDrag:function(f){var v=this._marker,E=v._shadow,M=co(v._icon),R=v._map.layerPointToLatLng(M);E&&qt(E,M),v._latlng=R,f.latlng=R,f.oldLatLng=this._oldLatLng,v.fire("move",f).fire("drag",f)},_onDragEnd:function(f){z(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",f)}}),gc=ji.extend({options:{icon:new mc,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(f,v){_(this,v),this._latlng=me(f)},onAdd:function(f){this._zoomAnimated=this._zoomAnimated&&f.options.markerZoomAnimation,this._zoomAnimated&&f.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(f){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&f.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(f){var v=this._latlng;return this._latlng=me(f),this.update(),this.fire("move",{oldLatLng:v,latlng:this._latlng})},setZIndexOffset:function(f){return this.options.zIndexOffset=f,this.update()},getIcon:function(){return this.options.icon},setIcon:function(f){return this.options.icon=f,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var f=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(f)}return this},_initIcon:function(){var f=this.options,v="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),E=f.icon.createIcon(this._icon),M=!1;E!==this._icon&&(this._icon&&this._removeIcon(),M=!0,f.title&&(E.title=f.title),E.tagName==="IMG"&&(E.alt=f.alt||"")),ct(E,v),f.keyboard&&(E.tabIndex="0",E.setAttribute("role","button")),this._icon=E,f.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ot(E,"focus",this._panOnFocus,this);var R=f.icon.createShadow(this._shadow),H=!1;R!==this._shadow&&(this._removeShadow(),H=!0),R&&(ct(R,v),R.alt=""),this._shadow=R,f.opacity<1&&this._updateOpacity(),M&&this.getPane().appendChild(this._icon),this._initInteraction(),R&&H&&this.getPane(f.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Pt(this._icon,"focus",this._panOnFocus,this),Ut(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Ut(this._shadow),this._shadow=null},_setPos:function(f){this._icon&&qt(this._icon,f),this._shadow&&qt(this._shadow,f),this._zIndex=f.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(f){this._icon&&(this._icon.style.zIndex=this._zIndex+f)},_animateZoom:function(f){var v=this._map._latLngToNewLayerPoint(this._latlng,f.zoom,f.center).round();this._setPos(v)},_initInteraction:function(){if(this.options.interactive&&(ct(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),pc)){var f=this.options.draggable;this.dragging&&(f=this.dragging.enabled(),this.dragging.disable()),this.dragging=new pc(this),f&&this.dragging.enable()}},setOpacity:function(f){return this.options.opacity=f,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var f=this.options.opacity;this._icon&&en(this._icon,f),this._shadow&&en(this._shadow,f)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var f=this._map;if(f){var v=this.options.icon.options,E=v.iconSize?oe(v.iconSize):oe(0,0),M=v.iconAnchor?oe(v.iconAnchor):oe(0,0);f.panInside(this._latlng,{paddingTopLeft:M,paddingBottomRight:E.subtract(M)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function pg(f,v){return new gc(f,v)}var na=ji.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(f){this._renderer=f.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(f){return _(this,f),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&f&&Object.prototype.hasOwnProperty.call(f,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),il=na.extend({options:{fill:!0,radius:10},initialize:function(f,v){_(this,v),this._latlng=me(f),this._radius=this.options.radius},setLatLng:function(f){var v=this._latlng;return this._latlng=me(f),this.redraw(),this.fire("move",{oldLatLng:v,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(f){return this.options.radius=this._radius=f,this.redraw()},getRadius:function(){return this._radius},setStyle:function(f){var v=f&&f.radius||this._radius;return na.prototype.setStyle.call(this,f),this.setRadius(v),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var f=this._radius,v=this._radiusY||f,E=this._clickTolerance(),M=[f+E,v+E];this._pxBounds=new B(this._point.subtract(M),this._point.add(M))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(f){return f.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function gg(f,v){return new il(f,v)}var $u=il.extend({initialize:function(f,v,E){if(typeof v=="number"&&(v=i({},E,{radius:v})),_(this,v),this._latlng=me(f),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(f){return this._mRadius=f,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var f=[this._radius,this._radiusY||this._radius];return new ie(this._map.layerPointToLatLng(this._point.subtract(f)),this._map.layerPointToLatLng(this._point.add(f)))},setStyle:na.prototype.setStyle,_project:function(){var f=this._latlng.lng,v=this._latlng.lat,E=this._map,M=E.options.crs;if(M.distance===_e.distance){var R=Math.PI/180,H=this._mRadius/_e.R/R,ee=E.project([v+H,f]),fe=E.project([v-H,f]),be=ee.add(fe).divideBy(2),Ae=E.unproject(be).lat,$e=Math.acos((Math.cos(H*R)-Math.sin(v*R)*Math.sin(Ae*R))/(Math.cos(v*R)*Math.cos(Ae*R)))/R;(isNaN($e)||$e===0)&&($e=H/Math.cos(Math.PI/180*v)),this._point=be.subtract(E.getPixelOrigin()),this._radius=isNaN($e)?0:be.x-E.project([Ae,f-$e]).x,this._radiusY=be.y-ee.y}else{var Ze=M.unproject(M.project(this._latlng).subtract([this._mRadius,0]));this._point=E.latLngToLayerPoint(this._latlng),this._radius=this._point.x-E.latLngToLayerPoint(Ze).x}this._updateBounds()}});function bg(f,v,E){return new $u(f,v,E)}var Pa=na.extend({options:{smoothFactor:1,noClip:!1},initialize:function(f,v){_(this,v),this._setLatLngs(f)},getLatLngs:function(){return this._latlngs},setLatLngs:function(f){return this._setLatLngs(f),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(f){for(var v=1/0,E=null,M=fc,R,H,ee=0,fe=this._parts.length;ee<fe;ee++)for(var be=this._parts[ee],Ae=1,$e=be.length;Ae<$e;Ae++){R=be[Ae-1],H=be[Ae];var Ze=M(f,R,H,!0);Ze<v&&(v=Ze,E=M(f,R,H))}return E&&(E.distance=Math.sqrt(v)),E},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return tl(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(f,v){return v=v||this._defaultShape(),f=me(f),v.push(f),this._bounds.extend(f),this.redraw()},_setLatLngs:function(f){this._bounds=new ie,this._latlngs=this._convertLatLngs(f)},_defaultShape:function(){return ii(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(f){for(var v=[],E=ii(f),M=0,R=f.length;M<R;M++)E?(v[M]=me(f[M]),this._bounds.extend(v[M])):v[M]=this._convertLatLngs(f[M]);return v},_project:function(){var f=new B;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,f),this._bounds.isValid()&&f.isValid()&&(this._rawPxBounds=f,this._updateBounds())},_updateBounds:function(){var f=this._clickTolerance(),v=new te(f,f);this._rawPxBounds&&(this._pxBounds=new B([this._rawPxBounds.min.subtract(v),this._rawPxBounds.max.add(v)]))},_projectLatlngs:function(f,v,E){var M=f[0]instanceof se,R=f.length,H,ee;if(M){for(ee=[],H=0;H<R;H++)ee[H]=this._map.latLngToLayerPoint(f[H]),E.extend(ee[H]);v.push(ee)}else for(H=0;H<R;H++)this._projectLatlngs(f[H],v,E)},_clipPoints:function(){var f=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(f))){if(this.options.noClip){this._parts=this._rings;return}var v=this._parts,E,M,R,H,ee,fe,be;for(E=0,R=0,H=this._rings.length;E<H;E++)for(be=this._rings[E],M=0,ee=be.length;M<ee-1;M++)fe=dg(be[M],be[M+1],f,M,!0),fe&&(v[R]=v[R]||[],v[R].push(fe[0]),(fe[1]!==be[M+1]||M===ee-2)&&(v[R].push(fe[1]),R++))}},_simplifyPoints:function(){for(var f=this._parts,v=this.options.smoothFactor,E=0,M=f.length;E<M;E++)f[E]=sg(f[E],v)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(f,v){var E,M,R,H,ee,fe,be=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(f))return!1;for(E=0,H=this._parts.length;E<H;E++)for(fe=this._parts[E],M=0,ee=fe.length,R=ee-1;M<ee;R=M++)if(!(!v&&M===0)&&lg(f,fe[R],fe[M])<=be)return!0;return!1}});function Vx(f,v){return new Pa(f,v)}Pa._flat=Ru;var al=Pa.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return og(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(f){var v=Pa.prototype._convertLatLngs.call(this,f),E=v.length;return E>=2&&v[0]instanceof se&&v[0].equals(v[E-1])&&v.pop(),v},_setLatLngs:function(f){Pa.prototype._setLatLngs.call(this,f),ii(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return ii(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var f=this._renderer._bounds,v=this.options.weight,E=new te(v,v);if(f=new B(f.min.subtract(E),f.max.add(E)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(f))){if(this.options.noClip){this._parts=this._rings;return}for(var M=0,R=this._rings.length,H;M<R;M++)H=ag(this._rings[M],f,!0),H.length&&this._parts.push(H)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(f){var v=!1,E,M,R,H,ee,fe,be,Ae;if(!this._pxBounds||!this._pxBounds.contains(f))return!1;for(H=0,be=this._parts.length;H<be;H++)for(E=this._parts[H],ee=0,Ae=E.length,fe=Ae-1;ee<Ae;fe=ee++)M=E[ee],R=E[fe],M.y>f.y!=R.y>f.y&&f.x<(R.x-M.x)*(f.y-M.y)/(R.y-M.y)+M.x&&(v=!v);return v||Pa.prototype._containsPoint.call(this,f,!0)}});function Zx(f,v){return new al(f,v)}var Ra=ea.extend({initialize:function(f,v){_(this,v),this._layers={},f&&this.addData(f)},addData:function(f){var v=j(f)?f:f.features,E,M,R;if(v){for(E=0,M=v.length;E<M;E++)R=v[E],(R.geometries||R.geometry||R.features||R.coordinates)&&this.addData(R);return this}var H=this.options;if(H.filter&&!H.filter(f))return this;var ee=ar(f,H);return ee?(ee.feature=Uu(f),ee.defaultOptions=ee.options,this.resetStyle(ee),H.onEachFeature&&H.onEachFeature(f,ee),this.addLayer(ee)):this},resetStyle:function(f){return f===void 0?this.eachLayer(this.resetStyle,this):(f.options=i({},f.defaultOptions),this._setLayerStyle(f,this.options.style),this)},setStyle:function(f){return this.eachLayer(function(v){this._setLayerStyle(v,f)},this)},_setLayerStyle:function(f,v){f.setStyle&&(typeof v=="function"&&(v=v(f.feature)),f.setStyle(v))}});function ar(f,v){var E=f.type==="Feature"?f.geometry:f,M=E?E.coordinates:null,R=[],H=v&&v.pointToLayer,ee=v&&v.coordsToLatLng||Bu,fe,be,Ae,$e;if(!M&&!E)return null;switch(E.type){case"Point":return fe=ee(M),ol(H,f,fe,v);case"MultiPoint":for(Ae=0,$e=M.length;Ae<$e;Ae++)fe=ee(M[Ae]),R.push(ol(H,f,fe,v));return new ea(R);case"LineString":case"MultiLineString":return be=bc(M,E.type==="LineString"?0:1,ee),new Pa(be,v);case"Polygon":case"MultiPolygon":return be=bc(M,E.type==="Polygon"?1:2,ee),new al(be,v);case"GeometryCollection":for(Ae=0,$e=E.geometries.length;Ae<$e;Ae++){var Ze=ar({geometry:E.geometries[Ae],type:"Feature",properties:f.properties},v);Ze&&R.push(Ze)}return new ea(R);case"FeatureCollection":for(Ae=0,$e=E.features.length;Ae<$e;Ae++){var ft=ar(E.features[Ae],v);ft&&R.push(ft)}return new ea(R);default:throw new Error("Invalid GeoJSON object.")}}function ol(f,v,E,M){return f?f(v,E):new gc(E,M&&M.markersInheritOptions&&M)}function Bu(f){return new se(f[1],f[0],f[2])}function bc(f,v,E){for(var M=[],R=0,H=f.length,ee;R<H;R++)ee=v?bc(f[R],v-1,E):(E||Bu)(f[R]),M.push(ee);return M}function zu(f,v){return f=me(f),f.alt!==void 0?[b(f.lng,v),b(f.lat,v),b(f.alt,v)]:[b(f.lng,v),b(f.lat,v)]}function yc(f,v,E,M){for(var R=[],H=0,ee=f.length;H<ee;H++)R.push(v?yc(f[H],ii(f[H])?0:v-1,E,M):zu(f[H],M));return!v&&E&&R.length>0&&R.push(R[0].slice()),R}function ho(f,v){return f.feature?i({},f.feature,{geometry:v}):Uu(v)}function Uu(f){return f.type==="Feature"||f.type==="FeatureCollection"?f:{type:"Feature",properties:{},geometry:f}}var mo={toGeoJSON:function(f){return ho(this,{type:"Point",coordinates:zu(this.getLatLng(),f)})}};gc.include(mo),$u.include(mo),il.include(mo),Pa.include({toGeoJSON:function(f){var v=!ii(this._latlngs),E=yc(this._latlngs,v?1:0,!1,f);return ho(this,{type:(v?"Multi":"")+"LineString",coordinates:E})}}),al.include({toGeoJSON:function(f){var v=!ii(this._latlngs),E=v&&!ii(this._latlngs[0]),M=yc(this._latlngs,E?2:v?1:0,!0,f);return v||(M=[M]),ho(this,{type:(E?"Multi":"")+"Polygon",coordinates:M})}}),rl.include({toMultiPoint:function(f){var v=[];return this.eachLayer(function(E){v.push(E.toGeoJSON(f).geometry.coordinates)}),ho(this,{type:"MultiPoint",coordinates:v})},toGeoJSON:function(f){var v=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(v==="MultiPoint")return this.toMultiPoint(f);var E=v==="GeometryCollection",M=[];return this.eachLayer(function(R){if(R.toGeoJSON){var H=R.toGeoJSON(f);if(E)M.push(H.geometry);else{var ee=Uu(H);ee.type==="FeatureCollection"?M.push.apply(M,ee.features):M.push(ee)}}}),E?ho(this,{geometries:M,type:"GeometryCollection"}):{type:"FeatureCollection",features:M}}});function Fu(f,v){return new Ra(f,v)}var vc=Fu,sl=ji.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(f,v,E){this._url=f,this._bounds=Q(v),_(this,E)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ct(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Ut(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(f){return this.options.opacity=f,this._image&&this._updateOpacity(),this},setStyle:function(f){return f.opacity&&this.setOpacity(f.opacity),this},bringToFront:function(){return this._map&&Kn(this._image),this},bringToBack:function(){return this._map&&Zo(this._image),this},setUrl:function(f){return this._url=f,this._image&&(this._image.src=f),this},setBounds:function(f){return this._bounds=Q(f),this._map&&this._reset(),this},getEvents:function(){var f={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(f.zoomanim=this._animateZoom),f},setZIndex:function(f){return this.options.zIndex=f,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var f=this._url.tagName==="IMG",v=this._image=f?this._url:gt("img");if(ct(v,"leaflet-image-layer"),this._zoomAnimated&&ct(v,"leaflet-zoom-animated"),this.options.className&&ct(v,this.options.className),v.onselectstart=p,v.onmousemove=p,v.onload=o(this.fire,this,"load"),v.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(v.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),f){this._url=v.src;return}v.src=this._url,v.alt=this.options.alt},_animateZoom:function(f){var v=this._map.getZoomScale(f.zoom),E=this._map._latLngBoundsToNewLayerBounds(this._bounds,f.zoom,f.center).min;Ca(this._image,E,v)},_reset:function(){var f=this._image,v=new B(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),E=v.getSize();qt(f,v.min),f.style.width=E.x+"px",f.style.height=E.y+"px"},_updateOpacity:function(){en(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var f=this.options.errorOverlayUrl;f&&this._url!==f&&(this._url=f,this._image.src=f)},getCenter:function(){return this._bounds.getCenter()}}),yg=function(f,v,E){return new sl(f,v,E)},po=sl.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var f=this._url.tagName==="VIDEO",v=this._image=f?this._url:gt("video");if(ct(v,"leaflet-image-layer"),this._zoomAnimated&&ct(v,"leaflet-zoom-animated"),this.options.className&&ct(v,this.options.className),v.onselectstart=p,v.onmousemove=p,v.onloadeddata=o(this.fire,this,"load"),f){for(var E=v.getElementsByTagName("source"),M=[],R=0;R<E.length;R++)M.push(E[R].src);this._url=E.length>0?M:[v.src];return}j(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(v.style,"objectFit")&&(v.style.objectFit="fill"),v.autoplay=!!this.options.autoplay,v.loop=!!this.options.loop,v.muted=!!this.options.muted,v.playsInline=!!this.options.playsInline;for(var H=0;H<this._url.length;H++){var ee=gt("source");ee.src=this._url[H],v.appendChild(ee)}}});function ll(f,v,E){return new po(f,v,E)}var Hu=sl.extend({_initImage:function(){var f=this._image=this._url;ct(f,"leaflet-image-layer"),this._zoomAnimated&&ct(f,"leaflet-zoom-animated"),this.options.className&&ct(f,this.options.className),f.onselectstart=p,f.onmousemove=p}});function vg(f,v,E){return new Hu(f,v,E)}var or=ji.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(f,v){f&&(f instanceof se||j(f))?(this._latlng=me(f),_(this,v)):(_(this,f),this._source=v),this.options.content&&(this._content=this.options.content)},openOn:function(f){return f=arguments.length?f:this._source._map,f.hasLayer(this)||f.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(f){return this._map?this.close():(arguments.length?this._source=f:f=this._source,this._prepareOpen(),this.openOn(f._map)),this},onAdd:function(f){this._zoomAnimated=f._zoomAnimated,this._container||this._initLayout(),f._fadeAnimated&&en(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),f._fadeAnimated&&en(this._container,1),this.bringToFront(),this.options.interactive&&(ct(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(f){f._fadeAnimated?(en(this._container,0),this._removeTimeout=setTimeout(o(Ut,void 0,this._container),200)):Ut(this._container),this.options.interactive&&(on(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(f){return this._latlng=me(f),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(f){return this._content=f,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var f={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(f.zoomanim=this._animateZoom),f},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Kn(this._container),this},bringToBack:function(){return this._map&&Zo(this._container),this},_prepareOpen:function(f){var v=this._source;if(!v._map)return!1;if(v instanceof ea){v=null;var E=this._source._layers;for(var M in E)if(E[M]._map){v=E[M];break}if(!v)return!1;this._source=v}if(!f)if(v.getCenter)f=v.getCenter();else if(v.getLatLng)f=v.getLatLng();else if(v.getBounds)f=v.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(f),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var f=this._contentNode,v=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof v=="string")f.innerHTML=v;else{for(;f.hasChildNodes();)f.removeChild(f.firstChild);f.appendChild(v)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var f=this._map.latLngToLayerPoint(this._latlng),v=oe(this.options.offset),E=this._getAnchor();this._zoomAnimated?qt(this._container,f.add(E)):v=v.add(f).add(E);var M=this._containerBottom=-v.y,R=this._containerLeft=-Math.round(this._containerWidth/2)+v.x;this._container.style.bottom=M+"px",this._container.style.left=R+"px"}},_getAnchor:function(){return[0,0]}});xt.include({_initOverlay:function(f,v,E,M){var R=v;return R instanceof f||(R=new f(M).setContent(v)),E&&R.setLatLng(E),R}}),ji.include({_initOverlay:function(f,v,E,M){var R=E;return R instanceof f?(_(R,M),R._source=this):(R=v&&!M?v:new f(M,this),R.setContent(E)),R}});var xc=or.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(f){return f=arguments.length?f:this._source._map,!f.hasLayer(this)&&f._popup&&f._popup.options.autoClose&&f.removeLayer(f._popup),f._popup=this,or.prototype.openOn.call(this,f)},onAdd:function(f){or.prototype.onAdd.call(this,f),f.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof na||this._source.on("preclick",Ai))},onRemove:function(f){or.prototype.onRemove.call(this,f),f.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof na||this._source.off("preclick",Ai))},getEvents:function(){var f=or.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(f.preclick=this.close),this.options.keepInView&&(f.moveend=this._adjustPan),f},_initLayout:function(){var f="leaflet-popup",v=this._container=gt("div",f+" "+(this.options.className||"")+" leaflet-zoom-animated"),E=this._wrapper=gt("div",f+"-content-wrapper",v);if(this._contentNode=gt("div",f+"-content",E),Jo(v),Ji(this._contentNode),ot(v,"contextmenu",Ai),this._tipContainer=gt("div",f+"-tip-container",v),this._tip=gt("div",f+"-tip",this._tipContainer),this.options.closeButton){var M=this._closeButton=gt("a",f+"-close-button",v);M.setAttribute("role","button"),M.setAttribute("aria-label","Close popup"),M.href="#close",M.innerHTML='<span aria-hidden="true">&#215;</span>',ot(M,"click",function(R){wn(R),this.close()},this)}},_updateLayout:function(){var f=this._contentNode,v=f.style;v.width="",v.whiteSpace="nowrap";var E=f.offsetWidth;E=Math.min(E,this.options.maxWidth),E=Math.max(E,this.options.minWidth),v.width=E+1+"px",v.whiteSpace="",v.height="";var M=f.offsetHeight,R=this.options.maxHeight,H="leaflet-popup-scrolled";R&&M>R?(v.height=R+"px",ct(f,H)):on(f,H),this._containerWidth=this._container.offsetWidth},_animateZoom:function(f){var v=this._map._latLngToNewLayerPoint(this._latlng,f.zoom,f.center),E=this._getAnchor();qt(this._container,v.add(E))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var f=this._map,v=parseInt(ic(this._container,"marginBottom"),10)||0,E=this._container.offsetHeight+v,M=this._containerWidth,R=new te(this._containerLeft,-E-this._containerBottom);R._add(co(this._container));var H=f.layerPointToContainerPoint(R),ee=oe(this.options.autoPanPadding),fe=oe(this.options.autoPanPaddingTopLeft||ee),be=oe(this.options.autoPanPaddingBottomRight||ee),Ae=f.getSize(),$e=0,Ze=0;H.x+M+be.x>Ae.x&&($e=H.x+M-Ae.x+be.x),H.x-$e-fe.x<0&&($e=H.x-fe.x),H.y+E+be.y>Ae.y&&(Ze=H.y+E-Ae.y+be.y),H.y-Ze-fe.y<0&&(Ze=H.y-fe.y),($e||Ze)&&(this.options.keepInView&&(this._autopanning=!0),f.fire("autopanstart").panBy([$e,Ze]))}},_getAnchor:function(){return oe(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),xg=function(f,v){return new xc(f,v)};xt.mergeOptions({closePopupOnClick:!0}),xt.include({openPopup:function(f,v,E){return this._initOverlay(xc,f,v,E).openOn(this),this},closePopup:function(f){return f=arguments.length?f:this._popup,f&&f.close(),this}}),ji.include({bindPopup:function(f,v){return this._popup=this._initOverlay(xc,this._popup,f,v),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(f){return this._popup&&(this instanceof ea||(this._popup._source=this),this._popup._prepareOpen(f||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(f){return this._popup&&this._popup.setContent(f),this},getPopup:function(){return this._popup},_openPopup:function(f){if(!(!this._popup||!this._map)){uo(f);var v=f.layer||f.target;if(this._popup._source===v&&!(v instanceof na)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(f.latlng);return}this._popup._source=v,this.openPopup(f.latlng)}},_movePopup:function(f){this._popup.setLatLng(f.latlng)},_onKeyPress:function(f){f.originalEvent.keyCode===13&&this._openPopup(f)}});var wc=or.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(f){or.prototype.onAdd.call(this,f),this.setOpacity(this.options.opacity),f.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(f){or.prototype.onRemove.call(this,f),f.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var f=or.prototype.getEvents.call(this);return this.options.permanent||(f.preclick=this.close),f},_initLayout:function(){var f="leaflet-tooltip",v=f+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=gt("div",v),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+u(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(f){var v,E,M=this._map,R=this._container,H=M.latLngToContainerPoint(M.getCenter()),ee=M.layerPointToContainerPoint(f),fe=this.options.direction,be=R.offsetWidth,Ae=R.offsetHeight,$e=oe(this.options.offset),Ze=this._getAnchor();fe==="top"?(v=be/2,E=Ae):fe==="bottom"?(v=be/2,E=0):fe==="center"?(v=be/2,E=Ae/2):fe==="right"?(v=0,E=Ae/2):fe==="left"?(v=be,E=Ae/2):ee.x<H.x?(fe="right",v=0,E=Ae/2):(fe="left",v=be+($e.x+Ze.x)*2,E=Ae/2),f=f.subtract(oe(v,E,!0)).add($e).add(Ze),on(R,"leaflet-tooltip-right"),on(R,"leaflet-tooltip-left"),on(R,"leaflet-tooltip-top"),on(R,"leaflet-tooltip-bottom"),ct(R,"leaflet-tooltip-"+fe),qt(R,f)},_updatePosition:function(){var f=this._map.latLngToLayerPoint(this._latlng);this._setPosition(f)},setOpacity:function(f){this.options.opacity=f,this._container&&en(this._container,f)},_animateZoom:function(f){var v=this._map._latLngToNewLayerPoint(this._latlng,f.zoom,f.center);this._setPosition(v)},_getAnchor:function(){return oe(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Xx=function(f,v){return new wc(f,v)};xt.include({openTooltip:function(f,v,E){return this._initOverlay(wc,f,v,E).openOn(this),this},closeTooltip:function(f){return f.close(),this}}),ji.include({bindTooltip:function(f,v){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(wc,this._tooltip,f,v),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(f){if(!(!f&&this._tooltipHandlersAdded)){var v=f?"off":"on",E={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?E.add=this._openTooltip:(E.mouseover=this._openTooltip,E.mouseout=this.closeTooltip,E.click=this._openTooltip,this._map?this._addFocusListeners():E.add=this._addFocusListeners),this._tooltip.options.sticky&&(E.mousemove=this._moveTooltip),this[v](E),this._tooltipHandlersAdded=!f}},openTooltip:function(f){return this._tooltip&&(this instanceof ea||(this._tooltip._source=this),this._tooltip._prepareOpen(f)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(f){return this._tooltip&&this._tooltip.setContent(f),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(f){var v=typeof f.getElement=="function"&&f.getElement();v&&(ot(v,"focus",function(){this._tooltip._source=f,this.openTooltip()},this),ot(v,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(f){var v=typeof f.getElement=="function"&&f.getElement();v&&v.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(f){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var v=this;this._map.once("moveend",function(){v._openOnceFlag=!1,v._openTooltip(f)});return}this._tooltip._source=f.layer||f.target,this.openTooltip(this._tooltip.options.sticky?f.latlng:void 0)}},_moveTooltip:function(f){var v=f.latlng,E,M;this._tooltip.options.sticky&&f.originalEvent&&(E=this._map.mouseEventToContainerPoint(f.originalEvent),M=this._map.containerPointToLayerPoint(E),v=this._map.layerPointToLatLng(M)),this._tooltip.setLatLng(v)}});var wg=ta.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(f){var v=f&&f.tagName==="DIV"?f:document.createElement("div"),E=this.options;if(E.html instanceof Element?(ni(v),v.appendChild(E.html)):v.innerHTML=E.html!==!1?E.html:"",E.bgPos){var M=oe(E.bgPos);v.style.backgroundPosition=-M.x+"px "+-M.y+"px"}return this._setIconStyles(v,"icon"),v},createShadow:function(){return null}});function Jx(f){return new wg(f)}ta.Default=mc;var cl=ji.extend({options:{tileSize:256,opacity:1,updateWhenIdle:We.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(f){_(this,f)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(f){f._addZoomLimit(this)},onRemove:function(f){this._removeAllTiles(),Ut(this._container),f._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Kn(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Zo(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(f){return this.options.opacity=f,this._updateOpacity(),this},setZIndex:function(f){return this.options.zIndex=f,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var f=this._clampZoom(this._map.getZoom());f!==this._tileZoom&&(this._tileZoom=f,this._updateLevels()),this._update()}return this},getEvents:function(){var f={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=d(this._onMoveEnd,this.options.updateInterval,this)),f.move=this._onMove),this._zoomAnimated&&(f.zoomanim=this._animateZoom),f},createTile:function(){return document.createElement("div")},getTileSize:function(){var f=this.options.tileSize;return f instanceof te?f:new te(f,f)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(f){for(var v=this.getPane().children,E=-f(-1/0,1/0),M=0,R=v.length,H;M<R;M++)H=v[M].style.zIndex,v[M]!==this._container&&H&&(E=f(E,+H));isFinite(E)&&(this.options.zIndex=E+f(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!We.ielt9){en(this._container,this.options.opacity);var f=+new Date,v=!1,E=!1;for(var M in this._tiles){var R=this._tiles[M];if(!(!R.current||!R.loaded)){var H=Math.min(1,(f-R.loaded)/200);en(R.el,H),H<1?v=!0:(R.active?E=!0:this._onOpaqueTile(R),R.active=!0)}}E&&!this._noPrune&&this._pruneTiles(),v&&(z(this._fadeFrame),this._fadeFrame=F(this._updateOpacity,this))}},_onOpaqueTile:p,_initContainer:function(){this._container||(this._container=gt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var f=this._tileZoom,v=this.options.maxZoom;if(f!==void 0){for(var E in this._levels)E=Number(E),this._levels[E].el.children.length||E===f?(this._levels[E].el.style.zIndex=v-Math.abs(f-E),this._onUpdateLevel(E)):(Ut(this._levels[E].el),this._removeTilesAtZoom(E),this._onRemoveLevel(E),delete this._levels[E]);var M=this._levels[f],R=this._map;return M||(M=this._levels[f]={},M.el=gt("div","leaflet-tile-container leaflet-zoom-animated",this._container),M.el.style.zIndex=v,M.origin=R.project(R.unproject(R.getPixelOrigin()),f).round(),M.zoom=f,this._setZoomTransform(M,R.getCenter(),R.getZoom()),p(M.el.offsetWidth),this._onCreateLevel(M)),this._level=M,M}},_onUpdateLevel:p,_onRemoveLevel:p,_onCreateLevel:p,_pruneTiles:function(){if(this._map){var f,v,E=this._map.getZoom();if(E>this.options.maxZoom||E<this.options.minZoom){this._removeAllTiles();return}for(f in this._tiles)v=this._tiles[f],v.retain=v.current;for(f in this._tiles)if(v=this._tiles[f],v.current&&!v.active){var M=v.coords;this._retainParent(M.x,M.y,M.z,M.z-5)||this._retainChildren(M.x,M.y,M.z,M.z+2)}for(f in this._tiles)this._tiles[f].retain||this._removeTile(f)}},_removeTilesAtZoom:function(f){for(var v in this._tiles)this._tiles[v].coords.z===f&&this._removeTile(v)},_removeAllTiles:function(){for(var f in this._tiles)this._removeTile(f)},_invalidateAll:function(){for(var f in this._levels)Ut(this._levels[f].el),this._onRemoveLevel(Number(f)),delete this._levels[f];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(f,v,E,M){var R=Math.floor(f/2),H=Math.floor(v/2),ee=E-1,fe=new te(+R,+H);fe.z=+ee;var be=this._tileCoordsToKey(fe),Ae=this._tiles[be];return Ae&&Ae.active?(Ae.retain=!0,!0):(Ae&&Ae.loaded&&(Ae.retain=!0),ee>M?this._retainParent(R,H,ee,M):!1)},_retainChildren:function(f,v,E,M){for(var R=2*f;R<2*f+2;R++)for(var H=2*v;H<2*v+2;H++){var ee=new te(R,H);ee.z=E+1;var fe=this._tileCoordsToKey(ee),be=this._tiles[fe];if(be&&be.active){be.retain=!0;continue}else be&&be.loaded&&(be.retain=!0);E+1<M&&this._retainChildren(R,H,E+1,M)}},_resetView:function(f){var v=f&&(f.pinch||f.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),v,v)},_animateZoom:function(f){this._setView(f.center,f.zoom,!0,f.noUpdate)},_clampZoom:function(f){var v=this.options;return v.minNativeZoom!==void 0&&f<v.minNativeZoom?v.minNativeZoom:v.maxNativeZoom!==void 0&&v.maxNativeZoom<f?v.maxNativeZoom:f},_setView:function(f,v,E,M){var R=Math.round(v);this.options.maxZoom!==void 0&&R>this.options.maxZoom||this.options.minZoom!==void 0&&R<this.options.minZoom?R=void 0:R=this._clampZoom(R);var H=this.options.updateWhenZooming&&R!==this._tileZoom;(!M||H)&&(this._tileZoom=R,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),R!==void 0&&this._update(f),E||this._pruneTiles(),this._noPrune=!!E),this._setZoomTransforms(f,v)},_setZoomTransforms:function(f,v){for(var E in this._levels)this._setZoomTransform(this._levels[E],f,v)},_setZoomTransform:function(f,v,E){var M=this._map.getZoomScale(E,f.zoom),R=f.origin.multiplyBy(M).subtract(this._map._getNewPixelOrigin(v,E)).round();We.any3d?Ca(f.el,R,M):qt(f.el,R)},_resetGrid:function(){var f=this._map,v=f.options.crs,E=this._tileSize=this.getTileSize(),M=this._tileZoom,R=this._map.getPixelWorldBounds(this._tileZoom);R&&(this._globalTileRange=this._pxBoundsToTileRange(R)),this._wrapX=v.wrapLng&&!this.options.noWrap&&[Math.floor(f.project([0,v.wrapLng[0]],M).x/E.x),Math.ceil(f.project([0,v.wrapLng[1]],M).x/E.y)],this._wrapY=v.wrapLat&&!this.options.noWrap&&[Math.floor(f.project([v.wrapLat[0],0],M).y/E.x),Math.ceil(f.project([v.wrapLat[1],0],M).y/E.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(f){var v=this._map,E=v._animatingZoom?Math.max(v._animateToZoom,v.getZoom()):v.getZoom(),M=v.getZoomScale(E,this._tileZoom),R=v.project(f,this._tileZoom).floor(),H=v.getSize().divideBy(M*2);return new B(R.subtract(H),R.add(H))},_update:function(f){var v=this._map;if(v){var E=this._clampZoom(v.getZoom());if(f===void 0&&(f=v.getCenter()),this._tileZoom!==void 0){var M=this._getTiledPixelBounds(f),R=this._pxBoundsToTileRange(M),H=R.getCenter(),ee=[],fe=this.options.keepBuffer,be=new B(R.getBottomLeft().subtract([fe,-fe]),R.getTopRight().add([fe,-fe]));if(!(isFinite(R.min.x)&&isFinite(R.min.y)&&isFinite(R.max.x)&&isFinite(R.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Ae in this._tiles){var $e=this._tiles[Ae].coords;($e.z!==this._tileZoom||!be.contains(new te($e.x,$e.y)))&&(this._tiles[Ae].current=!1)}if(Math.abs(E-this._tileZoom)>1){this._setView(f,E);return}for(var Ze=R.min.y;Ze<=R.max.y;Ze++)for(var ft=R.min.x;ft<=R.max.x;ft++){var Wn=new te(ft,Ze);if(Wn.z=this._tileZoom,!!this._isValidTile(Wn)){var _n=this._tiles[this._tileCoordsToKey(Wn)];_n?_n.current=!0:ee.push(Wn)}}if(ee.sort(function(Tt,At){return Tt.distanceTo(H)-At.distanceTo(H)}),ee.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Fr=document.createDocumentFragment();for(ft=0;ft<ee.length;ft++)this._addTile(ee[ft],Fr);this._level.el.appendChild(Fr)}}}},_isValidTile:function(f){var v=this._map.options.crs;if(!v.infinite){var E=this._globalTileRange;if(!v.wrapLng&&(f.x<E.min.x||f.x>E.max.x)||!v.wrapLat&&(f.y<E.min.y||f.y>E.max.y))return!1}if(!this.options.bounds)return!0;var M=this._tileCoordsToBounds(f);return Q(this.options.bounds).overlaps(M)},_keyToBounds:function(f){return this._tileCoordsToBounds(this._keyToTileCoords(f))},_tileCoordsToNwSe:function(f){var v=this._map,E=this.getTileSize(),M=f.scaleBy(E),R=M.add(E),H=v.unproject(M,f.z),ee=v.unproject(R,f.z);return[H,ee]},_tileCoordsToBounds:function(f){var v=this._tileCoordsToNwSe(f),E=new ie(v[0],v[1]);return this.options.noWrap||(E=this._map.wrapLatLngBounds(E)),E},_tileCoordsToKey:function(f){return f.x+":"+f.y+":"+f.z},_keyToTileCoords:function(f){var v=f.split(":"),E=new te(+v[0],+v[1]);return E.z=+v[2],E},_removeTile:function(f){var v=this._tiles[f];v&&(Ut(v.el),delete this._tiles[f],this.fire("tileunload",{tile:v.el,coords:this._keyToTileCoords(f)}))},_initTile:function(f){ct(f,"leaflet-tile");var v=this.getTileSize();f.style.width=v.x+"px",f.style.height=v.y+"px",f.onselectstart=p,f.onmousemove=p,We.ielt9&&this.options.opacity<1&&en(f,this.options.opacity)},_addTile:function(f,v){var E=this._getTilePos(f),M=this._tileCoordsToKey(f),R=this.createTile(this._wrapCoords(f),o(this._tileReady,this,f));this._initTile(R),this.createTile.length<2&&F(o(this._tileReady,this,f,null,R)),qt(R,E),this._tiles[M]={el:R,coords:f,current:!0},v.appendChild(R),this.fire("tileloadstart",{tile:R,coords:f})},_tileReady:function(f,v,E){v&&this.fire("tileerror",{error:v,tile:E,coords:f});var M=this._tileCoordsToKey(f);E=this._tiles[M],E&&(E.loaded=+new Date,this._map._fadeAnimated?(en(E.el,0),z(this._fadeFrame),this._fadeFrame=F(this._updateOpacity,this)):(E.active=!0,this._pruneTiles()),v||(ct(E.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:E.el,coords:f})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),We.ielt9||!this._map._fadeAnimated?F(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(f){return f.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(f){var v=new te(this._wrapX?h(f.x,this._wrapX):f.x,this._wrapY?h(f.y,this._wrapY):f.y);return v.z=f.z,v},_pxBoundsToTileRange:function(f){var v=this.getTileSize();return new B(f.min.unscaleBy(v).floor(),f.max.unscaleBy(v).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var f in this._tiles)if(!this._tiles[f].loaded)return!1;return!0}});function _g(f){return new cl(f)}var go=cl.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(f,v){this._url=f,v=_(this,v),v.detectRetina&&We.retina&&v.maxZoom>0?(v.tileSize=Math.floor(v.tileSize/2),v.zoomReverse?(v.zoomOffset--,v.minZoom=Math.min(v.maxZoom,v.minZoom+1)):(v.zoomOffset++,v.maxZoom=Math.max(v.minZoom,v.maxZoom-1)),v.minZoom=Math.max(0,v.minZoom)):v.zoomReverse?v.minZoom=Math.min(v.maxZoom,v.minZoom):v.maxZoom=Math.max(v.minZoom,v.maxZoom),typeof v.subdomains=="string"&&(v.subdomains=v.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(f,v){return this._url===f&&v===void 0&&(v=!0),this._url=f,v||this.redraw(),this},createTile:function(f,v){var E=document.createElement("img");return ot(E,"load",o(this._tileOnLoad,this,v,E)),ot(E,"error",o(this._tileOnError,this,v,E)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(E.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(E.referrerPolicy=this.options.referrerPolicy),E.alt="",E.src=this.getTileUrl(f),E},getTileUrl:function(f){var v={r:We.retina?"@2x":"",s:this._getSubdomain(f),x:f.x,y:f.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var E=this._globalTileRange.max.y-f.y;this.options.tms&&(v.y=E),v["-y"]=E}return N(this._url,i(v,this.options))},_tileOnLoad:function(f,v){We.ielt9?setTimeout(o(f,this,null,v),0):f(null,v)},_tileOnError:function(f,v,E){var M=this.options.errorTileUrl;M&&v.getAttribute("src")!==M&&(v.src=M),f(E,v)},_onTileRemove:function(f){f.tile.onload=null},_getZoomForUrl:function(){var f=this._tileZoom,v=this.options.maxZoom,E=this.options.zoomReverse,M=this.options.zoomOffset;return E&&(f=v-f),f+M},_getSubdomain:function(f){var v=Math.abs(f.x+f.y)%this.options.subdomains.length;return this.options.subdomains[v]},_abortLoading:function(){var f,v;for(f in this._tiles)if(this._tiles[f].coords.z!==this._tileZoom&&(v=this._tiles[f].el,v.onload=p,v.onerror=p,!v.complete)){v.src=D;var E=this._tiles[f].coords;Ut(v),delete this._tiles[f],this.fire("tileabort",{tile:v,coords:E})}},_removeTile:function(f){var v=this._tiles[f];if(v)return v.el.setAttribute("src",D),cl.prototype._removeTile.call(this,f)},_tileReady:function(f,v,E){if(!(!this._map||E&&E.getAttribute("src")===D))return cl.prototype._tileReady.call(this,f,v,E)}});function ai(f,v){return new go(f,v)}var _c=go.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(f,v){this._url=f;var E=i({},this.defaultWmsParams);for(var M in v)M in this.options||(E[M]=v[M]);v=_(this,v);var R=v.detectRetina&&We.retina?2:1,H=this.getTileSize();E.width=H.x*R,E.height=H.y*R,this.wmsParams=E},onAdd:function(f){this._crs=this.options.crs||f.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var v=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[v]=this._crs.code,go.prototype.onAdd.call(this,f)},getTileUrl:function(f){var v=this._tileCoordsToNwSe(f),E=this._crs,M=V(E.project(v[0]),E.project(v[1])),R=M.min,H=M.max,ee=(this._wmsVersion>=1.3&&this._crs===rh?[R.y,R.x,H.y,H.x]:[R.x,R.y,H.x,H.y]).join(","),fe=go.prototype.getTileUrl.call(this,f);return fe+k(this.wmsParams,fe,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+ee},setParams:function(f,v){return i(this.wmsParams,f),v||this.redraw(),this}});function oi(f,v){return new _c(f,v)}go.WMS=_c,ai.wms=oi;var Cr=ji.extend({options:{padding:.1},initialize:function(f){_(this,f),u(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),ct(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var f={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(f.zoomanim=this._onAnimZoom),f},_onAnimZoom:function(f){this._updateTransform(f.center,f.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(f,v){var E=this._map.getZoomScale(v,this._zoom),M=this._map.getSize().multiplyBy(.5+this.options.padding),R=this._map.project(this._center,v),H=M.multiplyBy(-E).add(R).subtract(this._map._getNewPixelOrigin(f,v));We.any3d?Ca(this._container,H,E):qt(this._container,H)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var f in this._layers)this._layers[f]._reset()},_onZoomEnd:function(){for(var f in this._layers)this._layers[f]._project()},_updatePaths:function(){for(var f in this._layers)this._layers[f]._update()},_update:function(){var f=this.options.padding,v=this._map.getSize(),E=this._map.containerPointToLayerPoint(v.multiplyBy(-f)).round();this._bounds=new B(E,E.add(v.multiplyBy(1+f*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Gu=Cr.extend({options:{tolerance:0},getEvents:function(){var f=Cr.prototype.getEvents.call(this);return f.viewprereset=this._onViewPreReset,f},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Cr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var f=this._container=document.createElement("canvas");ot(f,"mousemove",this._onMouseMove,this),ot(f,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ot(f,"mouseout",this._handleMouseOut,this),f._leaflet_disable_events=!0,this._ctx=f.getContext("2d")},_destroyContainer:function(){z(this._redrawRequest),delete this._ctx,Ut(this._container),Pt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var f;this._redrawBounds=null;for(var v in this._layers)f=this._layers[v],f._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Cr.prototype._update.call(this);var f=this._bounds,v=this._container,E=f.getSize(),M=We.retina?2:1;qt(v,f.min),v.width=M*E.x,v.height=M*E.y,v.style.width=E.x+"px",v.style.height=E.y+"px",We.retina&&this._ctx.scale(2,2),this._ctx.translate(-f.min.x,-f.min.y),this.fire("update")}},_reset:function(){Cr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(f){this._updateDashArray(f),this._layers[u(f)]=f;var v=f._order={layer:f,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=v),this._drawLast=v,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(f){this._requestRedraw(f)},_removePath:function(f){var v=f._order,E=v.next,M=v.prev;E?E.prev=M:this._drawLast=M,M?M.next=E:this._drawFirst=E,delete f._order,delete this._layers[u(f)],this._requestRedraw(f)},_updatePath:function(f){this._extendRedrawBounds(f),f._project(),f._update(),this._requestRedraw(f)},_updateStyle:function(f){this._updateDashArray(f),this._requestRedraw(f)},_updateDashArray:function(f){if(typeof f.options.dashArray=="string"){var v=f.options.dashArray.split(/[, ]+/),E=[],M,R;for(R=0;R<v.length;R++){if(M=Number(v[R]),isNaN(M))return;E.push(M)}f.options._dashArray=E}else f.options._dashArray=f.options.dashArray},_requestRedraw:function(f){this._map&&(this._extendRedrawBounds(f),this._redrawRequest=this._redrawRequest||F(this._redraw,this))},_extendRedrawBounds:function(f){if(f._pxBounds){var v=(f.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new B,this._redrawBounds.extend(f._pxBounds.min.subtract([v,v])),this._redrawBounds.extend(f._pxBounds.max.add([v,v]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var f=this._redrawBounds;if(f){var v=f.getSize();this._ctx.clearRect(f.min.x,f.min.y,v.x,v.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var f,v=this._redrawBounds;if(this._ctx.save(),v){var E=v.getSize();this._ctx.beginPath(),this._ctx.rect(v.min.x,v.min.y,E.x,E.y),this._ctx.clip()}this._drawing=!0;for(var M=this._drawFirst;M;M=M.next)f=M.layer,(!v||f._pxBounds&&f._pxBounds.intersects(v))&&f._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(f,v){if(this._drawing){var E,M,R,H,ee=f._parts,fe=ee.length,be=this._ctx;if(fe){for(be.beginPath(),E=0;E<fe;E++){for(M=0,R=ee[E].length;M<R;M++)H=ee[E][M],be[M?"lineTo":"moveTo"](H.x,H.y);v&&be.closePath()}this._fillStroke(be,f)}}},_updateCircle:function(f){if(!(!this._drawing||f._empty())){var v=f._point,E=this._ctx,M=Math.max(Math.round(f._radius),1),R=(Math.max(Math.round(f._radiusY),1)||M)/M;R!==1&&(E.save(),E.scale(1,R)),E.beginPath(),E.arc(v.x,v.y/R,M,0,Math.PI*2,!1),R!==1&&E.restore(),this._fillStroke(E,f)}},_fillStroke:function(f,v){var E=v.options;E.fill&&(f.globalAlpha=E.fillOpacity,f.fillStyle=E.fillColor||E.color,f.fill(E.fillRule||"evenodd")),E.stroke&&E.weight!==0&&(f.setLineDash&&f.setLineDash(v.options&&v.options._dashArray||[]),f.globalAlpha=E.opacity,f.lineWidth=E.weight,f.strokeStyle=E.color,f.lineCap=E.lineCap,f.lineJoin=E.lineJoin,f.stroke())},_onClick:function(f){for(var v=this._map.mouseEventToLayerPoint(f),E,M,R=this._drawFirst;R;R=R.next)E=R.layer,E.options.interactive&&E._containsPoint(v)&&(!(f.type==="click"||f.type==="preclick")||!this._map._draggableMoved(E))&&(M=E);this._fireEvent(M?[M]:!1,f)},_onMouseMove:function(f){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var v=this._map.mouseEventToLayerPoint(f);this._handleMouseHover(f,v)}},_handleMouseOut:function(f){var v=this._hoveredLayer;v&&(on(this._container,"leaflet-interactive"),this._fireEvent([v],f,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(f,v){if(!this._mouseHoverThrottled){for(var E,M,R=this._drawFirst;R;R=R.next)E=R.layer,E.options.interactive&&E._containsPoint(v)&&(M=E);M!==this._hoveredLayer&&(this._handleMouseOut(f),M&&(ct(this._container,"leaflet-interactive"),this._fireEvent([M],f,"mouseover"),this._hoveredLayer=M)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,f),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(f,v,E){this._map._fireDOMEvent(v,E||v.type,f)},_bringToFront:function(f){var v=f._order;if(v){var E=v.next,M=v.prev;if(E)E.prev=M;else return;M?M.next=E:E&&(this._drawFirst=E),v.prev=this._drawLast,this._drawLast.next=v,v.next=null,this._drawLast=v,this._requestRedraw(f)}},_bringToBack:function(f){var v=f._order;if(v){var E=v.next,M=v.prev;if(M)M.next=E;else return;E?E.prev=M:M&&(this._drawLast=M),v.prev=null,v.next=this._drawFirst,this._drawFirst.prev=v,this._drawFirst=v,this._requestRedraw(f)}}});function Sc(f){return We.canvas?new Gu(f):null}var bo=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(f){return document.createElement("<lvml:"+f+' class="lvml">')}}catch{}return function(f){return document.createElement("<"+f+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),ih={_initContainer:function(){this._container=gt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Cr.prototype._update.call(this),this.fire("update"))},_initPath:function(f){var v=f._container=bo("shape");ct(v,"leaflet-vml-shape "+(this.options.className||"")),v.coordsize="1 1",f._path=bo("path"),v.appendChild(f._path),this._updateStyle(f),this._layers[u(f)]=f},_addPath:function(f){var v=f._container;this._container.appendChild(v),f.options.interactive&&f.addInteractiveTarget(v)},_removePath:function(f){var v=f._container;Ut(v),f.removeInteractiveTarget(v),delete this._layers[u(f)]},_updateStyle:function(f){var v=f._stroke,E=f._fill,M=f.options,R=f._container;R.stroked=!!M.stroke,R.filled=!!M.fill,M.stroke?(v||(v=f._stroke=bo("stroke")),R.appendChild(v),v.weight=M.weight+"px",v.color=M.color,v.opacity=M.opacity,M.dashArray?v.dashStyle=j(M.dashArray)?M.dashArray.join(" "):M.dashArray.replace(/( *, *)/g," "):v.dashStyle="",v.endcap=M.lineCap.replace("butt","flat"),v.joinstyle=M.lineJoin):v&&(R.removeChild(v),f._stroke=null),M.fill?(E||(E=f._fill=bo("fill")),R.appendChild(E),E.color=M.fillColor||M.color,E.opacity=M.fillOpacity):E&&(R.removeChild(E),f._fill=null)},_updateCircle:function(f){var v=f._point.round(),E=Math.round(f._radius),M=Math.round(f._radiusY||E);this._setPath(f,f._empty()?"M0 0":"AL "+v.x+","+v.y+" "+E+","+M+" 0,"+65535*360)},_setPath:function(f,v){f._path.v=v},_bringToFront:function(f){Kn(f._container)},_bringToBack:function(f){Zo(f._container)}},ra=We.vml?bo:Ne,ul=Cr.extend({_initContainer:function(){this._container=ra("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=ra("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Ut(this._container),Pt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Cr.prototype._update.call(this);var f=this._bounds,v=f.getSize(),E=this._container;(!this._svgSize||!this._svgSize.equals(v))&&(this._svgSize=v,E.setAttribute("width",v.x),E.setAttribute("height",v.y)),qt(E,f.min),E.setAttribute("viewBox",[f.min.x,f.min.y,v.x,v.y].join(" ")),this.fire("update")}},_initPath:function(f){var v=f._path=ra("path");f.options.className&&ct(v,f.options.className),f.options.interactive&&ct(v,"leaflet-interactive"),this._updateStyle(f),this._layers[u(f)]=f},_addPath:function(f){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(f._path),f.addInteractiveTarget(f._path)},_removePath:function(f){Ut(f._path),f.removeInteractiveTarget(f._path),delete this._layers[u(f)]},_updatePath:function(f){f._project(),f._update()},_updateStyle:function(f){var v=f._path,E=f.options;v&&(E.stroke?(v.setAttribute("stroke",E.color),v.setAttribute("stroke-opacity",E.opacity),v.setAttribute("stroke-width",E.weight),v.setAttribute("stroke-linecap",E.lineCap),v.setAttribute("stroke-linejoin",E.lineJoin),E.dashArray?v.setAttribute("stroke-dasharray",E.dashArray):v.removeAttribute("stroke-dasharray"),E.dashOffset?v.setAttribute("stroke-dashoffset",E.dashOffset):v.removeAttribute("stroke-dashoffset")):v.setAttribute("stroke","none"),E.fill?(v.setAttribute("fill",E.fillColor||E.color),v.setAttribute("fill-opacity",E.fillOpacity),v.setAttribute("fill-rule",E.fillRule||"evenodd")):v.setAttribute("fill","none"))},_updatePoly:function(f,v){this._setPath(f,Pe(f._parts,v))},_updateCircle:function(f){var v=f._point,E=Math.max(Math.round(f._radius),1),M=Math.max(Math.round(f._radiusY),1)||E,R="a"+E+","+M+" 0 1,0 ",H=f._empty()?"M0 0":"M"+(v.x-E)+","+v.y+R+E*2+",0 "+R+-E*2+",0 ";this._setPath(f,H)},_setPath:function(f,v){f._path.setAttribute("d",v)},_bringToFront:function(f){Kn(f._path)},_bringToBack:function(f){Zo(f._path)}});We.vml&&ul.include(ih);function kc(f){return We.svg||We.vml?new ul(f):null}xt.include({getRenderer:function(f){var v=f.options.renderer||this._getPaneRenderer(f.options.pane)||this.options.renderer||this._renderer;return v||(v=this._renderer=this._createRenderer()),this.hasLayer(v)||this.addLayer(v),v},_getPaneRenderer:function(f){if(f==="overlayPane"||f===void 0)return!1;var v=this._paneRenderers[f];return v===void 0&&(v=this._createRenderer({pane:f}),this._paneRenderers[f]=v),v},_createRenderer:function(f){return this.options.preferCanvas&&Sc(f)||kc(f)}});var es=al.extend({initialize:function(f,v){al.prototype.initialize.call(this,this._boundsToLatLngs(f),v)},setBounds:function(f){return this.setLatLngs(this._boundsToLatLngs(f))},_boundsToLatLngs:function(f){return f=Q(f),[f.getSouthWest(),f.getNorthWest(),f.getNorthEast(),f.getSouthEast()]}});function Qx(f,v){return new es(f,v)}ul.create=ra,ul.pointsToPath=Pe,Ra.geometryToLayer=ar,Ra.coordsToLatLng=Bu,Ra.coordsToLatLngs=bc,Ra.latLngToCoords=zu,Ra.latLngsToCoords=yc,Ra.getFeature=ho,Ra.asFeature=Uu,xt.mergeOptions({boxZoom:!0});var Mr=Qi.extend({initialize:function(f){this._map=f,this._container=f._container,this._pane=f._panes.overlayPane,this._resetStateTimeout=0,f.on("unload",this._destroy,this)},addHooks:function(){ot(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Pt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Ut(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(f){if(!f.shiftKey||f.which!==1&&f.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Zs(),Nu(),this._startPoint=this._map.mouseEventToContainerPoint(f),ot(document,{contextmenu:uo,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(f){this._moved||(this._moved=!0,this._box=gt("div","leaflet-zoom-box",this._container),ct(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(f);var v=new B(this._point,this._startPoint),E=v.getSize();qt(this._box,v.min),this._box.style.width=E.x+"px",this._box.style.height=E.y+"px"},_finish:function(){this._moved&&(Ut(this._box),on(this._container,"leaflet-crosshair")),Xi(),oc(),Pt(document,{contextmenu:uo,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(f){if(!(f.which!==1&&f.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var v=new ie(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(v).fire("boxzoomend",{boxZoomBounds:v})}},_onKeyDown:function(f){f.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});xt.addInitHook("addHandler","boxZoom",Mr),xt.mergeOptions({doubleClickZoom:!0});var qu=Qi.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(f){var v=this._map,E=v.getZoom(),M=v.options.zoomDelta,R=f.originalEvent.shiftKey?E-M:E+M;v.options.doubleClickZoom==="center"?v.setZoom(R):v.setZoomAround(f.containerPoint,R)}});xt.addInitHook("addHandler","doubleClickZoom",qu),xt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var ia=Qi.extend({addHooks:function(){if(!this._draggable){var f=this._map;this._draggable=new fo(f._mapPane,f._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),f.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),f.on("zoomend",this._onZoomEnd,this),f.whenReady(this._onZoomEnd,this))}ct(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){on(this._map._container,"leaflet-grab"),on(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var f=this._map;if(f._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var v=Q(this._map.options.maxBounds);this._offsetLimit=V(this._map.latLngToContainerPoint(v.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(v.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;f.fire("movestart").fire("dragstart"),f.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(f){if(this._map.options.inertia){var v=this._lastTime=+new Date,E=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(E),this._times.push(v),this._prunePositions(v)}this._map.fire("move",f).fire("drag",f)},_prunePositions:function(f){for(;this._positions.length>1&&f-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var f=this._map.getSize().divideBy(2),v=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=v.subtract(f).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(f,v){return f-(f-v)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var f=this._draggable._newPos.subtract(this._draggable._startPos),v=this._offsetLimit;f.x<v.min.x&&(f.x=this._viscousLimit(f.x,v.min.x)),f.y<v.min.y&&(f.y=this._viscousLimit(f.y,v.min.y)),f.x>v.max.x&&(f.x=this._viscousLimit(f.x,v.max.x)),f.y>v.max.y&&(f.y=this._viscousLimit(f.y,v.max.y)),this._draggable._newPos=this._draggable._startPos.add(f)}},_onPreDragWrap:function(){var f=this._worldWidth,v=Math.round(f/2),E=this._initialWorldOffset,M=this._draggable._newPos.x,R=(M-v+E)%f+v-E,H=(M+v+E)%f-v-E,ee=Math.abs(R+E)<Math.abs(H+E)?R:H;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=ee},_onDragEnd:function(f){var v=this._map,E=v.options,M=!E.inertia||f.noInertia||this._times.length<2;if(v.fire("dragend",f),M)v.fire("moveend");else{this._prunePositions(+new Date);var R=this._lastPos.subtract(this._positions[0]),H=(this._lastTime-this._times[0])/1e3,ee=E.easeLinearity,fe=R.multiplyBy(ee/H),be=fe.distanceTo([0,0]),Ae=Math.min(E.inertiaMaxSpeed,be),$e=fe.multiplyBy(Ae/be),Ze=Ae/(E.inertiaDeceleration*ee),ft=$e.multiplyBy(-Ze/2).round();!ft.x&&!ft.y?v.fire("moveend"):(ft=v._limitOffset(ft,v.options.maxBounds),F(function(){v.panBy(ft,{duration:Ze,easeLinearity:ee,noMoveStart:!0,animate:!0})}))}}});xt.addInitHook("addHandler","dragging",ia),xt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var ah=Qi.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(f){this._map=f,this._setPanDelta(f.options.keyboardPanDelta),this._setZoomDelta(f.options.zoomDelta)},addHooks:function(){var f=this._map._container;f.tabIndex<=0&&(f.tabIndex="0"),ot(f,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Pt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var f=document.body,v=document.documentElement,E=f.scrollTop||v.scrollTop,M=f.scrollLeft||v.scrollLeft;this._map._container.focus(),window.scrollTo(M,E)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(f){var v=this._panKeys={},E=this.keyCodes,M,R;for(M=0,R=E.left.length;M<R;M++)v[E.left[M]]=[-1*f,0];for(M=0,R=E.right.length;M<R;M++)v[E.right[M]]=[f,0];for(M=0,R=E.down.length;M<R;M++)v[E.down[M]]=[0,f];for(M=0,R=E.up.length;M<R;M++)v[E.up[M]]=[0,-1*f]},_setZoomDelta:function(f){var v=this._zoomKeys={},E=this.keyCodes,M,R;for(M=0,R=E.zoomIn.length;M<R;M++)v[E.zoomIn[M]]=f;for(M=0,R=E.zoomOut.length;M<R;M++)v[E.zoomOut[M]]=-f},_addHooks:function(){ot(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Pt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(f){if(!(f.altKey||f.ctrlKey||f.metaKey)){var v=f.keyCode,E=this._map,M;if(v in this._panKeys){if(!E._panAnim||!E._panAnim._inProgress)if(M=this._panKeys[v],f.shiftKey&&(M=oe(M).multiplyBy(3)),E.options.maxBounds&&(M=E._limitOffset(oe(M),E.options.maxBounds)),E.options.worldCopyJump){var R=E.wrapLatLng(E.unproject(E.project(E.getCenter()).add(M)));E.panTo(R)}else E.panBy(M)}else if(v in this._zoomKeys)E.setZoom(E.getZoom()+(f.shiftKey?3:1)*this._zoomKeys[v]);else if(v===27&&E._popup&&E._popup.options.closeOnEscapeKey)E.closePopup();else return;uo(f)}}});xt.addInitHook("addHandler","keyboard",ah),xt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Ec=Qi.extend({addHooks:function(){ot(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Pt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(f){var v=yr(f),E=this._map.options.wheelDebounceTime;this._delta+=v,this._lastMousePos=this._map.mouseEventToContainerPoint(f),this._startTime||(this._startTime=+new Date);var M=Math.max(E-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),M),uo(f)},_performZoom:function(){var f=this._map,v=f.getZoom(),E=this._map.options.zoomSnap||0;f._stop();var M=this._delta/(this._map.options.wheelPxPerZoomLevel*4),R=4*Math.log(2/(1+Math.exp(-Math.abs(M))))/Math.LN2,H=E?Math.ceil(R/E)*E:R,ee=f._limitZoom(v+(this._delta>0?H:-H))-v;this._delta=0,this._startTime=null,ee&&(f.options.scrollWheelZoom==="center"?f.setZoom(v+ee):f.setZoomAround(this._lastMousePos,v+ee))}});xt.addInitHook("addHandler","scrollWheelZoom",Ec);var ts=600;xt.mergeOptions({tapHold:We.touchNative&&We.safari&&We.mobile,tapTolerance:15});var Yu=Qi.extend({addHooks:function(){ot(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Pt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(f){if(clearTimeout(this._holdTimeout),f.touches.length===1){var v=f.touches[0];this._startPos=this._newPos=new te(v.clientX,v.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(ot(document,"touchend",wn),ot(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",v))},this),ts),ot(document,"touchend touchcancel contextmenu",this._cancel,this),ot(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function f(){Pt(document,"touchend",wn),Pt(document,"touchend touchcancel",f)},_cancel:function(){clearTimeout(this._holdTimeout),Pt(document,"touchend touchcancel contextmenu",this._cancel,this),Pt(document,"touchmove",this._onMove,this)},_onMove:function(f){var v=f.touches[0];this._newPos=new te(v.clientX,v.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(f,v){var E=new MouseEvent(f,{bubbles:!0,cancelable:!0,view:window,screenX:v.screenX,screenY:v.screenY,clientX:v.clientX,clientY:v.clientY});E._simulated=!0,v.target.dispatchEvent(E)}});xt.addInitHook("addHandler","tapHold",Yu),xt.mergeOptions({touchZoom:We.touch,bounceAtZoomLimits:!0});var oh=Qi.extend({addHooks:function(){ct(this._map._container,"leaflet-touch-zoom"),ot(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){on(this._map._container,"leaflet-touch-zoom"),Pt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(f){var v=this._map;if(!(!f.touches||f.touches.length!==2||v._animatingZoom||this._zooming)){var E=v.mouseEventToContainerPoint(f.touches[0]),M=v.mouseEventToContainerPoint(f.touches[1]);this._centerPoint=v.getSize()._divideBy(2),this._startLatLng=v.containerPointToLatLng(this._centerPoint),v.options.touchZoom!=="center"&&(this._pinchStartLatLng=v.containerPointToLatLng(E.add(M)._divideBy(2))),this._startDist=E.distanceTo(M),this._startZoom=v.getZoom(),this._moved=!1,this._zooming=!0,v._stop(),ot(document,"touchmove",this._onTouchMove,this),ot(document,"touchend touchcancel",this._onTouchEnd,this),wn(f)}},_onTouchMove:function(f){if(!(!f.touches||f.touches.length!==2||!this._zooming)){var v=this._map,E=v.mouseEventToContainerPoint(f.touches[0]),M=v.mouseEventToContainerPoint(f.touches[1]),R=E.distanceTo(M)/this._startDist;if(this._zoom=v.getScaleZoom(R,this._startZoom),!v.options.bounceAtZoomLimits&&(this._zoom<v.getMinZoom()&&R<1||this._zoom>v.getMaxZoom()&&R>1)&&(this._zoom=v._limitZoom(this._zoom)),v.options.touchZoom==="center"){if(this._center=this._startLatLng,R===1)return}else{var H=E._add(M)._divideBy(2)._subtract(this._centerPoint);if(R===1&&H.x===0&&H.y===0)return;this._center=v.unproject(v.project(this._pinchStartLatLng,this._zoom).subtract(H),this._zoom)}this._moved||(v._moveStart(!0,!1),this._moved=!0),z(this._animRequest);var ee=o(v._move,v,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=F(ee,this,!0),wn(f)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,z(this._animRequest),Pt(document,"touchmove",this._onTouchMove,this),Pt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});xt.addInitHook("addHandler","touchZoom",oh),xt.BoxZoom=Mr,xt.DoubleClickZoom=qu,xt.Drag=ia,xt.Keyboard=ah,xt.ScrollWheelZoom=Ec,xt.TapHold=Yu,xt.TouchZoom=oh,n.Bounds=B,n.Browser=We,n.CRS=he,n.Canvas=Gu,n.Circle=$u,n.CircleMarker=il,n.Class=X,n.Control=Ur,n.DivIcon=wg,n.DivOverlay=or,n.DomEvent=Du,n.DomUtil=Qs,n.Draggable=fo,n.Evented=J,n.FeatureGroup=ea,n.GeoJSON=Ra,n.GridLayer=cl,n.Handler=Qi,n.Icon=ta,n.ImageOverlay=sl,n.LatLng=se,n.LatLngBounds=ie,n.Layer=ji,n.LayerGroup=rl,n.LineUtil=Kx,n.Map=xt,n.Marker=gc,n.Mixin=Hx,n.Path=na,n.Point=te,n.PolyUtil=th,n.Polygon=al,n.Polyline=Pa,n.Popup=xc,n.PosAnimation=el,n.Projection=fg,n.Rectangle=es,n.Renderer=Cr,n.SVG=ul,n.SVGOverlay=Hu,n.TileLayer=go,n.Tooltip=wc,n.Transformation=we,n.Util=W,n.VideoOverlay=po,n.bind=o,n.bounds=V,n.canvas=Sc,n.circle=bg,n.circleMarker=gg,n.control=Da,n.divIcon=Jx,n.extend=i,n.featureGroup=mg,n.geoJSON=Fu,n.geoJson=vc,n.gridLayer=_g,n.icon=hc,n.imageOverlay=yg,n.latLng=me,n.latLngBounds=Q,n.layerGroup=Wx,n.map=Vf,n.marker=pg,n.point=oe,n.polygon=Zx,n.polyline=Vx,n.popup=xg,n.rectangle=Qx,n.setOptions=_,n.stamp=u,n.svg=kc,n.svgOverlay=vg,n.tileLayer=ai,n.tooltip=Xx,n.transformation=le,n.version=r,n.videoOverlay=ll;var sh=window.L;n.noConflict=function(){return window.L=sh,this},window.L=n}))})(ym,ym.exports)),ym.exports}var qZ=GZ();const Y_=wi(qZ),C0=e=>e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;");function Bc(e){const t=document.getElementById(e);if(!t)throw new Error(`#${e} not found`);return t}function YZ(e){const{buttonId:t,buttonInputId:n,modalId:r,closeMapId:i,mapCloseBtnId:a,searchBoxId:o,suggestionsId:l,mapId:u}=e.ids,d=e.initialCenter??{lat:37.5665,lon:126.978},h=Bc(n),p=Bc(t),b=Bc(r),y=Bc(a),S=Bc(o),_=Bc(l),k=i?Bc(i):null;let A=null,N=null,j=null;const C=z=>z.code==="Space"||z.key===" "||z.key==="Spacebar"||z.key==="Space",D=z=>{C(z)&&document.activeElement!==S&&(z.preventDefault(),z.stopPropagation(),S.focus())},P=()=>{b.style.display="flex",A?setTimeout(()=>A?.invalidateSize(),200):setTimeout(()=>{A=Y_.map(u,{keyboard:!1}).setView([d.lat,d.lon],11),Y_.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:" OpenStreetMap"}).addTo(A),A.invalidateSize()},0),b.addEventListener("keydown",D,!0),b.addEventListener("keyup",D,!0),S.focus()},$=()=>{b.style.display="none",S.value="",_.innerHTML="",j&&(window.clearTimeout(j),j=null),b.removeEventListener("keydown",D,!0),b.removeEventListener("keyup",D,!0)},U=z=>{const W=z.dataset.name??"",X=Number(z.dataset.lat??""),Z=Number(z.dataset.lon??"");!Number.isFinite(X)||!Number.isFinite(Z)||!A||(N?N.setLatLng([X,Z]):N=Y_.marker([X,Z]).addTo(A),A.flyTo([X,Z],14,{duration:.5}),h.value=W,h.dataset.lat=String(X),h.dataset.lon=String(Z),e.onSelected?.({name:W,lat:X,lon:Z}),_.innerHTML="",$())},Y=()=>{j&&window.clearTimeout(j);const z=S.value.trim();if(!z){_.innerHTML="";return}j=window.setTimeout(async()=>{try{const W="https://nominatim.openstreetmap.org/search?format=jsonv2&limit=12&accept-language=ko&addressdetails=1&dedupe=1&email=unique950318@gmail.com&q="+encodeURIComponent(z),X=await fetch(W,{headers:{Accept:"application/json"}});if(!X.ok)throw new Error(`HTTP ${X.status}`);const Z=await X.json();if(!Array.isArray(Z)||Z.length===0){_.innerHTML='<li style="padding:8px"> </li>';return}const G=Z.slice(0,12).map((J,te)=>{const ce=J.display_name.split(",").slice(0,3).map(V=>V.trim()).join("  "),oe="padding:8px;cursor:pointer;outline:none;",B=te===0?"background-color:#1f2937;border-radius:4px;":"";return`<li
                    role="option"
                    data-name="${C0(ce)}"
                    data-lat="${C0(J.lat)}"
                    data-lon="${C0(J.lon)}"
                    data-active="${te===0?"1":"0"}"
                    style="${oe}${B}"
                  >${C0(ce)}</li>`}).join("");_.innerHTML=G}catch(W){console.error(W),_.innerHTML='<li style="padding:8px;color:#b91c1c"> </li>'}},250)},K=z=>{const W=z.target;W.tagName==="LI"&&U(W)},F=z=>{if(z.key==="Enter"){const W=_.querySelector('li[data-active="1"]')??_.querySelector("li");W&&U(W)}};return p.addEventListener("click",P),y.addEventListener("click",$),k&&k.addEventListener("click",$),S.addEventListener("input",Y),S.addEventListener("keydown",F),_.addEventListener("click",K),()=>{p.removeEventListener("click",P),y.removeEventListener("click",$),k&&k.removeEventListener("click",$),S.removeEventListener("input",Y),S.removeEventListener("keydown",F),_.removeEventListener("click",K),b.removeEventListener("keydown",D,!0),b.removeEventListener("keyup",D,!0),j&&(window.clearTimeout(j),j=null),A&&(A.remove(),A=null)}}function vd(){return document.getElementById("suggestions")}function Db(e){const t=Array.from(e.querySelectorAll('li, [role="option"]'));return t.forEach((n,r)=>{n.getAttribute("role")||n.setAttribute("role","option"),n.setAttribute("aria-selected",n===document.activeElement?"true":"false"),n.tabIndex=-1,n.id||(n.id=`suggestion-item-${r}`)}),t}function K_(e,t){const n=Db(e);if(n.length===0)return;const r=n.length;let i=t;i<0&&(i=r-1),i>=r&&(i=0),n.forEach(o=>{o.tabIndex=-1,o.setAttribute("aria-selected","false")});const a=n[i];a.tabIndex=0,a.setAttribute("aria-selected","true"),a.focus()}const KZ='button, [href], input:not([type="hidden"]), select, textarea, [tabindex]:not([tabindex="-1"])';function WZ({open:e,setOpen:t,setBtnText:n,setLocalValue:r,nameRef:i,latRef:a,lonRef:o,triggerBtnRef:l,onSelect:u}){w.useEffect(()=>{if(!e)return;const d=YZ({ids:{buttonInputId:"inputBirthPlace",buttonId:"inputBirthPlaceBtn",modalId:"mapModal",closeMapId:"closeMap",mapCloseBtnId:"mapCloseBtn",searchBoxId:"searchBox",suggestionsId:"suggestions",mapId:"map"},onSelected:j=>{n(""),r(j.name),i.current&&(i.current.value=j.name),a.current&&(a.current.value=String(j.lat)),o.current&&(o.current.value=String(j.lon)),u?.(j),t(!1)}}),h=document.getElementById("inputBirthPlaceBtn");h&&h.dispatchEvent(new MouseEvent("click",{bubbles:!0}));const p=document.getElementById("mapModal");if(!p)return;const b=document.getElementById("searchBox"),y=vd();setTimeout(()=>b?.focus(),0);const S=j=>{if(j.key==="Escape"){j.preventDefault(),t(!1);return}if(j.key!=="Tab")return;const C=vd();if(C&&C.contains(document.activeElement))return;const D=Array.from(p.querySelectorAll(KZ)).filter(Y=>!Y.hasAttribute("disabled")&&Y.tabIndex!==-1);if(D.length===0)return;const P=D[0],$=D[D.length-1],U=document.activeElement;j.shiftKey?(U===P||!p.contains(U))&&(j.preventDefault(),$.focus()):(U===$||!p.contains(U))&&(j.preventDefault(),P.focus())};p.addEventListener("keydown",S);const _=j=>{if(j.key!=="ArrowDown")return;const C=vd();!C||Db(C).length===0||j.preventDefault()};b?.addEventListener("keydown",_);const k=j=>{if(j.target.value.trim()===""){const D=vd();D&&(D.innerHTML="")}};b?.addEventListener("input",k);const A=j=>{const C=vd();if(!C)return;const D=Db(C);if(D.length===0)return;const P=document.activeElement,$=P?D.indexOf(P):-1;if($===-1)return;const U=Y=>{j.preventDefault(),K_(C,$+Y)};switch(j.key){case"Tab":j.preventDefault(),U(j.shiftKey?-1:1);break;case"ArrowDown":j.preventDefault(),U(1);break;case"ArrowUp":j.preventDefault(),U(-1);break;case"Home":j.preventDefault(),K_(C,0);break;case"End":j.preventDefault(),K_(C,D.length-1);break;case"Enter":case" ":j.preventDefault(),P.click();break;case"Backspace":j.preventDefault(),C.innerHTML="",b?.focus();break}j.stopPropagation()};let N=null;return y&&(y.addEventListener("keydown",A),N=new MutationObserver(()=>{const j=vd();!j||Db(j).length}),N.observe(y,{childList:!0,subtree:!1})),()=>{p.removeEventListener("keydown",S),b?.removeEventListener("keydown",_),b?.removeEventListener("input",k),y&&y.removeEventListener("keydown",A),N?.disconnect(),d?.()}},[e,u,n,r,t,i,a,o]),w.useEffect(()=>{e||setTimeout(()=>l.current?.focus(),0)},[e,l])}function BB({onSelect:e,placeholderText:t=" ",buttonStyle:n,value:r}){const i=FZ({placeholderText:t,value:r});return WZ({...i,onSelect:e}),g.jsxs("li",{className:"flex items-center gap-2",children:[g.jsx("input",{className:`w-[60%] desk:w-[70%] mr-2 border rounded-lg p-2
                   bg-white dark:bg-neutral-900
                   border-neutral-300 dark:border-neutral-700
                   text-neutral-900 dark:text-neutral-100
                   placeholder-neutral-400 dark:placeholder-neutral-500`,type:"text",id:"inputBirthPlace",readOnly:!0,"aria-readonly":"true",value:i.localValue&&i.localValue.trim()!==""?i.localValue:t}),g.jsx("button",{ref:i.triggerBtnRef,type:"button",id:"inputBirthPlaceBtn",className:"btn_style text-sm desk:text-base w-[calc(40%_-_8px)] desk:w-[calc(30%_-_8px)] p-0",style:n,onClick:()=>i.setOpen(!0),"aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":"mapModal",children:i.btnText}),g.jsx("input",{ref:i.nameRef,type:"hidden",name:"birthPlace_name",defaultValue:""}),g.jsx("input",{ref:i.latRef,type:"hidden",name:"birthPlace_lat",defaultValue:""}),g.jsx("input",{ref:i.lonRef,type:"hidden",name:"birthPlace_lon",defaultValue:""}),i.open&&g.jsx("div",{id:"mapModal",role:"dialog","aria-modal":"true","aria-labelledby":"mapModalTitle",className:"fixed inset-0 z-[999] flex items-center justify-center bg-black/40 dark:bg-black/60 p-4",children:g.jsxs("div",{className:`w-[96vw] desk:w-[920px] rounded-2xl shadow-2xl overflow-hidden flex flex-col
                          bg-white dark:bg-neutral-950
                          text-neutral-900 dark:text-neutral-100
                          border border-neutral-200 dark:border-neutral-800`,children:[g.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-neutral-200 dark:border-neutral-800",children:[g.jsx("div",{id:"mapModalTitle",className:"font-bold",children:" "}),g.jsx("button",{id:"mapCloseBtn","aria-label":"",className:"text-xl hover:opacity-70 cursor-pointer",onClick:()=>i.setOpen(!1),children:""})]}),g.jsxs("div",{className:"relative grid gap-2 px-3 py-3 border-t border-neutral-200 dark:border-neutral-800",children:[g.jsx("label",{htmlFor:"searchBox",className:"text-xs text-neutral-500 dark:text-neutral-400",children:"/ "}),g.jsxs("div",{className:"relative",children:[g.jsx("input",{id:"searchBox",placeholder:":  / seoul / / tokyo",className:`h-10 w-full rounded-lg border px-3 outline-none
                             bg-white dark:bg-neutral-900
                             border-neutral-300 dark:border-neutral-700
                             placeholder-neutral-400 dark:placeholder-neutral-500
                             text-neutral-900 dark:text-neutral-100
                             focus:border-neutral-400 dark:focus:border-neutral-600`,autoComplete:"off"}),g.jsx("ul",{id:"suggestions",role:"listbox","aria-label":" ",className:`absolute left-0 right-0 mt-1 max-h-60 overflow-y-auto rounded-lg border shadow-xl z-[1005]
                             bg-white dark:bg-neutral-900
                             border-neutral-200 dark:border-neutral-700
                             text-neutral-900 dark:text-neutral-100
                             divide-y divide-neutral-200 dark:divide-neutral-800`})]})]}),g.jsx("div",{className:"relative h-[250px] desk:h-[360px] border-y border-neutral-200 dark:border-neutral-800",children:g.jsx("div",{id:"map",className:"h-full w-full"})}),g.jsxs("div",{className:"gap-2 p-3",children:[g.jsxs("div",{id:"footerHint",className:"pr-2 text-xs text-neutral-600 dark:text-neutral-300 flex-1",children:[g.jsxs("p",{className:"flex mb-1",children:[g.jsx("span",{className:"mr-1",children:"*"}),g.jsx("span",{children:"   ."})]}),g.jsxs("p",{className:"flex",children:[g.jsx("span",{className:"mr-1",children:"*"}),g.jsx("span",{children:"       ."})]})]}),g.jsx("button",{id:"closeMap",style:{display:"none"},"aria-hidden":"true",tabIndex:-1})]})]})})]})}function ur(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var VZ=typeof Symbol=="function"&&Symbol.observable||"@@observable",RM=VZ,W_=()=>Math.random().toString(36).substring(7).split("").join("."),ZZ={INIT:`@@redux/INIT${W_()}`,REPLACE:`@@redux/REPLACE${W_()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${W_()}`},iy=ZZ;function KE(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function WE(e,t,n){if(typeof e!="function")throw new Error(ur(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(ur(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(ur(1));return n(WE)(e,t)}let r=e,i=t,a=new Map,o=a,l=0,u=!1;function d(){o===a&&(o=new Map,a.forEach((k,A)=>{o.set(A,k)}))}function h(){if(u)throw new Error(ur(3));return i}function p(k){if(typeof k!="function")throw new Error(ur(4));if(u)throw new Error(ur(5));let A=!0;d();const N=l++;return o.set(N,k),function(){if(A){if(u)throw new Error(ur(6));A=!1,d(),o.delete(N),a=null}}}function b(k){if(!KE(k))throw new Error(ur(7));if(typeof k.type>"u")throw new Error(ur(8));if(typeof k.type!="string")throw new Error(ur(17));if(u)throw new Error(ur(9));try{u=!0,i=r(i,k)}finally{u=!1}return(a=o).forEach(N=>{N()}),k}function y(k){if(typeof k!="function")throw new Error(ur(10));r=k,b({type:iy.REPLACE})}function S(){const k=p;return{subscribe(A){if(typeof A!="object"||A===null)throw new Error(ur(11));function N(){const C=A;C.next&&C.next(h())}return N(),{unsubscribe:k(N)}},[RM](){return this}}}return b({type:iy.INIT}),{dispatch:b,subscribe:p,getState:h,replaceReducer:y,[RM]:S}}function XZ(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:iy.INIT})>"u")throw new Error(ur(12));if(typeof n(void 0,{type:iy.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(ur(13))})}function zB(e){const t=Object.keys(e),n={};for(let a=0;a<t.length;a++){const o=t[a];typeof e[o]=="function"&&(n[o]=e[o])}const r=Object.keys(n);let i;try{XZ(n)}catch(a){i=a}return function(o={},l){if(i)throw i;let u=!1;const d={};for(let h=0;h<r.length;h++){const p=r[h],b=n[p],y=o[p],S=b(y,l);if(typeof S>"u")throw l&&l.type,new Error(ur(14));d[p]=S,u=u||S!==y}return u=u||r.length!==Object.keys(o).length,u?d:o}}function LM(e,t){return function(...n){return t(e.apply(this,n))}}function IM(e,t){if(typeof e=="function")return LM(e,t);if(typeof e!="object"||e===null)throw new Error(ur(16));const n={};for(const r in e){const i=e[r];typeof i=="function"&&(n[r]=LM(i,t))}return n}function Lm(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function UB(...e){return t=>(n,r)=>{const i=t(n,r);let a=()=>{throw new Error(ur(15))};const o={getState:i.getState,dispatch:(u,...d)=>a(u,...d)},l=e.map(u=>u(o));return a=Lm(...l)(i.dispatch),{...i,dispatch:a}}}function FB(e){return KE(e)&&"type"in e&&typeof e.type=="string"}var V_={exports:{}},Z_={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $M;function JZ(){if($M)return Z_;$M=1;var e=ff();function t(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var n=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,i=e.useRef,a=e.useEffect,o=e.useMemo,l=e.useDebugValue;return Z_.useSyncExternalStoreWithSelector=function(u,d,h,p,b){var y=i(null);if(y.current===null){var S={hasValue:!1,value:null};y.current=S}else S=y.current;y=o(function(){function k(D){if(!A){if(A=!0,N=D,D=p(D),b!==void 0&&S.hasValue){var P=S.value;if(b(P,D))return j=P}return j=D}if(P=j,n(N,D))return P;var $=p(D);return b!==void 0&&b(P,$)?(N=D,P):(N=D,j=$)}var A=!1,N,j,C=h===void 0?null:h;return[function(){return k(d())},C===null?void 0:function(){return k(C())}]},[d,h,p,b]);var _=r(u,y[0],y[1]);return a(function(){S.hasValue=!0,S.value=_},[_]),l(_),_},Z_}var BM;function QZ(){return BM||(BM=1,V_.exports=JZ()),V_.exports}QZ();var eX=w.version.startsWith("19"),tX=Symbol.for(eX?"react.transitional.element":"react.element"),nX=Symbol.for("react.portal"),rX=Symbol.for("react.fragment"),iX=Symbol.for("react.strict_mode"),aX=Symbol.for("react.profiler"),oX=Symbol.for("react.consumer"),sX=Symbol.for("react.context"),HB=Symbol.for("react.forward_ref"),lX=Symbol.for("react.suspense"),cX=Symbol.for("react.suspense_list"),VE=Symbol.for("react.memo"),uX=Symbol.for("react.lazy"),dX=HB,fX=VE;function hX(e){if(typeof e=="object"&&e!==null){const{$$typeof:t}=e;switch(t){case tX:switch(e=e.type,e){case rX:case aX:case iX:case lX:case cX:return e;default:switch(e=e&&e.$$typeof,e){case sX:case HB:case uX:case VE:return e;case oX:return e;default:return t}}case nX:return t}}}function mX(e){return hX(e)===VE}function pX(e,t,n,r,{areStatesEqual:i,areOwnPropsEqual:a,areStatePropsEqual:o}){let l=!1,u,d,h,p,b;function y(N,j){return u=N,d=j,h=e(u,d),p=t(r,d),b=n(h,p,d),l=!0,b}function S(){return h=e(u,d),t.dependsOnOwnProps&&(p=t(r,d)),b=n(h,p,d),b}function _(){return e.dependsOnOwnProps&&(h=e(u,d)),t.dependsOnOwnProps&&(p=t(r,d)),b=n(h,p,d),b}function k(){const N=e(u,d),j=!o(N,h);return h=N,j&&(b=n(h,p,d)),b}function A(N,j){const C=!a(j,d),D=!i(N,u,j,d);return u=N,d=j,C&&D?S():C?_():D?k():b}return function(j,C){return l?A(j,C):y(j,C)}}function gX(e,{initMapStateToProps:t,initMapDispatchToProps:n,initMergeProps:r,...i}){const a=t(e,i),o=n(e,i),l=r(e,i);return pX(a,o,l,e,i)}function bX(e,t){const n={};for(const r in e){const i=e[r];typeof i=="function"&&(n[r]=(...a)=>t(i(...a)))}return n}function Gk(e){return function(n){const r=e(n);function i(){return r}return i.dependsOnOwnProps=!1,i}}function zM(e){return e.dependsOnOwnProps?!!e.dependsOnOwnProps:e.length!==1}function GB(e,t){return function(r,{displayName:i}){const a=function(l,u){return a.dependsOnOwnProps?a.mapToProps(l,u):a.mapToProps(l,void 0)};return a.dependsOnOwnProps=!0,a.mapToProps=function(l,u){a.mapToProps=e,a.dependsOnOwnProps=zM(e);let d=a(l,u);return typeof d=="function"&&(a.mapToProps=d,a.dependsOnOwnProps=zM(d),d=a(l,u)),d},a}}function ZE(e,t){return(n,r)=>{throw new Error(`Invalid value of type ${typeof e} for ${t} argument when connecting component ${r.wrappedComponentName}.`)}}function yX(e){return e&&typeof e=="object"?Gk(t=>bX(e,t)):e?typeof e=="function"?GB(e):ZE(e,"mapDispatchToProps"):Gk(t=>({dispatch:t}))}function vX(e){return e?typeof e=="function"?GB(e):ZE(e,"mapStateToProps"):Gk(()=>({}))}function xX(e,t,n){return{...n,...e,...t}}function wX(e){return function(n,{displayName:r,areMergedPropsEqual:i}){let a=!1,o;return function(u,d,h){const p=e(u,d,h);return a?i(p,o)||(o=p):(a=!0,o=p),o}}}function _X(e){return e?typeof e=="function"?wX(e):ZE(e,"mergeProps"):()=>xX}function SX(e){e()}function kX(){let e=null,t=null;return{clear(){e=null,t=null},notify(){SX(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var UM={notify(){},get:()=>[]};function qB(e,t){let n,r=UM,i=0,a=!1;function o(_){h();const k=r.subscribe(_);let A=!1;return()=>{A||(A=!0,k(),p())}}function l(){r.notify()}function u(){S.onStateChange&&S.onStateChange()}function d(){return a}function h(){i++,n||(n=t?t.addNestedSub(u):e.subscribe(u),r=kX())}function p(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=UM)}function b(){a||(a=!0,h())}function y(){a&&(a=!1,p())}const S={addNestedSub:o,notifyNestedSubs:l,handleChangeWrapper:u,isSubscribed:d,trySubscribe:b,tryUnsubscribe:y,getListeners:()=>r};return S}var EX=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",TX=EX(),AX=()=>typeof navigator<"u"&&navigator.product==="ReactNative",jX=AX(),OX=()=>TX||jX?w.useLayoutEffect:w.useEffect,ay=OX();function FM(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function Pb(e,t){if(FM(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(t,n[i])||!FM(e[n[i]],t[n[i]]))return!1;return!0}var NX={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},CX={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},MX={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},YB={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},DX={[dX]:MX,[fX]:YB};function HM(e){return mX(e)?YB:DX[e.$$typeof]||NX}var PX=Object.defineProperty,RX=Object.getOwnPropertyNames,GM=Object.getOwnPropertySymbols,LX=Object.getOwnPropertyDescriptor,IX=Object.getPrototypeOf,qM=Object.prototype;function qk(e,t){if(typeof t!="string"){if(qM){const a=IX(t);a&&a!==qM&&qk(e,a)}let n=RX(t);GM&&(n=n.concat(GM(t)));const r=HM(e),i=HM(t);for(let a=0;a<n.length;++a){const o=n[a];if(!CX[o]&&!(i&&i[o])&&!(r&&r[o])){const l=LX(t,o);try{PX(e,o,l)}catch{}}}}return e}var $X=Symbol.for("react-redux-context"),BX=typeof globalThis<"u"?globalThis:{};function zX(){if(!w.createContext)return{};const e=BX[$X]??=new Map;let t=e.get(w.createContext);return t||(t=w.createContext(null),e.set(w.createContext,t)),t}var KB=zX(),UX=[null,null];function FX(e,t,n){ay(()=>e(...t),n)}function HX(e,t,n,r,i,a){e.current=r,n.current=!1,i.current&&(i.current=null,a())}function GX(e,t,n,r,i,a,o,l,u,d,h){if(!e)return()=>{};let p=!1,b=null;const y=()=>{if(p||!l.current)return;const _=t.getState();let k,A;try{k=r(_,i.current)}catch(N){A=N,b=N}A||(b=null),k===a.current?o.current||d():(a.current=k,u.current=k,o.current=!0,h())};return n.onStateChange=y,n.trySubscribe(),y(),()=>{if(p=!0,n.tryUnsubscribe(),n.onStateChange=null,b)throw b}}function qX(e,t){return e===t}function YX(e,t,n,{pure:r,areStatesEqual:i=qX,areOwnPropsEqual:a=Pb,areStatePropsEqual:o=Pb,areMergedPropsEqual:l=Pb,forwardRef:u=!1,context:d=KB}={}){const h=d,p=vX(e),b=yX(t),y=_X(n),S=!!e;return k=>{const A=k.displayName||k.name||"Component",N=`Connect(${A})`,j={shouldHandleStateChanges:S,displayName:N,wrappedComponentName:A,WrappedComponent:k,initMapStateToProps:p,initMapDispatchToProps:b,initMergeProps:y,areStatesEqual:i,areStatePropsEqual:o,areOwnPropsEqual:a,areMergedPropsEqual:l};function C($){const[U,Y,K]=w.useMemo(()=>{const{reactReduxForwardedRef:le,...Ue}=$;return[$.context,le,Ue]},[$]),F=w.useMemo(()=>{let le=h;return U?.Consumer,le},[U,h]),z=w.useContext(F),W=!!$.store&&!!$.store.getState&&!!$.store.dispatch,X=!!z&&!!z.store,Z=W?$.store:z.store,G=X?z.getServerState:Z.getState,J=w.useMemo(()=>gX(Z.dispatch,j),[Z]),[te,ce]=w.useMemo(()=>{if(!S)return UX;const le=qB(Z,W?void 0:z.subscription),Ue=le.notifyNestedSubs.bind(le);return[le,Ue]},[Z,W,z]),oe=w.useMemo(()=>W?z:{...z,subscription:te},[W,z,te]),B=w.useRef(void 0),V=w.useRef(K),ie=w.useRef(void 0),Q=w.useRef(!1),se=w.useRef(!1),me=w.useRef(void 0);ay(()=>(se.current=!0,()=>{se.current=!1}),[]);const he=w.useMemo(()=>()=>ie.current&&K===V.current?ie.current:J(Z.getState(),K),[Z,K]),_e=w.useMemo(()=>Ue=>te?GX(S,Z,te,J,V,B,Q,se,ie,ce,Ue):()=>{},[te]);FX(HX,[V,B,Q,K,ie,ce]);let re;try{re=w.useSyncExternalStore(_e,he,G?()=>J(G(),K):he)}catch(le){throw me.current&&(le.message+=`
The error may be correlated with this previous error:
${me.current.stack}

`),le}ay(()=>{me.current=void 0,ie.current=void 0,B.current=re});const Ee=w.useMemo(()=>w.createElement(k,{...re,ref:Y}),[Y,k,re]);return w.useMemo(()=>S?w.createElement(F.Provider,{value:oe},Ee):Ee,[F,Ee,oe])}const P=w.memo(C);if(P.WrappedComponent=k,P.displayName=C.displayName=N,u){const U=w.forwardRef(function(K,F){return w.createElement(P,{...K,reactReduxForwardedRef:F})});return U.displayName=N,U.WrappedComponent=k,qk(U,k)}return qk(P,k)}}var WB=YX;function KX(e){const{children:t,context:n,serverState:r,store:i}=e,a=w.useMemo(()=>{const u=qB(i);return{store:i,subscription:u,getServerState:r?()=>r:void 0}},[i,r]),o=w.useMemo(()=>i.getState(),[i]);ay(()=>{const{subscription:u}=a;return u.onStateChange=u.notifyNestedSubs,u.trySubscribe(),o!==i.getState()&&u.notifyNestedSubs(),()=>{u.tryUnsubscribe(),u.onStateChange=void 0}},[a,o]);const l=n||KB;return w.createElement(l.Provider,{value:a},t)}var VB=KX,WX="Invariant failed";function VX(e,t){throw new Error(WX)}var Xa=function(t){var n=t.top,r=t.right,i=t.bottom,a=t.left,o=r-a,l=i-n,u={top:n,right:r,bottom:i,left:a,width:o,height:l,x:a,y:n,center:{x:(r+a)/2,y:(i+n)/2}};return u},XE=function(t,n){return{top:t.top-n.top,left:t.left-n.left,bottom:t.bottom+n.bottom,right:t.right+n.right}},YM=function(t,n){return{top:t.top+n.top,left:t.left+n.left,bottom:t.bottom-n.bottom,right:t.right-n.right}},ZX=function(t,n){return{top:t.top+n.y,left:t.left+n.x,bottom:t.bottom+n.y,right:t.right+n.x}},X_={top:0,right:0,bottom:0,left:0},JE=function(t){var n=t.borderBox,r=t.margin,i=r===void 0?X_:r,a=t.border,o=a===void 0?X_:a,l=t.padding,u=l===void 0?X_:l,d=Xa(XE(n,i)),h=Xa(YM(n,o)),p=Xa(YM(h,u));return{marginBox:d,borderBox:Xa(n),paddingBox:h,contentBox:p,margin:i,border:o,padding:u}},la=function(t){var n=t.slice(0,-2),r=t.slice(-2);if(r!=="px")return 0;var i=Number(n);return isNaN(i)&&VX(),i},XX=function(){return{x:window.pageXOffset,y:window.pageYOffset}},oy=function(t,n){var r=t.borderBox,i=t.border,a=t.margin,o=t.padding,l=ZX(r,n);return JE({borderBox:l,border:i,margin:a,padding:o})},sy=function(t,n){return n===void 0&&(n=XX()),oy(t,n)},ZB=function(t,n){var r={top:la(n.marginTop),right:la(n.marginRight),bottom:la(n.marginBottom),left:la(n.marginLeft)},i={top:la(n.paddingTop),right:la(n.paddingRight),bottom:la(n.paddingBottom),left:la(n.paddingLeft)},a={top:la(n.borderTopWidth),right:la(n.borderRightWidth),bottom:la(n.borderBottomWidth),left:la(n.borderLeftWidth)};return JE({borderBox:t,margin:r,padding:i,border:a})},XB=function(t){var n=t.getBoundingClientRect(),r=window.getComputedStyle(t);return ZB(n,r)},Im=function(t){var n=[],r=null,i=function(){for(var o=arguments.length,l=new Array(o),u=0;u<o;u++)l[u]=arguments[u];n=l,!r&&(r=requestAnimationFrame(function(){r=null,t.apply(void 0,n)}))};return i.cancel=function(){r&&(cancelAnimationFrame(r),r=null)},i};function ly(){return ly=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ly.apply(null,arguments)}function JB(e,t){}JB.bind(null,"warn");JB.bind(null,"error");function Bl(){}function JX(e,t){return{...e,...t}}function ma(e,t,n){const r=t.map(i=>{const a=JX(n,i.options);return e.addEventListener(i.eventName,i.fn,a),function(){e.removeEventListener(i.eventName,i.fn,a)}});return function(){r.forEach(a=>{a()})}}const QX="Invariant failed";class cy extends Error{}cy.prototype.toString=function(){return this.message};function Re(e,t){throw new cy(QX)}class eJ extends Xt.Component{constructor(...t){super(...t),this.callbacks=null,this.unbind=Bl,this.onWindowError=n=>{const r=this.getCallbacks();r.isDragging()&&r.tryAbort(),n.error instanceof cy&&n.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=n=>{this.callbacks=n}}componentDidMount(){this.unbind=ma(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(t){if(t instanceof cy){this.setState({});return}throw t}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}}const tJ=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,uy=e=>e+1,nJ=e=>`
  You have lifted an item in position ${uy(e.source.index)}
`,QB=(e,t)=>{const n=e.droppableId===t.droppableId,r=uy(e.index),i=uy(t.index);return n?`
      You have moved the item from position ${r}
      to position ${i}
    `:`
    You have moved the item from position ${r}
    in list ${e.droppableId}
    to list ${t.droppableId}
    in position ${i}
  `},e4=(e,t,n)=>t.droppableId===n.droppableId?`
      The item ${e}
      has been combined with ${n.draggableId}`:`
      The item ${e}
      in list ${t.droppableId}
      has been combined with ${n.draggableId}
      in list ${n.droppableId}
    `,rJ=e=>{const t=e.destination;if(t)return QB(e.source,t);const n=e.combine;return n?e4(e.draggableId,e.source,n):"You are over an area that cannot be dropped on"},KM=e=>`
  The item has returned to its starting position
  of ${uy(e.index)}
`,iJ=e=>{if(e.reason==="CANCEL")return`
      Movement cancelled.
      ${KM(e.source)}
    `;const t=e.destination,n=e.combine;return t?`
      You have dropped the item.
      ${QB(e.source,t)}
    `:n?`
      You have dropped the item.
      ${e4(e.draggableId,e.source,n)}
    `:`
    The item has been dropped while not over a drop area.
    ${KM(e.source)}
  `},Rb={dragHandleUsageInstructions:tJ,onDragStart:nJ,onDragUpdate:rJ,onDragEnd:iJ};function aJ(e,t){return!!(e===t||Number.isNaN(e)&&Number.isNaN(t))}function t4(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!aJ(e[n],t[n]))return!1;return!0}function kt(e,t){const n=w.useState(()=>({inputs:t,result:e()}))[0],r=w.useRef(!0),i=w.useRef(n),o=r.current||!!(t&&i.current.inputs&&t4(t,i.current.inputs))?i.current:{inputs:t,result:e()};return w.useEffect(()=>{r.current=!1,i.current=o},[o]),o.result}function Je(e,t){return kt(()=>e,t)}const mr={x:0,y:0},Er=(e,t)=>({x:e.x+t.x,y:e.y+t.y}),Ui=(e,t)=>({x:e.x-t.x,y:e.y-t.y}),zl=(e,t)=>e.x===t.x&&e.y===t.y,vf=e=>({x:e.x!==0?-e.x:0,y:e.y!==0?-e.y:0}),mu=(e,t,n=0)=>e==="x"?{x:t,y:n}:{x:n,y:t},$m=(e,t)=>Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2),WM=(e,t)=>Math.min(...t.map(n=>$m(e,n))),n4=e=>t=>({x:e(t.x),y:e(t.y)});var oJ=(e,t)=>{const n=Xa({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return n.width<=0||n.height<=0?null:n};const yp=(e,t)=>({top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}),VM=e=>[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}],sJ={top:0,right:0,bottom:0,left:0},lJ=(e,t)=>t?yp(e,t.scroll.diff.displacement):e,cJ=(e,t,n)=>n&&n.increasedBy?{...e,[t.end]:e[t.end]+n.increasedBy[t.line]}:e,uJ=(e,t)=>t&&t.shouldClipSubject?oJ(t.pageMarginBox,e):Xa(e);var Xd=({page:e,withPlaceholder:t,axis:n,frame:r})=>{const i=lJ(e.marginBox,r),a=cJ(i,n,t),o=uJ(a,r);return{page:e,withPlaceholder:t,active:o}},QE=(e,t)=>{e.frame||Re();const n=e.frame,r=Ui(t,n.scroll.initial),i=vf(r),a={...n,scroll:{initial:n.scroll.initial,current:t,diff:{value:r,displacement:i},max:n.scroll.max}},o=Xd({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:a});return{...e,frame:a,subject:o}};function hr(e,t=t4){let n=null;function r(...i){if(n&&n.lastThis===this&&t(i,n.lastArgs))return n.lastResult;const a=e.apply(this,i);return n={lastResult:a,lastArgs:i,lastThis:this},a}return r.clear=function(){n=null},r}const r4=hr(e=>e.reduce((t,n)=>(t[n.descriptor.id]=n,t),{})),i4=hr(e=>e.reduce((t,n)=>(t[n.descriptor.id]=n,t),{})),Cv=hr(e=>Object.values(e)),dJ=hr(e=>Object.values(e));var xf=hr((e,t)=>dJ(t).filter(r=>e===r.descriptor.droppableId).sort((r,i)=>r.descriptor.index-i.descriptor.index));function eT(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function Mv(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var Dv=hr((e,t)=>t.filter(n=>n.descriptor.id!==e.descriptor.id)),fJ=({isMovingForward:e,draggable:t,destination:n,insideDestination:r,previousImpact:i})=>{if(!n.isCombineEnabled||!eT(i))return null;function o(y){const S={type:"COMBINE",combine:{draggableId:y,droppableId:n.descriptor.id}};return{...i,at:S}}const l=i.displaced.all,u=l.length?l[0]:null;if(e)return u?o(u):null;const d=Dv(t,r);if(!u){if(!d.length)return null;const y=d[d.length-1];return o(y.descriptor.id)}const h=d.findIndex(y=>y.descriptor.id===u);h===-1&&Re();const p=h-1;if(p<0)return null;const b=d[p];return o(b.descriptor.id)},wf=(e,t)=>e.descriptor.droppableId===t.descriptor.id;const a4={point:mr,value:0},Bm={invisible:{},visible:{},all:[]},hJ={displaced:Bm,displacedBy:a4,at:null};var va=(e,t)=>n=>e<=n&&n<=t,o4=e=>{const t=va(e.top,e.bottom),n=va(e.left,e.right);return r=>{if(t(r.top)&&t(r.bottom)&&n(r.left)&&n(r.right))return!0;const a=t(r.top)||t(r.bottom),o=n(r.left)||n(r.right);if(a&&o)return!0;const u=r.top<e.top&&r.bottom>e.bottom,d=r.left<e.left&&r.right>e.right;return u&&d?!0:u&&o||d&&a}},mJ=e=>{const t=va(e.top,e.bottom),n=va(e.left,e.right);return r=>t(r.top)&&t(r.bottom)&&n(r.left)&&n(r.right)};const tT={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},s4={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};var pJ=e=>t=>{const n=va(t.top,t.bottom),r=va(t.left,t.right);return i=>e===tT?n(i.top)&&n(i.bottom):r(i.left)&&r(i.right)};const gJ=(e,t)=>{const n=t.frame?t.frame.scroll.diff.displacement:mr;return yp(e,n)},bJ=(e,t,n)=>t.subject.active?n(t.subject.active)(e):!1,yJ=(e,t,n)=>n(t)(e),nT=({target:e,destination:t,viewport:n,withDroppableDisplacement:r,isVisibleThroughFrameFn:i})=>{const a=r?gJ(e,t):e;return bJ(a,t,i)&&yJ(a,n,i)},vJ=e=>nT({...e,isVisibleThroughFrameFn:o4}),l4=e=>nT({...e,isVisibleThroughFrameFn:mJ}),xJ=e=>nT({...e,isVisibleThroughFrameFn:pJ(e.destination.axis)}),wJ=(e,t,n)=>{if(typeof n=="boolean")return n;if(!t)return!0;const{invisible:r,visible:i}=t;if(r[e])return!1;const a=i[e];return a?a.shouldAnimate:!0};function _J(e,t){const n=e.page.marginBox,r={top:t.point.y,right:0,bottom:0,left:t.point.x};return Xa(XE(n,r))}function zm({afterDragging:e,destination:t,displacedBy:n,viewport:r,forceShouldAnimate:i,last:a}){return e.reduce(function(l,u){const d=_J(u,n),h=u.descriptor.id;if(l.all.push(h),!vJ({target:d,destination:t,viewport:r,withDroppableDisplacement:!0}))return l.invisible[u.descriptor.id]=!0,l;const b=wJ(h,a,i),y={draggableId:h,shouldAnimate:b};return l.visible[h]=y,l},{all:[],visible:{},invisible:{}})}function SJ(e,t){if(!e.length)return 0;const n=e[e.length-1].descriptor.index;return t.inHomeList?n:n+1}function ZM({insideDestination:e,inHomeList:t,displacedBy:n,destination:r}){const i=SJ(e,{inHomeList:t});return{displaced:Bm,displacedBy:n,at:{type:"REORDER",destination:{droppableId:r.descriptor.id,index:i}}}}function dy({draggable:e,insideDestination:t,destination:n,viewport:r,displacedBy:i,last:a,index:o,forceShouldAnimate:l}){const u=wf(e,n);if(o==null)return ZM({insideDestination:t,inHomeList:u,displacedBy:i,destination:n});const d=t.find(S=>S.descriptor.index===o);if(!d)return ZM({insideDestination:t,inHomeList:u,displacedBy:i,destination:n});const h=Dv(e,t),p=t.indexOf(d),b=h.slice(p);return{displaced:zm({afterDragging:b,destination:n,displacedBy:i,last:a,viewport:r.frame,forceShouldAnimate:l}),displacedBy:i,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:o}}}}function Gl(e,t){return!!t.effected[e]}var kJ=({isMovingForward:e,destination:t,draggables:n,combine:r,afterCritical:i})=>{if(!t.isCombineEnabled)return null;const a=r.draggableId,l=n[a].descriptor.index;return Gl(a,i)?e?l:l-1:e?l+1:l},EJ=({isMovingForward:e,isInHomeList:t,insideDestination:n,location:r})=>{if(!n.length)return null;const i=r.index,a=e?i+1:i-1,o=n[0].descriptor.index,l=n[n.length-1].descriptor.index,u=t?l:l+1;return a<o||a>u?null:a},TJ=({isMovingForward:e,isInHomeList:t,draggable:n,draggables:r,destination:i,insideDestination:a,previousImpact:o,viewport:l,afterCritical:u})=>{const d=o.at;if(d||Re(),d.type==="REORDER"){const p=EJ({isMovingForward:e,isInHomeList:t,location:d.destination,insideDestination:a});return p==null?null:dy({draggable:n,insideDestination:a,destination:i,viewport:l,last:o.displaced,displacedBy:o.displacedBy,index:p})}const h=kJ({isMovingForward:e,destination:i,displaced:o.displaced,draggables:r,combine:d.combine,afterCritical:u});return h==null?null:dy({draggable:n,insideDestination:a,destination:i,viewport:l,last:o.displaced,displacedBy:o.displacedBy,index:h})},AJ=({displaced:e,afterCritical:t,combineWith:n,displacedBy:r})=>{const i=!!(e.visible[n]||e.invisible[n]);return Gl(n,t)?i?mr:vf(r.point):i?r.point:mr},jJ=({afterCritical:e,impact:t,draggables:n})=>{const r=Mv(t);r||Re();const i=r.draggableId,a=n[i].page.borderBox.center,o=AJ({displaced:t.displaced,afterCritical:e,combineWith:i,displacedBy:t.displacedBy});return Er(a,o)};const c4=(e,t)=>t.margin[e.start]+t.borderBox[e.size]/2,OJ=(e,t)=>t.margin[e.end]+t.borderBox[e.size]/2,rT=(e,t,n)=>t[e.crossAxisStart]+n.margin[e.crossAxisStart]+n.borderBox[e.crossAxisSize]/2,XM=({axis:e,moveRelativeTo:t,isMoving:n})=>mu(e.line,t.marginBox[e.end]+c4(e,n),rT(e,t.marginBox,n)),JM=({axis:e,moveRelativeTo:t,isMoving:n})=>mu(e.line,t.marginBox[e.start]-OJ(e,n),rT(e,t.marginBox,n)),NJ=({axis:e,moveInto:t,isMoving:n})=>mu(e.line,t.contentBox[e.start]+c4(e,n),rT(e,t.contentBox,n));var CJ=({impact:e,draggable:t,draggables:n,droppable:r,afterCritical:i})=>{const a=xf(r.descriptor.id,n),o=t.page,l=r.axis;if(!a.length)return NJ({axis:l,moveInto:r.page,isMoving:o});const{displaced:u,displacedBy:d}=e,h=u.all[0];if(h){const b=n[h];if(Gl(h,i))return JM({axis:l,moveRelativeTo:b.page,isMoving:o});const y=oy(b.page,d.point);return JM({axis:l,moveRelativeTo:y,isMoving:o})}const p=a[a.length-1];if(p.descriptor.id===t.descriptor.id)return o.borderBox.center;if(Gl(p.descriptor.id,i)){const b=oy(p.page,vf(i.displacedBy.point));return XM({axis:l,moveRelativeTo:b,isMoving:o})}return XM({axis:l,moveRelativeTo:p.page,isMoving:o})},Yk=(e,t)=>{const n=e.frame;return n?Er(t,n.scroll.diff.displacement):t};const MJ=({impact:e,draggable:t,droppable:n,draggables:r,afterCritical:i})=>{const a=t.page.borderBox.center,o=e.at;return!n||!o?a:o.type==="REORDER"?CJ({impact:e,draggable:t,draggables:r,droppable:n,afterCritical:i}):jJ({impact:e,draggables:r,afterCritical:i})};var Pv=e=>{const t=MJ(e),n=e.droppable;return n?Yk(n,t):t},u4=(e,t)=>{const n=Ui(t,e.scroll.initial),r=vf(n);return{frame:Xa({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:n,displacement:r}}}};function QM(e,t){return e.map(n=>t[n])}function DJ(e,t){for(let n=0;n<t.length;n++){const r=t[n].visible[e];if(r)return r}return null}var PJ=({impact:e,viewport:t,destination:n,draggables:r,maxScrollChange:i})=>{const a=u4(t,Er(t.scroll.current,i)),o=n.frame?QE(n,Er(n.frame.scroll.current,i)):n,l=e.displaced,u=zm({afterDragging:QM(l.all,r),destination:n,displacedBy:e.displacedBy,viewport:a.frame,last:l,forceShouldAnimate:!1}),d=zm({afterDragging:QM(l.all,r),destination:o,displacedBy:e.displacedBy,viewport:t.frame,last:l,forceShouldAnimate:!1}),h={},p={},b=[l,u,d];return l.all.forEach(S=>{const _=DJ(S,b);if(_){p[S]=_;return}h[S]=!0}),{...e,displaced:{all:l.all,invisible:h,visible:p}}},RJ=(e,t)=>Er(e.scroll.diff.displacement,t),iT=({pageBorderBoxCenter:e,draggable:t,viewport:n})=>{const r=RJ(n,e),i=Ui(r,t.page.borderBox.center);return Er(t.client.borderBox.center,i)},d4=({draggable:e,destination:t,newPageBorderBoxCenter:n,viewport:r,withDroppableDisplacement:i,onlyOnMainAxis:a=!1})=>{const o=Ui(n,e.page.borderBox.center),u={target:yp(e.page.borderBox,o),destination:t,withDroppableDisplacement:i,viewport:r};return a?xJ(u):l4(u)},LJ=({isMovingForward:e,draggable:t,destination:n,draggables:r,previousImpact:i,viewport:a,previousPageBorderBoxCenter:o,previousClientSelection:l,afterCritical:u})=>{if(!n.isEnabled)return null;const d=xf(n.descriptor.id,r),h=wf(t,n),p=fJ({isMovingForward:e,draggable:t,destination:n,insideDestination:d,previousImpact:i})||TJ({isMovingForward:e,isInHomeList:h,draggable:t,draggables:r,destination:n,insideDestination:d,previousImpact:i,viewport:a,afterCritical:u});if(!p)return null;const b=Pv({impact:p,draggable:t,droppable:n,draggables:r,afterCritical:u});if(d4({draggable:t,destination:n,newPageBorderBoxCenter:b,viewport:a.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:iT({pageBorderBoxCenter:b,draggable:t,viewport:a}),impact:p,scrollJumpRequest:null};const S=Ui(b,o),_=PJ({impact:p,viewport:a,destination:n,draggables:r,maxScrollChange:S});return{clientSelection:l,impact:_,scrollJumpRequest:S}};const Gr=e=>{const t=e.subject.active;return t||Re(),t};var IJ=({isMovingForward:e,pageBorderBoxCenter:t,source:n,droppables:r,viewport:i})=>{const a=n.subject.active;if(!a)return null;const o=n.axis,l=va(a[o.start],a[o.end]),u=Cv(r).filter(h=>h!==n).filter(h=>h.isEnabled).filter(h=>!!h.subject.active).filter(h=>o4(i.frame)(Gr(h))).filter(h=>{const p=Gr(h);return e?a[o.crossAxisEnd]<p[o.crossAxisEnd]:p[o.crossAxisStart]<a[o.crossAxisStart]}).filter(h=>{const p=Gr(h),b=va(p[o.start],p[o.end]);return l(p[o.start])||l(p[o.end])||b(a[o.start])||b(a[o.end])}).sort((h,p)=>{const b=Gr(h)[o.crossAxisStart],y=Gr(p)[o.crossAxisStart];return e?b-y:y-b}).filter((h,p,b)=>Gr(h)[o.crossAxisStart]===Gr(b[0])[o.crossAxisStart]);if(!u.length)return null;if(u.length===1)return u[0];const d=u.filter(h=>va(Gr(h)[o.start],Gr(h)[o.end])(t[o.line]));return d.length===1?d[0]:d.length>1?d.sort((h,p)=>Gr(h)[o.start]-Gr(p)[o.start])[0]:u.sort((h,p)=>{const b=WM(t,VM(Gr(h))),y=WM(t,VM(Gr(p)));return b!==y?b-y:Gr(h)[o.start]-Gr(p)[o.start]})[0]};const eD=(e,t)=>{const n=e.page.borderBox.center;return Gl(e.descriptor.id,t)?Ui(n,t.displacedBy.point):n},$J=(e,t)=>{const n=e.page.borderBox;return Gl(e.descriptor.id,t)?yp(n,vf(t.displacedBy.point)):n};var BJ=({pageBorderBoxCenter:e,viewport:t,destination:n,insideDestination:r,afterCritical:i})=>r.filter(o=>l4({target:$J(o,i),destination:n,viewport:t.frame,withDroppableDisplacement:!0})).sort((o,l)=>{const u=$m(e,Yk(n,eD(o,i))),d=$m(e,Yk(n,eD(l,i)));return u<d?-1:d<u?1:o.descriptor.index-l.descriptor.index})[0]||null,vp=hr(function(t,n){const r=n[t.line];return{value:r,point:mu(t.line,r)}});const zJ=(e,t,n)=>{const r=e.axis;if(e.descriptor.mode==="virtual")return mu(r.line,t[r.line]);const i=e.subject.page.contentBox[r.size],u=xf(e.descriptor.id,n).reduce((d,h)=>d+h.client.marginBox[r.size],0)+t[r.line]-i;return u<=0?null:mu(r.line,u)},f4=(e,t)=>({...e,scroll:{...e.scroll,max:t}}),h4=(e,t,n)=>{const r=e.frame;wf(t,e)&&Re(),e.subject.withPlaceholder&&Re();const i=vp(e.axis,t.displaceBy).point,a=zJ(e,i,n),o={placeholderSize:i,increasedBy:a,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!r){const h=Xd({page:e.subject.page,withPlaceholder:o,axis:e.axis,frame:e.frame});return{...e,subject:h}}const l=a?Er(r.scroll.max,a):r.scroll.max,u=f4(r,l),d=Xd({page:e.subject.page,withPlaceholder:o,axis:e.axis,frame:u});return{...e,subject:d,frame:u}},UJ=e=>{const t=e.subject.withPlaceholder;t||Re();const n=e.frame;if(!n){const o=Xd({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null});return{...e,subject:o}}const r=t.oldFrameMaxScroll;r||Re();const i=f4(n,r),a=Xd({page:e.subject.page,axis:e.axis,frame:i,withPlaceholder:null});return{...e,subject:a,frame:i}};var FJ=({previousPageBorderBoxCenter:e,moveRelativeTo:t,insideDestination:n,draggable:r,draggables:i,destination:a,viewport:o,afterCritical:l})=>{if(!t){if(n.length)return null;const p={displaced:Bm,displacedBy:a4,at:{type:"REORDER",destination:{droppableId:a.descriptor.id,index:0}}},b=Pv({impact:p,draggable:r,droppable:a,draggables:i,afterCritical:l}),y=wf(r,a)?a:h4(a,r,i);return d4({draggable:r,destination:y,newPageBorderBoxCenter:b,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?p:null}const u=e[a.axis.line]<=t.page.borderBox.center[a.axis.line],d=(()=>{const p=t.descriptor.index;return t.descriptor.id===r.descriptor.id||u?p:p+1})(),h=vp(a.axis,r.displaceBy);return dy({draggable:r,insideDestination:n,destination:a,viewport:o,displacedBy:h,last:Bm,index:d})},HJ=({isMovingForward:e,previousPageBorderBoxCenter:t,draggable:n,isOver:r,draggables:i,droppables:a,viewport:o,afterCritical:l})=>{const u=IJ({isMovingForward:e,pageBorderBoxCenter:t,source:r,droppables:a,viewport:o});if(!u)return null;const d=xf(u.descriptor.id,i),h=BJ({pageBorderBoxCenter:t,viewport:o,destination:u,insideDestination:d,afterCritical:l}),p=FJ({previousPageBorderBoxCenter:t,destination:u,draggable:n,draggables:i,moveRelativeTo:h,insideDestination:d,viewport:o,afterCritical:l});if(!p)return null;const b=Pv({impact:p,draggable:n,droppable:u,draggables:i,afterCritical:l});return{clientSelection:iT({pageBorderBoxCenter:b,draggable:n,viewport:o}),impact:p,scrollJumpRequest:null}},Hi=e=>{const t=e.at;return t?t.type==="REORDER"?t.destination.droppableId:t.combine.droppableId:null};const GJ=(e,t)=>{const n=Hi(e);return n?t[n]:null};var qJ=({state:e,type:t})=>{const n=GJ(e.impact,e.dimensions.droppables),r=!!n,i=e.dimensions.droppables[e.critical.droppable.id],a=n||i,o=a.axis.direction,l=o==="vertical"&&(t==="MOVE_UP"||t==="MOVE_DOWN")||o==="horizontal"&&(t==="MOVE_LEFT"||t==="MOVE_RIGHT");if(l&&!r)return null;const u=t==="MOVE_DOWN"||t==="MOVE_RIGHT",d=e.dimensions.draggables[e.critical.draggable.id],h=e.current.page.borderBoxCenter,{draggables:p,droppables:b}=e.dimensions;return l?LJ({isMovingForward:u,previousPageBorderBoxCenter:h,draggable:d,destination:a,draggables:p,viewport:e.viewport,previousClientSelection:e.current.client.selection,previousImpact:e.impact,afterCritical:e.afterCritical}):HJ({isMovingForward:u,previousPageBorderBoxCenter:h,draggable:d,isOver:a,draggables:p,droppables:b,viewport:e.viewport,afterCritical:e.afterCritical})};function Vc(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function m4(e){const t=va(e.top,e.bottom),n=va(e.left,e.right);return function(i){return t(i.y)&&n(i.x)}}function YJ(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}function KJ({pageBorderBox:e,draggable:t,candidates:n}){const r=t.page.borderBox.center,i=n.map(a=>{const o=a.axis,l=mu(a.axis.line,e.center[o.line],a.page.borderBox.center[o.crossAxisLine]);return{id:a.descriptor.id,distance:$m(r,l)}}).sort((a,o)=>o.distance-a.distance);return i[0]?i[0].id:null}function WJ({pageBorderBox:e,draggable:t,droppables:n}){const r=Cv(n).filter(i=>{if(!i.isEnabled)return!1;const a=i.subject.active;if(!a||!YJ(e,a))return!1;if(m4(a)(e.center))return!0;const o=i.axis,l=a.center[o.crossAxisLine],u=e[o.crossAxisStart],d=e[o.crossAxisEnd],h=va(a[o.crossAxisStart],a[o.crossAxisEnd]),p=h(u),b=h(d);return!p&&!b?!0:p?u<l:d>l});return r.length?r.length===1?r[0].descriptor.id:KJ({pageBorderBox:e,draggable:t,candidates:r}):null}const p4=(e,t)=>Xa(yp(e,t));var VJ=(e,t)=>{const n=e.frame;return n?p4(t,n.scroll.diff.value):t};function g4({displaced:e,id:t}){return!!(e.visible[t]||e.invisible[t])}function ZJ({draggable:e,closest:t,inHomeList:n}){return t?n&&t.descriptor.index>e.descriptor.index?t.descriptor.index-1:t.descriptor.index:null}var XJ=({pageBorderBoxWithDroppableScroll:e,draggable:t,destination:n,insideDestination:r,last:i,viewport:a,afterCritical:o})=>{const l=n.axis,u=vp(n.axis,t.displaceBy),d=u.value,h=e[l.start],p=e[l.end],y=Dv(t,r).find(_=>{const k=_.descriptor.id,A=_.page.borderBox.center[l.line],N=Gl(k,o),j=g4({displaced:i,id:k});return N?j?p<=A:h<A-d:j?p<=A+d:h<A})||null,S=ZJ({draggable:t,closest:y,inHomeList:wf(t,n)});return dy({draggable:t,insideDestination:r,destination:n,viewport:a,last:i,displacedBy:u,index:S})};const JJ=4;var QJ=({draggable:e,pageBorderBoxWithDroppableScroll:t,previousImpact:n,destination:r,insideDestination:i,afterCritical:a})=>{if(!r.isCombineEnabled)return null;const o=r.axis,l=vp(r.axis,e.displaceBy),u=l.value,d=t[o.start],h=t[o.end],b=Dv(e,i).find(S=>{const _=S.descriptor.id,k=S.page.borderBox,N=k[o.size]/JJ,j=Gl(_,a),C=g4({displaced:n.displaced,id:_});return j?C?h>k[o.start]+N&&h<k[o.end]-N:d>k[o.start]-u+N&&d<k[o.end]-u-N:C?h>k[o.start]+u+N&&h<k[o.end]+u-N:d>k[o.start]+N&&d<k[o.end]-N});return b?{displacedBy:l,displaced:n.displaced,at:{type:"COMBINE",combine:{draggableId:b.descriptor.id,droppableId:r.descriptor.id}}}:null},b4=({pageOffset:e,draggable:t,draggables:n,droppables:r,previousImpact:i,viewport:a,afterCritical:o})=>{const l=p4(t.page.borderBox,e),u=WJ({pageBorderBox:l,draggable:t,droppables:r});if(!u)return hJ;const d=r[u],h=xf(d.descriptor.id,n),p=VJ(d,l);return QJ({pageBorderBoxWithDroppableScroll:p,draggable:t,previousImpact:i,destination:d,insideDestination:h,afterCritical:o})||XJ({pageBorderBoxWithDroppableScroll:p,draggable:t,destination:d,insideDestination:h,last:i.displaced,viewport:a,afterCritical:o})},aT=(e,t)=>({...e,[t.descriptor.id]:t});const eQ=({previousImpact:e,impact:t,droppables:n})=>{const r=Hi(e),i=Hi(t);if(!r||r===i)return n;const a=n[r];if(!a.subject.withPlaceholder)return n;const o=UJ(a);return aT(n,o)};var tQ=({draggable:e,draggables:t,droppables:n,previousImpact:r,impact:i})=>{const a=eQ({previousImpact:r,impact:i,droppables:n}),o=Hi(i);if(!o)return a;const l=n[o];if(wf(e,l)||l.subject.withPlaceholder)return a;const u=h4(l,e,t);return aT(a,u)},Em=({state:e,clientSelection:t,dimensions:n,viewport:r,impact:i,scrollJumpRequest:a})=>{const o=r||e.viewport,l=n||e.dimensions,u=t||e.current.client.selection,d=Ui(u,e.initial.client.selection),h={offset:d,selection:u,borderBoxCenter:Er(e.initial.client.borderBoxCenter,d)},p={selection:Er(h.selection,o.scroll.current),borderBoxCenter:Er(h.borderBoxCenter,o.scroll.current),offset:Er(h.offset,o.scroll.diff.value)},b={client:h,page:p};if(e.phase==="COLLECTING")return{...e,dimensions:l,viewport:o,current:b};const y=l.draggables[e.critical.draggable.id],S=i||b4({pageOffset:p.offset,draggable:y,draggables:l.draggables,droppables:l.droppables,previousImpact:e.impact,viewport:o,afterCritical:e.afterCritical}),_=tQ({draggable:y,impact:S,previousImpact:e.impact,draggables:l.draggables,droppables:l.droppables});return{...e,current:b,dimensions:{draggables:l.draggables,droppables:_},impact:S,viewport:o,scrollJumpRequest:a||null,forceShouldAnimate:a?!1:null}};function nQ(e,t){return e.map(n=>t[n])}var y4=({impact:e,viewport:t,draggables:n,destination:r,forceShouldAnimate:i})=>{const a=e.displaced,o=nQ(a.all,n),l=zm({afterDragging:o,destination:r,displacedBy:e.displacedBy,viewport:t.frame,forceShouldAnimate:i,last:a});return{...e,displaced:l}},v4=({impact:e,draggable:t,droppable:n,draggables:r,viewport:i,afterCritical:a})=>{const o=Pv({impact:e,draggable:t,draggables:r,droppable:n,afterCritical:a});return iT({pageBorderBoxCenter:o,draggable:t,viewport:i})},x4=({state:e,dimensions:t,viewport:n})=>{e.movementMode!=="SNAP"&&Re();const r=e.impact,i=n||e.viewport,a=t||e.dimensions,{draggables:o,droppables:l}=a,u=o[e.critical.draggable.id],d=Hi(r);d||Re();const h=l[d],p=y4({impact:r,viewport:i,destination:h,draggables:o}),b=v4({impact:p,draggable:u,droppable:h,draggables:o,viewport:i,afterCritical:e.afterCritical});return Em({impact:p,clientSelection:b,state:e,dimensions:a,viewport:i})},rQ=e=>({index:e.index,droppableId:e.droppableId}),w4=({draggable:e,home:t,draggables:n,viewport:r})=>{const i=vp(t.axis,e.displaceBy),a=xf(t.descriptor.id,n),o=a.indexOf(e);o===-1&&Re();const l=a.slice(o+1),u=l.reduce((b,y)=>(b[y.descriptor.id]=!0,b),{}),d={inVirtualList:t.descriptor.mode==="virtual",displacedBy:i,effected:u};return{impact:{displaced:zm({afterDragging:l,destination:t,displacedBy:i,last:null,viewport:r.frame,forceShouldAnimate:!1}),displacedBy:i,at:{type:"REORDER",destination:rQ(e.descriptor)}},afterCritical:d}},iQ=(e,t)=>({draggables:e.draggables,droppables:aT(e.droppables,t)}),aQ=({draggable:e,offset:t,initialWindowScroll:n})=>{const r=oy(e.client,t),i=sy(r,n);return{...e,placeholder:{...e.placeholder,client:r},client:r,page:i}},oQ=e=>{const t=e.frame;return t||Re(),t},sQ=({additions:e,updatedDroppables:t,viewport:n})=>{const r=n.scroll.diff.value;return e.map(i=>{const a=i.descriptor.droppableId,o=t[a],u=oQ(o).scroll.diff.value,d=Er(r,u);return aQ({draggable:i,offset:d,initialWindowScroll:n.scroll.initial})})},lQ=({state:e,published:t})=>{const n=t.modified.map(A=>{const N=e.dimensions.droppables[A.droppableId];return QE(N,A.scroll)}),r={...e.dimensions.droppables,...r4(n)},i=i4(sQ({additions:t.additions,updatedDroppables:r,viewport:e.viewport})),a={...e.dimensions.draggables,...i};t.removals.forEach(A=>{delete a[A]});const o={droppables:r,draggables:a},l=Hi(e.impact),u=l?o.droppables[l]:null,d=o.draggables[e.critical.draggable.id],h=o.droppables[e.critical.droppable.id],{impact:p,afterCritical:b}=w4({draggable:d,home:h,draggables:a,viewport:e.viewport}),y=u&&u.isCombineEnabled?e.impact:p,S=b4({pageOffset:e.current.page.offset,draggable:o.draggables[e.critical.draggable.id],draggables:o.draggables,droppables:o.droppables,previousImpact:y,viewport:e.viewport,afterCritical:b}),_={...e,phase:"DRAGGING",impact:S,onLiftImpact:p,dimensions:o,afterCritical:b,forceShouldAnimate:!1};return e.phase==="COLLECTING"?_:{..._,phase:"DROP_PENDING",reason:e.reason,isWaiting:!1}};const Kk=e=>e.movementMode==="SNAP",J_=(e,t,n)=>{const r=iQ(e.dimensions,t);return!Kk(e)||n?Em({state:e,dimensions:r}):x4({state:e,dimensions:r})};function Q_(e){return e.isDragging&&e.movementMode==="SNAP"?{...e,scrollJumpRequest:null}:e}const tD={phase:"IDLE",completed:null,shouldFlush:!1};var cQ=(e=tD,t)=>{if(t.type==="FLUSH")return{...tD,shouldFlush:!0};if(t.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&Re();const{critical:n,clientSelection:r,viewport:i,dimensions:a,movementMode:o}=t.payload,l=a.draggables[n.draggable.id],u=a.droppables[n.droppable.id],d={selection:r,borderBoxCenter:l.client.borderBox.center,offset:mr},h={client:d,page:{selection:Er(d.selection,i.scroll.initial),borderBoxCenter:Er(d.selection,i.scroll.initial),offset:Er(d.selection,i.scroll.diff.value)}},p=Cv(a.droppables).every(_=>!_.isFixedOnPage),{impact:b,afterCritical:y}=w4({draggable:l,home:u,draggables:a.draggables,viewport:i});return{phase:"DRAGGING",isDragging:!0,critical:n,movementMode:o,dimensions:a,initial:h,current:h,isWindowScrollAllowed:p,impact:b,afterCritical:y,onLiftImpact:b,viewport:i,scrollJumpRequest:null,forceShouldAnimate:null}}if(t.type==="COLLECTION_STARTING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"?e:(e.phase!=="DRAGGING"&&Re(),{...e,phase:"COLLECTING"});if(t.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||Re(),lQ({state:e,published:t.payload});if(t.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;Vc(e)||Re();const{client:n}=t.payload;return zl(n,e.current.client.selection)?e:Em({state:e,clientSelection:n,impact:Kk(e)?e.impact:null})}if(t.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return Q_(e);Vc(e)||Re();const{id:n,newScroll:r}=t.payload,i=e.dimensions.droppables[n];if(!i)return e;const a=QE(i,r);return J_(e,a,!1)}if(t.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;Vc(e)||Re();const{id:n,isEnabled:r}=t.payload,i=e.dimensions.droppables[n];i||Re(),i.isEnabled===r&&Re();const a={...i,isEnabled:r};return J_(e,a,!0)}if(t.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;Vc(e)||Re();const{id:n,isCombineEnabled:r}=t.payload,i=e.dimensions.droppables[n];i||Re(),i.isCombineEnabled===r&&Re();const a={...i,isCombineEnabled:r};return J_(e,a,!0)}if(t.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;Vc(e)||Re(),e.isWindowScrollAllowed||Re();const n=t.payload.newScroll;if(zl(e.viewport.scroll.current,n))return Q_(e);const r=u4(e.viewport,n);return Kk(e)?x4({state:e,viewport:r}):Em({state:e,viewport:r})}if(t.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!Vc(e))return e;const n=t.payload.maxScroll;if(zl(n,e.viewport.scroll.max))return e;const r={...e.viewport,scroll:{...e.viewport.scroll,max:n}};return{...e,viewport:r}}if(t.type==="MOVE_UP"||t.type==="MOVE_DOWN"||t.type==="MOVE_LEFT"||t.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&Re();const n=qJ({state:e,type:t.type});return n?Em({state:e,impact:n.impact,clientSelection:n.clientSelection,scrollJumpRequest:n.scrollJumpRequest}):e}if(t.type==="DROP_PENDING"){const n=t.payload.reason;return e.phase!=="COLLECTING"&&Re(),{...e,phase:"DROP_PENDING",isWaiting:!0,reason:n}}if(t.type==="DROP_ANIMATE"){const{completed:n,dropDuration:r,newHomeClientOffset:i}=t.payload;return e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||Re(),{phase:"DROP_ANIMATING",completed:n,dropDuration:r,newHomeClientOffset:i,dimensions:e.dimensions}}if(t.type==="DROP_COMPLETE"){const{completed:n}=t.payload;return{phase:"IDLE",completed:n,shouldFlush:!1}}return e};function Lt(e,t){return e instanceof Object&&"type"in e&&e.type===t}const uQ=e=>({type:"BEFORE_INITIAL_CAPTURE",payload:e}),dQ=e=>({type:"LIFT",payload:e}),fQ=e=>({type:"INITIAL_PUBLISH",payload:e}),hQ=e=>({type:"PUBLISH_WHILE_DRAGGING",payload:e}),mQ=()=>({type:"COLLECTION_STARTING",payload:null}),pQ=e=>({type:"UPDATE_DROPPABLE_SCROLL",payload:e}),gQ=e=>({type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}),bQ=e=>({type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}),_4=e=>({type:"MOVE",payload:e}),yQ=e=>({type:"MOVE_BY_WINDOW_SCROLL",payload:e}),vQ=e=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}),xQ=()=>({type:"MOVE_UP",payload:null}),wQ=()=>({type:"MOVE_DOWN",payload:null}),_Q=()=>({type:"MOVE_RIGHT",payload:null}),SQ=()=>({type:"MOVE_LEFT",payload:null}),oT=()=>({type:"FLUSH",payload:null}),kQ=e=>({type:"DROP_ANIMATE",payload:e}),sT=e=>({type:"DROP_COMPLETE",payload:e}),S4=e=>({type:"DROP",payload:e}),EQ=e=>({type:"DROP_PENDING",payload:e}),k4=()=>({type:"DROP_ANIMATION_FINISHED",payload:null});var TQ=e=>({getState:t,dispatch:n})=>r=>i=>{if(!Lt(i,"LIFT")){r(i);return}const{id:a,clientSelection:o,movementMode:l}=i.payload,u=t();u.phase==="DROP_ANIMATING"&&n(sT({completed:u.completed})),t().phase!=="IDLE"&&Re(),n(oT()),n(uQ({draggableId:a,movementMode:l}));const h={draggableId:a,scrollOptions:{shouldPublishImmediately:l==="SNAP"}},{critical:p,dimensions:b,viewport:y}=e.startPublishing(h);n(fQ({critical:p,dimensions:b,clientSelection:o,movementMode:l,viewport:y}))},AQ=e=>()=>t=>n=>{Lt(n,"INITIAL_PUBLISH")&&e.dragging(),Lt(n,"DROP_ANIMATE")&&e.dropping(n.payload.completed.result.reason),(Lt(n,"FLUSH")||Lt(n,"DROP_COMPLETE"))&&e.resting(),t(n)};const lT={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},Um={opacity:{drop:0,combining:.7},scale:{drop:.75}},E4={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},zc=`${E4.outOfTheWay}s ${lT.outOfTheWay}`,Tm={fluid:`opacity ${zc}`,snap:`transform ${zc}, opacity ${zc}`,drop:e=>{const t=`${e}s ${lT.drop}`;return`transform ${t}, opacity ${t}`},outOfTheWay:`transform ${zc}`,placeholder:`height ${zc}, width ${zc}, margin ${zc}`},nD=e=>zl(e,mr)?void 0:`translate(${e.x}px, ${e.y}px)`,Wk={moveTo:nD,drop:(e,t)=>{const n=nD(e);if(n)return t?`${n} scale(${Um.scale.drop})`:n}},{minDropTime:Vk,maxDropTime:T4}=E4,jQ=T4-Vk,rD=1500,OQ=.6;var NQ=({current:e,destination:t,reason:n})=>{const r=$m(e,t);if(r<=0)return Vk;if(r>=rD)return T4;const i=r/rD,a=Vk+jQ*i,o=n==="CANCEL"?a*OQ:a;return Number(o.toFixed(2))},CQ=({impact:e,draggable:t,dimensions:n,viewport:r,afterCritical:i})=>{const{draggables:a,droppables:o}=n,l=Hi(e),u=l?o[l]:null,d=o[t.descriptor.droppableId],h=v4({impact:e,draggable:t,draggables:a,afterCritical:i,droppable:u||d,viewport:r});return Ui(h,t.client.borderBox.center)},MQ=({draggables:e,reason:t,lastImpact:n,home:r,viewport:i,onLiftImpact:a})=>!n.at||t!=="DROP"?{impact:y4({draggables:e,impact:a,destination:r,viewport:i,forceShouldAnimate:!0}),didDropInsideDroppable:!1}:n.at.type==="REORDER"?{impact:n,didDropInsideDroppable:!0}:{impact:{...n,displaced:Bm},didDropInsideDroppable:!0};const DQ=({getState:e,dispatch:t})=>n=>r=>{if(!Lt(r,"DROP")){n(r);return}const i=e(),a=r.payload.reason;if(i.phase==="COLLECTING"){t(EQ({reason:a}));return}if(i.phase==="IDLE")return;i.phase==="DROP_PENDING"&&i.isWaiting&&Re(),i.phase==="DRAGGING"||i.phase==="DROP_PENDING"||Re();const l=i.critical,u=i.dimensions,d=u.draggables[i.critical.draggable.id],{impact:h,didDropInsideDroppable:p}=MQ({reason:a,lastImpact:i.impact,afterCritical:i.afterCritical,onLiftImpact:i.onLiftImpact,home:i.dimensions.droppables[i.critical.droppable.id],viewport:i.viewport,draggables:i.dimensions.draggables}),b=p?eT(h):null,y=p?Mv(h):null,S={index:l.draggable.index,droppableId:l.droppable.id},_={draggableId:d.descriptor.id,type:d.descriptor.type,source:S,reason:a,mode:i.movementMode,destination:b,combine:y},k=CQ({impact:h,draggable:d,dimensions:u,viewport:i.viewport,afterCritical:i.afterCritical}),A={critical:i.critical,afterCritical:i.afterCritical,result:_,impact:h};if(!(!zl(i.current.client.offset,k)||!!_.combine)){t(sT({completed:A}));return}const j=NQ({current:i.current.client.offset,destination:k,reason:a});t(kQ({newHomeClientOffset:k,dropDuration:j,completed:A}))};var A4=()=>({x:window.pageXOffset,y:window.pageYOffset});function PQ(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:t=>{t.target!==window&&t.target!==window.document||e()}}}function RQ({onWindowScroll:e}){function t(){e(A4())}const n=Im(t),r=PQ(n);let i=Bl;function a(){return i!==Bl}function o(){a()&&Re(),i=ma(window,[r])}function l(){a()||Re(),n.cancel(),i(),i=Bl}return{start:o,stop:l,isActive:a}}const LQ=e=>Lt(e,"DROP_COMPLETE")||Lt(e,"DROP_ANIMATE")||Lt(e,"FLUSH"),IQ=e=>{const t=RQ({onWindowScroll:n=>{e.dispatch(yQ({newScroll:n}))}});return n=>r=>{!t.isActive()&&Lt(r,"INITIAL_PUBLISH")&&t.start(),t.isActive()&&LQ(r)&&t.stop(),n(r)}};var $Q=e=>{let t=!1,n=!1;const r=setTimeout(()=>{n=!0}),i=a=>{t||n||(t=!0,e(a),clearTimeout(r))};return i.wasCalled=()=>t,i},BQ=()=>{const e=[],t=i=>{const a=e.findIndex(l=>l.timerId===i);a===-1&&Re();const[o]=e.splice(a,1);o.callback()};return{add:i=>{const a=setTimeout(()=>t(a)),o={timerId:a,callback:i};e.push(o)},flush:()=>{if(!e.length)return;const i=[...e];e.length=0,i.forEach(a=>{clearTimeout(a.timerId),a.callback()})}}};const zQ=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.droppableId===t.droppableId&&e.index===t.index,UQ=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.draggableId===t.draggableId&&e.droppableId===t.droppableId,FQ=(e,t)=>{if(e===t)return!0;const n=e.draggable.id===t.draggable.id&&e.draggable.droppableId===t.draggable.droppableId&&e.draggable.type===t.draggable.type&&e.draggable.index===t.draggable.index,r=e.droppable.id===t.droppable.id&&e.droppable.type===t.droppable.type;return n&&r},qh=(e,t)=>{t()},M0=(e,t)=>({draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:t});function e1(e,t,n,r){if(!e){n(r(t));return}const i=$Q(n);e(t,{announce:i}),i.wasCalled()||n(r(t))}var HQ=(e,t)=>{const n=BQ();let r=null;const i=(p,b)=>{r&&Re(),qh("onBeforeCapture",()=>{const y=e().onBeforeCapture;y&&y({draggableId:p,mode:b})})},a=(p,b)=>{r&&Re(),qh("onBeforeDragStart",()=>{const y=e().onBeforeDragStart;y&&y(M0(p,b))})},o=(p,b)=>{r&&Re();const y=M0(p,b);r={mode:b,lastCritical:p,lastLocation:y.source,lastCombine:null},n.add(()=>{qh("onDragStart",()=>e1(e().onDragStart,y,t,Rb.onDragStart))})},l=(p,b)=>{const y=eT(b),S=Mv(b);r||Re();const _=!FQ(p,r.lastCritical);_&&(r.lastCritical=p);const k=!zQ(r.lastLocation,y);k&&(r.lastLocation=y);const A=!UQ(r.lastCombine,S);if(A&&(r.lastCombine=S),!_&&!k&&!A)return;const N={...M0(p,r.mode),combine:S,destination:y};n.add(()=>{qh("onDragUpdate",()=>e1(e().onDragUpdate,N,t,Rb.onDragUpdate))})},u=()=>{r||Re(),n.flush()},d=p=>{r||Re(),r=null,qh("onDragEnd",()=>e1(e().onDragEnd,p,t,Rb.onDragEnd))};return{beforeCapture:i,beforeStart:a,start:o,update:l,flush:u,drop:d,abort:()=>{if(!r)return;const p={...M0(r.lastCritical,r.mode),combine:null,destination:null,reason:"CANCEL"};d(p)}}},GQ=(e,t)=>{const n=HQ(e,t);return r=>i=>a=>{if(Lt(a,"BEFORE_INITIAL_CAPTURE")){n.beforeCapture(a.payload.draggableId,a.payload.movementMode);return}if(Lt(a,"INITIAL_PUBLISH")){const l=a.payload.critical;n.beforeStart(l,a.payload.movementMode),i(a),n.start(l,a.payload.movementMode);return}if(Lt(a,"DROP_COMPLETE")){const l=a.payload.completed.result;n.flush(),i(a),n.drop(l);return}if(i(a),Lt(a,"FLUSH")){n.abort();return}const o=r.getState();o.phase==="DRAGGING"&&n.update(o.critical,o.impact)}};const qQ=e=>t=>n=>{if(!Lt(n,"DROP_ANIMATION_FINISHED")){t(n);return}const r=e.getState();r.phase!=="DROP_ANIMATING"&&Re(),e.dispatch(sT({completed:r.completed}))},YQ=e=>{let t=null,n=null;function r(){n&&(cancelAnimationFrame(n),n=null),t&&(t(),t=null)}return i=>a=>{if((Lt(a,"FLUSH")||Lt(a,"DROP_COMPLETE")||Lt(a,"DROP_ANIMATION_FINISHED"))&&r(),i(a),!Lt(a,"DROP_ANIMATE"))return;const o={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){e.getState().phase==="DROP_ANIMATING"&&e.dispatch(k4())}};n=requestAnimationFrame(()=>{n=null,t=ma(window,[o])})}};var KQ=e=>()=>t=>n=>{(Lt(n,"DROP_COMPLETE")||Lt(n,"FLUSH")||Lt(n,"DROP_ANIMATE"))&&e.stopPublishing(),t(n)},WQ=e=>{let t=!1;return()=>n=>r=>{if(Lt(r,"INITIAL_PUBLISH")){t=!0,e.tryRecordFocus(r.payload.critical.draggable.id),n(r),e.tryRestoreFocusRecorded();return}if(n(r),!!t){if(Lt(r,"FLUSH")){t=!1,e.tryRestoreFocusRecorded();return}if(Lt(r,"DROP_COMPLETE")){t=!1;const i=r.payload.completed.result;i.combine&&e.tryShiftRecord(i.draggableId,i.combine.draggableId),e.tryRestoreFocusRecorded()}}}};const VQ=e=>Lt(e,"DROP_COMPLETE")||Lt(e,"DROP_ANIMATE")||Lt(e,"FLUSH");var ZQ=e=>t=>n=>r=>{if(VQ(r)){e.stop(),n(r);return}if(Lt(r,"INITIAL_PUBLISH")){n(r);const i=t.getState();i.phase!=="DRAGGING"&&Re(),e.start(i);return}n(r),e.scroll(t.getState())};const XQ=e=>t=>n=>{if(t(n),!Lt(n,"PUBLISH_WHILE_DRAGGING"))return;const r=e.getState();r.phase==="DROP_PENDING"&&(r.isWaiting||e.dispatch(S4({reason:r.reason})))},JQ=Lm;var QQ=({dimensionMarshal:e,focusMarshal:t,styleMarshal:n,getResponders:r,announce:i,autoScroller:a})=>WE(cQ,JQ(UB(AQ(n),KQ(e),TQ(e),DQ,qQ,YQ,XQ,ZQ(a),IQ,WQ(t),GQ(r,i))));const t1=()=>({additions:{},removals:{},modified:{}});function eee({registry:e,callbacks:t}){let n=t1(),r=null;const i=()=>{r||(t.collectionStarting(),r=requestAnimationFrame(()=>{r=null;const{additions:u,removals:d,modified:h}=n,p=Object.keys(u).map(S=>e.draggable.getById(S).getDimension(mr)).sort((S,_)=>S.descriptor.index-_.descriptor.index),b=Object.keys(h).map(S=>{const k=e.droppable.getById(S).callbacks.getScrollWhileDragging();return{droppableId:S,scroll:k}}),y={additions:p,removals:Object.keys(d),modified:b};n=t1(),t.publish(y)}))};return{add:u=>{const d=u.descriptor.id;n.additions[d]=u,n.modified[u.descriptor.droppableId]=!0,n.removals[d]&&delete n.removals[d],i()},remove:u=>{const d=u.descriptor;n.removals[d.id]=!0,n.modified[d.droppableId]=!0,n.additions[d.id]&&delete n.additions[d.id],i()},stop:()=>{r&&(cancelAnimationFrame(r),r=null,n=t1())}}}var j4=({scrollHeight:e,scrollWidth:t,height:n,width:r})=>{const i=Ui({x:t,y:e},{x:r,y:n});return{x:Math.max(0,i.x),y:Math.max(0,i.y)}},O4=()=>{const e=document.documentElement;return e||Re(),e},N4=()=>{const e=O4();return j4({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})},tee=()=>{const e=A4(),t=N4(),n=e.y,r=e.x,i=O4(),a=i.clientWidth,o=i.clientHeight,l=r+a,u=n+o;return{frame:Xa({top:n,left:r,right:l,bottom:u}),scroll:{initial:e,current:e,max:t,diff:{value:mr,displacement:mr}}}},nee=({critical:e,scrollOptions:t,registry:n})=>{const r=tee(),i=r.scroll.current,a=e.droppable,o=n.droppable.getAllByType(a.type).map(h=>h.callbacks.getDimensionAndWatchScroll(i,t)),l=n.draggable.getAllByType(e.draggable.type).map(h=>h.getDimension(i));return{dimensions:{draggables:i4(l),droppables:r4(o)},critical:e,viewport:r}};function iD(e,t,n){return!(n.descriptor.id===t.id||n.descriptor.type!==t.type||e.droppable.getById(n.descriptor.droppableId).descriptor.mode!=="virtual")}var ree=(e,t)=>{let n=null;const r=eee({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),i=(b,y)=>{e.droppable.exists(b)||Re(),n&&t.updateDroppableIsEnabled({id:b,isEnabled:y})},a=(b,y)=>{n&&(e.droppable.exists(b)||Re(),t.updateDroppableIsCombineEnabled({id:b,isCombineEnabled:y}))},o=(b,y)=>{n&&(e.droppable.exists(b)||Re(),t.updateDroppableScroll({id:b,newScroll:y}))},l=(b,y)=>{n&&e.droppable.getById(b).callbacks.scroll(y)},u=()=>{if(!n)return;r.stop();const b=n.critical.droppable;e.droppable.getAllByType(b.type).forEach(y=>y.callbacks.dragStopped()),n.unsubscribe(),n=null},d=b=>{n||Re();const y=n.critical.draggable;b.type==="ADDITION"&&iD(e,y,b.value)&&r.add(b.value),b.type==="REMOVAL"&&iD(e,y,b.value)&&r.remove(b.value)};return{updateDroppableIsEnabled:i,updateDroppableIsCombineEnabled:a,scrollDroppable:l,updateDroppableScroll:o,startPublishing:b=>{n&&Re();const y=e.draggable.getById(b.draggableId),S=e.droppable.getById(y.descriptor.droppableId),_={draggable:y.descriptor,droppable:S.descriptor},k=e.subscribe(d);return n={critical:_,unsubscribe:k},nee({critical:_,registry:e,scrollOptions:b.scrollOptions})},stopPublishing:u}},C4=(e,t)=>e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===t?!1:e.completed.result.reason==="DROP",iee=e=>{window.scrollBy(e.x,e.y)};const aee=hr(e=>Cv(e).filter(t=>!(!t.isEnabled||!t.frame))),oee=(e,t)=>aee(t).find(r=>(r.frame||Re(),m4(r.frame.pageMarginBox)(e)))||null;var see=({center:e,destination:t,droppables:n})=>{if(t){const i=n[t];return i.frame?i:null}return oee(e,n)};const Fm={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:e=>e**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1};var lee=(e,t,n=()=>Fm)=>{const r=n(),i=e[t.size]*r.startFromPercentage,a=e[t.size]*r.maxScrollAtPercentage;return{startScrollingFrom:i,maxScrollValueAt:a}},M4=({startOfRange:e,endOfRange:t,current:n})=>{const r=t-e;return r===0?0:(n-e)/r},cT=1,cee=(e,t,n=()=>Fm)=>{const r=n();if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return r.maxPixelScroll;if(e===t.startScrollingFrom)return cT;const a=1-M4({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),o=r.maxPixelScroll*r.ease(a);return Math.ceil(o)},uee=(e,t,n)=>{const r=n(),i=r.durationDampening.accelerateAt,a=r.durationDampening.stopDampeningAt,o=t,l=a,d=Date.now()-o;if(d>=a)return e;if(d<i)return cT;const h=M4({startOfRange:i,endOfRange:l,current:d}),p=e*r.ease(h);return Math.ceil(p)},aD=({distanceToEdge:e,thresholds:t,dragStartTime:n,shouldUseTimeDampening:r,getAutoScrollerOptions:i})=>{const a=cee(e,t,i);return a===0?0:r?Math.max(uee(a,n,i),cT):a},oD=({container:e,distanceToEdges:t,dragStartTime:n,axis:r,shouldUseTimeDampening:i,getAutoScrollerOptions:a})=>{const o=lee(e,r,a);return t[r.end]<t[r.start]?aD({distanceToEdge:t[r.end],thresholds:o,dragStartTime:n,shouldUseTimeDampening:i,getAutoScrollerOptions:a}):-1*aD({distanceToEdge:t[r.start],thresholds:o,dragStartTime:n,shouldUseTimeDampening:i,getAutoScrollerOptions:a})},dee=({container:e,subject:t,proposedScroll:n})=>{const r=t.height>e.height,i=t.width>e.width;return!i&&!r?n:i&&r?null:{x:i?0:n.x,y:r?0:n.y}};const fee=n4(e=>e===0?0:e);var D4=({dragStartTime:e,container:t,subject:n,center:r,shouldUseTimeDampening:i,getAutoScrollerOptions:a})=>{const o={top:r.y-t.top,right:t.right-r.x,bottom:t.bottom-r.y,left:r.x-t.left},l=oD({container:t,distanceToEdges:o,dragStartTime:e,axis:tT,shouldUseTimeDampening:i,getAutoScrollerOptions:a}),u=oD({container:t,distanceToEdges:o,dragStartTime:e,axis:s4,shouldUseTimeDampening:i,getAutoScrollerOptions:a}),d=fee({x:u,y:l});if(zl(d,mr))return null;const h=dee({container:t,subject:n,proposedScroll:d});return h?zl(h,mr)?null:h:null};const hee=n4(e=>e===0?0:e>0?1:-1),uT=(()=>{const e=(t,n)=>t<0?t:t>n?t-n:0;return({current:t,max:n,change:r})=>{const i=Er(t,r),a={x:e(i.x,n.x),y:e(i.y,n.y)};return zl(a,mr)?null:a}})(),P4=({max:e,current:t,change:n})=>{const r={x:Math.max(t.x,e.x),y:Math.max(t.y,e.y)},i=hee(n),a=uT({max:r,current:t,change:i});return!a||i.x!==0&&a.x===0||i.y!==0&&a.y===0},dT=(e,t)=>P4({current:e.scroll.current,max:e.scroll.max,change:t}),mee=(e,t)=>{if(!dT(e,t))return null;const n=e.scroll.max,r=e.scroll.current;return uT({current:r,max:n,change:t})},fT=(e,t)=>{const n=e.frame;return n?P4({current:n.scroll.current,max:n.scroll.max,change:t}):!1},pee=(e,t)=>{const n=e.frame;return!n||!fT(e,t)?null:uT({current:n.scroll.current,max:n.scroll.max,change:t})};var gee=({viewport:e,subject:t,center:n,dragStartTime:r,shouldUseTimeDampening:i,getAutoScrollerOptions:a})=>{const o=D4({dragStartTime:r,container:e.frame,subject:t,center:n,shouldUseTimeDampening:i,getAutoScrollerOptions:a});return o&&dT(e,o)?o:null},bee=({droppable:e,subject:t,center:n,dragStartTime:r,shouldUseTimeDampening:i,getAutoScrollerOptions:a})=>{const o=e.frame;if(!o)return null;const l=D4({dragStartTime:r,container:o.pageMarginBox,subject:t,center:n,shouldUseTimeDampening:i,getAutoScrollerOptions:a});return l&&fT(e,l)?l:null},sD=({state:e,dragStartTime:t,shouldUseTimeDampening:n,scrollWindow:r,scrollDroppable:i,getAutoScrollerOptions:a})=>{const o=e.current.page.borderBoxCenter,u=e.dimensions.draggables[e.critical.draggable.id].page.marginBox;if(e.isWindowScrollAllowed){const p=e.viewport,b=gee({dragStartTime:t,viewport:p,subject:u,center:o,shouldUseTimeDampening:n,getAutoScrollerOptions:a});if(b){r(b);return}}const d=see({center:o,destination:Hi(e.impact),droppables:e.dimensions.droppables});if(!d)return;const h=bee({dragStartTime:t,droppable:d,subject:u,center:o,shouldUseTimeDampening:n,getAutoScrollerOptions:a});h&&i(d.descriptor.id,h)},yee=({scrollWindow:e,scrollDroppable:t,getAutoScrollerOptions:n=()=>Fm})=>{const r=Im(e),i=Im(t);let a=null;const o=d=>{a||Re();const{shouldUseTimeDampening:h,dragStartTime:p}=a;sD({state:d,scrollWindow:r,scrollDroppable:i,dragStartTime:p,shouldUseTimeDampening:h,getAutoScrollerOptions:n})};return{start:d=>{a&&Re();const h=Date.now();let p=!1;const b=()=>{p=!0};sD({state:d,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:b,scrollDroppable:b,getAutoScrollerOptions:n}),a={dragStartTime:h,shouldUseTimeDampening:p},p&&o(d)},stop:()=>{a&&(r.cancel(),i.cancel(),a=null)},scroll:o}},vee=({move:e,scrollDroppable:t,scrollWindow:n})=>{const r=(l,u)=>{const d=Er(l.current.client.selection,u);e({client:d})},i=(l,u)=>{if(!fT(l,u))return u;const d=pee(l,u);if(!d)return t(l.descriptor.id,u),null;const h=Ui(u,d);return t(l.descriptor.id,h),Ui(u,h)},a=(l,u,d)=>{if(!l||!dT(u,d))return d;const h=mee(u,d);if(!h)return n(d),null;const p=Ui(d,h);return n(p),Ui(d,p)};return l=>{const u=l.scrollJumpRequest;if(!u)return;const d=Hi(l.impact);d||Re();const h=i(l.dimensions.droppables[d],u);if(!h)return;const p=l.viewport,b=a(l.isWindowScrollAllowed,p,h);b&&r(l,b)}},xee=({scrollDroppable:e,scrollWindow:t,move:n,getAutoScrollerOptions:r})=>{const i=yee({scrollWindow:t,scrollDroppable:e,getAutoScrollerOptions:r}),a=vee({move:n,scrollWindow:t,scrollDroppable:e});return{scroll:u=>{if(!(r().disabled||u.phase!=="DRAGGING")){if(u.movementMode==="FLUID"){i.scroll(u);return}u.scrollJumpRequest&&a(u)}},start:i.start,stop:i.stop}};const Jd="data-rfd",Qd=(()=>{const e=`${Jd}-drag-handle`;return{base:e,draggableId:`${e}-draggable-id`,contextId:`${e}-context-id`}})(),Zk=(()=>{const e=`${Jd}-draggable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),wee=(()=>{const e=`${Jd}-droppable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),lD={contextId:`${Jd}-scroll-container-context-id`},_ee=e=>t=>`[${t}="${e}"]`,Yh=(e,t)=>e.map(n=>{const r=n.styles[t];return r?`${n.selector} { ${r} }`:""}).join(" "),See="pointer-events: none;";var kee=e=>{const t=_ee(e),n=(()=>{const l=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:t(Qd.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:l,dragging:See,dropAnimating:l}}})(),r=(()=>{const l=`
      transition: ${Tm.outOfTheWay};
    `;return{selector:t(Zk.contextId),styles:{dragging:l,dropAnimating:l,userCancel:l}}})(),i={selector:t(wee.contextId),styles:{always:"overflow-anchor: none;"}},o=[r,n,i,{selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}}];return{always:Yh(o,"always"),resting:Yh(o,"resting"),dragging:Yh(o,"dragging"),dropAnimating:Yh(o,"dropAnimating"),userCancel:Yh(o,"userCancel")}};const Gi=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?w.useLayoutEffect:w.useEffect,n1=()=>{const e=document.querySelector("head");return e||Re(),e},cD=e=>{const t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.type="text/css",t};function Eee(e,t){const n=kt(()=>kee(e),[e]),r=w.useRef(null),i=w.useRef(null),a=Je(hr(p=>{const b=i.current;b||Re(),b.textContent=p}),[]),o=Je(p=>{const b=r.current;b||Re(),b.textContent=p},[]);Gi(()=>{!r.current&&!i.current||Re();const p=cD(t),b=cD(t);return r.current=p,i.current=b,p.setAttribute(`${Jd}-always`,e),b.setAttribute(`${Jd}-dynamic`,e),n1().appendChild(p),n1().appendChild(b),o(n.always),a(n.resting),()=>{const y=S=>{const _=S.current;_||Re(),n1().removeChild(_),S.current=null};y(r),y(i)}},[t,o,a,n.always,n.resting,e]);const l=Je(()=>a(n.dragging),[a,n.dragging]),u=Je(p=>{if(p==="DROP"){a(n.dropAnimating);return}a(n.userCancel)},[a,n.dropAnimating,n.userCancel]),d=Je(()=>{i.current&&a(n.resting)},[a,n.resting]);return kt(()=>({dragging:l,dropping:u,resting:d}),[l,u,d])}function R4(e,t){return Array.from(e.querySelectorAll(t))}var L4=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView?e.ownerDocument.defaultView:window;function Rv(e){return e instanceof L4(e).HTMLElement}function Tee(e,t){const n=`[${Qd.contextId}="${e}"]`,r=R4(document,n);if(!r.length)return null;const i=r.find(a=>a.getAttribute(Qd.draggableId)===t);return!i||!Rv(i)?null:i}function Aee(e){const t=w.useRef({}),n=w.useRef(null),r=w.useRef(null),i=w.useRef(!1),a=Je(function(b,y){const S={id:b,focus:y};return t.current[b]=S,function(){const k=t.current;k[b]!==S&&delete k[b]}},[]),o=Je(function(b){const y=Tee(e,b);y&&y!==document.activeElement&&y.focus()},[e]),l=Je(function(b,y){n.current===b&&(n.current=y)},[]),u=Je(function(){r.current||i.current&&(r.current=requestAnimationFrame(()=>{r.current=null;const b=n.current;b&&o(b)}))},[o]),d=Je(function(b){n.current=null;const y=document.activeElement;y&&y.getAttribute(Qd.draggableId)===b&&(n.current=b)},[]);return Gi(()=>(i.current=!0,function(){i.current=!1;const b=r.current;b&&cancelAnimationFrame(b)}),[]),kt(()=>({register:a,tryRecordFocus:d,tryRestoreFocusRecorded:u,tryShiftRecord:l}),[a,d,u,l])}function jee(){const e={draggables:{},droppables:{}},t=[];function n(p){return t.push(p),function(){const y=t.indexOf(p);y!==-1&&t.splice(y,1)}}function r(p){t.length&&t.forEach(b=>b(p))}function i(p){return e.draggables[p]||null}function a(p){const b=i(p);return b||Re(),b}const o={register:p=>{e.draggables[p.descriptor.id]=p,r({type:"ADDITION",value:p})},update:(p,b)=>{const y=e.draggables[b.descriptor.id];y&&y.uniqueId===p.uniqueId&&(delete e.draggables[b.descriptor.id],e.draggables[p.descriptor.id]=p)},unregister:p=>{const b=p.descriptor.id,y=i(b);y&&p.uniqueId===y.uniqueId&&(delete e.draggables[b],e.droppables[p.descriptor.droppableId]&&r({type:"REMOVAL",value:p}))},getById:a,findById:i,exists:p=>!!i(p),getAllByType:p=>Object.values(e.draggables).filter(b=>b.descriptor.type===p)};function l(p){return e.droppables[p]||null}function u(p){const b=l(p);return b||Re(),b}const d={register:p=>{e.droppables[p.descriptor.id]=p},unregister:p=>{const b=l(p.descriptor.id);b&&p.uniqueId===b.uniqueId&&delete e.droppables[p.descriptor.id]},getById:u,findById:l,exists:p=>!!l(p),getAllByType:p=>Object.values(e.droppables).filter(b=>b.descriptor.type===p)};function h(){e.draggables={},e.droppables={},t.length=0}return{draggable:o,droppable:d,subscribe:n,clean:h}}function Oee(){const e=kt(jee,[]);return w.useEffect(()=>function(){e.clean()},[e]),e}var hT=Xt.createContext(null),fy=()=>{const e=document.body;return e||Re(),e};const Nee={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},Cee=e=>`rfd-announcement-${e}`;function Mee(e){const t=kt(()=>Cee(e),[e]),n=w.useRef(null);return w.useEffect(function(){const a=document.createElement("div");return n.current=a,a.id=t,a.setAttribute("aria-live","assertive"),a.setAttribute("aria-atomic","true"),ly(a.style,Nee),fy().appendChild(a),function(){setTimeout(function(){const u=fy();u.contains(a)&&u.removeChild(a),a===n.current&&(n.current=null)})}},[t]),Je(i=>{const a=n.current;if(a){a.textContent=i;return}},[])}const Dee={separator:"::"};function mT(e,t=Dee){const n=Xt.useId();return kt(()=>`${e}${t.separator}${n}`,[t.separator,e,n])}function Pee({contextId:e,uniqueId:t}){return`rfd-hidden-text-${e}-${t}`}function Ree({contextId:e,text:t}){const n=mT("hidden-text",{separator:"-"}),r=kt(()=>Pee({contextId:e,uniqueId:n}),[n,e]);return w.useEffect(function(){const a=document.createElement("div");return a.id=r,a.textContent=t,a.style.display="none",fy().appendChild(a),function(){const l=fy();l.contains(a)&&l.removeChild(a)}},[r,t]),r}var Lv=Xt.createContext(null);function I4(e){const t=w.useRef(e);return w.useEffect(()=>{t.current=e}),t}function Lee(){let e=null;function t(){return!!e}function n(o){return o===e}function r(o){e&&Re();const l={abandon:o};return e=l,l}function i(){e||Re(),e=null}function a(){e&&(e.abandon(),i())}return{isClaimed:t,isActive:n,claim:r,release:i,tryAbandon:a}}function Hm(e){return e.phase==="IDLE"||e.phase==="DROP_ANIMATING"?!1:e.isDragging}const Iee=9,$ee=13,pT=27,$4=32,Bee=33,zee=34,Uee=35,Fee=36,Hee=37,Gee=38,qee=39,Yee=40,Kee={[$ee]:!0,[Iee]:!0};var B4=e=>{Kee[e.keyCode]&&e.preventDefault()};const Iv=(()=>{const e="visibilitychange";return typeof document>"u"?e:[e,`ms${e}`,`webkit${e}`,`moz${e}`,`o${e}`].find(r=>`on${r}`in document)||e})(),z4=0,uD=5;function Wee(e,t){return Math.abs(t.x-e.x)>=uD||Math.abs(t.y-e.y)>=uD}const dD={type:"IDLE"};function Vee({cancel:e,completed:t,getPhase:n,setPhase:r}){return[{eventName:"mousemove",fn:i=>{const{button:a,clientX:o,clientY:l}=i;if(a!==z4)return;const u={x:o,y:l},d=n();if(d.type==="DRAGGING"){i.preventDefault(),d.actions.move(u);return}d.type!=="PENDING"&&Re();const h=d.point;if(!Wee(h,u))return;i.preventDefault();const p=d.actions.fluidLift(u);r({type:"DRAGGING",actions:p})}},{eventName:"mouseup",fn:i=>{const a=n();if(a.type!=="DRAGGING"){e();return}i.preventDefault(),a.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"mousedown",fn:i=>{n().type==="DRAGGING"&&i.preventDefault(),e()}},{eventName:"keydown",fn:i=>{if(n().type==="PENDING"){e();return}if(i.keyCode===pT){i.preventDefault(),e();return}B4(i)}},{eventName:"resize",fn:e},{eventName:"scroll",options:{passive:!0,capture:!1},fn:()=>{n().type==="PENDING"&&e()}},{eventName:"webkitmouseforcedown",fn:i=>{const a=n();if(a.type==="IDLE"&&Re(),a.actions.shouldRespectForcePress()){e();return}i.preventDefault()}},{eventName:Iv,fn:e}]}function Zee(e){const t=w.useRef(dD),n=w.useRef(Bl),r=kt(()=>({eventName:"mousedown",fn:function(p){if(p.defaultPrevented||p.button!==z4||p.ctrlKey||p.metaKey||p.shiftKey||p.altKey)return;const b=e.findClosestDraggableId(p);if(!b)return;const y=e.tryGetLock(b,o,{sourceEvent:p});if(!y)return;p.preventDefault();const S={x:p.clientX,y:p.clientY};n.current(),d(y,S)}}),[e]),i=kt(()=>({eventName:"webkitmouseforcewillbegin",fn:h=>{if(h.defaultPrevented)return;const p=e.findClosestDraggableId(h);if(!p)return;const b=e.findOptionsForDraggable(p);b&&(b.shouldRespectForcePress||e.canGetLock(p)&&h.preventDefault())}}),[e]),a=Je(function(){const p={passive:!1,capture:!0};n.current=ma(window,[i,r],p)},[i,r]),o=Je(()=>{t.current.type!=="IDLE"&&(t.current=dD,n.current(),a())},[a]),l=Je(()=>{const h=t.current;o(),h.type==="DRAGGING"&&h.actions.cancel({shouldBlockNextClick:!0}),h.type==="PENDING"&&h.actions.abort()},[o]),u=Je(function(){const p={capture:!0,passive:!1},b=Vee({cancel:l,completed:o,getPhase:()=>t.current,setPhase:y=>{t.current=y}});n.current=ma(window,b,p)},[l,o]),d=Je(function(p,b){t.current.type!=="IDLE"&&Re(),t.current={type:"PENDING",point:b,actions:p},u()},[u]);Gi(function(){return a(),function(){n.current()}},[a])}function Xee(){}const Jee={[zee]:!0,[Bee]:!0,[Fee]:!0,[Uee]:!0};function Qee(e,t){function n(){t(),e.cancel()}function r(){t(),e.drop()}return[{eventName:"keydown",fn:i=>{if(i.keyCode===pT){i.preventDefault(),n();return}if(i.keyCode===$4){i.preventDefault(),r();return}if(i.keyCode===Yee){i.preventDefault(),e.moveDown();return}if(i.keyCode===Gee){i.preventDefault(),e.moveUp();return}if(i.keyCode===qee){i.preventDefault(),e.moveRight();return}if(i.keyCode===Hee){i.preventDefault(),e.moveLeft();return}if(Jee[i.keyCode]){i.preventDefault();return}B4(i)}},{eventName:"mousedown",fn:n},{eventName:"mouseup",fn:n},{eventName:"click",fn:n},{eventName:"touchstart",fn:n},{eventName:"resize",fn:n},{eventName:"wheel",fn:n,options:{passive:!0}},{eventName:Iv,fn:n}]}function ete(e){const t=w.useRef(Xee),n=kt(()=>({eventName:"keydown",fn:function(a){if(a.defaultPrevented||a.keyCode!==$4)return;const o=e.findClosestDraggableId(a);if(!o)return;const l=e.tryGetLock(o,h,{sourceEvent:a});if(!l)return;a.preventDefault();let u=!0;const d=l.snapLift();t.current();function h(){u||Re(),u=!1,t.current(),r()}t.current=ma(window,Qee(d,h),{capture:!0,passive:!1})}}),[e]),r=Je(function(){const a={passive:!1,capture:!0};t.current=ma(window,[n],a)},[n]);Gi(function(){return r(),function(){t.current()}},[r])}const r1={type:"IDLE"},tte=120,nte=.15;function rte({cancel:e,getPhase:t}){return[{eventName:"orientationchange",fn:e},{eventName:"resize",fn:e},{eventName:"contextmenu",fn:n=>{n.preventDefault()}},{eventName:"keydown",fn:n=>{if(t().type!=="DRAGGING"){e();return}n.keyCode===pT&&n.preventDefault(),e()}},{eventName:Iv,fn:e}]}function ite({cancel:e,completed:t,getPhase:n}){return[{eventName:"touchmove",options:{capture:!1},fn:r=>{const i=n();if(i.type!=="DRAGGING"){e();return}i.hasMoved=!0;const{clientX:a,clientY:o}=r.touches[0],l={x:a,y:o};r.preventDefault(),i.actions.move(l)}},{eventName:"touchend",fn:r=>{const i=n();if(i.type!=="DRAGGING"){e();return}r.preventDefault(),i.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"touchcancel",fn:r=>{if(n().type!=="DRAGGING"){e();return}r.preventDefault(),e()}},{eventName:"touchforcechange",fn:r=>{const i=n();i.type==="IDLE"&&Re();const a=r.touches[0];if(!a||!(a.force>=nte))return;const l=i.actions.shouldRespectForcePress();if(i.type==="PENDING"){l&&e();return}if(l){if(i.hasMoved){r.preventDefault();return}e();return}r.preventDefault()}},{eventName:Iv,fn:e}]}function ate(e){const t=w.useRef(r1),n=w.useRef(Bl),r=Je(function(){return t.current},[]),i=Je(function(y){t.current=y},[]),a=kt(()=>({eventName:"touchstart",fn:function(y){if(y.defaultPrevented)return;const S=e.findClosestDraggableId(y);if(!S)return;const _=e.tryGetLock(S,l,{sourceEvent:y});if(!_)return;const k=y.touches[0],{clientX:A,clientY:N}=k,j={x:A,y:N};n.current(),p(_,j)}}),[e]),o=Je(function(){const y={capture:!0,passive:!1};n.current=ma(window,[a],y)},[a]),l=Je(()=>{const b=t.current;b.type!=="IDLE"&&(b.type==="PENDING"&&clearTimeout(b.longPressTimerId),i(r1),n.current(),o())},[o,i]),u=Je(()=>{const b=t.current;l(),b.type==="DRAGGING"&&b.actions.cancel({shouldBlockNextClick:!0}),b.type==="PENDING"&&b.actions.abort()},[l]),d=Je(function(){const y={capture:!0,passive:!1},S={cancel:u,completed:l,getPhase:r},_=ma(window,ite(S),y),k=ma(window,rte(S),y);n.current=function(){_(),k()}},[u,r,l]),h=Je(function(){const y=r();y.type!=="PENDING"&&Re();const S=y.actions.fluidLift(y.point);i({type:"DRAGGING",actions:S,hasMoved:!1})},[r,i]),p=Je(function(y,S){r().type!=="IDLE"&&Re();const _=setTimeout(h,tte);i({type:"PENDING",point:S,actions:y,longPressTimerId:_}),d()},[d,r,i,h]);Gi(function(){return o(),function(){n.current();const S=r();S.type==="PENDING"&&(clearTimeout(S.longPressTimerId),i(r1))}},[r,o,i]),Gi(function(){return ma(window,[{eventName:"touchmove",fn:()=>{},options:{capture:!1,passive:!1}}])},[])}const ote=["input","button","textarea","select","option","optgroup","video","audio"];function U4(e,t){if(t==null)return!1;if(ote.includes(t.tagName.toLowerCase()))return!0;const r=t.getAttribute("contenteditable");return r==="true"||r===""?!0:t===e?!1:U4(e,t.parentElement)}function ste(e,t){const n=t.target;return Rv(n)?U4(e,n):!1}var lte=e=>Xa(e.getBoundingClientRect()).center;function cte(e){return e instanceof L4(e).Element}const ute=(()=>{const e="matches";return typeof document>"u"?e:[e,"msMatchesSelector","webkitMatchesSelector"].find(r=>r in Element.prototype)||e})();function F4(e,t){return e==null?null:e[ute](t)?e:F4(e.parentElement,t)}function dte(e,t){return e.closest?e.closest(t):F4(e,t)}function fte(e){return`[${Qd.contextId}="${e}"]`}function hte(e,t){const n=t.target;if(!cte(n))return null;const r=fte(e),i=dte(n,r);return!i||!Rv(i)?null:i}function mte(e,t){const n=hte(e,t);return n?n.getAttribute(Qd.draggableId):null}function pte(e,t){const n=`[${Zk.contextId}="${e}"]`,i=R4(document,n).find(a=>a.getAttribute(Zk.id)===t);return!i||!Rv(i)?null:i}function gte(e){e.preventDefault()}function D0({expected:e,phase:t,isLockActive:n,shouldWarn:r}){return!(!n()||e!==t)}function H4({lockAPI:e,store:t,registry:n,draggableId:r}){if(e.isClaimed())return!1;const i=n.draggable.findById(r);return!(!i||!i.options.isEnabled||!C4(t.getState(),r))}function bte({lockAPI:e,contextId:t,store:n,registry:r,draggableId:i,forceSensorStop:a,sourceEvent:o}){if(!H4({lockAPI:e,store:n,registry:r,draggableId:i}))return null;const u=r.draggable.getById(i),d=pte(t,u.descriptor.id);if(!d||o&&!u.options.canDragInteractiveElements&&ste(d,o))return null;const h=e.claim(a||Bl);let p="PRE_DRAG";function b(){return u.options.shouldRespectForcePress}function y(){return e.isActive(h)}function S(D,P){D0({expected:D,phase:p,isLockActive:y,shouldWarn:!0})&&n.dispatch(P())}const _=S.bind(null,"DRAGGING");function k(D){function P(){e.release(),p="COMPLETED"}p!=="PRE_DRAG"&&(P(),Re()),n.dispatch(dQ(D.liftActionArgs)),p="DRAGGING";function $(U,Y={shouldBlockNextClick:!1}){if(D.cleanup(),Y.shouldBlockNextClick){const K=ma(window,[{eventName:"click",fn:gte,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(K)}P(),n.dispatch(S4({reason:U}))}return{isActive:()=>D0({expected:"DRAGGING",phase:p,isLockActive:y,shouldWarn:!1}),shouldRespectForcePress:b,drop:U=>$("DROP",U),cancel:U=>$("CANCEL",U),...D.actions}}function A(D){const P=Im(U=>{_(()=>_4({client:U}))});return{...k({liftActionArgs:{id:i,clientSelection:D,movementMode:"FLUID"},cleanup:()=>P.cancel(),actions:{move:P}}),move:P}}function N(){const D={moveUp:()=>_(xQ),moveRight:()=>_(_Q),moveDown:()=>_(wQ),moveLeft:()=>_(SQ)};return k({liftActionArgs:{id:i,clientSelection:lte(d),movementMode:"SNAP"},cleanup:Bl,actions:D})}function j(){D0({expected:"PRE_DRAG",phase:p,isLockActive:y,shouldWarn:!0})&&e.release()}return{isActive:()=>D0({expected:"PRE_DRAG",phase:p,isLockActive:y,shouldWarn:!1}),shouldRespectForcePress:b,fluidLift:A,snapLift:N,abort:j}}const yte=[Zee,ete,ate];function vte({contextId:e,store:t,registry:n,customSensors:r,enableDefaultSensors:i}){const a=[...i?yte:[],...r||[]],o=w.useState(()=>Lee())[0],l=Je(function(k,A){Hm(k)&&!Hm(A)&&o.tryAbandon()},[o]);Gi(function(){let k=t.getState();return t.subscribe(()=>{const N=t.getState();l(k,N),k=N})},[o,t,l]),Gi(()=>o.tryAbandon,[o.tryAbandon]);const u=Je(_=>H4({lockAPI:o,registry:n,store:t,draggableId:_}),[o,n,t]),d=Je((_,k,A)=>bte({lockAPI:o,registry:n,contextId:e,store:t,draggableId:_,forceSensorStop:k||null,sourceEvent:A&&A.sourceEvent?A.sourceEvent:null}),[e,o,n,t]),h=Je(_=>mte(e,_),[e]),p=Je(_=>{const k=n.draggable.findById(_);return k?k.options:null},[n.draggable]),b=Je(function(){o.isClaimed()&&(o.tryAbandon(),t.getState().phase!=="IDLE"&&t.dispatch(oT()))},[o,t]),y=Je(()=>o.isClaimed(),[o]),S=kt(()=>({canGetLock:u,tryGetLock:d,findClosestDraggableId:h,findOptionsForDraggable:p,tryReleaseLock:b,isLockClaimed:y}),[u,d,h,p,b,y]);for(let _=0;_<a.length;_++)a[_](S)}const xte=e=>({onBeforeCapture:t=>{const n=()=>{e.onBeforeCapture&&e.onBeforeCapture(t)};ku.flushSync(n)},onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}),wte=e=>({...Fm,...e.autoScrollerOptions,durationDampening:{...Fm.durationDampening,...e.autoScrollerOptions}});function Kh(e){return e.current||Re(),e.current}function _te(e){const{contextId:t,setCallbacks:n,sensors:r,nonce:i,dragHandleUsageInstructions:a}=e,o=w.useRef(null),l=I4(e),u=Je(()=>xte(l.current),[l]),d=Je(()=>wte(l.current),[l]),h=Mee(t),p=Ree({contextId:t,text:a}),b=Eee(t,i),y=Je(K=>{Kh(o).dispatch(K)},[]),S=kt(()=>IM({publishWhileDragging:hQ,updateDroppableScroll:pQ,updateDroppableIsEnabled:gQ,updateDroppableIsCombineEnabled:bQ,collectionStarting:mQ},y),[y]),_=Oee(),k=kt(()=>ree(_,S),[_,S]),A=kt(()=>xee({scrollWindow:iee,scrollDroppable:k.scrollDroppable,getAutoScrollerOptions:d,...IM({move:_4},y)}),[k.scrollDroppable,y,d]),N=Aee(t),j=kt(()=>QQ({announce:h,autoScroller:A,dimensionMarshal:k,focusMarshal:N,getResponders:u,styleMarshal:b}),[h,A,k,N,u,b]);o.current=j;const C=Je(()=>{const K=Kh(o);K.getState().phase!=="IDLE"&&K.dispatch(oT())},[]),D=Je(()=>{const K=Kh(o).getState();return K.phase==="DROP_ANIMATING"?!0:K.phase==="IDLE"?!1:K.isDragging},[]),P=kt(()=>({isDragging:D,tryAbort:C}),[D,C]);n(P);const $=Je(K=>C4(Kh(o).getState(),K),[]),U=Je(()=>Vc(Kh(o).getState()),[]),Y=kt(()=>({marshal:k,focus:N,contextId:t,canLift:$,isMovementAllowed:U,dragHandleUsageInstructionsId:p,registry:_}),[t,k,p,N,$,U,_]);return vte({contextId:t,store:j,registry:_,customSensors:r||null,enableDefaultSensors:e.enableDefaultSensors!==!1}),w.useEffect(()=>C,[C]),Xt.createElement(Lv.Provider,{value:Y},Xt.createElement(VB,{context:hT,store:j},e.children))}function Ste(){return Xt.useId()}function xp(e){const t=Ste(),n=e.dragHandleUsageInstructions||Rb.dragHandleUsageInstructions;return Xt.createElement(eJ,null,r=>Xt.createElement(_te,{nonce:e.nonce,contextId:t,setCallbacks:r,dragHandleUsageInstructions:n,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd,autoScrollerOptions:e.autoScrollerOptions},e.children))}const fD={dragging:5e3,dropAnimating:4500},kte=(e,t)=>t?Tm.drop(t.duration):e?Tm.snap:Tm.fluid,Ete=(e,t)=>{if(e)return t?Um.opacity.drop:Um.opacity.combining},Tte=e=>e.forceShouldAnimate!=null?e.forceShouldAnimate:e.mode==="SNAP";function Ate(e){const n=e.dimension.client,{offset:r,combineWith:i,dropping:a}=e,o=!!i,l=Tte(e),u=!!a,d=u?Wk.drop(r,o):Wk.moveTo(r);return{position:"fixed",top:n.marginBox.top,left:n.marginBox.left,boxSizing:"border-box",width:n.borderBox.width,height:n.borderBox.height,transition:kte(l,a),transform:d,opacity:Ete(o,u),zIndex:u?fD.dropAnimating:fD.dragging,pointerEvents:"none"}}function jte(e){return{transform:Wk.moveTo(e.offset),transition:e.shouldAnimateDisplacement?void 0:"none"}}function Ote(e){return e.type==="DRAGGING"?Ate(e):jte(e)}function Nte(e,t,n=mr){const r=window.getComputedStyle(t),i=t.getBoundingClientRect(),a=ZB(i,r),o=sy(a,n),l={client:a,tagName:t.tagName.toLowerCase(),display:r.display},u={x:a.marginBox.width,y:a.marginBox.height};return{descriptor:e,placeholder:l,displaceBy:u,client:a,page:o}}function Cte(e){const t=mT("draggable"),{descriptor:n,registry:r,getDraggableRef:i,canDragInteractiveElements:a,shouldRespectForcePress:o,isEnabled:l}=e,u=kt(()=>({canDragInteractiveElements:a,shouldRespectForcePress:o,isEnabled:l}),[a,l,o]),d=Je(y=>{const S=i();return S||Re(),Nte(n,S,y)},[n,i]),h=kt(()=>({uniqueId:t,descriptor:n,options:u,getDimension:d}),[n,d,u,t]),p=w.useRef(h),b=w.useRef(!0);Gi(()=>(r.draggable.register(p.current),()=>r.draggable.unregister(p.current)),[r.draggable]),Gi(()=>{if(b.current){b.current=!1;return}const y=p.current;p.current=h,r.draggable.update(h,y)},[h,r.draggable])}var gT=Xt.createContext(null);function hy(e){const t=w.useContext(e);return t||Re(),t}function Mte(e){e.preventDefault()}const Dte=e=>{const t=w.useRef(null),n=Je((P=null)=>{t.current=P},[]),r=Je(()=>t.current,[]),{contextId:i,dragHandleUsageInstructionsId:a,registry:o}=hy(Lv),{type:l,droppableId:u}=hy(gT),d=kt(()=>({id:e.draggableId,index:e.index,type:l,droppableId:u}),[e.draggableId,e.index,l,u]),{children:h,draggableId:p,isEnabled:b,shouldRespectForcePress:y,canDragInteractiveElements:S,isClone:_,mapped:k,dropAnimationFinished:A}=e;if(!_){const P=kt(()=>({descriptor:d,registry:o,getDraggableRef:r,canDragInteractiveElements:S,shouldRespectForcePress:y,isEnabled:b}),[d,o,r,S,y,b]);Cte(P)}const N=kt(()=>b?{tabIndex:0,role:"button","aria-describedby":a,"data-rfd-drag-handle-draggable-id":p,"data-rfd-drag-handle-context-id":i,draggable:!1,onDragStart:Mte}:null,[i,a,p,b]),j=Je(P=>{k.type==="DRAGGING"&&k.dropping&&P.propertyName==="transform"&&ku.flushSync(A)},[A,k]),C=kt(()=>{const P=Ote(k),$=k.type==="DRAGGING"&&k.dropping?j:void 0;return{innerRef:n,draggableProps:{"data-rfd-draggable-context-id":i,"data-rfd-draggable-id":p,style:P,onTransitionEnd:$},dragHandleProps:N}},[i,N,p,k,j,n]),D=kt(()=>({draggableId:d.id,type:d.type,source:{index:d.index,droppableId:d.droppableId}}),[d.droppableId,d.id,d.index,d.type]);return Xt.createElement(Xt.Fragment,null,h(C,k.snapshot,D))};var G4=(e,t)=>e===t,q4=e=>{const{combine:t,destination:n}=e;return n?n.droppableId:t?t.droppableId:null};const Pte=e=>e.combine?e.combine.draggableId:null,Rte=e=>e.at&&e.at.type==="COMBINE"?e.at.combine.draggableId:null;function Lte(){const e=hr((i,a)=>({x:i,y:a})),t=hr((i,a,o=null,l=null,u=null)=>({isDragging:!0,isClone:a,isDropAnimating:!!u,dropAnimation:u,mode:i,draggingOver:o,combineWith:l,combineTargetFor:null})),n=hr((i,a,o,l,u=null,d=null,h=null)=>({mapped:{type:"DRAGGING",dropping:null,draggingOver:u,combineWith:d,mode:a,offset:i,dimension:o,forceShouldAnimate:h,snapshot:t(a,l,u,d,null)}}));return(i,a)=>{if(Hm(i)){if(i.critical.draggable.id!==a.draggableId)return null;const o=i.current.client.offset,l=i.dimensions.draggables[a.draggableId],u=Hi(i.impact),d=Rte(i.impact),h=i.forceShouldAnimate;return n(e(o.x,o.y),i.movementMode,l,a.isClone,u,d,h)}if(i.phase==="DROP_ANIMATING"){const o=i.completed;if(o.result.draggableId!==a.draggableId)return null;const l=a.isClone,u=i.dimensions.draggables[a.draggableId],d=o.result,h=d.mode,p=q4(d),b=Pte(d),S={duration:i.dropDuration,curve:lT.drop,moveTo:i.newHomeClientOffset,opacity:b?Um.opacity.drop:null,scale:b?Um.scale.drop:null};return{mapped:{type:"DRAGGING",offset:i.newHomeClientOffset,dimension:u,dropping:S,draggingOver:p,combineWith:b,mode:h,forceShouldAnimate:null,snapshot:t(h,l,p,b,S)}}}return null}}function Y4(e=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}const Ite={mapped:{type:"SECONDARY",offset:mr,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:Y4(null)}};function $te(){const e=hr((o,l)=>({x:o,y:l})),t=hr(Y4),n=hr((o,l=null,u)=>({mapped:{type:"SECONDARY",offset:o,combineTargetFor:l,shouldAnimateDisplacement:u,snapshot:t(l)}})),r=o=>o?n(mr,o,!0):null,i=(o,l,u,d)=>{const h=u.displaced.visible[o],p=!!(d.inVirtualList&&d.effected[o]),b=Mv(u),y=b&&b.draggableId===o?l:null;if(!h){if(!p)return r(y);if(u.displaced.invisible[o])return null;const k=vf(d.displacedBy.point),A=e(k.x,k.y);return n(A,y,!0)}if(p)return r(y);const S=u.displacedBy.point,_=e(S.x,S.y);return n(_,y,h.shouldAnimate)};return(o,l)=>{if(Hm(o))return o.critical.draggable.id===l.draggableId?null:i(l.draggableId,o.critical.draggable.id,o.impact,o.afterCritical);if(o.phase==="DROP_ANIMATING"){const u=o.completed;return u.result.draggableId===l.draggableId?null:i(l.draggableId,u.result.draggableId,u.impact,u.afterCritical)}return null}}const Bte=()=>{const e=Lte(),t=$te();return(r,i)=>e(r,i)||t(r,i)||Ite},zte={dropAnimationFinished:k4},Ute=WB(Bte,zte,null,{context:hT,areStatePropsEqual:G4})(Dte);function K4(e){return hy(gT).isUsingCloneFor===e.draggableId&&!e.isClone?null:Xt.createElement(Ute,e)}function _f(e){const t=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,n=!!e.disableInteractiveElementBlocking,r=!!e.shouldRespectForcePress;return Xt.createElement(K4,ly({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:n,shouldRespectForcePress:r}))}const W4=e=>t=>e===t,Fte=W4("scroll"),Hte=W4("auto"),hD=(e,t)=>t(e.overflowX)||t(e.overflowY),Gte=e=>{const t=window.getComputedStyle(e),n={overflowX:t.overflowX,overflowY:t.overflowY};return hD(n,Fte)||hD(n,Hte)},qte=()=>!1,V4=e=>e==null?null:e===document.body?qte()?e:null:e===document.documentElement?null:Gte(e)?e:V4(e.parentElement);var Xk=e=>({x:e.scrollLeft,y:e.scrollTop});const Z4=e=>e?window.getComputedStyle(e).position==="fixed"?!0:Z4(e.parentElement):!1;var Yte=e=>{const t=V4(e),n=Z4(e);return{closestScrollable:t,isFixedOnPage:n}},Kte=({descriptor:e,isEnabled:t,isCombineEnabled:n,isFixedOnPage:r,direction:i,client:a,page:o,closest:l})=>{const u=(()=>{if(!l)return null;const{scrollSize:b,client:y}=l,S=j4({scrollHeight:b.scrollHeight,scrollWidth:b.scrollWidth,height:y.paddingBox.height,width:y.paddingBox.width});return{pageMarginBox:l.page.marginBox,frameClient:y,scrollSize:b,shouldClipSubject:l.shouldClipSubject,scroll:{initial:l.scroll,current:l.scroll,max:S,diff:{value:mr,displacement:mr}}}})(),d=i==="vertical"?tT:s4,h=Xd({page:o,withPlaceholder:null,axis:d,frame:u});return{descriptor:e,isCombineEnabled:n,isFixedOnPage:r,axis:d,isEnabled:t,client:a,page:o,frame:u,subject:h}};const Wte=(e,t)=>{const n=XB(e);if(!t||e!==t)return n;const r=n.paddingBox.top-t.scrollTop,i=n.paddingBox.left-t.scrollLeft,a=r+t.scrollHeight,o=i+t.scrollWidth,u=XE({top:r,right:o,bottom:a,left:i},n.border);return JE({borderBox:u,margin:n.margin,border:n.border,padding:n.padding})};var Vte=({ref:e,descriptor:t,env:n,windowScroll:r,direction:i,isDropDisabled:a,isCombineEnabled:o,shouldClipSubject:l})=>{const u=n.closestScrollable,d=Wte(e,u),h=sy(d,r),p=(()=>{if(!u)return null;const y=XB(u),S={scrollHeight:u.scrollHeight,scrollWidth:u.scrollWidth};return{client:y,page:sy(y,r),scroll:Xk(u),scrollSize:S,shouldClipSubject:l}})();return Kte({descriptor:t,isEnabled:!a,isCombineEnabled:o,isFixedOnPage:n.isFixedOnPage,direction:i,client:d,page:h,closest:p})};const Zte={passive:!1},Xte={passive:!0};var mD=e=>e.shouldPublishImmediately?Zte:Xte;const P0=e=>e&&e.env.closestScrollable||null;function Jte(e){const t=w.useRef(null),n=hy(Lv),r=mT("droppable"),{registry:i,marshal:a}=n,o=I4(e),l=kt(()=>({id:e.droppableId,type:e.type,mode:e.mode}),[e.droppableId,e.mode,e.type]),u=w.useRef(l),d=kt(()=>hr((C,D)=>{t.current||Re();const P={x:C,y:D};a.updateDroppableScroll(l.id,P)}),[l.id,a]),h=Je(()=>{const C=t.current;return!C||!C.env.closestScrollable?mr:Xk(C.env.closestScrollable)},[]),p=Je(()=>{const C=h();d(C.x,C.y)},[h,d]),b=kt(()=>Im(p),[p]),y=Je(()=>{const C=t.current,D=P0(C);if(C&&D||Re(),C.scrollOptions.shouldPublishImmediately){p();return}b()},[b,p]),S=Je((C,D)=>{t.current&&Re();const P=o.current,$=P.getDroppableRef();$||Re();const U=Yte($),Y={ref:$,descriptor:l,env:U,scrollOptions:D};t.current=Y;const K=Vte({ref:$,descriptor:l,env:U,windowScroll:C,direction:P.direction,isDropDisabled:P.isDropDisabled,isCombineEnabled:P.isCombineEnabled,shouldClipSubject:!P.ignoreContainerClipping}),F=U.closestScrollable;return F&&(F.setAttribute(lD.contextId,n.contextId),F.addEventListener("scroll",y,mD(Y.scrollOptions))),K},[n.contextId,l,y,o]),_=Je(()=>{const C=t.current,D=P0(C);return C&&D||Re(),Xk(D)},[]),k=Je(()=>{const C=t.current;C||Re();const D=P0(C);t.current=null,D&&(b.cancel(),D.removeAttribute(lD.contextId),D.removeEventListener("scroll",y,mD(C.scrollOptions)))},[y,b]),A=Je(C=>{const D=t.current;D||Re();const P=P0(D);P||Re(),P.scrollTop+=C.y,P.scrollLeft+=C.x},[]),N=kt(()=>({getDimensionAndWatchScroll:S,getScrollWhileDragging:_,dragStopped:k,scroll:A}),[k,S,_,A]),j=kt(()=>({uniqueId:r,descriptor:l,callbacks:N}),[N,l,r]);Gi(()=>(u.current=j.descriptor,i.droppable.register(j),()=>{t.current&&k(),i.droppable.unregister(j)}),[N,l,k,j,a,i.droppable]),Gi(()=>{t.current&&a.updateDroppableIsEnabled(u.current.id,!e.isDropDisabled)},[e.isDropDisabled,a]),Gi(()=>{t.current&&a.updateDroppableIsCombineEnabled(u.current.id,e.isCombineEnabled)},[e.isCombineEnabled,a])}function i1(){}const pD={width:0,height:0,margin:sJ},Qte=({isAnimatingOpenOnMount:e,placeholder:t,animate:n})=>e||n==="close"?pD:{height:t.client.borderBox.height,width:t.client.borderBox.width,margin:t.client.margin},ene=({isAnimatingOpenOnMount:e,placeholder:t,animate:n})=>{const r=Qte({isAnimatingOpenOnMount:e,placeholder:t,animate:n});return{display:t.display,boxSizing:"border-box",width:r.width,height:r.height,marginTop:r.margin.top,marginRight:r.margin.right,marginBottom:r.margin.bottom,marginLeft:r.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:n!=="none"?Tm.placeholder:null}},tne=e=>{const t=w.useRef(null),n=Je(()=>{t.current&&(clearTimeout(t.current),t.current=null)},[]),{animate:r,onTransitionEnd:i,onClose:a,contextId:o}=e,[l,u]=w.useState(e.animate==="open");w.useEffect(()=>l?r!=="open"?(n(),u(!1),i1):t.current?i1:(t.current=setTimeout(()=>{t.current=null,u(!1)}),n):i1,[r,l,n]);const d=Je(p=>{p.propertyName==="height"&&(i(),r==="close"&&a())},[r,a,i]),h=ene({isAnimatingOpenOnMount:l,animate:e.animate,placeholder:e.placeholder});return Xt.createElement(e.placeholder.tagName,{style:h,"data-rfd-placeholder-context-id":o,onTransitionEnd:d,ref:e.innerRef})};var nne=Xt.memo(tne);class rne extends Xt.PureComponent{constructor(...t){super(...t),this.state={isVisible:!!this.props.on,data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{this.state.animate==="close"&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(t,n){return t.shouldAnimate?t.on?{isVisible:!0,data:t.on,animate:"open"}:n.isVisible?{isVisible:!0,data:n.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!t.on,data:t.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const t={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(t)}}const ine=e=>{const t=w.useContext(Lv);t||Re();const{contextId:n,isMovementAllowed:r}=t,i=w.useRef(null),a=w.useRef(null),{children:o,droppableId:l,type:u,mode:d,direction:h,ignoreContainerClipping:p,isDropDisabled:b,isCombineEnabled:y,snapshot:S,useClone:_,updateViewportMaxScroll:k,getContainerForClone:A}=e,N=Je(()=>i.current,[]),j=Je((F=null)=>{i.current=F},[]);Je(()=>a.current,[]);const C=Je((F=null)=>{a.current=F},[]),D=Je(()=>{r()&&k({maxScroll:N4()})},[r,k]);Jte({droppableId:l,type:u,mode:d,direction:h,isDropDisabled:b,isCombineEnabled:y,ignoreContainerClipping:p,getDroppableRef:N});const P=kt(()=>Xt.createElement(rne,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},({onClose:F,data:z,animate:W})=>Xt.createElement(nne,{placeholder:z,onClose:F,innerRef:C,animate:W,contextId:n,onTransitionEnd:D})),[n,D,e.placeholder,e.shouldAnimatePlaceholder,C]),$=kt(()=>({innerRef:j,placeholder:P,droppableProps:{"data-rfd-droppable-id":l,"data-rfd-droppable-context-id":n}}),[n,l,P,j]),U=_?_.dragging.draggableId:null,Y=kt(()=>({droppableId:l,type:u,isUsingCloneFor:U}),[l,U,u]);function K(){if(!_)return null;const{dragging:F,render:z}=_,W=Xt.createElement(K4,{draggableId:F.draggableId,index:F.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(X,Z)=>z(X,Z,F));return cY.createPortal(W,A())}return Xt.createElement(gT.Provider,{value:Y},o($,S),K())};function ane(){return document.body||Re(),document.body}const gD={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:ane},X4=e=>{let t={...e},n;for(n in gD)e[n]===void 0&&(t={...t,[n]:gD[n]});return t},a1=(e,t)=>e===t.droppable.type,bD=(e,t)=>t.draggables[e.draggable.id],one=()=>{const e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t={...e,shouldAnimatePlaceholder:!1},n=hr(a=>({draggableId:a.id,type:a.type,source:{index:a.index,droppableId:a.droppableId}})),r=hr((a,o,l,u,d,h)=>{const p=d.descriptor.id;if(d.descriptor.droppableId===a){const S=h?{render:h,dragging:n(d.descriptor)}:null,_={isDraggingOver:l,draggingOverWith:l?p:null,draggingFromThisWith:p,isUsingPlaceholder:!0};return{placeholder:d.placeholder,shouldAnimatePlaceholder:!1,snapshot:_,useClone:S}}if(!o)return t;if(!u)return e;const y={isDraggingOver:l,draggingOverWith:p,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:d.placeholder,shouldAnimatePlaceholder:!0,snapshot:y,useClone:null}});return(a,o)=>{const l=X4(o),u=l.droppableId,d=l.type,h=!l.isDropDisabled,p=l.renderClone;if(Hm(a)){const b=a.critical;if(!a1(d,b))return t;const y=bD(b,a.dimensions),S=Hi(a.impact)===u;return r(u,h,S,S,y,p)}if(a.phase==="DROP_ANIMATING"){const b=a.completed;if(!a1(d,b.critical))return t;const y=bD(b.critical,a.dimensions);return r(u,h,q4(b.result)===u,Hi(b.impact)===u,y,p)}if(a.phase==="IDLE"&&a.completed&&!a.shouldFlush){const b=a.completed;if(!a1(d,b.critical))return t;const y=Hi(b.impact)===u,S=!!(b.impact.at&&b.impact.at.type==="COMBINE"),_=b.critical.droppable.id===u;return y?S?e:t:_?e:t}return t}},sne={updateViewportMaxScroll:vQ},Sf=WB(one,sne,(e,t,n)=>({...X4(n),...e,...t}),{context:hT,areStatePropsEqual:G4})(ine),lne={1948:{start:new Date(1948,4,1),end:new Date(1948,7,13)},1949:{start:new Date(1949,2,3),end:new Date(1949,7,11)},1950:{start:new Date(1950,2,1),end:new Date(1950,7,10)},1951:{start:new Date(1951,3,6),end:new Date(1951,7,9)},1955:{start:new Date(1955,3,5),end:new Date(1955,7,9)},1956:{start:new Date(1956,3,20),end:new Date(1956,7,30)},1957:{start:new Date(1957,3,5),end:new Date(1957,7,22)},1958:{start:new Date(1958,3,4),end:new Date(1958,7,21)},1959:{start:new Date(1959,3,3),end:new Date(1959,7,20)},1960:{start:new Date(1960,3,1),end:new Date(1960,7,18)},1987:{start:new Date(1987,3,10),end:new Date(1987,8,11)},1988:{start:new Date(1988,3,8),end:new Date(1988,8,9)}};function Gm(e,t,n){const r=lne[e];if(!r)return!1;const i=new Date(e,t-1,n,0,0,0,0);return i>=r.start&&i<r.end}function cne(e){if(!isFinite(e.getTime()))return 0;const t=e.getUTCFullYear(),n=Date.UTC(t,0,1),i=Math.floor((e.getTime()-n)/864e5)+1,a=e.getUTCHours(),o=e.getUTCMinutes(),l=e.getUTCSeconds(),u=(a-12)/24+o/1440+l/86400,d=2*Math.PI/365*(i-1+u);return 229.18*(75e-6+.001868*Math.cos(d)-.032077*Math.sin(d)-.014615*Math.cos(2*d)-.040849*Math.sin(2*d))}function une(e){return e=(e+540)%360-180,e>=124&&e<=132||e>=129&&e<=146?135:e>=73&&e<=135?120:e>=-161&&e<=-154?-150:e>=-170&&e<-161?-165:e>=-150&&e<-141?-135:e>=-141&&e<-126?-120:e>=-126&&e<-111?-105:e>=-111&&e<-96?-90:e>=-96&&e<-81?-75:Math.round(e/15)*15}function wp(e,t,n=!1){const r=new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),0,0);if(n)return new Date(r.getTime()-1800*1e3);if(t==null||!isFinite(t))return r;let i=t;Math.abs(i)<=Math.PI+1e-6&&(i=i*180/Math.PI),i=(i+540)%360-180;const a=une(i),o=4*(i-a),l=cne(r);return new Date(r.getTime()+(o+l)*60*1e3)}function J4(e){return e.replace(/\D/g,"")}function dne(e,t,n){if(!Number.isFinite(e)||!Number.isFinite(t)||!Number.isFinite(n)||e<1800||e>2200||t<1||t>12||n<1||n>31)return!1;const r=new Date(e,t-1,n);return r.getFullYear()===e&&r.getMonth()+1===t&&r.getDate()===n}function fne(e,t){return!(!Number.isFinite(e)||!Number.isFinite(t)||e<0||e>23||t<0||t>59)}function kf(e){const t=J4(e.trim());if(t.length!==8)return null;const n=Number(t.slice(0,4)),r=Number(t.slice(4,6)),i=Number(t.slice(6,8));return dne(n,r,i)?{y:n,m:r,d:i}:null}function _p(e){const t=e.trim();if(!t||t==="")return null;const n=J4(t);if(n.length!==4)return null;const r=Number(n.slice(0,2)),i=Number(n.slice(2,4));return fne(r,i)?{hh:r,mm:i}:null}function $v(e){const t=e.trim(),n=kf(t);if(!n)return t;const r=String(n.y).padStart(4,"0"),i=String(n.m).padStart(2,"0"),a=String(n.d).padStart(2,"0");return`${r}${i}${a}`}function Bv(e){const t=e.trim();if(t==="")return"";const n=_p(t);if(!n)return t;const r=String(n.hh).padStart(2,"0"),i=String(n.mm).padStart(2,"0");return`${r}${i}`}var Lb={exports:{}},hne=Lb.exports,yD;function mne(){return yD||(yD=1,(function(e,t){(function(n,r){e.exports=r()})(hne,function(){return(function(n){function r(a){if(i[a])return i[a].exports;var o=i[a]={i:a,l:!1,exports:{}};return n[a].call(o.exports,o,o.exports,r),o.l=!0,o.exports}var i={};return r.m=n,r.c=i,r.d=function(a,o,l){r.o(a,o)||Object.defineProperty(a,o,{configurable:!1,enumerable:!0,get:l})},r.n=function(a){var o=a&&a.__esModule?function(){return a.default}:function(){return a};return r.d(o,"a",o),o},r.o=function(a,o){return Object.prototype.hasOwnProperty.call(a,o)},r.p="",r(r.s=0)})([function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(1),o=(function(l){return l&&l.__esModule?l:{default:l}})(a);r.default=o.default,n.exports=r.default},function(n,r,i){function a(W){return W&&W.__esModule?W:{default:W}}Object.defineProperty(r,"__esModule",{value:!0});var o=i(2),l=a(o),u=i(3),d=a(u),h=i(4),p=a(h),b=i(5),y=a(b),S=i(6),_=a(S),k=i(7),A=a(k),N=i(8),j=a(N),C=i(9),D=a(C),P=i(10),$=a(P),U=i(11),Y=a(U),K=i(12),F=a(K),z={lunarInfo:l.default,solarMonth:d.default,gan:p.default,zhi:y.default,animals:_.default,lunarTerm:A.default,lTermInfo:j.default,nStr1:D.default,nStr2:$.default,nStr3:Y.default,nStr4:F.default,lYearDays:function(W){var X,Z=348;for(X=32768;X>8;X>>=1)Z+=z.lunarInfo[W-1900]&X?1:0;return Z+z.leapDays(W)},leapMonth:function(W){return 15&z.lunarInfo[W-1900]},leapDays:function(W){return z.leapMonth(W)?65536&z.lunarInfo[W-1900]?30:29:0},monthDays:function(W,X){return X>12||X<1?-1:z.lunarInfo[W-1900]&65536>>X?30:29},solarDays:function(W,X){if(X>12||X<1)return-1;var Z=X-1;return Z==1?W%4==0&&W%100!=0||W%400==0?29:28:z.solarMonth[Z]},toGanZhi:function(W){return z.gan[W%10]+z.zhi[W%12]},getTerm:function(W,X){if(W<1900||W>2100||X<1||X>24)return-1;var Z=z.lTermInfo[W-1900],G=[parseInt("0x"+Z.substr(0,5)).toString(),parseInt("0x"+Z.substr(5,5)).toString(),parseInt("0x"+Z.substr(10,5)).toString(),parseInt("0x"+Z.substr(15,5)).toString(),parseInt("0x"+Z.substr(20,5)).toString(),parseInt("0x"+Z.substr(25,5)).toString()],J=[G[0].substr(0,1),G[0].substr(1,2),G[0].substr(3,1),G[0].substr(4,2),G[1].substr(0,1),G[1].substr(1,2),G[1].substr(3,1),G[1].substr(4,2),G[2].substr(0,1),G[2].substr(1,2),G[2].substr(3,1),G[2].substr(4,2),G[3].substr(0,1),G[3].substr(1,2),G[3].substr(3,1),G[3].substr(4,2),G[4].substr(0,1),G[4].substr(1,2),G[4].substr(3,1),G[4].substr(4,2),G[5].substr(0,1),G[5].substr(1,2),G[5].substr(3,1),G[5].substr(4,2)];return parseInt(J[X-1])},toChinaYear:function(W){var X=parseInt(W/1e3),Z=parseInt(W%1e3/100),G=parseInt(W%100/10),J=W%10;return z.nStr4[X]+z.nStr4[Z]+z.nStr4[G]+z.nStr4[J]+""},toChinaMonth:function(W){if(W>12||W<1)return-1;var X=z.nStr3[W-1];return X+=""},toChinaDay:function(W){var X;switch(W){case 10:X="";break;case 20:X="";break;case 30:X="";break;default:X=z.nStr2[Math.floor(W/10)],X+=z.nStr1[W%10]}return X},getAnimal:function(W){return z.animals[(W-4)%12]},solar2lunar:function(ce,oe,B){if(ce<1900||ce>2100||ce==1900&&oe==1&&B<31)return-1;if(ce)var G=new Date(ce,parseInt(oe)-1,B);else var G=new Date;var J,_e=0,te=0,ce=G.getFullYear(),oe=G.getMonth()+1,B=G.getDate(),V=(Date.UTC(G.getFullYear(),G.getMonth(),G.getDate())-Date.UTC(1900,0,31))/864e5;for(J=1900;J<2101&&V>0;J++)te=z.lYearDays(J),V-=te;V<0&&(V+=te,J--);var ie=new Date,Q=!1;ie.getFullYear()==ce&&ie.getMonth()+1==oe&&ie.getDate()==B&&(Q=!0);var se=G.getDay(),me=z.nStr1[se];se==0&&(se=7);var he=J,_e=z.leapMonth(J),re=!1;for(J=1;J<13&&V>0;J++)_e>0&&J==_e+1&&re==0?(--J,re=!0,te=z.leapDays(he)):te=z.monthDays(he,J),re==1&&J==_e+1&&(re=!1),V-=te;V==0&&_e>0&&J==_e+1&&(re?re=!1:(re=!0,--J)),V<0&&(V+=te,--J);var Ee=J,we=V+1,le=oe-1,Ue=z.getTerm(ce,3),Fe=z.toGanZhi(ce-4),Ne=new Date(ce,1,Ue).getTime();new Date(ce,le,B).getTime()<Ne&&(Fe=z.toGanZhi(ce-5));var Pe=z.getTerm(ce,2*oe-1),Ge=z.getTerm(ce,2*oe),Oe=z.toGanZhi(12*(ce-1900)+oe+11);B>=Pe&&(Oe=z.toGanZhi(12*(ce-1900)+oe+12));var Me=!1,Be="";Pe==B&&(Me=!0,Be=z.lunarTerm[2*oe-2]),Ge==B&&(Me=!0,Be=z.lunarTerm[2*oe-1]);var lt=Date.UTC(ce,le,1,0,0,0,0)/864e5+25567+10,ue=z.toGanZhi(lt+B-1);return{lYear:he,lMonth:Ee,lDay:we,animal:z.getAnimal(he),yearCn:z.toChinaYear(he),monthCn:(re&&_e===Ee?"":"")+z.toChinaMonth(Ee),dayCn:z.toChinaDay(we),cYear:ce,cMonth:oe,cDay:B,gzYear:Fe,gzMonth:Oe,gzDay:ue,isToday:Q,isLeap:re,nWeek:se,ncWeek:""+me,isTerm:Me,term:Be}},lunar2solar:function(W,X,Z,G){var J=z.leapMonth(W);if(z.leapDays(W),G&&J!=X||W==2100&&X==12&&Z>1||W==1900&&X==1&&Z<31)return-1;var te=z.monthDays(W,X);if(W<1900||W>2100||Z>te)return-1;for(var ce=0,oe=1900;oe<W;oe++)ce+=z.lYearDays(oe);for(var B=0,V=!1,oe=1;oe<X;oe++)B=z.leapMonth(W),V||B<=oe&&B>0&&(ce+=z.leapDays(W),V=!0),ce+=z.monthDays(W,oe);G&&(ce+=te);var ie=Date.UTC(1900,1,30,0,0,0),Q=new Date(864e5*(ce+Z-31)+ie),se=Q.getUTCFullYear(),me=Q.getUTCMonth()+1,he=Q.getUTCDate();return z.solar2lunar(se,me,he)}};r.default=z,n.exports=r.default},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=[19416,19168,42352,21717,53856,55632,91476,22176,39632,21970,19168,42422,42192,53840,119381,46400,54944,44450,38320,84343,18800,42160,46261,27216,27968,109396,11104,38256,21234,18800,25958,54432,59984,28309,23248,11104,100067,37600,116951,51536,54432,120998,46416,22176,107956,9680,37584,53938,43344,46423,27808,46416,86869,19872,42416,83315,21168,43432,59728,27296,44710,43856,19296,43748,42352,21088,62051,55632,23383,22176,38608,19925,19152,42192,54484,53840,54616,46400,46752,103846,38320,18864,43380,42160,45690,27216,27968,44870,43872,38256,19189,18800,25776,29859,59984,27480,23232,43872,38613,37600,51552,55636,54432,55888,30034,22176,43959,9680,37584,51893,43344,46240,47780,44368,21977,19360,42416,86390,21168,43312,31060,27296,44368,23378,19296,42726,42208,53856,60005,54576,23200,30371,38608,19195,19152,42192,118966,53840,54560,56645,46496,22224,21938,18864,42359,42160,43600,111189,27936,44448,84835,37744,18936,18800,25776,92326,59984,27424,108228,43744,37600,53987,51552,54615,54432,55888,23893,22176,42704,21972,21200,43448,43344,46240,46758,44368,21920,43940,42416,21168,45683,26928,29495,27296,44368,84821,19296,42352,21732,53600,59752,54560,55968,92838,22224,19168,43476,42192,53584,62034,54560],n.exports=r.default},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=[31,28,31,30,31,30,31,31,30,31,30,31],n.exports=r.default},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=["","","","","","","","","",""],n.exports=r.default},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=["","","","","","","","","","","",""],n.exports=r.default},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=["","","","","","","","","","","",""],n.exports=r.default},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=["","","","","","","","","","","","","","","","","","","","","","","",""],n.exports=r.default},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=["9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c3598082c95f8c965cc920f","97bd0b06bdb0722c965ce1cfcc920f","b027097bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd0b06bdb0722c965ce1cfcc920f","b027097bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd0b06bdb0722c965ce1cfcc920f","b027097bd097c36b0b6fc9274c91aa","9778397bd19801ec9210c965cc920e","97b6b97bd19801ec95f8c965cc920f","97bd09801d98082c95f8e1cfcc920f","97bd097bd097c36b0b6fc9210c8dc2","9778397bd197c36c9210c9274c91aa","97b6b97bd19801ec95f8c965cc920e","97bd09801d98082c95f8e1cfcc920f","97bd097bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c91aa","97b6b97bd19801ec95f8c965cc920e","97bcf97c3598082c95f8e1cfcc920f","97bd097bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c3598082c95f8c965cc920f","97bd097bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c3598082c95f8c965cc920f","97bd097bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd097bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd097bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd097bd07f595b0b6fc920fb0722","9778397bd097c36b0b6fc9210c8dc2","9778397bd19801ec9210c9274c920e","97b6b97bd19801ec95f8c965cc920f","97bd07f5307f595b0b0bc920fb0722","7f0e397bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c920e","97b6b97bd19801ec95f8c965cc920f","97bd07f5307f595b0b0bc920fb0722","7f0e397bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c91aa","97b6b97bd19801ec9210c965cc920e","97bd07f1487f595b0b0bc920fb0722","7f0e397bd097c36b0b6fc9210c8dc2","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf7f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf7f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf7f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf7f1487f531b0b0bb0b6fb0722","7f0e397bd07f595b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c9274c920e","97bcf7f0e47f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9210c91aa","97b6b97bd197c36c9210c9274c920e","97bcf7f0e47f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c920e","97b6b7f0e47f531b0723b0b6fb0722","7f0e37f5307f595b0b0bc920fb0722","7f0e397bd097c36b0b6fc9210c8dc2","9778397bd097c36b0b70c9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e37f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc9210c8dc2","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e27f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0787b0721","7f0e27f0e47f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9210c91aa","97b6b7f0e47f149b0723b0787b0721","7f0e27f0e47f531b0723b0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9210c8dc2","977837f0e37f149b0723b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e37f5307f595b0b0bc920fb0722","7f0e397bd097c35b0b6fc9210c8dc2","977837f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0721","7f0e37f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc9210c8dc2","977837f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","977837f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","977837f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","977837f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","977837f0e37f14998082b0787b06bd","7f07e7f0e47f149b0723b0787b0721","7f0e27f0e47f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","977837f0e37f14998082b0723b06bd","7f07e7f0e37f149b0723b0787b0721","7f0e27f0e47f531b0723b0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","977837f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e37f1487f595b0b0bb0b6fb0722","7f0e37f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e37f1487f531b0b0bb0b6fb0722","7f0e37f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e37f1487f531b0b0bb0b6fb0722","7f0e37f0e37f14898082b072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e37f0e37f14898082b072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e37f0e366aa89801eb072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f149b0723b0787b0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e37f0e366aa89801eb072297c35","7ec967f0e37f14998082b0723b06bd","7f07e7f0e47f149b0723b0787b0721","7f0e27f0e47f531b0723b0b6fb0722","7f0e37f0e366aa89801eb072297c35","7ec967f0e37f14998082b0723b06bd","7f07e7f0e37f14998083b0787b0721","7f0e27f0e47f531b0723b0b6fb0722","7f0e37f0e366aa89801eb072297c35","7ec967f0e37f14898082b0723b02d5","7f07e7f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e36665b66aa89801e9808297c35","665f67f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e36665b66a449801e9808297c35","665f67f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e36665b66a449801e9808297c35","665f67f0e37f14898082b072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e26665b66a449801e9808297c35","665f67f0e37f1489801eb072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722"],n.exports=r.default},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=["","","","","","","","","","",""],n.exports=r.default},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=["","","",""],n.exports=r.default},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=["","","","","","","","","","","",""],n.exports=r.default},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=["","","","","","","","","","",""],n.exports=r.default}])})})(Lb)),Lb.exports}var Q4=mne();const pne=wi(Q4),gne=TE({__proto__:null,default:pne},[Q4]);function bT(e){return typeof e=="object"&&e!==null}function bne(e){return bT(e)&&"default"in e}function yne(e){return bT(e)&&typeof e.lunar2solar=="function"}function vne(e){if(!bT(e))throw new Error("Invalid lunar2solar result");const t=e.cYear,n=e.cMonth,r=e.cDay,i=e.isLeap;if(typeof t!="number"||typeof n!="number"||typeof r!="number")throw new Error("Invalid lunar2solar fields");return{cYear:t,cMonth:n,cDay:r,isLeap:typeof i=="boolean"?i:void 0}}function xne(e){const t=bne(e)?e.default:e;if(!yne(t))throw new Error("solarlunar.lunar2solar not found");return{lunar2solar:(r,i,a,o)=>{const l=t.lunar2solar(r,i,a,o);return vne(l)}}}const wne=xne(gne);function Wi(e,t,n,r=4,i=0){const a=wne.lunar2solar(e,t,n,!1);return new Date(a.cYear,a.cMonth-1,a.cDay,r,i)}const vD=e=>e<10?`0${e}`:`${e}`;function Ef(e){if(e.calendarType!=="lunar")return e;const t=kf(e.birthDay??"");if(!t)return e;try{const n=Wi(t.y,t.m,t.d,0,0),r=n.getFullYear(),i=n.getMonth()+1,a=n.getDate();return{...e,birthDay:`${r}${vD(i)}${vD(a)}`,calendarType:"solar"}}catch{return e}}function yT(e){const t=e.mingSikType??"/",n=kf(e.birthDay??"");if(!n){const C=e.corrected instanceof Date?e.corrected:new Date(NaN),D=typeof e.ganji=="string"?e.ganji:"",P=typeof e.ganjiText=="string"?e.ganjiText:D,$=typeof e.dayStem=="string"?e.dayStem:"";return{corrected:C,correctedLocal:typeof e.correctedLocal=="string"?e.correctedLocal:"",ganji:D,ganjiText:P,dayStem:$}}let r=n.y,i=n.m,a=n.d;if(e.calendarType==="lunar")try{const C=Wi(r,i,a,0,0);r=C.getFullYear(),i=C.getMonth()+1,a=C.getDate()}catch{}const o=_p(e.birthTime??""),l=!e.birthTime||e.birthTime===""||!o,u=l?4:o.hh,d=l?30:o.mm,h=!e.birthPlace||e.birthPlace.name===""||e.birthPlace.lon===0?127.5:e.birthPlace.lon,p=new Date(r,i-1,a,u,d,0,0),b=!e.birthPlace||typeof e.birthPlace=="object"&&e.birthPlace.name==="",y=wp(p,h,b),S=l?"":y.toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit",hour12:!1}),_=st(y,h),k=St(y,h),A=mt(y,t),N=l?null:Qa(y,t),j=[` : ${_} ${k} ${A}`,N?`${N}`:null].filter(Boolean).join(" ");return{corrected:y,correctedLocal:S,ganji:j,ganjiText:j,dayStem:A.charAt(0)}}function xD(e,t){return e instanceof Date&&!Number.isNaN(e.getTime())?e:t}function Sp(e){return(typeof e=="string"?e.trim():"")===""?"":""}function wD(e){if(typeof e!="string")return null;const t=e.match(/\s*:\s*(.)/);return t?t[1]:null}function _ne(e){const t=wD(e.ganjiText)??wD(e.ganji);if(!t)return"forward";const r=["","","","",""].includes(t),i=Sp(e.gender)==="";return r?i?"forward":"backward":i?"backward":"forward"}function qm(e){const t={...e,birthDay:$v(e.birthDay??""),birthTime:e.birthTime===""?"":Bv(e.birthTime??""),gender:Sp(e.gender),dateObj:xD(e.dateObj,new Date),corrected:xD(e.corrected,new Date(NaN)),correctedLocal:typeof e.correctedLocal=="string"?e.correctedLocal:"",ganjiText:typeof e.ganjiText=="string"?e.ganjiText:"",ganji:typeof e.ganji=="string"?e.ganji:"",dayStem:typeof e.dayStem=="string"?e.dayStem:"",calendarType:e.calendarType==="lunar"?"lunar":"solar",dir:e.dir==="backward"?"backward":"forward"},n=yT(t),r={...t,...n};return{...r,dir:_ne(r)}}function Sne(e){return e===""||e==="/"||e===""?e:"/"}function kne(e){return e==="lunar"?"lunar":"solar"}function Ene(e,t){if(t||!e||e.name==="")return{name:"",lat:0,lon:127.5};const n=Number.isFinite(e.lat)?e.lat:0,r=Number.isFinite(e.lon)?e.lon:127.5;return{name:typeof e.name=="string"&&e.name.trim()?e.name.trim():"",lat:n,lon:r}}function Tne(e,t){const n=typeof e=="string"?e.trim():"";return n?{ok:!0,value:n}:t?{ok:!1,message:" ."}:{ok:!0,value:""}}function vT(e,t){const r=$v(typeof e=="string"?e:""),i=kf(r);if(!i)return{ok:!1,message:"(YYYYMMDD)  ."};if(i.y<1900||i.y>2100)return{ok:!1,message:"(YYYY) 1900~2100  ."};if(t==="solar"){const a=new Date(i.y,i.m-1,i.d);if(a.getFullYear()!==i.y||a.getMonth()+1!==i.m||a.getDate()!==i.d)return{ok:!1,message:"  ."}}else try{Wi(i.y,i.m,i.d,0,0)}catch{return{ok:!1,message:"      ."}}return{ok:!0,value:r}}function xT(e,t){if(t)return{ok:!0,value:""};const r=Bv(typeof e=="string"?e:"");return _p(r)?{ok:!0,value:r}:{ok:!1,message:"  HHmm  ."}}function e6(e,t){const n=t?.requireName??!1,r=Tne(e.name,n);if(!r.ok)return r;const i=kne(e.calendarType),a=vT(e.birthDay,i);if(!a.ok)return a;const o=xT(e.birthTime,e.unknownTime);if(!o.ok)return o;const l=Sne(e.mingSikType),u={id:e.id,name:r.value,birthDay:a.value,birthTime:o.value,gender:Sp(e.gender),sortOrder:e.sortOrder,birthPlace:Ene(e.birthPlace,e.unknownPlace),relationship:e.relationship??"",memo:e.memo??"",folder:e.folder,mingSikType:l,DayChangeRule:l===""?"":"",favorite:e.favorite??!1,deletedAt:e.deletedAt??null,dateObj:e.dateObj??new Date,corrected:new Date(NaN),correctedLocal:"",dayStem:"",ganjiText:"",ganji:"",calendarType:i,dir:"forward"};return{ok:!0,value:qm(u)}}function ql(e,t=0){const n=Ef(e),r=kf(n.birthDay??"");if(!r)throw new Error(`Invalid date: ${e.birthDay}`);const i=_p(n.birthTime??""),a=i?i.hh:0,o=i?i.mm:0,l=new Date(r.y,r.m-1,r.d,a,o,0,0);if(Number.isNaN(l.getTime()))throw new Error(`Invalid date: ${e.birthDay} ${e.birthTime}`);const u=!n.birthPlace||typeof n.birthPlace=="object"&&n.birthPlace.name==="",d=n.birthPlace?.lon??127.5,h=wp(l,d,u);return t!==0?new Date(h.getTime()+t*60*1e3):h}function Ane(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}function nu(e){return[...e].sort((t,n)=>{const r=typeof t.sortOrder=="number"&&Number.isFinite(t.sortOrder)?t.sortOrder:-1,i=typeof n.sortOrder=="number"&&Number.isFinite(n.sortOrder)?n.sortOrder:-1;if(r!==i)return r-i;const a=(t.name??"").toString(),o=(n.name??"").toString(),l=a.localeCompare(o);return l!==0?l:t.id.localeCompare(n.id)})}function Jk(e){if(!Ane(e))return null;const t=typeof e.id=="string"?e.id:null,n=typeof e.user_id=="string"?e.user_id:null;if(!t||!n)return null;const r=o=>typeof o=="number"&&Number.isFinite(o)?o:null,i=o=>typeof o=="string"?o:null,a=o=>typeof o=="boolean"?o:null;return{id:t,user_id:n,name:i(e.name),birth_day:i(e.birth_day),birth_time:i(e.birth_time),gender:i(e.gender),birth_place_name:i(e.birth_place_name),birth_place_lat:r(e.birth_place_lat),birth_place_lon:r(e.birth_place_lon),relationship:i(e.relationship),memo:i(e.memo),folder:i(e.folder),ming_sik_type:i(e.ming_sik_type),day_change_rule:i(e.day_change_rule),calendar_type:i(e.calendar_type),favorite:a(e.favorite),sort_order:typeof e.sort_order=="string"||typeof e.sort_order=="number"?e.sort_order:null,created_at:i(e.created_at),deleted_at:i(e.deleted_at),updated_at:i(e.updated_at)}}function t6(e){const t={name:e.birth_place_name??"",lat:e.birth_place_lat??0,lon:e.birth_place_lon??127.5},n=e.sort_order===null||e.sort_order===void 0?void 0:Number(e.sort_order),r=typeof n=="number"&&Number.isFinite(n)?n:void 0,i={id:e.id,name:e.name??"",birthDay:$v(e.birth_day??""),birthTime:Bv(e.birth_time??""),gender:Sp(e.gender),birthPlace:t,relationship:e.relationship??"",memo:e.memo??"",folder:e.folder??"",mingSikType:["","/",""].includes(e.ming_sik_type)?e.ming_sik_type:"",DayChangeRule:e.day_change_rule===""||e.day_change_rule===""?e.day_change_rule:"",favorite:e.favorite??!1,deletedAt:e.deleted_at??null,sortOrder:r,dateObj:new Date,corrected:new Date(NaN),correctedLocal:"",dayStem:"",ganjiText:"",ganji:"",calendarType:e.calendar_type==="lunar"?"lunar":"solar",dir:"forward"};return qm(i)}function jne(e,t){const n=typeof e.folder=="string"?e.folder.trim():"",r=typeof e.sortOrder=="number"&&Number.isFinite(e.sortOrder)?e.sortOrder:null;return{id:e.id,user_id:t,sort_order:r,folder:n||null,favorite:!!e.favorite,updated_at:new Date().toISOString()}}function _D(e,t){const n=$v(e.birthDay??""),r=Bv(e.birthTime??""),i=e.birthPlace??{name:"",lat:0,lon:127.5},a=typeof e.sortOrder=="number"&&Number.isFinite(e.sortOrder)?e.sortOrder:null;return{id:e.id,user_id:t,name:e.name??null,birth_day:n||null,birth_time:r||null,gender:Sp(e.gender),birth_place_name:i.name??null,birth_place_lat:typeof i.lat=="number"?i.lat:null,birth_place_lon:typeof i.lon=="number"?i.lon:null,relationship:e.relationship??null,memo:e.memo??null,folder:typeof e.folder=="string"?e.folder:null,ming_sik_type:e.mingSikType??null,day_change_rule:e.DayChangeRule??null,calendar_type:e.calendarType??"solar",favorite:e.favorite??!1,deleted_at:e.deletedAt??null,sort_order:a,updated_at:new Date().toISOString()}}const Qk="hm_session_started_at_ms",One=7200*1e3;function n6(){return typeof window>"u"?null:window.localStorage}function Nne(){const e=n6();if(!e)return Date.now();const t=e.getItem(Qk),n=t?Number(t):NaN;if(Number.isFinite(n))return n;const r=Date.now();return e.setItem(Qk,String(r)),r}function Cne(e=Date.now()){const t=n6();if(t)try{t.setItem(Qk,String(e))}catch{}}function Mne(e=Date.now()){const t=Nne();return e-t>=One}const R0="myeongsik-list";function Dne(e){try{return JSON.parse(e)}catch{return null}}async function Pne(e){if(typeof window>"u")return;const t=window.localStorage.getItem(R0);if(!t)return;const n=Dne(t);if(!n){window.localStorage.removeItem(R0);return}const r=n.state??{},i=Array.isArray(r.list)?r.list:[];if(i.length===0){window.localStorage.removeItem(R0);return}const a=await e.getUser();if(!a)return;const o=await e.fetchRows(a.id),l=new Set(o.map(d=>d.id)),u=i.filter(d=>!!d&&typeof d.id=="string"&&d.id.trim()!==""&&!l.has(d.id));for(const d of u)await e.upsertOne(a.id,d);window.localStorage.removeItem(R0)}const Rne=250;function Lne(e){return e.map(t=>{const n=typeof t.folder=="string"?t.folder.trim():"",r=typeof t.sortOrder=="number"&&Number.isFinite(t.sortOrder)?t.sortOrder:"",i=t.favorite?1:0;return`${t.id}:${r}:${n}:${i}`}).join("|")}function Ine(e){if(typeof window>"u")return;const t=window,n="__hm_reorder_flush_installed__";t[n]!==!0&&(t[n]=!0,window.addEventListener("beforeunload",()=>e()),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&e()}))}function $ne(e){let t=null,n=null,r=!1,i="";async function a(){if(!r){r=!0;try{for(;n;){const l=n;if(n=null,l.key&&l.key===i){l.resolve();continue}const u=await e.getUser();if(!u){console.warn("reorder flush skipped: no user"),l.resolve();continue}await e.upsertOrderPatch(u.id,l.list),i=l.key,l.resolve()}}finally{r=!1}}}Ine(()=>{a()});function o(l,u){const d=Lne(l);if(d&&d===i&&!n)return Promise.resolve();if(n)n.key=d,n.list=l;else{let h;const p=new Promise(b=>{h=b});n={key:d,list:l,promise:p,resolve:h}}return typeof window>"u"?(a(),n.promise):(t&&window.clearTimeout(t),u?.immediate?a():t=window.setTimeout(()=>{t=null,a()},Rne),n.promise)}return{queue:o,flushNow:a}}const fr="__UNASSIGNED__",Bne=[" ",""],Ul=e=>typeof e=="string"?e.trim():"",r6=e=>Bne.includes(e);function Dd(e,t){const n=[],r=[];for(const i of e){const a=Ul(i);a&&(t[a]?n.push(a):r.push(a))}return[...n,...r]}function zv(e,t){const n=new Set(t.map(o=>Ul(o)).filter(o=>o!=="")),r=new Set,i=Object.create(null),a=(o,l)=>{i[o]||(i[o]=[]),i[o].push(l)};for(const o of e){const l=String(o.id??"");if(!l||r.has(l))continue;r.add(l);const u=Ul(o.folder),d=!u||r6(u)?fr:n.has(u)?u:fr;a(d,o)}i[fr]||(i[fr]=[]);for(const o of t){const l=Ul(o);l&&(i[l]||(i[l]=[]))}return i}function wT(e,t){const n=[];for(const i of t){const a=Ul(i);if(!a)continue;const o=e[a];Array.isArray(o)&&n.push(...o)}const r=e[fr];return Array.isArray(r)&&r.length&&n.push(...r),n}function zne(e){const{list:t,orderedFolders:n,source:r,destination:i}=e,a=zv(t,n),o=r.droppableId===fr?fr:r.droppableId,l=i.droppableId===fr?fr:i.droppableId,u=[...a[o]??[]],d=o===l?u:[...a[l]??[]],h=u[r.index];if(!h)return{nextList:t,changedIds:[]};u.splice(r.index,1);const b=o!==l&&l===fr,y=Math.max(0,Math.min(i.index,d.length)),S=b?d.length:y;o===l?u.splice(S,0,h):d.splice(S,0,h);const _=String(h.id),k=new Set([_]),A={...h,folder:l===fr?"":l};return a[o]=u,a[l]=o===l?u:d,a[l]=(a[l]??[]).map(N=>String(N.id)===_?A:N),{nextList:wT(a,n),changedIds:Array.from(k)}}function Une(e){const{list:t,orderedFolders:n,targetId:r,nextFolder:i}=e,a=zv(t,n),o=[...n.map(A=>Ul(A)),fr].filter(Boolean);let l=null,u=-1;for(const A of o){const j=(a[A]??[]).findIndex(C=>String(C.id)===r);if(j>=0){l=A,u=j;break}}if(!l||u<0)return{nextList:t,changedIds:[]};const d=[...a[l]??[]],h=d[u];if(!h)return{nextList:t,changedIds:[]};d.splice(u,1);const p=Ul(i),b=!p||r6(p)?fr:p,y=l!==b,S=y?[...a[b]??[]]:d,_=String(h.id),k={...h,folder:b===fr?"":b};return y?S.push(k):d.splice(u,0,k),a[l]=d,a[b]=y?S:d,{nextList:wT(a,n),changedIds:[_]}}function Fne(e){const{list:t,targetId:n,orderedFolders:r}=e,i=zv(t,r);let a=null,o=null;const l=[...r.map(y=>Ul(y)),fr].filter(Boolean);for(const y of l){const S=i[y]??[],_=S.findIndex(k=>String(k.id)===n);if(_>=0){a=y,o=S[_]??null;break}}if(!a||!o)return{nextList:t,nextItem:null};const u=[...i[a]??[]],d=u.findIndex(y=>String(y.id)===n);if(d<0)return{nextList:t,nextItem:null};const h=u[d],p=!h.favorite,b={...h,favorite:p};return u.splice(d,1),p?u.unshift(b):u.push(b),i[a]=u,{nextList:wT(i,r),nextItem:b}}function Hne(e){const{list:t,folderName:n}=e,r=n.trim();if(!r)return{nextList:t,changedIds:[]};const i=[],a=[],o=[];for(const l of t){if((l.folder??"").trim()!==r){a.push(l);continue}i.push(String(l.id)),o.push({...l,folder:""})}return{nextList:[...a,...o],changedIds:i}}function i6(e){return e.trim().length>0}const Wh=e=>e.toLowerCase().replace(/\s+/g," ").trim(),Gne=e=>e.replace(/\D/g,""),qne=e=>{const t=typeof e.birthDay=="string"?e.birthDay:"",n=Gne(t);if(n.length!==8)return t?[t]:[];const r=n.slice(0,4),i=n.slice(4,6),a=n.slice(6,8);return[n,`${r}-${i}-${a}`,`${r}.${i}.${a}`,`${r}/${i}/${a}`,`${r}${i}${a}`]},Yne=e=>{const t=[],n=typeof e.ganji=="string"?e.ganji:"",r=typeof e.ganjiText=="string"?e.ganjiText:"",i=typeof e.dayStem=="string"?e.dayStem:"";return n&&t.push(n),r&&t.push(r),i&&t.push(i),t},Kne=e=>{const t=[],n=typeof e.memo=="string"?e.memo:"",r=typeof e.relationship=="string"?e.relationship:"",i=e.birthPlace&&typeof e.birthPlace=="object"&&typeof e.birthPlace.name=="string"?e.birthPlace.name:"";return n&&t.push(n),r&&t.push(r),i&&t.push(i),t},SD=(e,t,n)=>{const r=Wh(t);if(!r)return!0;const i=Wh(typeof e.name=="string"?e.name:""),a=qne(e).map(Wh),o=Yne(e).map(Wh),l=Kne(e).map(Wh),u=h=>h.includes(r),d=h=>h.some(u);switch(n){case"name":return u(i);case"birth":return d(a);case"ganji":return d(o);case"memo":return d(l);case"all":default:return u(i)||d(a)||d(o)||d(l)}};function Wne(e){const{search:t,searchMode:n,orderedFolders:r,grouped:i,unassignedItems:a}=e;if(!i6(t)){const d={};for(const h of r){const p=typeof h=="string"?h.trim():"";p&&(d[p]=i[p]??[])}return{filteredGrouped:d,filteredUnassigned:a??[],totalMatches:(a?.length??0)+r.reduce((h,p)=>h+(i[p]?.length??0),0)}}const o={};let l=0;for(const d of r){const h=typeof d=="string"?d.trim():"";if(!h)continue;const b=(i[h]??[]).filter(y=>SD(y,t,n));o[h]=b,l+=b.length}const u=(a??[]).filter(d=>SD(d,t,n));return l+=u.length,{filteredGrouped:o,filteredUnassigned:u,totalMatches:l}}function Vne(e){return"source"in e&&"destination"in e?e:{orderedFolders:e.orderedFolders,source:{droppableId:(e.sourceFolder??fr).toString(),index:e.sourceIndex},destination:{droppableId:(e.destinationFolder??fr).toString(),index:e.destinationIndex}}}function Zne(e,t){const n=String(t.eventType??""),r=Jk(t.new),i=Jk(t.old),a=r??i;if(!a)return e;if(n==="DELETE"||a.deleted_at)return e.filter(d=>d.id!==a.id);const o=t6(a),u=e.some(d=>d.id===o.id)?e.map(d=>d.id===o.id?o:d):[...e,o];return nu(u)}async function Xne(e){if(!e)return;const t=Ie;if(typeof t.removeChannel=="function"){await t.removeChannel(e);return}if(typeof t.removeSubscription=="function"){await t.removeSubscription(e);return}}function Jne(){return["id","user_id","name","birth_day","birth_time","gender","birth_place_name","birth_place_lat","birth_place_lon","relationship","memo","folder","ming_sik_type","day_change_rule","calendar_type","favorite","deleted_at","created_at","updated_at","sort_order"].join(", ")}function Qne(){return{async getUser(){const{data:e,error:t}=await Ie.auth.getUser();return t||!e.user?null:{id:e.user.id}},async fetchRows(e){const{data:t,error:n}=await Ie.from("myeongsik").select(Jne()).eq("user_id",e).is("deleted_at",null).order("sort_order",{ascending:!0,nullsFirst:!0}).order("created_at",{ascending:!1});return n||!t?[]:(Array.isArray(t)?t:[]).map(i=>Jk(i)).filter(i=>i!==null).filter(i=>i.user_id===e)},async upsertOne(e,t){const n=_D(t,e),{error:r}=await Ie.from("myeongsik").upsert(n,{onConflict:"id"});r&&console.error("myeongsik upsert error:",r)},async updateOne(e,t,n){const r=_D(n,e),{error:i}=await Ie.from("myeongsik").update(r).eq("id",t);i&&console.error("myeongsik update error:",i)},async softDelete(e){const t=new Date().toISOString(),{error:n}=await Ie.from("myeongsik").update({deleted_at:t}).eq("id",e);n&&console.error("myeongsik softDelete error:",n)},async upsertOrderPatch(e,t){const n=t.map(i=>jne(i,e)),{error:r}=await Ie.from("myeongsik").upsert(n,{onConflict:"id"});r&&console.error("myeongsik orderPatch upsert error:",r)},async subscribe(e,t,n){const r=Ie.channel(`myeongsik:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"myeongsik",filter:`user_id=eq.${e}`},a=>{typeof a!="object"||a===null||t(a)}).subscribe(a=>{n&&n(String(a))});return{async unsubscribe(){await Xne(r)}}}}}function ere(e){return e.trim().toLowerCase().replace(/\s+/g,"").replace(/-/g,"_")}function vm(e){if(!e)return"FREE";const t=ere(e);return t==="free"?"FREE":t==="basic"?"BASIC":t==="pro"?"PRO":t==="prompt_hidden"||t==="prompt_hide"||t==="hidden"||t==="hide"||t==="prompt_locked"||t==="prompt_lock"||t==="locked"||t==="lock"?"FREE":t==="prompt_full"||t==="full"?"PRO":t==="ms_all"||t==="msall"||t==="basic_3"||t==="basic3"||t==="basic_5"||t==="basic5"||t==="basic_10"||t==="basic10"?"BASIC":t==="pro_select"||t==="proselect"?"PRO":"FREE"}function e2(e){switch(e){case"FREE":return{maxMyeongsik:1,canManageMyeongsik:!0,canUseLuckTabs:!0,canUseMultiMode:!0,canUseAllPrompts:!1,canUseAdvancedReport:!1,canRemoveAds:!1};case"BASIC":return{maxMyeongsik:9999,canManageMyeongsik:!0,canUseLuckTabs:!0,canUseMultiMode:!0,canUseAllPrompts:!0,canUseAdvancedReport:!0,canRemoveAds:!1};case"PRO":return{maxMyeongsik:null,canManageMyeongsik:!0,canUseLuckTabs:!0,canUseMultiMode:!0,canUseAllPrompts:!0,canUseAdvancedReport:!0,canRemoveAds:!0}}}const L0={plan:"FREE",maxMyeongsik:1,canManageMyeongsik:!0,canUseLuckTabs:!0,canUseMultiMode:!0,canUseAllPrompts:!1,canUseAdvancedReport:!1,canRemoveAds:!1,canUseMyoViewer:!1,startsAt:null,expiresAt:null};function tre(e,t){if(typeof e=="number"&&Number.isFinite(e))return Math.floor(e);if(typeof e=="string"&&e.trim()!==""){const n=Number(e);return Number.isFinite(n)?Math.floor(n):t}return t}function kD(e){if(typeof e!="string"||e.trim()==="")return null;const t=new Date(e);return Number.isNaN(t.getTime())?null:t}function ED(e,t,n=Date.now()){return!(e&&e.getTime()>n||t&&t.getTime()<=n)}function nre(e){return e?e.can_use_myo_viewer===!0:!1}async function rre(e){const{data:t,error:n}=await Ie.from("user_entitlements").select("plan,max_myeongsik,starts_at,expires_at,can_use_myo_viewer").eq("user_id",e).maybeSingle();return n?null:t??null}const dn=Fo((e,t)=>({loaded:!1,loading:!1,userId:null,...L0,reset:()=>{e({loaded:!1,loading:!1,userId:null,...L0})},loadFromServer:async n=>{if(!t().loading){e({loading:!0});try{const{data:i,error:a}=await Ie.auth.getUser(),o=i.user?.id??null;if(a||!o){e({...L0,loaded:!0,userId:null});return}const l=t();if(!n?.force&&l.loaded&&l.userId===o)return;const u=await rre(o);if(!u){const N=e2("FREE");e({loaded:!0,userId:o,plan:"FREE",maxMyeongsik:N.maxMyeongsik===null?9999:N.maxMyeongsik,canManageMyeongsik:N.canManageMyeongsik,canUseLuckTabs:N.canUseLuckTabs,canUseMultiMode:N.canUseMultiMode,canUseAllPrompts:N.canUseAllPrompts,canUseAdvancedReport:N.canUseAdvancedReport,canRemoveAds:N.canRemoveAds,canUseMyoViewer:!1,startsAt:null,expiresAt:null});return}const d=kD(u.starts_at??null),h=kD(u.expires_at??null),p=ED(d,h),b=vm(u.plan??null),y=p?b:"FREE",S=e2(y),_=S.maxMyeongsik===null?9999:S.maxMyeongsik,k=tre(u.max_myeongsik,_),A=Math.max(1,Math.max(k,_));e({loaded:!0,userId:o,plan:y,maxMyeongsik:A,canManageMyeongsik:S.canManageMyeongsik,canUseLuckTabs:S.canUseLuckTabs,canUseMultiMode:S.canUseMultiMode,canUseAllPrompts:S.canUseAllPrompts,canUseAdvancedReport:S.canUseAdvancedReport,canRemoveAds:S.canRemoveAds,canUseMyoViewer:nre(u),startsAt:d,expiresAt:h})}catch(i){console.error("loadFromServer(entitlements) exception:",i),e({...L0,loaded:!0,userId:null})}finally{e({loading:!1})}}},isActiveNow:()=>{const{startsAt:n,expiresAt:r}=t();return ED(n,r)},getRemainingMs:n=>{if(!n)return null;const r=n.getTime()-Date.now();return r>0?r:0},formatRemaining:n=>{const r=Math.floor(n/1e3),i=r%60,a=Math.floor(r/60),o=a%60,l=Math.floor(a/60),u=l%24,d=Math.floor(l/24),h=[];return d>0&&h.push(`${d}`),u>0&&h.push(`${u}`),d===0&&o>0&&h.push(`${o}`),h.length===0&&h.push(`${i}`),h.join(" ")},canAddMyeongsik:()=>({ok:!0}),canManageNow:()=>{const n=t();return n.loaded&&n.isActiveNow()&&n.canManageMyeongsik},canUseLuckTabsNow:()=>{const n=t();return n.loaded&&n.isActiveNow()&&n.canUseLuckTabs},canUseMultiModeNow:()=>{const n=t();return n.loaded&&n.isActiveNow()&&n.canUseMultiMode},canUseAllPromptsNow:()=>{const n=t();return n.loaded&&n.isActiveNow()&&n.canUseAllPrompts},canUseAdvancedReportNow:()=>{const n=t();return n.loaded&&n.isActiveNow()&&n.canUseAdvancedReport},shouldShowAdsNow:()=>{const n=t();return!n.loaded||!n.isActiveNow()?!0:!n.canRemoveAds},canUseMyoViewerNow:()=>{const n=t();return n.loaded&&n.canUseMyoViewer}})),_T="guest_myeongsik_v1";function a6(e){return typeof e=="object"&&e!==null}function t2(e,t){if(typeof e=="number"&&Number.isFinite(e))return e;if(typeof e=="string"&&e.trim()!==""){const n=Number(e);if(Number.isFinite(n))return n}return t}function Ri(e,t=""){return typeof e=="string"?e:t}function ire(e,t=!1){return typeof e=="boolean"?e:t}function are(e){return a6(e)?{name:Ri(e.name,""),lat:t2(e.lat,0),lon:t2(e.lon,0)}:{name:"",lat:0,lon:0}}function ore(e){return{id:e.id,sortOrder:typeof e.sortOrder=="number"?e.sortOrder:1,name:e.name??"",birthDay:e.birthDay??"",birthTime:e.birthTime??"",gender:e.gender??"",birthPlace:e.birthPlace??{name:"",lat:0,lon:0},relationship:e.relationship??"",memo:e.memo??"",folder:e.folder??"",mingSikType:e.mingSikType??"/",DayChangeRule:e.DayChangeRule??"",favorite:!!e.favorite,calendarType:e.calendarType??"solar",dir:e.dir??"forward"}}function sre(e){if(!a6(e))return null;const t={id:Ri(e.id,""),sortOrder:t2(e.sortOrder,1),name:Ri(e.name,""),birthDay:Ri(e.birthDay,""),birthTime:Ri(e.birthTime,""),gender:Ri(e.gender,""),birthPlace:are(e.birthPlace),relationship:Ri(e.relationship,""),memo:Ri(e.memo,""),folder:Ri(e.folder,""),mingSikType:Ri(e.mingSikType,"/"),DayChangeRule:Ri(e.DayChangeRule,""),favorite:ire(e.favorite,!1),calendarType:Ri(e.calendarType,"solar"),dir:Ri(e.dir,"forward")};return t.id?qm(t):null}function o6(){try{const e=localStorage.getItem(_T);if(!e)return[];const t=JSON.parse(e);if(!Array.isArray(t))return[];const n=t.map(sre).filter(r=>r!==null);return nu(n)}catch{return[]}}function Nl(e){try{const t=e.map(ore);localStorage.setItem(_T,JSON.stringify(t))}catch{}}function s6(){try{localStorage.removeItem(_T)}catch{}}const _s=Fo(e=>({open:!1,reason:"HEADER",openWith:t=>e({open:!0,reason:t}),close:()=>e({open:!1})})),zn=Qne(),lre=$ne(zn);function Uc(){const t=dn.getState().canManageNow();return t||console.warn("[myeongsik] blocked: canManageNow=false"),t}function cre(e){const n=dn.getState().canAddMyeongsik(e);return n.ok||console.warn("[myeongsik] blocked: canAddMyeongsik",n.message),n.ok}async function TD(e){const t=o6();if(t.length)try{for(const n of t)await zn.upsertOne(e,n);s6()}catch(n){console.warn("[myeongsik] migrateGuestListToServerIfAny failed:",n)}}const yn=Fo((e,t)=>({loading:!1,loaded:!1,loadedUserId:null,realtimeReady:!1,list:[],currentId:null,_rtSub:null,_rtUserId:null,getCurrent:()=>{const{list:n,currentId:r}=t();return r?n.find(i=>i.id===r)??null:null},setCurrentId:n=>e({currentId:n}),startRealtime:async()=>{if(typeof window>"u")return;if(Mne()){Cne(Date.now()),window.location.reload();return}const n=await zn.getUser();if(!n){await t().stopRealtime(),e({realtimeReady:!1});return}if(t()._rtUserId===n.id&&t()._rtSub){e({realtimeReady:!0});return}await t().stopRealtime();const r=await zn.subscribe(n.id,i=>{e(a=>({list:Zne(a.list,i)}))},i=>{i==="SUBSCRIBED"&&e({realtimeReady:!0})});e({_rtSub:r,_rtUserId:n.id})},stopRealtime:async()=>{const n=t()._rtSub;if(n)try{await n.unsubscribe()}catch(r){console.warn("stopRealtime error",r)}e({_rtSub:null,_rtUserId:null,realtimeReady:!1})},loadFromServer:async()=>{if(!t().loading){e({loading:!0});try{const n=await zn.getUser(),r=t();if(n&&r.loaded&&r.loadedUserId===n.id){e({loading:!1});return}if(!n){const u=o6(),d=u[0]?.id??null;e({list:u,currentId:d,loaded:!0,loadedUserId:null}),await t().stopRealtime();return}await TD(n.id);const i=await zn.fetchRows(n.id),a=nu(i.map(t6)),o=t().currentId,l=o&&a.some(u=>u.id===o)?o:a[0]?.id??null;e({list:a,currentId:l,loaded:!0,loadedUserId:n.id}),await t().startRealtime()}catch(n){console.error("useMyeongSikStore.loadFromServer exception:",n)}finally{e({loading:!1})}}},migrateLocalToServer:async()=>{try{await Pne(zn);const n=await zn.getUser();n&&await TD(n.id)}catch(n){console.error("useMyeongSikStore.migrateLocalToServer exception:",n)}},add:async n=>{const r=await zn.getUser(),i=t().list.length;if(!cre(i)){r||_s.getState().openWith("ADD_LIMIT");return}const a=(i||0)+1,o={...n,sortOrder:n.sortOrder??a},l=qm(o),u=t().list,d=nu([...u,l]),h=t().currentId??l.id;if(e({list:d,currentId:h}),!r){Nl(d),d.length===1&&_s.getState().openWith("PERSIST_SAVE");return}await zn.upsertOne(r.id,l)},update:async(n,r)=>{const i=await zn.getUser();if(i&&!Uc())return;const a=t().list.find(u=>u.id===n);if(!a)return;const o=qm({...a,...r}),l=nu(t().list.map(u=>u.id===n?o:u));if(e({list:l}),!i){Nl(l);return}await zn.updateOne(i.id,n,o)},remove:async n=>{const r=await zn.getUser();if(r&&!Uc())return;const a=t().list.filter(l=>l.id!==n),o=t().currentId===n?a[0]?.id??null:t().currentId;if(e({list:a,currentId:o}),!r){Nl(a);return}await zn.softDelete(n)},moveItemByDnD:async n=>{const r=t().list,i=Vne(n),o=zne({list:r,orderedFolders:i.orderedFolders,source:i.source,destination:i.destination}).nextList;e({list:o});const l=await zn.getUser();if(l&&!Uc()){e({list:r});return}if(!l){Nl(o);return}await t().reorder(o)},applyNextList:async n=>{const r=t().list;e({list:n});const i=await zn.getUser();if(i&&!Uc()){e({list:r});return}if(!i){Nl(n);return}await t().reorder(n)},toggleFavoriteWithReorder:async(n,r)=>{const i=await zn.getUser();if(i&&!Uc())return;const o=Fne({list:t().list,targetId:n,orderedFolders:r}).nextList;if(e({list:o}),!i){Nl(o);return}await t().reorder(o)},unsetFolderForFolder:async n=>{const r=await zn.getUser();if(r&&!Uc())return;const i=(n??"").trim();if(!i)return;const a=t().list,o=Hne({list:a,folderName:i}),l=nu(o.nextList),u=new Set(o.changedIds);if(u.size===0)return;if(e({list:l}),!r){Nl(l);return}const d=l.filter(h=>u.has(h.id));await zn.upsertOrderPatch(r.id,d)},reorder:async n=>{const r=await zn.getUser();if(r&&!Uc())return;const i=n.map((o,l)=>({...o,sortOrder:l+1})),a=nu(i);if(e({list:a}),!r){Nl(a);return}await lre.queue(a)},clear:()=>{e({currentId:null,list:[],loaded:!1,loadedUserId:null}),s6()}})),AD="__custom__",I0=[{value:"",label:" (1 )"},{value:"/",label:" / "},{value:"",label:""},{value:"",label:""},{value:"",label:""},{value:"",label:""},{value:"",label:""}],l6=({value:e,onChange:t})=>{const[n,r]=w.useState(I0),[i,a]=w.useState(""),[o,l]=w.useState(!1),[u,d]=w.useState(""),[h,p]=w.useState(!1),{list:b}=yn(),y=(e??i??"").trim(),S=y==="",_=b.some(P=>(P.relationship??"").trim()===""),k=_&&!S?n.filter(P=>P.value!==""):n,A=w.useMemo(()=>{const P=k.find($=>$.value==="");return P?[P,...k.filter($=>$.value!=="")]:k},[k]);w.useEffect(()=>{e!==void 0&&a(e)},[e]),w.useEffect(()=>{y||_||(a(""),t?.(""))},[y,_,t]);const N=P=>{const $=P.target.value;$===AD?(l(!0),a(""),t?.("")):(l(!1),d(""),a($),t?.($))};w.useEffect(()=>{const P=localStorage.getItem("relationshipOptions");if(P)try{const $=JSON.parse(P),U=new Set,Y=[...$,...I0].filter(K=>!K||!K.value||U.has(K.value)?!1:(U.add(K.value),!0));r(Y)}catch{r(I0)}},[]),w.useEffect(()=>{(async()=>{const{data:{user:$},error:U}=await Ie.auth.getUser();if(U||!$)return;const{data:Y,error:K}=await Ie.from("user_settings").select("payload").eq("user_id",$.id).single();if(K&&K.code!=="PGRST116"){console.error("load relationships settings error",K.message);return}const F=Y?.payload?.relationshipOptions;if(!Array.isArray(F))return;const z=F.map(W=>W&&typeof W=="object"&&typeof W.value=="string"&&typeof W.label=="string"?{value:W.value,label:W.label}:typeof W=="string"?{value:W,label:W}:null).filter(W=>!!W);z.length&&r(W=>{const X=new Set,Z=[...z,...W,...I0].filter(G=>X.has(G.value)?!1:(X.add(G.value),!0));return localStorage.setItem("relationshipOptions",JSON.stringify(Z)),Z})})()},[]),w.useEffect(()=>{localStorage.setItem("relationshipOptions",JSON.stringify(n)),(async()=>{const{data:{user:$},error:U}=await Ie.auth.getUser();if(U||!$)return;const{data:Y,error:K}=await Ie.from("user_settings").select("payload").eq("user_id",$.id).single();if(K&&K.code!=="PGRST116"){console.error("load relationships settings error",K.message);return}const F={...Y?.payload??{},relationshipOptions:n},{error:z}=await Ie.from("user_settings").upsert({user_id:$.id,payload:F,updated_at:new Date().toISOString()});z&&console.error("save relationships settings error",z.message)})()},[n]);const j=()=>{const P=u.trim();if(!P)return;const $={value:P,label:P};r(U=>[...U,$]),a(P),t?.(P),d(""),l(!1)},C=P=>{r(n.filter($=>$.value!==P)),i===P&&a("")},D=P=>{if(!P.destination)return;const $=Array.from(n),[U]=$.splice(P.source.index,1);$.splice(P.destination.index,0,U),r($)};return g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"rel_set flex items-center gap-2",children:[g.jsxs("select",{name:"relationship",id:"relationship",value:i,onChange:N,children:[g.jsx("option",{value:"",hidden:!0,children:" "}),A.map(P=>g.jsx("option",{value:P.value,children:P.label},P.value)),g.jsx("option",{value:AD,children:" "})]}),g.jsx("button",{type:"button",onClick:()=>p(!0),className:"btn_style",children:" "})]}),o&&!h&&g.jsxs("div",{className:"rel_set flex items-center mt-2 gap-2",children:[g.jsx("input",{type:"text",placeholder:"  ",value:u,onChange:P=>d(P.target.value)}),g.jsx("button",{type:"button",onClick:j,className:"btn_style",children:" "})]}),h&&g.jsxs("div",{className:"p-3 border mt-2 rounded bg-gray-50 dark:bg-neutral-900",children:[g.jsx("h4",{className:"font-bold mb-2",children:" "}),g.jsx(xp,{onDragEnd:D,children:g.jsx(Sf,{droppableId:"relList",children:P=>g.jsxs("ul",{ref:P.innerRef,...P.droppableProps,className:"space-y-1",children:[n.map(($,U)=>g.jsx(_f,{draggableId:$.value,index:U,children:Y=>g.jsxs("li",{ref:Y.innerRef,...Y.draggableProps,...Y.dragHandleProps,className:"flex justify-between items-center bg-white dark:bg-neutral-800 p-2 rounded border text-sm desk:text-base",children:[g.jsx("span",{className:"cursor-grab mr-2",children:""}),g.jsx("span",{className:"flex-1 pr-1",children:$.label}),g.jsx("button",{type:"button",className:"text-red-500 cursor-pointer",onClick:()=>C($.value),children:""})]})},$.value)),P.placeholder]})})}),g.jsx("button",{type:"button",onClick:()=>p(!1),className:"w-full btn_style mt-2",children:""})]})]})},bn=" ",c6=["","","","","",""],u6="ms_folders",d6="ms_folder_order",jD="ms_folder_favs",n2="ms_disabled_presets",Yl="myeoun:folder-updated";function cu(e){if(e!==bn)return e||void 0}function Uv(e){if(typeof window>"u")return[];const t=window.localStorage.getItem(e);if(!t)return[];try{const n=JSON.parse(t);return Array.isArray(n)?n.filter(r=>typeof r=="string"):[]}catch{return[]}}function ST(e,t){if(!(typeof window>"u"))try{window.localStorage.setItem(e,JSON.stringify(t))}catch{}}function ure(){const e=Uv(n2);return c6.filter(t=>!e.includes(t))}function kT(){return Uv(u6)}function ET(e){const t=Array.isArray(e)?e.filter(n=>typeof n=="string"&&n.trim()!==""):[];ST(u6,t),typeof window<"u"&&window.dispatchEvent(new Event(Yl))}function my(){const e=ure(),t=kT(),n=new Set,r=[];for(const i of[...e,...t])n.has(i)||(n.add(i),r.push(i));return r}function dre(){return[bn,...my()]}function f6(e){const t=e.trim();if(!t||t===bn)return;const n=kT();if(n.includes(t))return;const r=[...n,t];ET(r)}function fre(e){const t=kT(),n=t.filter(r=>r!==e);n.length!==t.length&&ET(n)}function hre(e){const t=Uv(n2);if(t.includes(e))return;const n=[...t,e];ST(n2,n),typeof window<"u"&&window.dispatchEvent(new Event(Yl))}function py(){return Uv(d6)}function Pd(e){ST(d6,e),typeof window<"u"&&window.dispatchEvent(new Event(Yl))}function Am(e,t){const n=new Set(e),r=[];for(const i of t)n.has(i)&&!r.includes(i)&&r.push(i);for(const i of e)r.includes(i)||r.push(i);return r}function mre(e){return Array.from(new Set(e))}function $0(e){const t=e.filter(n=>n!==bn);return{rest:t,withUnassigned:[bn,...t]}}function pre(e,t){return Am(t,e)}function gre({value:e,onChange:t}){const[n,r]=w.useState([bn]),[i,a]=w.useState(!1),[o,l]=w.useState(""),[u,d]=w.useState(!1),h=w.useCallback(async k=>{const{data:{user:A},error:N}=await Ie.auth.getUser();if(N||!A)return;const j=k.map((D,P)=>({user_id:A.id,folder_name:D,sort_order:P+1,updated_at:new Date().toISOString()})),{error:C}=await Ie.from("user_folder_order").upsert(j,{onConflict:"user_id,folder_name"});C&&console.error("save folder order error",C.message)},[]),p=w.useCallback(()=>{if(typeof window>"u")return;const k=mre(dre()),A=k.includes(bn)?k:[bn,...k],{rest:N}=$0(A),j=py(),C=pre(j,N),D=[bn,...C];r(D),j.length===C.length&&j.every(($,U)=>$===C[U])||(Pd(C),h(C))},[h]);w.useEffect(()=>{if(p(),typeof window<"u"){const k=()=>p();return window.addEventListener(Yl,k),()=>window.removeEventListener(Yl,k)}},[p]);const b=w.useMemo(()=>e||bn,[e]),y=k=>{const{rest:A}=$0(k);Pd(A),h(A)},S=k=>{const{source:A,destination:N}=k;if(!N||N.index===A.index)return;const{rest:j}=$0(n),C=Array.from(j),[D]=C.splice(A.index,1);C.splice(N.index,0,D);const P=[bn,...C];r(P),y(P)},_=k=>{const A=cu(k);A&&(f6(A),p())};return g.jsxs("div",{className:"space-y-2",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("select",{className:"flex-1 border rounded-lg p-2",value:i?"__custom__":b,onChange:k=>{const A=k.target.value;if(A==="__custom__"){a(!0),t(void 0);return}a(!1),t(cu(A))},children:[n.map(k=>g.jsx("option",{value:k,children:k},k)),g.jsx("option",{value:"__custom__",children:"+   "})]}),g.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-neutral-200 hover:bg-neutral-300 dark:bg-neutral-800 dark:hover:bg-neutral-700 text-sm cursor-pointer",onClick:()=>d(k=>!k),children:u?" ":" "})]}),i&&g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("input",{type:"text",value:o,onChange:k=>l(k.target.value),placeholder:"  ",className:"flex-1 border rounded-lg p-2"}),g.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-neutral-800 hover:bg-neutral-700 text-sm text-white cursor-pointer",onClick:()=>{const k=o.trim();k&&(_(k),t(cu(k)),a(!1),l(""))},children:""})]}),u&&g.jsxs("div",{className:"p-3 border rounded bg-neutral-50 dark:bg-neutral-900",children:[g.jsx("h4",{className:"font-bold mb-2 text-s",children:"  "}),g.jsxs("div",{className:"flex items-center justify-between bg-white dark:bg-neutral-800 p-2 rounded border text-sm mb-2",children:[g.jsx("span",{className:"opacity-60 select-none",children:""}),g.jsxs("span",{className:"flex-1 px-2",children:[bn," ()"]})]}),g.jsx(xp,{onDragEnd:S,children:g.jsx(Sf,{droppableId:"folderList",direction:"vertical",type:"FOLDER",children:k=>g.jsxs("ul",{ref:k.innerRef,...k.droppableProps,className:"space-y-1",children:[$0(n).rest.map((A,N)=>g.jsx(_f,{draggableId:A,index:N,children:j=>g.jsxs("li",{ref:j.innerRef,...j.draggableProps,...j.dragHandleProps,className:"flex items-center justify-between bg-white dark:bg-neutral-800 p-2 rounded border text-sm",children:[g.jsx("span",{className:"cursor-grab select-none mr-2",children:""}),g.jsx("span",{className:"flex-1 pr-1",children:A})]})},A)),k.placeholder]})})})]}),g.jsxs("p",{className:"text-xs text-gray-500",children:['   "',bn,'" .      .']})]})}function h6({message:e,onClose:t,ms:n=2e3}){return w.useEffect(()=>{const r=setTimeout(t,n);return()=>clearTimeout(r)},[t,n]),g.jsx("div",{className:"fixed top-4 left-1/2 -translate-x-1/2 bg-black text-white px-4 py-2 rounded-lg shadow-lg z-[9999]",children:e})}const OD=[{key:"name",label:"",placeholder:" ",type:"text"},{key:"birthDay",label:"",placeholder:": 19900101",type:"tel"},{key:"birthTime",label:"",placeholder:": 1524",type:"tel"},{key:"mingSikType",label:" ",type:"mingrule"},{key:"gender",label:"",type:"radio"},{key:"birthPlace",label:"",type:"place"},{key:"relationship",label:"",type:"relationship"},{key:"folder",label:" ",type:"folder"},{key:"memo",label:"",placeholder:" ",type:"textarea"}],bre=[{value:"solar",label:"",id:"calendarType_solar"},{value:"lunar",label:"",id:"calendarType_lunar"}],yre=["","/",""],vre=["",""],m6={gender:"",mingSikType:"/",DayChangeRule:"",calendarType:"solar"};function xre(e,t,n){return n==="ArrowRight"||n==="ArrowDown"?(e+1)%t:n==="ArrowLeft"||n==="ArrowUp"?(e-1+t)%t:n==="Home"?0:n==="End"?t-1:e}function wre(e){const t=document.getElementById(e);t instanceof HTMLElement&&t.focus()}function _re(){const[e,t]=w.useState(0),[n,r]=w.useState({...m6}),[i,a]=w.useState(null),[o,l]=w.useState(!1),[u,d]=w.useState(!1);return{stepIndex:e,setStepIndex:t,form:n,setForm:r,toast:i,setToast:a,unknownTime:o,setUnknownTime:l,unknownPlace:u,setUnknownPlace:d}}function Sre({currentStepKey:e,birthPlace:t,unknownPlace:n,stepIndex:r}){w.useEffect(()=>{if(["name","birthDay","birthTime","memo"].includes(e)){const a=document.querySelector(".current-step input[type='text']:not([disabled]), .current-step textarea:not([disabled])");if(a){a.focus();return}}if(e==="mingSikType"){const a=document.querySelector("[id^='ming_'][id$='_lbl'][aria-checked='true']");if(a){a.focus();return}}if(e==="gender"){const a=document.querySelector("[id^='gender_'][id$='_lbl'][aria-checked='true']");if(a){a.focus();return}}if(e==="birthPlace"){if(t||n){const a=()=>{const o=document.querySelector(".current-step form button[type='submit']");o&&o.focus()};a(),setTimeout(a,0)}else{const a=document.getElementById("inputBirthPlaceBtn");a&&a.focus()}return}if(e==="relationship"||e==="folder"){setTimeout(()=>{const a=document.querySelector(".current-step select");a&&a.focus()},0);return}document.querySelector(".current-step button, .current-step [tabindex='0']")?.focus()},[n,r,e,t])}function kre(e,t){if(e!=="lunar"||!t||t.length!==8)return null;try{const n=Number(t.slice(0,4)),r=Number(t.slice(4,6)),i=Number(t.slice(6,8)),a=Wi(n,r,i);return` ${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}-${String(a.getDate()).padStart(2,"0")}`}catch(n){const r=n instanceof Error?n.message:void 0;return` ${r?`: ${r}`:""}`}}function Ere(e,t,n,r){switch(e){case"birthPlace":return r?"":t.birthPlace?.name||"";case"birthTime":return n?"":t.birthTime||"";case"folder":return t.folder?String(t.folder):bn;default:{const a=t[e];return typeof a=="string"?a:a!=null?String(a):""}}}function Tre({form:e,unknownTime:t,unknownPlace:n,stepIndex:r}){const i=OD[r],a=w.useMemo(()=>kre(e.calendarType,e.birthDay),[e.calendarType,e.birthDay]);return{steps:OD,currentStep:i,lunarPreview:a,displayValue:l=>Ere(l,e,t,n),CALENDAR_OPTIONS:bre,MING_OPTIONS:yre,GENDER_OPTIONS:vre,nextIndex:xre,focusById:wre,isDST:Gm}}function Are(){return{add:yn(t=>t.add)}}const Sr=[];for(let e=0;e<256;++e)Sr.push((e+256).toString(16).slice(1));function jre(e,t=0){return(Sr[e[t+0]]+Sr[e[t+1]]+Sr[e[t+2]]+Sr[e[t+3]]+"-"+Sr[e[t+4]]+Sr[e[t+5]]+"-"+Sr[e[t+6]]+Sr[e[t+7]]+"-"+Sr[e[t+8]]+Sr[e[t+9]]+"-"+Sr[e[t+10]]+Sr[e[t+11]]+Sr[e[t+12]]+Sr[e[t+13]]+Sr[e[t+14]]+Sr[e[t+15]]).toLowerCase()}let o1;const Ore=new Uint8Array(16);function Nre(){if(!o1){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");o1=crypto.getRandomValues.bind(crypto)}return o1(Ore)}const Cre=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),ND={randomUUID:Cre};function p6(e,t,n){if(ND.randomUUID&&!e)return ND.randomUUID();e=e||{};const r=e.random??e.rng?.()??Nre();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,jre(r)}function Mre(e,t,n){const r=cu(e.folder);return e6({id:p6(),name:e.name,birthDay:e.birthDay??"",calendarType:e.calendarType??"solar",birthTime:e.birthTime,unknownTime:t,gender:e.gender,birthPlace:e.birthPlace,unknownPlace:n,relationship:e.relationship,memo:e.memo,folder:r,mingSikType:e.mingSikType,dateObj:e.dateObj||new Date},{requireName:!1})}function Dre(e,t,n,r){if(e==="name"&&!t.name)return{ok:!0,message:"  '' .",nextForm:{...t,name:""}};if(e==="birthDay"){const i=vT(t.birthDay??"",t.calendarType??"solar");if(!i.ok)return{ok:!1,message:i.message};if(t.birthDay!==i.value)return{ok:!0,nextForm:{...t,birthDay:i.value}}}if(e==="birthTime"){const i=xT(t.birthTime??"",n);if(!i.ok)return{ok:!1,message:i.message};if(i.value!==""&&t.birthTime!==i.value)return{ok:!0,nextForm:{...t,birthTime:i.value}}}return e==="birthPlace"&&!t.birthPlace&&!r?{ok:!1,message:"  ''  ."}:{ok:!0}}function Pre({form:e,setForm:t,stepIndex:n,setStepIndex:r,stepsLength:i,currentStepKey:a,unknownTime:o,setUnknownTime:l,unknownPlace:u,setUnknownPlace:d,setToast:h,onSave:p}){const{add:b}=Are(),y=w.useCallback(()=>{const _=Dre(a,e,o,u);if(!_.ok){h(_.message??" .");return}if(_.nextForm&&(t(_.nextForm),_.message&&h(_.message)),n<i-1){r(n+1);return}const k=Mre(e,o,u);if(!k.ok){h(k.message);return}const A=k.value;b(A),p(A),h(" !"),t({...m6}),l(!1),d(!1),r(0)},[a,e,o,u,h,t,n,i,r,b,p,l,d]),S=w.useCallback(_=>{if(_.key!=="Enter")return;const k=_.target,A=k.getAttribute("role");if(A==="radio"||A==="checkbox")return;const N=document.getElementById("mapModal");if(N&&N.contains(k))return;const j=k.tagName.toLowerCase(),C=k instanceof HTMLInputElement?k.type:"";if(j==="textarea"){if(_.shiftKey)return;_.preventDefault(),y();return}if(C==="radio"||C==="checkbox"){_.preventDefault(),k instanceof HTMLInputElement&&k.click();return}j==="button"&&k.type!=="submit"||(_.preventDefault(),y())},[y]);return{handleNext:y,handleFormKeyDown:S}}function Rre({onSave:e}){const t=_re(),n=Tre({form:t.form,unknownTime:t.unknownTime,unknownPlace:t.unknownPlace,stepIndex:t.stepIndex});Sre({currentStepKey:n.currentStep.key,birthPlace:t.form.birthPlace,unknownPlace:t.unknownPlace,stepIndex:t.stepIndex});const r=Pre({form:t.form,setForm:t.setForm,stepIndex:t.stepIndex,setStepIndex:t.setStepIndex,stepsLength:n.steps.length,currentStepKey:n.currentStep.key,unknownTime:t.unknownTime,setUnknownTime:t.setUnknownTime,unknownPlace:t.unknownPlace,setUnknownPlace:t.setUnknownPlace,setToast:t.setToast,onSave:e});return{steps:n.steps,stepIndex:t.stepIndex,setStepIndex:t.setStepIndex,currentStep:n.currentStep,form:t.form,setForm:t.setForm,toast:t.toast,setToast:t.setToast,unknownTime:t.unknownTime,setUnknownTime:t.setUnknownTime,unknownPlace:t.unknownPlace,setUnknownPlace:t.setUnknownPlace,lunarPreview:n.lunarPreview,handleNext:r.handleNext,handleFormKeyDown:r.handleFormKeyDown,displayValue:n.displayValue,CALENDAR_OPTIONS:n.CALENDAR_OPTIONS,MING_OPTIONS:n.MING_OPTIONS,GENDER_OPTIONS:n.GENDER_OPTIONS,nextIndex:n.nextIndex,focusById:n.focusById,isDST:n.isDST}}function Lre({onSave:e,onClose:t}){const n=Rre({onSave:e});return g.jsxs("div",{className:"mx-auto mt-10 space-y-2 max-w-[640px] w-[96%] text-neutral-900 dark:text-neutral-100",children:[n.toast&&g.jsx(h6,{message:n.toast,onClose:()=>n.setToast(null)}),n.steps.slice(0,n.stepIndex).map((r,i)=>g.jsxs("button",{onClick:()=>n.setStepIndex(i),className:"p-3 rounded-lg bg-neutral-100 dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 flex justify-between w-full text-left hover:bg-neutral-200 dark:hover:bg-neutral-800/80 transition-colors",children:[g.jsx("span",{className:"font-semibold",children:r.label}),g.jsx("span",{className:"text-neutral-600 dark:text-neutral-300",children:n.displayValue(r.key)})]},r.key)),g.jsx("div",{className:"p-4 border rounded-lg shadow current-step bg-white dark:bg-neutral-900 border-neutral-200 dark:border-neutral-800",children:g.jsxs("form",{onSubmit:r=>{r.preventDefault(),n.handleNext()},onKeyDown:n.handleFormKeyDown,children:[g.jsx("label",{className:"block mb-2 font-bold",children:n.currentStep.label}),n.currentStep.key==="name"&&g.jsx("input",{type:"text",className:"w-full border rounded-lg p-2 bg-white dark:bg-neutral-900 border-neutral-300 dark:border-neutral-700 placeholder-neutral-400 dark:placeholder-neutral-500 text-neutral-900 dark:text-neutral-100",placeholder:n.currentStep.placeholder,value:n.form.name||"",onChange:r=>n.setForm({...n.form,name:r.target.value})}),n.currentStep.key==="birthDay"&&g.jsxs("div",{className:"space-y-2",children:[g.jsxs("div",{className:"flex gap-1 items-center",children:[g.jsx("input",{type:"text",className:"flex-1 border rounded-lg p-2 bg-white dark:bg-neutral-900 border-neutral-300 dark:border-neutral-700 placeholder-neutral-400 dark:placeholder-neutral-500 text-neutral-900 dark:text-neutral-100",placeholder:n.currentStep.placeholder,value:n.form.birthDay||"",onChange:r=>{const i=r.target.value.replace(/\D/g,"");n.setForm({...n.form,birthDay:i.slice(0,8)})},inputMode:"numeric",pattern:"\\d*",maxLength:8}),g.jsx("fieldset",{role:"radiogroup","aria-label":" ",className:"flex gap-1 text-sm",children:n.CALENDAR_OPTIONS.map(({value:r,label:i,id:a})=>{const o=n.form.calendarType===r;return g.jsxs("span",{className:"inline-flex items-center gap-1",children:[g.jsx("input",{id:a,name:"calendarType",type:"radio",style:{display:"none"}}),g.jsx("label",{htmlFor:a,id:`${a}_lbl`,role:"radio","aria-checked":o,tabIndex:0,className:`cursor-pointer select-none px-2 py-1 rounded-md border
                                     border-neutral-300 dark:border-neutral-700
                                     bg-white dark:bg-neutral-900
                                     focus-visible:outline focus-visible:outline-2 focus-visible:outline-amber-500
                                     data-[checked=true]:border-amber-400 data-[checked=true]:bg-amber-50
                                     dark:data-[checked=true]:bg-amber-500/10`,"data-checked":o?"true":"false",onKeyDown:l=>{if(l.stopPropagation(),l.key===" "||l.key==="Enter"){l.preventDefault(),n.setForm({...n.form,calendarType:r});return}if(!["ArrowRight","ArrowLeft","ArrowUp","ArrowDown","Home","End"].includes(l.key))return;l.preventDefault();const d=n.CALENDAR_OPTIONS.findIndex(b=>b.value===n.form.calendarType),h=n.nextIndex(d<0?0:d,n.CALENDAR_OPTIONS.length,l.key),p=n.CALENDAR_OPTIONS[h].value;n.setForm({...n.form,calendarType:p}),n.focusById(`${n.CALENDAR_OPTIONS[h].id}_lbl`)},onClick:l=>{l.preventDefault(),n.setForm({...n.form,calendarType:r})},children:i})]},r)})})]}),n.form.calendarType==="lunar"&&g.jsx("div",{className:"flex items-center justify-end",children:g.jsx("span",{className:"text-xs text-neutral-600 dark:text-neutral-300",children:n.lunarPreview})}),n.form.birthDay&&n.form.birthDay.length===8&&(()=>{const r=Number(n.form.birthDay.slice(0,4)),i=Number(n.form.birthDay.slice(4,6)),a=Number(n.form.birthDay.slice(6,8));return n.isDST(r,i,a)?g.jsx("div",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:"  ."}):null})()]}),n.currentStep.key==="birthTime"&&g.jsxs("div",{className:"space-y-2",children:[g.jsx("input",{type:"text",className:"w-full border rounded-lg p-2 disabled:opacity-50 bg-white dark:bg-neutral-900 border-neutral-300 dark:border-neutral-700 placeholder-neutral-400 dark:placeholder-neutral-500 text-neutral-900 dark:text-neutral-100",placeholder:n.currentStep.placeholder,value:n.unknownTime?"":n.form.birthTime||"",onChange:r=>{const i=r.target.value.replace(/\D/g,"");n.setForm({...n.form,birthTime:i.slice(0,4)})},inputMode:"numeric",pattern:"\\d*",maxLength:4,disabled:n.unknownTime}),g.jsxs("span",{className:"inline-flex items-center gap-1",children:[g.jsx("input",{id:"birthTimeX",type:"checkbox",style:{display:"none"}}),g.jsx("label",{htmlFor:"birthTimeX",role:"checkbox","aria-checked":n.unknownTime,tabIndex:0,className:`text-sm select-none cursor-pointer px-2 py-1 rounded-md border
                             border-neutral-300 dark:border-neutral-700
                             bg-white dark:bg-neutral-900
                             focus-visible:outline focus-visible:outline-2 focus-visible:outline-amber-500
                             data-[checked=true]:border-amber-400 data-[checked=true]:bg-amber-50
                             dark:data-[checked=true]:bg-amber-500/10`,"data-checked":n.unknownTime?"true":"false",onKeyDown:r=>{r.stopPropagation(),(r.key===" "||r.key==="Enter")&&(r.preventDefault(),n.setUnknownTime(!n.unknownTime))},onClick:r=>{r.preventDefault(),n.setUnknownTime(!n.unknownTime)},children:""})]})]}),n.currentStep.key==="mingSikType"&&g.jsx("fieldset",{role:"radiogroup","aria-label":" ",className:"flex flex-wrap gap-3",children:n.MING_OPTIONS.map(r=>{const i=`ming_${r}`,a=(n.form.mingSikType??"/")===r;return g.jsxs("span",{className:"inline-flex items-center gap-1",children:[g.jsx("input",{id:i,name:"mingSikType",type:"radio",style:{display:"none"}}),g.jsxs("label",{htmlFor:i,id:`${i}_lbl`,role:"radio","aria-checked":a,tabIndex:0,className:`cursor-pointer select-none px-2 py-1 rounded-md border
                                 border-neutral-300 dark:border-neutral-700
                                 bg-white dark:bg-neutral-900
                                 focus-visible:outline focus-visible:outline-2 focus-visible:outline-amber-500
                                 data-[checked=true]:border-amber-400 data-[checked=true]:bg-amber-50
                                 dark:data-[checked=true]:bg-amber-500/10`,"data-checked":a?"true":"false",onKeyDown:o=>{if(o.stopPropagation(),o.key===" "||o.key==="Enter"){o.preventDefault(),n.setForm({...n.form,mingSikType:r});return}if(!["ArrowRight","ArrowLeft","ArrowUp","ArrowDown","Home","End"].includes(o.key))return;o.preventDefault();const u=n.form.mingSikType??"/",d=n.MING_OPTIONS.indexOf(u),h=n.nextIndex(d,n.MING_OPTIONS.length,o.key),p=n.MING_OPTIONS[h];n.setForm({...n.form,mingSikType:p}),n.focusById(`ming_${p}_lbl`)},onClick:o=>{o.preventDefault(),n.setForm({...n.form,mingSikType:r})},children:[r," "]})]},r)})}),n.currentStep.key==="gender"&&g.jsx("fieldset",{role:"radiogroup","aria-label":"",className:"flex gap-2",children:n.GENDER_OPTIONS.map(r=>{const i=`gender_${r}`,a=(n.form.gender??"")===r;return g.jsxs("span",{className:"inline-flex items-center gap-1",children:[g.jsx("input",{id:i,name:"gender",type:"radio",style:{display:"none"}}),g.jsx("label",{htmlFor:i,id:`${i}_lbl`,role:"radio","aria-checked":a,tabIndex:0,className:`cursor-pointer select-none px-2 py-1 rounded-md border
                                 border-neutral-300 dark:border-neutral-700
                                 bg-white dark:bg-neutral-900
                                 focus-visible:outline focus-visible:outline-2 focus-visible:outline-amber-500
                                 data-[checked=true]:border-amber-400 data-[checked=true]:bg-amber-50
                                 dark:data-[checked=true]:bg-amber-500/10`,"data-checked":a?"true":"false",onKeyDown:o=>{if(o.stopPropagation(),o.key===" "||o.key==="Enter"){o.preventDefault(),n.setForm({...n.form,gender:r});return}if(!["ArrowRight","ArrowLeft","ArrowUp","ArrowDown","Home","End"].includes(o.key))return;o.preventDefault();const u=n.form.gender??"",d=n.GENDER_OPTIONS.indexOf(u),h=n.nextIndex(d,n.GENDER_OPTIONS.length,o.key),p=n.GENDER_OPTIONS[h];n.setForm({...n.form,gender:p}),n.focusById(`gender_${p}_lbl`)},onClick:o=>{o.preventDefault(),n.setForm({...n.form,gender:r})},children:r})]},r)})}),n.currentStep.key==="birthPlace"&&g.jsxs("div",{className:"space-y-2",children:[g.jsx(BB,{onSelect:r=>n.setForm({...n.form,birthPlace:r}),value:n.unknownPlace?"":n.form.birthPlace?.name??""}),g.jsxs("span",{className:"inline-flex items-center gap-1",children:[g.jsx("input",{id:"birthPlaceX",type:"checkbox",style:{display:"none"}}),g.jsx("label",{htmlFor:"birthPlaceX",role:"checkbox","aria-checked":n.unknownPlace,tabIndex:0,className:`text-sm select-none cursor-pointer px-2 py-1 rounded-md border
                             border-neutral-300 dark:border-neutral-700
                             bg-white dark:bg-neutral-900
                             focus-visible:outline focus-visible:outline-2 focus-visible:outline-amber-500
                             data-[checked=true]:border-amber-400 data-[checked=true]:bg-amber-50
                             dark:data-[checked=true]:bg-amber-500/10`,"data-checked":n.unknownPlace?"true":"false",onKeyDown:r=>{r.stopPropagation(),(r.key===" "||r.key==="Enter")&&(r.preventDefault(),n.setUnknownPlace(!n.unknownPlace))},onClick:r=>{r.preventDefault(),n.setUnknownPlace(!n.unknownPlace)},children:""})]})]}),n.currentStep.key==="relationship"&&g.jsx(l6,{value:n.form.relationship||"",onChange:r=>n.setForm({...n.form,relationship:r})}),n.currentStep.key==="folder"&&g.jsx(gre,{value:cu(n.form.folder),onChange:r=>n.setForm({...n.form,folder:r})}),n.currentStep.key==="memo"&&g.jsx("textarea",{className:"w-full border rounded-lg p-2 bg-white dark:bg-neutral-900 border-neutral-300 dark:border-neutral-700 placeholder-neutral-400 dark:placeholder-neutral-500 text-neutral-900 dark:text-neutral-100",placeholder:n.currentStep.placeholder,value:n.form.memo||"",onChange:r=>n.setForm({...n.form,memo:r.target.value})}),g.jsxs("div",{className:"flex justify-between gap-2",children:[g.jsx("button",{className:"mt-4 w-full btn_style btn_secondary dark:focus:ring-amber-500",onClick:t,children:""}),g.jsx("button",{type:"submit",className:"mt-4 w-full btn_style dark:focus:ring-amber-500",children:n.stepIndex===n.steps.length-1?"":""})]})]})})]})}var B0={},CD;function Ire(){if(CD)return B0;CD=1,B0.match=a,B0.parse=o;var e=/(?:(only|not)?\s*([^\s\(\)]+)(?:\s*and)?\s*)?(.+)?/i,t=/\(\s*([^\s\:\)]+)\s*(?:\:\s*([^\s\)]+))?\s*\)/,n=/^(?:(min|max)-)?(.+)/,r=/(em|rem|px|cm|mm|in|pt|pc)?$/,i=/(dpi|dpcm|dppx)?$/;function a(h,p){return o(h).some(function(b){var y=b.inverse,S=b.type==="all"||p.type===b.type;if(S&&y||!(S||y))return!1;var _=b.expressions.every(function(k){var A=k.feature,N=k.modifier,j=k.value,C=p[A];if(!C)return!1;switch(A){case"orientation":case"scan":return C.toLowerCase()===j.toLowerCase();case"width":case"height":case"device-width":case"device-height":j=d(j),C=d(C);break;case"resolution":j=u(j),C=u(C);break;case"aspect-ratio":case"device-aspect-ratio":case"device-pixel-ratio":j=l(j),C=l(C);break;case"grid":case"color":case"color-index":case"monochrome":j=parseInt(j,10)||1,C=parseInt(C,10)||0;break}switch(N){case"min":return C>=j;case"max":return C<=j;default:return C===j}});return _&&!y||!_&&y})}function o(h){return h.split(",").map(function(p){p=p.trim();var b=p.match(e),y=b[1],S=b[2],_=b[3]||"",k={};return k.inverse=!!y&&y.toLowerCase()==="not",k.type=S?S.toLowerCase():"all",_=_.match(/\([^\)]+\)/g)||[],k.expressions=_.map(function(A){var N=A.match(t),j=N[1].toLowerCase().match(n);return{modifier:j[1],feature:j[2],value:N[2]}}),k})}function l(h){var p=Number(h),b;return p||(b=h.match(/^(\d+)\s*\/\s*(\d+)$/),p=b[1]/b[2]),p}function u(h){var p=parseFloat(h),b=String(h).match(i)[1];switch(b){case"dpcm":return p/2.54;case"dppx":return p*96;default:return p}}function d(h){var p=parseFloat(h),b=String(h).match(r)[1];switch(b){case"em":return p*16;case"rem":return p*16;case"cm":return p*96/2.54;case"mm":return p*96/2.54/10;case"in":return p*96;case"pt":return p*72;case"pc":return p*72/12;default:return p}}return B0}var s1,MD;function $re(){if(MD)return s1;MD=1;var e=Ire().match,t=typeof window<"u"?window.matchMedia:null;function n(i,a,o){var l=this,u;t&&!o&&(u=t.call(window,i)),u?(this.matches=u.matches,this.media=u.media,u.addListener(p)):(this.matches=e(i,a),this.media=i),this.addListener=d,this.removeListener=h,this.dispose=b;function d(y){u&&u.addListener(y)}function h(y){u&&u.removeListener(y)}function p(y){l.matches=y.matches,l.media=y.media}function b(){u&&u.removeListener(p)}}function r(i,a,o){return new n(i,a,o)}return s1=r,s1}var Bre=$re();const zre=wi(Bre);var Ure=/[A-Z]/g,Fre=/^ms-/,l1={};function Hre(e){return"-"+e.toLowerCase()}function g6(e){if(l1.hasOwnProperty(e))return l1[e];var t=e.replace(Ure,Hre);return l1[e]=Fre.test(t)?"-"+t:t}function Gre(e,t){if(e===t)return!0;if(!e||!t)return!1;const n=Object.keys(e),r=Object.keys(t),i=n.length;if(r.length!==i)return!1;for(let a=0;a<i;a++){const o=n[a];if(e[o]!==t[o]||!Object.prototype.hasOwnProperty.call(t,o))return!1}return!0}var c1={exports:{}},u1,DD;function qre(){if(DD)return u1;DD=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return u1=e,u1}var d1,PD;function Yre(){if(PD)return d1;PD=1;var e=qre();function t(){}function n(){}return n.resetWarningCache=t,d1=function(){function r(o,l,u,d,h,p){if(p!==e){var b=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw b.name="Invariant Violation",b}}r.isRequired=r;function i(){return r}var a={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:t};return a.PropTypes=a,a},d1}var RD;function Kre(){return RD||(RD=1,c1.exports=Yre()()),c1.exports}var Wre=Kre();const Mt=wi(Wre),Yr=Mt.oneOfType([Mt.string,Mt.number]),b6={all:Mt.bool,grid:Mt.bool,aural:Mt.bool,braille:Mt.bool,handheld:Mt.bool,print:Mt.bool,projection:Mt.bool,screen:Mt.bool,tty:Mt.bool,tv:Mt.bool,embossed:Mt.bool},Vre={orientation:Mt.oneOf(["portrait","landscape"]),scan:Mt.oneOf(["progressive","interlace"]),aspectRatio:Mt.string,deviceAspectRatio:Mt.string,height:Yr,deviceHeight:Yr,width:Yr,deviceWidth:Yr,color:Mt.bool,colorIndex:Mt.bool,monochrome:Mt.bool,resolution:Yr,type:Object.keys(b6)},{type:cCe,...Zre}=Vre,Xre={minAspectRatio:Mt.string,maxAspectRatio:Mt.string,minDeviceAspectRatio:Mt.string,maxDeviceAspectRatio:Mt.string,minHeight:Yr,maxHeight:Yr,minDeviceHeight:Yr,maxDeviceHeight:Yr,minWidth:Yr,maxWidth:Yr,minDeviceWidth:Yr,maxDeviceWidth:Yr,minColor:Mt.number,maxColor:Mt.number,minColorIndex:Mt.number,maxColorIndex:Mt.number,minMonochrome:Mt.number,maxMonochrome:Mt.number,minResolution:Yr,maxResolution:Yr,...Zre},Jre={...b6,...Xre};var Qre={all:Jre};const eie=e=>`not ${e}`,tie=(e,t)=>{const n=g6(e);return typeof t=="number"&&(t=`${t}px`),t===!0?n:t===!1?eie(n):`(${n}: ${t})`},nie=e=>e.join(" and "),rie=e=>{const t=[];return Object.keys(Qre.all).forEach(n=>{const r=e[n];r!=null&&t.push(tie(n,r))}),nie(t)},iie=w.createContext(void 0),aie=e=>e.query||rie(e),LD=e=>e?Object.keys(e).reduce((n,r)=>(n[g6(r)]=e[r],n),{}):void 0,y6=()=>{const e=w.useRef(!1);return w.useEffect(()=>{e.current=!0},[]),e.current},oie=e=>{const t=w.useContext(iie),n=()=>LD(e)||LD(t),[r,i]=w.useState(n);return w.useEffect(()=>{const a=n();Gre(r,a)||i(a)},[e,t]),r},sie=e=>{const t=()=>aie(e),[n,r]=w.useState(t);return w.useEffect(()=>{const i=t();n!==i&&r(i)},[e]),n},lie=(e,t)=>{const n=()=>zre(e,t||{},!!t),[r,i]=w.useState(n),a=y6();return w.useEffect(()=>{if(a){const o=n();return i(o),()=>{o&&o.dispose()}}},[e,t]),r},cie=e=>{const[t,n]=w.useState(e.matches);return w.useEffect(()=>{const r=i=>{n(i.matches)};return e.addListener(r),n(e.matches),()=>{e.removeListener(r)}},[e]),t},uie=(e,t,n)=>{const r=oie(t),i=sie(e);if(!i)throw new Error("Invalid or missing MediaQuery!");const a=lie(i,r),o=cie(a);return y6(),w.useEffect(()=>{},[o]),w.useEffect(()=>()=>{a&&a.dispose()},[]),o},v6={Classic:"",Modern:""};function Ho(e,t){const r={:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}}[e];return r?r[t]??"":""}function die(e,t){return{:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}}[e]?.[t]??""}function fie(e,t){const n={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},r={:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}},i=n[e];return i&&r[i]?r[i][t]??"":""}function hie(e,t){return{:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}}[e]?.[t]??""}function mie(e,t){const n={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},r={:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}},i=n[e];return i&&r[i]?r[i][t]??"":""}function Go(e){const{baseBranch:t,targetBranch:n,era:r,gaehwa:i}=e;return!t||!n?"":r===""?i?die(t,n):fie(t,n):i?hie(t,n):mie(t,n)}const Xr=Fo()(f5((e,t)=>{const n=new Date,r="/",i=127.5,a=0,o=(b,y)=>y?new Date(b.getTime()+y*60*1e3):b,l=i,u=o(n,a),d=st(u,l),h=St(u,l),p=mt(u,r);return{date:n,scope:"",rule:r,lon:i,dstOffsetMinutes:a,yearGZ:d,monthGZ:h,dayGZ:p,setDate:b=>{const{rule:y,lon:S,dstOffsetMinutes:_}=t(),k=typeof S=="number"?S:void 0,A=o(b,_);e({date:b,yearGZ:st(A,k),monthGZ:St(A,k),dayGZ:mt(A,y)})},resetDate:()=>{const{rule:b,lon:y,dstOffsetMinutes:S}=t(),_=new Date,k=typeof y=="number"?y:void 0,A=o(_,S);e({date:_,yearGZ:st(A,k),monthGZ:St(A,k),dayGZ:mt(A,b)})},resetMonth:()=>{const{lon:b,dstOffsetMinutes:y}=t(),S=new Date,_=typeof b=="number"?b:void 0,k=o(S,y);e({date:S,monthGZ:St(k,_)})},setScope:b=>e({scope:b}),setRule:b=>{const{date:y,lon:S,dstOffsetMinutes:_}=t(),k=typeof S=="number"?S:void 0,A=o(y,_);e({rule:b,yearGZ:st(A,k),monthGZ:St(A,k),dayGZ:mt(A,b)})},setLon:b=>{const{date:y,rule:S,dstOffsetMinutes:_}=t(),k=typeof b=="number"?b:void 0,A=o(y,_);e({lon:b,yearGZ:st(A,k),monthGZ:St(A,k),dayGZ:mt(A,S)})},setDstOffsetMinutes:b=>{const{date:y,rule:S,lon:_}=t(),k=typeof _=="number"?_:void 0,A=o(y,b);e({dstOffsetMinutes:b,yearGZ:st(A,k),monthGZ:St(A,k),dayGZ:mt(A,S)})},setFromEvent:(b,y)=>{const{rule:S,lon:_,dstOffsetMinutes:k}=t(),A=typeof _=="number"?_:void 0,N=o(b.at,k);e({date:b.at,scope:y,yearGZ:st(N,A),monthGZ:St(N,A),dayGZ:mt(N,S)})},forceKey:new Date}},{name:"luck-picker-v1",merge:(e,t)=>{const n=e;return n.date&&typeof n.date=="string"&&(n.date=new Date(n.date)),{...t,...n}}})),pie=60*1e3,x6=60*pie,gie=24*x6,bie=(e,t)=>{const n=new Date(e.getTime()),r=n.getFullYear()+t,i=n.getMonth(),a=n.getDate();return new Date(Date.UTC(r,i,a,n.getUTCHours(),n.getUTCMinutes()))},r2=e=>{const t=new Date(e);return t.setSeconds(0,0),t},Ib={HOUR:x6,DAY:gie},xa=e=>{const t=e.getFullYear(),n=[{deg:315,name:""},{deg:345,name:""},{deg:15,name:""},{deg:45,name:""},{deg:75,name:""},{deg:105,name:""},{deg:135,name:""},{deg:165,name:""},{deg:195,name:""},{deg:225,name:""},{deg:255,name:""},{deg:285,name:""}],r={deg:315,name:""},i=n.map(l=>({name:l.name,date:An(t,l.deg)})).concat([{name:r.name,date:An(t+1,r.deg)},{name:"",date:An(t+1,285)}]),a=An(t,315),o=An(t+1,315);return i.filter(l=>l.date>=a&&l.date<o).sort((l,u)=>l.date.getTime()-u.date.getTime())},w6=(()=>{const e=[];for(let t=0;t<60;t+=1)e.push(`${Zr[t%10]}${vi[t%12]}`);return e})(),yie=e=>{const t=w6.indexOf(e);if(t<0)throw new Error(`Unknown : ${e}`);return t},gy=(e,t,n=1)=>{const r=yie(e),i=t==="forward"?n:-n;return w6[(r+i+60*1e3)%60]},xd=2*Ib.HOUR,ID=e=>(Math.floor((e+1)/2)*2-1+24)%24,vie=(e,t)=>{const n=e.getHours(),r=ID(n),i=new Date(e);i.setHours(r,0,0,0),i.getTime()>e.getTime()&&i.setTime(i.getTime()-xd);const a=new Date(i.getTime()+xd),o=e.getTime()-i.getTime(),l=a.getTime()-e.getTime();if(o<0||o>xd||l<0||l>xd){const u=new Date(e);for(u.setHours(ID(e.getHours()),0,0,0);u.getTime()>e.getTime();)u.setTime(u.getTime()-xd);const d=new Date(u.getTime()+xd),h=e.getTime()-u.getTime(),p=d.getTime()-e.getTime();return t==="backward"?h:p}return t==="backward"?o:l},_6=(e,t,n,r=120)=>{const i=r2(e),a=vie(i,n),o=10*Ib.DAY/(2*Ib.HOUR),l=r2(new Date(i.getTime()+a*o)),u=bie(e,r).getTime(),d=[];let h=gy(t,n,1);for(let p=l.getTime();p<=u;p+=10*Ib.DAY)d.push({at:new Date(p),gz:h}),h=gy(h,n,1);return{firstChange:l,events:d}},S6=(e,t)=>{const n=t==="forward"?e===""?"":"":e===""?"":"";return r=>r===n},k6=(e,t,n,r)=>{const i=S6(r,n);let a=t;const o=[];for(const l of e.events){const u=l.gz.charAt(1);i(u)&&(a=gy(a,n,1),o.push({at:l.at,gz:a}))}return{events:o}},xie={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},wie={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},_ie=e=>xie[e]??("".includes(e)?e:null),Sie=e=>wie[e]??("".includes(e)?e:null),$D=e=>{const t=_ie(e[0]),n=Sie(e[1]);if(!t||!n)throw new Error(`Invalid GZ: ${e}`);return`${t}${n}`},kie=e=>Math.floor((e.getHours()+1)%24/2),f1=e=>["","","","","","","","","","","",""][kie(e)],BD=(e,t,n)=>{const r=e.charAt(0),i=e.charAt(1),a=Zr.indexOf(r),o=vi.indexOf(i),l=t==="forward"?n:-n,u=(a+l%10+10)%10,d=(o+l%12+12)%12;return Zr[u]+vi[d]},kp=(e,t,n,r=120,i)=>{const a=xa(e).sort((A,N)=>A.date.getTime()-N.date.getTime());let o;const l=e.getTime();if(n==="forward"){const A=a.findIndex(N=>N.date.getTime()>=l);A>=0&&(o=a[A].date)}else{const A=a.filter(N=>N.date.getTime()<=l);A.length&&(o=A[A.length-1].date)}const u=(A,N)=>{const j=f1(A),C={:23,:1,:3,:5,:7,:9,:11,:13,:15,:17,:19,:21},D=C[j],P=(D+2)%24,$=new Date(A);if($.setSeconds(0,0),n==="backward"&&N){const Y=f1(N),K=C[Y],F=new Date(N);return F.setHours(K,0,0,0),F}if(n==="forward"&&N){const Y=f1(N),K=C[Y],F=new Date(N);if(F.setHours(K,0,0,0),F>$)return F}const U=new Date($);return n==="forward"?(U.setHours(P,0,0,0),U<=$&&U.setDate(U.getDate()+1)):(U.setHours(D,0,0,0),U>=$&&U.setDate(U.getDate()-1)),U},d=$D(St(e,127.5)),h=u(e,o),p=Math.floor(n==="forward"?(h.getTime()-e.getTime())/6e4:(e.getTime()-h.getTime())/6e4),b=Math.round(p/120*(14400*60*1e3));let y=new Date(e.getTime()+b),S=!1;try{const A=$D(St(e,i));if(S=n==="forward"&&d!==A||n==="backward"&&d!==A,S){const N=Math.round(p*6e4);y=new Date(e.getTime()+N),y.getTime()===e.getTime()&&(y=new Date(e.getTime()+6e4))}}catch{}const _=r/10,k=[];k.push({at:y,gz:BD(t,n,1)});for(let A=1;A<_;A+=1){const N=new Date(e);N.setFullYear(N.getFullYear()+A*10),N.setSeconds(0,0);const j=BD(t,n,A+1);k.push({at:N,gz:j})}return k.sort((A,N)=>A.at.getTime()-N.at.getTime()),{natalMonthPillar:t,firstChange:y,mPillars:[],events:k}},Eie=(e,t)=>{const r=(t.getTime()-e.getTime())/(365.2425*24*60*60*1e3);return Math.max(0,Math.floor(r))},E6=(e,t,n,r,i)=>{const a=S6(r,n);let o=t;const l=[];for(const u of e.events){const d=u.gz.charAt(1);a(d)&&(o=gy(o,n,1),l.push({at:u.at,gz:o,age:Eie(i,u.at)}))}return{events:l}},Tie=e=>{const t=Number(e.birthDay.slice(0,4)),n=Number(e.birthDay.slice(4,6)),r=Number(e.birthDay.slice(6,8));let i=12,a=0;return e.birthTime&&e.birthTime!==""&&/^\d{4}$/.test(e.birthTime)&&(i=Number(e.birthTime.slice(0,2)),a=Number(e.birthTime.slice(2,4))),new Date(t,n-1,r,i,a,0,0)},Fv=(e,t)=>{const n=Tie(e),r=!e.birthPlace||typeof e.birthPlace=="object"&&e.birthPlace.name==="",i=wp(n,e.birthPlace?.lon??null,r),a=t?.dstOffsetMinutes??0,o=a!==0?new Date(i.getTime()+a*60*1e3):i;return r2(o)},TT=(e,t,n)=>{const r=e.birthPlace?.lon??127.5,i=Fv(e,n),a=mt(i,t),o=Qa(i,t,a.charAt(0));return{year:st(i,r),month:St(i,r),day:a,hour:o}},Aie=(()=>{const e=[];for(let t=0;t<60;t++)e.push(`${Zr[t%10]}${vi[t%12]}`);return e})(),jie=e=>Aie.indexOf(e),h1=e=>{if(jie(e)<0)throw new Error(`Unknown : ${e}`);return{stem:e[0],branch:e[1]}};function Oie(e,t="/",n=0){const r=w.useMemo(()=>Ef(e),[e]),i=w.useMemo(()=>Fv(r,{dstOffsetMinutes:n}),[r,n]),a=w.useMemo(()=>TT(r,t,{dstOffsetMinutes:n}),[r,t,n]);return w.useMemo(()=>{const o=kp(i,a.month,r.dir,120,r?.birthPlace?.lon??127.5),l=new Date;function u(C,D){let P=null;const $=D.getTime();for(const U of C)if(U.at.getTime()<=$)P=U;else break;return P}const d=u(o.events,l)?.gz??a.month,h=h1(d),p=l.getFullYear(),b=An(p,315),S=b&&l>=b?p:p-1,_=st(new Date(S,1,10,0,0,0),127.5),k=h1(_),A=St(l,127.5),N=h1(A),j=[];return N&&j.push({key:"wolun",label:"",data:N}),k&&j.push({key:"seun",label:"",data:k}),h&&j.push({key:"daeun",label:"",data:h}),j},[i,r.dir,a.month,r.birthPlace?.lon])}function Eu(e,t="/",n=100,r=0){const i=w.useMemo(()=>Ef(e),[e]),a=w.useMemo(()=>Fv(i,{dstOffsetMinutes:r}),[i,r]),o=w.useMemo(()=>TT(i,t,{dstOffsetMinutes:r}),[i,t,r]),l=(u,d)=>{const h=d.getFullYear()-u.getFullYear(),p=d.getMonth()-u.getMonth(),b=d.getDate()-u.getDate(),y=p<0||p===0&&b<0?h-1:h;return Math.max(1,y)};return w.useMemo(()=>{const u=kp(a,o.month,i.dir,n,i.birthPlace?.lon??127.5);return[{at:a,gz:u.natalMonthPillar},...u.events].map(h=>({...h,age:l(a,h.at)}))},[a,o.month,i.dir,n,i.birthPlace?.lon])}function m1(e){return e instanceof Date&&!Number.isNaN(e.getTime())}function Nie(e,t){if(!Array.isArray(e)||e.length===0||!m1(t))return{gz:"",at:t,index:-1};const n=e;for(let a=0;a<n.length;a++){const o=n[a],l=n[a+1];if(!m1(o.at))continue;if(t.getTime()>=o.at.getTime()&&(!l||m1(l.at)&&t.getTime()<l.at.getTime()))return{gz:o.gz??"",at:o.at,index:a}}if(t.getTime()<n[0].at.getTime()){const a=n[0];return{gz:a.gz??"",at:a.at,index:0}}const r=n.length-1,i=n[r];return{gz:i.gz??"",at:i.at,index:r}}function Hv(e,t,n,r){const{date:i,rule:a,lon:o}=Xr(),l=w.useMemo(()=>n??i??new Date,[n,i]),u=r?.dstOffsetMinutes??0,d=Eu(e,e?.mingSikType,100,u),h=u!==0?new Date(l.getTime()+u*60*1e3):l,{gz:p}=Nie(d,h);return w.useMemo(()=>{try{const b=o??e?.birthPlace?.lon??127.5,y=a??e?.mingSikType??t??"/";return{dae:{gz:p,at:h},se:{gz:st(h,b),at:h},wol:{gz:St(h,b),at:h},il:{gz:mt(h,y),at:h}}}catch{const b=new Date;return{dae:{gz:"",at:b},se:{gz:"",at:b},wol:{gz:"",at:b},il:{gz:"",at:b}}}},[a,o,e,t,p,h])}const by=Fo(e=>({useDST:!1,setUseDST:t=>e({useDST:t}),toggleDST:()=>e(t=>({useDST:!t.useDST}))})),Xl=()=>by(e=>e.useDST?-60:0),gn=["","","",""],gi={year:0,month:1,day:2,hour:3},zD=["","","",""],Hd="",Ep=[{name:"",members:["","",""],out:"",wang:""},{name:"",members:["","",""],out:"",wang:""},{name:"",members:["","",""],out:"",wang:""},{name:"",members:["","",""],out:"",wang:""}],T6=[{name:"",members:["","",""],out:"",wang:""},{name:"",members:["","",""],out:"",wang:""},{name:"",members:["","",""],out:"",wang:""},{name:"",members:["","",""],out:"",wang:""}],UD=[{name:"",members:["","",""]},{name:"",members:["","",""]}],Cie={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},i2={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};function Le(e){if(!e)return"";const t=e.replace(/[()[\]{}]/g,"").replace(/\s+/g,"").replace(/[\-_.]/g,""),n=t.match(/([]).*?([])/);if(n)return`${n[1]}${n[2]}`;const r=t.match(/([]).*?([])/);if(r){const i=Cie[r[1]]??r[1],a=i2[r[2]]??r[2];return`${i}${a}`}return""}const yy=e=>e&&e.length>=1?e[0]:"",Ii=e=>e&&e.length>=2?e[1]:"",AT=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],jT=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],OT=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],NT=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],CT=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],MT=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],DT=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],PT=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],RT=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],LT=[{pair:["",""],label:""}],IT=new Set(["","","",""]),vy=new Set(["","","",""]),$T=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],A6=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}];function mi(e,t,n){for(const{pair:[r,i],label:a}of e)if(t===r&&n===i||t===i&&n===r)return a;return null}function Zt(e,t){e.includes(t)||e.push(t)}const Mie=e=>[...e].sort((t,n)=>t-n).map(t=>gn[t]).join("X"),FD=(e,t)=>e===0&&t===3||e===3&&t===0;function Die(e,t){const n=[];for(const r of e)for(const i of t){if(r===i)continue;const a=Math.min(r,i),o=Math.max(r,i);n.push([a,o])}return n.sort((r,i)=>{const a=Math.abs(r[0]-r[1]),o=Math.abs(i[0]-i[1]);return a!==o?a-o:0})}function Pie(e){const t=[],n=[...e].sort((r,i)=>r-i);for(let r=0;r<n.length;r++)for(let i=r+1;i<n.length;i++){const a=n[r],o=n[i];t.push([a,o])}return t}const j6=e=>{switch(e){case"":return"";case"":return"";case"":return"";case"":return""}};function Rie(e){if(!e)return!1;const t=e.normalize("NFC").trim();return/^#\s*$/u.test(t)}const Lie=["cheonganHap","cheonganChung","jijiSamhap","jijiBanhap","jijiBanghap","jijiYukhap","jijiChung","jijiHyeong","jijiPa","jijiHae","jijiWonjin","jijiGwimun","amhap","ganjiAmhap"];function Iie(e){if(!e||e.length===0)return e;const t=Array.from(new Set(e.map(i=>i?.normalize("NFKC")??""))).filter(Boolean),n=t.some(i=>i.includes("")||i.includes("()")),r=t.some(i=>i.includes("")||i.includes("()"));return t.filter(i=>!(n&&(i.includes("")||i.includes("")||i.includes(""))||r&&(i.includes("")||i.includes("")||i.includes(""))))}function O6(e){for(const t of Lie){const r=(e[t]??[]).map(i=>i&&i.normalize("NFKC")).filter(i=>!!i&&!Rie(i));e[t]=Array.from(new Set(r))}return e.jijiHyeong=Iie(e.jijiHyeong),e}function $ie(e,t){for(let n=0;n<e.length;n++)if((e[n]??"").includes(t))return n;return-1}function Bie(e,t){for(const n of Ep)if(!(n.wang!==e&&n.wang!==t)&&n.members.includes(e)&&n.members.includes(t))return!0;return!1}function HD(e,t,n){const r=$ie(e,n);if(r<0){Zt(e,t);return}const a=(e[r]??"").includes(Hd),o=t.includes(Hd);a&&!o&&(e[r]=t)}function BT(e,t={}){const{emitGanjiAmhap:n=!0,fillNone:r=!0}=t,i=[Le(e[0]??""),Le(e[1]??""),Le(e[2]??""),Le(e[3]??"")],a={title:"",cheonganHap:[],cheonganChung:[],jijiSamhap:[],jijiBanhap:[],jijiBanghap:[],jijiYukhap:[],jijiChung:[],jijiHyeong:[],jijiPa:[],jijiHae:[],jijiWonjin:[],jijiGwimun:[],amhap:[],ganjiAmhap:[]},o=i.map(b=>yy(b)),l=i.map(b=>Ii(b));function u(b,y){if(b===y)return;const S=o[b],_=o[y];if(!S||!_)return;const k=mi(AT,S,_);k&&Zt(a.cheonganHap,`#${gn[b]}X${gn[y]}_${k}`);const A=mi(jT,S,_);A&&Zt(a.cheonganChung,`#${gn[b]}X${gn[y]}_${A}`)}u(gi.year,gi.month),u(gi.month,gi.day),u(gi.day,gi.hour);function d(b,y,S,_,k=!0){const A=[],N=[];for(let C=0;C<4;C++)l[C]===b&&A.push(C),l[C]===y&&N.push(C);const j=Die(A,N);for(const[C,D]of j){const P=FD(C,D),$=`#${gn[C]}X${gn[D]}_${S}${P?Hd:""}`;if(P){Zt(_,$);continue}k?HD(_,$,S):Zt(_,$)}}const h=(b,y)=>{for(const{pair:[S,_],label:k}of b)d(S,_,k,y)};h(OT,a.jijiYukhap),h(NT,a.jijiChung),h(CT,a.jijiPa),h(MT,a.jijiHae),h(DT,a.jijiWonjin),h(PT,a.jijiGwimun);for(const b of Ep){if(!b.members.every(A=>l.includes(A)))continue;const S=[];for(let A=0;A<4;A++)b.members.includes(l[A])&&S.push(A);const _=S.includes(gi.year)&&S.includes(gi.hour),k=Mie(S);Zt(a.jijiSamhap,`#${k}_${b.name}${_?Hd:""}`)}for(const{pair:[b,y],label:S}of A6)Bie(b,y)&&d(b,y,S,a.jijiBanhap,!1);for(const{pair:[b,y],label:S}of RT)d(b,y,S,a.jijiHyeong);for(const{pair:[b,y],label:S}of LT)d(b,y,S,a.jijiHyeong);for(const b of IT){const y=l.map((S,_)=>S===b?_:-1).filter(S=>S>=0);if(!(y.length<2))for(const[S,_]of Pie(y)){const k=FD(S,_),A=`#${gn[S]}X${gn[_]}_${b}${k?Hd:""}`;HD(a.jijiHyeong,A,`${b}`)}}for(const{pair:[b,y],label:S}of $T)d(b,y,S,a.amhap);if(n)for(let b=0;b<4;b++){const y=i[b]??"";if(y.length<2)continue;const S=`${y[0]}${y[1]}`;vy.has(S)&&Zt(a.ganjiAmhap,`#${j6(gn[b])}_${S}`)}const p=O6(a);if(r)for(const b of Object.keys(p)){if(b==="title")continue;const y=p[b];Array.isArray(y)&&y.length===0&&(p[b]=["#"])}return p}function zie(e,t){return e===gi.year&&t===gi.hour||e===gi.hour&&t===gi.year}function Uie(e,t){for(const n of Ep)if(!(n.wang!==e&&n.wang!==t)&&n.members.includes(e)&&n.members.includes(t))return!0;return!1}function Fie(e,t){const n=[],r=new Set;for(const i of e)for(const a of t){if(i===a)continue;const o=Math.min(i,a),l=Math.max(i,a),u=`${o}-${l}`;r.has(u)||(r.add(u),n.push([o,l]))}return n}function Il(e,t={}){const{emitNatalGanjiAmhap:n=!1}=t,r=[Le(e.natal[0]??""),Le(e.natal[1]??""),Le(e.natal[2]??""),Le(e.natal[3]??"")],a=[Le(e.daewoon??""),Le(e.sewoon??""),Le(e.wolwoon??"")].some(p=>p.length>=2),o={cheonganHap:[],cheonganChung:[],jijiSamhap:[],jijiBanhap:[],jijiBanghap:[],jijiYukhap:[],jijiChung:[],jijiHyeong:[],jijiPa:[],jijiHae:[],jijiWonjin:[],jijiGwimun:[],amhap:[],ganjiAmhap:[]},l=r.map(p=>{const b=Ii(p??"");return i2[b]??b});for(const{pair:[p,b],label:y}of A6){if(!Uie(p,b))continue;const S=[],_=[];for(let A=0;A<4;A++)l[A]===p&&S.push(A),l[A]===b&&_.push(A);const k=Fie(S,_);for(const[A,N]of k){const j=zie(A,N),C=`#${gn[A]}X${gn[N]}_${y}${j?Hd:""}`;Zt(o.jijiBanhap,C)}}if(n&&a)for(let p=0;p<4;p++){const b=r[p]??"";if(b.length<2)continue;const y=`${b[0]}${b[1]}`;vy.has(y)&&Zt(o.ganjiAmhap,`#${j6(gn[p])}_${y}`)}const u=[["",e.daewoon],["",e.sewoon],["",e.wolwoon],["",e.ilwoon]];let d=!1,h=!1;for(const[p,b]of u){if(!b)continue;const y=Le(b);if(!y||y.length<2)continue;const S=yy(y),_=Ii(y);{const A=`${S}${_}`;vy.has(A)&&Zt(o.ganjiAmhap,`#${p}_${A}`)}for(let A=0;A<4;A++){const N=r[A]??"";if(N.length<2)continue;const j=gn[A],C=yy(N),D=Ii(N),P=mi(AT,S,C);P&&Zt(o.cheonganHap,`#${p}X${j}_${P}`);const $=mi(jT,S,C);$&&Zt(o.cheonganChung,`#${p}X${j}_${$}`);const U=mi(OT,_,D);U&&Zt(o.jijiYukhap,`#${p}X${j}_${U}`);const Y=mi(NT,_,D);Y&&Zt(o.jijiChung,`#${p}X${j}_${Y}`);const K=mi(CT,_,D);K&&Zt(o.jijiPa,`#${p}X${j}_${K}`);const F=mi(MT,_,D);F&&Zt(o.jijiHae,`#${p}X${j}_${F}`);const z=mi(DT,_,D);z&&Zt(o.jijiWonjin,`#${p}X${j}_${z}`);const W=mi(PT,_,D);W&&Zt(o.jijiGwimun,`#${p}X${j}_${W}`);const X=mi(RT,_,D);if(X)Zt(o.jijiHyeong,`#${p}X${j}_${X}`);else{const G=mi(LT,_,D);G?Zt(o.jijiHyeong,`#${p}X${j}_${G}`):_===D&&IT.has(_)&&Zt(o.jijiHyeong,`#${p}X${j}_${_}${D}`)}const Z=mi($T,_,D);Z&&Zt(o.amhap,`#${p}X${j}_${Z}`)}for(const A of Ep){if(!A.members.includes(_))continue;const N=A.members.filter(C=>C!==_),j=l.map((C,D)=>({b:C,pos:gn[D]})).filter(C=>C.b&&N.includes(C.b));if(new Set(j.map(C=>C.b)).size===2){const[C,D]=j.map(P=>P.pos).sort((P,$)=>gn.indexOf(P)-gn.indexOf($));Zt(o.jijiSamhap,`#${p}X${C}X${D}_(${A.name})`)}}for(const A of UD){if(!A.members.includes(_))continue;const N=A.members.filter(C=>C!==_),j=l.map((C,D)=>({b:C,pos:gn[D]})).filter(C=>C.b&&N.includes(C.b));if(new Set(j.map(C=>C.b)).size===2){const[C,D]=j.map(P=>P.pos).sort((P,$)=>gn.indexOf(P)-gn.indexOf($));Zt(o.jijiHyeong,`#${p}X${C}X${D}_${A.name}`),A.name===""&&(d=!0),A.name===""&&(h=!0)}}const k=[...r.map((A,N)=>({b:i2[Ii(A)]??Ii(A),pos:gn[N]}))];for(const A of T6){const N=k.filter(j=>A.members.includes(j.b));if(new Set(N.map(j=>j.b)).size===3){const j=N.map(C=>C.pos).join("X");Zt(o.jijiBanghap,`#${j}_(${A.name})`)}}}{const p=[],b=[["",e.daewoon],["",e.sewoon],["",e.wolwoon],["",e.ilwoon]];for(const[y,S]of b){const _=Le(S??"");_.length>=2&&p.push({kind:y,b:Ii(_)})}if(p.length>=2){const y=r.map((S,_)=>({pos:gn[_],b:Ii(S)}));for(const S of UD)for(let _=0;_<p.length;_++)for(let k=_+1;k<p.length;k++){const A=p[_],N=p[k];for(const j of y){const C=new Set([j.b,A.b,N.b]);if(C.size===3&&S.members.every(D=>C.has(D))){const D=[A.kind,N.kind].sort(($,U)=>zD.indexOf($)-zD.indexOf(U)).join("X"),P=`${j.pos}X${D}`;Zt(o.jijiHyeong,`#${P}_${S.name}`),S.name===""&&(d=!0),S.name===""&&(h=!0)}}}}}return(d||h)&&(o.jijiHyeong=o.jijiHyeong.filter(p=>!(d&&/(||)/.test(p)||h&&/(||)/.test(p)))),O6(Hie(o))}function Hie(e){const t=/(|||)X(|||)/,n={...e};for(const r of Object.keys(e)){if(r==="title")continue;const i=e[r];Array.isArray(i)&&(n[r]=i.filter(a=>!t.test(a??"")))}return n}const Gie={:"",:"",:"",:"",:""},GD={:"",:"",:"",:"",:""},qie={:"",:"",:"",:"",:""},Yie={:"",:"",:"",:"",:""},Kie={:.15,:.1,:-.15,:-.2,:-.25};function Wie(e,t){const n=Array.from(new Set(t)).sort((r,i)=>r-i);if(n.length<3)return!1;for(let r=0;r<n.length;r++){const i=n[r],a=n[r+1],o=n[r+2];if(!(a==null||o==null)&&o-i<=2&&(e===i||e===a||e===o))return!0}return!1}function Vie(e){const t=e.includes(gi.month),n=Wie(gi.month,e)||e.length>=3;return t&&n?"":t||e.length>=2?"":""}function Zie(e,t,n,r){const i=r===""?2:r===""?1:.5;e[t]=(e[t]??0)-i,e[n]=(e[n]??0)+i}function Xie(e,t,n={}){const{includeBanghap:r=!0,includeSamhap:i=!0}=n,a=[Le(e[0]??""),Le(e[1]??""),Le(e[2]??""),Le(e[3]??"")],o=a.map(h=>Ii(h)).filter(Boolean),l=[],u={...t},d=(h,p)=>{const b=[];for(let A=0;A<a.length;A++){const N=Ii(a[A]??"");p.members.includes(N)&&b.push(A)}if(!p.members.every(A=>o.includes(A)))return;const S=Vie(b),_=p.out,k=GD[_];Zie(u,k,_,S),l.push({type:h,name:p.name,out:p.out,strength:S})};if(i)for(const h of Ep)d("",h);if(r)for(const h of T6)d("",h);return{applied:l,score:u,strengthAdj:Kie,shengNext:Gie,shengPrev:GD,ke:qie,keInv:Yie}}function xy(e){return gn[e]}function qD(e){const t=new Map,n=new Map;for(let r=0;r<4;r++){const i=Le(e[r]??""),a=yy(i),o=Ii(i);a&&t.set(a,[...t.get(a)??[],r]),o&&n.set(o,[...n.get(o)??[],r])}return{stemPos:t,branchPos:n}}function Vh(e,t,n){const r=[];for(const i of t)for(const a of n)r.push(`#${xy(i)}X${xy(a)}_${e}`);return r}function Jie(e,t){const n=qD(e),r=qD(t),i={:[],:[],:[],:[],:[],:[],:[],:[],:[],:[],:[],:[],:[],:[]},a=(l,u)=>{l.includes(u)||l.push(u)};for(const{pair:[l,u],label:d}of AT){const h=[...n.stemPos.get(l)??[],...n.stemPos.get(u)??[]],p=[...r.stemPos.get(l)??[],...r.stemPos.get(u)??[]];if(h.length&&p.length)for(const b of Vh(d,h,p))a(i.,b)}for(const{pair:[l,u],label:d}of jT){const h=[...n.stemPos.get(l)??[],...n.stemPos.get(u)??[]],p=[...r.stemPos.get(l)??[],...r.stemPos.get(u)??[]];if(h.length&&p.length)for(const b of Vh(d,h,p))a(i.,b)}const o=(l,u)=>{const d=Array.from(n.branchPos.keys()),h=Array.from(r.branchPos.keys());for(const p of d)for(const b of h){const y=mi(u,p,b);if(!y)continue;const S=n.branchPos.get(p)??[],_=r.branchPos.get(b)??[];for(const k of Vh(y,S,_))a(i[l],k)}};o("",OT),o("",NT),o("",CT),o("",MT),o("",DT),o("",PT),o("",RT),o("",LT);for(const l of IT){const u=n.branchPos.get(l)??[],d=r.branchPos.get(l)??[];if(!(!u.length||!d.length))for(const h of Vh(`${l}`,u,d))a(i.,h)}for(const{label:l,pair:[u,d]}of $T){const h=[...n.branchPos.get(u)??[],...n.branchPos.get(d)??[]],p=[...r.branchPos.get(u)??[],...r.branchPos.get(d)??[]];if(!(!h.length||!p.length))for(const b of Vh(l,h,p))a(i.,b)}{const l=Array.from(n.stemPos.keys()),u=Array.from(r.stemPos.keys());for(const d of l)for(const h of u){const p=n.stemPos.get(d)??[],b=r.stemPos.get(h)??[];for(const y of p){const S=Ii(Le(e[y]??"")),_=`${d}${S}`;if(vy.has(_))for(const k of b){const A=Ii(Le(t[k]??""));`${h}${A}`===_&&a(i.,`#${xy(y)}X${xy(k)}_${_}`)}}}}return i}const N6=new Set(Object.keys(Gn)),C6=new Set(Object.keys(Qn)),Qie=e=>e.slice(0,1),eae=e=>e.slice(-1);function Ss(e){return Wd.has(e)?e:N6.has(e)?Gn[e]??e:e}function jr(e){return Dm.has(e)?e:C6.has(e)?Qn[e]??e:e}function jo(e){return Ss(Qie(e))}function Kt(e){return jr(eae(e))}function tae(e){if(!e)return null;const t=Array.from(String(e));let n=null,r=null;for(const i of t)!n&&(Wd.has(i)||N6.has(i))&&(n=Ss(i)),(Dm.has(i)||C6.has(i))&&(r=jr(i));return n&&r?{stem:n,branch:r}:null}function nae(e){return e.map(Kt)}function z0(e,t,n="classic"){const r=jo(t),i=Kt(t),a=(n==="hgc"?Ov:jv)[i]??[];return[r,...a].includes(e)}const a2=[["",""],["",""],["",""],["",""],["",""],["",""]],o2=[["",""],["",""],["",""],["",""],["",""],["",""]],rae=new Set(["","","",""]),M6=[["",""],["",""]],iae=[{set:new Set(["","","","","","","","","",""]),voids:["",""]},{set:new Set(["","","","","","","","","",""]),voids:["",""]},{set:new Set(["","","","","","","","","",""]),voids:["",""]},{set:new Set(["","","","","","","","","",""]),voids:["",""]},{set:new Set(["","","","","","","","","",""]),voids:["",""]},{set:new Set(["","","","","","","","","",""]),voids:["",""]}];function jm(e,t,n){const r=jr(t),i=jr(n);for(const[a,o]of e)if(a===r&&o===i||a===i&&o===r)return!0;return!1}function YD(e,t,n){const r=jr(t),i=jr(n);for(const[a,o]of e)if(a===r&&o===i||a===i&&o===r)return`${a}${o}`;return`${r}${i}`}function wy(e){for(const t of iae)if(t.set.has(e))return t.voids;return null}function s2(e){const t=jr(e),n=[{group:new Set(["","",""]),years:new Set(["","",""])},{group:new Set(["","",""]),years:new Set(["","",""])},{group:new Set(["","",""]),years:new Set(["","",""])},{group:new Set(["","",""]),years:new Set(["","",""])}];for(const r of n)if(r.group.has(t))return Array.from(r.years);return null}const Zn={2:4,1:3,3:2,0:1},Rd={1:4,2:3,0:2,3:1},Se={year:0,month:1,day:2,hour:3};function aae(e){return e===3?"si":e===2?"il":e===1?"wol":"yeon"}const pu=e=>e===0?"":e===1?"":e===2?"":"",Tf=e=>e==="dae"?"":e==="se"?"":e==="wol"?"":"",oae=(e,t)=>`#X${pu(t)}_${e}`,Gd=(e,t,n)=>t===Se.month&&n===Se.day?`#X_${e}`:t===Se.year&&n===Se.month?`#X_${e}`:t===Se.year&&n===Se.day?`#X_${e}`:t===Se.month&&n===Se.hour?`#X_${e}`:t===Se.day&&n===Se.hour?`#X_${e}`:`#${pu(t)}X${pu(n)}_${e}`,U0=(e,t)=>`#${pu(t)}_${e}`,D6=(e,t)=>`#X${pu(t)}_${e}`,sae=(e,t)=>`#(${e==="day"?"":""})X${pu(t)}_`,wd=e=>`#_${e}`,_d=(e,t)=>`#X${Tf(t)}_${e}`,Zh=(e,t)=>`#X${Tf(t)}_${e}`,p1=(e,t,n)=>`#${pu(n)}X${Tf(t)}_${e}`,lae=(e,t)=>`#(${t==="day"?"":""})_${Tf(e)}_`,cae=(e,t)=>`#(${t==="day"?"":""})X${Tf(e)}_`,KD=(e,t)=>`#X${Tf(e)}_${t}`;function l2(e,t){const n=jr(e),r=[Se.day,Se.month,Se.hour,Se.year];for(const i of r)if(Kt(t[i])===n)return{pos:i,weight:Zn[i]??0};return null}function zT(e,t,n){return Kt(t[n])===jr(e)?{pos:n,weight:Zn[n]}:null}function uae(e,t){const n=Ss(e),r=[Se.day,Se.month,Se.hour,Se.year];for(const i of r)if(jo(t[i])===n)return{pos:i,weight:Zn[i]??0};return null}const dae=e=>(Array.isArray(e)?e:String(e).split("")).map(t=>jr(t.trim())).filter(Boolean),mn=e=>Object.fromEntries(Object.entries(e).map(([t,n])=>[Ss(t),dae(n)])),fae=mn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),P6=mn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),hae=mn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),mae=mn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),pae=mn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),gae=mn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),bae=mn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),R6=mn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),yae=mn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),vae=mn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),xae=mn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),wae=mn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),_ae=mn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),L6=mn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Sae=mn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),kae=mn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),WD=mn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Eae=mn({:"",:"",:"",:"",:""}),Tae=mn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),VD=mn({:"",:"",:""}),ZD=mn({:"",:"",:""}),Aae=mn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),I6=mn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),$6=mn({:"",:"",:"",:"",:"",:"",:""}),jae=e=>(Array.isArray(e)?e:String(e).split("")).map(t=>jr(t.trim())).filter(Boolean),ja=e=>Object.fromEntries(Object.entries(e).map(([t,n])=>[jr(t),(Array.isArray(n)?n:[n]).map(r=>jr(r))])),Gv=e=>Object.fromEntries(Object.entries(e).map(([t,n])=>[jr(t),jae(n)])),B6={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},z6={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},U6={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},F6={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Oae=ja({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),XD=ja({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Nae=Gv({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Cae=Gv({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Mae=Gv({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Dae=Gv({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Pae=ja({:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""]}),Rae=ja({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Lae=ja({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Iae=ja({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),$ae=ja({:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""]}),H6=ja({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Bae=ja({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),zae=ja({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Uae=ja({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Fae=ja({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),xn=e=>Object.fromEntries(Object.entries(e).map(([t,n])=>[jr(t),(Array.isArray(n)?n:[n]).map(r=>jr(r))])),Hae=xn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),G6=xn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Gae=xn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),qae=xn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Yae=xn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),q6=xn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Kae=xn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Wae=xn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Vae=xn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Zae=xn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Xae=xn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Y6=xn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Jae=xn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Qae=xn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),eoe=xn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),toe=xn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),noe=xn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),roe=xn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),K6=xn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),ioe=Y6,aoe=G6,ooe=K6,soe=xn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),loe=q6,coe=xn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),uoe=xn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),doe=xn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""});function Tp(e,t){e.push(t)}function g1(e,t,n,r,i=0){const a=Rd[n]>=Rd[r]?n:r;e.push({name:Gd(t,n,r),weight:Zn[a]+i,pos:a})}function foe(e,t,n,r,i){const a=Kt(e[Se.year]),o=t[a];if(!o)return;const l=n==="MONTH"?[Se.month]:n==="DAY"?[Se.day]:n==="HOUR"?[Se.hour]:[Se.year,Se.month,Se.day,Se.hour];for(const u of o)for(const d of l){const h=zT(u,e,d);h&&Tp(i,{name:Gd(r,Se.year,d),weight:h.weight,pos:d})}}function hoe(e,t,n,r){const i=Kt(e[Se.month]),a=t[i];if(!a)return;const o=Ss(a),l=uae(o,e);l&&Tp(r,{name:D6(n,l.pos),weight:l.weight,pos:l.pos})}function JD(e,t,n,r,i="ALL"){const a=Kt(e[Se.month]),o=t[a];if(!o)return;const l=i==="YEAR"?[Se.year]:i==="DAY"?[Se.day]:i==="HOUR"?[Se.hour]:i==="DAY_HOUR"?[Se.day,Se.hour]:[Se.year,Se.month,Se.day,Se.hour];for(const u of o)for(const d of l){const h=zT(u,e,d);if(!h)continue;const p=d===Se.month?`#_${n}`:D6(n,d);Tp(r,{name:p,weight:h.weight,pos:d})}}function QD(e,t,n,r){const i=Kt(e[Se.month]),a=t[i];if(!a)return;const o=e[Se.day];a.includes(o)&&Tp(r,{name:Gd(n,Se.month,Se.day),weight:Zn[Se.day],pos:Se.day})}function eP(e,t,n,r,i){const a=jo(e[Se.day]),o=t[a];if(!o)return;const l=i==="DAY"?[Se.day]:i==="HOUR"?[Se.hour]:[Se.year,Se.month,Se.day,Se.hour];for(const u of o)for(const d of l){const h=zT(u,e,d);h&&Tp(r,{name:oae(n,d),weight:h.weight,pos:d})}}function moe({natal:e,daewoon:t,basis:n}){const r=jo(e[Se.day]),i=Kt(e[Se.day]),a=Kt(e[Se.month]),o=Kt(e[Se.year]),l=nae(e),u=[],d=[],h=[[Hae,"MONTH",""],[G6,"DAY",""],[qae,"MONTH",""],[Yae,"MONTH",""],[Kae,"ALL",""],[Wae,"HOUR",""],[Vae,"ALL",""],[Zae,"ALL",""],[Xae,"ALL",""],[Y6,"ALL",""],[Jae,"ALL",""],[Qae,"ALL",""],[eoe,"ALL",""],[toe,"ALL",""],[noe,"ALL",""],[roe,"ALL",""],[K6,"ALL",""],[ioe,"ALL",""],[aoe,"ALL",""],[ooe,"ALL",""],[soe,"ALL",""],[loe,"ALL",""],[coe,"ALL",""],[uoe,"ALL",""],[doe,"ALL",""]];for(const[C,D,P]of h)foe(e,C,D,P,d);const p=[[B6,""],[z6,""],[U6,""],[F6,""]];for(const[C,D]of p)hoe(e,C,D,u);const b=[[Oae,"","ALL"],[XD,"","YEAR"],[XD,"","DAY"],[Pae,"","ALL"],[Rae,"","ALL"],[Lae,"","ALL"],[Iae,"","ALL"],[$ae,"","ALL"]];for(const[C,D,P]of b)JD(e,C,D,d,P);const y=[[H6,"","ALL"],[Bae,"","DAY_HOUR"],[zae,"","DAY_HOUR"],[Uae,"","ALL"],[Fae,"","ALL"]];for(const[C,D,P]of y)JD(e,C,D,u,P);const S=[[Nae,""],[Dae,""]];for(const[C,D]of S)QD(e,C,D,u);const _=[[Cae,""],[Mae,""]];for(const[C,D]of _)QD(e,C,D,d);const k=[[fae,"","ALL"],[P6,"","ALL"],[hae,"","ALL"],[mae,"","ALL"],[pae,"","ALL"],[gae,"","ALL"],[bae,"","ALL"],[R6,"","ALL"],[yae,"","ALL"],[vae,"","ALL"],[xae,"","ALL"],[wae,"","ALL"],[_ae,"","ALL"],[Aae,"","ALL"]];for(const[C,D,P]of k)eP(e,C,D,u,P);const A=[[L6,"","ALL"],[Sae,"","ALL"],[kae,"","ALL"],[WD,"","DAY"],[WD,"","HOUR"],[VD,"","DAY"],[VD,"","HOUR"],[ZD,"","DAY"],[ZD,"","HOUR"],[Eae,"","DAY"],[Tae,"","ALL"],[I6,"","ALL"]];for(const[C,D,P]of A)eP(e,C,D,d,P);if(new Set(["","","",""]).has(e[Se.day])){d.push({name:wd(""),weight:Zn[Se.day],pos:Se.day});for(const D of[Se.year,Se.month,Se.hour])e[D]===e[Se.day]&&d.push({name:U0("",D),weight:Zn[D],pos:D})}{const C=$6[r];if(C)for(const D of[Se.year,Se.month,Se.day,Se.hour]){const P=jo(e[D]),$=Kt(e[D]);P===r&&C.includes($)&&d.push({name:U0("",D),weight:Zn[D],pos:D})}}for(const[C,D]of M6){const P=l2(C,e),$=l2(D,e);P&&$&&g1(d,"",P.pos,$.pos)}{const C=new Set(["",""]),D=new Set(["","","",""]);for(let P=0;P<=3;P++){const $=jo(e[P]),U=Kt(e[P]);(C.has($)||D.has(U))&&d.push({name:U0("",P),weight:Zn[P],pos:P})}}{const C=e[Se.hour],D=($,U)=>$.includes(r)&&U.includes(C);(D(["",""],["",""])||D(["",""],["",""])||D(["",""],["",""])||D(["",""],["",""])||D(["",""],["",""]))&&d.push({name:wd(""),weight:Zn[Se.hour],pos:Se.hour})}["","","",""].every(C=>l.includes(C))&&u.push({name:wd(""),weight:Zn[Se.day],pos:Se.day});{const C=e[Se.day],D=e[Se.hour];(C===""&&D===""||C===""&&D==="")&&d.push({name:Gd("",Se.day,Se.hour),weight:Zn[Se.hour],pos:Se.hour})}{const C=Kt(e[Se.year]),D=new Set(l.slice(1)),P=(U,Y)=>U.every(K=>D.has(K))&&C===Y;(P(["","",""],"")||P(["","",""],"")||P(["","",""],"")||P(["","",""],""))&&u.push({name:wd(""),weight:Zn[Se.day],pos:Se.day})}(e[Se.day]===""||e[Se.day]==="")&&u.push({name:wd(""),weight:Zn[Se.day],pos:Se.day});{const D={:{rok:"",maStem:""},:{rok:"",maStem:""},:{rok:"",maStem:""},:{rok:"",maStem:""},:{rok:"",maStem:""},:{rok:"",maStem:""},:{rok:"",maStem:""},:{rok:"",maStem:""},:{rok:"",maStem:""},:{rok:"",maStem:""}}[r];D&&e.some($=>Kt($)===D.rok)&&jo(e[Se.hour])===D.maStem&&u.push({name:Gd("",Se.day,Se.hour),weight:Zn[Se.hour],pos:Se.hour})}{const C=Kt(e[Se.hour]),P={:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""}}[r];if(P){const $=i===P.rok,U=C===P.ma,Y=z0(P.rokStem,e[Se.day],"classic")||z0(P.rokStem,e[Se.hour],"classic"),K=z0(P.maStem,e[Se.day],"classic")||z0(P.maStem,e[Se.hour],"classic");$&&U&&(Y||K)&&u.push({name:Gd("",Se.day,Se.hour),weight:Zn[Se.hour],pos:Se.hour})}}{const C=new Set(["","","","","",""]),D=e.map(jo),P=e.map(Kt),$=D.concat(P).filter(F=>C.has(F)).length,U=t?jo(t):"",Y=t?Kt(t):"",K=C.has(U)||C.has(Y);($>=4||$===3&&K)&&d.push({name:wd(""),weight:Zn[Se.day],pos:Se.day})}{const C=new Set(["",""]),D=new Set(["",""]);for(let P=0;P<=3;P++){const $=jo(e[P]),U=Kt(e[P]);(C.has($)||D.has(U))&&d.push({name:U0("",P),weight:Zn[P],pos:P})}}{const C=[[Se.year,Se.month],[Se.year,Se.day],[Se.month,Se.day],[Se.month,Se.hour],[Se.day,Se.hour]];for(const[D,P]of C){const $=Kt(e[D]),U=Kt(e[P]);if(jm(a2,$,U)){const Y=YD(a2,$,U);g1(d,`${Y}`,D,P)}}}{const C=[[Se.year,Se.month,0],[Se.month,Se.day,1],[Se.month,Se.hour,0],[Se.day,Se.hour,0]];for(const[D,P,$]of C){const U=Kt(e[D]),Y=Kt(e[P]);if(jm(o2,U,Y)){const K=YD(o2,U,Y),F=($?1:0)+(rae.has(U+Y)?1:0);g1(d,`${K}`,D,P,F)}}}const N=wy(e[Se.day]),j=wy(e[Se.year]);{const C=(n?.voidBasis??"day")==="day"?N:j;if(C){const[D,P]=C.map(jr);for(const $ of[Se.year,Se.month,Se.day,Se.hour]){const U=Kt(e[$]);(U===D||U===P)&&d.push({name:sae(n?.voidBasis??"day",$),weight:Zn[$],pos:$})}}}return{goodPos:u,badPos:d,dayVoid:N,yearVoid:j,dStem:r,dBranch:i,mBranch:a,yBranch:o,branches:l}}function F0({src:e,luck:t,natal:n,dStem:r,dBranch:i,mBranch:a,yBranch:o,branches:l,dayVoid:u,yearVoid:d,basis:h}){const p=[],b=[],y=(N,j)=>{N.includes(j)||N.push(j)},S=tae(t??null);if(!S)return{good:p,bad:b};const _=S.branch,k=S.stem;Ss(B6[a]??"")===k&&y(p,Zh("",e)),Ss(z6[a]??"")===k&&y(p,Zh("",e)),Ss(U6[a]??"")===k&&y(p,Zh("",e)),Ss(F6[a]??"")===k&&y(p,Zh("",e)),H6[a]?.includes(_)&&y(p,Zh("",e)),P6[r]?.includes(_)&&y(p,_d("",e)),R6[r]?.includes(_)&&y(p,_d("",e)),L6[r]?.includes(_)&&y(b,_d("",e)),I6[r]?.includes(_)&&y(b,_d("",e)),$6[r]?.includes(_)&&y(b,_d("",e)),e==="se"&&(Gae[o]?.includes(_)&&y(b,KD(e,"")),q6[o]?.includes(_)&&y(b,KD(e,"")));for(const N of l)if(jm(M6,_,N)){const j=l2(N,n)?.pos;j!==void 0&&y(b,p1("",e,j));break}new Set(["",""]).has(r)&&new Set(["","","",""]).has(_)&&y(b,_d("",e));const A=(h?.voidBasis??"day")==="day"?u:d;A&&(_===A[0]||_===A[1])&&y(b,lae(e,h?.voidBasis??"day"));for(let N=0;N<=3;N++){const j=Kt(n[N]);jm(a2,_,j)&&y(b,p1("",e,N)),jm(o2,_,j)&&y(b,p1("",e,N))}if(e==="se"){const N=(h?.samjaeBasis??"day")==="day"?i:o,j=N?s2(N):null;j&&j.includes(_)&&y(b,cae(e,h?.samjaeBasis??"day"))}return{good:p,bad:b}}const poe=/^#(|||)X\1_/,goe=e=>poe.test(e);function tP(e){const t=new Map;for(const n of e){if(goe(n.name))continue;const r=`${n.name}@${n.pos}`,i=t.get(r);(!i||n.weight>i.weight)&&t.set(r,n)}return Array.from(t.values()).sort((n,r)=>r.weight!==n.weight?r.weight-n.weight:n.name.localeCompare(r.name,"ko"))}function boe(e){const t=e.lastIndexOf("_");return t>=0?e.slice(t+1):e}const yoe=new Set(["",""]);function voe(e){return yoe.has(e)?!0:e.endsWith("")||e.endsWith("")}function nP(e){const t=new Map;for(const r of e){const i=boe(r.name);t.has(i)||t.set(i,[]),t.get(i).push(r)}const n=[];for(const[r,i]of t)if(voe(r))n.push(...i);else{const a=i.sort((o,l)=>Rd[o.pos]!==Rd[l.pos]?Rd[l.pos]-Rd[o.pos]:l.weight-o.weight)[0];n.push(a)}return n}function rP(e,t){const n={si:[],il:[],yeon:[],wol:[]},r=aae;for(const i of e)n[r(i.pos)].push(i.name);return n}function ef({natal:e,daewoon:t,sewoon:n,wolwoon:r,ilwoon:i,basis:a}){const{goodPos:o,badPos:l,dayVoid:u,yearVoid:d,dStem:h,dBranch:p,mBranch:b,yBranch:y,branches:S}=moe({natal:e,daewoon:t,basis:a}),_=nP(tP(o)),k=nP(tP(l)),A=rP(_),N=rP(k),j=F0({src:"dae",luck:t??null,natal:e,dStem:h,dBranch:p,mBranch:b,yBranch:y,branches:S,dayVoid:u,yearVoid:d,basis:a}),C=F0({src:"se",luck:n??null,natal:e,dStem:h,dBranch:p,mBranch:b,yBranch:y,branches:S,dayVoid:u,yearVoid:d,basis:a}),D=F0({src:"wol",luck:r??null,natal:e,dStem:h,dBranch:p,mBranch:b,yBranch:y,branches:S,dayVoid:u,yearVoid:d,basis:a}),P=F0({src:"il",luck:i??null,natal:e,dStem:h,dBranch:p,mBranch:b,yBranch:y,branches:S,dayVoid:u,yearVoid:d,basis:a});return{good:{...A,dae:j.good,se:C.good,wolun:D.good,ilun:P.good},bad:{...N,dae:j.bad,se:C.bad,wolun:D.bad,ilun:P.bad},meta:{voidPair:{day:wy(e[Se.day])??void 0,year:wy(e[Se.year])??void 0},samjaeYears:{day:s2(Kt(e[Se.day]))??void 0,year:s2(Kt(e[Se.year]))??void 0},currentBasis:{voidBasis:a?.voidBasis??"day",samjaeBasis:a?.samjaeBasis??"day"}}}}function xoe(e){return typeof e=="object"&&e!==null}function Af(e){const t=v6;return xoe(t)&&("Classic"in t||"Modern"in t||"classic"in t||"modern"in t)?e==="classic"?t.Classic:t.Modern:e}const iP=["","","","","","","","","",""],woe=["","","","","","","","","","","",""],_oe=["","","","","","","","","","","",""];function Soe(e){const t=Nv(e);return t===""||t===""?0:t===""||t===""?2:t===""||t===""?4:t===""||t===""?6:8}function koe(e,t){const n=Soe(e);return(t?_oe:woe).map((i,a)=>`${iP[(n+a)%10]??iP[0]}${i}`)}function Om(e){const t=n=>n.toString().padStart(2,"0");return`${e.getFullYear()} ${t(e.getMonth()+1)} ${t(e.getDate())} ${t(e.getHours())} ${t(e.getMinutes())}`}function aP(e){return e<10?`0${e}`:`${e}`}function c2(e){return`${aP(e.getHours())}:${aP(e.getMinutes())}`}function UT(e){return!e||e===""?!0:!/^\d{4}$/.test(e)}function oP(e,t){if(!e||!/^\d{8}$/.test(e))return"";const n=e.slice(0,4),r=e.slice(4,6),i=e.slice(6,8),a=`${n}-${r}-${i}`;return!t||UT(t)?a:`${a} ${t.slice(0,2)}:${t.slice(2,4)}`}function Eoe(e,t,n){if(n)return"";const r=(e??"").trim();if(r)return r;const i=t instanceof Date?t:new Date(t);return Number.isNaN(i.getTime())?"":c2(i)}const sP=["","/",""],Toe="/";function W6(e,t){return e&&sP.includes(e)?e:t&&sP.includes(t)?t:Toe}function lP(e){return e===""}function Aoe(e){return e===""?"":""}function joe(e){switch(e){case"":return 1;case"":return 2;case"":return 3;case"":default:return 0}}const Ooe=e=>e instanceof Date&&!Number.isNaN(e.getTime());function u2(e,t){const n=UT(e.birthTime);let r=Number(e.birthDay?.slice(0,4)??2e3),i=Number(e.birthDay?.slice(4,6)??1),a=Number(e.birthDay?.slice(6,8)??1);if(e.calendarType==="lunar"){const j=Wi(r,i,a);r=j.getFullYear(),i=j.getMonth()+1,a=j.getDate()}const o=n?4:Number(e.birthTime?.slice(0,2)??4),l=n?30:Number(e.birthTime?.slice(2,4)??30),u=new Date(r,i-1,a,o,l,0,0),d=!e.birthPlace||e.birthPlace.name===""||!e.birthPlace.lon,h=d?127.5:e.birthPlace.lon,p=Ooe(e.corrected);let b;p?b=e.corrected:d?b=u:b=wp(u,h,n);const y=t?new Date(b.getTime()-3600*1e3):b,S=W6(e.mingSikType),_=st(y,h),k=St(y,h),A=mt(y,S),N=n?null:Qa(y,S);return{corrected:y,year:{stem:_.charAt(0),branch:_.charAt(1)},month:{stem:k.charAt(0),branch:k.charAt(1)},day:{stem:A.charAt(0),branch:A.charAt(1)},hour:N?{stem:N.charAt(0),branch:N.charAt(1)}:null}}const Noe=[{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""}],Coe=(()=>{const e={};for(const t of Noe){const[n,r]=t.keys;e[n]={label:t.label,elem:t.elem},e[r]={label:t.label,elem:t.elem}}return e})(),Moe={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};function Doe(e,t){const n=`${Nv(e)}${YE(t)}`;return Coe[n]??null}function Poe(e){switch(e){case"":return"bg-green-600 text-white";case"":return"bg-red-600 text-white";case"":return"bg-yellow-600 text-white";case"":return"bg-gray-500 text-white";case"":return"bg-blue-700 text-white";default:return"bg-neutral-700 text-white"}}function Roe(e){switch(Moe[YE(e)]){case"":return"bg-green-600 text-white border-green-600";case"":return"bg-red-600 text-white border-red-600";case"":return"bg-yellow-500 text-white border-yellow-500";case"":return"bg-gray-400 text-white border-gray-400";case"":return"bg-blue-900 text-white border-blue-600";default:return"bg-neutral-700 text-white border-neutral-700"}}function Loe({stem:e,branch:t}){const n=Doe(e,t);if(!n)return null;const r=Poe(n.elem);return g.jsx("span",{className:`inline-block mt-1 px-1.5 py-[2px] rounded ${r} border border-white/10 text-nowrap`,title:`${n.label}  ${n.elem}`,children:n.label})}function cP({value:e,kind:t,charType:n,thinEum:r,highlighted:i}){const{settings:a}=vn(),o=Yi(e,t,a),l=xi(e,t,n),u=eo(e,t),d=r&&u?"font-thin":"font-bold",h=i?"border-purple-500 border-3":"border-neutral-200 dark:border-neutral-800";return g.jsx("div",{className:`w-11 h-11 sm:w-14 sm:h-14 md:w-14 md:h-14 rounded-md ${o}
                  flex items-center justify-center border ${h}`,children:g.jsx("span",{className:`text-[24px] md:text-2xl ${d} `,children:l})})}function V6({title:e,data:t,dayStem:n,charType:r,thinEum:i,showSipSin:a,showUnseong:o,showShinsal:l,showNabeum:u,hiddenMode:d,hiddenStemMode:h,calcUnseong:p,calcShinsal:b,size:y="regular",highlightedStem:S=!1,highlightedBranch:_=!1}){const k=y==="compact"?"py-1 text-center text-xs tracking-wider":"px-2 py-1 text-center text-xs tracking-wider",A=y==="compact"?"py-2":"p-2";return g.jsxs("div",{className:"rounded-xl bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 overflow-hidden",children:[g.jsx("div",{className:`${k} bg-neutral-50 dark:bg-neutral-800/60 text-neutral-600 dark:text-neutral-300`,children:e}),g.jsx("div",{className:`${A} flex flex-col items-center gap-1`,children:t?g.jsxs(g.Fragment,{children:[a&&g.jsx("div",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:_a(n,{stem:t.stem})}),g.jsx(cP,{value:t.stem,kind:"stem",charType:r,thinEum:i,highlighted:S}),g.jsx(cP,{value:t.branch,kind:"branch",charType:r,thinEum:i,highlighted:_}),g.jsx(MB,{branch:t.branch,dayStem:n,mode:d,mapping:h}),(o||l||u)&&g.jsxs("div",{className:"text-[11px] text-neutral-500 dark:text-neutral-400 mt-1 text-center space-y-0.5 w-full",children:[o&&g.jsx("div",{children:p(t.branch)}),l&&g.jsx("div",{children:b(t.branch)}),u&&g.jsx(Loe,{stem:t.stem,branch:t.branch})]})]}):g.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:" "})})]})}const Ioe=(e,t,n,r)=>{let i=e.data.stem,a=e.data.branch;return e.key==="daeun"&&t&&(i=t.charAt(0),a=t.charAt(1)),e.key==="seun"&&n&&(i=n.charAt(0),a=n.charAt(1)),e.key==="wolun"&&r&&(i=r.charAt(0),a=r.charAt(1)),{stem:i,branch:a}};function $oe({cards:e,isDesktop:t,dayStem:n,charType:r,thinEum:i,showSipSin:a,showUnseong:o,showShinsal:l,showNabeum:u,hiddenMode:d,hiddenStemMode:h,calcUnseong:p,calcShinsal:b,daeGz:y,seGz:S,wolGz:_,highlightMap:k={}}){const A=t?"regular":"compact",N=e.length===1?"grid-cols-1":e.length===2?"grid-cols-2":"grid-cols-3",j="rounded-lg bg-white dark:bg-neutral-900 text-neutral-900 dark:text-white border border-neutral-200 dark:border-neutral-700 shadow",C=t?"px-3 py-1 text-md text-neutral-600 dark:text-neutral-300":"px-3 py-1 text-[11px] text-neutral-600 dark:text-neutral-300",D=t?`grid gap-2 p-3 ${N}`:`grid gap-1 p-0 ${N}`;return g.jsxs("div",{className:j,children:[g.jsx("div",{className:C,children:g.jsx("b",{children:""})}),g.jsx("div",{className:"pb-2",children:g.jsx("div",{className:D,children:e.map(P=>{const $=Ioe(P,y,S,_),U=k[P.key]??{stem:!1,branch:!1};return g.jsx(V6,{title:P.label,data:$,dayStem:n,charType:r,thinEum:i,showSipSin:a,showUnseong:o,showShinsal:l,showNabeum:u,hiddenMode:d,hiddenStemMode:h,calcUnseong:p,calcShinsal:b,size:A,highlightedStem:U.stem,highlightedBranch:U.branch},P.key)})})})]})}function Boe({pillars:e,isDesktop:t,dayStem:n,charType:r,thinEum:i,showSipSin:a,showUnseong:o,showShinsal:l,showNabeum:u,hiddenMode:d,hiddenStemMode:h,calcUnseong:p,calcShinsal:b,highlightMap:y={}}){const S=t?"regular":"compact",_=t?"px-3 py-1 text-md text-neutral-600 dark:text-neutral-300":"px-3 py-1 text-[11px] text-neutral-600 dark:text-neutral-300",k=t?"grid grid-cols-4 gap-2 p-3":"grid grid-cols-4 gap-1";return g.jsxs("div",{className:"flex-2 rounded-lg bg-white dark:bg-neutral-900 text-neutral-900 dark:text-white border border-neutral-200 dark:border-neutral-700 shadow",children:[g.jsx("div",{className:_,children:g.jsx("b",{children:""})}),g.jsx("div",{className:t?"pb-2":"px-1 pb-2",children:g.jsx("div",{className:k,children:e.map(A=>{const N=y[A.key]??{stem:!1,branch:!1};return g.jsx(V6,{title:A.label,data:A.data,dayStem:n,charType:r,thinEum:i,showSipSin:a,showUnseong:o,showShinsal:l,showNabeum:u,hiddenMode:d,hiddenStemMode:h,calcUnseong:p,calcShinsal:b,size:S,highlightedStem:N.stem,highlightedBranch:N.branch},A.key)})})})]})}function zoe({hourCandidates:e,useInsi:t,onToggleRule:n,manualHour:r,onSelectHour:i}){return g.jsxs("div",{className:"mt-4 p-3 border rounded bg-neutral-50 dark:bg-neutral-800",children:[g.jsxs("div",{className:"flex items-center justify-between mb-2",children:[g.jsx("span",{className:"font-semibold text-sm text-neutral-700 dark:text-neutral-300",children:" "}),g.jsx("button",{onClick:n,className:"px-2 py-1 text-xs rounded border bg-white dark:bg-neutral-900 border-neutral-300 dark:border-neutral-600 cursor-pointer",children:t?" : ":" : "})]}),g.jsx("div",{className:"grid grid-cols-4 gap-2",children:e.map(a=>{const o=a.charAt(0),l=a.charAt(1),u=r?.stem===o&&r?.branch===l;return g.jsx("button",{onClick:()=>i(o,l),className:`p-2 text-xs rounded border cursor-pointer ${u?Roe(l):"bg-white dark:bg-neutral-900 text-neutral-700 dark:text-neutral-200 border-neutral-300 dark:border-neutral-600"}`,title:`${a} ( )`,children:a},a)})})]})}function Uoe(e){const i=e.trim().replace(/^#?(|||)(X(|||))?_/u,"").replace(/\((|||)\)$/u,"").replace(/\s+/g," ").trim(),a=i.includes("_")?i.split("_").pop()??i:i;return a.includes("")?"":a.includes("")?"":a.includes("")?"":a===""||a===""||a===""?"":a}const Xh={:{title:"()",kind:"",oneLine:"     .",bullets:["  ,   ."]},:{title:"()",kind:"",oneLine:"    ."},:{title:"()",kind:"",oneLine:"    ."},:{title:"()",kind:"",oneLine:"   :   ."},:{title:"() / ",kind:"",oneLine:"   ."},:{title:"()",kind:"",oneLine:"    ."},:{title:"()",kind:"",oneLine:"   ."},:{title:"()",kind:"",oneLine:" ,    ."},:{title:"()",kind:"",oneLine:"  (  ) ."},:{title:"()",kind:"",oneLine:"     ."},:{title:"()",kind:"",oneLine:"    ."},:{title:"()",kind:"",oneLine:"  / ."},:{title:"()",kind:"",oneLine:"    ."},:{title:"()",kind:"",oneLine:"()   ."},:{title:"()",kind:"",oneLine:"  ()  ."},:{title:"()",kind:"",oneLine:"  :   ."},:{title:"()",kind:"",oneLine:"    ."},:{title:"()",kind:"",oneLine:"+     ."},:{title:"()",kind:"",oneLine:"///   ."},:{title:"()",kind:"",oneLine:"   ."},:{title:"()",kind:"",oneLine:"   ."},:{title:"()",kind:"",oneLine:"   ."},:{title:"() / ",kind:"",oneLine:"   ."},:{title:"()",kind:"",oneLine:"    ."},:{title:"()",kind:"",oneLine:"//     ."},:{title:"()",kind:"",oneLine:"  :   ."},:{title:"()",kind:"",oneLine:"   : //."},:{title:"",kind:"",oneLine:"  :   ."},:{title:"",kind:"",oneLine:"  :  ."},:{title:"()",kind:"",oneLine:"//     ."},:{title:"()",kind:"",oneLine:"    ."},:{title:"()",kind:"",oneLine:" //  ."},:{title:"()",kind:"",oneLine:"   ."},:{title:"()",kind:"",oneLine:"  : ."},:{title:"()",kind:"",oneLine:": /  ."},:{title:"",kind:"",oneLine:"      ."},:{title:"()",kind:"",oneLine:"   ."},:{title:"()",kind:"",oneLine:"  ."},:{title:"()",kind:"",oneLine:" / :   ."},:{title:"()",kind:"",oneLine:"()  ."},:{title:"()",kind:"",oneLine:"   ."},:{title:"()",kind:"",oneLine:"/ :  ."},:{title:"()",kind:"",oneLine:"   ."},:{title:"()",kind:"",oneLine:"   ."},:{title:"()",kind:"",oneLine:"   ."},:{title:"()",kind:"",oneLine:" / :    ."},:{title:"()",kind:"",oneLine:" :   / ."},:{title:"",kind:"",oneLine:"   ."},:{title:"()",kind:"",oneLine:"() //  ."},:{title:"()",kind:"",oneLine:" :      ."},:{title:"()",kind:"",oneLine:" ."},:{title:"()",kind:"",oneLine:"  :  ."},:{title:"()",kind:"",oneLine:"//    ."},:{title:"()",kind:"",oneLine:"    : ."},:{title:"",kind:"",oneLine:"  : //."},:{title:"()",kind:"",oneLine:"/  ."},:{title:"()",kind:"",oneLine:"  : ."},:{title:"()",kind:"",oneLine:" : /  ."},:{title:"()",kind:"",oneLine:"  :  ."},:{title:"()",kind:"",oneLine:" () ."},:{title:"()",kind:"",oneLine:"  ,    ."},:{title:"",kind:"",oneLine:":  ."},:{title:"",kind:"",oneLine:" /  ."},:{title:"()",kind:"",oneLine:"/ :  ."},:{title:"()",kind:"",oneLine:"/ :  ."},:{title:"()",kind:"",oneLine:"      :    ."},:{title:"",kind:"",oneLine:"    ."},:{title:"()",kind:"",oneLine:" .       ."},:{title:"()",kind:"",oneLine:" .     ."},:{title:"()",kind:"",oneLine:"  .      ."},:{title:"()",kind:"",oneLine:" :  ."},:{title:"()",kind:"",oneLine:"  :  ."},:{title:"()",kind:"",oneLine:"   :  ."},:{title:"()",kind:"",oneLine:" :  /,   ."},:{title:"",kind:"",oneLine:"      ."},:{title:"()",kind:"",oneLine:"/  :    ."},:{title:"()",kind:"",oneLine:"  :   ."},:{title:"()",kind:"",oneLine:"  : /  ."},:{title:"()",kind:"",oneLine:"  : // ."},:{title:"()",kind:"",oneLine:"   :  ."},:{title:"()",kind:"",oneLine:"//   ."},:{title:"()",kind:"",oneLine:"/  :  ."},:{title:"()",kind:"",oneLine:"/    ."},:{title:"()",kind:"",oneLine:" :    ,  /  ."}};function Foe(e){const t=Uoe(e),n=Xh[t];if(n)return n;if(t.endsWith("")){const r=t.replace(/$/,"");if(Xh[r])return Xh[r]}else{const r=`${t}`;if(Xh[r])return Xh[r]}return{title:t||"",kind:"",oneLine:" "}}function Hoe(e){const t=`${e.title}  ${e.kind}`,n=e.oneLine,r=(e.bullets??[]).map(i=>`- ${i}`).join(`
`);return r?`${t}
${n}
${r}`:`${t}
${n}`}function So({columnKey:e,title:t,goodTags:n,badTags:r,isDesktop:i,openTagKey:a,setOpenTagKey:o}){const l=d2(n,_y),u=d2(r,_y),d=i||l.length>0,h=i||u.length>0;return!i&&l.length===0&&u.length===0?null:g.jsxs("div",{className:"flex-1 rounded-md border border-neutral-200 dark:border-neutral-800 p-2",children:[g.jsx("div",{className:"text-[11px] text-neutral-500 dark:text-neutral-400 mb-1",children:t}),g.jsxs("div",{className:"space-y-2",children:[g.jsxs("div",{children:[d&&g.jsx("div",{className:"text-[10px] text-emerald-600 dark:text-emerald-400 mb-1",children:""}),g.jsx(uP,{tags:n,idPrefix:`${e}-good`,isDesktop:i,openTagKey:a,setOpenTagKey:o})]}),g.jsxs("div",{children:[h&&g.jsx("div",{className:"text-[10px] text-rose-600 dark:text-rose-400 mb-1",children:""}),g.jsx(uP,{tags:r,idPrefix:`${e}-bad`,isDesktop:i,openTagKey:a,setOpenTagKey:o})]})]})]})}function uP({tags:e,idPrefix:t,isDesktop:n,openTagKey:r,setOpenTagKey:i}){const a=d2(e,_y);return a.length===0?n?g.jsx("div",{className:"text-[11px] text-neutral-400 text-center",children:""}):null:g.jsx("div",{className:"flex flex-row flex-wrap desk:flex-col gap-1",children:a.map((o,l)=>{const u=`${t}-${l}`;return g.jsx(Goe,{tag:o,id:u,openTagKey:r,setOpenTagKey:i},u)})})}function Goe({tag:e,id:t,openTagKey:n,setOpenTagKey:r}){const i=n===t,a=Foe(e),o=a?Hoe(a):"",l=_y(e),u=w.useRef(null),d=w.useRef(null),[h,p]=w.useState("center");return w.useLayoutEffect(()=>{if(!i)return;const b=d.current;if(!b)return;const y=b.getBoundingClientRect(),_=Math.min(300,window.innerWidth-16*2),k=y.left,A=window.innerWidth-y.right;A<_/2&&k>A?p("right"):k<_/2&&A>k?p("left"):p("center")},[i]),w.useLayoutEffect(()=>{if(!i)return;const b=y=>{const S=y.target;!u.current||S&&u.current.contains(S)||r(null)};return document.addEventListener("mousedown",b),document.addEventListener("touchstart",b),()=>{document.removeEventListener("mousedown",b),document.removeEventListener("touchstart",b)}},[i,r]),g.jsxs("div",{ref:u,className:"relative",children:[g.jsx("button",{ref:d,type:"button",onClick:()=>r(i?null:t),className:["px-2 py-1 text-[12px] desk:text-[11px] text-center  rounded border desk:break-keep w-full cursor-pointer ",i?"bg-purple-500/20 text-purple-200 border-purple-500":"bg-neutral-50 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-300 border-neutral-200 dark:border-neutral-700"].join(" "),title:l,children:l}),a&&i&&g.jsx("div",{className:["absolute top-full mt-2 z-50",h==="left"?"left-0":h==="right"?"right-0":"left-1/2 -translate-x-1/2"].join(" "),children:g.jsx("div",{className:"relative whitespace-pre-wrap break-words break-keep rounded-md border border-neutral-700 bg-neutral-900 text-neutral-100 text-[10px] leading-4 p-2 shadow-lg text-center",style:{width:"min(190px, calc(100vw - 24px))"},children:o})})]})}function _y(e){const t=e.replace(/^#/,""),n=t.split("_"),r=n.length>1?n[n.length-1]:t,i=r.split(" ").filter(Boolean);return i.length>0?i[i.length-1]:r}function d2(e,t){const n=new Set,r=[];for(const i of e){const a=t(i);n.has(a)||(n.add(a),r.push(i))}return r}function qoe({isDesktop:e,exposureLevel:t,relationChips:n,relationByPillar:r,activeRelationTag:i,onToggleRelationTag:a,showRelationBox:o,showEtcShinsalBox:l,etcShinsalGood:u,etcShinsalBad:d}){const[h,p]=w.useState(!0),[b,y]=w.useState(!0),[S,_]=w.useState(null);return g.jsxs(g.Fragment,{children:[o&&g.jsx("div",{className:"px-2 desk:px-0 py-2",children:g.jsxs("div",{className:"rounded-lg border border-neutral-200 dark:border-neutral-800 bg-white dark:bg-neutral-900 p-3",children:[g.jsxs("button",{type:"button",onClick:()=>p(k=>!k),className:["w-full flex items-center justify-between pl-1 text-xs text-neutral-600 dark:text-neutral-300 cursor-pointer",h?"mb-1":"mb-0"].join(" "),children:[g.jsx("span",{children:""}),g.jsx("span",{className:"text-[10px]",children:h?"":""})]}),h&&g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"text-[11px] text-amber-600 dark:text-amber-300 pl-1 mb-2",children:"     ."}),n.length===0?g.jsx("div",{className:"text-xs text-neutral-400",children:"  ."}):g.jsxs("div",{className:"grid w-full gap-2 desk:gap-4 grid-cols-1",style:{gridTemplateColumns:e?t>=3?"4fr 5fr":t>=2?"3.5fr 6.5fr":t>=1?"2fr 8fr":"1fr":void 0},children:[g.jsx("div",{className:"border-t desk:border-0 border-neutral-200 dark:border-neutral-800 pt-2 desk:pt-0 order-2 desk:order-1 flex-4 grid grid-cols-1 gap-1 desk:gap-2",style:{gridTemplateColumns:e?`repeat(${t>=3?3:t>=2?2:t>=1?1:0}, minmax(60px, 1fr))`:void 0},children:(e?[t>=3&&g.jsx(ko,{title:"",tags:r.luck.wol,activeTag:i,onToggle:a},"wol"),t>=2&&g.jsx(ko,{title:"",tags:r.luck.se,activeTag:i,onToggle:a},"se"),t>=1&&g.jsx(ko,{title:"",tags:r.luck.dae,activeTag:i,onToggle:a},"dae")]:[t>=1&&g.jsx(ko,{title:"",tags:r.luck.dae,activeTag:i,onToggle:a},"dae"),t>=2&&g.jsx(ko,{title:"",tags:r.luck.se,activeTag:i,onToggle:a},"se"),t>=3&&g.jsx(ko,{title:"",tags:r.luck.wol,activeTag:i,onToggle:a},"wol")]).filter(Boolean)}),g.jsxs("div",{className:"order-1 desk:order-2 flex flex-col desk:flex-row flex-5 gap-1 desk:gap-2 desk:pl-0 desk:border-t-0 desk:border-l-0",children:[g.jsx(ko,{title:"",tags:r.natal.hour,activeTag:i,onToggle:a}),g.jsx(ko,{title:"",tags:r.natal.day,activeTag:i,onToggle:a}),g.jsx(ko,{title:"",tags:r.natal.month,activeTag:i,onToggle:a}),g.jsx(ko,{title:"",tags:r.natal.year,activeTag:i,onToggle:a})]})]})]})]})}),l&&g.jsx("div",{className:"px-2 desk:px-0 py-2",children:g.jsxs("div",{className:"rounded-lg border border-neutral-200 dark:border-neutral-800 bg-white dark:bg-neutral-900 p-3",children:[g.jsxs("button",{type:"button",onClick:()=>y(k=>!k),className:["w-full flex items-center justify-between pl-1 text-xs text-neutral-600 dark:text-neutral-300 cursor-pointer",b?"mb-1":"mb-0"].join(" "),children:[g.jsx("span",{children:""}),g.jsx("span",{className:"text-[10px]",children:b?"":""})]}),b&&g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"pl-1 text-[11px] text-amber-600 dark:text-amber-300 mb-2",children:"       ."}),dP(u)||dP(d)?g.jsxs("div",{className:"grid w-full gap-2 desk:gap-4 grid-cols-1",style:{gridTemplateColumns:e?t>=3?"4fr 5fr":t>=2?"3.5fr 6.5fr":t>=1?"2fr 8fr":"1fr":void 0},children:[g.jsx("div",{className:"order-2 desk:order-1 flex-4 grid grid-cols-1 gap-1 desk:gap-2",style:{gridTemplateColumns:e?`repeat(${t>=3?3:t>=2?2:t>=1?1:0}, minmax(60px, 1fr))`:void 0},children:(e?[t>=3&&g.jsx(So,{columnKey:"etc-luck-wol",title:"",goodTags:u.luck.wol,badTags:d.luck.wol,isDesktop:e,openTagKey:S,setOpenTagKey:_},"luck-wol"),t>=2&&g.jsx(So,{columnKey:"etc-luck-se",title:"",goodTags:u.luck.se,badTags:d.luck.se,isDesktop:e,openTagKey:S,setOpenTagKey:_},"luck-se"),t>=1&&g.jsx(So,{columnKey:"etc-luck-dae",title:"",goodTags:u.luck.dae,badTags:d.luck.dae,isDesktop:e,openTagKey:S,setOpenTagKey:_},"luck-dae")]:[t>=1&&g.jsx(So,{columnKey:"etc-luck-dae",title:"",goodTags:u.luck.dae,badTags:d.luck.dae,isDesktop:e,openTagKey:S,setOpenTagKey:_},"luck-dae"),t>=2&&g.jsx(So,{columnKey:"etc-luck-se",title:"",goodTags:u.luck.se,badTags:d.luck.se,isDesktop:e,openTagKey:S,setOpenTagKey:_},"luck-se"),t>=3&&g.jsx(So,{columnKey:"etc-luck-wol",title:"",goodTags:u.luck.wol,badTags:d.luck.wol,isDesktop:e,openTagKey:S,setOpenTagKey:_},"luck-wol")]).filter(Boolean)}),g.jsxs("div",{className:"order-1 desk:order-2 flex flex-col desk:flex-row flex-5 gap-1 desk:gap-2",children:[g.jsx(So,{columnKey:"etc-natal-hour",title:"",goodTags:u.natal.hour,badTags:d.natal.hour,isDesktop:e,openTagKey:S,setOpenTagKey:_}),g.jsx(So,{columnKey:"etc-natal-day",title:"",goodTags:u.natal.day,badTags:d.natal.day,isDesktop:e,openTagKey:S,setOpenTagKey:_}),g.jsx(So,{columnKey:"etc-natal-month",title:"",goodTags:u.natal.month,badTags:d.natal.month,isDesktop:e,openTagKey:S,setOpenTagKey:_}),g.jsx(So,{columnKey:"etc-natal-year",title:"",goodTags:u.natal.year,badTags:d.natal.year,isDesktop:e,openTagKey:S,setOpenTagKey:_})]})]}):g.jsx("div",{className:"text-xs text-neutral-400",children:"  ."})]})]})})]})}function ko({title:e,tags:t,activeTag:n,onToggle:r}){return g.jsxs("div",{className:"flex-1 rounded-md border border-neutral-200 dark:border-neutral-800 p-2",children:[g.jsx("div",{className:"text-[11px] text-neutral-500 dark:text-neutral-400 mb-1",children:e}),t.length===0?g.jsx("div",{className:"text-[11px] text-neutral-400 text-center",children:""}):g.jsx("div",{className:"flex flex-row flex-wrap desk:flex-col gap-1",children:t.map(i=>{const a=n===i;return g.jsx("button",{type:"button",onClick:()=>r(a?null:i),className:["px-2 py-1 text-[12px] desk:text-[11px] rounded border transition desk:break-keep cursor-pointer",a?"bg-purple-500 text-white border-purple-500":"bg-neutral-50 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-300 border-neutral-200 dark:border-neutral-700"].join(" "),title:i,children:Yoe(i)},i)})})]})}function Yoe(e){const t=e.replace(/^#/,""),n=t.split("_");return(n.length>1?n.slice(1).join("_"):t).replace(/_/g," ")}function dP(e){const{natal:t,luck:n}=e;return t.hour.length>0||t.day.length>0||t.month.length>0||t.year.length>0||n.dae.length>0||n.se.length>0||n.wol.length>0}function fP(e){return String(e).padStart(2,"0")}function Koe(e,t,n){if(!e||e.length<8)return oP(e,t);const r=oP(e,t);if(n!=="lunar")return r;try{const i=Number(e.slice(0,4)),a=Number(e.slice(4,6)),o=Number(e.slice(6,8)),l=Wi(i,a,o);return` ${`${l.getFullYear()}.${fP(l.getMonth()+1)}.${fP(l.getDate())}`} ( ${r})`}catch{return` ${r}`}}function Woe({data:e,hourTable:t}){const{date:n,setDstOffsetMinutes:r}=Xr(),i=vn(Oe=>Oe.settings),a=i.showNabeum??!0,o=i.showRelationBox??!0,l=i.showEtcShinsal??!0,u=W6(e.mingSikType,t),d=!e.birthPlace||e.birthPlace.name===""||!e.birthPlace.lon?127.5:e.birthPlace.lon,{solarY:h,solarM:p,solarD:b}=w.useMemo(()=>{let Oe=Number(e.birthDay?.slice(0,4)??2e3),Me=Number(e.birthDay?.slice(4,6)??1),Be=Number(e.birthDay?.slice(6,8)??1);if(e.calendarType==="lunar"){const lt=Wi(Oe,Me,Be);Oe=lt.getFullYear(),Me=lt.getMonth()+1,Be=lt.getDate()}return{solarY:Oe,solarM:Me,solarD:Be}},[e.birthDay,e.calendarType]),y=by(Oe=>Oe.useDST),S=by(Oe=>Oe.setUseDST);w.useEffect(()=>{h&&p&&b&&S(Gm(h,p,b))},[h,p,b,S]),w.useEffect(()=>{r(y?-60:0)},[y,r]);const _=UT(e.birthTime),[k,A]=w.useState(()=>u2(e,y));w.useEffect(()=>{A(u2(e,y))},[e,y]);const N=e.id??`${e.birthDay}-${e.birthTime}-${e.name??""}`,j=k.day.stem,[C,D]=w.useState(null),[P,$]=w.useState(()=>lP(e.mingSikType));w.useEffect(()=>{D(null),$(lP(e.mingSikType))},[N,e.mingSikType]),w.useEffect(()=>{we(null)},[N]);const U=w.useMemo(()=>koe(j,P),[P,j]),Y=C??k.hour,K=bp(Oe=>Oe.setManualHour),F=(Oe,Me)=>{const Be={stem:Oe,branch:Me};D(Be),K(Be)},z=Aoe(i.sinsalBase)===""?k.day.branch:k.year.branch,W=Oe=>i.showSibiUnseong?Ho(j,Oe):null,X=Oe=>i.showSibiSinsal?Go({baseBranch:z,targetBranch:Oe,era:Af(i.sinsalMode),gaehwa:i.sinsalBloom}):null,Z=y?-60:0,G=Oie(e,u,Z),J=uie({query:"(min-width: 992px)"}),te=i.hiddenStem==="regular"?"main":"all",ce=joe(i.exposure),oe=ce===0?[]:G.filter(Oe=>(Oe.key==="daeun"?1:Oe.key==="seun"?2:3)<=ce),B=Gm(h,p,b),V=()=>S(!y),ie=w.useMemo(()=>{const Oe=e.corrected instanceof Date?e.corrected:new Date(String(e.corrected??""));return Number.isNaN(Oe.getTime())?k.corrected:Oe},[e.corrected,k.corrected]),Q=w.useMemo(()=>ie&&(B&&y?new Date(ie.getTime()-3600*1e3):ie),[ie,B,y]),se=w.useMemo(()=>{const Oe=B&&y?"":e.correctedLocal;return Eoe(Oe,Q??new Date,_)},[e.correctedLocal,Q,_,B,y]),me=Hv(e,t,n,{dstOffsetMinutes:Z}),he=me.dae.gz,_e=me.se.gz,re=me.wol.gz,[Ee,we]=w.useState(null),le=w.useMemo(()=>{const Oe=Me=>Me?.stem&&Me?.branch?`${Me.stem}${Me.branch}`:"";return Il({natal:[Oe(k.year),Oe(k.month),Oe(k.day),Oe(Y)],daewoon:he??void 0,sewoon:_e??void 0,wolwoon:re??void 0})},[k,Y,he,_e,re]),Ue=w.useMemo(()=>{const Oe=[...le.cheonganHap,...le.cheonganChung,...le.jijiSamhap,...le.jijiBanhap,...le.jijiBanghap,...le.jijiYukhap,...le.jijiChung,...le.jijiHyeong,...le.jijiPa,...le.jijiHae,...le.amhap,...le.ganjiAmhap].filter(Me=>Me&&Me!=="#");return Array.from(new Set(Oe))},[le]),Fe=w.useMemo(()=>{const Oe=(Be,lt)=>{Be.includes(lt)||Be.push(lt)},Me={luck:{wol:[],se:[],dae:[]},natal:{hour:[],day:[],month:[],year:[]}};for(const Be of Ue){const ue=(Be.replace(/^#/,"").split("_")[0]??"").split("X").filter(Boolean);ue.includes("")&&Oe(Me.luck.wol,Be),ue.includes("")&&Oe(Me.luck.se,Be),ue.includes("")&&Oe(Me.luck.dae,Be),ue.includes("")&&Oe(Me.natal.hour,Be),ue.includes("")&&Oe(Me.natal.day,Be),ue.includes("")&&Oe(Me.natal.month,Be),ue.includes("")&&Oe(Me.natal.year,Be)}return Me},[Ue]),Ne=w.useMemo(()=>{const Oe=lt=>lt?.stem&&lt?.branch?`${lt.stem}${lt.branch}`:"",Me=ef({natal:[Oe(k.year),Oe(k.month),Oe(k.day),Oe(Y)],daewoon:he??void 0,sewoon:_e??void 0,wolwoon:re??void 0}),Be=lt=>Array.from(new Set(lt.filter(ue=>ue&&ue!=="#")));return{good:{natal:{hour:Be(Me.good.si??[]),day:Be(Me.good.il??[]),month:Be(Me.good.wol??[]),year:Be(Me.good.yeon??[])},luck:{dae:Be(Me.good.dae??[]),se:Be(Me.good.se??[]),wol:Be(Me.good.wolun??[])}},bad:{natal:{hour:Be(Me.bad.si??[]),day:Be(Me.bad.il??[]),month:Be(Me.bad.wol??[]),year:Be(Me.bad.yeon??[])},luck:{dae:Be(Me.bad.dae??[]),se:Be(Me.bad.se??[]),wol:Be(Me.bad.wolun??[])}}}},[k,Y,he,_e,re]),Pe=w.useMemo(()=>{const Oe={},Me=(Be,lt)=>{for(const ue of Be)Oe[ue]=lt};return Me(le.cheonganHap,"stem"),Me(le.cheonganChung,"stem"),Me(le.jijiSamhap,"branch"),Me(le.jijiBanhap,"branch"),Me(le.jijiBanghap,"branch"),Me(le.jijiYukhap,"branch"),Me(le.jijiChung,"branch"),Me(le.jijiHyeong,"branch"),Me(le.jijiPa,"branch"),Me(le.jijiHae,"branch"),Me(le.amhap,"branch"),Me(le.ganjiAmhap,"both"),Oe},[le]),Ge=w.useMemo(()=>{if(!Ee)return{};const Oe=Pe[Ee]??"branch",Be=(Ee.replace(/^#/,"").split("_")[0]??"").split("X").filter(Boolean),lt={:"year",:"month",:"day",:"hour",:"daeun",:"seun",:"wolun",:"ilun"},ue={};for(const Ce of Be){const ze=lt[Ce];if(!ze)continue;const it=ue[ze]??{stem:!1,branch:!1};Oe==="stem"?it.stem=!0:(Oe==="branch"||(it.stem=!0),it.branch=!0),ue[ze]=it}return ue},[Ee,Pe]);return g.jsxs("div",{className:"w-full max-w-[640px] mx-auto",children:[g.jsxs("div",{className:"mb-1 gap-2 p-2",children:[g.jsxs("div",{children:[g.jsxs("div",{className:"text-md desk:text-xl font-bold text-neutral-900 dark:text-neutral-100",children:[(e.name?.trim()||"")+" ",g.jsxs("span",{className:"text-sm text-neutral-500 dark:text-neutral-400 mr-2",children:["(",e.gender,")"]}),B&&g.jsxs("button",{onClick:V,className:`px-2 py-0.5 text-xs rounded cursor-pointer border
                  ${y?"bg-red-600 text-white border-red-600":"bg-neutral-100 text-neutral-700 border-neutral-300 dark:bg-neutral-800 dark:text-neutral-200 dark:border-neutral-700"}`,children:[" ",y?"ON":"OFF"]})]}),g.jsxs("div",{className:"text-xs desk:text-sm text-neutral-600 dark:text-neutral-400",children:[Koe(e.birthDay,e.birthTime,e.calendarType)," : ",se]})]}),g.jsxs("div",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:[e.birthPlace?.name?`: ${e.birthPlace.name}`:""," /  : ",d.toFixed(2),"  ",u," "]})]}),g.jsxs("div",{className:`grid gap-2 p-2 desk:p-0 ${oe.length===0?"grid-cols-1":oe.length===1?"grid-cols-[2fr_8fr]":oe.length===2?"grid-cols-[3.5fr_6.5fr]":"grid-cols-[4fr_5fr]"}`,children:[oe.length>0&&g.jsx($oe,{cards:oe,isDesktop:J,dayStem:j,charType:i.charType,thinEum:i.thinEum,showSipSin:i.showSipSin,showUnseong:i.showSibiUnseong,showShinsal:i.showSibiSinsal,showNabeum:a,hiddenMode:te,hiddenStemMode:i.hiddenStemMode,calcUnseong:W,calcShinsal:X,daeGz:he,seGz:_e,wolGz:re,highlightMap:Ge}),g.jsx(Boe,{isDesktop:J,dayStem:j,charType:i.charType,thinEum:i.thinEum,showSipSin:i.showSipSin,showUnseong:i.showSibiUnseong,showShinsal:i.showSibiSinsal,showNabeum:a,hiddenMode:te,hiddenStemMode:i.hiddenStemMode,calcUnseong:W,calcShinsal:X,highlightMap:Ge,pillars:[{key:"hour",label:"",data:Y},{key:"day",label:"",data:k.day},{key:"month",label:"",data:k.month},{key:"year",label:"",data:k.year}]})]}),g.jsx(qoe,{isDesktop:J,exposureLevel:ce,relationChips:Ue,relationByPillar:Fe,activeRelationTag:Ee,onToggleRelationTag:we,showRelationBox:o,showEtcShinsalBox:l,etcShinsalGood:Ne.good,etcShinsalBad:Ne.bad}),_&&g.jsx(zoe,{hourCandidates:U,useInsi:P,onToggleRule:()=>$(Oe=>!Oe),manualHour:C,onSelectHour:F})]})}function qv(e,t){const n=e.length;if(n===0||!t)return 0;const r=e[0].at.getTime(),i=e[n-1].at.getTime(),a=t.getTime();if(a<=r)return 0;if(a>=i)return n-1;for(let o=0;o<n-1;o+=1){const l=e[o].at.getTime(),u=e[o+1].at.getTime();if(a>=l&&a<u)return o}return 0}function Voe({data:e}){const t=Xl(),n=Eu(e,e.mingSikType,100,t),r=w.useMemo(()=>{const P=Ef(e);return ql(P,t)},[e,t]),i=w.useMemo(()=>{const P=e.mingSikType??"/";return mt(r,P).charAt(0)},[r,e.mingSikType]),{date:a,setFromEvent:o}=Xr(),l=w.useMemo(()=>qv(n,a),[n,a]),u=vn(P=>P.settings),{charType:d,thinEum:h,showSipSin:p,showSibiUnseong:b,showSibiSinsal:y,sinsalBase:S,sinsalMode:_,sinsalBloom:k}=u,A=!e.birthPlace||e.birthPlace.name===""||e.birthPlace.lon===0?127.5:e.birthPlace.lon,N=e.mingSikType??"/",j=S===""?mt(r,N).charAt(1):st(r,A).charAt(1),C=P=>b?Ho(i,P):null,D=P=>y?Go({baseBranch:j,targetBranch:P,era:Af(_),gaehwa:!!k}):null;return g.jsxs("div",{className:"w-full max-w-[640px] mx-auto rounded-xl bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 overflow-hidden",children:[g.jsx("div",{className:"px-3 py-2 text-sm font-semibold tracking-wider bg-neutral-50 dark:bg-neutral-800/60 text-neutral-700 dark:text-neutral-300",children:""}),g.jsx("div",{className:"flex gap-0.5 desk:gap-1 py-2 desk:p-2 flex-row-reverse",children:n.map((P,$)=>{const U=P.gz.charAt(0),Y=P.gz.charAt(1),K=Zoe(r,P.at),F=$===l,z=xi(U,"stem",d),W=xi(Y,"branch",d),X=eo(U,"stem"),Z=eo(Y,"branch"),G=h&&X?"font-thin":"font-bold",J=h&&Z?"font-thin":"font-bold",te=C(Y),ce=D(Y);return g.jsxs("div",{onClick:()=>o(P,""),className:`flex-1 rounded-sm desk:rounded-lg bg-white dark:bg-neutral-900 overflow-hidden cursor-pointer ${F?"border border-yellow-500":"border border-neutral-200 dark:border-neutral-800 hover:border-yellow-500"}`,title:`${P.gz}  ${P.at.toLocaleDateString()}`,children:[g.jsx("div",{className:"desk:px-2 py-1 text-center text-[10px] bg-neutral-50 dark:bg-neutral-800/60 text-neutral-600 dark:text-neutral-300",children:K}),g.jsxs("div",{className:"p-2 flex flex-col items-center gap-0.5",children:[p&&g.jsx("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-nowrap",children:_a(i,{stem:U})}),g.jsx("div",{className:`w-8 h-8 md:w-10 md:h-10 rounded-sm md:rounded-lg flex items-center justify-center border border-neutral-200 dark:border-neutral-800 ${Yi(U,"stem",u)}`,children:g.jsx("span",{className:`text-[20px] md:text-xl ${G}`,children:z})}),g.jsx("div",{className:`w-8 h-8 md:w-10 md:h-10 rounded-sm md:rounded-lg flex items-center justify-center border border-neutral-200 dark:border-neutral-800 ${Yi(Y,"branch",u)}`,children:g.jsx("span",{className:`text-[20px] md:text-xl ${J}`,children:W})}),p&&g.jsx("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-nowrap",children:_a(i,{branch:Y})}),(b||y)&&g.jsxs("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 mt-1 text-center space-y-0.5 text-nowrap",children:[b&&g.jsx("div",{children:te}),y&&g.jsx("div",{children:ce})]})]})]},`${P.gz}-${$}`)})})]})}function Zoe(e,t){const r=Math.abs(t.getTime()-e.getTime())/(365.2425*24*60*60*1e3),i=Math.max(0,r);return i<1?(1+i).toFixed(4).replace(/\.?0+$/,""):`${Math.round(i)}`}function Yv(e,t){const n=e,r=typeof n.isUnknownTime=="boolean"?n.isUnknownTime:!1,i=typeof n.birthTime=="string"&&/^(?:\d{4}|\d{2}:\d{2})$/.test(n.birthTime),a=typeof n.birthHour=="number",o=typeof n.birthMinute=="number";if(r||!(i||a||o)){const u=new Date(t);return u.setDate(u.getDate()+1),u.setHours(4,30,0,0),u}return t}const Xoe=!1,hP=e=>e<10?`0${e}`:`${e}`;function FT(e){const t=e,n=typeof t.birthDay=="string"?t.birthDay:"",r=typeof t.calendarType=="string"?t.calendarType:"solar";if(n.length<8)return e;const i=Number(n.slice(0,4)),a=Number(n.slice(4,6)),o=Number(n.slice(6,8)),l=["isLeap","isLeapMonth","leapMonth","leap","lunarLeap"];let u=!1;for(const d of l){const h=t[d];if(typeof h=="boolean"){u=h;break}if(typeof h=="number"){u=h===1;break}if(typeof h=="string"){u=h==="1"||h.toLowerCase()==="true";break}}if(r==="lunar")try{const d=Wi(i,a,o,0,0),h=`${d.getFullYear()}${hP(d.getMonth()+1)}${hP(d.getDate())}`;return{...e,birthDay:h,calendarType:"solar"}}catch{return e}return e}function b1(e){return new Date(e,6,2,12,0,0,0)}function Joe(e,t){return t-e+1}function Qoe({data:e,list:t,onSelect:n}){const r=vn(U=>U.settings),{date:i,setFromEvent:a}=Xr(),o=Xl(),[l,u]=w.useState(()=>t);w.useEffect(()=>{t&&t.length>0&&u(t)},[t]);const d=ql(e,o),h=w.useMemo(()=>Yv(e,d),[e,d]),p=w.useMemo(()=>h.getFullYear(),[h]),b=!e.birthPlace||e.birthPlace.name===""||e.birthPlace.lon===0?127.5:e.birthPlace.lon,y=w.useMemo(()=>{if(!i)return[];const U=i.getFullYear(),Y=b1(U),K=st(Y,b);return[{at:Y,gz:K}]},[i,b]),S=t.length>0?t:l.length>0?l:y,_=w.useMemo(()=>[...S].sort((U,Y)=>U.at.getTime()-Y.at.getTime()),[S]),k=w.useMemo(()=>{if(_.length===0)return 0;const U=qv(_,i);return U<0?0:U>=_.length?_.length-1:U},[_,i]),[A,N]=w.useState(null);w.useEffect(()=>{N(null)},[i,_]);const j=A??k,C=w.useMemo(()=>{const U=FT(e);return ql(U,o)},[e,o]),D=e.mingSikType??"/",P=w.useMemo(()=>mt(C,D).charAt(0),[C,D]),$=w.useMemo(()=>r.sinsalBase===""?mt(h,D).charAt(1):st(h,b).charAt(1),[h,D,b,r.sinsalBase]);return g.jsxs("div",{className:"w-full max-w-[640px] mx-auto rounded-xl bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 overflow-hidden",children:[g.jsx("div",{className:"px-3 py-2 text-sm font-semibold tracking-wider bg-neutral-50 dark:bg-neutral-800/60 text-neutral-700 dark:text-neutral-300",children:""}),g.jsx("div",{className:"flex gap-0.5 desk:gap-1 py-2 desk:p-2 flex-row-reverse",children:_.map((U,Y)=>{const K=U.at.getFullYear(),F=b1(K),z=st(F,b),W=z.charAt(0),X=z.charAt(1),Z=Y===j,G=xi(W,"stem",r.charType),J=xi(X,"branch",r.charType),te=eo(W,"stem"),ce=eo(X,"branch"),oe=r.thinEum&&te?"font-thin":"font-bold",B=r.thinEum&&ce?"font-thin":"font-bold",V=r.showSibiUnseong?Ho(P,X):null,ie=r.showSibiSinsal?Go({baseBranch:$,targetBranch:X,era:Af(r.sinsalMode),gaehwa:!!r.sinsalBloom}):null,Q=Joe(p,K);return g.jsxs("div",{onClick:()=>{if(Y===0){N(Y);return}N(Y);const se=b1(K),me=st(se,b);a({at:se,gz:me},""),n&&(typeof queueMicrotask<"u"?queueMicrotask(()=>n(K)):Promise.resolve().then(()=>n(K)))},className:`flex-1 rounded-sm desk:rounded-lg bg-white dark:bg-neutral-900 overflow-hidden cursor-pointer ${Z?"border border-yellow-500":"border border-neutral-200 dark:border-neutral-800 hover:border-yellow-500"}`,title:`${z}  ${U.at.toLocaleDateString()}  ${Q}`,children:[g.jsxs("div",{className:"desk:px-2 py-1 text-center text-[10px] bg-neutral-100 dark:bg-neutral-800/60 text-neutral-700 dark:text-neutral-200",children:[Q,""]}),g.jsx("div",{className:"desk:px-2 py-1 text-center text-[10px] bg-neutral-50 dark:bg-neutral-800/60 text-neutral-600 dark:text-neutral-300",children:K}),g.jsxs("div",{className:"p-2 flex flex-col items-center gap-1",children:[r.showSipSin&&g.jsx("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-nowrap",children:_a(P,{stem:W})}),g.jsx("div",{className:`w-8 h-8 md:w-10 md:h-10 rounded-sm md:rounded-lg flex items-center justify-center border ${Yi(W,"stem",r)}`,children:g.jsx("span",{className:`text-[20px] md:text-xl ${oe}`,children:G})}),g.jsx("div",{className:`w-8 h-8 md:w-10 md:h-10 rounded-sm md:rounded-lg flex items-center justify-center border ${Yi(X,"branch",r)}`,children:g.jsx("span",{className:`text-[20px] md:text-xl ${B}`,children:J})}),r.showSipSin&&g.jsx("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-nowrap",children:_a(P,{branch:X})}),(r.showSibiUnseong||r.showSibiSinsal)&&g.jsxs("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-center text-nowrap",children:[r.showSibiUnseong&&V&&g.jsx("div",{children:V}),r.showSibiSinsal&&ie&&g.jsx("div",{children:ie})]})]})]},`${K}-${U.gz||Y}`)})})]})}const ese=new Set(["","","","","","","","","","","",""]);function tse(e){const t=new Date(e.getFullYear(),e.getMonth()+1),n=t.getFullYear(),i=[...xa(new Date(n-1,5,15,12,0))??[],...xa(new Date(n,5,15,12,0))??[],...xa(new Date(n+1,5,15,12,0))??[]].map(u=>({name:String(u.name),date:new Date(u.date)})).sort((u,d)=>u.date.getTime()-d.date.getTime()).filter(u=>ese.has(u.name));let a=i.findIndex((u,d)=>i[d].date<=t&&t<i[d+1]?.date);a<0&&(a=0);const o=i[a],l=i[a+1];return{start:new Date(o.date.getFullYear(),o.date.getMonth(),o.date.getDate(),0,0,0,0),end:new Date(l.date.getFullYear(),l.date.getMonth(),l.date.getDate(),0,0,0,0),cur:o,next:l}}const nse=new Set(["","","","","","","","","","","",""]);function rse(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),23,59,0,0)}function ise(e){const t=new Intl.DateTimeFormat("ko-KR",{timeZone:"Asia/Seoul",month:"numeric"}).formatToParts(e);return Number(t.find(n=>n.type==="month")?.value??e.getMonth()+1)}function y1(e){return new Date(e,5,15,12,0,0,0)}function ase(e){const n=[...xa(y1(e-1))??[],...xa(y1(e))??[],...xa(y1(e+1))??[]].map(l=>({name:String(l.name),date:new Date(l.date)})).sort((l,u)=>l.date.getTime()-u.date.getTime()).filter(l=>nse.has(l.name)),r=new Date(e,0,1,0,0,0,0),i=new Date(e+1,0,1,0,0,0,0),a=n.findIndex(l=>l.name===""&&l.date>=r&&l.date<i);if(a===-1)return[];const o=[];for(let l=0;l<12;l++){const u=n[a+l];if(!u)break;const d=new Date(u.date),h=rse(d);o.push({name:u.name,termAt:d,at00:h})}return o}function ose({data:e,activeYear:t,onSelect:n,onSelectMonth:r}){const i=vn(A=>A.settings),a=Xl(),o=!e.birthPlace||e.birthPlace.name===""||e.birthPlace.lon===0?127.5:e.birthPlace.lon,l=ql(e,a),u=w.useMemo(()=>Yv(e,l),[e,l]),d=w.useMemo(()=>{const A=FT(e);return ql(A,a)},[e,a]),h=e.mingSikType??"/",p=w.useMemo(()=>mt(d,h).charAt(0),[d,h]),b=i.sinsalBase===""?mt(u,h).charAt(1):st(u,o).charAt(1),y=w.useMemo(()=>t?ase(t).map(N=>{const j=N.termAt,C=new Date(N.termAt.getTime()+1860*1e3),D=St(C,o);return{at:j,gz:D,term:N.name,termAt:N.termAt}}):[],[t,o]),{date:S,setFromEvent:_}=Xr(),k=qv(y,S);return g.jsxs("div",{className:"w-full max-w-[640px] mx-auto rounded-xl bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 overflow-hidden",children:[g.jsx("div",{className:"px-3 py-2 text-sm font-semibold tracking-wider bg-neutral-50 dark:bg-neutral-800/60 text-neutral-700 dark:text-neutral-300",children:""}),g.jsx("div",{className:"flex gap-0.5 desk:gap-1 py-2 desk:p-2 flex-row-reverse",children:y.map((A,N)=>{const j=A.gz.charAt(0),C=A.gz.charAt(1),D=`${ise(A.at)}`,P=N===k,$=xi(j,"stem",i.charType),U=xi(C,"branch",i.charType),Y=eo(j,"stem"),K=eo(C,"branch"),F=i.thinEum&&Y?"font-thin":"font-bold",z=i.thinEum&&K?"font-thin":"font-bold",W=i.showSibiUnseong?Ho(p,C):null,X=i.showSibiSinsal?Go({baseBranch:b,targetBranch:C,era:Af(i.sinsalMode),gaehwa:!!i.sinsalBloom}):null;return g.jsxs("div",{onClick:()=>{r(A.at);const Z=new Date(A.at),{start:G}=tse(Z);n?.(G.getFullYear(),G.getMonth()),_({at:Z,gz:St(Z,o)},"")},className:`flex-1 rounded-sm desk:rounded-lg bg-white dark:bg-neutral-900 overflow-hidden cursor-pointer ${P?"border border-yellow-500":"border border-neutral-200 dark:border-neutral-800 hover:border-yellow-500"}`,title:`${A.term}   ${A.gz}  ${A.termAt.toLocaleString()}`,children:[g.jsx("div",{className:"desk:px-2 py-1 text-center text-[10px] bg-neutral-50 dark:bg-neutral-800/60 text-neutral-600 dark:text-neutral-300",children:D}),g.jsxs("div",{className:"p-2 flex flex-col items-center gap-1",children:[i.showSipSin&&g.jsx("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-nowrap",children:_a(p,{stem:j})}),g.jsx("div",{className:`w-7 h-7 sm:w-8 sm:h-8 md:w-10 md:h-10 rounded-sm md:rounded-lg flex items-center justify-center border border-neutral-200 dark:border-neutral-800 ${Yi(j,"stem",i)}`,children:g.jsx("span",{className:`text-base md:text-xl ${F}`,children:$})}),g.jsx("div",{className:`w-7 h-7 sm:w-8 sm:h-8 md:w-10 md:h-10 rounded-sm md:rounded-lg flex items-center justify-center border border-neutral-200 dark:border-neutral-800 ${Yi(C,"branch",i)}`,children:g.jsx("span",{className:`text-base md:text-xl ${z}`,children:U})}),i.showSipSin&&g.jsx("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-nowrap",children:_a(p,{branch:C})}),(i.showSibiUnseong||i.showSibiSinsal)&&g.jsxs("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-center text-nowrap",children:[i.showSibiUnseong&&W&&g.jsx("div",{children:W}),i.showSibiSinsal&&X&&g.jsx("div",{children:X})]}),g.jsx("div",{className:"text-[10px] text-neutral-400 dark:text-neutral-500 text-nowrap",children:A.term})]})]},`${A.term}-${A.at.toISOString()}`)})})]})}function sse(){const e=vn(r=>r.settings),{date:t,setFromEvent:n}=Xr();return{settings:e,pickedDate:t,setFromEvent:n}}const lse=(e,t)=>new Date(e,t,15,12,0,0,0),f2=e=>{const t=new Date(e);return t.setHours(23,59,0,0),t},cse=new Set(["","","","","","","","","","","",""]),Z6=e=>[...xa(new Date(e-1,5,15,12,0))??[],...xa(new Date(e,5,15,12,0))??[],...xa(new Date(e+1,5,15,12,0))??[]].map(n=>({name:String(n.name),date:new Date(n.date)})).sort((n,r)=>n.date.getTime()-r.date.getTime()),use=e=>{const t=Z6(e.getFullYear()),n=t.filter(o=>cse.has(o.name));if(n.length<12){const o=t.findIndex(d=>d.date>e),l=t[Math.max(0,o-1)],u=t[Math.min(t.length-1,o)];return{start:new Date(l.date),end:new Date(u.date),cur:l,next:u}}let r=n.findIndex(o=>o.date>e)-1;r<0&&(r=n.length-1);const i=n[r],a=n[(r+1)%n.length];return{start:new Date(i.date),end:new Date(a.date),cur:i,next:a}},dse=e=>{if(!e)return null;const t=new Intl.DateTimeFormat("ko-KR",{timeZone:"Asia/Seoul",month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1}).formatToParts(e);let n="",r="",i="",a="";for(const o of t)o.type==="month"&&(n=o.value),o.type==="day"&&(r=o.value),o.type==="hour"&&(i=o.value),o.type==="minute"&&(a=o.value);return`${n}/${r} ${i}:${a}`};function fse({data:e,year:t,month:n,selectedMonth:r,dstOffsetMinutes:i=0,settings:a,pickedDate:o}){const l=a.ilunRule||"/",u=e.mingSikType??"/",d=w.useMemo(()=>{const K=FT(e);return ql(K,i)},[e,i]),h=w.useMemo(()=>d?mt(d,u).charAt(0):void 0,[d,u]),p=w.useMemo(()=>e?ql(e,i):null,[e,i]),b=w.useMemo(()=>e&&p?Yv(e,p):null,[e,p]),y=e&&e.birthPlace&&e.birthPlace.name!==""&&e.birthPlace.lon!==0?e.birthPlace.lon:127.5,S=e&&b?a.sinsalBase===""?mt(b,u).charAt(1):st(b,y).charAt(1):null,_=w.useMemo(()=>lse(t,n),[t,n]),k=w.useMemo(()=>o?f2(new Date(o)):null,[o]),A=w.useMemo(()=>r?f2(r):null,[r]),N=w.useMemo(()=>k??A??_,[k,A,_]),{start:j,end:C,cur:D,next:P}=w.useMemo(()=>use(N),[N]),$=w.useMemo(()=>{const K=[],F=new Date(j);for(;F<C;)K.push(new Date(F)),F.setDate(F.getDate()+1);return K},[j,C]),U=w.useMemo(()=>{const K=Z6(N.getFullYear()),F=K.filter(W=>W.date>=j&&W.date<C),z=K.find(W=>W.date>=C);return z?[...F,z]:F},[N,j,C]),Y=w.useMemo(()=>{const K=[];let F=[];const z=new Date(j).getDay();for(let W=0;W<z;W+=1)F.push(null);for(const W of $)F.length===7&&(K.push(F),F=[]),F.push(W);for(;F.length<7;)F.push(null);return K.push(F),K},[$,j]);return{rule:l,dayStem:h,baseBranch:S,pickerNoon:k,termMarks:U,weeks:Y,cur:D??null,next:P??null}}function hse({setFromEvent:e}){return{handleDayClick:w.useCallback(n=>{e({at:n},"")},[e])}}function mse({data:e,year:t,month:n,selectedMonth:r}){const i=Xl(),a=sse(),o=fse({data:e,year:t,month:n,selectedMonth:r,dstOffsetMinutes:i,settings:a.settings,pickedDate:a.pickedDate}),l=hse({setFromEvent:a.setFromEvent});return g.jsxs("div",{className:"w-full max-w-[800px] mx-auto mb-4 rounded-xl bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 overflow-hidden",children:[g.jsx("div",{className:"flex justify-center items-center px-2 desk:px-4 py-2 bg-neutral-50 dark:bg-neutral-800/60",children:g.jsxs("div",{className:"text-center text-[11px] desk:text-sm font-semibold text-neutral-700 dark:text-neutral-200",children:[o.cur?.name?g.jsxs(g.Fragment,{children:[o.cur.name," "," ~ ",o.next?.name??""]}):`${t} ${n}`,o.termMarks.length>0&&g.jsxs("div",{className:"mt-0.5 text-[10px] desk:text-xs font-normal text-neutral-500 dark:text-neutral-400",children:["[",o.termMarks.map((u,d)=>g.jsxs("span",{children:[u.name," ",dse(u.date),d<o.termMarks.length-1?"  ":""]},`${u.name}_${u.date.getTime()}_${d}`)),"]"]})]})}),g.jsx("div",{className:"grid grid-cols-7 text-center text-xs bg-neutral-100 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-300",children:["","","","","","",""].map(u=>g.jsx("div",{className:"py-1",children:u},u))}),g.jsx("div",{className:"grid grid-cols-7 gap-px bg-neutral-200 dark:bg-neutral-800",children:o.weeks.map((u,d)=>u.map((h,p)=>{if(!h)return g.jsx("div",{className:"bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800"},`${d}-${p}`);const b=f2(h),y=new Date(h.getFullYear(),h.getMonth(),h.getDate(),0,0,0,0),S=new Date,_=b.getFullYear()===S.getFullYear()&&b.getMonth()===S.getMonth()&&b.getDate()===S.getDate(),A=!!o.pickerNoon&&b.getFullYear()===o.pickerNoon.getFullYear()&&b.getMonth()===o.pickerNoon.getMonth()&&b.getDate()===o.pickerNoon.getDate()||!o.pickerNoon&&_,N=i!==0?new Date(y.getTime()+i*60*1e3):y,j=SK(N,o.rule),C=j.charAt(0),D=j.charAt(1),P=xi(C,"stem",a.settings.charType),$=xi(D,"branch",a.settings.charType),U=a.settings.thinEum&&eo(C,"stem")?"font-thin":"font-bold",Y=a.settings.thinEum&&eo(D,"branch")?"font-thin":"font-bold",K=!!o.dayStem&&a.settings.showSipSin,F=!!o.dayStem&&a.settings.showSibiUnseong,z=!!o.dayStem&&o.baseBranch!=null&&a.settings.showSibiSinsal,W=K?_a(o.dayStem,{stem:C}):"",X=K?_a(o.dayStem,{branch:D}):"",Z=F?Ho(o.dayStem,D):"",G=z?Go({baseBranch:o.baseBranch,targetBranch:D,era:Af(a.settings.sinsalMode),gaehwa:!!a.settings.sinsalBloom}):"",J=o.termMarks.find(te=>te.date.getFullYear()===b.getFullYear()&&te.date.getMonth()===b.getMonth()&&te.date.getDate()===b.getDate());return g.jsxs("div",{onClick:()=>l.handleDayClick(y),className:`space-y-1 bg-white dark:bg-neutral-900 flex flex-col items-center justify-start p-1 text-xs border cursor-pointer ${A?"border-yellow-500":"border-neutral-200 dark:border-neutral-800"}`,title:`${j} (${b.toLocaleDateString()})`,children:[g.jsxs("div",{className:"text-neutral-600 dark:text-neutral-400 flex items-center gap-1",children:[g.jsx("span",{children:b.getDate()}),J&&g.jsx("span",{className:"text-[10px] text-nowrap px-1 rounded bg-amber-100 text-amber-700 dark:bg-amber-900/40 dark:text-amber-200",children:J.name})]}),K&&g.jsx("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400",children:W}),g.jsx("div",{className:`w-8 h-8 rounded flex items-center justify-center text-base ${Yi(C,"stem",a.settings)}`,children:g.jsx("span",{className:U,children:P})}),g.jsx("div",{className:`w-8 h-8 rounded flex items-center justify-center text-base ${Yi(D,"branch",a.settings)}`,children:g.jsx("span",{className:Y,children:$})}),K&&g.jsx("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400",children:X}),(F||z)&&g.jsxs("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-center space-y-0.5",children:[F&&Z&&g.jsx("div",{children:Z}),z&&G&&g.jsx("div",{children:G})]})]},h.toISOString())}))})]})}function mP(e,t){const n=e.at.getFullYear(),r=t?t.at.getFullYear():n+10,i=[];for(let a=n;a<r;a++){const o=An(a,315);let l=a;new Date<o&&(l=a-1);const d=st(new Date(l,1,10));i.push({at:o,gz:d})}return i}function pse({data:e}){const t=Xl(),n=Eu(e,e.mingSikType,100,t),[r,i]=w.useState(null),[a,o]=w.useState(null),[l,u]=w.useState("il"),[d,h]=w.useState(null);w.useEffect(()=>{if(!n.length)return;const _=new Date,k=n.findIndex((A,N)=>{const j=n[N+1]?.at;return _>=A.at&&(!j||_<j)});k!==-1&&i(k)},[n]),w.useEffect(()=>{if(r===null)return;const _=n[r],k=n[r+1];if(!_)return;const A=mP(_,k),N=new Date;A.findIndex((C,D)=>{const P=A[D+1]?.at;return N>=C.at&&(!P||N<P)})!==-1&&o({year:N.getFullYear(),month:N.getMonth()})},[r,n]);const p=Hv(e,void 0,void 0,{dstOffsetMinutes:t}),{date:b}=Xr(),y=b.getMonth()+1===1?b.getFullYear()-1:b.getFullYear(),S=w.useMemo(()=>{if(!p?.dae?.gz)return[];const _=n.findIndex((N,j)=>{const C=n[j+1]?.at;return p.dae.at>=N.at&&(!C||p.dae.at<C)});if(_===-1)return[];const k=n[_],A=n[_+1];return mP(k,A)},[n,p?.dae]);return g.jsxs("div",{className:"w-full space-y-4",children:[g.jsx(Voe,{data:e}),l==="se"||l==="wol"||l==="il"?g.jsx(Qoe,{data:e,list:S,onSelect:()=>{u("wol")}}):null,l==="wol"||l==="il"?g.jsx(ose,{data:e,activeYear:y,onSelect:(_,k)=>{o({year:_,month:k}),u("il")},onSelectMonth:h}):null,l==="il"&&a&&g.jsx(mse,{data:e,year:a.year,month:a.month+1,selectedMonth:d})]})}const gse=new Set(dK),bse=new Set(fK);function pP(e){return typeof e=="string"&&e.length>=2&&gse.has(e[0])&&bse.has(e[1])}function Pi(e,...t){if(pP(e))return e;for(const n of t)if(pP(n))return n;return""}const yse={:0,:2,:4,:6,:8,:10,:12,:14,:16,:18,:20,:22};function H0(e,t){let n=null;const r=t.getTime();for(const i of e)if(i.at.getTime()<=r)n=i;else break;return n}function vse({data:e}){const t=vn(W=>W.settings),{manualHour:n}=bp(),{showSibiUnseong:r,showSibiSinsal:i,sinsalBase:a,sinsalMode:o,sinsalBloom:l}=t,{date:u}=Xr(),d=Xl(),h=e.mingSikType??"/",p=e.DayChangeRule??(e.mingSikType===""?"":""),b=w.useMemo(()=>Ef(e),[e]),y=w.useMemo(()=>Fv(b,{dstOffsetMinutes:d}),[b,d]),S=w.useMemo(()=>TT(b,h,{dstOffsetMinutes:d}),[b,d,h]),_=w.useMemo(()=>Nv(S.day?.charAt(0)??""),[S.day]),k=!e.birthTime||e.birthTime==="",A=w.useMemo(()=>_6(y,S.hour,e.dir??"forward",120),[y,S.hour,e.dir]),N=w.useMemo(()=>k6(A,S.day,e.dir??"forward",p),[A,S.day,e.dir,p]),j=w.useMemo(()=>kp(y,S.month,e.dir??"forward",120,b.birthPlace?.lon??127.5),[y,S.month,e.dir,b.birthPlace?.lon]),C=w.useMemo(()=>E6(j,S.year,e.dir??"forward",p,y),[j,S.year,e.dir,y,p]),D=w.useMemo(()=>{const W=A?.events?.[0];return W?{at:W.at,from:Pi(S.hour),to:Pi(W.gz)}:null},[A?.events,S.hour]),P=w.useMemo(()=>{const W=j?.events?.[0];return j?.firstChange?{at:j.firstChange,from:Pi(S.month),to:Pi(W?.gz??S.month)}:null},[j?.firstChange,j?.events,S.month]),$=w.useMemo(()=>{const W=k?n?n.stem+n.branch:"":Pi(H0(A.events,u)?.gz,S.hour);let X;if(k&&n){const Z=u.getFullYear(),G=u.getMonth(),J=u.getDate(),te=yse[n.branch]??0,ce=new Date(Z,G,J,te,0),oe=mt(ce,h);X=Pi(oe,S.day)}else X=Pi(H0(N.events,u)?.gz,S.day);return{si:W,il:X,wl:Pi(H0(j.events,u)?.gz,S.month),yn:Pi(H0(C.events,u)?.gz,S.year)}},[u,A.events,N.events,j.events,C.events,S,k,n,h]),U=w.useMemo(()=>({si:Pi(Qa(u,h)),il:Pi(mt(u,h)),wl:Pi(St(u)),yn:Pi(st(u))}),[u,h]),Y=w.useMemo(()=>a===""?S.day.charAt(1):S.year.charAt(1),[a,S.day,S.year]),K=w.useMemo(()=>Af(o),[o]),F=W=>{if(!W)return{unseong:"",shinsal:""};const X=xi(_,"stem",""),Z=xi(W.charAt(1),"branch",""),G=xi(Y,"branch","");return{unseong:r&&Ho(X,Z)||"",shinsal:i&&Go({baseBranch:G,targetBranch:Z,era:K,gaehwa:!!l})||""}},z=(W,X,Z="myoun")=>{const G=X,{unseong:J,shinsal:te}=X?F(X):{unseong:"",shinsal:""},ce=Z==="myoun"&&k&&(W===""||W==="");return g.jsx(Md,{label:W,gz:G,dayStem:_,settings:t,unseongText:X?J:"",shinsalText:X?te:"",hideBranchSipSin:!0,size:"sm",isUnknownTime:ce},`${Z}-${W}`)};return g.jsxs("div",{className:"w-full max-w-[640px] mx-auto mb-4 px-2 py-4 desk:p-4 bg-white dark:bg-neutral-950 text-neutral-900 dark:text-neutral-100 rounded-xl shadow border border-neutral-200 dark:border-neutral-800",children:[g.jsx("header",{className:"flex flex-wrap items-center gap-3 justify-between mb-4",children:g.jsxs("div",{className:"font-semibold text-xs desk:text-sm",children:[" +   "," ",g.jsxs("span",{className:"text-neutral-500 dark:text-neutral-400",children:["(: ",Om(y),")"]})]})}),g.jsxs("div",{className:"grid grid-cols-2 gap-2 desk:gap-4 mb-6",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs mb-2 text-neutral-600 dark:text-neutral-300",children:""}),g.jsxs("div",{className:"grid grid-cols-4 gap-1 desk:gap-2",children:[z("",$.si,"myoun"),z("",$.il,"myoun"),z("",$.wl,"myoun"),z("",$.yn,"myoun")]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs mb-2 text-neutral-600 dark:text-neutral-300",children:" "}),g.jsxs("div",{className:"grid grid-cols-4 gap-1 desk:gap-2",children:[z("",U.si,"live"),z("",U.il,"live"),z("",U.wl,"live"),z("",U.yn,"live")]})]})]}),g.jsxs("div",{className:"mt-4 text-xs text-neutral-700 dark:text-neutral-300 space-y-1",children:[g.jsx("div",{className:"font-semibold",children:"  "}),g.jsxs("div",{children:[":"," ",D?`${Om(D.at)} (${D.from}  ${D.to})`:" "]}),g.jsxs("div",{children:[":"," ",P?`${Om(P.at)} (${P.from}  ${P.to})`:" "]})]})]})}const gP=["","","","","","","","","",""],xse={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},wse={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},_se={:"",:"",:"",:"",:""},Sse={:"",:"",:"",:"",:""},kse={:"",:"",:"",:"",:""},Ese={:"",:"",:"",:"",:""};function Tse(e,t){switch(e){case"":return t;case"":return _se[t];case"":return kse[t];case"":return Ese[t];case"":return Sse[t];default:return t}}function Ase({data:e,perStemElementScaled:t,elementPercent:n,dayStem:r,width:i=280,height:a=280,revKey:o}){const l=i,u=a,d=l/2,h=u/2,p=Math.min(l,u)*.37,b=w.useMemo(()=>{const j=(r??"").charAt(0);return wse[j]??null},[r]),y=j=>Math.PI/2+2*-Math.PI*j/5,S=w.useMemo(()=>e.map((j,C)=>({...j,x:d+p*Math.cos(y(C)),y:h-p*Math.sin(y(C))})),[e,d,h,p]),[_,k]=w.useState(0),A=w.useRef(""),N=w.useMemo(()=>{const j=e.map(P=>`${P.name}:${P.value}`).join(","),C=gP.map(P=>`${P}:${t?.[P]??0}`).join(","),D=n?`:${n.??0},:${n.??0},:${n.??0},:${n.??0},:${n.??0}`:"el:none";return[o??"",j,C,D,r??""].join("||")},[o,e,t,r,n]);return w.useEffect(()=>{N!==A.current&&(A.current=N,k(j=>j+1))},[N]),g.jsx("div",{className:"w-full",children:g.jsxs("svg",{width:l,height:u,className:"mx-auto pt-2",children:[S.map((j,C)=>{const D=S[(C+2)%5];return g.jsx("line",{x1:j.x,y1:j.y,x2:D.x,y2:D.y,stroke:"#94a3b8",strokeWidth:1},`line-${C}`)}),S.map((j,C)=>{const D=S[(C+1)%5],P=(j.x+D.x)/2,$=(j.y+D.y)/2,U=P-d,Y=$-h,K=1.5,F=d+U*K,z=h+Y*K;return g.jsx("path",{d:`M${j.x},${j.y} Q${F},${z} ${D.x},${D.y}`,stroke:"#ef4444",strokeWidth:1.5,fill:"none",markerEnd:"url(#arrow)"},`curve-${C}`)}),g.jsx("defs",{children:g.jsx("marker",{id:"arrow",markerWidth:"6",markerHeight:"6",refX:"5",refY:"3",orient:"auto",children:g.jsx("path",{d:"M0,0 L6,3 L0,6 Z",fill:"#ef4444"})})}),S.map(j=>{const C=j.name,D=b?Tse(C,b):null,P=D?gP.filter($=>xse[$]===D).map($=>[$,t?.[$]??0]):[];return g.jsxs("g",{transform:`translate(${j.x},${j.y})`,children:[g.jsx("circle",{r:33,fill:j.color??"#334155",opacity:j.value===0?.7:1}),g.jsxs("text",{textAnchor:"middle",dy:"-6",fontSize:14,className:"fill-white font-semibold",children:[j.name," ",j.value]}),P.map(([$,U],Y)=>g.jsxs("text",{textAnchor:"middle",dy:8+Y*11,fontSize:10,className:"fill-white",children:[$," ",Math.round(U)]},$))]},`${j.name}-${j.value}`)})]},_)})}const jse=[{name:"",min:0,max:10},{name:"",min:10,max:20},{name:"",min:20,max:35},{name:"",min:35,max:45},{name:"",min:45,max:55},{name:"",min:55,max:65},{name:"",min:65,max:80},{name:"",min:80,max:100.0001}];function HT(e){return Math.max(0,Math.min(100,e))}function X6(e){const t=HT(e);return jse.find(r=>t>=r.min&&t<r.max)?.name??""}const Ose=[10,20,35,45,55,65,80];function Nse({value:e}){const t=w.useMemo(()=>HT(e),[e]),n=w.useMemo(()=>X6(t),[t]);return g.jsxs("div",{className:"w-full mx-auto p-2 desk:p-4 bg-neutral-100 dark:bg-neutral-800 rounded-xl",children:[g.jsxs("div",{className:"flex justify-between text-[11px] text-neutral-400 mb-1",children:[g.jsx("span",{children:""}),g.jsx("span",{children:""}),g.jsx("span",{children:""})]}),g.jsxs("div",{className:"relative h-4 rounded bg-gradient-to-r from-blue-500 via-yellow-400 to-red-500",children:[Ose.map(r=>g.jsx("div",{className:"absolute top-0 h-4 w-[1px] bg-black/30",style:{left:`${r}%`},title:`${r}%`},r)),g.jsx("div",{className:"absolute top-0 h-4 w-[1px] bg-black/40",style:{left:"50%"},title:"50%"}),g.jsx("div",{className:"absolute -top-1 h-6 w-2 bg-white rounded shadow-sm",style:{left:`${t}%`,transform:"translateX(-50%)"},"aria-label":`  ${t}%`})]}),g.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[g.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs border border-neutral-600 text-neutral-700 dark:text-neutral-200",children:n}),g.jsxs("span",{className:"text-xs text-neutral-400",children:[t.toFixed(1),"%"]})]})]})}function Jh(e,t){if(e==="#")return"bg-neutral-100 text-neutral-500 border-neutral-200 dark:bg-neutral-900 dark:text-neutral-500 dark:border-neutral-700";switch(t){case"natal":return"bg-violet-100 text-violet-800 border-violet-200 dark:bg-violet-900/30 dark:text-violet-200 dark:border-violet-800";case"dae":return"bg-blue-100 text-blue-800 border-blue-200 dark:bg-blue-900/30 dark:text-blue-200 dark:border-blue-800";case"se":return"bg-green-100 text-green-800 border-green-200 dark:bg-green-900/30 dark:text-green-200 dark:border-green-800";case"wol":return"bg-orange-100 text-orange-800 border-orange-200 dark:bg-orange-900/30 dark:text-orange-200 dark:border-orange-800";case"il":return"bg-red-100 text-red-800 border-red-200 dark:bg-red-900/30 dark:text-red-200 dark:border-red-800";default:return""}}function ca({label:e,natal:t,dae:n,se:r,wol:i,il:a}){const o=n.length+r.length+i.length+a.length>0,l=t.length>0?t:["#"],u=o?l.filter(p=>p!=="#"):l,h=u.some(p=>p!=="#")||n.length>0||r.length>0||i.length>0||a.length>0?"shrink-0 w-20 text-xs font-semibold text-orange-700 dark:text-orange-300 mt-1":"shrink-0 w-20 text-xs font-semibold text-neutral-700 dark:text-neutral-400 mt-1";return g.jsxs("div",{className:"flex items-start gap-3 p-1 rounded-sm",children:[g.jsx("div",{className:h,children:e}),g.jsxs("div",{className:"flex flex-wrap gap-2",children:[u.map((p,b)=>g.jsx("span",{className:"text-xs px-2 py-1 rounded-full border whitespace-nowrap "+Jh(p,"natal"),children:p},`natal-${b}`)),n.map((p,b)=>g.jsx("span",{className:"text-xs px-2 py-1 rounded-full border whitespace-nowrap "+Jh(p,"dae"),children:p},`dae-${b}`)),r.map((p,b)=>g.jsx("span",{className:"text-xs px-2 py-1 rounded-full border whitespace-nowrap "+Jh(p,"se"),children:p},`se-${b}`)),i.map((p,b)=>g.jsx("span",{className:"text-xs px-2 py-1 rounded-full border whitespace-nowrap "+Jh(p,"wol"),children:p},`wol-${b}`)),a.map((p,b)=>g.jsx("span",{className:"text-xs px-2 py-1 rounded-full border whitespace-nowrap "+Jh(p,"il"),children:p},`il-${b}`))]})]})}function h2(e){return Array.isArray(e)?e:[]}function G0(e,t){const n=new Set(h2(e));return h2(t).filter(i=>!n.has(i))}function Cse({pillars:e,daewoon:t,sewoon:n,wolwoon:r,ilwoon:i,tab:a=""}){const o=BT(e),l=Il({natal:e}),u=t?Il({natal:e,daewoon:t}):l,d=n?Il({natal:e,daewoon:t,sewoon:n}):u,h=r?Il({natal:e,daewoon:t,sewoon:n,wolwoon:r}):d,p=i?Il({natal:e,daewoon:t,sewoon:n,wolwoon:r,ilwoon:i}):h,b=_=>({natal:h2(o[_]),dae:G0(l[_],u[_]),se:G0(u[_],d[_]),wol:G0(d[_],h[_]),il:G0(h[_],p[_])}),y={cheonganHap:b("cheonganHap"),cheonganChung:b("cheonganChung"),jijiSamhap:b("jijiSamhap"),jijiBanhap:b("jijiBanhap"),jijiBanghap:b("jijiBanghap"),jijiYukhap:b("jijiYukhap"),amhap:b("amhap"),ganjiAmhap:b("ganjiAmhap"),jijiChung:b("jijiChung"),jijiHyeong:b("jijiHyeong"),jijiPa:b("jijiPa"),jijiHae:b("jijiHae")},S=_=>a===""?{natal:_.natal,dae:[],se:[],wol:[],il:[]}:a===""?{natal:_.natal,dae:_.dae,se:[],wol:[],il:[]}:a===""?{natal:_.natal,dae:_.dae,se:_.se,wol:[],il:[]}:a===""?{natal:_.natal,dae:_.dae,se:_.se,wol:_.wol,il:[]}:a===""?{natal:_.natal,dae:_.dae,se:_.se,wol:_.wol,il:_.il}:{natal:[],dae:[],se:[],wol:[],il:[]};return g.jsxs("div",{className:"rounded-xl p-4 bg-neutral-100 dark:bg-neutral-900 text-neutral-900 dark:text-neutral-100 space-y-2",children:[g.jsx("div",{className:"text-base font-bold mb-1",children:""}),g.jsx(ca,{label:"",...S(y.cheonganHap)}),g.jsx(ca,{label:"",...S(y.cheonganChung)}),g.jsx("div",{className:"border-t border-neutral-200 dark:border-neutral-800 my-2"}),g.jsx(ca,{label:"",...S(y.jijiSamhap)}),g.jsx(ca,{label:"",...S(y.jijiBanhap)}),g.jsx(ca,{label:"",...S(y.jijiBanghap)}),g.jsx(ca,{label:"",...S(y.jijiYukhap)}),g.jsx(ca,{label:"",...S(y.amhap)}),g.jsx(ca,{label:"",...S(y.ganjiAmhap)}),g.jsx(ca,{label:"",...S(y.jijiChung)}),g.jsx(ca,{label:"",...S(y.jijiHyeong)}),g.jsx(ca,{label:"",...S(y.jijiPa)}),g.jsx(ca,{label:"",...S(y.jijiHae)})]})}function Mse(e,t){if(e==="#")return"bg-neutral-100 text-neutral-500 border-neutral-200 dark:bg-neutral-900 dark:text-neutral-500 dark:border-neutral-700";switch(t){case"natal":return"bg-violet-100 text-violet-800 border-violet-200 dark:bg-violet-900/30 dark:text-violet-200 dark:border-violet-800";case"dae":return"bg-blue-100 text-blue-800 border-blue-200 dark:bg-blue-900/30 dark:text-blue-200 dark:border-blue-800";case"se":return"bg-green-100 text-green-800 border-green-200 dark:bg-green-900/30 dark:text-green-200 dark:border-green-800";case"wol":return"bg-orange-100 text-orange-800 border-orange-200 dark:bg-orange-900/30 dark:text-orange-200 dark:border-orange-800";case"il":return"bg-red-100 text-red-800 border-red-200 dark:bg-red-900/30 dark:text-red-200 dark:border-red-800";default:return""}}function Dse({items:e,source:t}){const n=e.length>0?e:["#"];return g.jsx("div",{className:"flex flex-wrap gap-2",children:n.map((r,i)=>g.jsx("span",{className:"text-xs px-2 py-1 rounded-full border whitespace-nowrap "+Mse(r,t),children:r},`${t}-${i}-${r}`))})}function bP({title:e,rows:t}){return g.jsxs("div",{className:"space-y-2 desk:flex-1 desk:px-1",children:[g.jsx("div",{className:"text-md font-bold text-neutral-800 dark:text-neutral-200 mt-2",children:e}),t.map(n=>{const i=n.items.some(a=>a!=="#")?"shrink-0 w-12 text-xs font-semibold text-orange-700 dark:text-orange-300 mt-1":"shrink-0 w-12 text-xs font-semibold text-neutral-700 dark:text-neutral-300 mt-1";return g.jsxs("div",{className:"flex items-start gap-3 p-1 rounded-sm",children:[g.jsx("div",{className:i,children:n.label}),g.jsx(Dse,{items:n.items.length>0?n.items:["#"],source:n.source})]},`${e}-${n.label}`)})]})}function Pse({pillars:e,daewoon:t,sewoon:n,wolwoon:r,ilwoon:i,tab:a=""}){const{settings:o}=vn(),[l,u]=w.useState(""),[d,h]=w.useState("");w.useEffect(()=>{o.sinsalBase===""?(u(""),h("")):(u(""),h(""))},[o.sinsalBase]);const p=w.useMemo(()=>({voidBasis:l===""?"day":"year",samjaeBasis:d===""?"day":"year"}),[l,d]),b=w.useMemo(()=>ef({natal:e,daewoon:t,sewoon:n,wolwoon:r,ilwoon:i,basis:p}),[e,t,n,r,i,p]),{good:y,bad:S,meta:_}=b,k=K=>K.map(F=>F==="#"?F:` ${F}`),A=(K,F)=>{const z=["natal"];return F===""&&z.push("natal"),F===""&&z.push("natal","dae"),F===""&&z.push("natal","dae","se"),F===""&&z.push("natal","dae","se","wol"),F===""&&z.push("natal","dae","se","wol","il"),K.filter(W=>z.includes(W.source))},N=[{label:"",items:k(y.si),source:"natal"},{label:"",items:k(y.il),source:"natal"},{label:"",items:k(y.wol),source:"natal"},{label:"",items:k(y.yeon),source:"natal"},{label:"",items:y.dae,source:"dae"},{label:"",items:y.se,source:"se"},{label:"",items:y.wolun,source:"wol"},{label:"",items:y.ilun,source:"il"}],j=[{label:"",items:k(S.si),source:"natal"},{label:"",items:k(S.il),source:"natal"},{label:"",items:k(S.wol),source:"natal"},{label:"",items:k(S.yeon),source:"natal"},{label:"",items:S.dae,source:"dae"},{label:"",items:S.se,source:"se"},{label:"",items:S.wolun,source:"wol"},{label:"",items:S.ilun,source:"il"}],C=A(N,a),D=A(j,a),P=_.voidPair.day?`(${_.voidPair.day.join("")})`:"()",$=_.voidPair.year?`(${_.voidPair.year.join("")})`:"()",U=_.samjaeYears.day?`(${_.samjaeYears.day.join("")})`:"()",Y=_.samjaeYears.year?`(${_.samjaeYears.year.join("")})`:"()";return g.jsxs("div",{className:"rounded-xl p-4 bg-neutral-100 dark:bg-neutral-900 text-neutral-900 dark:text-neutral-100 space-y-2",children:[g.jsx("div",{className:"text-base font-bold mb-1",children:"(/)"}),g.jsxs("div",{className:"flex flex-wrap justify-center items-center gap-3 text-xs",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("label",{className:"text-neutral-600 dark:text-neutral-300",children:" "}),g.jsxs("select",{value:l,onChange:K=>u(K.target.value),className:"px-2 h-30 rounded border border-neutral-300 dark:border-neutral-700 bg-white dark:bg-neutral-800",children:[g.jsx("option",{value:"",children:P}),g.jsx("option",{value:"",children:$})]})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("label",{className:"text-neutral-600 dark:text-neutral-300",children:" "}),g.jsxs("select",{value:d,onChange:K=>h(K.target.value),className:"px-2 h-30 rounded border border-neutral-300 dark:border-neutral-700 bg-white dark:bg-neutral-800",children:[g.jsx("option",{value:"",children:U}),g.jsx("option",{value:"",children:Y})]})]})]}),g.jsxs("div",{className:"desk:flex",children:[g.jsx(bP,{title:"()",rows:C}),g.jsx("div",{className:"block desk:hidden border-t border-neutral-200 dark:border-neutral-800 mt-4 mb-3"}),g.jsx(bP,{title:"()",rows:D})]})]})}const pa={year:0,month:1,day:2,hour:3},J6={[pa.year]:.3,[pa.month]:.5,[pa.day]:.3,[pa.hour]:.3},Q6={[pa.year]:.15,[pa.month]:.2,[pa.day]:0,[pa.hour]:.15},Rse=e=>Dm.has(e)?e:Qn[e]??e,Lse=e=>Wd.has(e)?e:Gn[e]??e,Ise=e=>typeof e=="string"&&e.length>=2?Rse(e.slice(-1)):"",$se=e=>typeof e=="string"&&e.length>=1?Lse(e.slice(0,1)):"",En=(e,t,n,r)=>({han:e,nan:t,jo:n,seup:r}),Bse={:En(2,0,.5,2),:En(2,0,0,2),:En(2,0,0,2),:En(0,2,2,0),:En(0,2,2,0),:En(0,2,1,2),:En(0,2,2,.5),:En(0,2,2,0),:En(0,2,2,1),:En(2,0,0,2),:En(2,0,0,2),:En(2,0,1,1)},zse={:En(0,1,1,0),:En(0,1,1,0),:En(0,2,2,0),:En(0,2,2,0),:En(0,0,1,0),:En(0,0,0,1),:En(1,0,0,1),:En(1,0,0,1),:En(2,0,0,2),:En(2,0,0,2)},yP=e=>Math.max(0,Math.min(100,e));function vP(e,t){const n=Math.max(0,e),r=Math.max(0,t),i=n+r;return i<=0?50:r/i*100}function Use(e){let t=0,n=0,r=0,i=0;return[pa.year,pa.month,pa.day,pa.hour].forEach(a=>{const o=Bse[Ise(e[a])],l=zse[$se(e[a])],u=J6[a],d=Q6[a];u>0&&o&&(t+=o.han*u,n+=o.nan*u,r+=o.jo*u,i+=o.seup*u),d>0&&l&&(t+=l.han*d,n+=l.nan*d,r+=l.jo*d,i+=l.seup*d)}),{han:t,nan:n,jo:r,seup:i}}function Fse(e){const t=Array.isArray(e)?e.slice(0,4):[];for(;t.length<4;)t.push("");return t.map(n=>typeof n=="string"?n:"")}function Hse(e){const t=Fse(e);return w.useMemo(()=>{const{han:n,nan:r,jo:i,seup:a}=Use(t),o=vP(n,r),l=vP(a,i);return{hanNanPct:yP(o),joSeupPct:yP(l),raw:{han:n,nan:r,jo:i,seup:a},weights:{branch:J6,stem:Q6}}},[t])}function xP({label:e,percent:t,leftHint:n,midHint:r,rightHint:i}){const a=w.useMemo(()=>Math.max(0,Math.min(100,t)),[t]),o=[10,20,35,45,55,65,80];return g.jsxs("div",{className:"w-full mx-auto p-2 desk:p-4 bg-neutral-100 dark:bg-neutral-800 rounded-xl",children:[g.jsxs("div",{className:"flex justify-between text-[11px] text-neutral-400 mb-1",children:[g.jsx("span",{children:n}),g.jsx("span",{children:r}),g.jsx("span",{children:i})]}),g.jsxs("div",{className:"relative h-4 rounded bg-gradient-to-r from-blue-500 via-yellow-400 to-red-500",children:[o.map(l=>g.jsx("div",{className:"absolute top-0 h-4 w-[1px] bg-black/30",style:{left:`${l}%`},title:`${l}%`},l)),g.jsx("div",{className:"absolute top-0 h-4 w-[1px] bg-black/40",style:{left:"50%"},title:"50%"}),g.jsx("div",{className:"absolute -top-1 h-6 w-2 bg-white rounded shadow-sm",style:{left:`${a}%`,transform:"translateX(-50%)"},"aria-label":`${e} ${a.toFixed(1)}%`})]}),g.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[g.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs border border-neutral-600 text-neutral-700 dark:text-neutral-200",children:e}),g.jsxs("span",{className:"text-xs text-neutral-400",children:[a.toFixed(1),"%"]})]})]})}function Gse({natal:e}){const{hanNanPct:t,joSeupPct:n}=Hse(e);return g.jsxs("div",{className:"flex gap-2",children:[g.jsx(xP,{label:"",percent:t,leftHint:"",midHint:"",rightHint:""}),g.jsx(xP,{label:"",percent:n,leftHint:"",midHint:"",rightHint:""})]})}const Kr={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Ya={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},qse={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Sy={:"",:"",:"",:"",:""},e7={:"",:"",:"",:"",:""},Ym={:"",:"",:"",:"",:""},t7={:"",:"",:"",:"",:""},Yse={:{:{stem:"",w:10},:{stem:"",w:20}},:{:{stem:"",w:9},:{stem:"",w:3},:{stem:"",w:18}},:{:{stem:"",w:7},:{stem:"",w:7},:{stem:"",w:16}},:{:{stem:"",w:10},:{stem:"",w:20}},:{:{stem:"",w:9},:{stem:"",w:3},:{stem:"",w:18}},:{:{stem:"",w:7},:{stem:"",w:7},:{stem:"",w:16}},:{:{stem:"",w:10},:{stem:"",w:9},:{stem:"",w:11}},:{:{stem:"",w:9},:{stem:"",w:3},:{stem:"",w:18}},:{:{stem:"",w:7},:{stem:"",w:7},:{stem:"",w:16}},:{:{stem:"",w:10},:{stem:"",w:20}},:{:{stem:"",w:9},:{stem:"",w:3},:{stem:"",w:18}},:{:{stem:"",w:7},:{stem:"",w:7},:{stem:"",w:16}}},Kse={:{:{stem:"",w:100}},:{:{stem:"",w:20},:{stem:"",w:30},:{stem:"",w:50}},:{:{stem:"",w:30},:{stem:"",w:70}},:{:{stem:"",w:100}},:{:{stem:"",w:20},:{stem:"",w:30},:{stem:"",w:50}},:{:{stem:"",w:30},:{stem:"",w:70}},:{:{stem:"",w:100}},:{:{stem:"",w:20},:{stem:"",w:30},:{stem:"",w:50}},:{:{stem:"",w:30},:{stem:"",w:70}},:{:{stem:"",w:100}},:{:{stem:"",w:20},:{stem:"",w:30},:{stem:"",w:50}},:{:{stem:"",w:30},:{stem:"",w:70}}};function GT(e){return e===""||e===""||e===""||e===""||e===""||e===""||e===""||e===""||e===""||e===""||e===""||e===""}function n7(e){return(typeof e=="string"?e.trim().toLowerCase():"")==="hgc"?"hgc":"classic"}function qT(e){return e==="hgc"?Kse:Yse}const Wse={:["","",""],:["","",""],:["","",""],:["","",""],:["","",""],:["","",""],:["","",""],:["","",""],:["","",""],:["","",""],:["","",""],:["","",""]},v1={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},r7={:"",:"",:"",:"",:""},i7={:"",:"",:"",:""},Vse=[{a:"",b:"",to:""},{a:"",b:"",to:""},{a:"",b:"",to:""},{a:"",b:"",to:""},{a:"",b:"",to:""}],Zse=[["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""]],Xse={:!0,:!1,:!0,:!1,:!0,:!1,:!0,:!1,:!0,:!1},Xe=(e,t)=>`${e}${t}`,Li=(e,t,n)=>`${e}${t}${n}`,Jse={:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""]},wP={[Xe("","")]:[""],[Xe("","")]:["",""],[Xe("","")]:["",""],[Xe("","")]:[""],[Xe("","")]:[""],[Xe("","")]:[""],[Xe("","")]:["",""],[Xe("","")]:[""],[Xe("","")]:[""],[Xe("","")]:[""],[Xe("","")]:[""],[Xe("","")]:[""],[Xe("","")]:[""],[Xe("","")]:[""],[Xe("","")]:[""],[Xe("","")]:[""],[Xe("","")]:[""],[Xe("","")]:[""],[Xe("","")]:[""],[Xe("","")]:[""],[Xe("","")]:[""],[Xe("","")]:[""],[Xe("","")]:[""],[Xe("","")]:[""],[Xe("","")]:[""],[Xe("","")]:[""],[Xe("","")]:[""],[Xe("","")]:[""],[Xe("","")]:[""],[Xe("","")]:[""],[Xe("","")]:[""],[Xe("","")]:[""],[Xe("","")]:[""],[Xe("","")]:[""],[Xe("","")]:[""],[Xe("","")]:[""],[Xe("","")]:[""],[Xe("","")]:[""],[Xe("","")]:[""],[Xe("","")]:[""],[Xe("","")]:[""],[Xe("","")]:[""],[Xe("","")]:[""],[Xe("","")]:[""],[Xe("","")]:[""],[Xe("","")]:[""],[Xe("","")]:[""],[Xe("","")]:["",""],[Xe("","")]:[""],[Xe("","")]:[""],[Xe("","")]:[""],[Xe("","")]:[""],[Xe("","")]:[""],[Xe("","")]:[""],[Xe("","")]:[""]},_P={[Li("","","")]:[""],[Li("","","")]:[""],[Li("","","")]:[""],[Li("","","")]:[""],[Li("","","")]:[""],[Li("","","")]:[""],[Li("","","")]:[""],[Li("","","")]:[""],[Li("","","")]:[""],[Li("","","")]:[""],[Li("","","")]:["",""]},Qse={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};function ga(e){return["","","","",""].includes(e)}function ele(e){return["","","","","",""].includes(e)}const x1=e=>({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""})[e]??e,da=e=>e&&e.length>=1?e.charAt(0):"",Cn=e=>e&&e.length>=2?e.charAt(1):"",tle=e=>Array.from(new Set(e));function nle(e,t){const n=Wse[e];if(!n)return!1;const r=new Set(t.filter(Boolean));return n.filter(a=>a!==e).every(a=>r.has(a))}function rle(e){return Kr[e]??""}function Ka(e,t){const n=Kr[e],r=Kr[t];if(!n||!r)return"";let i;r===n?i="":r===Sy[n]?i="":r===Ym[n]?i="":r===t7[n]?i="":r===e7[n]?i="":i="";const a=ga(e)===ga(t);switch(i){case"":return a?"":"";case"":return a?"":"";case"":return a?"":"";case"":return a?"":"";case"":return a?"":""}}function ile(e,t){const n=Kr[e],r=Ya[t];if(!n||!r)return"";let i;r===n?i="":r===Sy[n]?i="":r===Ym[n]?i="":r===t7[n]?i="":r===e7[n]?i="":i="";const a=ele(t)===ga(e);switch(i){case"":return a?"":"";case"":return a?"":"";case"":return a?"":"";case"":return a?"":"";case"":return a?"":""}}function ale(e){return{:"",:"",:"",:"",:""}[e]??""}function m2(e,t){const n=rle(e),r=ga(e);let i;t===n?i="":Sy[n]===t?i="":Sy[t]===n?i="":Ym[n]===t?i="":Ym[t]===n?i="":i="";const a=r===ga(ale(t));switch(i){case"":return a?"":"";case"":return a?"":"";case"":return a?"":"";case"":return a?"":"";case"":return a?"":""}}const ole={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},sle=e=>/^(|||||||||)$/.test(e);function lle(e){return e?sle(e)?e:ole[e]??"":""}function q0(e){return lle(da(e))}function cle(e){return e?.charAt(0)??""}function ule(e){return e?.charAt(1)??""}function dle(e,t,n){const[r,i,a,o]=(e??[]).slice(0,4),l=ue=>(ue?.length??0)>=1?ue.charAt(0):"",u=ue=>(ue?.length??0)>=2?ue.charAt(1):"",d=[r,i,a,o].map(l).filter(Boolean),h=new Set(Object.keys(Ya)),p=[r,i,a,o].map(u).filter(ue=>!!ue&&h.has(ue)),b=l(a),y=Xse[b]??!1,S=new Set,_=t==="classic"?jv:Ov,k=new Set(["","","","","","","","","",""]),A=ue=>(_[ue]??[]).filter(Ce=>k.has(Ce)),N=(ue,Ce)=>{const ze=Ya[Ce];return ze?m2(ue,ze):null},j={:0,:0,:0,:0,:0};for(const ue of d){const Ce=Kr[ue];Ce&&(j[Ce]+=10)}const C=[];for(const ue of p){const Ce=qse[ue];Ce&&C.push(Ce);const ze=Ya[ue];ze&&(j[ze]+=6)}const P=[...d,...C].map(ue=>Ka(b,ue)),$={:["",""],:["",""],:["",""],:["",""],:["",""]},U=ue=>P.filter(Ce=>Ce===ue).length,Y=ue=>P.filter(Ce=>$[ue].includes(Ce)).length,K=p[1],F=!!b&&Qse[b]===K,z=n.elementPercent100;z.>=20&&z.>=20&&z.>=15&&S.add("");const W=[r,i,a,o].filter(Boolean),X=[];for(const ue of W){const Ce=ue.charAt(0),ze=ue.charAt(1);X.push(Ka(b,Ce)),X.push(N(b,ze))}const Z=(ue,Ce)=>{const ze=(it,Et)=>!!it&&!!Et&&ue.includes(it)&&Ce.includes(Et)||Ce.includes(it)&&ue.includes(Et);for(let it=0;it+1<X.length;it+=2)if(ze(X[it],X[it+1]))return!0;return!1},G=ue=>X.some(Ce=>!!Ce&&ue.includes(Ce)),J=U("")+U(""),te=U(""),ce=Y(""),oe=Y(""),B=Z(["",""],["",""]);if((te>=1||J>=2)&&ce>=1&&J>ce&&oe<=1&&B&&S.add(""),G($.)&&G($.)&&Z($.,$.)){const ue=P.includes("");S.add(ue?"":"")}Y("")>=2&&Y("")>=2&&Math.abs(Y("")-Y(""))<=1&&Y("")<=1&&Y("")<=1&&S.add("");const V=U(""),ie=U(""),Q=U("")+U(""),se=U("")+U(""),me=Y("");ie>=2&&Q>=1&&j.+j.>=20&&S.add(""),ie>=2&&se>=1&&j.+j.>=20&&S.add(""),ie>=2&&se>=1&&j.+j.>=20&&Z([""],["",""])&&me<=1&&S.add(""),V>=2&&se>=1&&j.+j.>=20&&Z([""],["",""])&&me<=1&&S.add("");const he=(ue,Ce)=>{const ze=Kr[ue],it=Ya[Ce];return!!ze&&!!it&&ze===it},_e=[r,i,a,o].filter(Boolean),re=u(a),Ee=he(b,re),we=_e.map(ue=>ue.charAt(0)).filter(ue=>["",""].includes(Ka(b,ue)));let le=!1;for(const ue of _e){const Ce=ue.charAt(0),ze=ue.charAt(1);if(we.includes(Ce)&&he(Ce,ze)){le=!0;break}}Ee&&le&&S.add(""),Y("")>=3&&Y("")>=.5*(Y("")+Y("")+Y("")+Y(""))&&S.add(""),Y("")>=3&&Y("")>=.5*(Y("")+Y("")+Y("")+Y(""))&&S.add(""),Y("")>=3&&Y("")>=1&&S.add(""),Y("")>=3&&Y("")+Y("")<=1&&S.add("");const Ue=U("");Y("")+Y("")>=2&&Ue===1&&Y("")>=1&&S.add(""),Ue>=2&&Q+Y("")>=3&&S.add("");const Fe=V+ie;(V>=2||Fe>=2)&&se>=1&&Fe>se&&S.add(""),ie>=2&&se>=1&&Fe>se&&S.add("");const Ne=U(""),Pe=U("");Ne>=2&&Ue+Pe>=1&&S.add(""),Ne>=2&&Ue+Pe===0&&S.add(""),y&&Ne>=2&&Ue>=1&&S.add(""),!y&&Ne>=2&&Ue>=1&&S.add(""),U("")>=2&&U("")>=1&&S.add(""),U("")>=1&&U("")>=1&&Z([""],[""])&&S.add(""),F&&Ue>=1&&Y("")+Y("")>=2&&S.add("");const Ge=[u(r),u(i),u(a),u(o)].filter(Boolean),Oe=[r?.charAt(0),i?.charAt(0),o?.charAt(0)].filter(Boolean),Me=new Set(Oe.map(ue=>Ka(b,ue))),Be=new Set(Ge.flatMap(ue=>{const Ce=Ya[ue];return Ce?[m2(b,Ce)]:[]})),lt=new Set(Ge.flatMap(ue=>A(ue).map(Ce=>Ka(b,Ce))));return["","","","",""].forEach(ue=>{const Ce=$[ue],ze=Ce.some(pt=>Me.has(pt)),it=Ce.some(pt=>Be.has(pt)),Et=Ce.some(pt=>lt.has(pt));!ze&&!it&&!Et?S.add(`${ue}`):!ze&&!it&&Et&&S.add(`${ue}`)}),Array.from(S)}const fle=e=>{const t={:0,:0,:0,:0,:0};for(const n of e){const r=da(n),i=Cn(n),a=Kr[r],o=Ya[i];a&&(t[a]+=10),o&&(t[o]+=6)}return t};function hle(e){const{pillars:t,dayStem:n,monthBranch:r,mapping:i}=e,[a,o,l,u]=(t??[]).slice(0,4),d=[da(a),da(o),da(l),da(u)].filter(Boolean),h=[Cn(a),Cn(o),Cn(l),Cn(u)].filter(Boolean),p=Kr[n],b=d.map(ue=>Ka(n,ue)),y=[],S=ue=>d.filter(Ce=>Ce===ue).length,_=ue=>h.filter(Ce=>Ce===ue).length,k=ue=>ue.every(Ce=>h.includes(Ce)),A=ue=>b.some(Ce=>ue.includes(Ce)),N=da(o),j=ue=>ga(ue),C=()=>{const ue=d.map(Ce=>Kr[Ce]);return ue.length===4&&ue.every(Ce=>Ce===ue[0])},D=()=>{if(d.length!==4)return!1;const ue=d.map(j),Ce=ue[0]&&!ue[1]&&ue[2]&&!ue[3],ze=!ue[0]&&ue[1]&&!ue[2]&&ue[3];return Ce||ze};ga(n)&&r7[n]===r&&y.push("");const P=[["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""]];for(const[ue,Ce]of P)if(n===ue&&r===Ce){y.push("");break}!ga(n)&&i7[n]===r&&y.push("");const $=v1[n];$&&Cn(l)===$&&p===Ya[Cn(l)]&&y.push(""),$&&Cn(u)===$&&p===Ya[Cn(u)]&&y.push("");const U=[a,o,l,u].map(cle),Y=[a,o,l,u].map(ule);for(const ue of U);for(const ue of Y);const K=i==="hgc"?Ov:jv;function F(ue){return(K[ue]??[]).filter(Ce=>["","","","","","","","","",""].includes(Ce))}const z=[a,o,l,u].filter(Boolean),X=z.flatMap(ue=>[ue.charAt(0),ue.charAt(1)]).flatMap(ue=>{try{if(["","","","","","","","","",""].includes(ue))return[Ka(n,ue)];if(["","","","","","","","","","","",""].includes(ue)){const Ce=ile(n,ue),ze=F(ue).map(it=>Ka(n,it));return[Ce,...ze]}return[]}catch{return[]}}),Z=ue=>X.some(Ce=>ue.includes(Ce)),G=(ue,Ce)=>{const ze=[],it=[];for(const pt of z){const Qt=pt.charAt(0),$r=pt.charAt(1);ze.push(Ka(n,Qt));const Br=Ya[$r];Br?it.push(m2(n,Br)):it.push(null)}const Et=(pt,Qt)=>!!pt&&!!Qt&&(ue.includes(pt)&&Ce.includes(Qt)||Ce.includes(pt)&&ue.includes(Qt));for(let pt=0;pt<ze.length;pt++)if(Et(ze[pt],it[pt]))return!0;for(let pt=0;pt<ze.length-1;pt++)if(Et(ze[pt],ze[pt+1])||Et(it[pt],it[pt+1]))return!0;return!1},J={:["",""],:["",""],:["",""],:["",""]};Z([...J.])&&Z([...J.])&&G([...J.],[...J.])&&y.push(""),Z([...J.])&&Z([...J.])&&G([...J.],[...J.])&&y.push("");const te=ue=>b.filter(Ce=>ue.includes(Ce)).length,ce=te(["",""]),oe=te([""]),B=te([""]),V=te(["",""]),ie=te(["",""]),Q=te(["",""]);oe>=1&&ce>=1&&ce>=oe&&B<=oe&&y.push("");const se=te([""]);se>=1&&V>=1&&se>=V&&y.push(""),b.includes("")&&V>=1&&y.push("");const he=fle(t),_e=Object.entries(he).sort((ue,Ce)=>Ce[1]-ue[1]),re=_e[0];if(re&&re[1]>=60&&y.push(`(${re[0]})`),_e.length>=2){const[ue,Ce]=_e[0],[,ze]=_e[1];Ce>=75&&Ce-ze>=12&&p!==ue&&y.push(`(${ue})`)}for(const ue of Vse){const Ce=d.includes(ue.a),ze=d.includes(ue.b);if(!Ce||!ze)continue;const it=ue.to,Et=he[it]??0,pt=Kr[ue.a],Qt=Kr[ue.b],$r=Math.max(he[pt]??0,he[Qt]??0),Br=Ya[r]===it,ao=Object.entries(he).sort((an,zr)=>zr[1]-an[1])[0]?.[0]===it;let It=!1;Et>=60&&(Br||ao)&&$r<=20&&Et-$r>=20&&(y.push(`(${it})`),It=!0),!It&&Et>=50&&(Br||ao)&&$r<=25&&(y.push(`(${it})`),It=!0),!It&&Et>=35&&y.push(`(${it})`)}const Ee=`${da(u)}${Cn(u)}`;["",""].includes(n)&&["","",""].includes(Ee)&&y.push(""),["","","",""].includes(Cn(u))&&y.push(""),["",""].includes(n)&&(Cn(l)===""||Cn(o)==="")&&!h.includes("")&&y.push("");const we=d.some(ue=>ue===""||ue===""),le=h.some(ue=>ue===""||ue==="");["",""].includes(Cn(l))&&!we&&!le&&y.push(""),["","",""].every(ue=>d.includes(ue))&&y.push(""),["","",""].every(ue=>d.includes(ue))&&y.push(""),["","",""].every(ue=>d.includes(ue))&&y.push("");const Ue=Object.values(he).sort((ue,Ce)=>Ce-ue);Ue.length>=3&&Ue[0]-Ue[2]<=8&&Ue[0]+Ue[1]+Ue[2]>=80&&y.push(""),ie>=1&&Q>=1&&Math.abs(ie-Q)<=1&&y.push(""),k(["","","",""])&&y.push(""),k(["","","",""])&&y.push(""),k(["","","",""])&&y.push(""),h.length===4&&h.every(ue=>ue===h[0])&&y.push(""),d.length===4&&C()&&D()&&y.push(""),t.every(ue=>ue&&ue===t[0])&&y.push(""),d.length===4&&d.every(ue=>ue===d[0])&&h.length===4&&h.every(ue=>ue===h[0])&&y.push(""),ce>=1&&(Cn(l)===v1[n]||Cn(u)===v1[n])&&y.push(""),S("")>=3&&k(["","",""])&&["","",""].includes(Cn(l))&&y.push("");const Ne=n===""||n==="",Pe=[["","",""],["","",""]],Ge=[["","",""],["","",""]];Ne&&(Pe.some(ue=>k(ue))||Ge.some(ue=>k(ue)))&&y.push("");const Oe=new Set(["","","","","",""]),Me=`${da(l)}${Cn(l)}`;if(Oe.has(Me)&&_("")>=2&&(A(["",""])||h.includes("")||h.includes("")||A(["",""])||y.push("")),new Set(["","","","","",""]).has(Me)&&_("")>=2&&h.includes("")&&y.push(""),n===""&&`${da(u)}${Cn(u)}`==""){const ue=Ka(n,N);!["","","",""].includes(ue)&&A(["",""])&&!h.includes("")&&!h.includes("")&&y.push("")}return new Set(["","",""]).has(Me)&&`${da(u)}${Cn(u)}`==""&&!h.includes("")&&!A(["",""])&&y.push(""),Me===""&&_("")+_("")>=2&&y.push(""),(Me===""||Me==="")&&_("")>=2&&!A(["",""])&&!h.includes("")&&y.push(""),n===""&&k(["","",""])&&y.push(""),Me===""&&`${da(u)}${Cn(u)}`==""&&y.push(""),tle(y)}function mle(e){const t=[];for(const n of e)switch(n.kind){case"BUNIL_PICK":t.push(`: ${n.from} `);break;case"WANGJI_FIXED_JUNGI":t.push(":   ");break;case"SAENGJI_EMITTED_ONE":t.push(`: ${n.from}  `);break;case"SAENGJI_EMITTED_MULTI":t.push(`:      ${n.from} `);break;case"SAENGJI_NOT_EMITTED_USE_JUNGI":t.push(":    ");break;case"GOJI_SAMHAP_USE_JUNGI":t.push(":     ");break;case"GOJI_EARLY_JEOLIP_USE_CHOGI":t.push(":  +12    ");break;case"GOJI_LATE_JEOLIP_USE_JUNGI":t.push(":  +12    ");break;case"NEUTRALIZED":t.push(":   / ");break;case"EX_GEONLOK":t.push(": /   ");break;case"EX_YANGIN":t.push(":    ");break;case"EX_WOLGEOP":t.push(":    ");break;case"EX_EXCLUDED_BIGEOP":t.push(": /  ");break}return t}function ple(e){return e===""?"()":{:"",:"",:"",:"",:"",:"",:"",:""}[e]??"-"}const SP=1e3*60*60*24;function Y0(e){return Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())}function gle(e){let t=xa(e);const n=t[0]?.date;if(n&&e.getTime()<n.getTime()){const r=new Date(e);r.setFullYear(e.getFullYear()-1),t=xa(r)}return t}function ble(e){const t=Jse[e];return Array.isArray(t)&&t.length>0?t[0]:null}function yle(e,t){const n=ble(e);if(!n)return null;const r=gle(t),i=r.findIndex(d=>d.name===n);if(i<0)return null;const a=r[i]?.date,o=r[i+1]?.date;if(!a)return null;const l=Math.floor((Y0(t)-Y0(a))/SP)+1,u=o?Math.max(1,Math.floor((Y0(o)-Y0(a))/SP)):30;return{dayIdx:l<1?1:l,spanDays:u}}function vle(e){return(e.?.w??0)+(e.?.w??0)+e..w}function xle(e,t,n){const r=Math.max(1,vle(e)),i=Math.max(1,Math.min(n,t)),a=Math.max(1,Math.min(r,Math.ceil(i*r/n))),o=e.?.w??0,l=e.?.w??0;return e.&&a<=o?{stem:e..stem,from:""}:e.&&a<=o+l?{stem:e..stem,from:""}:{stem:e..stem,from:""}}function a7(e){const{dayStem:t,monthBranch:n,date:r,pillars:i,emittedStems:a=[],otherBranches:o=[],isNeutralized:l,mapping:u}=e,d=[],h=n7(u),p=qT(h);if(!GT(n))return{:"-",:"-",:"-",:"-",:"-",:"-",:[],reason:["  "],reasonTokens:[]};const b=p[n];if(!b)return{:"-",:"-",:"-",:"-",:"-",:"-",:[],reason:["  "],reasonTokens:[]};const y={:b.?{stem:x1(b..stem),w:b..w}:void 0,:b.?{stem:x1(b..stem),w:b..w}:void 0,:{stem:x1(b..stem),w:b..w}},S=y..stem;let _=S;const k=yle(n,r);if(["","","",""].includes(n)&&nle(n,o)&&y.)_=y..stem,d.push({kind:"GOJI_SAMHAP_USE_JUNGI"});else if(k){const z=xle(y,k.dayIdx,k.spanDays);_=z.stem,d.push({kind:"BUNIL_PICK",from:z.from})}else _=S,d.push({kind:"BUNIL_FALLBACK_USE_WOLRYEONG"});function A(z,W){if(!z)return!1;if(W.includes(z))return!0;const X=Kr[z];return X?W.some(Z=>Kr[Z]===X):!1}let N="";_&&A(_,a)&&!l?.(_)?(N=_,d.push({kind:"DANRYEONG_CONFIRMED_BY_EMIT"})):_&&l?.(_)&&d.push({kind:"NEUTRALIZED"});const j=N||S;let C="";const D=Kr[j];if(D){const z=Object.entries(Ym).find(([,W])=>W===D)?.[0]??null;z&&(C=Object.entries(Kr).find(([X,Z])=>Z===z&&ga(X)===ga(j))?.[0]??"")}let P="-";const $=Ka(t,j),U=Zse.some(([z,W])=>z===t&&W===n),Y=ga(t)&&r7[t]===n,K=!ga(t)&&i7[t]===n;$===""||$===""?U?(P="",d.push({kind:"EX_GEONLOK"})):Y?(P="",d.push({kind:"EX_YANGIN"})):K?(P="",d.push({kind:"EX_WOLGEOP"})):d.push({kind:"EX_EXCLUDED_BIGEOP"}):P=ple($);const F=hle({pillars:i,dayStem:t,monthBranch:n,mapping:u});return{:S,:_,:N||"-",:j||"-",:C||"-",:P,:F,reason:mle(d),reasonTokens:d}}function wle(e){const[t,n,r,i]=e,a=q0(i),o=q0(r),l=q0(n),u=q0(t),d=[],h=[[a,o],[o,l],[l,u]];for(const[b,y]of h){if(!b||!y)continue;const S=Xe(b,y),_=wP[S];_?.length&&d.push(..._);const k=Xe(y,b);if(k!==S){const A=wP[k];A?.length&&d.push(...A)}}const p=[[a,o,l],[o,l,u]];for(const[b,y,S]of p){if(!b||!y||!S)continue;const _=Li(b,y,S),k=_P[_];k?.length&&d.push(...k);const A=Li(S,y,b);if(A!==_){const N=_P[A];N?.length&&d.push(...N)}}return Array.from(new Set(d))}const _le=["","","","",""];function Sle(e){return _le.includes(e)}function kle(e){const t=/^(.+?)\((.+)\)$/.exec(e.trim());return t?{base:t[1].trim(),inner:t[2].trim()}:{base:e.trim()}}function Qh(e,t){if(!t)return e;const n=(Sle(t),t);return`${e}(${n})`}const Ele={:{title:"",short:"    ."},:{title:"",short:"    ."},:{title:"",short:"    ."},:{title:"",short:"   ."},:{title:"",short:"   ."},:{title:"",short:"     ."},:{title:"",short:"   ."},:{title:"",short:"   ."},:{title:"",short:"   ."},:{title:"",short:"    ."},:{title:"",short:"     ."},:{title:"",short:"    ."},:{title:"",short:"    ."},:{title:"",short:"   ."},:{title:"",short:"    ."},:{title:"",short:"    ."},:{title:"",short:"    ."},:{title:"",short:" 3    ."},:{title:"",short:"    ."},:{title:"",short:"    ."},:{title:"",short:"    ."},:{title:"",short:"    ."},:{title:"",short:"   ."},:{title:"",short:"     ."},:{title:"",short:"     ."},:{title:"",short:"     ."},:{title:"",short:"     ."},:{title:"",short:"    ."},:{title:"",short:"    ."},:{title:"",short:"    ."},:{title:"",short:"    ."},:{title:"",short:"   ."},:{title:"",short:"   ."},:{title:"",short:"    ."},:{title:"",short:"    ."},:{title:"",short:"   ."},:{title:"",short:"   ."}},Tle={:e=>({title:Qh("",e),short:"     ."}),:e=>({title:Qh("",e),short:"   ."}),:e=>({title:Qh("",e),short:"   ."}),:e=>({title:Qh("",e),short:"    ."}),:e=>({title:Qh("",e),short:"    ."})};function Ale(e){const{base:t,inner:n}=kle(e);return t===""||t===""||t===""||t===""||t===""?Tle[t](n):Ele[t]}function jle(e){const t=Ale(e);if(t)return t.detail?`${t.short}

${t.detail}`:t.short}const Ole=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),kP={:"   .   .",:"   .",:"  .",:"    .",:"  .",:"  .  .",:"   .",:"  .   .",:"   .",:"  .",:"   .",:"   .",:"  .",:"   .",:"   .",:"   .",:"   .",:"   .",:"  .",:"  .",:"   .",:"    .",:"   .",:"   .",:"   .",:"   .",:"   .",:"   .",:"  .",:"   .",:"  .  .",:"   .",:"   .",:"  .",:"  .",:"   .",:"    .",:"      .",:"  .",:"  .",:"    .",:"  .",:"  .",:"   .",:"  .",:"   .",:"   .",:"   .",:"   .",:"  .",:"  .",:"  .",:"    .",:"   .",:"  .",:"    .",:"     .",:"   .",:"  .",:"     .",:"    .",:"   .",:"    .",:"    .",:"   .",:"   .",:" .",:"   .",:"   .",:"   .",:"   ."};function Nle(e){if(Ole(kP,e))return kP[e]}const EP={:"(/)",:"(/)",:"(/)",:"(/)",:"(/)"},Cle={:{title:"",short:"    .",detail:"       ."},:{title:"",short:"      .",detail:"  +     ."},:{title:"",short:"     .",detail:"  +     ."},:{title:"",short:"     .",detail:"  +  ."},:{title:"",short:"      .",detail:"     ."},:{title:"",short:"    ."},:{title:"",short:"    .",detail:"  +    ."},:{title:"",short:"()    .",hint:"     "},:{title:"",short:"     ."},:{title:"",short:"    ."},:{title:"",short:"  +    ."},:{title:"",short:"   ."},:{title:"",short:"   ."},:{title:"",short:"    ."},:{title:"",short:"   ."},:{title:"",short:"      ."},:{title:"",short:"    ."},:{title:"",short:"      ."},:{title:"",short:"    ."},:{title:"",short:"       ."},:{title:"",short:"    ."},:{title:"",short:"     ."},:{title:"",short:"     ."},:{title:"",short:"    ."}};function Mle(e){const t=/^(|)(||||)$/.exec(e);if(!t)return null;const n=t[1],r=t[2];return n===""?{kind:"",group:r}:{kind:"",group:r}}function Dle(e,t){return e===""?{title:`${t}`,short:`${EP[t]}() //   .`,hint:"( ) +  +   "}:{title:`${t}`,short:`${EP[t]}()     .`,hint:" X /  O"}}function Ple(e){const t=Mle(e);return t?Dle(t.kind,t.group):Cle[e]}function Rle(e){const t=Ple(e);if(t)return t.detail?`${t.short}

${t.detail}`:t.short}const Lle={:{title:"",text:"()  /  .   ."},:{title:"",text:" (//)     .  ."},:{title:"",text:"       .     ."},:{title:"",text:" (/)    ( ).    ."},:{title:"",text:" (/)   ,           ."}};function Ile(e){return Lle[e]?.text}const $le=e=>{switch(e){case"":return"( )";case"":return"";case"":return"()"}},Ble={BUNIL_PICK:{title:"",text:"    //     ."},BUNIL_FALLBACK_USE_WOLRYEONG:{title:" ",text:"    ()    ."},DANRYEONG_CONFIRMED_BY_EMIT:{title:" ",text:"      ."},WANGJI_FIXED_JUNGI:{title:"",text:"       ."},SAENGJI_EMITTED_ONE:{title:" ",text:"        ."},SAENGJI_EMITTED_MULTI:{title:"  ",text:"          ."},SAENGJI_NOT_EMITTED_USE_JUNGI:{title:" ",text:"        ."},GOJI_SAMHAP_USE_JUNGI:{title:" + ",text:"      ."},GOJI_EARLY_JEOLIP_USE_CHOGI:{title:" +  ",text:"   12    ."},GOJI_LATE_JEOLIP_USE_JUNGI:{title:" +  ",text:"   12    ."},NEUTRALIZED:{title:"",text:"       ."},EX_GEONLOK:{title:" ",text:"       ."},EX_YANGIN:{title:" ",text:"       ."},EX_WOLGEOP:{title:" ",text:"        ."},EX_EXCLUDED_BIGEOP:{title:" ",text:"   ."}},zle={:{title:"",text:"      ."},:{title:"",text:"      ."},:{title:"",text:"      ."},:{title:"",text:"      ."},:{title:"",text:"      ."},:{title:"",text:"      ."},"()":{title:"()",text:"      ."},:{title:"",text:"      ."},:{title:"",text:"      ."},:{title:"",text:"/       ."},:{title:"",text:"/        ."},:{title:"",text:"/       ."}},Ule=e=>e.replace(/^\s*:\s*/,"").trim();function Fle(e){const t=Ule(e);return zle[t]}function Hle(e){const t=Ble[e.kind];if(t)return"from"in e?{...t,text:`${t.text} ( : ${$le(e.from)})`}:t}function Gle(e){const{pillars:t,tab:n,birthDate:r,emittedStems:i,otherBranches:a,isNeutralized:o,mapping:l,unified:u}=e,[d,h,p,b]=t,y=Q=>Q&&Q.length>=1?Q.charAt(0):"",S=Q=>Q&&Q.length>=2?Q.charAt(1):"",_=S(h),k=y(p),A=r instanceof Date&&!Number.isNaN(r.getTime())?r:new Date,N=[y(d),y(h),y(p),y(b)].filter(Q=>!!(Q&&Q.length===1)),j=[S(d),S(p),S(b)].filter(Q=>!!(Q&&Q.length===1)),C=a7({dayStem:k,monthBranch:_,date:A,pillars:t,emittedStems:i??N,otherBranches:a??j,isNeutralized:o,mapping:l}),D=C.reasonTokens??[],P=C.reason??[],$=[` : ${C.||"-"}`,` : ${C.||"-"}`,` : ${C.||"-"}`,` : ${C.||"-"}`,` : ${C.||"-"}`],U=[` : ${C.||"-"}`],Y=Array.isArray(C.)&&C..length>0?C..map(Q=>` : ${Q}`):[" : -"],K=wle(t),F=[...K.length?K.map(Q=>`${Q}`):[]],W=[...dle(t,l,u)],X=({text:Q,color:se})=>{const me={violet:"bg-violet-100 text-violet-800 border-violet-200 dark:bg-violet-900/30 dark:text-violet-200 dark:border-violet-800",amber:"bg-amber-100 text-amber-800 border-amber-200 dark:bg-amber-900/30 dark:text-amber-200 dark:border-amber-800",blue:"bg-blue-100 text-blue-800 border-blue-200 dark:bg-blue-900/30 dark:text-blue-200 dark:border-blue-800",green:"bg-green-100 text-green-800 border-green-200 dark:bg-green-900/30 dark:text-green-200 dark:border-green-800",red:"bg-red-100 text-red-800 border-red-200 dark:bg-red-900/30 dark:text-red-200 dark:border-red-800"};return g.jsx("span",{className:`inline-block text-xs px-2 py-1 rounded-full border whitespace-nowrap ${me[se]}`,title:Q,children:Q})},Z=({children:Q})=>g.jsx("li",{className:"!flex flex-wrap gap-1 p-1 rounded-sm",children:Q}),[G,J]=w.useState(null),te=({text:Q})=>{const se=Q.replace(/^\s*:\s*/,"").trim(),me=w.useMemo(()=>jle(se),[se]),he=`outer:${se}`,_e=G===he;return me?g.jsxs("span",{className:"relative inline-flex",children:[g.jsx("button",{type:"button",onClick:()=>J(_e?null:he),className:"inline-flex cursor-pointer",title:me,children:g.jsx(X,{text:Q,color:"blue"})}),_e&&g.jsx("div",{className:"absolute z-10 left-0 top-full mt-1 w-[180px] text-[11px] leading-4 rounded-md border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-900 text-neutral-700 dark:text-neutral-200 p-2 shadow text-center",children:me})]}):g.jsx(X,{text:Q,color:"blue"})},ce=({text:Q})=>{const se=Q.trim(),me=w.useMemo(()=>Nle(se),[se]),he=`mulsang:${se}`,_e=G===he;return me?g.jsxs("span",{className:"relative inline-flex",children:[g.jsx("button",{type:"button",onClick:()=>J(_e?null:he),className:"inline-flex cursor-pointer",title:me,children:g.jsx(X,{text:Q,color:"green"})}),_e&&g.jsx("div",{className:"absolute z-10 left-0 top-full mt-1 w-[180px] text-[11px] leading-4 rounded-md border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-900 text-neutral-700 dark:text-neutral-200 p-2 shadow text-center",children:me})]}):g.jsx(X,{text:Q,color:"green"})},oe=({text:Q})=>{const se=Q.trim(),me=w.useMemo(()=>Rle(se),[se]),he=`structure:${se}`,_e=G===he;return me?g.jsxs("span",{className:"relative inline-flex",children:[g.jsx("button",{type:"button",onClick:()=>J(_e?null:he),className:"inline-flex cursor-pointer",title:me,children:g.jsx(X,{text:Q,color:"red"})}),_e&&g.jsx("div",{className:"absolute z-10 left-0 top-full mt-1 w-[180px] text-[11px] leading-4 rounded-md border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-900 text-neutral-700 dark:text-neutral-200 p-2 shadow text-center",children:me})]}):g.jsx(X,{text:Q,color:"red"})},B=({text:Q,color:se})=>{const me=Q.trim(),he=me.split(":")[0]?.trim()??me,_e=w.useMemo(()=>Ile(he),[he]),re=`term:${he}`,Ee=G===re;return _e?g.jsxs("span",{className:"relative inline-flex",children:[g.jsx("button",{type:"button",onClick:()=>J(Ee?null:re),className:"inline-flex cursor-pointer",title:_e,children:g.jsx(X,{text:Q,color:se})}),Ee&&g.jsx("div",{className:"absolute z-10 left-0 top-full mt-1 w-[180px] text-[11px] leading-4 rounded-md border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-900 text-neutral-700 dark:text-neutral-200 p-2 shadow text-center",children:_e})]}):g.jsx(X,{text:Q,color:se})},V=({text:Q})=>{const se=w.useMemo(()=>Fle(Q),[Q]),me=`naegyeok:${Q}`,he=G===me;return se?g.jsxs("span",{className:"relative inline-flex",children:[g.jsx("button",{type:"button",onClick:()=>J(he?null:me),className:"inline-flex cursor-pointer",title:se.text,children:g.jsx(X,{text:Q,color:"amber"})}),he&&g.jsx("div",{className:"absolute z-10 left-0 top-full mt-1 w-[200px] text-[11px] leading-4 rounded-md border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-900 text-neutral-700 dark:text-neutral-200 p-2 shadow text-center",children:se.text})]}):g.jsx(X,{text:Q,color:"amber"})},ie=({token:Q,fallback:se,idx:me})=>{const he=Hle(Q),_e=he?.title??se,re=he?.text??se,Ee=`reason:${Q.kind}:${"from"in Q?Q.from:""}:${me}`,we=G===Ee;return g.jsxs("span",{className:"relative inline-flex",children:[g.jsx("button",{type:"button",onClick:()=>J(we?null:Ee),className:"inline-flex cursor-pointer",title:re,children:g.jsx(X,{text:_e,color:"amber"})}),we&&g.jsx("div",{className:"absolute z-10 left-0 top-full mt-1 w-[200px] text-[11px] leading-4 rounded-md border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-900 text-neutral-700 dark:text-neutral-200 p-2 shadow text-center",children:re})]})};return g.jsxs("div",{className:"p-4 rounded-xl bg-neutral-100 dark:bg-neutral-900 space-y-3 text-sm","data-revkey":`gyeok:${n}|${t.join("")}|${$.join(",")}|${U.join(",")}|${Y.join(",")}`,children:[g.jsx("div",{className:"font-bold text-base",children:"   "}),g.jsx("div",{className:"text-xs text-amber-500 dark:text-amber-400 mb-2",children:"*        ."}),g.jsxs("ul",{className:"space-y-1",children:[g.jsx(Z,{children:$.map(Q=>g.jsx(B,{text:Q,color:"violet"},Q))}),g.jsx(Z,{children:U.map(Q=>g.jsx(V,{text:Q},Q))}),g.jsx(Z,{children:Y.map(Q=>g.jsx(te,{text:Q},Q))}),g.jsx(Z,{children:F.map(Q=>g.jsx(ce,{text:Q},Q))}),g.jsx(Z,{children:W.map(Q=>g.jsx(oe,{text:Q},Q))})]}),D.length>0?g.jsxs("div",{className:"mt-2",children:[g.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-400",children:" "}),g.jsx("div",{className:"mt-1",children:g.jsx(Z,{children:D.map((Q,se)=>g.jsx(ie,{token:Q,fallback:P[se]??Q.kind,idx:se},`${Q.kind}-${se}`))})})]}):C.reason.length>0?g.jsxs("div",{className:"mt-2 text-xs text-neutral-600 dark:text-neutral-400",children:[": ",C.reason.join(" / ")]}):null]})}const qle=Object.fromEntries(io..map((e,t)=>[e,Zr[t]])),Yle=Object.fromEntries(Zr.map((e,t)=>[e,io.[t]])),Kle=Object.fromEntries(io..map((e,t)=>[e,vi[t]])),Wle=Object.fromEntries(vi.map((e,t)=>[e,io.[t]])),Vle=e=>qle[e]??e,Zle=e=>Kle[e]??e,Xle=e=>Yle[e]??e,Jle=e=>Wle[e]??e;function Qle(e){const t={...e};for(const n of Object.keys(e)){const r=/[]/.test(n)?Vle(n):Xle(n);r&&t[r]===void 0&&(t[r]=e[n])}return t}function YT(e){const t={...e};for(const n of Object.keys(e)){const r=/[]/.test(n)?Zle(n):Jle(n);r&&t[r]===void 0&&(t[r]=e[n])}return t}const ece={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},tce={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},o7={:[{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}]},nce={...o7,:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.2},{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.2},{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}]},TP=Qle(ece),AP=YT(tce);YT(o7);YT(nce);const rce=["","","","",""];function ice(){const[e,t]=w.useState("   "),[n,r]=w.useState(""),[i,a]=w.useState(!0);return{bigTab:e,setBigTab:t,blendTab:n,setBlendTab:r,demoteAbsent:i,setDemoteAbsent:a}}const ace={:{:"#13B713",:"#DC143C",:"#F0B100",:"#a0a0a0",:"#353535"},:{:"#DC143C",:"#F0B100",:"#a0a0a0",:"#353535",:"#13B713"},:{:"#F0B100",:"#a0a0a0",:"#353535",:"#13B713",:"#DC143C"},:{:"#a0a0a0",:"#353535",:"#13B713",:"#DC143C",:"#F0B100"},:{:"#353535",:"#13B713",:"#DC143C",:"#F0B100",:"#a0a0a0"}},oce={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};function s7(e){const t=oce[e]??"";return ace[t]}const sce=Object.fromEntries(io..map((e,t)=>[e,Zr[t]])),lce=Object.fromEntries(Zr.map((e,t)=>[e,io.[t]])),cce=Object.fromEntries(io..map((e,t)=>[e,vi[t]])),uce=Object.fromEntries(vi.map((e,t)=>[e,io.[t]])),dce=e=>sce[e]??e,fce=e=>cce[e]??e,hce=e=>lce[e]??e,mce=e=>uce[e]??e;function l7(e){const t={...e};for(const n of Object.keys(e)){if(n.length<2)continue;const r=n.charAt(0),i=n.charAt(1),a=/[]/.test(r)||/[]/.test(i)?`${dce(r)}${fce(i)}`:`${hce(r)}${mce(i)}`;t[a]===void 0&&(t[a]=e[n])}return t}const c7={:1,:.2,:1,:1,:.5,:.7,:0,:.5,:1,:1,:0,:1,:0,:0,:.3,:0,:.5,:.3,:0,:0,:.3,:0,:.8,:.3,:0,:.5,:0,:0,:.3,:.3,:0,:.3,:0,:0,:.8,:0,:0,:.8,:0,:0,:.5,:0,:1,:.5,:0,:0,:.7,:0,:1,:.5,:.7,:0,:.2,:.7,:1,:.7,:.7,:1,:.2,:.7},pce={...c7,:.8,:.3,:.5,:.5,:.2,:.2,:.8,:.2},gce=l7(c7),bce=l7(pce),yce={:"",:"",:"",:"",:""},vce={:"",:"",:"",:"",:""},xce={:"",:"",:"",:"",:""},wce={:"",:"",:"",:"",:""},_ce=e=>Gn[e]??e,Sce=e=>Qn[e]??e;function u7(e){return!e||e.length<2?"":`${_ce(e[0])}${Sce(e[1])}`}const d7=e=>e&&e.length>=1?e[0]:"",f7=e=>e&&e.length>=2?e[1]:"";function h7(e){return{:e,:yce[e],:vce[e],:xce[e],:wce[e]}}const m7={:["","","","","","","",""],:["","","","","","","",""],:["","","","","","","",""],:["","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","",""],:["","","","","","","",""]};function kce(e,t){const n=(e??[]).slice(0,4).map(u7);if(n.length!==4||n.some(b=>b.length<2))return{flags:{:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1}},monthBranch:"",dayEl:""};const r=d7(n[2]),i=r===""||r===""?"":r===""||r===""?"":r===""||r===""?"":r===""||r===""?"":"",a=n.map(b=>f7(b)),o={:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1}},l=m7[r]??[],u=a[1];l.includes(u)&&(o..=!0,o..=!0);const d=a[2];l.includes(d)&&(o..=!0,o..=!0);const h=h7(i).,p=t[h]??0;return o..=p>=30,{flags:o,monthBranch:u,dayEl:i}}function p7(e,t){const n=(e??[]).slice(0,4).map(u7);if(n.length<3||n[0].length<2||n[1].length<2||n[2].length<2){const S={:!1,:!1,:!1};return{flags:{:{...S},:{...S},:{...S},:{...S},:{...S},:{...S},:{...S},:{...S},:{...S},:{...S}},monthBranch:"",dayEl:""}}const r=d7(n[2]),i=r===""||r===""?"":r===""||r===""?"":r===""||r===""?"":r===""||r===""?"":"",a=n.map(S=>f7(S)),o={:!1,:!1,:!1},l={:{...o},:{...o},:{...o},:{...o},:{...o},:{...o},:{...o},:{...o},:{...o},:{...o}},u=m7[r]??[],d=a[1];u.includes(d)&&(l..=!0,l..=!0,l..=!0,l..=!0);const h=a[2];u.includes(h)&&(l..=!0,l..=!0,l..=!0,l..=!0);const p=h7(i).;return(t[p]??0)>=30&&(l..=!0,l..=!0,l..=!0,l..=!0),{flags:l,monthBranch:d,dayEl:i}}const Ece=Object.fromEntries(Object.entries(Gn).map(([e,t])=>[t,e])),Tce=Object.fromEntries(Object.entries(Qn).map(([e,t])=>[t,e])),Ace=e=>Gn[e]??e,jce=e=>Qn[e]??e;function Oce(e){return!e||e.length<2?"":`${Ace(e[0])}${jce(e[1])}`}function Fc(e){return TP[e]??TP[Ece[e]??""]}function Hc(e){return AP[e]??AP[Tce[e]??""]}const w1=["year","month","day","hour"],Nce={year:{stem:10,branch:10},month:{stem:15,branch:30},day:{stem:25,branch:25},hour:{stem:15,branch:15}},Cce={year:{stem:10,branch:10},month:{stem:15,branch:45},day:{stem:25,branch:40},hour:{stem:15,branch:12.5}},Mce=new Set(["","","","",""]),Dce=new Set(["","","","","",""]),Pce=new Set(["","","",""]),_1=e=>Mce.has(e)?"":"",S1=e=>{const t=Dce.has(e)?"":"";return Pce.has(e)?t===""?"":"":t};function jP(e){const t=e.reduce((l,u)=>l+u,0);if(t<=0)return e.map(()=>0);const n=e.map(l=>l*100/t),r=n.map(l=>Math.floor(l+.5)),i=100-r.reduce((l,u)=>l+u,0);if(i===0)return r;const a=n.map((l,u)=>({i:u,frac:l-Math.floor(l+.5)})).sort((l,u)=>u.frac-l.frac),o=r.slice();if(i>0)for(let l=0;l<i;l++)o[a[l].i]+=1;else for(let l=0;l<-i;l++)o[a[a.length-1-l].i]-=1;return o}function Rce(e,t){return e===0?t?1:.8:e===1?t?.6:.5:t?.3:.2}const K0={:.15,:.1,:-.15,:-.2,:-.25},Cs={:"",:"",:"",:"",:""},gu={:"",:"",:"",:"",:""},Lo={:"",:"",:"",:"",:""},Kv={:"",:"",:"",:"",:""};function W0(e,t){return e===t?"":Cs[t]===e?"":Cs[e]===t?"":Lo[e]===t?"":Lo[t]===e?"":""}const Gc=e=>e&&e.length>=1?e[0]:"",qc=e=>e&&e.length>=2?e[1]:"";function Lce(e,t){const n=e.reduce((u,d)=>u+d,0);if(n<=0||t<=0)return new Array(e.length).fill(0);const r=e.map(u=>u/n*t),i=r.map(u=>Math.floor(u));let a=t-i.reduce((u,d)=>u+d,0);const o=r.map((u,d)=>({i:d,frac:u-Math.floor(u)})).sort((u,d)=>d.frac-u.frac),l=i.slice();for(let u=0;u<o.length&&a>0;u++)l[o[u].i]+=1,a-=1;return l}function OP(e,t){switch(e){case"":return t;case"":return Cs[t];case"":return Lo[t];case"":return Kv[t];case"":return gu[t];default:return t}}const NP={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Ice=["","","","",""],$ce={:{a:"",b:"",aVal:0,bVal:0},:{a:"",b:"",aVal:0,bVal:0},:{a:"",b:"",aVal:0,bVal:0},:{a:"",b:"",aVal:0,bVal:0},:{a:"",b:"",aVal:0,bVal:0}},CP={:0,:0,:0,:0,:0,:0,:0,:0,:0,:0},Bce={:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1}};function zce(e){return e.length===4&&!!e[0]&&e[0].length>=2&&!!e[1]&&e[1].length>=2&&!!e[2]&&e[2].length>=2}function Uce(e){const t=Ice.map(n=>({name:n,value:0,color:"#999999"}));return{overlay:{totalsSub:{...CP},perStemAugBare:{},perStemAugFull:{}},totals:t,perTenGod:{...$ce},PerTenGodSub:{...CP},elementScoreRaw:e,deukFlags:{...Bce},perStemElement:{},perStemElementScaled:{},stemScoreRaw:{},elementPercent100:{:0,:0,:0,:0,:0}}}function Fce(e,t){const n=e[2]?.[0]??"",r=t??n;return{dayStem:r,dayEl:r===""||r===""?"":r===""||r===""?"":r===""||r===""?"":r===""||r===""?"":""}}function p2(e){const{pillars:t,dayStem:n,mode:r,debug:i,useHarmonyOverlay:a,criteriaMode:o,luck:l}=e,u=o==="modern"?Nce:Cce,d=r==="classic"?bce:gce,h={:0,:0,:0,:0,:0},p={},b=(t??[]).slice(0,4).map(Oce);if(!zce(b))return Uce(h);const{dayStem:y,dayEl:S}=Fce(b,n),_=[{val:0},{val:0},{val:0},{val:0}],k=[[],[],[],[]];for(const B of b){if(!B)continue;const V=B.charAt(0),ie=B.charAt(1);p[V]=(p[V]??0)+50;const Q=NP[ie];Q&&(p[Q]=(p[Q]??0)+50)}for(let B=0;B<4;B++){const V=b[B];if(!V||V.length<2)continue;const ie=w1[B],Q=Gc(V),se=qc(V),me=u[ie],he=Fc(Q);he&&(h[he]+=me.stem,_[B]={stem:Q,el:he,pol:_1(Q),val:me.stem});const _e=Hc(se);_e&&(h[_e]+=me.branch,k[B].push({el:_e,pol:S1(se),val:me.branch}))}for(let B=0;B<4;B++){const V=b[B];if(!V||V.length<2)continue;const ie=w1[B],Q=d[V]??0;if(Q===0)continue;const se=Gc(V),me=Fc(se);if(!me)continue;const he=u[ie].stem*Q;h[me]+=he,_[B].val+=he}for(let B=0;B<4;B++){const V=b[B];if(!V||V.length<2)continue;const ie=qc(V),Q=Hc(ie);if(!Q)continue;const se=u[w1[B]].branch,me=S1(ie);let he=0;const _e=[B];B-1>=0&&_e.push(B-1),B+1<=3&&_e.push(B+1),B-2>=0&&_e.push(B-2),B+2<=3&&_e.push(B+2);const re=Array.from(new Set(_e));for(const Ee of re){if(!b[Ee]||b[Ee].length<2)continue;const we=Gc(b[Ee]),le=Fc(we);if(!le||le!==Q)continue;const Ue=_1(we)===me,Fe=Math.abs(Ee-B),Ne=Rce(Fe,Ue);he+=se*Ne}he!==0&&(h[Q]+=he,k[B].push({el:Q,pol:me,val:he}))}for(let B=0;B<4;B++){const V=b[B];if(!V||V.length<2)continue;const ie=Gc(V),Q=Fc(ie);if(!Q)continue;let se=0;const me=qc(b[B]),he=Hc(me);he&&(se+=K0[W0(Q,he)]);const _e=B===0?[1]:B===3?[2]:[B-1,B+1];for(const Ee of _e){const we=Gc(b[Ee]),le=Fc(we);le&&(se+=K0[W0(Q,le)])}const re=_[B].val;if(re!==0&&se!==0){const Ee=Math.round(re*(1+se)*10)/10,we=Ee-re;h[Q]+=we,_[B].val=Ee}}for(let B=0;B<4;B++){const V=b[B];if(!V||V.length<2)continue;const ie=qc(V),Q=Hc(ie);if(!Q)continue;let se=0;const me=Gc(b[B]),he=Fc(me);he&&(se+=K0[W0(Q,he)]);const _e=B===0?[1]:B===3?[2]:[B-1,B+1];for(const Ee of _e){if(!b[Ee]||b[Ee].length<2)continue;const we=qc(b[Ee]),le=Hc(we);le&&(se+=K0[W0(Q,le)])}const re=k[B].reduce((Ee,we)=>Ee+we.val,0);if(re!==0&&se!==0){const we=Math.round(re*(1+se)*10)/10-re;h[Q]+=we,k[B].length>0&&(k[B][0].val+=we)}}a&&Xie(b,h);const A={dae:{stem:.04,branch:.04},se:{stem:.03,branch:.03},wol:{stem:.02,branch:.02},il:{stem:.01,branch:.01}},N=[];if(!(!l||l.tab==="")){let B=function(V,ie){const Q=V?Le(V):"";if(!Q||Q.length<2)return;const se=Gc(Q),me=qc(Q),he=Fc(se),_e=Hc(me),re=Math.max(1,(h.??0)+(h.??0)+(h.??0)+(h.??0)+(h.??0)),Ee=A[ie];if(he){const we=Math.round(re*Ee.stem);h[he]+=we,N.push({stem:se,el:he,pol:_1(se),val:we})}if(_e){const we=Math.round(re*Ee.branch);h[_e]+=we,N.push({el:_e,pol:S1(me),val:we})}};B(l.dae,"dae"),(l.tab===""||l.tab===""||l.tab==="")&&B(l.se,"se"),(l.tab===""||l.tab==="")&&B(l.wol,"wol"),l.tab===""&&B(l.il,"il")}const j={:0,:0,:0,:0,:0};Object.entries(h).forEach(([B,V])=>{const ie=Y(B,S);j[ie]+=V});const C=["","","","",""],D=jP(C.map(B=>j[B])),P=s7(y),$=C.map((B,V)=>({name:B,value:D[V],color:P[B]})),U={:0,:0,:0,:0,:0,:0,:0,:0,:0,:0};function Y(B,V){return B===V?"":Cs[V]===B?"":Lo[V]===B?"":Lo[B]===V?"":gu[V]===B?"":""}function K(B,V){switch(Y(B,S)){case"":U.+=V*.5,U.+=V*.5;break;case"":U.+=V*.5,U.+=V*.5;break;case"":U.+=V*.5,U.+=V*.5;break;case"":U.+=V*.5,U.+=V*.5;break;case"":U.+=V*.5,U.+=V*.5;break}}Object.entries(h).forEach(([B,V])=>{V>0&&K(B,V)});const F={:{a:"",b:"",aVal:0,bVal:0},:{a:"",b:"",aVal:0,bVal:0},:{a:"",b:"",aVal:0,bVal:0},:{a:"",b:"",aVal:0,bVal:0},:{a:"",b:"",aVal:0,bVal:0}};for(const B of C){const V=$.find(_e=>_e.name===B)?.value??0,ie=F[B].a,Q=F[B].b,se=U[ie]??0,me=U[Q]??0,he=se+me;if(he>0){const _e=Math.floor(V*se/he+.5),re=V-_e;F[B].aVal=_e,F[B].bVal=re}else F[B].aVal=Math.floor(V/2+.5),F[B].bVal=V-F[B].aVal}const{flags:z}=kce(b,h),W={};_.forEach(B=>{if(B.stem&&B.el&&B.val){const V=`${B.stem}${B.el}`;W[V]=(W[V]??0)+B.val}});for(let B=0;B<4;B++){const V=b[B];if(!V||V.length<2)continue;const ie=qc(V),Q=NP[ie],se=Hc(ie);if(!Q||!se)continue;const me=`${Q}${se}`,he=k[B].reduce((_e,re)=>_e+re.val,0);W[me]=(W[me]??0)+he}const X=["","","","","","","","","",""],Z={};X.forEach(B=>{Z[B]=0}),C.forEach(B=>{const V=$.find(re=>re.name===B)?.value??0,ie=OP(B,S),Q=Object.entries(W).filter(([re])=>re.endsWith(ie)),se=Q.map(([re])=>re),me=Q.map(([,re])=>re),he=Math.max(0,Math.round(V*10)),_e=Lce(me.length?me:[1,1],he);if(se.length===2)Z[se[0]]=(_e[0]??Math.round(he/2))/10,Z[se[1]]=(_e[1]??he-(_e[0]??0))/10;else if(se.length===1)Z[se[0]]=he/10;else{const re=ie===""?["",""]:ie===""?["",""]:ie===""?["",""]:ie===""?["",""]:["",""],Ee=Math.floor(he/2),we=he-Ee;Z[re[0]]+=Ee/10,Z[re[1]]+=we/10}});const G=["","","","",""],J={:0,:0,:0,:0,:0};for(const B of $){const V=OP(B.name,S);J[V]+=B.value}const te=jP(G.map(B=>J[B])),ce={:te[0],:te[1],:te[2],:te[3],:te[4]};return i&&console.log({elementScore:h,totals:$,perTenGod:F,perStemRaw:W,perStemElementScaled:Z,elementPercent100:ce}),{overlay:{totalsSub:U,perStemAugBare:W,perStemAugFull:Z},totals:$,perTenGod:F,PerTenGodSub:U,stemScoreRaw:p,elementScoreRaw:h,deukFlags:z,perStemElement:W,perStemElementScaled:Z,elementPercent100:ce}}const V0={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Hce=["","","","",""];function MP(e){return Hce.includes(e)}const Gce={:"",:"",:"",:"",:""},qce={:"",:"",:"",:"",:""},Yce={:"",:"",:"",:"",:""},Kce={:"",:"",:"",:"",:""},g2={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Wce=["","","","","","","","","",""],Vce={natal:50,dae:30,se:20,wol:7,il:3};function ky(e){if(!e)return null;const t=e.trim();if(["","","","","","","","","",""].includes(t))return t;if(Gn[t])return Gn[t];if(["","","","","","","","","","","",""].includes(t))return V0[t]??null;if(Qn[t])return V0[Qn[t]]??null;const n=t.charAt(0);return Gn[n]?Gn[n]:["","","","","","","","","",""].includes(n)?n:Qn[n]?V0[Qn[n]]??null:["","","","","","","","","","","",""].includes(n)?V0[n]??null:null}function Zce(e,t){const n=g2[e],r=g2[t];if(!n||!r)return"";let i;r===n?i="":r===Gce[n]?i="":r===qce[n]?i="":r===Yce[n]?i="":r===Kce[n]?i="":i="";const a=MP(e)===MP(t);switch(i){case"":return a?"":"";case"":return a?"":"";case"":return a?"":"";case"":return a?"":"";case"":return a?"":""}}function Ey(e){const t=Object.entries(e),n=t.reduce((d,[,h])=>d+(h>0?h:0),0);if(n<=0)return Object.fromEntries(t.map(([d])=>[d,0]));const r=t.map(([d,h])=>[d,(h>0?h:0)*100/n]),i=r.map(([d,h])=>[d,Math.round(h)]);let a=i.reduce((d,[,h])=>d+h,0);const o=r.map(([d,h])=>[d,h-Math.round(h)]).sort((d,h)=>h[1]-d[1]),l=Object.fromEntries(i.map(([d,h])=>[d,h]));let u=0;for(;a<100&&u<o.length;)l[o[u][0]]+=1,a+=1,u+=1;return l}function DP(e,t){const n={:0,:0,:0,:0,:0,:0,:0,:0,:0,:0};for(const[r,i]of Object.entries(e??{})){if(i<=0)continue;const a=ky(r);if(!a)continue;const o=Zce(t,a);n[o]+=i}return Ey(n)}function Xce(e){return{:{a:"",b:"",aVal:e.,bVal:e.},:{a:"",b:"",aVal:e.,bVal:e.},:{a:"",b:"",aVal:e.,bVal:e.},:{a:"",b:"",aVal:e.,bVal:e.},:{a:"",b:"",aVal:e.,bVal:e.}}}function PP(e){const t={};for(const[n,r]of Object.entries(e??{})){if(r<=0)continue;const i=ky(n);i&&(t[i]=(t[i]??0)+r)}return t}function RP(e){const n={...{:0,:0,:0,:0,:0,:0,:0,:0,:0,:0}};for(const r of Wce){const i=g2[r],a=`${r}${i}`;n[a]=Math.max(0,Math.round(e[r]??0))}return n}function LP(e){const t=["","","","",""],n={:0,:0,:0,:0,:0};for(const r of t)typeof e[r]=="number"&&(n[r]=e[r]);return n}function Jce(e,t){const n=t?.dae?Z0(t.dae):{},r=t?.se?Z0(t.se):{},i=t?.wol?Z0(t.wol):{},a=t?.il?Z0(t.il):{},o={},l=[{kind:"natal",bare:e},{kind:"dae",bare:n},{kind:"se",bare:r},{kind:"wol",bare:i},{kind:"il",bare:a}];for(const{kind:d,bare:h}of l){const p=Vce[d];if(!h||Object.keys(h).length===0)continue;const b=Ey(h);for(const[y,S]of Object.entries(b))o[y]=(o[y]??0)+S*p}const u=Object.values(o).reduce((d,h)=>d+h,0);if(u>0)for(const d of Object.keys(o))o[d]=o[d]/u*100;return o}function Qce(e){if(!e)return[];const t=ky(e.charAt(0)),n=ky(e.charAt(1));return[t,n].filter(Boolean)}function Z0(e){const t=Qce(e),n={};for(const r of t)n[r]=(n[r]??0)+1;return n}function Wv(e){const{natal:t,tab:n,chain:r,hourKey:i="unified"}=e,a=[Le(t[0]??""),Le(t[1]??""),Le(t[2]??""),Le(t[3]??"")],o=a[2]?.charAt(0)??"",{hiddenStemMode:l,hiddenStem:u}=Ll,d=l==="classic"?"classic":"hgc",h=r?{tab:n,dae:r.dae?Le(r.dae):void 0,se:(n===""||n===""||n==="")&&r.se?Le(r.se):void 0,wol:(n===""||n==="")&&r.wol?Le(r.wol):void 0,il:n===""&&r.il?Le(r.il):void 0}:{tab:n},p=p2({pillars:a,dayStem:o,mode:d,criteriaMode:"modern",useHarmonyOverlay:!0,luck:h}),b=p2({pillars:a,dayStem:o,mode:d,criteriaMode:"modern",useHarmonyOverlay:!0,luck:{tab:"",dae:void 0,se:void 0,wol:void 0,il:void 0}}),y=PP(p.perStemElementScaled),S=n===""?y:Jce(y,r),_=Ey(S),k=DP(S,o),A=Xce(k),N=RP(_),j=PP(b.perStemElementScaled),C=DP(j,o),D=Ey(j),P=RP(D);return{elementScoreRaw:p.elementScoreRaw,elementPercent100:p.elementPercent100,totals:p.totals,perStemElementScaled:p.perStemElementScaled,dayStem:o,mergedStems:_,perTenGodSub:k,perTenGod:A,overlay:{totalsSub:k,perStemAugBare:S,perStemAugFull:N},natalFixed:{elementScoreRaw:LP(b.elementScoreRaw),elementPercent100:LP(b.elementPercent100),totalsSub:C,overlay:{totalsSub:C,perStemAugBare:j,perStemAugFull:P}}}}const Oo=["","","","",""],Kl={:0,:0,:0,:0,:0},eue=[{name:"",min:0,max:10},{name:"",min:10,max:20},{name:"",min:20,max:35},{name:"",min:35,max:45},{name:"",min:45,max:55},{name:"",min:55,max:65},{name:"",min:65,max:80},{name:"",min:80,max:100.0001}],tue={:{temp:"cold",wet:"wet"},:{temp:"cold",wet:"wet"},:{temp:"cold",wet:"wet"},:{temp:"mild",wet:"normal"},:{temp:"mild",wet:"normal"},:{temp:"mild",wet:"wet"},:{temp:"hot",wet:"normal"},:{temp:"hot",wet:"dry"},:{temp:"hot",wet:"wet"},:{temp:"mild",wet:"dry"},:{temp:"mild",wet:"dry"},:{temp:"mild",wet:"dry"}},k1=24,nue=[[60,0],[55,.01],[50,.03],[45,.06],[40,.1],[35,.18],[30,.32],[27,.48],[24,.62]],Ty=20;Object.fromEntries(Object.entries(Gn).map(([e,t])=>[t,e]));Object.fromEntries(Object.entries(Qn).map(([e,t])=>[t,e]));const g7={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},rue={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};function b7(e){return Math.max(0,Math.min(100,e))}function tf(e,t,n){return Math.max(t,Math.min(n,e))}function iue(e){const t=b7(e);return eue.find(n=>t>=n.min&&t<n.max)?.name??""}function aue(e){const t=e?.[2]?.charAt(0)??"";return g7[t]??null}function oue(e){return(e?.[1]?.charAt(1)??"")||null}function y7(e){return Kv[e]}function sue(e){return e?{peer:e,resource:gu[e],leak:Cs[e],wealth:Lo[e],officer:y7(e)}:null}function lue(e){const t={...Kl};for(const n of e){if(!n)continue;const r=n.charAt(0),i=n.charAt(1),a=g7[r],o=rue[i];a&&(t[a]+=10),o&&(t[o]+=6)}return t}function cue(e){const t=Object.values(e).reduce((r,i)=>r+i,0);if(t<=0)return{:20,:20,:20,:20,:20};const n={...Kl};return Oo.forEach(r=>{n[r]=e[r]/t*100}),n}function uue(e){if(!e||e.length===0)return null;const t=e.reduce((r,i)=>r+(i?.value??0),0)||0;if(t<=0)return null;const n=r=>e.find(i=>i.name===r)?.value??0;return b7((n("")+n(""))/t*100)}function due(e,t){return!e||!t?null:t===e?"":Cs[e]===t?"":Lo[e]===t?"":y7(e)===t?"":gu[e]===t?"":null}function fue(e){for(const[t,n]of nue)if(e>=t)return n;return 1}const IP=(e,t)=>tf((Ty-(t[e]??0))/Ty,0,1),$P=(e,t)=>tf(((t[e]??0)-Ty)/Ty,0,1);function hue(e,t,n,r){const i=due(e,n);if(!e||!i)return 0;const a=tf((50-t)/50,0,1),o=tf((t-50)/50,0,1),l=IP(n,r),u=$P(n,r),d=IP(e,r),h=$P(e,r),p=6.5;let b=0;if(a>0)switch(i){case"":b=+(.3+.4*d+.15*l)*a;break;case"":b=+(.18+.45*d)*a;break;case"":b=-(.08+.2*(1-l)+.1*h)*a;break;case"":b=-(.22+.25*(1-l)+.1*(1-d))*a;break;case"":b=-(.35+.25*(1-l)+.1*(1-d))*a;break}else if(o>0)switch(i){case"":b=-(.25+.25*(1-l)+.2*h)*o;break;case"":b=-(.28+.2*h)*o;break;case"":b=+(.18+.2*l+.15*h)*o;break;case"":b=+(.22+.25*l+.1*h)*o;break;case"":b=+(.2+.2*l)*o;break}else switch(i){case"":b=.08*(d+l);break;case"":b=.05*d-.03*h;break;case"":b=.02*l-.02*u;break;case"":b=.01*l-.06*u;break;case"":b=-.05*(1-l);break}return Math.round(p*b*10)/10}function mue(e,t,n){const r=["","",""].includes(t),i=["","","",""].includes(t),a={...Kl};if(r){const o=Cs[e],l=Lo[e],u=Kv[e];a[o]+=28,a[l]+=22,a[u]+=20,n.get(o)?.push(":    ()"),n.get(l)?.push(":     "),n.get(u)?.push(":     ")}if(i){const o=gu[e],l=e;a[o]+=28,a[l]+=22,n.get(o)?.push(":     "),n.get(l)?.push(":     ")}return a}function BP(e,t){if(!e)return{...Kl};const n=tue[e]??{temp:"mild",wet:"normal"},r={...Kl};return n.temp==="cold"?(r.+=16,r.+=6,t.get("")?.push(":   "),t.get("")?.push(":  ")):n.temp==="hot"&&(r.+=14,r.+=6,t.get("")?.push(":   "),t.get("")?.push(":  ")),n.wet==="wet"?(r.+=8,r.+=4,t.get("")?.push(":   "),t.get("")?.push(":  ")):n.wet==="dry"&&(r.+=8,r.+=4,t.get("")?.push(":   "),t.get("")?.push(":  ")),r}function zP(e,t){const n={...Kl};for(const r of Oo){const i=Lo[r],a=Math.max(0,(e[r]??0)-(e[i]??0));if(a<=0)continue;const o=Cs[r],l=Math.round(a*.35);l>0&&(n[o]+=l,t.get(o)?.push(`: ${r}${i} `))}return n}function UP(e,t){const n={...Kl},r=Object.entries(e),i=Math.min(...r.map(([,o])=>o)),a=r.filter(([,o])=>o<=Math.max(6,i));for(const[o]of a)n[o]+=12,t.get(o)?.push(":  ");return n}const X0=()=>new Map(Oo.map(e=>[e,[]]));function nf(e,t){const n=aue(e),r=oue(e),i=lue(e),a=cue(i);let o=uue(t);if(o==null)if(!n)o=50;else{const F=n,z=gu[n],W=Object.values(i).reduce((X,Z)=>X+Z,0)||1;o=Math.min(100,Math.max(0,((i[F]??0)+(i[z]??0))/W*100))}const l=iue(o),u={...Kl},d=X0();if(n){const F=mue(n,l,d);Oo.forEach(z=>{u[z]+=F[z]??0})}const h=BP(r,d);Oo.forEach(F=>{u[F]+=h[F]??0});const p=zP(i,d);Oo.forEach(F=>{u[F]+=p[F]??0});const b=UP(i,d);Oo.forEach(F=>{u[F]+=b[F]??0});const y=sue(n),S={:0,:0,:0,:0,:0};if(Array.isArray(t))for(const F of t)S[F.name]=F.value;if(o>=45&&o<=55&&y){const F=S.>=30||S.>=Math.max(S.,S.,S.,S.)+5;o<=50?(u[y.resource]+=14,d.get(y.resource)?.push(": -"),u[y.peer]+=10,d.get(y.peer)?.push(": -"),u[y.leak]+=6,d.get(y.leak)?.push(": -"),u[y.wealth]+=3,d.get(y.wealth)?.push(": -"),F&&(u[y.officer]=Math.round(u[y.officer]*.8*10)/10,d.get(y.officer)?.push(":   "))):(u[y.leak]+=14,d.get(y.leak)?.push(": -"),u[y.wealth]+=10,d.get(y.wealth)?.push(": -"),u[y.officer]+=6,d.get(y.officer)?.push(": -"),u[y.resource]+=3,d.get(y.resource)?.push(": -"))}Oo.forEach(F=>{const z=hue(n,o,F,a);u[F]=tf(Math.round((u[F]+z)*10)/10,0,999)});const k=o<50;Oo.forEach(F=>{const z=a[F]??0,W=k&&n===F;if(z>=k1&&!W){const X=fue(z);u[F]=Math.round(u[F]*X*10)/10;const Z=Math.min(14,Math.max(0,Math.ceil((z-k1)*.5)));Z>0&&(u[F]=tf(u[F]-Z,0,999)),d.get(F)?.push(" ()")}});const A={:[],:[],:[],:[],:[]};if(n){const F=Cs[n],z=Lo[n],W=Kv[n],X=n,Z=gu[n];A[F].push(""),A[z].push(""),A[W].push(""),A[X].push(""),A[Z].push("")}const N={:(i.??0)>0,:(i.??0)>0,:(i.??0)>0,:(i.??0)>0,:(i.??0)>0},j=F=>{const z=a[F]??0;return z>=k1&&!(k&&n===F)?z>=55?4:z>=45?3:2:N[F]?0:1},C=BP(r,X0()),D=zP(i,X0()),P=UP(i,X0()),$=Oo.map(F=>({element:F,score:Math.round(u[F]*10)/10,via:pue(F,C,D,P),reasons:(d.get(F)??[]).slice(),tenGodHints:A[F]})).sort((F,z)=>{const W=j(F.element),X=j(z.element);return W!==X?W-X:z.score!==F.score?z.score-F.score:F.element.localeCompare(z.element)}),U=gue(l,C,D,P),Y={:0,:0,:0,:0,:0},K=t?t.reduce((F,z)=>(F[z.name]=z.value,F),{...Y}):void 0;return{chosenType:U,ordered:$,debug:{band:l,overallPct:o,elementScore:i,tenGodTotals:K,monthBranch:r??void 0}}}function pue(e,t,n,r){const i=[];return(t[e]??0)>0&&i.push(""),(n[e]??0)>0&&i.push(""),(r[e]??0)>0&&i.push(""),i.length===0&&i.push(""),i}function gue(e,t,n,r){if(["","","",""].includes(e))return"";const a=d=>Object.values(d).reduce((h,p)=>h+p,0),o=a(t),l=a(n),u=a(r);return o>Math.max(l,u)?"":l>=u?"":""}function bue(e){const t=e.reduce((l,u)=>l+u,0);if(t<=0)return e.map(()=>0);const n=e.map(l=>l*100/t),r=n.map(l=>Math.round(l));let a=100-r.reduce((l,u)=>l+u,0);const o=n.map((l,u)=>({i:u,f:l-Math.round(l)})).sort((l,u)=>u.f-l.f);for(let l=0;l<o.length&&a>0;l++)r[o[l].i]+=1,a-=1;return r}const FP=["","","","",""];function yue(e,t){const n=[Le(e[0]??""),Le(e[1]??""),Le(e[2]??""),Le(e[3]??"")],{elementScoreRaw:r}=p2({pillars:n,criteriaMode:t?.criteriaMode??"modern",useHarmonyOverlay:t?.useHarmonyOverlay??!0,luck:void 0}),i=FP.map(l=>r[l]??0),a=bue(i),o={:0,:0,:0,:0,:0};return FP.forEach((l,u)=>{o[l]=a[u]}),o}function v7(e,t){const n=yue(e,t),r=Le(e[2]??"").charAt(0),a={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}[r];if(!a)return 0;const o={:"",:"",:"",:"",:""},l=n[a]??0,u=n[o[a]]??0;return l+u*.7}const rf={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},x7={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},J0={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},vue=["","","","",""];function HP(e){return vue.includes(e)}const xue={:"",:"",:"",:"",:""},wue={:"",:"",:"",:"",:""},_ue={:"",:"",:"",:"",:""},Sue={:"",:"",:"",:"",:""};function Km(e){if(!e)return null;const t=e.trim();if(["","","","","","","","","",""].includes(t))return t;if(Gn[t])return Gn[t];if(["","","","","","","","","","","",""].includes(t))return J0[t]??null;if(Qn[t])return J0[Qn[t]]??null;const n=t.charAt(0);return Gn[n]?Gn[n]:["","","","","","","","","",""].includes(n)?n:Qn[n]?J0[Qn[n]]??null:["","","","","","","","","","","",""].includes(n)?J0[n]??null:null}function kue(e,t){const n=rf[e],r=rf[t];if(!n||!r)return"";let i;r===n?i="":r===xue[n]?i="":r===wue[n]?i="":r===_ue[n]?i="":r===Sue[n]?i="":i="";const a=HP(e)===HP(t);switch(i){case"":return a?"":"";case"":return a?"":"";case"":return a?"":"";case"":return a?"":"";case"":return a?"":""}}function Eue(e){switch(e){case"":case"":return"";case"":case"":return"";case"":case"":return"";case"":case"":return"";case"":case"":return""}}function Vv(e){const t=Object.entries(e),n=t.reduce((d,[,h])=>d+(h>0?h:0),0);if(n<=0)return Object.fromEntries(t.map(([d])=>[d,0]));const r=t.map(([d,h])=>[d,(h>0?h:0)*100/n]),i=r.map(([d,h])=>[d,Math.floor(h)]);let a=i.reduce((d,[,h])=>d+h,0);const o=r.map(([d,h])=>[d,h-Math.floor(h)]).sort((d,h)=>h[1]-d[1]),l=Object.fromEntries(i.map(([d,h])=>[d,h]));let u=0;for(;a<100&&u<o.length;)l[o[u][0]]+=1,a+=1,u+=1;return l}function Tue(e){const t={:0,:0,:0,:0,:0};for(const[n,r]of Object.entries(e??{})){const i=rf[Km(n)];i&&r>0&&(t[i]+=r)}return Vv(t)}function Aue(e,t){const n={:0,:0,:0,:0,:0,:0,:0,:0,:0,:0};for(const[r,i]of Object.entries(e??{})){if(i<=0)continue;const a=Km(r);if(!a)continue;const o=kue(t,a);n[o]+=i}return n}function jue(e){const t={:0,:0,:0,:0,:0};for(const[n,r]of Object.entries(e)){const i=Eue(n);t[i]+=r}return Vv(t)}function GP(e){const t=Array.isArray(e)?e.slice(0,4):[];for(;t.length<4;)t.push("");return t.map((n,r)=>{const i=Le(n??"");return i||(r<=2?"--":"")})}function w7(e,t){const n=!!t?.includeBranches,r={:!1,:!1,:!1,:!1,:!1};for(const i of e){if(!i)continue;const a=rf[i.charAt(0)];if(a&&(r[a]=!0),n){const o=x7[i.charAt(1)];o&&(r[o]=!0)}}return r}function _7(e){const t={:0,:0,:0,:0,:0};for(const n of e){if(!n)continue;const r=rf[n.charAt(0)],i=x7[n.charAt(1)];r&&(t[r]+=10),i&&(t[i]+=6)}return t}function E1(e){return e[0]?.length===2&&e[1]?.length===2&&e[2]?.length===2}const Oue=["","","","","","","","","",""];function Nue(e){const t={};for(const[n,r]of Object.entries(e??{})){if(r<=0)continue;const i=Km(n);i&&(t[i]=(t[i]??0)+r)}return t}function Cue(e){const n={...{:0,:0,:0,:0,:0,:0,:0,:0,:0,:0}};for(const r of Oue){const i=rf[r],a=`${r}${i}`;n[a]=Math.max(0,Math.round(e[r]??0))}return n}const Mue={natal:50,dae:30,se:20,wol:7,il:3};function Due(e){const t={};for(const{kind:r,bare:i}of e){const a=Mue[r]??0;if(a<=0)continue;const o=Vv(i);for(const[l,u]of Object.entries(o))t[l]=(t[l]??0)+u*a}const n=Object.values(t).reduce((r,i)=>r+i,0);if(n>0)for(const r of Object.keys(t))t[r]=t[r]/n*100;return t}function Pue(e){if(!e)return[];const t=Km(e.charAt(0)),n=Km(e.charAt(1));return[t,n].filter(Boolean)}function Q0(e){const t=Pue(e),n={};for(const r of t)n[r]=(n[r]??0)+1;return n}const b2=["","","","",""];function Rue(e){const t=(e??"").trim(),n=t?t[t.length-1]:"";return["","",""].includes(n)?"WINTER":["","",""].includes(n)?"SUMMER":["","",""].includes(n)?"SPRING":["","",""].includes(n)?"AUTUMN":"UNKNOWN"}function Lue(e,t){const n=b2.filter(u=>t[u]),r=n.map(u=>e[u]??0),i=r.length?Math.max(...r):0,a=r.length?Math.min(...r):0,o=Math.round(i-a),l=n.length>=3&&o<=12;return{presentEls:n,spread:o,balancedPresent:l}}function KT(e){return/||wood/i.test(e)?"":/||fire/i.test(e)?"":/||earth/i.test(e)?"":/||metal/i.test(e)?"":/||water/i.test(e)?"":null}function Iue(e){switch(e){case"":return"";case"":return"";case"":return"";case"":return"";case"":return""}}function qP(e){switch(e){case"":return"";case"":return"";case"":return"";case"":return"";case"":return""}}function $ue(e){const n=[["",""],["",""],["",""],["",""],["",""]],r=[];for(const[i,a]of n){const o=e[i]??0,l=e[a]??0;if(o<20||l<20)continue;let u=null,d=null;if(qP(i)===a)u=i,d=a;else if(qP(a)===i)u=a,d=i;else continue;const h=Iue(u),p=`${u}()${d}    ${h}( )`;r.push({a:i,b:a,controller:u,controlled:d,mediator:h,reason:p})}return r}function WT(e,t){const n=Math.max(.1,1-t/120);return Math.max(0,Math.round(e*n))}function em(e,t,n){return n?e.map(r=>!r.elNorm||t[r.elNorm]?r:{...r,score:0,reasons:[...r.reasons,":    0"]}):e}function tm(e,t,n){const r=i=>i?t[i]:!1;return[...e].sort((i,a)=>{if(n){const o=r(i.elNorm)?1:0,l=r(a.elNorm)?1:0;if(o!==l)return l-o}return a.score!==i.score?a.score-i.score:(i.elNorm??i.element).localeCompare(a.elNorm??a.element,"ko")})}function Bue(e,t){const n=(e??"").trim(),r=n?n[n.length-1]:"",i=new Set(["","",""]),a=new Set(["","",""]),o=new Set(["","",""]),l=new Set(["","",""]);let u=[];return i.has(r)?u=[{el:"",base:110,why:"():     "},{el:"",base:60,why:" :      "}]:a.has(r)?u=[{el:"",base:110,why:"():     "},{el:"",base:70,why:" :   () "}]:o.has(r)?u=[{el:"",base:90,why:"():     /"},{el:"",base:55,why:" : ()    "}]:l.has(r)?u=[{el:"",base:85,why:"():     "},{el:"",base:75,why:"():     "}]:u=[{el:"",base:60,why:":       ()"},{el:"",base:60,why:":       ()"}],u.map(d=>({element:d.el,elNorm:d.el,score:WT(d.base,t[d.el]??0),reasons:[d.why,` ${d.el}  ${Math.round(t[d.el]??0)}%`]}))}function zue(e){const t=$ue(e);if(!t.length)return{applicable:!1,items:[],note:"       "};const n=new Map;for(const i of t){const a=e[i.a]??0,o=e[i.b]??0,l=Math.min(a,o),u=95+Math.round(l/2),d=n.get(i.mediator),h=[i.reason,`(${i.a} ${Math.round(a)}%  ${i.b} ${Math.round(o)}%)`,` : ${i.controller}${i.mediator}${i.controlled}`];d?n.set(i.mediator,{score:Math.max(d.score,u),reasons:[...d.reasons,...h]}):n.set(i.mediator,{score:u,reasons:h})}return{applicable:!0,items:Array.from(n.entries()).map(([i,a])=>({element:i,elNorm:i,score:WT(a.score,e[i]??0),reasons:a.reasons})),note:"////       ( )  "}}function Uue(e,t){let n="",r=e.??0;for(const d of b2){const h=e[d]??0;h<r&&(r=h,n=d)}const i=b2.some(d=>!t[d]);if(!(i||r<=8))return{applicable:!1,items:[],note:"    ( )  "};const l=WT((i?85:70)+Math.round((8-Math.min(8,r))*6),e[n]??0);return{applicable:!0,items:[{element:n,elNorm:n,score:l,reasons:[i?"():  /  ":"():      ",`  ${n} = ${Math.round(r)}%`]}],note:" ()  ( 8% )      "}}function VT(e){const{eokbuList:t,monthGz:n,elemPct:r,presentMap:i,demoteAbsent:a,gyeokgukList:o}=e,l=tm(em(t,i,a),i,a),u=tm(em(Bue(n,r),i,a),i,a),d=Rue(n),h=Lue(r,i),p=d==="WINTER"||d==="SUMMER"?.85:.55,b=1.25,y=zue(r),S=tm(em(y.items,i,a),i,a),_=Uue(r,i),k=tm(em(_.items,i,a),i,a),A=Array.isArray(o)?o:[],N=A.length>0,j=tm(em(A,i,a),i,a),C=z=>Math.max(0,...z.map(W=>Number.isFinite(W.score)?W.score:0)),P=[{kind:"EOKBU",title:"",marker:"",priority:1,weight:b,applicable:l.length>0,note:"1.  /()  ",candidates:l},{kind:"JOHU",title:"",marker:"",priority:2,weight:p,applicable:!0,note:d==="WINTER"?"2. ()   ":d==="SUMMER"?"2. ()   ":"2.    ,   ",candidates:u},{kind:"TONGGWAN",title:"",marker:"",priority:3,weight:.7,applicable:y.applicable,note:y.note,candidates:S},{kind:"BYEONGYAK",title:"",marker:"",priority:3,weight:.7,applicable:_.applicable,note:_.note,candidates:k},{kind:"GYEOKGUK",title:"",marker:"",priority:4,weight:.55,applicable:N,note:N?"/     ( )":"  (//  )",candidates:j}].map(z=>{const W=C(z.candidates),X=z.candidates[0];let Z=0;if(z.applicable&&X){if(Z=X.score*z.weight,z.kind==="EOKBU"&&!h.balancedPresent){const G=Math.min(35,Math.round(h.spread*.9));Z+=G}z.kind==="EOKBU"&&h.balancedPresent&&(Z*=.75),X.elNorm&&!i[X.elNorm]&&(Z*=.25)}return{...z,maxScore:W,fitScore:Math.round(Z),finalScore:Math.round(Z)}}).sort((z,W)=>z.priority-W.priority),$=[...P].filter(z=>z.applicable&&z.candidates.length>0).sort((z,W)=>W.fitScore!==z.fitScore?W.fitScore-z.fitScore:z.priority-W.priority)[0],U=Math.max(0,...P.map(z=>z.fitScore)),Y=$?.kind??null,K=P.map(z=>{if(!Y)return z;if(z.kind===Y){const W=z.fitScore<U?U+1:z.fitScore;return{...z,finalScore:W}}return{...z,finalScore:z.fitScore}}),F=Y?K.find(z=>z.kind===Y)??null:null;return{bestKind:Y,best:F,groups:K}}const Fue={:"",:"",:"",:"",:""},Hue={:"",:"",:"",:"",:""},Gue={:"",:"",:"",:"",:""},que={:"",:"",:"",:"",:""};function T1(e){switch(e){case"":case"":case"":case"":return"";case"":case"":case"":case"":return"";case"":case"":case"":case"":return"";case"":case"":case"":case"":return"";case"":case"":case"":case"":return"";default:return null}}function Yue(e){const t=(e||"").trim();return!t||t==="-"?null:t.includes("")?"":t.includes("")?"":t.includes("")?"":t.includes("")?"":t.includes("")?"":t.includes("")||t.includes("")?"":t.includes("")?"":t.includes("")?"":t.includes("")||t.includes("")?"":t.includes("")?"":null}function Kue(e){return e===""||e===""?"":e===""||e===""?"":e===""||e===""?"":e===""||e===""?"":""}function Wue(e,t){switch(t){case"":return e;case"":return Fue[e];case"":return Gue[e];case"":return que[e];case"":return Hue[e]}}function Vue(e,t){const n=new Map,r=(u,d,h)=>{if(!u)return;const p=n.get(u);if(!p){n.set(u,{element:u,score:d,reasons:[h]});return}p.score=Math.max(p.score,d),p.reasons=p.reasons.includes(h)?p.reasons:[...p.reasons,h]},i=T1(t),a=Yue(e.);if(i&&a){const u=Kue(a),d=Wue(i,u);r(d,92,` ${e.}  ${u} (${d})`)}const o=T1(e.);o&&r(o,86,` ${e.}  (${o})`);const l=T1(e.);return l&&r(l,70,` ${e.}  (${l})`),Array.from(n.values()).sort((u,d)=>d.score-u.score)}const nm=e=>e&&e.length>=1?e.charAt(0):"",eb=e=>e&&e.length>=2?e.charAt(1):"";function Zue(e){const t=String(e??"");if(!/^\d{8}$/.test(t))return new Date;const n=Number(t.slice(0,4)),r=Number(t.slice(4,6)),i=Number(t.slice(6,8)),a=new Date(n,r-1,i,12,0,0,0);return Number.isNaN(a.getTime())?new Date:a}function Xue({data:e,pillars:t,lunarPillars:n,daewoonGzProp:r,blendTab:i,demoteAbsent:a}){const{date:o,yearGZ:l,monthGZ:u,dayGZ:d}=Xr(),h=w.useMemo(()=>Le(l),[l]),p=w.useMemo(()=>Le(u),[u]),b=w.useMemo(()=>Le(d),[d]),y=Eu(e,e?.mingSikType),S=w.useMemo(()=>{if(!y?.length)return 0;const Ne=y.findIndex((Pe,Ge)=>{const Oe=y[Ge+1]?.at;return o>=Pe.at&&(!Oe||o<Oe)});return Ne!==-1?Ne:o<y[0].at?0:y.length-1},[y,o]),_=w.useMemo(()=>{const Ne=r??y?.[S]?.gz??"";return Le(Ne)||null},[r,y,S]),{manualHour:k}=bp(),A=e.mingSikType??"/",N=w.useMemo(()=>GP(t),[t]),j=w.useMemo(()=>GP(n),[n]),C=w.useMemo(()=>{const Ne=[...N];return(!Ne[3]||Ne[3]===""||Ne[3]==="--")&&k&&(Ne[3]=k.stem+k.branch),Ne},[N,k]),D=w.useMemo(()=>{const Ne=[...j];return(!Ne[3]||Ne[3]===""||Ne[3]==="--")&&k&&(Ne[3]=k.stem+k.branch),Ne},[j,k]),P=w.useMemo(()=>{const Ne=Number(e.birthDay?.slice(0,4)),Pe=Number(e.birthDay?.slice(4,6)),Ge=Number(e.birthDay?.slice(6,8));if(!Number.isFinite(Ne)||!Number.isFinite(Pe)||!Number.isFinite(Ge))return null;const Oe=new Date(Ne,Pe-1,Ge,12,0,0,0),Me=Le(st(Oe)||""),Be=Le(St(Oe)||""),lt=Le(mt(Oe,A)||"");return[Me,Be,lt,""]},[e.birthDay,A]),$=E1(C),U=E1(D),K=(e.calendarType==="lunar"?"lunar":"solar")==="lunar"?U?"lunar":$?"solar":"lunar":$?"solar":U?"lunar":"solar",F=w.useMemo(()=>{const Pe=[...K==="lunar"?U?D:$?C:P??["","","",""]:$?C:U?D:P??["","","",""]];return(!Pe[3]||Pe[3]===""||Pe[3]==="--")&&k&&(Pe[3]=k.stem+k.branch),Pe[3]==="--"&&(Pe[3]=""),Pe},[K,$,U,C,D,P,k]),z=w.useMemo(()=>nm(F[2]??""),[F]),W=w.useMemo(()=>eb(F[1]??""),[F]),X=w.useMemo(()=>Zue(e.birthDay),[e.birthDay]),Z=w.useMemo(()=>k?k.stem+k.branch:F[3]||"",[k,F]),G=w.useMemo(()=>({dae:i!==""?_??null:null,se:i===""||i===""||i===""?h??null:null,wol:i===""||i===""?p??null:null,il:i===""?b??null:null}),[i,_,h,p,b]),J=w.useMemo(()=>Wv({natal:F,tab:i,chain:G,hourKey:Z}),[F,i,G,Z]),te=w.useMemo(()=>{if(!J)return null;const Ne=Nue(J.perStemElementScaled),Pe=G.dae?Q0(G.dae):{},Ge=G.se?Q0(G.se):{},Oe=G.wol?Q0(G.wol):{},Me=G.il?Q0(G.il):{},Be=Due([{kind:"natal",bare:Ne},{kind:"dae",bare:Pe},{kind:"se",bare:Ge},{kind:"wol",bare:Oe},{kind:"il",bare:Me}]),lt=Vv(Be),ue=Cue(lt),Ce=Aue(Be,J.dayStem),ze=jue(Ce),it=Tue(Be);return{perStemAugBare:Be,perStemAugFull:ue,elemPct100:it,totalsMain:ze,totalsSub:Ce}},[J,G]),ce=w.useMemo(()=>w7(F,{includeBranches:!0}),[F]),oe=w.useMemo(()=>["","","","",""].some(Ne=>!ce[Ne]),[ce]),B=te?.elemPct100??J?.elementPercent100??_7(F),V=w.useMemo(()=>{if(!J||!te)return[];const Ne=s7(J.dayStem);return Object.entries(te.totalsMain).map(([Pe,Ge])=>({name:Pe,value:Ge,color:Ne[Pe]}))},[J,te]),ie=te?.elemPct100??{:0,:0,:0,:0,:0},Q=te?.totalsSub??null,se=w.useMemo(()=>[i,_??"",h??"",p??"",b??"",o?.toISOString?.()??"",Z].join("|"),[i,_,h,p,b,o,Z]),me=w.useMemo(()=>{const Ne=Q?Object.entries(Q).sort(([Ge],[Oe])=>Ge.localeCompare(Oe)).map(([Ge,Oe])=>`${Ge}:${Oe}`).join(","):"none",Pe=V.map(Ge=>`${Ge.name}:${Ge.value}`).join(",");return`${se}||${F.join("")}||${Pe}||${Ne}`},[se,F,V,Q]),he=typeof nf=="function"?nf(F,J?.totals):null,_e=w.useMemo(()=>(he?.ordered??[]).map(Pe=>{const Ge=Pe.element??"",Oe=/||wood/i.test(Ge)?"":/||fire/i.test(Ge)?"":/||earth/i.test(Ge)?"":/||metal/i.test(Ge)?"":/||water/i.test(Ge)?"":null,Me=typeof Pe.score=="number"?Pe.score:Oe?B[Oe]??0:0,Be=Array.isArray(Pe.reasons)?Pe.reasons:[];return{element:Ge,elNorm:Oe,score:Me,reasons:Be}}),[he,B]),re=w.useMemo(()=>_e.map(Ne=>({element:Ne.element,elNorm:Ne.elNorm,score:Ne.score,reasons:Ne.reasons})),[_e]),Ee=w.useMemo(()=>{if(!z||!W)return[];const[Ne,Pe,Ge,Oe]=F,Me=[nm(Ne),nm(Pe),nm(Ge),nm(Oe)].filter(Boolean),Be=[eb(Ne),eb(Ge),eb(Oe)].filter(Boolean),lt=a7({dayStem:z,monthBranch:W,date:X,pillars:F,emittedStems:Me,otherBranches:Be}),ue=Vue(lt,z),Ce=ze=>/||wood/i.test(ze)?"":/||fire/i.test(ze)?"":/||earth/i.test(ze)?"":/||metal/i.test(ze)?"":/||water/i.test(ze)?"":null;return(ue??[]).map(ze=>({element:ze.element,elNorm:Ce(ze.element),score:Number.isFinite(ze.score)?ze.score:0,reasons:Array.isArray(ze.reasons)?ze.reasons:[]}))},[F,z,W,X]),we=w.useMemo(()=>{const Ne=F[1]||"";return VT({eokbuList:re,monthGz:Ne,elemPct:B,presentMap:ce,demoteAbsent:a,gyeokgukList:Ee})},[F,re,B,ce,a,Ee]),le=w.useMemo(()=>{const Ne=we.best;return Ne?.candidates?.length?Ne.candidates.map(Pe=>({element:Pe.element,elNorm:Pe.elNorm,score:Pe.score,reasons:Pe.reasons})):_e},[we,_e]),Ue=w.useMemo(()=>Math.max(0,...le.map(Ne=>Number.isFinite(Ne.score)?Ne.score:0)),[le]),Fe=w.useMemo(()=>v7(F,{criteriaMode:"modern",useHarmonyOverlay:!0}),[F]);return{seGz:h,wolGz:p,ilGz:b,daewoonGz:_,activePillars:F,chain:G,unified:J,overlay:te,chartData:V,elementPct:ie,tenSubTotals100:Q,hourKeyForUi:Z,revKey:me,yongshinMulti:we,yongshinRecommend:we,yongshinList:le,maxScore:Ue,hasAbsent:oe,dayElementPercent:Fe,isValidActive:E1(F)}}function Jue(e){if(typeof e!="object"||e===null)return!1;const t=e,n=t.at,r=t.gz;return n instanceof Date&&!Number.isNaN(n.getTime())&&typeof r=="string"}function Que(e){const t=new Date(e,1,15,12,0,0,0);return Le(st(t)||"")}function ede(e,t){return(e?.ordered??[]).map(r=>{const i=r.element??"",a=KT(i),o=typeof r.score=="number"?r.score:a?t[a]??0:0;return{element:i,elNorm:a,score:o,reasons:Array.isArray(r.reasons)?r.reasons:[]}})}const tde={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};function Ay(e){return tde[e]??null}function nde(e,t){const n={:!1,:!1,:!1,:!1,:!1},r=qT(t);for(const i of e){const a=i?.charAt(0)??"",o=i?.charAt(1)??"",l=Ay(a);if(l&&(n[l]=!0),GT(o)){const u=r[o],d=[u.,u.,u.].filter(Boolean);for(const h of d){const p=Ay(h.stem);p&&h.w>0&&(n[p]=!0)}}}return n}function rde(e,t){const n=qT(t),r={:0,:0,:0,:0,:0};for(const o of e){const l=o?.charAt(0)??"",u=o?.charAt(1)??"",d=Ay(l);if(d&&(r[d]+=50),GT(u)){const h=n[u],p=[h.,h.,h.].filter(Boolean),b=p.reduce((S,_)=>S+(Number.isFinite(_.w)?_.w:0),0),y=b>0?b:1;for(const S of p){const _=Ay(S.stem);_&&(r[_]+=50*S.w/y)}}}const i=r.+r.+r.+r.+r.,a=i>0?i:1;return{:r./a*100,:r./a*100,:r./a*100,:r./a*100,:r./a*100}}function ide(e,t,n){return e||rde(t,n)}function ade(e){const{data:t,pillars:n,hourKey:r,demoteAbsent:i,gyeokgukList:a,hiddenStemMode:o}=e,l=w.useMemo(()=>n7(o),[o]),u=Eu(t,t?.mingSikType),d=w.useMemo(()=>Array.isArray(u)?u.filter(Jue).slice(0,10):[],[u]),[h,p]=w.useState(0),[b,y]=w.useState(0),S=Math.max(0,Math.min(d.length-1,h)),_=d[S]??null,k=w.useMemo(()=>{if(!_)return[];const Y=_.at.getFullYear();return Array.from({length:10},(K,F)=>{const z=Y+F;return{year:z,gz:Que(z)}})},[_]),A=b==null?null:Math.max(0,Math.min(k.length-1,b)),N=A==null?null:k[A]??null,j=w.useMemo(()=>nde(n,l),[n,l]),C=w.useMemo(()=>["","","","",""].some(Y=>!j[Y]),[j]),D=w.useMemo(()=>{const Y=_?Le(_.gz):null,K=N?Le(N.gz):null;return{dae:Y||null,se:K||null,wol:null,il:null}},[_,N]),P=w.useMemo(()=>D.se?"":"",[D.se]),$=w.useMemo(()=>{const Y=_?`${_.at.getFullYear()}~ ${Le(_.gz)}`:" -",K=N?` / ${N.year} ${Le(N.gz)}`:"";return`${Y}${K}`},[_,N]),U=w.useMemo(()=>{if(!_)return null;const Y=Wv({natal:n,tab:P,chain:D,hourKey:r}),K=ide(Y?.elementPercent100,n,l),F=typeof nf=="function"?nf(n,Y?.totals):null,z=ede(F,K);return VT({eokbuList:z,monthGz:n[1]||"",elemPct:K,presentMap:j,demoteAbsent:i,gyeokgukList:Array.isArray(a)?a:null})},[_,n,P,D,r,j,i,a,l]);return{daeIndex:S,setDaeIndex:p,seIndex:A,setSeIndex:y,dae10:d,se10:k,chain:D,tab:P,label:$,recommend:U,presentMap:j,hasAbsent:C}}const ode={EOKBU:"",JOHU:"",TONGGWAN:"",BYEONGYAK:"",GYEOKGUK:""};function y2(e){return e?ode[e]??e:""}function sde(e){if(typeof e!="object"||e===null)return!1;const t=e;return t.at instanceof Date&&!Number.isNaN(t.at.getTime())&&typeof t.gz=="string"}function lde(e){const t=new Date(e,1,15,12,0,0,0);return Le(st(t)||"")}function A1(e){const t=e?.best??null,n=t?.candidates?.[0]??null,r=t?.kind??null,i=n?.element??null,a=n?.elNorm??(n?.element?KT(n.element):null),o=typeof t?.fitScore=="number"?t.fitScore:0,l=r&&i?`${y2(r)}:${i}`:r?`${y2(r)}:`:"";return{kind:r,top1:i,top1ElNorm:a,fit:o,label:l,result:e}}function cde(e,t){return(e?.ordered??[]).map(r=>{const i=r.element??"",a=KT(i),o=typeof r.score=="number"?r.score:a?t[a]??0:0;return{element:i,elNorm:a,score:o,reasons:Array.isArray(r.reasons)?r.reasons:[]}})}function YP(e){const{pillars:t,hourKey:n,chain:r,tab:i,demoteAbsent:a,presentMap:o,gyeokgukList:l}=e,u=Wv({natal:t,tab:i,chain:r,hourKey:n}),d=u?.elementPercent100??_7(t),h=typeof nf=="function"?nf(t,u?.totals):null,p=cde(h,d);return VT({eokbuList:p,monthGz:t[1]||"",elemPct:d,presentMap:o,demoteAbsent:a,gyeokgukList:Array.isArray(l)?l:null})}function ude(e){const t=[];for(const n of e){const r=t[t.length-1];if(!r){t.push({fromYear:n.year,toYear:n.year,snap:n.snap});continue}r.snap.label===n.snap.label?r.toYear=n.year:t.push({fromYear:n.year,toYear:n.year,snap:n.snap})}return t}const No=({text:e,tone:t="base",onClick:n,title:r})=>{const i=t==="pick"?"bg-violet-100 text-violet-800 border-violet-200 dark:bg-violet-900/30 dark:text-violet-200 dark:border-violet-800":t==="diff"?"bg-amber-100 text-amber-800 border-amber-200 dark:bg-amber-900/30 dark:text-amber-200 dark:border-amber-800 cursor-pointer":"bg-neutral-200 dark:bg-neutral-800 text-neutral-700 dark:text-neutral-300 border-neutral-200 dark:border-neutral-700",a=g.jsx("span",{className:`inline-flex items-center text-[11px] px-2 py-0.5 rounded-full border whitespace-nowrap ${i}`,title:r,children:e});return n?g.jsx("button",{type:"button",className:"inline-flex",onClick:n,title:r,children:a}):a};function KP({snap:e}){const t=e.result?.best??null,n=t?.candidates?.slice(0,3)??[];return t?g.jsxs("div",{className:"mt-2 rounded-lg border border-neutral-200 dark:border-neutral-800 bg-white dark:bg-neutral-900 p-3",children:[g.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[g.jsx(No,{text:`: ${y2(t.kind)}`,tone:"pick"}),g.jsx(No,{text:` ${t.fitScore}`}),n[0]?.element?g.jsx(No,{text:`1 ${n[0].element}`,tone:"diff"}):null]}),t.note?g.jsx("div",{className:"mt-2 text-xs text-neutral-600 dark:text-neutral-400 whitespace-normal break-words",children:t.note}):null,n.length?g.jsx("ul",{className:"mt-2 space-y-2",children:n.map((r,i)=>g.jsx("li",{className:"text-xs",children:g.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[g.jsx(No,{text:`${i+1} ${r.element}`}),g.jsx(No,{text:` ${r.score}`}),(r.reasons??[]).slice(0,4).map((a,o)=>g.jsx(No,{text:a},o))]})},`${r.elNorm??r.element}-${i}`))}):g.jsx("div",{className:"mt-2 text-xs text-neutral-600 dark:text-neutral-400",children:" "})]}):g.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-400",children:" "})}function dde(e){const{data:t,pillars:n,hourKey:r,demoteAbsent:i,natal:a}=e,o=w.useMemo(()=>w7(n,{includeBranches:!0}),[n]),l=Eu(t,t?.mingSikType),u=w.useMemo(()=>Array.isArray(l)?l.filter(sde).slice(0,10):[],[l]),d=w.useMemo(()=>A1(a),[a]),[h,p]=w.useState(null),b=_=>p(k=>k===_?null:_),y=w.useMemo(()=>u.map((_,k)=>{const A=Le(_.gz)||"",j=YP({pillars:n,hourKey:r,chain:{dae:A||null,se:null,wol:null,il:null},tab:"",demoteAbsent:i,presentMap:o}),C=A1(j),D=_.at.getFullYear(),P=Array.from({length:10},(F,z)=>{const W=D+z,X=lde(W),G=YP({pillars:n,hourKey:r,chain:{dae:A||null,se:X||null,wol:null,il:null},tab:"",demoteAbsent:i,presentMap:o}),J=A1(G);return{year:W,snap:J}}),U=ude(P).filter(F=>F.snap.top1ElNorm!==C.top1ElNorm),Y=C.top1ElNorm!==d.top1ElNorm,K=Y||U.length>0;return{idx:k,dae:_,daeLabel:`${D}~ ${A||""}`,daeSnap:C,daeDiffFromNatal:Y,segDiffOnly:U,hasAnyChange:K}}).filter(_=>_.hasAnyChange),[u,n,r,i,o,d.top1ElNorm]),S=w.useMemo(()=>y.some(_=>_.hasAnyChange),[y]);return g.jsxs("div",{className:"rounded-xl bg-neutral-100 dark:bg-neutral-900 p-4 space-y-3",children:[g.jsxs("div",{className:"flex items-center justify-between gap-2",children:[g.jsx("div",{className:"text-sm font-bold",children:"  "}),g.jsxs("div",{className:"text-xs text-neutral-600 dark:text-neutral-400 whitespace-normal break-words",children:["(): ",d.label," /  ",d.fit]})]}),S?g.jsx("div",{className:"space-y-3",children:y.map(_=>{const k=`dae:${_.idx}`,A=h===k;return g.jsxs("div",{className:"rounded-lg border border-neutral-200 dark:border-neutral-800 bg-white dark:bg-neutral-900 p-3",children:[g.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[g.jsx(No,{text:` ${_.daeLabel}`,tone:"base"}),g.jsx(No,{text:` ${_.daeSnap.label} ( ${_.daeSnap.fit})`,tone:_.daeDiffFromNatal?"diff":"base",onClick:()=>b(k),title:" (top3) "}),_.daeDiffFromNatal?g.jsx(No,{text:" ",tone:"diff"}):null]}),_.segDiffOnly.length?g.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:_.segDiffOnly.map((N,j)=>{const C=`seg:${_.idx}:${j}`,D=h===C,P=N.fromYear===N.toYear?`${N.fromYear}`:`${N.fromYear}~${N.toYear}`;return g.jsxs("div",{className:"inline-flex flex-col",children:[g.jsx("div",{className:"flex items-center gap-2",children:g.jsx(No,{text:` ${P}  ${N.snap.label} ( ${N.snap.fit})`,tone:"diff",onClick:()=>b(C),title:" (top3) "})}),D?g.jsx(KP,{snap:N.snap}):null]},C)})}):null,A?g.jsx(KP,{snap:_.daeSnap}):null]},k)})}):g.jsx("div",{className:"w-full p-3 rounded-xl bg-neutral-100 dark:bg-neutral-900 text-sm text-neutral-600 dark:text-neutral-400 text-center",children:"  ."})]})}function fde(e,t){if(t<=0)return"12%";const n=Math.round(e/t*100);return`${Math.max(2,Math.min(100,n))}%`}function hde(e){return e.slice(0,3)}const Nm=({text:e,tone:t="base"})=>{const n=t==="best"?"bg-violet-100 text-violet-800 border-violet-200 dark:bg-violet-900/30 dark:text-violet-200 dark:border-violet-800":"bg-neutral-200 dark:bg-neutral-800 text-neutral-700 dark:text-neutral-300";return g.jsx("span",{className:`text-[11px] px-2 py-0.5 rounded-full border border-transparent ${n}`,children:e})};function mde({g:e,isBest:t}){const n=hde(e.candidates);return g.jsxs("details",{open:t,className:"rounded-lg border border-neutral-200 dark:border-neutral-800 bg-white dark:bg-neutral-900",children:[g.jsx("summary",{className:"list-none cursor-pointer px-3 py-2 flex flex-col gap-2",children:g.jsxs("div",{className:"flex flex-wrap items-start gap-2",children:[g.jsxs("span",{className:"text-xs px-2 py-0.5 rounded-full bg-neutral-200 dark:bg-neutral-800 text-neutral-800 dark:text-neutral-200",children:[e.marker," ",e.title]}),g.jsx("span",{className:"max-w-[62%] text-xs text-neutral-600 dark:text-neutral-400 whitespace-normal break-words",children:e.note}),!e.applicable&&g.jsx(Nm,{text:" "}),t&&g.jsx(Nm,{text:" ",tone:"best"}),g.jsx(Nm,{text:` ${e.fitScore}`})]})}),g.jsx("div",{className:"px-3 pb-3 pt-1",children:n.length===0?g.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-400",children:" "}):g.jsx("ul",{className:"space-y-2",children:n.map((r,i)=>g.jsxs("li",{className:"flex items-start justify-between gap-3 rounded-lg border border-neutral-200 dark:border-neutral-800 p-2",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("span",{className:"text-xs px-2 py-0.5 rounded-full bg-neutral-200 dark:bg-neutral-800 text-neutral-800 dark:text-neutral-200",children:[i+1,""]}),g.jsx("span",{className:"text-sm font-semibold",children:r.element})]}),g.jsxs("div",{className:"flex-1",children:[g.jsx("div",{className:"mt-1 h-1.5 w-full rounded bg-neutral-300 dark:bg-neutral-800 overflow-hidden",children:g.jsx("div",{className:"h-1.5 rounded bg-white dark:bg-neutral-100",style:{width:fde(r.score??0,e.maxScore)},title:` ${r.score}`})}),g.jsx("div",{className:"mt-2 flex flex-wrap gap-1.5",children:(r.reasons??[]).slice(0,6).map((a,o)=>g.jsx("span",{className:"text-[11px] px-2 py-0.5 rounded-full bg-neutral-200 dark:bg-neutral-800 text-neutral-700 dark:text-neutral-300",children:a},o))})]})]},`${e.kind}-${r.elNorm??r.element}-${i}`))})})]})}function pde({best:e}){const t=e?.candidates?.[0]??null;return g.jsxs("div",{className:"rounded-lg border border-neutral-200 dark:border-neutral-800 p-3 bg-white/60 dark:bg-neutral-950/20",children:[g.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[g.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-neutral-200 dark:bg-neutral-800 text-neutral-800 dark:text-neutral-200",children:" "}),g.jsx("div",{className:"text-sm font-semibold",children:e?g.jsxs(g.Fragment,{children:[g.jsx("span",{className:"mr-1",children:e.marker}),e.title]}):""}),t?.element?g.jsx(Nm,{text:`1: ${t.element}`}):null,e?.fitScore!=null?g.jsx(Nm,{text:` ${e.fitScore}`}):null]}),e?.note?g.jsx("div",{className:"mt-2 text-xs text-neutral-600 dark:text-neutral-400 leading-relaxed whitespace-normal break-words",children:e.note}):null]})}function gde({recommend:e,data:t,pillars:n,hourKey:r,demoteAbsent:i,hiddenStemMode:a}){const o=e,l=ade({data:t,pillars:n,hourKey:r,demoteAbsent:i,hiddenStemMode:a});return g.jsxs("div",{className:"w-full p-4 rounded-xl bg-neutral-100 dark:bg-neutral-900 space-y-4",children:[g.jsxs("div",{className:"space-y-3",children:[g.jsxs("div",{className:"flex items-center justify-between gap-2",children:[g.jsx("div",{className:"text-sm font-bold",children:"  ()"}),l.hasAbsent?g.jsxs("span",{className:"text-xs text-neutral-600 dark:text-neutral-400",children:["*   ",i?" ( ON)":""]}):null]}),g.jsx(pde,{best:o.best}),g.jsx("div",{className:"space-y-2",children:o.groups.map(u=>g.jsx(mde,{g:u,isBest:o.bestKind===u.kind},u.kind))})]}),g.jsx(dde,{data:t,pillars:n,hourKey:r,demoteAbsent:i,natal:e})]})}const WP=e=>e<10?`0${e}`:`${e}`;function bde(e){const t=e,n=typeof t.birthDay=="string"?t.birthDay:"",r=typeof t.calendarType=="string"?t.calendarType:"solar";if(n.length<8)return e;const i=Number(n.slice(0,4)),a=Number(n.slice(4,6)),o=Number(n.slice(6,8));if(r==="lunar")try{const l=Wi(i,a,o),u=`${l.getFullYear()}${WP(l.getMonth()+1)}${WP(l.getDate())}`;return{...e,birthDay:u,calendarType:"solar"}}catch{return e}return e}function yde(e){if(typeof e!="number"&&typeof e!="string")return null;const t=String(e);if(!/^\d{8}$/.test(t))return null;const n=Number(t.slice(0,4)),r=Number(t.slice(4,6)),i=Number(t.slice(6,8)),a=new Date(n,r-1,i);return Number.isNaN(a.getTime())?null:a}const vde=["  ","   ","","",""];function xde(e){return e==="  "||e===""}function wde({data:e,pillars:t,lunarPillars:n,daewoonGz:r}){const i=vn(p=>p.settings),a=ice(),o=bde(e),l=yde(o.birthDay)||void 0,u=dn(p=>p.canUseAdvancedReportNow()),d=Xue({data:o,pillars:t,lunarPillars:n,daewoonGzProp:r,blendTab:a.blendTab,demoteAbsent:a.demoteAbsent}),h=w.useMemo(()=>"    100   ! (  )",[]);return d.isValidActive?g.jsxs("div",{className:"space-y-4 mb-4",children:[g.jsx("div",{className:"flex gap-2 justify-center flex-wrap",children:rce.map(p=>g.jsx("button",{onClick:()=>a.setBlendTab(p),className:"px-2 py-1 text-xs rounded border cursor-pointer "+(a.blendTab===p?"bg-yellow-500 text-black border-yellow-600":"bg-neutral-400 dark:bg-neutral-900 text-neutral-100 dark:text-neutral-300 border-neutral-400 dark:border-neutral-700"),children:p},p))}),g.jsx("div",{className:"flex gap-2 mb-4 justify-center flex-wrap",children:vde.map(p=>{const b=!u&&xde(p),y=a.bigTab===p;return g.jsxs("button",{title:b?h:void 0,onClick:()=>a.setBigTab(p),className:"px-3 py-1 text-sm rounded border cursor-pointer "+(b?"opacity-60 ":"")+(y?"bg-violet-500 text-white border-violet-600":"bg-neutral-400 dark:bg-neutral-900 text-neutral-100 dark:text-neutral-300 border-neutral-400 dark:border-neutral-700"),children:[p,b?" ":""]},p)})}),a.bigTab===""&&g.jsx(Cse,{pillars:d.activePillars,daewoon:d.daewoonGz||void 0,sewoon:d.seGz||void 0,wolwoon:d.wolGz||void 0,ilwoon:d.ilGz||void 0,tab:a.blendTab},`harm-${a.blendTab}-${d.hourKeyForUi}`),a.bigTab==="   "&&g.jsxs("div",{className:"space-y-4",children:[g.jsx(Ase,{data:d.chartData,revKey:d.revKey,perStemElementScaled:d.overlay?.perStemAugFull,elementPercent:d.elementPct,dayStem:d.activePillars[2]?.charAt(0)??null},`pentagon-${d.revKey}`),g.jsx(Nse,{value:d.dayElementPercent}),g.jsx(Gse,{natal:d.activePillars})]}),a.bigTab===""&&!u&&g.jsxs("div",{className:"p-4 rounded-xl border border-neutral-300 dark:border-neutral-700 bg-neutral-50 dark:bg-neutral-900 text-sm text-neutral-600 dark:text-neutral-300 text-center",children:["   ",g.jsx("b",{children:""}),"   .   100  !"]}),a.bigTab===""&&u&&g.jsx(gde,{recommend:d.yongshinMulti,data:o,pillars:d.activePillars,hourKey:d.hourKeyForUi,demoteAbsent:a.demoteAbsent,hiddenStemMode:i.hiddenStemMode},`yongshin-${a.blendTab}-${d.hourKeyForUi}`),a.bigTab===""&&g.jsx(Pse,{pillars:d.activePillars,daewoon:d.daewoonGz||void 0,sewoon:d.seGz||void 0,wolwoon:d.wolGz||void 0,ilwoon:d.ilGz||void 0,tab:a.blendTab},`shin-${a.blendTab}-${d.hourKeyForUi}`),a.bigTab==="  "&&!u&&g.jsxs("div",{className:"p-4 rounded-xl border border-neutral-300 dark:border-neutral-700 bg-neutral-50 dark:bg-neutral-900 text-sm text-neutral-600 dark:text-neutral-300 text-center",children:["   ",g.jsx("b",{children:"  "}),"   .   100  !"]}),a.bigTab==="  "&&u&&g.jsx(Gle,{unified:d.unified,pillars:d.activePillars,tab:a.blendTab,mapping:i.hiddenStemMode,birthDate:l},`gyeok-${a.blendTab}-${d.hourKeyForUi}`)]}):g.jsx("div",{className:"p-4 rounded-xl bg-neutral-100 dark:bg-neutral-900 text-sm",children:"   ."})}const tb=e=>typeof e=="string"&&e.length>=2,_de=e=>!Array.isArray(e)||e.length!==4?!1:tb(e[0])&&tb(e[1])&&tb(e[2])&&(e[3]===""||tb(e[3]));function Sde({data:e}){const[t,n]=w.useState("un"),r=Xl(),i=dn(d=>d.canUseMyoViewerNow());w.useEffect(()=>{t==="myoun"&&!i&&n("un")},[t,i]);const a=w.useMemo(()=>{try{const d=Ef(e);return ql(d,r)}catch{return new Date}},[e,r]),o=w.useMemo(()=>Yv(e,a),[e,a]),l=!e.birthTime||e.birthTime==="",u=w.useMemo(()=>{try{const d=st(o,e.birthPlace?.lon),h=St(o,e.birthPlace?.lon),p=mt(o,e.mingSikType),b=l?"":Qa(o,e.mingSikType);return[d,h,p,b]}catch{return[]}},[o,e?.mingSikType,e?.birthPlace?.lon,l]);return g.jsxs("div",{className:"w-[calc(100%_-_16px)] max-w-[625px] desk:max-w-[640px] mx-auto",children:[g.jsxs("div",{className:"flex border-b border-neutral-700 mb-4",children:[g.jsx("button",{onClick:()=>n("un"),className:`px-2 desk:px-4 py-2 text-xs desk:text-sm cursor-pointer border-b hover:border-purple-500 hover:text-purple-500 font-bold ${t==="un"?"border-purple-500 text-purple-500":"border-transparent text-neutral-400"}`,children:" "}),i?g.jsx("button",{onClick:()=>n("myoun"),className:`px-2 desk:px-4 py-2 text-xs desk:text-sm cursor-pointer border-b hover:border-purple-500 hover:text-purple-500 font-bold ${t==="myoun"?"border-purple-500 text-purple-500":"border-transparent text-neutral-400"}`,children:" "}):null,g.jsx("button",{onClick:()=>n("report"),className:`px-2 desk:px-4 py-2 text-xs desk:text-sm cursor-pointer border-b hover:border-purple-500 hover:text-purple-500 font-bold ${t==="report"?"border-purple-500 text-purple-500":"border-transparent text-neutral-400"}`,children:" "})]}),t==="un"&&g.jsx(pse,{data:e}),t==="myoun"&&i&&g.jsx(vse,{data:e}),t==="report"&&g.jsx(wde,{data:e,pillars:_de(u)?u:[]})]})}function kde({onOpenSidebar:e,onAddNew:t,onOpenCustom:n,isLoggedIn:r}){const i=yn(C=>C.list.length),a=dn(C=>C.canAddMyeongsik),[o,l]=w.useState(!1);w.useEffect(()=>{let C=!0;Ie.auth.getSession().then(({data:P})=>{C&&l(!!P.session?.user)});const{data:D}=Ie.auth.onAuthStateChange((P,$)=>{l(!!$?.user)});return()=>{C=!1,D.subscription.unsubscribe()}},[]);const u=r||o,d=a(i),h=!d.ok,p=h?d.message:"",b=()=>{if(h){fa(p||"   ");return}t()},y=()=>{if(h){fa(p||"   ");return}n()},S=()=>{_s.getState().openWith("HEADER")},_=async()=>{const{error:C}=await Ie.auth.signOut();if(C){console.error(C),fa("  ");return}fa(" ")},k="w-8 h-8 sm:w-10 sm:h-10 flex items-center justify-center rounded-md text-white focus:outline-none focus:ring-2 focus:ring-purple-500 transition-colors",A="bg-purple-600 hover:bg-purple-700 dark:bg-purple-600 dark:hover:bg-purple-500 cursor-pointer",N="bg-orange-600 hover:bg-orange-700 dark:bg-orange-600 dark:hover:bg-orange-500 cursor-pointer",j="bg-neutral-300 dark:bg-neutral-800 text-neutral-100 cursor-not-allowed opacity-80";return g.jsx("header",{className:"fixed min-w-[320px] top-0 left-0 right-0 bg-white dark:bg-neutral-950 border-b border-neutral-200 dark:border-neutral-800 z-55 px-2 desk:px-3 transition-colors",children:g.jsxs("div",{className:"relative max-w-[640px] w-full mx-auto h-12 sm:h-14 flex justify-between items-center",children:[g.jsx("button",{type:"button",onClick:e,"aria-label":" ",className:"p-2 rounded-full text-neutral-700 dark:text-neutral-200 hover:bg-neutral-100 dark:hover:bg-neutral-800 hover:text-purple-600 dark:hover:text-purple-400 focus:outline-none focus:ring-2 focus:ring-purple-500 cursor-pointer transition-colors",children:g.jsx(xZ,{size:22})}),g.jsx("h1",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 mx-auto text-base sm:text-lg font-bold tracking-tight text-neutral-900 dark:text-neutral-100",children:""}),g.jsxs("div",{className:"flex gap-2 items-center",children:[g.jsxs("button",{type:"button",onClick:b,"aria-label":" ",disabled:h,title:" ",className:`${k} ${h?j:A}`,children:[g.jsx(CZ,{size:18}),h?g.jsx("span",{className:"ml-1 text-[12px]",children:""}):null]}),g.jsxs("button",{type:"button",onClick:y,"aria-label":"  ",disabled:h,title:"  ",className:`${k} ${h?j:N}`,children:[g.jsx(jZ,{size:18}),h?g.jsx("span",{className:"ml-1 text-[12px]",children:""}):null]}),u?g.jsx("button",{type:"button",onClick:_,"aria-label":"",title:"",className:"inline-flex items-center gap-1 text-xs cursor-pointer text-neutral-700 dark:text-neutral-200 hover:text-purple-600 dark:hover:text-purple-400",children:g.jsx("ins",{children:""})}):g.jsx("button",{type:"button",onClick:S,"aria-label":"",title:"",className:"text-xs cursor-pointer",children:g.jsx("ins",{children:""})})]})]})})}function Ede(e){w.useEffect(()=>{const t=e??R$()??(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");I$(t),e&&L$(e)},[e])}const S7=["theme","hiddenStem","hiddenStemMode","sinsalMode","sinsalBase","sinsalBloom","exposure","charType","thinEum","visibility","difficultyMode"];function Tde(e){return typeof e=="string"&&S7.includes(e)}function v2(e){const t=Array.isArray(e)?e.filter(Tde):[],n=S7.filter(r=>!t.includes(r));return[...t,...n]}function x2(e){return{...Ll,...e,sectionOrder:v2(e.sectionOrder)}}function Ade(e,t){return e.theme??t.theme??"dark"}function jde({open:e,settings:t}){const n=w.useMemo(()=>v2(t.sectionOrder),[t.sectionOrder]),r=w.useMemo(()=>x2(t),[t]),[i,a]=w.useState(n),[o,l]=w.useState(r),[u,d]=w.useState(null),[h,p]=w.useState(!1);return w.useEffect(()=>{if(!e||h)return;const y=v2(t.sectionOrder);l({...x2(t),sectionOrder:y}),a(y),p(!1)},[e,t,h]),{order:i,setOrder:a,localSettings:o,setLocalSettings:l,updateSetting:(y,S)=>{l(_=>{const k={..._,[y]:S};return p(!0),k})},toastMessage:u,setToastMessage:d,dirty:h,setDirty:p}}function Ode(){try{typeof window<"u"&&window.localStorage.removeItem("settings_v1")}catch{}}function k7(e){L$(e)}function Nde({setSettings:e,saveToServer:t}){return{applyChanges:w.useCallback(async(r,i,a)=>{const o={...x2(r),sectionOrder:i};Ode(),w.startTransition(()=>{e(o)}),o.theme&&k7(o.theme),a(),t(!0)},[e,t])}}function Cde({open:e,onClose:t}){const{settings:n,setSettings:r,saveToServer:i}=vn(),a=jde({open:e,settings:n}),o=Nde({setSettings:r,saveToServer:i}),l=()=>a.setToastMessage(null),u=Ade(a.localSettings,n);Ede(u),w.useEffect(()=>{k7(u)},[u]);const d=()=>{o.applyChanges(a.localSettings,a.order,()=>{a.setToastMessage(" "),a.setDirty(!1),t()})},h=b=>{const{destination:y,source:S}=b;if(!y||y.index===S.index)return;const _=Array.from(a.order),[k]=_.splice(S.index,1);_.splice(y.index,0,k),a.setOrder(_)},p=b=>{switch(b){case"theme":return g.jsx(za,{title:"",children:g.jsx(Mde,{value:a.localSettings.theme??"dark",onChange:y=>a.updateSetting("theme",y)})});case"hiddenStem":return g.jsx(za,{title:"  ",children:g.jsx(Sd,{value:a.localSettings.hiddenStem,onChange:y=>a.updateSetting("hiddenStem",y),options:[{label:"",value:"all"},{label:" ",value:"regular"}]})});case"hiddenStemMode":return g.jsx(za,{title:" ",children:g.jsx(Sd,{value:a.localSettings.hiddenStemMode,onChange:y=>a.updateSetting("hiddenStemMode",y),options:[{label:"",value:"classic"},{label:"",value:"hgc"}]})});case"sinsalMode":return g.jsx(za,{title:"",children:g.jsx(Sd,{value:a.localSettings.sinsalMode,onChange:y=>a.updateSetting("sinsalMode",y),options:[{label:"",value:"classic"},{label:"",value:"modern"}]})});case"sinsalBase":return g.jsx(za,{title:"",children:g.jsx(Sd,{value:a.localSettings.sinsalBase,onChange:y=>a.updateSetting("sinsalBase",y),options:[{label:"",value:""},{label:"",value:""}]})});case"sinsalBloom":return g.jsx(za,{title:" ",children:g.jsx(Eo,{label:" ",checked:!!a.localSettings.sinsalBloom,onChange:y=>a.updateSetting("sinsalBloom",y)})});case"exposure":return g.jsx(za,{title:" ",children:g.jsx(Sd,{value:a.localSettings.exposure,onChange:y=>a.updateSetting("exposure",y),options:[{label:"",value:""},{label:"",value:""},{label:"",value:""},{label:"",value:""}]})});case"charType":return g.jsx(za,{title:" ",children:g.jsx(Sd,{value:a.localSettings.charType,onChange:y=>a.updateSetting("charType",y),options:[{label:"",value:""},{label:"",value:""}]})});case"thinEum":return g.jsx(za,{title:" ",children:g.jsx(Eo,{label:" ",checked:!!a.localSettings.thinEum,onChange:y=>a.updateSetting("thinEum",y)})});case"visibility":return g.jsx(za,{title:" ",children:g.jsxs("div",{className:"space-y-2 w-full max-w-[180px] mx-auto",children:[g.jsx(Eo,{label:" ",checked:!!a.localSettings.showSipSin,onChange:y=>a.updateSetting("showSipSin",y)}),g.jsx(Eo,{label:" ",checked:!!a.localSettings.showSibiUnseong,onChange:y=>a.updateSetting("showSibiUnseong",y)}),g.jsx(Eo,{label:" ",checked:!!a.localSettings.showSibiSinsal,onChange:y=>a.updateSetting("showSibiSinsal",y)}),g.jsx(Eo,{label:" ",checked:!!a.localSettings.showNabeum,onChange:y=>a.updateSetting("showNabeum",y)}),g.jsx(Eo,{label:" BOX ",checked:!!a.localSettings.showEtcShinsal,onChange:y=>a.updateSetting("showEtcShinsal",y)}),g.jsx(Eo,{label:" BOX ",checked:!!a.localSettings.showRelationBox,onChange:y=>a.updateSetting("showRelationBox",y)}),g.jsx(Eo,{label:" BOX ",checked:!!a.localSettings.showPromptBox,onChange:y=>a.updateSetting("showPromptBox",y)})]})});case"difficultyMode":return g.jsx(za,{title:" UP ver.",children:g.jsx(Eo,{label:" UP ",checked:!!a.localSettings.difficultyMode,onChange:y=>a.updateSetting("difficultyMode",y)})});default:return null}};return g.jsxs(g.Fragment,{children:[g.jsx("style",{children:"[data-rbd-drag-handle-context-id]{touch-action:none!important}"}),g.jsx("div",{className:`fixed inset-0 bg-black/60 transition-opacity duration-300 z-90 ${e?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,onClick:t}),g.jsxs("div",{className:`fixed inset-x-0 mx-auto w-full max-w-[640px] h-[88dvh] bg-white text-neutral-900 dark:bg-neutral-950 dark:text-white shadow-lg rounded-t-2xl transition-bottom duration-300 z-99 ${e?"bottom-0":"bottom-[-88dvh]"}`,children:[g.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-neutral-200 dark:border-neutral-800",children:[g.jsx("h2",{className:"text-lg font-bold",children:""}),g.jsx("button",{onClick:d,className:"px-3 py-1 rounded bg-indigo-600 hover:bg-indigo-500 text-white text-sm cursor-pointer",children:""})]}),e&&g.jsx(xp,{onDragEnd:h,children:g.jsx(Sf,{droppableId:"settings-sections",children:b=>g.jsxs("ul",{ref:b.innerRef,...b.droppableProps,className:"flex flex-col gap-2 p-4 overflow-y-auto max-h-[80dvh] list-none",children:[a.order.map((y,S)=>g.jsx(_f,{draggableId:y,index:S,children:_=>g.jsxs("li",{ref:_.innerRef,..._.draggableProps,..._.dragHandleProps,className:"!flex justify-between items-center bg-white dark:bg-neutral-800 p-2 rounded border text-sm desk:text-base select-none cursor-grab active:cursor-grabbing",children:[g.jsx("span",{className:"mr-2 select-none text-neutral-500",children:"::"}),g.jsx("div",{className:"flex-1 min-w-0",children:p(y)})]})},y)),b.placeholder]})})})]}),a.toastMessage&&g.jsx(h6,{message:a.toastMessage,onClose:l,ms:1800})]})}function Mde({value:e,onChange:t}){const n=e==="dark";return g.jsxs("button",{"data-no-drag":!0,onClick:()=>t(n?"light":"dark"),className:"flex items-center gap-2 px-3 py-1.5 rounded-md border text-sm cursor-pointer border-neutral-300 bg-white hover:bg-neutral-100 text-neutral-700 dark:border-neutral-700 dark:bg-neutral-900 dark:hover:bg-neutral-800 dark:text-neutral-200",title:"/ ","aria-pressed":n,children:[g.jsx("span",{className:"inline-block w-10 h-5 bg-neutral-300 rounded-full relative after:content-[''] after:w-4 after:h-4 after:bg-white after:rounded-full after:absolute after:top-0.5 after:left-0.5 after:transition-all dark:bg-neutral-700"}),g.jsx("span",{children:n?"":""})]})}function za({title:e,children:t}){return g.jsxs("div",{className:"p-3 rounded-lg bg-neutral-50 border border-neutral-200 text-neutral-900 dark:bg-neutral-900 dark:border-neutral-800 dark:text-neutral-100 space-y-3",children:[g.jsx("h3",{className:"text-sm font-semibold text-center",children:e}),g.jsx("div",{className:"flex justify-center",children:t})]})}function Sd({value:e,onChange:t,options:n}){return g.jsx("div",{"data-no-drag":!0,className:"inline-flex rounded-md overflow-hidden border border-neutral-300 bg-white dark:border-neutral-700 dark:bg-neutral-800",onMouseDown:r=>r.stopPropagation(),onTouchStart:r=>r.stopPropagation(),children:n.map(r=>{const i=e===r.value;return g.jsx("button",{type:"button",onClick:()=>t(r.value),className:`px-3 py-1 text-sm transition-colors ${i?"bg-indigo-600 text-white":"text-neutral-700 hover:bg-neutral-100 dark:text-neutral-300 dark:hover:bg-neutral-700 cursor-pointer"}`,children:r.label},r.value)})})}function Eo({label:e,checked:t,onChange:n}){const r=`switch-${e}`;return g.jsxs("label",{"data-no-drag":!0,htmlFor:r,className:"flex items-center justify-between w-full max-w-[180px] text-sm cursor-pointer",children:[g.jsx("span",{children:e}),g.jsx("input",{id:r,type:"checkbox",checked:t,onChange:i=>n(i.target.checked),className:"peer hidden"}),g.jsx("span",{className:"w-10 h-5 bg-neutral-300 rounded-full relative after:content-[''] after:w-4 after:h-4 after:bg-white after:rounded-full after:absolute after:top-0.5 after:left-0.5 after:transition-all peer-checked:bg-indigo-600 peer-checked:after:translate-x-5 dark:bg-neutral-700 dark:peer-checked:bg-indigo-600"})]})}function Dde({onShowToday:e,onShowCouple:t,onShowFaq:n}){const[r,i]=w.useState(!1),[a,o]=w.useState(!1),l=yn(y=>y.list),u=gf();w.useEffect(()=>{o(yn.getState().loading);const y=yn.subscribe(S=>{o(S.loading)});return()=>y()},[]);const d=()=>{if(!a){if(l.length===0){alert("    !");return}u("/iching")}},b={bottom:"var(--bottom-dock, 0px)",paddingBottom:"env(safe-area-inset-bottom, 0px)"};return g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"fixed min-w-[320px] h-[64px] px-2 box-border left-0 right-0 bg-white border-t border-neutral-200 py-2 text-xs sm:text-sm z-50 dark:bg-neutral-950 dark:border-neutral-800",style:b,children:g.jsxs("nav",{className:"flex justify-around items-center max-w-[640px] w-full mx-auto",children:[g.jsx(rm,{icon:g.jsx(hZ,{size:22}),label:"",onClick:e}),g.jsx(rm,{icon:g.jsx(dZ,{size:22}),label:"",onClick:t}),g.jsx(rm,{icon:g.jsx(LB,{size:22}),label:"FAQ",onClick:n}),g.jsx(rm,{icon:g.jsx(kZ,{size:22}),label:"",onClick:()=>i(!0)}),g.jsx(rm,{icon:g.jsx(TZ,{size:22}),label:"",onClick:d})]})}),g.jsx(Cde,{open:r,onClose:()=>i(!1)})]})}function rm({icon:e,label:t,onClick:n,disabled:r}){return g.jsxs("button",{onClick:n,disabled:r,className:"flex flex-1 flex-col items-center justify-center text-neutral-600 hover:text-purple-600 transition-colors cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed dark:text-neutral-300 dark:hover:text-purple-400",children:[e,g.jsx("span",{className:"mt-1",children:t})]})}const E7=e=>e.map(t=>typeof t=="string"?t.trim():"").filter(t=>t!==""),jy=e=>E7(e).join(""),Pde=()=>{const[e,t]=w.useState(()=>{if(typeof window>"u")return{};try{const u=localStorage.getItem(jD);return u?JSON.parse(u):{}}catch{return{}}});w.useEffect(()=>{if(!(typeof window>"u"))try{localStorage.setItem(jD,JSON.stringify(e))}catch{}},[e]);const[n,r]=w.useState({}),[i,a]=w.useState(""),[o,l]=w.useState(()=>{const u=my(),d=py(),h=d.length?Am(u,d):u;return Dd(h,e)});return w.useEffect(()=>{l(u=>{const d=Dd(u,e);return jy(d)===jy(u)?u:d})},[e]),w.useEffect(()=>{r(u=>{const d={...u};for(const h of o)d[h]===void 0&&(d[h]=!0);return d})},[o]),{folderFavMap:e,setFolderFavMap:t,folderOpenMap:n,setFolderOpenMap:r,newFolderName:i,setNewFolderName:a,orderedFolders:o,setOrderedFolders:l}},Rde=({list:e,orderedFolders:t})=>{const{grouped:n,unassignedItems:r}=w.useMemo(()=>{const i=zv(e,t),a={};for(const o of t)a[o]=i[o]??[];return{grouped:a,unassignedItems:i[fr]??[]}},[e,t]);return{grouped:n,unassignedItems:r}},im=async()=>{const{data:e,error:t}=await Ie.auth.getUser();return t||!e.user?null:e.user.id},Lde=async e=>{const{data:t,error:n}=await Ie.from("user_custom_folders").select("folder_name").eq("user_id",e);return n&&n.code==="PGRST205"?{data:[],error:n,disabled:!0}:n?{data:[],error:n}:{data:(t??[]).map(a=>a.folder_name?a.folder_name.trim():"").filter(a=>a!==""),error:null}},Ide=async e=>{const{data:t,error:n}=await Ie.from("user_folder_order").select("folder_name, sort_order").eq("user_id",e).order("sort_order",{ascending:!0,nullsFirst:!0});return n?{data:[],error:n}:{data:(t??[]).map(a=>a.folder_name?String(a.folder_name):"").filter(a=>a.trim()!==""),error:null}},$de=async(e,t)=>{const n=t.filter(i=>typeof i=="string"&&i.trim()!=="").map((i,a)=>({user_id:e,folder_name:i.trim(),sort_order:a+1,updated_at:new Date().toISOString()}));if(!n.length){const{error:i}=await Ie.from("user_folder_order").delete().eq("user_id",e);return{data:null,error:i}}const{error:r}=await Ie.from("user_folder_order").upsert(n,{onConflict:"user_id,folder_name"});return{data:null,error:r}},Bde=async(e,t)=>{const{error:n}=await Ie.from("user_folder_order").delete().eq("user_id",e).eq("folder_name",t);return{data:null,error:n}},zde=async(e,t)=>{const{error:n}=await Ie.from("user_custom_folders").upsert({user_id:e,folder_name:t,updated_at:new Date().toISOString()});return n&&n.code==="PGRST205"?{data:null,error:n,disabled:!0}:{data:null,error:n}},Ude=async(e,t)=>{const{error:n}=await Ie.from("user_custom_folders").delete().eq("user_id",e).eq("folder_name",t);return n&&n.code==="PGRST205"?{data:null,error:n,disabled:!0}:{data:null,error:n}},Fde=({folderFavMap:e,setFolderFavMap:t,setOrderedFolders:n,unsetFolderForFolder:r})=>{const[i,a]=w.useState(!1),o=w.useRef(e),l=w.useRef(!1),u=w.useRef(!1);w.useEffect(()=>{o.current=e},[e]),w.useEffect(()=>{(async()=>{if(i)return;const N=await im();if(!N)return;try{if(!u.current){const $=await Lde(N);$.disabled&&(u.current=!0),$.error?console.error("load custom folders from server error:",$.error):$.data.length&&ET($.data)}}catch($){console.error("load custom folders exception:",$)}const j=await Ide(N);if(j.error){console.error("load folder order from server error:",j.error),a(!0);return}const C=my(),D=j.data,P=D.length?Am(C,D):Am(C,py());n(Dd(P,o.current)),D.length&&Pd(D),a(!0)})()},[i,n]);const d=w.useCallback(async A=>{const N=await im();if(!N)return;const j=await $de(N,A);j.error&&console.error("save folder order to server error:",j.error)},[]),h=w.useRef(null),p=w.useRef(null),b=w.useRef(""),y=w.useCallback((A,N)=>{const j=E7(A),C=jy(j);if(C&&C===b.current)return;h.current=j;const D=async()=>{const P=h.current;if(h.current=null,!P)return;const $=jy(P);$&&$===b.current||(await d(P),b.current=$)};if(N?.immediate){p.current&&(window.clearTimeout(p.current),p.current=null),D();return}p.current&&window.clearTimeout(p.current),p.current=window.setTimeout(()=>{p.current=null,D()},300)},[d]);w.useEffect(()=>()=>{p.current&&(window.clearTimeout(p.current),p.current=null);const A=h.current;h.current=null,A&&A.length&&d(A)},[d]),w.useEffect(()=>{if(typeof window>"u")return;const A=()=>{if(l.current){l.current=!1;return}const N=my(),j=py(),C=j.length?Am(N,j):N;n(Dd(C,o.current))};return window.addEventListener(Yl,A),()=>window.removeEventListener(Yl,A)},[n]);const S=w.useCallback(A=>{const{source:N,destination:j,type:C}=A;if(!j||C!=="FOLDER")return;const D=N.index,P=j.index;D!==P&&n($=>{if(!$.length)return $;const U=[...$],[Y]=U.splice(D,1);U.splice(P,0,Y);const K=Dd(U,o.current);return l.current=!0,Pd(K),y(K),K})},[y,n]),_=w.useCallback(A=>{const N=A.trim();!N||N===bn||(f6(N),(async()=>{if(u.current)return;const j=await im();if(!j)return;const C=await zde(j,N);C.disabled&&(u.current=!0),C.error&&console.error("save custom folder error:",C.error)})(),n(j=>{if(j.includes(N))return j;const C=[...j,N],D=Dd(C,o.current);return Pd(D),y(D,{immediate:!0}),D}))},[y,n]),k=w.useCallback(A=>{r(A),t(N=>{const j={...N};return delete j[A],j}),n(N=>{const j=N.filter(C=>C!==A);return Pd(j),y(j,{immediate:!0}),(async()=>{const C=await im();if(!C)return;const D=await Bde(C,A);D.error&&console.error("delete folder order entry error:",D.error)})(),j}),c6.includes(A)?hre(A):(fre(A),(async()=>{if(u.current)return;const N=await im();if(!N)return;const j=await Ude(N,A);j.disabled&&(u.current=!0),j.error&&console.error("delete custom folder error:",j.error)})())},[y,t,n,r]);return{handleDragEnd:S,createFolder:_,deleteFolder:k,UNASSIGNED_LABEL:bn}};function Hde(e,t){const n=Pde(),r=Rde({list:e,orderedFolders:n.orderedFolders}),i=Fde({folderFavMap:n.folderFavMap,setFolderFavMap:n.setFolderFavMap,setOrderedFolders:n.setOrderedFolders,unsetFolderForFolder:t.unsetFolderForFolder});return{folderFavMap:n.folderFavMap,setFolderFavMap:n.setFolderFavMap,folderOpenMap:n.folderOpenMap,setFolderOpenMap:n.setFolderOpenMap,newFolderName:n.newFolderName,setNewFolderName:n.setNewFolderName,orderedFolders:n.orderedFolders,grouped:r.grouped,unassignedItems:r.unassignedItems,handleDragEnd:i.handleDragEnd,createFolder:i.createFolder,deleteFolder:i.deleteFolder,UNASSIGNED_LABEL:i.UNASSIGNED_LABEL}}function Gde({onClose:e,onAddNew:t,isLoggedIn:n,onLogin:r}){const i=yn(p=>p.list.length),o=dn(p=>p.canAddMyeongsik)(i),l=!o.ok,u=l?o.message:"",d=()=>{if(l){fa(u||"  ");return}t()},h=async()=>{const{error:p}=await Ie.auth.signOut();if(p){console.error(p),fa(" ");return}fa(" ")};return g.jsxs("div",{className:"flex justify-between items-center w-full h-12 desk:h-16 p-4 border-b border-neutral-200 dark:border-neutral-800",children:[g.jsx("div",{className:"flex items-center gap-2",children:g.jsx("h2",{className:"text-lg font-bold",children:" "})}),g.jsxs("div",{className:"flex items-center gap-2",children:[n?g.jsxs("button",{type:"button",onClick:h,className:`inline-flex items-center gap-1 px-3 py-1.5 rounded text-sm cursor-pointer
                       bg-neutral-200 text-neutral-800 hover:bg-neutral-300
                       dark:bg-neutral-800 dark:text-neutral-100 dark:hover:bg-neutral-700`,title:"",children:[g.jsx(yZ,{size:16})," "]}):g.jsxs("button",{type:"button",onClick:r,className:`inline-flex items-center gap-1 px-3 py-1.5 rounded text-sm cursor-pointer
                       bg-neutral-200 text-neutral-800 hover:bg-neutral-300
                       dark:bg-neutral-800 dark:text-neutral-100 dark:hover:bg-neutral-700`,title:"",children:[g.jsx(IB,{size:16})," "]}),g.jsxs("button",{type:"button",onClick:d,disabled:l,title:u,className:l?"inline-flex items-center gap-1 px-3 py-1.5 rounded text-sm bg-neutral-200 text-neutral-500 dark:bg-neutral-800 dark:text-neutral-400 cursor-not-allowed opacity-80":"inline-flex items-center gap-1 px-3 py-1.5 rounded text-sm cursor-pointer bg-purple-600 hover:bg-purple-500 text-white",children:[g.jsx(_Z,{size:16}),"  ",l?"":""]}),g.jsx("button",{type:"button",onClick:e,className:"p-1 rounded cursor-pointer hover:bg-neutral-100 dark:hover:bg-neutral-900","aria-label":" ",title:"",children:g.jsx(ry,{size:22})})]})]})}function qde({search:e,setSearch:t,searchMode:n,setSearchMode:r,isFiltering:i,totalMatches:a}){return g.jsx("div",{className:"mb-3 sticky top-[-16px] z-10 pb-2 pt-2 bg-white dark:bg-neutral-950 z-50",children:g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("select",{value:n,onChange:o=>r(o.target.value),className:"h-30 text-xs rounded px-2 py-1 cursor-pointer bg-white dark:bg-neutral-900 border border-neutral-300 dark:border-neutral-700 text-neutral-900 dark:text-neutral-100 focus:outline-none focus:ring-2 focus:ring-amber-500/40",children:[g.jsx("option",{value:"name",children:""}),g.jsx("option",{value:"ganji",children:""}),g.jsx("option",{value:"birth",children:""})]}),g.jsxs("div",{className:"relative flex-1",children:[g.jsx("input",{type:"text",value:e,onChange:o=>t(o.target.value),placeholder:n==="name"?" ":n==="ganji"?"  (: )":"  (: 19961229, 1996-12-29)",className:"w-full pl-7 pr-8 py-1 h-30 rounded bg-white dark:bg-neutral-900 border border-neutral-300 dark:border-neutral-700 text-[16px] text-neutral-900 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-500 focus:outline-none focus:ring-2 focus:ring-amber-500/40"}),e&&g.jsx("button",{type:"button",onClick:()=>t(""),className:"absolute right-2 top-1/2 -translate-y-1/2 opacity-60 hover:opacity-100","aria-label":" ",title:" ",children:g.jsx(cZ,{size:16})})]}),i&&g.jsxs("span",{className:"text-xs text-neutral-500 dark:text-neutral-400 whitespace-nowrap",children:[a,""]})]})})}function Yde({newFolderName:e,setNewFolderName:t,onCreate:n,isFiltering:r,totalCount:i,collapsed:a,onToggleCollapse:o}){return g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"flex items-center mb-2 gap-2",children:[g.jsx("input",{type:"text",value:e,onChange:l=>t(l.target.value),placeholder:"  ",className:"flex-1 w-[60%] px-2 py-1 rounded h-30 bg-white dark:bg-neutral-900 border border-neutral-300 dark:border-neutral-700 text-sm text-neutral-900 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-500",onClick:l=>l.stopPropagation()}),g.jsx("button",{type:"button",className:"px-3 rounded h-30 text-sm cursor-pointer bg-neutral-100 hover:bg-neutral-200 dark:bg-neutral-800 dark:hover:bg-neutral-700 text-neutral-900 dark:text-neutral-100 border border-neutral-200 dark:border-neutral-700",onClick:l=>{l.stopPropagation(),n()},children:""})]}),g.jsx("p",{className:"text-xs text-neutral-600 dark:text-neutral-400 mb-1",children:r?"   .":"/      ."}),g.jsxs("div",{className:"flex items-center justify-between text-xs text-neutral-600 dark:text-neutral-400 mb-2",children:[g.jsxs("div",{children:[g.jsx("span",{className:"font-semibold text-neutral-900 dark:text-neutral-100",children:"  "}),g.jsx("span",{className:"mx-1",children:""}),g.jsxs("span",{className:"font-semibold text-amber-500 dark:text-amber-600",children:[i,""]})]}),g.jsx("button",{type:"button",onClick:o,className:"px-2 py-1 rounded border border-neutral-200 dark:border-neutral-700 text-xs text-neutral-700 dark:text-neutral-200 hover:bg-neutral-100 dark:hover:bg-neutral-900 cursor-pointer",children:a?"  ":"  "})]}),g.jsx("div",{className:"text-xs mb-2 text-neutral-900 dark:text-neutral-100",children:"         !"})]})}function VP({droppableId:e,items:t,isDropDisabled:n,className:r}){return g.jsx(Sf,{droppableId:e,type:"ITEM",direction:"vertical",ignoreContainerClipping:!0,isDropDisabled:n,children:i=>g.jsx("div",{ref:i.innerRef,...i.droppableProps,className:r,children:g.jsxs("ul",{className:"flex flex-col gap-2",children:[t,i.placeholder]})})})}function Kde({folderName:e,folderIndex:t,isOpen:n,isFavorite:r,itemCount:i,isDragDisabled:a,onToggleOpen:o,onToggleFavorite:l,onDelete:u,inner:d}){return g.jsx(_f,{draggableId:`folder-${e}`,index:t,isDragDisabled:a,children:h=>g.jsxs("div",{ref:h.innerRef,...h.draggableProps,...h.dragHandleProps,className:"mb-4 cursor-grab active:cursor-grabbing select-none",children:[g.jsxs("div",{className:"flex items-center justify-between px-2 py-2 rounded bg-neutral-50 dark:bg-neutral-900/70 border border-neutral-200 dark:border-neutral-800 text-neutral-800 dark:text-neutral-200",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("button",{type:"button",onClick:p=>{p.stopPropagation(),o()},className:"inline-flex items-center gap-1 text-sm font-semibold cursor-pointer",children:[n?g.jsx(oZ,{size:16}):g.jsx(iZ,{size:16}),g.jsx("span",{className:"text-sm font-semibold",children:e})]}),g.jsx("button",{type:"button",onClick:p=>{p.stopPropagation(),l()},className:`p-1 rounded cursor-pointer ${r?"text-yellow-400":"text-neutral-400"} hover:text-yellow-400`,"aria-label":"  ",title:r?" ":"",children:g.jsx($B,{size:16,fill:r?"currentColor":"none"})})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("span",{className:"opacity-60 text-xs",children:[i,""]}),g.jsx("button",{type:"button",onClick:p=>{p.stopPropagation(),u()},className:"px-2 py-1 rounded text-xs cursor-pointer border border-red-300 dark:border-red-700 text-red-700 dark:text-red-300 hover:bg-red-50 dark:hover:bg-red-900/30",children:""})]})]}),n?d:null]})},`folder-${e}`)}const Wde=()=>({canManage:dn(()=>!0)}),Wm="";function Vde(e,t){if(!/^\d{8}$/.test(e))return e||"";const n=e.slice(0,4),r=e.slice(4,6),i=e.slice(6,8);return t&&/^\d{4}$/.test(t)?`${n} ${r} ${i} ${t.slice(0,2)}:${t.slice(2,4)}`:t===Wm?`${n} ${r} ${i} ( )`:`${n} ${r} ${i}`}function Zde(e){if(!e||e==="")return"";const t=e.split(/[\s,]+/).filter(Boolean);if(t.length===0)return"";const n=o=>t.find(l=>o.some(u=>l.endsWith(u))),r=n(["","","","",""]),i=n(["","","","","",""]);return t.length===1||!n(["","","","","","","","","","",""])&&!n(["","","","","",""])?e:r&&i?`${r} ${i}`:r||e}function ZP(e){return(e.ganji??"").replace(/\r\n/g,`
`).replace(/\s*null\s*/gi,"").trim()}function Xde(e,t){const n=kf(e),r=_p(t);if(!n||!r)return null;const i=new Date(n.y,n.m-1,n.d,r.hh,r.mm,0,0),a=new Date(i.getTime()-3600*1e3),o=String(a.getFullYear()).padStart(4,"0"),l=String(a.getMonth()+1).padStart(2,"0"),u=String(a.getDate()).padStart(2,"0"),d=String(a.getHours()).padStart(2,"0"),h=String(a.getMinutes()).padStart(2,"0");return{birthDay:`${o}${l}${u}`,birthTime:`${d}${h}`}}function Jde(e){const t=ZP(e),n=String(e.birthDay??"").trim();if(!/^\d{8}$/.test(n))return t;const r=Number(n.slice(0,4)),i=Number(n.slice(4,6)),a=Number(n.slice(6,8));if(!Gm(r,i,a)||!e.birthTime||e.birthTime===Wm)return t;const o=Xde(n,e.birthTime);if(!o)return t;const l=e.corrected instanceof Date?e.corrected:new Date(e.corrected);if(Number.isNaN(l.getTime()))return t;const u=new Date(l.getTime()-3600*1e3),d=yT({...e,birthDay:o.birthDay,birthTime:o.birthTime,corrected:u});return ZP({...e,...d})}function Qde(e){const t=String(e??"").trim();if(/^\d{8}$/.test(t)){const r=Number(t.slice(0,4));return Number.isFinite(r)?r:NaN}const n=new Date(t);return Number.isNaN(n.getTime())?NaN:n.getFullYear()}function efe(e,t){return Number.isNaN(e)?0:t-e+1}function tfe(e){return{...e,transition:e?.transform?"transform 0.15s ease":"none"}}function nfe(e){return e===""?"":e===""?"":e??""}function rfe(e){const t=e.trim(),n=/^(\d{1,2}):(\d{2})$/.exec(t);if(!n)return null;const r=Number(n[1]),i=Number(n[2]);if(!Number.isFinite(r)||!Number.isFinite(i)||r<0||r>23||i<0||i>59)return null;const a=r-1<0?23:r-1;return`${String(a).padStart(2,"0")}:${String(i).padStart(2,"0")}`}function ife(e,t){if(t)return Wm;const n=String(e.birthDay??"").trim(),r=String(e.correctedLocal??"").trim(),i=e.corrected instanceof Date?e.corrected:new Date(String(e.corrected??"")),a=!Number.isNaN(i.getTime()),o=r||(a?c2(i):"");if(!/^\d{8}$/.test(n))return o;const l=Number(n.slice(0,4)),u=Number(n.slice(4,6)),d=Number(n.slice(6,8));if(!Gm(l,u,d)||!e.birthTime||e.birthTime===Wm)return o;if(a){const p=new Date(i.getTime()-36e5);return c2(p)}return rfe(r)??o}function afe({m:e,memoOpen:t,isDragDisabled:n}){const r=n,i=`item:${e.id}`,a=Jde(e),o=Zde(e.birthPlace?.name),l=e.relationship?.trim()?e.relationship:" ",u=nfe(e.gender),d=!e.birthTime||e.birthTime===Wm,h=ife(e,d),p=!!(o||h),b=Vde(e.birthDay,e.birthTime),y=e.calendarType==="lunar"?"":"",S=Qde(e.birthDay),_=efe(S,new Date().getFullYear()),k=!!(e.memo&&e.memo.trim()!==""),A=t?" ":" ",N=e.mingSikType??"/",j=r?" ":"::",C=e.favorite?" ":"";return{keyId:i,dragDisabled:r,dragHandleLabel:j,ganji:a,placeDisplay:o,relationshipLabel:l,genderLabel:u,birthDisplay:b,calendarLabel:y,correctedLabel:h,showMetaLine:p,showMemo:k,memoToggleLabel:A,age:_,mingSikTypeValue:N,favoriteLabel:C,editLabel:"",deleteLabel:"",getDragStyle:tfe}}const ofe=({m:e,unassignedLabel:t,onToggleMemo:n,onChangeFolder:r,onChangeMingSikType:i,onView:a,onEdit:o,onDelete:l,onToggleFavorite:u})=>{const d=w.useCallback(k=>{k?.stopPropagation(),n(e.id)},[n,e.id]),h=w.useCallback(k=>{k?.stopPropagation(),a(e)},[a,e]),p=w.useCallback(k=>{k?.stopPropagation(),o(e)},[o,e]),b=w.useCallback(k=>{k?.stopPropagation(),l(e)},[l,e]),y=w.useCallback(k=>{k?.stopPropagation(),u(e.id)},[u,e.id]),S=w.useCallback(k=>{const A=k===t?void 0:k;r(e.id,A)},[r,e.id,t]),_=w.useCallback(k=>{i(e,k)},[i,e]);return{handleToggleMemo:d,handleView:h,handleEdit:p,handleDelete:b,handleToggleFavorite:y,handleFolderChange:S,handleMingSikTypeChange:_}};function XP({m:e,index:t,orderedFolders:n,unassignedLabel:r,isDragDisabled:i,collapsed:a,memoOpen:o,onToggleMemo:l,onToggleCollapsed:u,onChangeFolder:d,onChangeMingSikType:h,onView:p,onEdit:b,onDelete:y,onToggleFavorite:S}){Wde();const _=afe({m:e,memoOpen:o,isDragDisabled:i}),k=a,A=ofe({m:e,unassignedLabel:r,onToggleMemo:l,onChangeFolder:d,onChangeMingSikType:h,onView:p,onEdit:b,onDelete:y,onToggleFavorite:S});return g.jsx(_f,{draggableId:_.keyId,index:t,isDragDisabled:i,children:N=>g.jsx("li",{ref:N.innerRef,...N.draggableProps,...N.dragHandleProps,style:N.draggableProps.style,className:`list-none select-none rounded-xl border bg-white dark:bg-neutral-900 border-neutral-200 dark:border-neutral-800 text-neutral-900 dark:text-neutral-100 ${i?"cursor-default":"cursor-grab active:cursor-grabbing"}`,onClick:()=>{k&&A.handleView()},children:g.jsxs("div",{className:"p-3",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("div",{className:"font-semibold text-sm desk:text-base",children:[e.name," (",_.age,"",_.genderLabel,")"]}),g.jsx("span",{className:"opacity-40",children:""}),g.jsx("div",{className:"text-sm text-neutral-600 dark:text-neutral-300",children:_.relationshipLabel}),g.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[g.jsx("span",{className:"opacity-50 select-none",children:_.dragHandleLabel}),g.jsx("button",{type:"button",onClick:j=>{j.stopPropagation(),u()},className:"text-xs px-2 py-1 rounded border border-neutral-200 dark:border-neutral-700 text-neutral-700 dark:text-neutral-200 hover:bg-neutral-100 dark:hover:bg-neutral-900 cursor-pointer",children:k?" ":" "})]})]}),!k&&g.jsxs("div",{className:"text-sm text-neutral-600 dark:text-neutral-300 mt-1",children:[_.birthDisplay,", ",_.calendarLabel]}),!k&&_.showMetaLine&&g.jsxs("div",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:[_.placeDisplay,_.correctedLabel&&g.jsxs("span",{className:"opacity-70",children:["  ",_.correctedLabel]})]}),_.ganji&&g.jsx("div",{className:"text-sm text-neutral-800 dark:text-neutral-200 mt-1 whitespace-pre-wrap break-keep",children:_.ganji}),!k&&_.showMemo&&g.jsxs("div",{children:[g.jsx("button",{type:"button",className:"text-xs text-neutral-500 dark:text-neutral-400 hover:text-neutral-800 dark:hover:text-neutral-200 inline-flex items-center gap-1 cursor-pointer",onClick:A.handleToggleMemo,children:_.memoToggleLabel}),g.jsx("div",{className:o?"mt-1 text-sm text-neutral-800 dark:text-neutral-200 whitespace-pre-wrap":"hidden",children:e.memo})]}),!k&&g.jsxs("div",{className:"flex flex-wrap gap-2 mt-3",children:[g.jsx("select",{className:"h-30 text-xs rounded px-2 py-1 bg-white dark:bg-neutral-900 border border-neutral-300 dark:border-neutral-700 text-neutral-900 dark:text-neutral-100 focus:outline-none focus:ring-2 focus:ring-amber-500/40 cursor-pointer",value:e.folder??r,onClick:j=>j.stopPropagation(),onChange:j=>{j.stopPropagation(),A.handleFolderChange(j.target.value)},children:[r,...n].map(j=>g.jsx("option",{value:j,children:j},j))}),g.jsxs("select",{className:"h-30 text-xs rounded px-2 py-1 bg-white dark:bg-neutral-900 border border-neutral-300 dark:border-neutral-700 text-neutral-900 dark:text-neutral-100 focus:outline-none focus:ring-2 focus:ring-amber-500/40 cursor-pointer",value:_.mingSikTypeValue,onClick:j=>j.stopPropagation(),onChange:j=>{j.stopPropagation(),A.handleMingSikTypeChange(j.target.value)},children:[g.jsx("option",{value:"",children:""}),g.jsx("option",{value:"/",children:"/"}),g.jsx("option",{value:"",children:""})]})]}),!k&&g.jsxs("div",{className:"flex gap-2 mt-3",children:[g.jsx("button",{type:"button",onClick:A.handleView,className:"px-3 py-1 rounded text-white text-sm cursor-pointer bg-indigo-600 hover:bg-indigo-500",children:""}),g.jsx("button",{type:"button",title:"",onClick:A.handleEdit,className:"px-3 py-1 rounded text-white text-sm bg-amber-600 hover:bg-amber-500 cursor-pointer",children:_.editLabel}),g.jsx("button",{type:"button",title:"",onClick:A.handleDelete,className:"px-3 py-1 rounded text-white text-sm bg-red-600 hover:bg-red-500 cursor-pointer",children:_.deleteLabel}),g.jsx("button",{type:"button",title:_.favoriteLabel,onClick:A.handleToggleFavorite,className:`ml-auto p-1 rounded cursor-pointer ${e.favorite?"text-yellow-400":"text-neutral-400"} hover:text-yellow-400`,"aria-label":_.favoriteLabel,children:g.jsx($B,{size:16,fill:e.favorite?"currentColor":"none"})})]})]})})},_.keyId)}const sfe="list:__unassigned__",lfe=e=>`list:${e}`,JP=e=>{if(!e.startsWith("list:"))return;const t=e.slice(5);return t==="__unassigned__"?void 0:t},cfe=({search:e,searchMode:t,orderedFolders:n,grouped:r,unassignedItems:i})=>{const a=i6(e),{filteredUnassigned:o,filteredGrouped:l,totalMatches:u}=w.useMemo(()=>Wne({search:e,searchMode:t,orderedFolders:n,unassignedItems:i,grouped:r}),[e,t,n,i,r]);return{isFiltering:a,filteredUnassigned:o,filteredGrouped:l,totalMatches:u}},ufe=({list:e,orderedFolders:t})=>{const[n,r]=w.useState(""),[i,a]=w.useState("name"),[o,l]=w.useState({}),u=w.useRef(null),d=w.useRef(null);return w.useEffect(()=>{if(d.current==null)return;const b=u.current;b&&(b.scrollTop=d.current,d.current=null)},[e,t]),{search:n,setSearch:r,searchMode:i,setSearchMode:a,memoOpenMap:o,toggleMemo:b=>{l(y=>({...y,[b]:!y[b]}))},scrollRef:u,stashScrollTop:()=>{const b=u.current;b&&(d.current=b.scrollTop)}}},QP=()=>{typeof window>"u"||window.dispatchEvent(new Event(Yl))},dfe=({list:e,orderedFolders:t,isFiltering:n,handleFolderDragEnd:r,moveItemByDnD:i,applyNextList:a,update:o,remove:l,onView:u,onClose:d,onDeleteView:h,folderFavMap:p,setFolderFavMap:b,setFolderOpenMap:y,createFolder:S,deleteFolder:_,newFolderName:k,setNewFolderName:A,stashScrollTop:N})=>{const j=w.useCallback((z,W)=>{const{nextList:X}=Une({list:e,orderedFolders:t,targetId:z,nextFolder:W??""});a(X)},[e,t,a]),C=w.useCallback((z,W)=>{const X={...z,mingSikType:W},Z=yT(X);o(z.id,{mingSikType:W,...Z}),u({...X,...Z}),d()},[o,u,d]),D=w.useCallback(z=>{u(z),d()},[u,d]),P=w.useCallback(z=>{confirm(`'${z.name}'  ?`)&&(l(z.id),h&&h())},[l,h]),$=w.useCallback(()=>{const z=k.trim();z&&(S(z),A(""),QP())},[k,S,A]),U=w.useCallback(z=>{if(p[z]){alert(`'${z}'   .
   .`);return}confirm(`'${z}'  ?
(   )`)&&(_(z),QP())},[p,_]),Y=w.useCallback(z=>{y(W=>({...W,[z]:!W[z]}))},[y]),K=w.useCallback(z=>{b(W=>({...W,[z]:!W[z]}))},[b]);return{handleDrop:w.useCallback(z=>{const{type:W,source:X,destination:Z,draggableId:G}=z;if(Z&&!n){if(N(),W==="FOLDER"){r(z);return}if(W==="ITEM"){if(!G.replace(/^item:/,""))return;const te=JP(X.droppableId),ce=JP(Z.droppableId);i({orderedFolders:t,sourceFolder:te,sourceIndex:X.index,destinationFolder:ce,destinationIndex:Z.index})}}},[n,N,r,i,t]),changeFolder:j,changeMingSikType:C,viewAndClose:D,requestDelete:P,createFolderAndNotify:$,requestDeleteFolder:U,toggleFolderOpen:Y,toggleFolderFavorite:K}};function ffe({open:e,onClose:t,onView:n,onAddNew:r,onEdit:i,onDeleteView:a,isLoggedIn:o}){const[l,u]=w.useState(!1),d=vn(we=>we.settings),h=vn(we=>we.setKey),p=vn(we=>we.saveToServer),{list:b,remove:y,update:S,moveItemByDnD:_,toggleFavoriteWithReorder:k,unsetFolderForFolder:A,applyNextList:N}=yn(),{folderFavMap:j,setFolderFavMap:C,folderOpenMap:D,setFolderOpenMap:P,newFolderName:$,setNewFolderName:U,orderedFolders:Y,grouped:K,unassignedItems:F,handleDragEnd:z,createFolder:W,deleteFolder:X,UNASSIGNED_LABEL:Z}=Hde(b,{unsetFolderForFolder:A}),G=ufe({list:b,orderedFolders:Y}),J=d.sidebarCardsCollapsed,te=d.sidebarCardCollapsedMap,ce=we=>te[we]??J,oe=we=>{h("sidebarCardCollapsedMap",we),p()},B=we=>{h("sidebarCardsCollapsed",we);const le=b.reduce((Ue,Fe)=>(Ue[Fe.id]=we,Ue),{});oe(le)},V=we=>{oe({...te,[we]:!(te[we]??!0)})},{isFiltering:ie,filteredUnassigned:Q,filteredGrouped:se,totalMatches:me}=cfe({search:G.search,searchMode:G.searchMode,orderedFolders:Y,unassignedItems:F,grouped:K}),he=dfe({list:b,applyNextList:N,orderedFolders:Y,isFiltering:ie,handleFolderDragEnd:z,moveItemByDnD:_,update:S,remove:y,onView:n,onClose:t,onDeleteView:a,folderFavMap:j,setFolderFavMap:C,setFolderOpenMap:P,createFolder:W,deleteFolder:X,newFolderName:$,setNewFolderName:U,stashScrollTop:G.stashScrollTop}),_e=()=>{u(!0)},re=we=>{ku.flushSync(()=>{u(!1),he.handleDrop(we)})},Ee=()=>{_s.getState().openWith("HEADER")};return g.jsxs(g.Fragment,{children:[g.jsx("style",{children:"[data-rbd-drag-handle-context-id]{touch-action:none!important}"}),g.jsx("div",{className:`fixed inset-0 bg-black/70 transition-opacity duration-300 z-100 ${e?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,onClick:t}),g.jsxs("div",{className:`fixed top-0 left-0 h-[100dvh] min-w-[320px] w-full desk:w-1/3
                    bg-white dark:bg-neutral-950
                    text-neutral-900 dark:text-white
                    shadow-lg z-101 transition-[left] duration-300
                    overflow-hidden
                    ${e?"left-0":"left-[-100%]"}`,children:[g.jsx(Gde,{onClose:t,onAddNew:()=>{r(),t()},onLogin:()=>{Ee()},isLoggedIn:o}),g.jsx(xp,{onBeforeDragStart:_e,onDragEnd:re,children:g.jsxs("div",{ref:G.scrollRef,className:"p-4 h-[calc(100%-56px)] overflow-y-auto overscroll-contain",style:{touchAction:l?"none":"pan-y"},children:[g.jsxs(g.Fragment,{children:[g.jsx(qde,{search:G.search,setSearch:G.setSearch,searchMode:G.searchMode,setSearchMode:G.setSearchMode,isFiltering:ie,totalMatches:me}),g.jsx(Yde,{newFolderName:$,setNewFolderName:U,isFiltering:ie,onCreate:he.createFolderAndNotify,totalCount:b.length,collapsed:J,onToggleCollapse:()=>B(!J)})]}),g.jsx(VP,{droppableId:sfe,isDropDisabled:ie,className:"mb-6",items:Q.map((we,le)=>g.jsx(XP,{m:we,index:le,orderedFolders:Y,unassignedLabel:Z,isDragDisabled:ie,collapsed:ce(we.id),memoOpen:!!G.memoOpenMap[we.id],onToggleMemo:G.toggleMemo,onToggleCollapsed:()=>V(we.id),onChangeFolder:he.changeFolder,onChangeMingSikType:he.changeMingSikType,onView:he.viewAndClose,onEdit:Ue=>i(Ue),onDelete:he.requestDelete,onToggleFavorite:Ue=>void k(Ue,Y)},we.id))}),g.jsx(Sf,{droppableId:"folders:root",type:"FOLDER",direction:"vertical",ignoreContainerClipping:!0,isDropDisabled:ie,children:we=>g.jsxs("div",{ref:we.innerRef,...we.droppableProps,children:[Y.map((le,Ue)=>{const Fe=lfe(le),Ne=se[le]||[],Pe=!!D[le],Ge=!!j[le];return g.jsx(Kde,{folderName:le,folderIndex:Ue,isOpen:Pe,isFavorite:Ge,itemCount:Ne.length,isDragDisabled:ie,onToggleOpen:()=>he.toggleFolderOpen(le),onToggleFavorite:()=>he.toggleFolderFavorite(le),onDelete:()=>he.requestDeleteFolder(le),inner:g.jsx(VP,{droppableId:Fe,isDropDisabled:ie,className:"mt-2",items:Ne.map((Oe,Me)=>g.jsx(XP,{m:Oe,index:Me,orderedFolders:Y,unassignedLabel:Z,isDragDisabled:ie,collapsed:ce(Oe.id),memoOpen:!!G.memoOpenMap[Oe.id],onToggleMemo:G.toggleMemo,onToggleCollapsed:()=>V(Oe.id),onChangeFolder:he.changeFolder,onChangeMingSikType:he.changeMingSikType,onView:he.viewAndClose,onEdit:Be=>i(Be),onDelete:he.requestDelete,onToggleFavorite:Be=>void k(Be,Y)},Oe.id))})},`folder-${le}`)}),we.placeholder]})})]})})]})]})}function eR(e){return{...e,calendarType:e.calendarType??"solar"}}function tR(e){return!e.birthTime||e.birthTime===""}function nR(e){return!e.birthPlace||e.birthPlace.name===""}function hfe(e,t){if(t!=="lunar"||!e||e.length!==8)return null;try{const n=Number(e.slice(0,4)),r=Number(e.slice(4,6)),i=Number(e.slice(6,8)),a=Wi(n,r,i),o=String(a.getMonth()+1).padStart(2,"0"),l=String(a.getDate()).padStart(2,"0");return`  ${a.getFullYear()}-${o}-${l}`}catch(n){const r=n instanceof Error?n.message:void 0;return`  ${r?`: ${r}`:""}`}}const T7="ms_folders";function mfe(){try{const e=JSON.parse(localStorage.getItem(T7)||"[]");return Array.isArray(e)?e:[]}catch{return[]}}function pfe(e){localStorage.setItem(T7,JSON.stringify(e))}function gfe(e){const[t,n]=w.useState(!1),[r,i]=w.useState(()=>eR(e)),[a,o]=w.useState(tR(e)),[l,u]=w.useState(nR(e)),[d,h]=w.useState([]);return w.useEffect(()=>{h(mfe())},[]),{isEditing:t,setIsEditing:n,form:r,setForm:i,updateForm:(y,S)=>{i(_=>({..._,[y]:S}))},unknownTime:a,setUnknownTime:o,unknownPlace:l,setUnknownPlace:u,customFolders:d,setCustomFolders:h,resetForm:()=>{i(eR(e)),o(tR(e)),u(nR(e))}}}const A7=["","","","","",""];function bfe(e,t){const n=Array.from(new Set(e.map(a=>a.folder).filter(Boolean))),r=new Set([...A7,...t,...n]),i=Array.from(r).sort((a,o)=>a.localeCompare(o));return[bn,...i]}function yfe({list:e,customFolders:t,form:n}){const r=w.useMemo(()=>bfe(e,t),[e,t]),i=w.useMemo(()=>hfe(n.birthDay,n.calendarType),[n.birthDay,n.calendarType]);return{folderOptions:r,lunarPreview:i}}function vfe(e,t,n){if(!e.name||e.name.trim()==="")return"??????.";const r=vT(e.birthDay??"",e.calendarType??"solar");if(!r.ok)return r.message;const i=xT(e.birthTime??"",t);return i.ok?!n&&!e.birthPlace?"????? ????''????.":null:i.message}function xfe({item:e,form:t,unknownTime:n,unknownPlace:r,customFolders:i,setCustomFolders:a,update:o,remove:l,onClose:u,onSaved:d}){return{save:()=>{const b=vfe(t,n,r);if(b){alert(b);return}const y=cu(t.folder===bn?void 0:t.folder),S=e6({id:e.id,name:t.name,birthDay:t.birthDay??"",calendarType:t.calendarType??"solar",birthTime:t.birthTime,unknownTime:n,gender:t.gender,birthPlace:t.birthPlace,unknownPlace:r,relationship:t.relationship,memo:t.memo,folder:y,mingSikType:t.mingSikType,favorite:e.favorite,deletedAt:e.deletedAt??null,sortOrder:e.sortOrder,dateObj:e.dateObj},{requireName:!0});if(!S.ok){alert(S.message);return}const _={...e,...S.value};if(_.folder&&!A7.includes(_.folder)&&!i.includes(_.folder)){const k=[...i,_.folder];a(k),pfe(k)}o(e.id,_),d?.(),u?.()},removeThis:()=>{confirm(`'${e.name}'  ?`)&&l(e.id)}}}const j1="w-full rounded p-2 border transition-colors duration-200 bg-white text-neutral-900 placeholder-neutral-400 border-neutral-300 focus:outline-none focus:ring-2 focus:ring-violet-500 focus:border-transparent dark:bg-neutral-900 dark:text-neutral-100 dark:placeholder-neutral-500 dark:border-neutral-700 dark:focus:ring-violet-400",wfe="w-full rounded p-2 border transition-colors duration-200 bg-white text-neutral-900 border-neutral-300 focus:outline-none focus:ring-2 focus:ring-violet-500 focus:border-transparent dark:bg-neutral-900 dark:text-neutral-100 dark:border-neutral-700 dark:focus:ring-violet-400",_fe="w-full rounded p-2 border min-h-28 transition-colors duration-200 bg-white text-neutral-900 placeholder-neutral-400 border-neutral-300 focus:outline-none focus:ring-2 focus:ring-violet-500 focus:border-transparent dark:bg-neutral-900 dark:text-neutral-100 dark:placeholder-neutral-500 dark:border-neutral-700 dark:focus:ring-violet-400",ys="block text-sm mb-1 font-medium text-neutral-800 dark:text-neutral-200",Sfe="text-xs text-neutral-500 dark:text-neutral-400",nb="accent-violet-600 dark:accent-violet-400",rR="accent-violet-600 dark:accent-violet-400",Zv="px-3 py-1.5 rounded text-sm font-medium transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-neutral-900",kfe=`${Zv} bg-amber-600 text-white hover:bg-amber-500 dark:bg-amber-600 dark:hover:bg-amber-500 cursor-pointer`,Efe=`${Zv} bg-red-600 text-white hover:bg-red-500 dark:bg-red-600 dark:hover:bg-red-500 cursor-pointer`,iR=`${Zv} bg-neutral-800 text-white hover:bg-neutral-700 dark:bg-neutral-700 dark:hover:bg-neutral-600 cursor-pointer`,Tfe=`${Zv} bg-green-600 text-white hover:bg-green-500 dark:bg-green-600 dark:hover:bg-green-500 cursor-pointer`;function Afe({item:e,onClose:t}){const{list:n,update:r,remove:i}=yn(),a=gfe(e),o=yfe({list:n,customFolders:a.customFolders,form:a.form}),l=xfe({item:e,form:a.form,unknownTime:a.unknownTime,unknownPlace:a.unknownPlace,customFolders:a.customFolders,setCustomFolders:a.setCustomFolders,update:r,remove:i,onClose:t,onSaved:()=>a.setIsEditing(!1)});return a.isEditing?g.jsxs("div",{className:"space-y-4 max-h-[calc(90dvh_-_40px)] overflow-auto transition-colors duration-200 bg-white text-neutral-900 dark:bg-neutral-950 dark:text-neutral-100 p-4 rounded-xl",children:[g.jsx("h3",{className:"text-lg font-bold",children:" "}),g.jsxs("div",{children:[g.jsx("label",{className:ys,children:""}),g.jsx("input",{className:j1,value:a.form.name||"",onChange:u=>a.updateForm("name",u.target.value),placeholder:""})]}),g.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[g.jsxs("div",{children:[g.jsx("label",{className:ys,children:" (YYYYMMDD)"}),g.jsx("input",{className:j1,value:a.form.birthDay||"",onChange:u=>a.updateForm("birthDay",u.target.value.replace(/\D/g,"").slice(0,8)),inputMode:"numeric",maxLength:8,placeholder:": 19900101"}),g.jsxs("div",{className:"flex gap-4 mt-2 items-center justify-between",children:[g.jsxs("div",{className:"flex gap-4",children:[g.jsxs("span",{className:"inline-flex items-center gap-1",children:[g.jsx("input",{type:"radio",className:nb,name:"calendarType",checked:a.form.calendarType==="solar",onChange:()=>a.updateForm("calendarType","solar"),id:"editor_calendar_solar"}),g.jsx("label",{htmlFor:"editor_calendar_solar",className:"inline-flex items-center gap-1 text-sm text-neutral-800 dark:text-neutral-200 cursor-pointer",children:""})]}),g.jsxs("span",{className:"inline-flex items-center gap-1",children:[g.jsx("input",{type:"radio",className:nb,name:"calendarType",checked:a.form.calendarType==="lunar",onChange:()=>a.updateForm("calendarType","lunar"),id:"editor_calendar_lunar"}),g.jsx("label",{htmlFor:"editor_calendar_lunar",className:"inline-flex items-center gap-1 text-sm text-neutral-800 dark:text-neutral-200 cursor-pointer",children:""})]})]}),o.lunarPreview&&g.jsx("span",{className:Sfe,children:o.lunarPreview})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:ys,children:"  (HHMM)"}),g.jsx("input",{className:`${j1} disabled:opacity-50`,value:a.unknownTime?"":a.form.birthTime||"",onChange:u=>a.updateForm("birthTime",u.target.value.replace(/\D/g,"").slice(0,4)),inputMode:"numeric",maxLength:4,placeholder:": 1524",disabled:a.unknownTime}),g.jsxs("div",{className:"mt-1 text-sm flex items-center gap-2",children:[g.jsx("input",{type:"checkbox",className:rR,checked:a.unknownTime,onChange:u=>a.setUnknownTime(u.target.checked),id:"editor_birthTimeX"}),g.jsx("label",{htmlFor:"editor_birthTimeX",className:"text-neutral-800 dark:text-neutral-200 cursor-pointer",children:""})]})]})]}),g.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[g.jsxs("div",{children:[g.jsx("label",{className:ys,children:" "}),g.jsx("div",{className:"flex gap-4 text-sm",children:["","/",""].map(u=>{const d=`editor_ming_${u}`;return g.jsxs("span",{className:"inline-flex items-center gap-1",children:[g.jsx("input",{type:"radio",className:nb,name:"mingSikType",checked:(a.form.mingSikType??"")===u,onChange:()=>a.updateForm("mingSikType",u),id:d}),g.jsx("label",{htmlFor:d,className:"text-neutral-800 dark:text-neutral-200 cursor-pointer",children:u})]},u)})})]}),g.jsxs("div",{children:[g.jsx("label",{className:ys,children:""}),g.jsx("div",{className:"flex gap-4 text-sm",children:["",""].map(u=>{const d=`editor_gender_${u}`;return g.jsxs("span",{className:"inline-flex items-center gap-1",children:[g.jsx("input",{type:"radio",className:nb,name:"gender",value:u,checked:a.form.gender===u,onChange:h=>a.updateForm("gender",h.target.value),id:d}),g.jsx("label",{htmlFor:d,className:"text-neutral-800 dark:text-neutral-200 cursor-pointer",children:u})]},u)})})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:ys,children:" "}),g.jsx(BB,{onSelect:u=>a.updateForm("birthPlace",u),value:a.unknownPlace?"":a.form.birthPlace?.name??""}),g.jsxs("div",{className:"mt-1 text-sm flex items-center gap-2",children:[g.jsx("input",{type:"checkbox",className:rR,checked:a.unknownPlace,onChange:u=>a.setUnknownPlace(u.target.checked),id:"editor_birthPlaceX"}),g.jsx("label",{htmlFor:"editor_birthPlaceX",className:"text-neutral-800 dark:text-neutral-200 cursor-pointer",children:""})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:ys,children:""}),g.jsx(l6,{value:a.form.relationship||"",onChange:u=>a.updateForm("relationship",u)})]}),g.jsxs("div",{children:[g.jsx("label",{className:ys,children:""}),g.jsx("select",{className:wfe,value:a.form.folder??bn,onChange:u=>{const d=u.target.value;d===bn?a.updateForm("folder",void 0):a.updateForm("folder",d)},children:o.folderOptions.map(u=>g.jsx("option",{value:u===bn?bn:u,children:u},u))})]}),g.jsxs("div",{children:[g.jsx("label",{className:ys,children:""}),g.jsx("textarea",{className:_fe,value:a.form.memo||"",onChange:u=>a.updateForm("memo",u.target.value),placeholder:" "})]}),g.jsxs("div",{className:"flex gap-2 justify-end",children:[g.jsx("button",{className:iR,onClick:()=>{a.resetForm(),a.setIsEditing(!1)},children:""}),g.jsx("button",{className:Tfe,onClick:l.save,children:""})]})]}):g.jsxs("div",{className:"p-4 space-y-3 transition-colors duration-200 bg-white text-neutral-900 dark:bg-neutral-950 dark:text-neutral-100",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("h3",{className:"text-lg font-bold",children:[" ",e.name," "]}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("button",{className:kfe,onClick:()=>a.setIsEditing(!0),children:""}),g.jsx("button",{className:Efe,onClick:l.removeThis,children:""}),t&&g.jsx("button",{className:iR,onClick:t,children:""})]})]}),g.jsxs("div",{className:"text-sm text-neutral-700 dark:text-neutral-300",children:[g.jsxs("div",{children:[": ",e.gender]}),g.jsxs("div",{children:["/: ",e.birthDay," ",e.birthTime===""?"( )":e.birthTime,","," ",e.calendarType==="lunar"?"":""]}),g.jsxs("div",{children:[": ",e.correctedLocal||"-"]}),g.jsxs("div",{children:[": ",e.birthPlace?.name||"-"]}),g.jsxs("div",{children:[": ",e.relationship||"-"]}),g.jsxs("div",{children:[": ",e.folder??bn]})]}),e.ganji&&g.jsx("div",{className:"text-sm text-red-500 whitespace-pre-wrap",children:e.ganji}),e.memo&&g.jsxs("div",{className:"text-sm whitespace-pre-wrap text-neutral-800 dark:text-neutral-200",children:[g.jsx("p",{className:"mb-1 font-semibold",children:""}),e.memo]})]})}function jfe({children:e}){const t=_i(),[n,r]=w.useState(!1),i=[{label:" ",href:"/admin/dashboard"},{label:"  ",href:"/admin/user"},{label:"  ",href:"/admin/logs"}];return g.jsxs("div",{className:"flex min-h-screen bg-neutral-950 text-white",children:[g.jsxs("aside",{className:`
          fixed top-0 left-0 h-full bg-neutral-900 border-r border-neutral-800 
          transition-all z-50

          desk:w-60 desk:translate-x-0
          ${n?"w-60 translate-x-0":"-translate-x-full"}
        `,children:[g.jsxs("div",{className:"p-4 font-bold text-lg flex items-center justify-between",children:[g.jsx("span",{className:"desk:block hidden",children:""}),g.jsx("button",{className:"desk:hidden text-neutral-400 hover:text-white",onClick:()=>r(!1),children:""})]}),g.jsx("nav",{className:"mt-4 flex flex-col gap-1 px-2",children:i.map(a=>{const o=t.pathname.startsWith(a.href);return g.jsx("a",{href:a.href,className:`
                  block px-3 py-2 rounded-md text-sm
                  ${o?"bg-neutral-800 text-yellow-400":"text-neutral-300 hover:bg-neutral-800"}
                `,children:a.label},a.href)})})]}),g.jsxs("main",{className:"flex-1 flex flex-col desk:ml-60",children:[g.jsxs("header",{className:"h-14 border-b border-neutral-800 bg-neutral-900 flex items-center px-4 justify-between",children:[g.jsx("button",{className:"desk:hidden text-neutral-300",onClick:()=>r(!0),children:""}),g.jsx("div",{className:"font-semibold",children:" "}),g.jsx("button",{className:"text-sm text-neutral-400 hover:text-white cursor-pointer",onClick:()=>window.location.href="/",children:" "})]}),g.jsx("div",{className:"flex-1",children:e})]})]})}function Ofe(){const[e,t]=w.useState(null),[n,r]=w.useState(!0);return w.useEffect(()=>{(async()=>{const{data:a}=await Ie.auth.getUser(),o=a.user?.id;if(!o){t(null),r(!1);return}const{data:l}=await Ie.from("admin_roles").select("role").eq("user_id",o).maybeSingle();t(l?.role??null),r(!1)})()},[]),{role:e,loading:n}}function Nfe({allow:e,children:t}){const{role:n,loading:r}=Ofe();return r?g.jsx("div",{className:"text-white p-6",children:"Checking permission..."}):!n||!e.includes(n)?g.jsx("div",{className:"text-red-400 p-6",children:" ."}):g.jsx(g.Fragment,{children:t})}function j7(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=j7(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function rn(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=j7(e))&&(r&&(r+=" "),r+=t);return r}var Cfe=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function ZT(e){if(typeof e!="string")return!1;var t=Cfe;return t.includes(e)}var Mfe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],Dfe=new Set(Mfe);function O7(e){return typeof e!="string"?!1:Dfe.has(e)}function N7(e){return typeof e=="string"&&e.startsWith("data-")}function to(e){if(typeof e!="object"||e===null)return{};var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(O7(n)||N7(n))&&(t[n]=e[n]);return t}function Xv(e){if(e==null)return null;if(w.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return to(t)}return typeof e=="object"&&!Array.isArray(e)?to(e):null}function Sa(e){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(O7(n)||N7(n)||ZT(n))&&(t[n]=e[n]);return t}function Pfe(e){return e==null?null:w.isValidElement(e)?Sa(e.props):typeof e=="object"&&!Array.isArray(e)?Sa(e):null}var Rfe=["children","width","height","viewBox","className","style","title","desc"];function w2(){return w2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},w2.apply(null,arguments)}function Lfe(e,t){if(e==null)return{};var n,r,i=Ife(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Ife(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var C7=w.forwardRef((e,t)=>{var{children:n,width:r,height:i,viewBox:a,className:o,style:l,title:u,desc:d}=e,h=Lfe(e,Rfe),p=a||{width:r,height:i,x:0,y:0},b=rn("recharts-surface",o);return w.createElement("svg",w2({},Sa(h),{className:b,width:r,height:i,style:l,viewBox:"".concat(p.x," ").concat(p.y," ").concat(p.width," ").concat(p.height),ref:t}),w.createElement("title",null,u),w.createElement("desc",null,d),n)}),$fe=["children","className"];function _2(){return _2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_2.apply(null,arguments)}function Bfe(e,t){if(e==null)return{};var n,r,i=zfe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function zfe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var Io=w.forwardRef((e,t)=>{var{children:n,className:r}=e,i=Bfe(e,$fe),a=rn("recharts-layer",r);return w.createElement("g",_2({className:a},Sa(i),{ref:t}),n)}),Ufe=w.createContext(null);function Tn(e){return function(){return e}}const S2=Math.PI,k2=2*S2,Zc=1e-6,Ffe=k2-Zc;function M7(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Hfe(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return M7;const n=10**t;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class Gfe{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?M7:Hfe(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,a,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+a},${this._y1=+o}`}arcTo(t,n,r,i,a){if(t=+t,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let o=this._x1,l=this._y1,u=r-t,d=i-n,h=o-t,p=l-n,b=h*h+p*p;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(b>Zc)if(!(Math.abs(p*u-d*h)>Zc)||!a)this._append`L${this._x1=t},${this._y1=n}`;else{let y=r-o,S=i-l,_=u*u+d*d,k=y*y+S*S,A=Math.sqrt(_),N=Math.sqrt(b),j=a*Math.tan((S2-Math.acos((_+b-k)/(2*A*N)))/2),C=j/N,D=j/A;Math.abs(C-1)>Zc&&this._append`L${t+C*h},${n+C*p}`,this._append`A${a},${a},0,0,${+(p*y>h*S)},${this._x1=t+D*u},${this._y1=n+D*d}`}}arc(t,n,r,i,a,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let l=r*Math.cos(i),u=r*Math.sin(i),d=t+l,h=n+u,p=1^o,b=o?i-a:a-i;this._x1===null?this._append`M${d},${h}`:(Math.abs(this._x1-d)>Zc||Math.abs(this._y1-h)>Zc)&&this._append`L${d},${h}`,r&&(b<0&&(b=b%k2+k2),b>Ffe?this._append`A${r},${r},0,1,${p},${t-l},${n-u}A${r},${r},0,1,${p},${this._x1=d},${this._y1=h}`:b>Zc&&this._append`A${r},${r},0,${+(b>=S2)},${p},${this._x1=t+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function D7(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new Gfe(t)}function XT(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function P7(e){this._context=e}P7.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Jv(e){return new P7(e)}function R7(e){return e[0]}function L7(e){return e[1]}function I7(e,t){var n=Tn(!0),r=null,i=Jv,a=null,o=D7(l);e=typeof e=="function"?e:e===void 0?R7:Tn(e),t=typeof t=="function"?t:t===void 0?L7:Tn(t);function l(u){var d,h=(u=XT(u)).length,p,b=!1,y;for(r==null&&(a=i(y=o())),d=0;d<=h;++d)!(d<h&&n(p=u[d],d,u))===b&&((b=!b)?a.lineStart():a.lineEnd()),b&&a.point(+e(p,d,u),+t(p,d,u));if(y)return a=null,y+""||null}return l.x=function(u){return arguments.length?(e=typeof u=="function"?u:Tn(+u),l):e},l.y=function(u){return arguments.length?(t=typeof u=="function"?u:Tn(+u),l):t},l.defined=function(u){return arguments.length?(n=typeof u=="function"?u:Tn(!!u),l):n},l.curve=function(u){return arguments.length?(i=u,r!=null&&(a=i(r)),l):i},l.context=function(u){return arguments.length?(u==null?r=a=null:a=i(r=u),l):r},l}function rb(e,t,n){var r=null,i=Tn(!0),a=null,o=Jv,l=null,u=D7(d);e=typeof e=="function"?e:e===void 0?R7:Tn(+e),t=typeof t=="function"?t:Tn(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?L7:Tn(+n);function d(p){var b,y,S,_=(p=XT(p)).length,k,A=!1,N,j=new Array(_),C=new Array(_);for(a==null&&(l=o(N=u())),b=0;b<=_;++b){if(!(b<_&&i(k=p[b],b,p))===A)if(A=!A)y=b,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),S=b-1;S>=y;--S)l.point(j[S],C[S]);l.lineEnd(),l.areaEnd()}A&&(j[b]=+e(k,b,p),C[b]=+t(k,b,p),l.point(r?+r(k,b,p):j[b],n?+n(k,b,p):C[b]))}if(N)return l=null,N+""||null}function h(){return I7().defined(i).curve(o).context(a)}return d.x=function(p){return arguments.length?(e=typeof p=="function"?p:Tn(+p),r=null,d):e},d.x0=function(p){return arguments.length?(e=typeof p=="function"?p:Tn(+p),d):e},d.x1=function(p){return arguments.length?(r=p==null?null:typeof p=="function"?p:Tn(+p),d):r},d.y=function(p){return arguments.length?(t=typeof p=="function"?p:Tn(+p),n=null,d):t},d.y0=function(p){return arguments.length?(t=typeof p=="function"?p:Tn(+p),d):t},d.y1=function(p){return arguments.length?(n=p==null?null:typeof p=="function"?p:Tn(+p),d):n},d.lineX0=d.lineY0=function(){return h().x(e).y(t)},d.lineY1=function(){return h().x(e).y(n)},d.lineX1=function(){return h().x(r).y(t)},d.defined=function(p){return arguments.length?(i=typeof p=="function"?p:Tn(!!p),d):i},d.curve=function(p){return arguments.length?(o=p,a!=null&&(l=o(a)),d):o},d.context=function(p){return arguments.length?(p==null?a=l=null:l=o(a=p),d):a},d}class $7{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function qfe(e){return new $7(e,!0)}function Yfe(e){return new $7(e,!1)}function Oy(){}function Ny(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function B7(e){this._context=e}B7.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Ny(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Ny(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Kfe(e){return new B7(e)}function z7(e){this._context=e}z7.prototype={areaStart:Oy,areaEnd:Oy,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Ny(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Wfe(e){return new z7(e)}function U7(e){this._context=e}U7.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Ny(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Vfe(e){return new U7(e)}function F7(e){this._context=e}F7.prototype={areaStart:Oy,areaEnd:Oy,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Zfe(e){return new F7(e)}function aR(e){return e<0?-1:1}function oR(e,t,n){var r=e._x1-e._x0,i=t-e._x1,a=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),l=(a*i+o*r)/(r+i);return(aR(a)+aR(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(l))||0}function sR(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function O1(e,t,n){var r=e._x0,i=e._y0,a=e._x1,o=e._y1,l=(a-r)/3;e._context.bezierCurveTo(r+l,i+l*t,a-l,o-l*n,a,o)}function Cy(e){this._context=e}Cy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:O1(this,this._t0,sR(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,O1(this,sR(this,n=oR(this,e,t)),n);break;default:O1(this,this._t0,n=oR(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function H7(e){this._context=new G7(e)}(H7.prototype=Object.create(Cy.prototype)).point=function(e,t){Cy.prototype.point.call(this,t,e)};function G7(e){this._context=e}G7.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,a){this._context.bezierCurveTo(t,e,r,n,a,i)}};function Xfe(e){return new Cy(e)}function Jfe(e){return new H7(e)}function q7(e){this._context=e}q7.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=lR(e),i=lR(t),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function lR(e){var t,n=e.length-1,r,i=new Array(n),a=new Array(n),o=new Array(n);for(i[0]=0,a[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,a[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,a[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/a[t-1],a[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/a[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/a[t];for(a[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)a[t]=2*e[t+1]-i[t+1];return[i,a]}function Qfe(e){return new q7(e)}function Qv(e,t){this._context=e,this._t=t}Qv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function ehe(e){return new Qv(e,.5)}function the(e){return new Qv(e,0)}function nhe(e){return new Qv(e,1)}function af(e,t){if((o=e.length)>1)for(var n=1,r,i,a=e[t[0]],o,l=a.length;n<o;++n)for(i=a,a=e[t[n]],r=0;r<l;++r)a[r][1]+=a[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function E2(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function rhe(e,t){return e[t]}function ihe(e){const t=[];return t.key=e,t}function ahe(){var e=Tn([]),t=E2,n=af,r=rhe;function i(a){var o=Array.from(e.apply(this,arguments),ihe),l,u=o.length,d=-1,h;for(const p of a)for(l=0,++d;l<u;++l)(o[l][d]=[0,+r(p,o[l].key,d,a)]).data=p;for(l=0,h=XT(t(o));l<u;++l)o[h[l]].index=l;return n(o,h),o}return i.keys=function(a){return arguments.length?(e=typeof a=="function"?a:Tn(Array.from(a)),i):e},i.value=function(a){return arguments.length?(r=typeof a=="function"?a:Tn(+a),i):r},i.order=function(a){return arguments.length?(t=a==null?E2:typeof a=="function"?a:Tn(Array.from(a)),i):t},i.offset=function(a){return arguments.length?(n=a??af,i):n},i}function ohe(e,t){if((r=e.length)>0){for(var n,r,i=0,a=e[0].length,o;i<a;++i){for(o=n=0;n<r;++n)o+=e[n][i][1]||0;if(o)for(n=0;n<r;++n)e[n][i][1]/=o}af(e,t)}}function she(e,t){if((i=e.length)>0){for(var n=0,r=e[t[0]],i,a=r.length;n<a;++n){for(var o=0,l=0;o<i;++o)l+=e[o][n][1]||0;r[n][1]+=r[n][0]=-l/2}af(e,t)}}function lhe(e,t){if(!(!((o=e.length)>0)||!((a=(i=e[t[0]]).length)>0))){for(var n=0,r=1,i,a,o;r<a;++r){for(var l=0,u=0,d=0;l<o;++l){for(var h=e[t[l]],p=h[r][1]||0,b=h[r-1][1]||0,y=(p-b)/2,S=0;S<l;++S){var _=e[t[S]],k=_[r][1]||0,A=_[r-1][1]||0;y+=k-A}u+=p,d+=y*p}i[r-1][1]+=i[r-1][0]=n,u&&(n-=d/u)}i[r-1][1]+=i[r-1][0]=n,af(e,t)}}var N1={},C1={},cR;function che(){return cR||(cR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==="__proto__"}e.isUnsafeProperty=t})(C1)),C1}var M1={},uR;function Y7(){return uR||(uR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}e.isDeepKey=t})(M1)),M1}var D1={},dR;function JT(){return dR||(dR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="string"||typeof n=="symbol"?n:Object.is(n?.valueOf?.(),-0)?"-0":String(n)}e.toKey=t})(D1)),D1}var P1={},R1={},fR;function uhe(){return fR||(fR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){if(n==null)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.map(t).join(",");const r=String(n);return r==="0"&&Object.is(Number(n),-0)?"-0":r}e.toString=t})(R1)),R1}var hR;function QT(){return hR||(hR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=uhe(),n=JT();function r(i){if(Array.isArray(i))return i.map(n.toKey);if(typeof i=="symbol")return[i];i=t.toString(i);const a=[],o=i.length;if(o===0)return a;let l=0,u="",d="",h=!1;for(i.charCodeAt(0)===46&&(a.push(""),l++);l<o;){const p=i[l];d?p==="\\"&&l+1<o?(l++,u+=i[l]):p===d?d="":u+=p:h?p==='"'||p==="'"?d=p:p==="]"?(h=!1,a.push(u),u=""):u+=p:p==="["?(h=!0,u&&(a.push(u),u="")):p==="."?u&&(a.push(u),u=""):u+=p,l++}return u&&a.push(u),a}e.toPath=r})(P1)),P1}var mR;function eA(){return mR||(mR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=che(),n=Y7(),r=JT(),i=QT();function a(l,u,d){if(l==null)return d;switch(typeof u){case"string":{if(t.isUnsafeProperty(u))return d;const h=l[u];return h===void 0?n.isDeepKey(u)?a(l,i.toPath(u),d):d:h}case"number":case"symbol":{typeof u=="number"&&(u=r.toKey(u));const h=l[u];return h===void 0?d:h}default:{if(Array.isArray(u))return o(l,u,d);if(Object.is(u?.valueOf(),-0)?u="-0":u=String(u),t.isUnsafeProperty(u))return d;const h=l[u];return h===void 0?d:h}}}function o(l,u,d){if(u.length===0)return d;let h=l;for(let p=0;p<u.length;p++){if(h==null||t.isUnsafeProperty(u[p]))return d;h=h[u[p]]}return h===void 0?d:h}e.get=a})(N1)),N1}var L1,pR;function dhe(){return pR||(pR=1,L1=eA().get),L1}var fhe=dhe();const ex=wi(fhe);var ba=e=>e===0?0:e>0?1:-1,no=e=>typeof e=="number"&&e!=+e,Ms=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,Qe=e=>(typeof e=="number"||e instanceof Number)&&!no(e),$o=e=>Qe(e)||typeof e=="string",hhe=0,Vm=e=>{var t=++hhe;return"".concat(e||"").concat(t)},Wl=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Qe(t)&&typeof t!="string")return r;var a;if(Ms(t)){if(n==null)return r;var o=t.indexOf("%");a=n*parseFloat(t.slice(0,o))/100}else a=+t;return no(a)&&(a=r),i&&n!=null&&a>n&&(a=n),a},K7=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,n={},r=0;r<t;r++)if(!n[e[r]])n[e[r]]=!0;else return!0;return!1};function Co(e,t,n){return Qe(e)&&Qe(t)?e+n*(t-e):t}function W7(e,t,n){if(!(!e||!e.length))return e.find(r=>r&&(typeof t=="function"?t(r):ex(r,t))===n)}var Ar=e=>e===null||typeof e>"u",tA=e=>Ar(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function mhe(e){return e!=null}function Ap(){}var V7=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,nA=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(w.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(i=>{ZT(i)&&(r[i]=(a=>n[i](n,a)))}),r},phe=(e,t,n)=>r=>(e(t,n,r),null),ghe=(e,t,n)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var r=null;return Object.keys(e).forEach(i=>{var a=e[i];ZT(i)&&typeof a=="function"&&(r||(r={}),r[i]=phe(a,t,n))}),r};function gR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function bhe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?gR(Object(n),!0).forEach(function(r){yhe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function yhe(e,t,n){return(t=vhe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vhe(e){var t=xhe(e,"string");return typeof t=="symbol"?t:t+""}function xhe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Vi(e,t){var n=bhe({},e),r=t,i=Object.keys(t),a=i.reduce((o,l)=>(o[l]===void 0&&r[l]!==void 0&&(o[l]=r[l]),o),n);return a}var I1={},$1={},bR;function whe(){return bR||(bR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r){const i=new Map;for(let a=0;a<n.length;a++){const o=n[a],l=r(o);i.has(l)||i.set(l,o)}return Array.from(i.values())}e.uniqBy=t})($1)),$1}var B1={},yR;function Z7(){return yR||(yR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n}e.identity=t})(B1)),B1}var z1={},U1={},F1={},vR;function _he(){return vR||(vR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Number.isSafeInteger(n)&&n>=0}e.isLength=t})(F1)),F1}var xR;function rA(){return xR||(xR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_he();function n(r){return r!=null&&typeof r!="function"&&t.isLength(r.length)}e.isArrayLike=n})(U1)),U1}var H1={},wR;function She(){return wR||(wR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="object"&&n!==null}e.isObjectLike=t})(H1)),H1}var _R;function khe(){return _R||(_R=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rA(),n=She();function r(i){return n.isObjectLike(i)&&t.isArrayLike(i)}e.isArrayLikeObject=r})(z1)),z1}var G1={},q1={},SR;function Ehe(){return SR||(SR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=eA();function n(r){return function(i){return t.get(i,r)}}e.property=n})(q1)),q1}var Y1={},K1={},W1={},V1={},kR;function X7(){return kR||(kR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n!==null&&(typeof n=="object"||typeof n=="function")}e.isObject=t})(V1)),V1}var Z1={},ER;function J7(){return ER||(ER=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null||typeof n!="object"&&typeof n!="function"}e.isPrimitive=t})(Z1)),Z1}var X1={},TR;function Q7(){return TR||(TR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}e.eq=t})(X1)),X1}var AR;function The(){return AR||(AR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=X7(),n=J7(),r=Q7();function i(h,p,b){return typeof b!="function"?i(h,p,()=>{}):a(h,p,function y(S,_,k,A,N,j){const C=b(S,_,k,A,N,j);return C!==void 0?!!C:a(S,_,y,j)},new Map)}function a(h,p,b,y){if(p===h)return!0;switch(typeof p){case"object":return o(h,p,b,y);case"function":return Object.keys(p).length>0?a(h,{...p},b,y):r.eq(h,p);default:return t.isObject(h)?typeof p=="string"?p==="":!0:r.eq(h,p)}}function o(h,p,b,y){if(p==null)return!0;if(Array.isArray(p))return u(h,p,b,y);if(p instanceof Map)return l(h,p,b,y);if(p instanceof Set)return d(h,p,b,y);const S=Object.keys(p);if(h==null)return S.length===0;if(S.length===0)return!0;if(y?.has(p))return y.get(p)===h;y?.set(p,h);try{for(let _=0;_<S.length;_++){const k=S[_];if(!n.isPrimitive(h)&&!(k in h)||p[k]===void 0&&h[k]!==void 0||p[k]===null&&h[k]!==null||!b(h[k],p[k],k,h,p,y))return!1}return!0}finally{y?.delete(p)}}function l(h,p,b,y){if(p.size===0)return!0;if(!(h instanceof Map))return!1;for(const[S,_]of p.entries()){const k=h.get(S);if(b(k,_,S,h,p,y)===!1)return!1}return!0}function u(h,p,b,y){if(p.length===0)return!0;if(!Array.isArray(h))return!1;const S=new Set;for(let _=0;_<p.length;_++){const k=p[_];let A=!1;for(let N=0;N<h.length;N++){if(S.has(N))continue;const j=h[N];let C=!1;if(b(j,k,_,h,p,y)&&(C=!0),C){S.add(N),A=!0;break}}if(!A)return!1}return!0}function d(h,p,b,y){return p.size===0?!0:h instanceof Set?u([...h],[...p],b,y):!1}e.isMatchWith=i,e.isSetMatch=d})(W1)),W1}var jR;function e9(){return jR||(jR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=The();function n(r,i){return t.isMatchWith(r,i,()=>{})}e.isMatch=n})(K1)),K1}var J1={},Q1={},eS={},OR;function Ahe(){return OR||(OR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}e.getSymbols=t})(eS)),eS}var tS={},NR;function t9(){return NR||(NR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}e.getTag=t})(tS)),tS}var nS={},CR;function n9(){return CR||(CR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",n="[object String]",r="[object Number]",i="[object Boolean]",a="[object Arguments]",o="[object Symbol]",l="[object Date]",u="[object Map]",d="[object Set]",h="[object Array]",p="[object Function]",b="[object ArrayBuffer]",y="[object Object]",S="[object Error]",_="[object DataView]",k="[object Uint8Array]",A="[object Uint8ClampedArray]",N="[object Uint16Array]",j="[object Uint32Array]",C="[object BigUint64Array]",D="[object Int8Array]",P="[object Int16Array]",$="[object Int32Array]",U="[object BigInt64Array]",Y="[object Float32Array]",K="[object Float64Array]";e.argumentsTag=a,e.arrayBufferTag=b,e.arrayTag=h,e.bigInt64ArrayTag=U,e.bigUint64ArrayTag=C,e.booleanTag=i,e.dataViewTag=_,e.dateTag=l,e.errorTag=S,e.float32ArrayTag=Y,e.float64ArrayTag=K,e.functionTag=p,e.int16ArrayTag=P,e.int32ArrayTag=$,e.int8ArrayTag=D,e.mapTag=u,e.numberTag=r,e.objectTag=y,e.regexpTag=t,e.setTag=d,e.stringTag=n,e.symbolTag=o,e.uint16ArrayTag=N,e.uint32ArrayTag=j,e.uint8ArrayTag=k,e.uint8ClampedArrayTag=A})(nS)),nS}var rS={},MR;function jhe(){return MR||(MR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}e.isTypedArray=t})(rS)),rS}var DR;function r9(){return DR||(DR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ahe(),n=t9(),r=n9(),i=J7(),a=jhe();function o(h,p){return l(h,void 0,h,new Map,p)}function l(h,p,b,y=new Map,S=void 0){const _=S?.(h,p,b,y);if(_!==void 0)return _;if(i.isPrimitive(h))return h;if(y.has(h))return y.get(h);if(Array.isArray(h)){const k=new Array(h.length);y.set(h,k);for(let A=0;A<h.length;A++)k[A]=l(h[A],A,b,y,S);return Object.hasOwn(h,"index")&&(k.index=h.index),Object.hasOwn(h,"input")&&(k.input=h.input),k}if(h instanceof Date)return new Date(h.getTime());if(h instanceof RegExp){const k=new RegExp(h.source,h.flags);return k.lastIndex=h.lastIndex,k}if(h instanceof Map){const k=new Map;y.set(h,k);for(const[A,N]of h)k.set(A,l(N,A,b,y,S));return k}if(h instanceof Set){const k=new Set;y.set(h,k);for(const A of h)k.add(l(A,void 0,b,y,S));return k}if(typeof Buffer<"u"&&Buffer.isBuffer(h))return h.subarray();if(a.isTypedArray(h)){const k=new(Object.getPrototypeOf(h)).constructor(h.length);y.set(h,k);for(let A=0;A<h.length;A++)k[A]=l(h[A],A,b,y,S);return k}if(h instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&h instanceof SharedArrayBuffer)return h.slice(0);if(h instanceof DataView){const k=new DataView(h.buffer.slice(0),h.byteOffset,h.byteLength);return y.set(h,k),u(k,h,b,y,S),k}if(typeof File<"u"&&h instanceof File){const k=new File([h],h.name,{type:h.type});return y.set(h,k),u(k,h,b,y,S),k}if(typeof Blob<"u"&&h instanceof Blob){const k=new Blob([h],{type:h.type});return y.set(h,k),u(k,h,b,y,S),k}if(h instanceof Error){const k=new h.constructor;return y.set(h,k),k.message=h.message,k.name=h.name,k.stack=h.stack,k.cause=h.cause,u(k,h,b,y,S),k}if(h instanceof Boolean){const k=new Boolean(h.valueOf());return y.set(h,k),u(k,h,b,y,S),k}if(h instanceof Number){const k=new Number(h.valueOf());return y.set(h,k),u(k,h,b,y,S),k}if(h instanceof String){const k=new String(h.valueOf());return y.set(h,k),u(k,h,b,y,S),k}if(typeof h=="object"&&d(h)){const k=Object.create(Object.getPrototypeOf(h));return y.set(h,k),u(k,h,b,y,S),k}return h}function u(h,p,b=h,y,S){const _=[...Object.keys(p),...t.getSymbols(p)];for(let k=0;k<_.length;k++){const A=_[k],N=Object.getOwnPropertyDescriptor(h,A);(N==null||N.writable)&&(h[A]=l(p[A],A,b,y,S))}}function d(h){switch(n.getTag(h)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=o,e.cloneDeepWithImpl=l,e.copyProperties=u})(Q1)),Q1}var PR;function Ohe(){return PR||(PR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=r9();function n(r){return t.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}e.cloneDeep=n})(J1)),J1}var RR;function Nhe(){return RR||(RR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=e9(),n=Ohe();function r(i){return i=n.cloneDeep(i),a=>t.isMatch(a,i)}e.matches=r})(Y1)),Y1}var iS={},aS={},oS={},LR;function Che(){return LR||(LR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=r9(),n=n9();function r(i,a){return t.cloneDeepWith(i,(o,l,u,d)=>{const h=a?.(o,l,u,d);if(h!==void 0)return h;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case n.numberTag:case n.stringTag:case n.booleanTag:{const p=new i.constructor(i?.valueOf());return t.copyProperties(p,i),p}case n.argumentsTag:{const p={};return t.copyProperties(p,i),p.length=i.length,p[Symbol.iterator]=i[Symbol.iterator],p}default:return}})}e.cloneDeepWith=r})(oS)),oS}var IR;function Mhe(){return IR||(IR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Che();function n(r){return t.cloneDeepWith(r)}e.cloneDeep=n})(aS)),aS}var sS={},lS={},$R;function i9(){return $R||($R=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function n(r,i=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<i;case"symbol":return!1;case"string":return t.test(r)}}e.isIndex=n})(lS)),lS}var cS={},BR;function Dhe(){return BR||(BR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=t9();function n(r){return r!==null&&typeof r=="object"&&t.getTag(r)==="[object Arguments]"}e.isArguments=n})(cS)),cS}var zR;function Phe(){return zR||(zR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Y7(),n=i9(),r=Dhe(),i=QT();function a(o,l){let u;if(Array.isArray(l)?u=l:typeof l=="string"&&t.isDeepKey(l)&&o?.[l]==null?u=i.toPath(l):u=[l],u.length===0)return!1;let d=o;for(let h=0;h<u.length;h++){const p=u[h];if((d==null||!Object.hasOwn(d,p))&&!((Array.isArray(d)||r.isArguments(d))&&n.isIndex(p)&&p<d.length))return!1;d=d[p]}return!0}e.has=a})(sS)),sS}var UR;function Rhe(){return UR||(UR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=e9(),n=JT(),r=Mhe(),i=eA(),a=Phe();function o(l,u){switch(typeof l){case"object":{Object.is(l?.valueOf(),-0)&&(l="-0");break}case"number":{l=n.toKey(l);break}}return u=r.cloneDeep(u),function(d){const h=i.get(d,l);return h===void 0?a.has(d,l):u===void 0?h===void 0:t.isMatch(h,u)}}e.matchesProperty=o})(iS)),iS}var FR;function Lhe(){return FR||(FR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Z7(),n=Ehe(),r=Nhe(),i=Rhe();function a(o){if(o==null)return t.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?i.matchesProperty(o[0],o[1]):r.matches(o);case"string":case"symbol":case"number":return n.property(o)}}e.iteratee=a})(G1)),G1}var HR;function Ihe(){return HR||(HR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=whe(),n=Z7(),r=khe(),i=Lhe();function a(o,l=n.identity){return r.isArrayLikeObject(o)?t.uniqBy(Array.from(o),i.iteratee(l)):[]}e.uniqBy=a})(I1)),I1}var uS,GR;function $he(){return GR||(GR=1,uS=Ihe().uniqBy),uS}var Bhe=$he();const qR=wi(Bhe);function zhe(e,t,n){return t===!0?qR(e,n):typeof t=="function"?qR(e,t):e}var dS={exports:{}},fS={},hS={exports:{}},mS={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YR;function Uhe(){if(YR)return mS;YR=1;var e=ff();function t(p,b){return p===b&&(p!==0||1/p===1/b)||p!==p&&b!==b}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,i=e.useEffect,a=e.useLayoutEffect,o=e.useDebugValue;function l(p,b){var y=b(),S=r({inst:{value:y,getSnapshot:b}}),_=S[0].inst,k=S[1];return a(function(){_.value=y,_.getSnapshot=b,u(_)&&k({inst:_})},[p,y,b]),i(function(){return u(_)&&k({inst:_}),p(function(){u(_)&&k({inst:_})})},[p]),o(y),y}function u(p){var b=p.getSnapshot;p=p.value;try{var y=b();return!n(p,y)}catch{return!0}}function d(p,b){return b()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:l;return mS.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:h,mS}var KR;function Fhe(){return KR||(KR=1,hS.exports=Uhe()),hS.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WR;function Hhe(){if(WR)return fS;WR=1;var e=ff(),t=Fhe();function n(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}var r=typeof Object.is=="function"?Object.is:n,i=t.useSyncExternalStore,a=e.useRef,o=e.useEffect,l=e.useMemo,u=e.useDebugValue;return fS.useSyncExternalStoreWithSelector=function(d,h,p,b,y){var S=a(null);if(S.current===null){var _={hasValue:!1,value:null};S.current=_}else _=S.current;S=l(function(){function A(P){if(!N){if(N=!0,j=P,P=b(P),y!==void 0&&_.hasValue){var $=_.value;if(y($,P))return C=$}return C=P}if($=C,r(j,P))return $;var U=b(P);return y!==void 0&&y($,U)?(j=P,$):(j=P,C=U)}var N=!1,j,C,D=p===void 0?null:p;return[function(){return A(h())},D===null?void 0:function(){return A(D())}]},[h,p,b,y]);var k=i(d,S[0],S[1]);return o(function(){_.hasValue=!0,_.value=k},[k]),u(k),k},fS}var VR;function Ghe(){return VR||(VR=1,dS.exports=Hhe()),dS.exports}var qhe=Ghe(),iA=w.createContext(null),Yhe=e=>e,pr=()=>{var e=w.useContext(iA);return e?e.store.dispatch:Yhe},$b=()=>{},Khe=()=>$b,Whe=(e,t)=>e===t;function tt(e){var t=w.useContext(iA);return qhe.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:Khe,t?t.store.getState:$b,t?t.store.getState:$b,t?e:$b,Whe)}function Vhe(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function Zhe(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function Xhe(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var ZR=e=>Array.isArray(e)?e:[e];function Jhe(e){const t=Array.isArray(e[0])?e[0]:e;return Xhe(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function Qhe(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}var eme=class{constructor(e){this.value=e}deref(){return this.value}},tme=typeof WeakRef<"u"?WeakRef:eme,nme=0,XR=1;function ib(){return{s:nme,v:void 0,o:null,p:null}}function a9(e,t={}){let n=ib();const{resultEqualityCheck:r}=t;let i,a=0;function o(){let l=n;const{length:u}=arguments;for(let p=0,b=u;p<b;p++){const y=arguments[p];if(typeof y=="function"||typeof y=="object"&&y!==null){let S=l.o;S===null&&(l.o=S=new WeakMap);const _=S.get(y);_===void 0?(l=ib(),S.set(y,l)):l=_}else{let S=l.p;S===null&&(l.p=S=new Map);const _=S.get(y);_===void 0?(l=ib(),S.set(y,l)):l=_}}const d=l;let h;if(l.s===XR)h=l.v;else if(h=e.apply(null,arguments),a++,r){const p=i?.deref?.()??i;p!=null&&r(p,h)&&(h=p,a!==0&&a--),i=typeof h=="object"&&h!==null||typeof h=="function"?new tme(h):h}return d.s=XR,d.v=h,h}return o.clearCache=()=>{n=ib(),o.resetResultsCount()},o.resultsCount=()=>a,o.resetResultsCount=()=>{a=0},o}function rme(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...i)=>{let a=0,o=0,l,u={},d=i.pop();typeof d=="object"&&(u=d,d=i.pop()),Vhe(d,`createSelector expects an output function after the inputs, but received: [${typeof d}]`);const h={...n,...u},{memoize:p,memoizeOptions:b=[],argsMemoize:y=a9,argsMemoizeOptions:S=[]}=h,_=ZR(b),k=ZR(S),A=Jhe(i),N=p(function(){return a++,d.apply(null,arguments)},..._),j=y(function(){o++;const D=Qhe(A,arguments);return l=N.apply(null,D),l},...k);return Object.assign(j,{resultFunc:d,memoizedResultFunc:N,dependencies:A,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>l,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:p,argsMemoize:y})};return Object.assign(r,{withTypes:()=>r}),r}var xe=rme(a9),ime=Object.assign((e,t=xe)=>{Zhe(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(a=>e[a]);return t(r,(...a)=>a.reduce((o,l,u)=>(o[n[u]]=l,o),{}))},{withTypes:()=>ime}),pS={},gS={},bS={},JR;function ame(){return JR||(JR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,i,a)=>{if(r!==i){const o=t(r),l=t(i);if(o===l&&o===0){if(r<i)return a==="desc"?1:-1;if(r>i)return a==="desc"?-1:1}return a==="desc"?l-o:o-l}return 0};e.compareValues=n})(bS)),bS}var yS={},vS={},QR;function o9(){return QR||(QR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"||n instanceof Symbol}e.isSymbol=t})(vS)),vS}var e3;function ome(){return e3||(e3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=o9(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(a,o){return Array.isArray(a)?!1:typeof a=="number"||typeof a=="boolean"||a==null||t.isSymbol(a)?!0:typeof a=="string"&&(r.test(a)||!n.test(a))||o!=null&&Object.hasOwn(o,a)}e.isKey=i})(yS)),yS}var t3;function sme(){return t3||(t3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ame(),n=ome(),r=QT();function i(a,o,l,u){if(a==null)return[];l=u?void 0:l,Array.isArray(a)||(a=Object.values(a)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(l)||(l=l==null?[]:[l]),l=l.map(y=>String(y));const d=(y,S)=>{let _=y;for(let k=0;k<S.length&&_!=null;++k)_=_[S[k]];return _},h=(y,S)=>S==null||y==null?S:typeof y=="object"&&"key"in y?Object.hasOwn(S,y.key)?S[y.key]:d(S,y.path):typeof y=="function"?y(S):Array.isArray(y)?d(S,y):typeof S=="object"?S[y]:S,p=o.map(y=>(Array.isArray(y)&&y.length===1&&(y=y[0]),y==null||typeof y=="function"||Array.isArray(y)||n.isKey(y)?y:{key:y,path:r.toPath(y)}));return a.map(y=>({original:y,criteria:p.map(S=>h(S,y))})).slice().sort((y,S)=>{for(let _=0;_<p.length;_++){const k=t.compareValues(y.criteria[_],S.criteria[_],l[_]);if(k!==0)return k}return 0}).map(y=>y.original)}e.orderBy=i})(gS)),gS}var xS={},n3;function lme(){return n3||(n3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r=1){const i=[],a=Math.floor(r),o=(l,u)=>{for(let d=0;d<l.length;d++){const h=l[d];Array.isArray(h)&&u<a?o(h,u+1):i.push(h)}};return o(n,0),i}e.flatten=t})(xS)),xS}var wS={},r3;function s9(){return r3||(r3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=i9(),n=rA(),r=X7(),i=Q7();function a(o,l,u){return r.isObject(u)&&(typeof l=="number"&&n.isArrayLike(u)&&t.isIndex(l)&&l<u.length||typeof l=="string"&&l in u)?i.eq(u[l],o):!1}e.isIterateeCall=a})(wS)),wS}var i3;function cme(){return i3||(i3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sme(),n=lme(),r=s9();function i(a,...o){const l=o.length;return l>1&&r.isIterateeCall(a,o[0],o[1])?o=[]:l>2&&r.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),t.orderBy(a,n.flatten(o),["asc"])}e.sortBy=i})(pS)),pS}var _S,a3;function ume(){return a3||(a3=1,_S=cme().sortBy),_S}var dme=ume();const tx=wi(dme);var l9=e=>e.legend.settings,fme=e=>e.legend.size,hme=e=>e.legend.payload;xe([hme,l9],(e,t)=>{var{itemSorter:n}=t,r=e.flat(1);return n?tx(r,n):r});var ab=1;function mme(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,n]=w.useState({height:0,left:0,top:0,width:0}),r=w.useCallback(i=>{if(i!=null){var a=i.getBoundingClientRect(),o={height:a.height,left:a.left,top:a.top,width:a.width};(Math.abs(o.height-t.height)>ab||Math.abs(o.left-t.left)>ab||Math.abs(o.top-t.top)>ab||Math.abs(o.width-t.width)>ab)&&n({height:o.height,left:o.left,top:o.top,width:o.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,r]}var c9=Symbol.for("immer-nothing"),o3=Symbol.for("immer-draftable"),Jr=Symbol.for("immer-state");function Wa(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Fi=Object,of=Fi.getPrototypeOf,My="constructor",nx="prototype",T2="configurable",Dy="enumerable",Bb="writable",Zm="value",Ds=e=>!!e&&!!e[Jr];function ro(e){return e?u9(e)||rx(e)||!!e[o3]||!!e[My]?.[o3]||ix(e)||ax(e):!1}var pme=Fi[nx][My].toString(),s3=new WeakMap;function u9(e){if(!e||!aA(e))return!1;const t=of(e);if(t===null||t===Fi[nx])return!0;const n=Fi.hasOwnProperty.call(t,My)&&t[My];if(n===Object)return!0;if(!Cd(n))return!1;let r=s3.get(n);return r===void 0&&(r=Function.toString.call(n),s3.set(n,r)),r===pme}function jp(e,t,n=!0){Op(e)===0?(n?Reflect.ownKeys(e):Fi.keys(e)).forEach(i=>{t(i,e[i],e)}):e.forEach((r,i)=>t(i,r,e))}function Op(e){const t=e[Jr];return t?t.type_:rx(e)?1:ix(e)?2:ax(e)?3:0}var l3=(e,t,n=Op(e))=>n===2?e.has(t):Fi[nx].hasOwnProperty.call(e,t),A2=(e,t,n=Op(e))=>n===2?e.get(t):e[t],Py=(e,t,n,r=Op(e))=>{r===2?e.set(t,n):r===3?e.add(n):e[t]=n};function gme(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var rx=Array.isArray,ix=e=>e instanceof Map,ax=e=>e instanceof Set,aA=e=>typeof e=="object",Cd=e=>typeof e=="function",SS=e=>typeof e=="boolean",vs=e=>e.copy_||e.base_,oA=e=>e.modified_?e.copy_:e.base_;function j2(e,t){if(ix(e))return new Map(e);if(ax(e))return new Set(e);if(rx(e))return Array[nx].slice.call(e);const n=u9(e);if(t===!0||t==="class_only"&&!n){const r=Fi.getOwnPropertyDescriptors(e);delete r[Jr];let i=Reflect.ownKeys(r);for(let a=0;a<i.length;a++){const o=i[a],l=r[o];l[Bb]===!1&&(l[Bb]=!0,l[T2]=!0),(l.get||l.set)&&(r[o]={[T2]:!0,[Bb]:!0,[Dy]:l[Dy],[Zm]:e[o]})}return Fi.create(of(e),r)}else{const r=of(e);if(r!==null&&n)return{...e};const i=Fi.create(r);return Fi.assign(i,e)}}function sA(e,t=!1){return ox(e)||Ds(e)||!ro(e)||(Op(e)>1&&Fi.defineProperties(e,{set:ob,add:ob,clear:ob,delete:ob}),Fi.freeze(e),t&&jp(e,(n,r)=>{sA(r,!0)},!1)),e}function bme(){Wa(2)}var ob={[Zm]:bme};function ox(e){return e===null||!aA(e)?!0:Fi.isFrozen(e)}var Ry="MapSet",O2="Patches",d9={};function sf(e){const t=d9[e];return t||Wa(0,e),t}var yme=e=>!!d9[e],Xm,f9=()=>Xm,vme=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:yme(Ry)?sf(Ry):void 0});function c3(e,t){t&&(e.patchPlugin_=sf(O2),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function N2(e){C2(e),e.drafts_.forEach(xme),e.drafts_=null}function C2(e){e===Xm&&(Xm=e.parent_)}var u3=e=>Xm=vme(Xm,e);function xme(e){const t=e[Jr];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function d3(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];if(e!==void 0&&e!==n){n[Jr].modified_&&(N2(t),Wa(4)),ro(e)&&(e=f3(t,e));const{patchPlugin_:i}=t;i&&i.generateReplacementPatches_(n[Jr].base_,e,t)}else e=f3(t,n);return wme(t,e,!0),N2(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==c9?e:void 0}function f3(e,t){if(ox(t))return t;const n=t[Jr];if(!n)return lA(t,e.handledSet_,e);if(!sx(n,e))return t;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:r}=n;if(r)for(;r.length>0;)r.pop()(e);p9(n,e)}return n.copy_}function wme(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&sA(t,n)}function h9(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var sx=(e,t)=>e.scope_===t,_me=[];function m9(e,t,n,r){const i=vs(e),a=e.type_;if(r!==void 0&&A2(i,r,a)===t){Py(i,r,n,a);return}if(!e.draftLocations_){const l=e.draftLocations_=new Map;jp(i,(u,d)=>{if(Ds(d)){const h=l.get(d)||[];h.push(u),l.set(d,h)}})}const o=e.draftLocations_.get(t)??_me;for(const l of o)Py(i,l,n,a)}function Sme(e,t,n){e.callbacks_.push(function(i){const a=t;if(!a||!sx(a,i))return;i.mapSetPlugin_?.fixSetContents(a);const o=oA(a);m9(e,a.draft_??a,o,n),p9(a,i)})}function p9(e,t){if(e.modified_&&!e.finalized_&&(e.type_===3||(e.assigned_?.size??0)>0)){const{patchPlugin_:r}=t;if(r){const i=r.getPath(e);i&&r.generatePatches_(e,i,t)}h9(e)}}function kme(e,t,n){const{scope_:r}=e;if(Ds(n)){const i=n[Jr];sx(i,r)&&i.callbacks_.push(function(){zb(e);const o=oA(i);m9(e,n,o,t)})}else ro(n)&&e.callbacks_.push(function(){const a=vs(e);A2(a,t,e.type_)===n&&r.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&lA(A2(e.copy_,t,e.type_),r.handledSet_,r)})}function lA(e,t,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||Ds(e)||t.has(e)||!ro(e)||ox(e)||(t.add(e),jp(e,(r,i)=>{if(Ds(i)){const a=i[Jr];if(sx(a,n)){const o=oA(a);Py(e,r,o,e.type_),h9(a)}}else ro(i)&&lA(i,t,n)})),e}function Eme(e,t){const n=rx(e),r={type_:n?1:0,scope_:t?t.scope_:f9(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let i=r,a=cA;n&&(i=[r],a=Jm);const{revoke:o,proxy:l}=Proxy.revocable(i,a);return r.draft_=l,r.revoke_=o,[l,r]}var cA={get(e,t){if(t===Jr)return e;const n=vs(e);if(!l3(n,t,e.type_))return Tme(e,n,t);const r=n[t];if(e.finalized_||!ro(r))return r;if(r===kS(e.base_,t)){zb(e);const i=e.type_===1?+t:t,a=D2(e.scope_,r,e,i);return e.copy_[i]=a}return r},has(e,t){return t in vs(e)},ownKeys(e){return Reflect.ownKeys(vs(e))},set(e,t,n){const r=g9(vs(e),t);if(r?.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=kS(vs(e),t),a=i?.[Jr];if(a&&a.base_===n)return e.copy_[t]=n,e.assigned_.set(t,!1),!0;if(gme(n,i)&&(n!==void 0||l3(e.base_,t,e.type_)))return!0;zb(e),M2(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_.set(t,!0),kme(e,t,n)),!0},deleteProperty(e,t){return zb(e),kS(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),M2(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=vs(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{[Bb]:!0,[T2]:e.type_!==1||t!=="length",[Dy]:r[Dy],[Zm]:n[t]}},defineProperty(){Wa(11)},getPrototypeOf(e){return of(e.base_)},setPrototypeOf(){Wa(12)}},Jm={};jp(cA,(e,t)=>{Jm[e]=function(){const n=arguments;return n[0]=n[0][0],t.apply(this,n)}});Jm.deleteProperty=function(e,t){return Jm.set.call(this,e,t,void 0)};Jm.set=function(e,t,n){return cA.set.call(this,e[0],t,n,e[0])};function kS(e,t){const n=e[Jr];return(n?vs(n):e)[t]}function Tme(e,t,n){const r=g9(t,n);return r?Zm in r?r[Zm]:r.get?.call(e.draft_):void 0}function g9(e,t){if(!(t in e))return;let n=of(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=of(n)}}function M2(e){e.modified_||(e.modified_=!0,e.parent_&&M2(e.parent_))}function zb(e){e.copy_||(e.assigned_=new Map,e.copy_=j2(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Ame=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(n,r,i)=>{if(Cd(n)&&!Cd(r)){const o=r;r=n;const l=this;return function(d=o,...h){return l.produce(d,p=>r.call(this,p,...h))}}Cd(r)||Wa(6),i!==void 0&&!Cd(i)&&Wa(7);let a;if(ro(n)){const o=u3(this),l=D2(o,n,void 0);let u=!0;try{a=r(l),u=!1}finally{u?N2(o):C2(o)}return c3(o,i),d3(a,o)}else if(!n||!aA(n)){if(a=r(n),a===void 0&&(a=n),a===c9&&(a=void 0),this.autoFreeze_&&sA(a,!0),i){const o=[],l=[];sf(O2).generateReplacementPatches_(n,a,{patches_:o,inversePatches_:l}),i(o,l)}return a}else Wa(1,n)},this.produceWithPatches=(n,r)=>{if(Cd(n))return(l,...u)=>this.produceWithPatches(l,d=>n(d,...u));let i,a;return[this.produce(n,r,(l,u)=>{i=l,a=u}),i,a]},SS(t?.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),SS(t?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),SS(t?.useStrictIteration)&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){ro(t)||Wa(8),Ds(t)&&(t=Ja(t));const n=u3(this),r=D2(n,t,void 0);return r[Jr].isManual_=!0,C2(n),r}finishDraft(t,n){const r=t&&t[Jr];(!r||!r.isManual_)&&Wa(9);const{scope_:i}=r;return c3(i,n),d3(void 0,i)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,n){let r;for(r=n.length-1;r>=0;r--){const a=n[r];if(a.path.length===0&&a.op==="replace"){t=a.value;break}}r>-1&&(n=n.slice(r+1));const i=sf(O2).applyPatches_;return Ds(t)?i(t,n):this.produce(t,a=>i(a,n))}};function D2(e,t,n,r){const[i,a]=ix(t)?sf(Ry).proxyMap_(t,n):ax(t)?sf(Ry).proxySet_(t,n):Eme(t,n);return(n?.scope_??f9()).drafts_.push(i),a.callbacks_=n?.callbacks_??[],a.key_=r,n&&r!==void 0?Sme(n,a,r):a.callbacks_.push(function(u){u.mapSetPlugin_?.fixSetContents(a);const{patchPlugin_:d}=u;a.modified_&&d&&d.generatePatches_(a,[],u)}),i}function Ja(e){return Ds(e)||Wa(10,e),b9(e)}function b9(e){if(!ro(e)||ox(e))return e;const t=e[Jr];let n,r=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=j2(e,t.scope_.immer_.useStrictShallowCopy_),r=t.scope_.immer_.shouldUseStrictIteration()}else n=j2(e,!0);return jp(n,(i,a)=>{Py(n,i,b9(a))},r),t&&(t.finalized_=!1),n}var jme=new Ame,y9=jme.produce;function v9(e){return({dispatch:n,getState:r})=>i=>a=>typeof a=="function"?a(n,r,e):i(a)}var Ome=v9(),Nme=v9,Cme=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Lm:Lm.apply(null,arguments)};function ka(e,t){function n(...r){if(t){let i=t(...r);if(!i)throw new Error(qi(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>FB(r)&&r.type===e,n}var x9=class xm extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,xm.prototype)}static get[Symbol.species](){return xm}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new xm(...t[0].concat(this)):new xm(...t.concat(this))}};function h3(e){return ro(e)?y9(e,()=>{}):e}function sb(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function Mme(e){return typeof e=="boolean"}var Dme=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:a=!0}=t??{};let o=new x9;return n&&(Mme(n)?o.push(Ome):o.push(Nme(n.extraArgument))),o},w9="RTK_autoBatch",un=()=>e=>({payload:e,meta:{[w9]:!0}}),m3=e=>t=>{setTimeout(t,e)},_9=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,a=!1,o=!1;const l=new Set,u=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:m3(10):e.type==="callback"?e.queueNotification:m3(e.timeout),d=()=>{o=!1,a&&(a=!1,l.forEach(h=>h()))};return Object.assign({},r,{subscribe(h){const p=()=>i&&h(),b=r.subscribe(p);return l.add(h),()=>{b(),l.delete(h)}},dispatch(h){try{return i=!h?.meta?.[w9],a=!i,a&&(o||(o=!0,u(d))),r.dispatch(h)}finally{i=!0}}})},Pme=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new x9(e);return r&&i.push(_9(typeof r=="object"?r:void 0)),i};function Rme(e){const t=Dme(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:a=void 0,enhancers:o=void 0}=e||{};let l;if(typeof n=="function")l=n;else if(KE(n))l=zB(n);else throw new Error(qi(1));let u;typeof r=="function"?u=r(t):u=t();let d=Lm;i&&(d=Cme({trace:!1,...typeof i=="object"&&i}));const h=UB(...u),p=Pme(h);let b=typeof o=="function"?o(p):p();const y=d(...b);return WE(l,a,y)}function S9(e){const t={},n=[];let r;const i={addCase(a,o){const l=typeof a=="string"?a:a.type;if(!l)throw new Error(qi(28));if(l in t)throw new Error(qi(29));return t[l]=o,i},addAsyncThunk(a,o){return o.pending&&(t[a.pending.type]=o.pending),o.rejected&&(t[a.rejected.type]=o.rejected),o.fulfilled&&(t[a.fulfilled.type]=o.fulfilled),o.settled&&n.push({matcher:a.settled,reducer:o.settled}),i},addMatcher(a,o){return n.push({matcher:a,reducer:o}),i},addDefaultCase(a){return r=a,i}};return e(i),[t,n,r]}function Lme(e){return typeof e=="function"}function Ime(e,t){let[n,r,i]=S9(t),a;if(Lme(e))a=()=>h3(e());else{const l=h3(e);a=()=>l}function o(l=a(),u){let d=[n[u.type],...r.filter(({matcher:h})=>h(u)).map(({reducer:h})=>h)];return d.filter(h=>!!h).length===0&&(d=[i]),d.reduce((h,p)=>{if(p)if(Ds(h)){const y=p(h,u);return y===void 0?h:y}else{if(ro(h))return y9(h,b=>p(b,u));{const b=p(h,u);if(b===void 0){if(h===null)return h;throw Error("A case reducer on a non-draftable value must not return undefined")}return b}}return h},l)}return o.getInitialState=a,o}var $me="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Bme=(e=21)=>{let t="",n=e;for(;n--;)t+=$me[Math.random()*64|0];return t},zme=Symbol.for("rtk-slice-createasyncthunk");function Ume(e,t){return`${e}/${t}`}function Fme({creators:e}={}){const t=e?.asyncThunk?.[zme];return function(r){const{name:i,reducerPath:a=i}=r;if(!i)throw new Error(qi(11));const o=(typeof r.reducers=="function"?r.reducers(Gme()):r.reducers)||{},l=Object.keys(o),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(j,C){const D=typeof j=="string"?j:j.type;if(!D)throw new Error(qi(12));if(D in u.sliceCaseReducersByType)throw new Error(qi(13));return u.sliceCaseReducersByType[D]=C,d},addMatcher(j,C){return u.sliceMatchers.push({matcher:j,reducer:C}),d},exposeAction(j,C){return u.actionCreators[j]=C,d},exposeCaseReducer(j,C){return u.sliceCaseReducersByName[j]=C,d}};l.forEach(j=>{const C=o[j],D={reducerName:j,type:Ume(i,j),createNotation:typeof r.reducers=="function"};Yme(C)?Wme(D,C,d,t):qme(D,C,d)});function h(){const[j={},C=[],D=void 0]=typeof r.extraReducers=="function"?S9(r.extraReducers):[r.extraReducers],P={...j,...u.sliceCaseReducersByType};return Ime(r.initialState,$=>{for(let U in P)$.addCase(U,P[U]);for(let U of u.sliceMatchers)$.addMatcher(U.matcher,U.reducer);for(let U of C)$.addMatcher(U.matcher,U.reducer);D&&$.addDefaultCase(D)})}const p=j=>j,b=new Map,y=new WeakMap;let S;function _(j,C){return S||(S=h()),S(j,C)}function k(){return S||(S=h()),S.getInitialState()}function A(j,C=!1){function D($){let U=$[j];return typeof U>"u"&&C&&(U=sb(y,D,k)),U}function P($=p){const U=sb(b,C,()=>new WeakMap);return sb(U,$,()=>{const Y={};for(const[K,F]of Object.entries(r.selectors??{}))Y[K]=Hme(F,$,()=>sb(y,$,k),C);return Y})}return{reducerPath:j,getSelectors:P,get selectors(){return P(D)},selectSlice:D}}const N={name:i,reducer:_,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:k,...A(a),injectInto(j,{reducerPath:C,...D}={}){const P=C??a;return j.inject({reducerPath:P,reducer:_},D),{...N,...A(P,!0)}}};return N}}function Hme(e,t,n,r){function i(a,...o){let l=t(a);return typeof l>"u"&&r&&(l=n()),e(l,...o)}return i.unwrapped=e,i}var Si=Fme();function Gme(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function qme({type:e,reducerName:t,createNotation:n},r,i){let a,o;if("reducer"in r){if(n&&!Kme(r))throw new Error(qi(17));a=r.reducer,o=r.prepare}else a=r;i.addCase(e,a).exposeCaseReducer(t,a).exposeAction(t,o?ka(e,o):ka(e))}function Yme(e){return e._reducerDefinitionType==="asyncThunk"}function Kme(e){return e._reducerDefinitionType==="reducerWithPrepare"}function Wme({type:e,reducerName:t},n,r,i){if(!i)throw new Error(qi(18));const{payloadCreator:a,fulfilled:o,pending:l,rejected:u,settled:d,options:h}=n,p=i(e,a,h);r.exposeAction(t,p),o&&r.addCase(p.fulfilled,o),l&&r.addCase(p.pending,l),u&&r.addCase(p.rejected,u),d&&r.addMatcher(p.settled,d),r.exposeCaseReducer(t,{fulfilled:o||lb,pending:l||lb,rejected:u||lb,settled:d||lb})}function lb(){}var Vme="task",k9="listener",E9="completed",uA="cancelled",Zme=`task-${uA}`,Xme=`task-${E9}`,P2=`${k9}-${uA}`,Jme=`${k9}-${E9}`,lx=class{constructor(e){this.code=e,this.message=`${Vme} ${uA} (reason: ${e})`}name="TaskAbortError";message},dA=(e,t)=>{if(typeof e!="function")throw new TypeError(qi(32))},Ly=()=>{},T9=(e,t=Ly)=>(e.catch(t),e),A9=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),uu=e=>{if(e.aborted)throw new lx(e.reason)};function j9(e,t){let n=Ly;return new Promise((r,i)=>{const a=()=>i(new lx(e.reason));if(e.aborted){a();return}n=A9(e,a),t.finally(()=>n()).then(r,i)}).finally(()=>{n=Ly})}var Qme=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(n){return{status:n instanceof lx?"cancelled":"rejected",error:n}}finally{t?.()}},Iy=e=>t=>T9(j9(e,t).then(n=>(uu(e),n))),O9=e=>{const t=Iy(e);return n=>t(new Promise(r=>setTimeout(r,n)))},{assign:qd}=Object,p3={},cx="listenerMiddleware",epe=(e,t)=>{const n=r=>A9(e,()=>r.abort(e.reason));return(r,i)=>{dA(r);const a=new AbortController;n(a);const o=Qme(async()=>{uu(e),uu(a.signal);const l=await r({pause:Iy(a.signal),delay:O9(a.signal),signal:a.signal});return uu(a.signal),l},()=>a.abort(Xme));return i?.autoJoin&&t.push(o.catch(Ly)),{result:Iy(e)(o),cancel(){a.abort(Zme)}}}},tpe=(e,t)=>{const n=async(r,i)=>{uu(t);let a=()=>{};const l=[new Promise((u,d)=>{let h=e({predicate:r,effect:(p,b)=>{b.unsubscribe(),u([p,b.getState(),b.getOriginalState()])}});a=()=>{h(),d()}})];i!=null&&l.push(new Promise(u=>setTimeout(u,i,null)));try{const u=await j9(t,Promise.race(l));return uu(t),u}finally{a()}};return(r,i)=>T9(n(r,i))},N9=e=>{let{type:t,actionCreator:n,matcher:r,predicate:i,effect:a}=e;if(t)i=ka(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(qi(21));return dA(a),{predicate:i,type:t,effect:a}},C9=qd(e=>{const{type:t,predicate:n,effect:r}=N9(e);return{id:Bme(),effect:r,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(qi(22))}}},{withTypes:()=>C9}),g3=(e,t)=>{const{type:n,effect:r,predicate:i}=N9(t);return Array.from(e.values()).find(a=>(typeof n=="string"?a.type===n:a.predicate===i)&&a.effect===r)},R2=e=>{e.pending.forEach(t=>{t.abort(P2)})},npe=(e,t)=>()=>{for(const n of t.keys())R2(n);e.clear()},b3=(e,t,n)=>{try{e(t,n)}catch(r){setTimeout(()=>{throw r},0)}},M9=qd(ka(`${cx}/add`),{withTypes:()=>M9}),rpe=ka(`${cx}/removeAll`),D9=qd(ka(`${cx}/remove`),{withTypes:()=>D9}),ipe=(...e)=>{console.error(`${cx}/error`,...e)},Np=(e={})=>{const t=new Map,n=new Map,r=y=>{const S=n.get(y)??0;n.set(y,S+1)},i=y=>{const S=n.get(y)??1;S===1?n.delete(y):n.set(y,S-1)},{extra:a,onError:o=ipe}=e;dA(o);const l=y=>(y.unsubscribe=()=>t.delete(y.id),t.set(y.id,y),S=>{y.unsubscribe(),S?.cancelActive&&R2(y)}),u=y=>{const S=g3(t,y)??C9(y);return l(S)};qd(u,{withTypes:()=>u});const d=y=>{const S=g3(t,y);return S&&(S.unsubscribe(),y.cancelActive&&R2(S)),!!S};qd(d,{withTypes:()=>d});const h=async(y,S,_,k)=>{const A=new AbortController,N=tpe(u,A.signal),j=[];try{y.pending.add(A),r(y),await Promise.resolve(y.effect(S,qd({},_,{getOriginalState:k,condition:(C,D)=>N(C,D).then(Boolean),take:N,delay:O9(A.signal),pause:Iy(A.signal),extra:a,signal:A.signal,fork:epe(A.signal,j),unsubscribe:y.unsubscribe,subscribe:()=>{t.set(y.id,y)},cancelActiveListeners:()=>{y.pending.forEach((C,D,P)=>{C!==A&&(C.abort(P2),P.delete(C))})},cancel:()=>{A.abort(P2),y.pending.delete(A)},throwIfCancelled:()=>{uu(A.signal)}})))}catch(C){C instanceof lx||b3(o,C,{raisedBy:"effect"})}finally{await Promise.all(j),A.abort(Jme),i(y),y.pending.delete(A)}},p=npe(t,n);return{middleware:y=>S=>_=>{if(!FB(_))return S(_);if(M9.match(_))return u(_.payload);if(rpe.match(_)){p();return}if(D9.match(_))return d(_.payload);let k=y.getState();const A=()=>{if(k===p3)throw new Error(qi(23));return k};let N;try{if(N=S(_),t.size>0){const j=y.getState(),C=Array.from(t.values());for(const D of C){let P=!1;try{P=D.predicate(_,j,k)}catch($){P=!1,b3(o,$,{raisedBy:"predicate"})}P&&h(D,_,y,A)}}}finally{k=p3}return N},startListening:u,stopListening:d,clearListeners:p}};function qi(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var ape={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},P9=Si({name:"chartLayout",initialState:ape,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var n,r,i,a;e.margin.top=(n=t.payload.top)!==null&&n!==void 0?n:0,e.margin.right=(r=t.payload.right)!==null&&r!==void 0?r:0,e.margin.bottom=(i=t.payload.bottom)!==null&&i!==void 0?i:0,e.margin.left=(a=t.payload.left)!==null&&a!==void 0?a:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:ope,setLayout:spe,setChartSize:lpe,setScale:cpe}=P9.actions,upe=P9.reducer;function R9(e,t,n){return Array.isArray(e)&&e&&t+n!==0?e.slice(t,n+1):e}function y3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ld(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?y3(Object(n),!0).forEach(function(r){dpe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y3(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function dpe(e,t,n){return(t=fpe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fpe(e){var t=hpe(e,"string");return typeof t=="symbol"?t:t+""}function hpe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ir(e,t,n){return Ar(e)||Ar(t)?n:$o(t)?ex(e,t,n):typeof t=="function"?t(e):n}var mpe=(e,t,n)=>{if(t&&n){var{width:r,height:i}=n,{align:a,verticalAlign:o,layout:l}=t;if((l==="vertical"||l==="horizontal"&&o==="middle")&&a!=="center"&&Qe(e[a]))return Ld(Ld({},e),{},{[a]:e[a]+(r||0)});if((l==="horizontal"||l==="vertical"&&a==="center")&&o!=="middle"&&Qe(e[o]))return Ld(Ld({},e),{},{[o]:e[o]+(i||0)})}return e},Bs=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",L9=(e,t,n,r)=>{if(r)return e.map(l=>l.coordinate);var i,a,o=e.map(l=>(l.coordinate===t&&(i=!0),l.coordinate===n&&(a=!0),l.coordinate));return i||o.push(t),a||o.push(n),o},I9=(e,t,n)=>{if(!e)return null;var{duplicateDomain:r,type:i,range:a,scale:o,realScaleType:l,isCategorical:u,categoricalDomain:d,tickCount:h,ticks:p,niceTicks:b,axisType:y}=e;if(!o)return null;var S=l==="scaleBand"&&o.bandwidth?o.bandwidth()/2:2,_=i==="category"&&o.bandwidth?o.bandwidth()/S:0;if(_=y==="angleAxis"&&a&&a.length>=2?ba(a[0]-a[1])*2*_:_,p||b){var k=(p||b||[]).map((A,N)=>{var j=r?r.indexOf(A):A;return{coordinate:o(j)+_,value:A,offset:_,index:N}});return k.filter(A=>!no(A.coordinate))}return u&&d?d.map((A,N)=>({coordinate:o(A)+_,value:A,index:N,offset:_})):o.ticks&&h!=null?o.ticks(h).map((A,N)=>({coordinate:o(A)+_,value:A,offset:_,index:N})):o.domain().map((A,N)=>({coordinate:o(A)+_,value:r?r[A]:A,index:N,offset:_}))},v3=1e-4,ppe=e=>{var t=e.domain();if(!(!t||t.length<=2)){var n=t.length,r=e.range(),i=Math.min(r[0],r[1])-v3,a=Math.max(r[0],r[1])+v3,o=e(t[0]),l=e(t[n-1]);(o<i||o>a||l<i||l>a)&&e.domain([t[0],t[n-1]])}},gpe=e=>{var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var i=0,a=0,o=0;o<t;++o){var l=no(e[o][n][1])?e[o][n][0]:e[o][n][1];l>=0?(e[o][n][0]=i,e[o][n][1]=i+l,i=e[o][n][1]):(e[o][n][0]=a,e[o][n][1]=a+l,a=e[o][n][1])}},bpe=e=>{var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var i=0,a=0;a<t;++a){var o=no(e[a][n][1])?e[a][n][0]:e[a][n][1];o>=0?(e[a][n][0]=i,e[a][n][1]=i+o,i=e[a][n][1]):(e[a][n][0]=0,e[a][n][1]=0)}},ype={sign:gpe,expand:ohe,none:af,silhouette:she,wiggle:lhe,positive:bpe},vpe=(e,t,n)=>{var r=ype[n],i=ahe().keys(t).value((a,o)=>Number(Ir(a,o,0))).order(E2).offset(r);return i(e)};function xpe(e){return e==null?void 0:String(e)}function x3(e){var{axis:t,ticks:n,bandSize:r,entry:i,index:a,dataKey:o}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Ar(i[t.dataKey])){var l=W7(n,"value",i[t.dataKey]);if(l)return l.coordinate+r/2}return n[a]?n[a].coordinate+r/2:null}var u=Ir(i,Ar(o)?t.dataKey:o);return Ar(u)?null:t.scale(u)}var wpe=e=>{var t=e.flat(2).filter(Qe);return[Math.min(...t),Math.max(...t)]},_pe=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],Spe=(e,t,n)=>{if(e!=null)return _pe(Object.keys(e).reduce((r,i)=>{var a=e[i],{stackedData:o}=a,l=o.reduce((u,d)=>{var h=R9(d,t,n),p=wpe(h);return[Math.min(u[0],p[0]),Math.max(u[1],p[1])]},[1/0,-1/0]);return[Math.min(l[0],r[0]),Math.max(l[1],r[1])]},[1/0,-1/0]))},w3=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,_3=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,$y=(e,t,n)=>{if(e&&e.scale&&e.scale.bandwidth){var r=e.scale.bandwidth();if(!n||r>0)return r}if(e&&t&&t.length>=2){for(var i=tx(t,h=>h.coordinate),a=1/0,o=1,l=i.length;o<l;o++){var u=i[o],d=i[o-1];a=Math.min((u.coordinate||0)-(d.coordinate||0),a)}return a===1/0?0:a}return n?void 0:0};function S3(e){var{tooltipEntrySettings:t,dataKey:n,payload:r,value:i,name:a}=e;return Ld(Ld({},t),{},{dataKey:n,payload:r,value:i,name:a})}function $9(e,t){if(e)return String(e);if(typeof t=="string")return t}var kpe=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},Epe=(e,t)=>t==="centric"?e.angle:e.radius,zs=e=>e.layout.width,Us=e=>e.layout.height,Tpe=e=>e.layout.scale,B9=e=>e.layout.margin,ux=xe(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),dx=xe(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),Ape="data-recharts-item-index",jpe="data-recharts-item-data-key",Cp=60;function k3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function cb(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?k3(Object(n),!0).forEach(function(r){Ope(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k3(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ope(e,t,n){return(t=Npe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Npe(e){var t=Cpe(e,"string");return typeof t=="symbol"?t:t+""}function Cpe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Mpe=e=>e.brush.height;function Dpe(e){var t=dx(e);return t.reduce((n,r)=>{if(r.orientation==="left"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:Cp;return n+i}return n},0)}function Ppe(e){var t=dx(e);return t.reduce((n,r)=>{if(r.orientation==="right"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:Cp;return n+i}return n},0)}function Rpe(e){var t=ux(e);return t.reduce((n,r)=>r.orientation==="top"&&!r.mirror&&!r.hide?n+r.height:n,0)}function Lpe(e){var t=ux(e);return t.reduce((n,r)=>r.orientation==="bottom"&&!r.mirror&&!r.hide?n+r.height:n,0)}var Nr=xe([zs,Us,B9,Mpe,Dpe,Ppe,Rpe,Lpe,l9,fme],(e,t,n,r,i,a,o,l,u,d)=>{var h={left:(n.left||0)+i,right:(n.right||0)+a},p={top:(n.top||0)+o,bottom:(n.bottom||0)+l},b=cb(cb({},p),h),y=b.bottom;b.bottom+=r,b=mpe(b,u,d);var S=e-b.left-b.right,_=t-b.top-b.bottom;return cb(cb({brushBottom:y},b),{},{width:Math.max(S,0),height:Math.max(_,0)})}),Ipe=xe(Nr,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),z9=xe(zs,Us,(e,t)=>({x:0,y:0,width:e,height:t})),$pe=w.createContext(null),ki=()=>w.useContext($pe)!=null,fx=e=>e.brush,hx=xe([fx,Nr,B9],(e,t,n)=>({height:e.height,x:Qe(e.x)?e.x:t.left,y:Qe(e.y)?e.y:t.top+t.height+t.brushBottom-(n?.bottom||0),width:Qe(e.width)?e.width:t.width})),ES={},TS={},AS={},E3;function Bpe(){return E3||(E3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r,{signal:i,edges:a}={}){let o,l=null;const u=a!=null&&a.includes("leading"),d=a==null||a.includes("trailing"),h=()=>{l!==null&&(n.apply(o,l),o=void 0,l=null)},p=()=>{d&&h(),_()};let b=null;const y=()=>{b!=null&&clearTimeout(b),b=setTimeout(()=>{b=null,p()},r)},S=()=>{b!==null&&(clearTimeout(b),b=null)},_=()=>{S(),o=void 0,l=null},k=()=>{h()},A=function(...N){if(i?.aborted)return;o=this,l=N;const j=b==null;y(),u&&j&&h()};return A.schedule=y,A.cancel=_,A.flush=k,i?.addEventListener("abort",_,{once:!0}),A}e.debounce=t})(AS)),AS}var T3;function zpe(){return T3||(T3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Bpe();function n(r,i=0,a={}){typeof a!="object"&&(a={});const{leading:o=!1,trailing:l=!0,maxWait:u}=a,d=Array(2);o&&(d[0]="leading"),l&&(d[1]="trailing");let h,p=null;const b=t.debounce(function(..._){h=r.apply(this,_),p=null},i,{edges:d}),y=function(..._){return u!=null&&(p===null&&(p=Date.now()),Date.now()-p>=u)?(h=r.apply(this,_),p=Date.now(),b.cancel(),b.schedule(),h):(b.apply(this,_),h)},S=()=>(b.flush(),h);return y.cancel=b.cancel,y.flush=S,y}e.debounce=n})(TS)),TS}var A3;function Upe(){return A3||(A3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=zpe();function n(r,i=0,a={}){const{leading:o=!0,trailing:l=!0}=a;return t.debounce(r,i,{leading:o,maxWait:i,trailing:l})}e.throttle=n})(ES)),ES}var jS,j3;function Fpe(){return j3||(j3=1,jS=Upe().throttle),jS}var Hpe=Fpe();const Gpe=wi(Hpe);var By=function(t,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];if(typeof console<"u"&&console.warn&&(n===void 0&&console.warn("LogUtils requires an error message argument"),!t))if(n===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var o=0;console.warn(n.replace(/%s/g,()=>i[o++]))}},U9=(e,t,n)=>{var{width:r="100%",height:i="100%",aspect:a,maxHeight:o}=n,l=Ms(r)?e:Number(r),u=Ms(i)?t:Number(i);return a&&a>0&&(l?u=l/a:u&&(l=u*a),o&&u!=null&&u>o&&(u=o)),{calculatedWidth:l,calculatedHeight:u}},qpe={width:0,height:0,overflow:"visible"},Ype={width:0,overflowX:"visible"},Kpe={height:0,overflowY:"visible"},Wpe={},Vpe=e=>{var{width:t,height:n}=e,r=Ms(t),i=Ms(n);return r&&i?qpe:r?Ype:i?Kpe:Wpe};function Zpe(e){var{width:t,height:n,aspect:r}=e,i=t,a=n;return i===void 0&&a===void 0?(i="100%",a="100%"):i===void 0?i=r&&r>0?void 0:"100%":a===void 0&&(a=r&&r>0?void 0:"100%"),{width:i,height:a}}function jn(e){return Number.isFinite(e)}function Bo(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function L2(){return L2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},L2.apply(null,arguments)}function O3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function N3(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?O3(Object(n),!0).forEach(function(r){Xpe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O3(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Xpe(e,t,n){return(t=Jpe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Jpe(e){var t=Qpe(e,"string");return typeof t=="symbol"?t:t+""}function Qpe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var F9=w.createContext({width:-1,height:-1});function ege(e){return Bo(e.width)&&Bo(e.height)}function H9(e){var{children:t,width:n,height:r}=e,i=w.useMemo(()=>({width:n,height:r}),[n,r]);return ege(i)?w.createElement(F9.Provider,{value:i},t):null}var fA=()=>w.useContext(F9),tge=w.forwardRef((e,t)=>{var{aspect:n,initialDimension:r={width:-1,height:-1},width:i,height:a,minWidth:o=0,minHeight:l,maxHeight:u,children:d,debounce:h=0,id:p,className:b,onResize:y,style:S={}}=e,_=w.useRef(null),k=w.useRef();k.current=y,w.useImperativeHandle(t,()=>_.current);var[A,N]=w.useState({containerWidth:r.width,containerHeight:r.height}),j=w.useCallback((U,Y)=>{N(K=>{var F=Math.round(U),z=Math.round(Y);return K.containerWidth===F&&K.containerHeight===z?K:{containerWidth:F,containerHeight:z}})},[]);w.useEffect(()=>{if(_.current==null||typeof ResizeObserver>"u")return Ap;var U=z=>{var W,{width:X,height:Z}=z[0].contentRect;j(X,Z),(W=k.current)===null||W===void 0||W.call(k,X,Z)};h>0&&(U=Gpe(U,h,{trailing:!0,leading:!1}));var Y=new ResizeObserver(U),{width:K,height:F}=_.current.getBoundingClientRect();return j(K,F),Y.observe(_.current),()=>{Y.disconnect()}},[j,h]);var{containerWidth:C,containerHeight:D}=A;By(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:P,calculatedHeight:$}=U9(C,D,{width:i,height:a,aspect:n,maxHeight:u});return By(P!=null&&P>0||$!=null&&$>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,P,$,i,a,o,l,n),w.createElement("div",{id:p?"".concat(p):void 0,className:rn("recharts-responsive-container",b),style:N3(N3({},S),{},{width:i,height:a,minWidth:o,minHeight:l,maxHeight:u}),ref:_},w.createElement("div",{style:Vpe({width:i,height:a})},w.createElement(H9,{width:P,height:$},d)))}),nge=w.forwardRef((e,t)=>{var n=fA();if(Bo(n.width)&&Bo(n.height))return e.children;var{width:r,height:i}=Zpe({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:a,calculatedHeight:o}=U9(void 0,void 0,{width:r,height:i,aspect:e.aspect,maxHeight:e.maxHeight});return Qe(a)&&Qe(o)?w.createElement(H9,{width:a,height:o},e.children):w.createElement(tge,L2({},e,{width:r,height:i,ref:t}))});function G9(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var mx=()=>{var e,t=ki(),n=tt(Ipe),r=tt(hx),i=(e=tt(fx))===null||e===void 0?void 0:e.padding;return!t||!r||!i?n:{width:r.width-i.left-i.right,height:r.height-i.top-i.bottom,x:i.left,y:i.top}},rge={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},q9=()=>{var e;return(e=tt(Nr))!==null&&e!==void 0?e:rge},Y9=()=>tt(zs),K9=()=>tt(Us),Jt=e=>e.layout.layoutType,Mp=()=>tt(Jt),ige=()=>{var e=Mp();if(e==="horizontal"||e==="vertical")return e},age=()=>{var e=Mp();return e!==void 0},px=e=>{var t=pr(),n=ki(),{width:r,height:i}=e,a=fA(),o=r,l=i;return a&&(o=a.width>0?a.width:r,l=a.height>0?a.height:i),w.useEffect(()=>{!n&&Bo(o)&&Bo(l)&&t(lpe({width:o,height:l}))},[t,n,o,l]),null},W9=Symbol.for("immer-nothing"),C3=Symbol.for("immer-draftable"),Ki=Symbol.for("immer-state");function Va(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Qm=Object.getPrototypeOf;function lf(e){return!!e&&!!e[Ki]}function bu(e){return e?V9(e)||Array.isArray(e)||!!e[C3]||!!e.constructor?.[C3]||Dp(e)||bx(e):!1}var oge=Object.prototype.constructor.toString(),M3=new WeakMap;function V9(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(n===Object)return!0;if(typeof n!="function")return!1;let r=M3.get(n);return r===void 0&&(r=Function.toString.call(n),M3.set(n,r)),r===oge}function zy(e,t,n=!0){gx(e)===0?(n?Reflect.ownKeys(e):Object.keys(e)).forEach(i=>{t(i,e[i],e)}):e.forEach((r,i)=>t(i,r,e))}function gx(e){const t=e[Ki];return t?t.type_:Array.isArray(e)?1:Dp(e)?2:bx(e)?3:0}function I2(e,t){return gx(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Z9(e,t,n){const r=gx(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function sge(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Dp(e){return e instanceof Map}function bx(e){return e instanceof Set}function Xc(e){return e.copy_||e.base_}function $2(e,t){if(Dp(e))return new Map(e);if(bx(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=V9(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[Ki];let i=Reflect.ownKeys(r);for(let a=0;a<i.length;a++){const o=i[a],l=r[o];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(r[o]={configurable:!0,writable:!0,enumerable:l.enumerable,value:e[o]})}return Object.create(Qm(e),r)}else{const r=Qm(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function hA(e,t=!1){return yx(e)||lf(e)||!bu(e)||(gx(e)>1&&Object.defineProperties(e,{set:ub,add:ub,clear:ub,delete:ub}),Object.freeze(e),t&&Object.values(e).forEach(n=>hA(n,!0))),e}function lge(){Va(2)}var ub={value:lge};function yx(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var cge={};function yu(e){const t=cge[e];return t||Va(0,e),t}var ep;function X9(){return ep}function uge(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function D3(e,t){t&&(yu("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function B2(e){z2(e),e.drafts_.forEach(dge),e.drafts_=null}function z2(e){e===ep&&(ep=e.parent_)}function P3(e){return ep=uge(ep,e)}function dge(e){const t=e[Ki];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function R3(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[Ki].modified_&&(B2(t),Va(4)),bu(e)&&(e=Uy(t,e),t.parent_||Fy(t,e)),t.patches_&&yu("Patches").generateReplacementPatches_(n[Ki].base_,e,t.patches_,t.inversePatches_)):e=Uy(t,n,[]),B2(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==W9?e:void 0}function Uy(e,t,n){if(yx(t))return t;const r=e.immer_.shouldUseStrictIteration(),i=t[Ki];if(!i)return zy(t,(a,o)=>L3(e,i,t,a,o,n),r),t;if(i.scope_!==e)return t;if(!i.modified_)return Fy(e,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const a=i.copy_;let o=a,l=!1;i.type_===3&&(o=new Set(a),a.clear(),l=!0),zy(o,(u,d)=>L3(e,i,a,u,d,n,l),r),Fy(e,a,!1),n&&e.patches_&&yu("Patches").generatePatches_(i,n,e.patches_,e.inversePatches_)}return i.copy_}function L3(e,t,n,r,i,a,o){if(i==null||typeof i!="object"&&!o)return;const l=yx(i);if(!(l&&!o)){if(lf(i)){const u=a&&t&&t.type_!==3&&!I2(t.assigned_,r)?a.concat(r):void 0,d=Uy(e,i,u);if(Z9(n,r,d),lf(d))e.canAutoFreeze_=!1;else return}else o&&n.add(i);if(bu(i)&&!l){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[r]===i&&l)return;Uy(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&(Dp(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&Fy(e,i)}}}function Fy(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&hA(t,n)}function fge(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:X9(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,a=mA;n&&(i=[r],a=tp);const{revoke:o,proxy:l}=Proxy.revocable(i,a);return r.draft_=l,r.revoke_=o,l}var mA={get(e,t){if(t===Ki)return e;const n=Xc(e);if(!I2(n,t))return hge(e,n,t);const r=n[t];return e.finalized_||!bu(r)?r:r===OS(e.base_,t)?(NS(e),e.copy_[t]=F2(r,e)):r},has(e,t){return t in Xc(e)},ownKeys(e){return Reflect.ownKeys(Xc(e))},set(e,t,n){const r=J9(Xc(e),t);if(r?.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=OS(Xc(e),t),a=i?.[Ki];if(a&&a.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(sge(n,i)&&(n!==void 0||I2(e.base_,t)))return!0;NS(e),U2(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return OS(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,NS(e),U2(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Xc(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){Va(11)},getPrototypeOf(e){return Qm(e.base_)},setPrototypeOf(){Va(12)}},tp={};zy(mA,(e,t)=>{tp[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});tp.deleteProperty=function(e,t){return tp.set.call(this,e,t,void 0)};tp.set=function(e,t,n){return mA.set.call(this,e[0],t,n,e[0])};function OS(e,t){const n=e[Ki];return(n?Xc(n):e)[t]}function hge(e,t,n){const r=J9(t,n);return r?"value"in r?r.value:r.get?.call(e.draft_):void 0}function J9(e,t){if(!(t in e))return;let n=Qm(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Qm(n)}}function U2(e){e.modified_||(e.modified_=!0,e.parent_&&U2(e.parent_))}function NS(e){e.copy_||(e.copy_=$2(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var mge=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const a=n;n=t;const o=this;return function(u=a,...d){return o.produce(u,h=>n.call(this,h,...d))}}typeof n!="function"&&Va(6),r!==void 0&&typeof r!="function"&&Va(7);let i;if(bu(t)){const a=P3(this),o=F2(t,void 0);let l=!0;try{i=n(o),l=!1}finally{l?B2(a):z2(a)}return D3(a,r),R3(i,a)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===W9&&(i=void 0),this.autoFreeze_&&hA(i,!0),r){const a=[],o=[];yu("Patches").generateReplacementPatches_(t,i,a,o),r(a,o)}return i}else Va(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(o,...l)=>this.produceWithPatches(o,u=>t(u,...l));let r,i;return[this.produce(t,n,(o,l)=>{r=o,i=l}),r,i]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof e?.useStrictIteration=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){bu(e)||Va(8),lf(e)&&(e=pge(e));const t=P3(this),n=F2(e,void 0);return n[Ki].isManual_=!0,z2(t),n}finishDraft(e,t){const n=e&&e[Ki];(!n||!n.isManual_)&&Va(9);const{scope_:r}=n;return D3(r,t),R3(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=yu("Patches").applyPatches_;return lf(e)?r(e,t):this.produce(e,i=>r(i,t))}};function F2(e,t){const n=Dp(e)?yu("MapSet").proxyMap_(e,t):bx(e)?yu("MapSet").proxySet_(e,t):fge(e,t);return(t?t.scope_:X9()).drafts_.push(n),n}function pge(e){return lf(e)||Va(10,e),Q9(e)}function Q9(e){if(!bu(e)||yx(e))return e;const t=e[Ki];let n,r=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=$2(e,t.scope_.immer_.useStrictShallowCopy_),r=t.scope_.immer_.shouldUseStrictIteration()}else n=$2(e,!0);return zy(n,(i,a)=>{Z9(n,i,Q9(a))},r),t&&(t.finalized_=!1),n}var gge=new mge;gge.produce;var bge={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},e8=Si({name:"legend",initialState:bge,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:un()},replaceLegendPayload:{reducer(e,t){var{prev:n,next:r}=t.payload,i=Ja(e).payload.indexOf(n);i>-1&&(e.payload[i]=r)},prepare:un()},removeLegendPayload:{reducer(e,t){var n=Ja(e).payload.indexOf(t.payload);n>-1&&e.payload.splice(n,1)},prepare:un()}}}),{setLegendSize:dCe,setLegendSettings:fCe,addLegendPayload:yge,replaceLegendPayload:vge,removeLegendPayload:xge}=e8.actions,wge=e8.reducer;function H2(){return H2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},H2.apply(null,arguments)}function I3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function CS(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?I3(Object(n),!0).forEach(function(r){_ge(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I3(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function _ge(e,t,n){return(t=Sge(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Sge(e){var t=kge(e,"string");return typeof t=="symbol"?t:t+""}function kge(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ege(e){return Array.isArray(e)&&$o(e[0])&&$o(e[1])?e.join(" ~ "):e}var Tge=e=>{var{separator:t=" : ",contentStyle:n={},itemStyle:r={},labelStyle:i={},payload:a,formatter:o,itemSorter:l,wrapperClassName:u,labelClassName:d,label:h,labelFormatter:p,accessibilityLayer:b=!1}=e,y=()=>{if(a&&a.length){var D={padding:0,margin:0},P=(l?tx(a,l):a).map(($,U)=>{if($.type==="none")return null;var Y=$.formatter||o||Ege,{value:K,name:F}=$,z=K,W=F;if(Y){var X=Y(K,F,$,U,a);if(Array.isArray(X))[z,W]=X;else if(X!=null)z=X;else return null}var Z=CS({display:"block",paddingTop:4,paddingBottom:4,color:$.color||"#000"},r);return w.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(U),style:Z},$o(W)?w.createElement("span",{className:"recharts-tooltip-item-name"},W):null,$o(W)?w.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,w.createElement("span",{className:"recharts-tooltip-item-value"},z),w.createElement("span",{className:"recharts-tooltip-item-unit"},$.unit||""))});return w.createElement("ul",{className:"recharts-tooltip-item-list",style:D},P)}return null},S=CS({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),_=CS({margin:0},i),k=!Ar(h),A=k?h:"",N=rn("recharts-default-tooltip",u),j=rn("recharts-tooltip-label",d);k&&p&&a!==void 0&&a!==null&&(A=p(h,a));var C=b?{role:"status","aria-live":"assertive"}:{};return w.createElement("div",H2({className:N,style:S},C),w.createElement("p",{className:j,style:_},w.isValidElement(A)?A:"".concat(A)),y())},am="recharts-tooltip-wrapper",Age={visibility:"hidden"};function jge(e){var{coordinate:t,translateX:n,translateY:r}=e;return rn(am,{["".concat(am,"-right")]:Qe(n)&&t&&Qe(t.x)&&n>=t.x,["".concat(am,"-left")]:Qe(n)&&t&&Qe(t.x)&&n<t.x,["".concat(am,"-bottom")]:Qe(r)&&t&&Qe(t.y)&&r>=t.y,["".concat(am,"-top")]:Qe(r)&&t&&Qe(t.y)&&r<t.y})}function $3(e){var{allowEscapeViewBox:t,coordinate:n,key:r,offsetTopLeft:i,position:a,reverseDirection:o,tooltipDimension:l,viewBox:u,viewBoxDimension:d}=e;if(a&&Qe(a[r]))return a[r];var h=n[r]-l-(i>0?i:0),p=n[r]+i;if(t[r])return o[r]?h:p;var b=u[r];if(b==null)return 0;if(o[r]){var y=h,S=b;return y<S?Math.max(p,b):Math.max(h,b)}if(d==null)return 0;var _=p+l,k=b+d;return _>k?Math.max(h,b):Math.max(p,b)}function Oge(e){var{translateX:t,translateY:n,useTranslate3d:r}=e;return{transform:r?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function Nge(e){var{allowEscapeViewBox:t,coordinate:n,offsetTopLeft:r,position:i,reverseDirection:a,tooltipBox:o,useTranslate3d:l,viewBox:u}=e,d,h,p;return o.height>0&&o.width>0&&n?(h=$3({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:o.width,viewBox:u,viewBoxDimension:u.width}),p=$3({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:o.height,viewBox:u,viewBoxDimension:u.height}),d=Oge({translateX:h,translateY:p,useTranslate3d:l})):d=Age,{cssProperties:d,cssClasses:jge({translateX:h,translateY:p,coordinate:n})}}function B3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function db(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?B3(Object(n),!0).forEach(function(r){G2(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B3(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function G2(e,t,n){return(t=Cge(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Cge(e){var t=Mge(e,"string");return typeof t=="symbol"?t:t+""}function Mge(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Dge extends w.PureComponent{constructor(){super(...arguments),G2(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),G2(this,"handleKeyDown",t=>{if(t.key==="Escape"){var n,r,i,a;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(i=(a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,n;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:n,animationDuration:r,animationEasing:i,children:a,coordinate:o,hasPayload:l,isAnimationActive:u,offset:d,position:h,reverseDirection:p,useTranslate3d:b,viewBox:y,wrapperStyle:S,lastBoundingBox:_,innerRef:k,hasPortalFromProps:A}=this.props,{cssClasses:N,cssProperties:j}=Nge({allowEscapeViewBox:n,coordinate:o,offsetTopLeft:d,position:h,reverseDirection:p,tooltipBox:{height:_.height,width:_.width},useTranslate3d:b,viewBox:y}),C=A?{}:db(db({transition:u&&t?"transform ".concat(r,"ms ").concat(i):void 0},j),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&l?"visible":"hidden",position:"absolute",top:0,left:0}),D=db(db({},C),{},{visibility:!this.state.dismissed&&t&&l?"visible":"hidden"},S);return w.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:N,style:D,ref:k},a)}}var t8=()=>{var e;return(e=tt(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function q2(){return q2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},q2.apply(null,arguments)}function z3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function U3(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?z3(Object(n),!0).forEach(function(r){Pge(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z3(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Pge(e,t,n){return(t=Rge(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rge(e){var t=Lge(e,"string");return typeof t=="symbol"?t:t+""}function Lge(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var F3={curveBasisClosed:Wfe,curveBasisOpen:Vfe,curveBasis:Kfe,curveBumpX:qfe,curveBumpY:Yfe,curveLinearClosed:Zfe,curveLinear:Jv,curveMonotoneX:Xfe,curveMonotoneY:Jfe,curveNatural:Qfe,curveStep:ehe,curveStepAfter:nhe,curveStepBefore:the},Hy=e=>jn(e.x)&&jn(e.y),H3=e=>e.base!=null&&Hy(e.base)&&Hy(e),om=e=>e.x,sm=e=>e.y,Ige=(e,t)=>{if(typeof e=="function")return e;var n="curve".concat(tA(e));return(n==="curveMonotone"||n==="curveBump")&&t?F3["".concat(n).concat(t==="vertical"?"Y":"X")]:F3[n]||Jv},$ge=e=>{var{type:t="linear",points:n=[],baseLine:r,layout:i,connectNulls:a=!1}=e,o=Ige(t,i),l=a?n.filter(Hy):n,u;if(Array.isArray(r)){var d=n.map((y,S)=>U3(U3({},y),{},{base:r[S]}));i==="vertical"?u=rb().y(sm).x1(om).x0(y=>y.base.x):u=rb().x(om).y1(sm).y0(y=>y.base.y);var h=u.defined(H3).curve(o),p=a?d.filter(H3):d;return h(p)}i==="vertical"&&Qe(r)?u=rb().y(sm).x1(om).x0(r):Qe(r)?u=rb().x(om).y1(sm).y0(r):u=I7().x(om).y(sm);var b=u.defined(Hy).curve(o);return b(l)},Ub=e=>{var{className:t,points:n,path:r,pathRef:i}=e;if((!n||!n.length)&&!r)return null;var a=n&&n.length?$ge(e):r;return w.createElement("path",q2({},to(e),nA(e),{className:rn("recharts-curve",t),d:a===null?void 0:a,ref:i}))},Bge=["x","y","top","left","width","height","className"];function Y2(){return Y2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Y2.apply(null,arguments)}function G3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function zge(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?G3(Object(n),!0).forEach(function(r){Uge(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G3(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Uge(e,t,n){return(t=Fge(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fge(e){var t=Hge(e,"string");return typeof t=="symbol"?t:t+""}function Hge(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Gge(e,t){if(e==null)return{};var n,r,i=qge(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function qge(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var Yge=(e,t,n,r,i,a)=>"M".concat(e,",").concat(i,"v").concat(r,"M").concat(a,",").concat(t,"h").concat(n),Kge=e=>{var{x:t=0,y:n=0,top:r=0,left:i=0,width:a=0,height:o=0,className:l}=e,u=Gge(e,Bge),d=zge({x:t,y:n,top:r,left:i,width:a,height:o},u);return!Qe(t)||!Qe(n)||!Qe(a)||!Qe(o)||!Qe(r)||!Qe(i)?null:w.createElement("path",Y2({},Sa(d),{className:rn("recharts-cross",l),d:Yge(t,n,a,o,r,i)}))};function Wge(e,t,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-i:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-i,width:e==="horizontal"?r:n.width-1,height:e==="horizontal"?n.height-1:r}}function q3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Y3(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?q3(Object(n),!0).forEach(function(r){Vge(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q3(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Vge(e,t,n){return(t=Zge(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zge(e){var t=Xge(e,"string");return typeof t=="symbol"?t:t+""}function Xge(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Jge=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),Qge=(e,t,n)=>e.map(r=>"".concat(Jge(r)," ").concat(t,"ms ").concat(n)).join(","),e0e=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((n,r)=>n.filter(i=>r.includes(i))),np=(e,t)=>Object.keys(t).reduce((n,r)=>Y3(Y3({},n),{},{[r]:e(r,t[r])}),{});function K3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Jn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?K3(Object(n),!0).forEach(function(r){t0e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K3(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function t0e(e,t,n){return(t=n0e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function n0e(e){var t=r0e(e,"string");return typeof t=="symbol"?t:t+""}function r0e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Gy=(e,t,n)=>e+(t-e)*n,K2=e=>{var{from:t,to:n}=e;return t!==n},n8=(e,t,n)=>{var r=np((i,a)=>{if(K2(a)){var[o,l]=e(a.from,a.to,a.velocity);return Jn(Jn({},a),{},{from:o,velocity:l})}return a},t);return n<1?np((i,a)=>K2(a)?Jn(Jn({},a),{},{velocity:Gy(a.velocity,r[i].velocity,n),from:Gy(a.from,r[i].from,n)}):a,t):n8(e,r,n-1)};function i0e(e,t,n,r,i,a){var o,l=r.reduce((b,y)=>Jn(Jn({},b),{},{[y]:{from:e[y],velocity:0,to:t[y]}}),{}),u=()=>np((b,y)=>y.from,l),d=()=>!Object.values(l).filter(K2).length,h=null,p=b=>{o||(o=b);var y=b-o,S=y/n.dt;l=n8(n,l,S),i(Jn(Jn(Jn({},e),t),u())),o=b,d()||(h=a.setTimeout(p))};return()=>(h=a.setTimeout(p),()=>{var b;(b=h)===null||b===void 0||b()})}function a0e(e,t,n,r,i,a,o){var l=null,u=i.reduce((p,b)=>Jn(Jn({},p),{},{[b]:[e[b],t[b]]}),{}),d,h=p=>{d||(d=p);var b=(p-d)/r,y=np((_,k)=>Gy(...k,n(b)),u);if(a(Jn(Jn(Jn({},e),t),y)),b<1)l=o.setTimeout(h);else{var S=np((_,k)=>Gy(...k,n(1)),u);a(Jn(Jn(Jn({},e),t),S))}};return()=>(l=o.setTimeout(h),()=>{var p;(p=l)===null||p===void 0||p()})}const o0e=(e,t,n,r,i,a)=>{var o=e0e(e,t);return n==null?()=>(i(Jn(Jn({},e),t)),()=>{}):n.isStepper===!0?i0e(e,t,n,o,i,a):a0e(e,t,n,r,o,i,a)};var qy=1e-4,r8=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],i8=(e,t)=>e.map((n,r)=>n*t**r).reduce((n,r)=>n+r),W3=(e,t)=>n=>{var r=r8(e,t);return i8(r,n)},s0e=(e,t)=>n=>{var r=r8(e,t),i=[...r.map((a,o)=>a*o).slice(1),0];return i8(i,n)},l0e=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(n.length===1)switch(n[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var i,a=n[0].split("(");if(a[0]==="cubic-bezier"&&((i=a[1])===null||i===void 0?void 0:i.split(")")[0].split(",").length)===4){var o=a[1].split(")")[0].split(",").map(l=>parseFloat(l));return[o[0],o[1],o[2],o[3]]}}}return n.length===4?n:[0,0,1,1]},c0e=(e,t,n,r)=>{var i=W3(e,n),a=W3(t,r),o=s0e(e,n),l=d=>d>1?1:d<0?0:d,u=d=>{for(var h=d>1?1:d,p=h,b=0;b<8;++b){var y=i(p)-h,S=o(p);if(Math.abs(y-h)<qy||S<qy)return a(p);p=l(p-y/S)}return a(p)};return u.isStepper=!1,u},V3=function(){return c0e(...l0e(...arguments))},u0e=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:i=17}=t,a=(o,l,u)=>{var d=-(o-l)*n,h=u*r,p=u+(d-h)*i/1e3,b=u*i/1e3+o;return Math.abs(b-l)<qy&&Math.abs(p)<qy?[l,0]:[b,p]};return a.isStepper=!0,a.dt=i,a},d0e=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return V3(e);case"spring":return u0e();default:if(e.split("(")[0]==="cubic-bezier")return V3(e)}return typeof e=="function"?e:null};function f0e(e){var t,n=()=>null,r=!1,i=null,a=o=>{if(!r){if(Array.isArray(o)){if(!o.length)return;var l=o,[u,...d]=l;if(typeof u=="number"){i=e.setTimeout(a.bind(null,d),u);return}a(u),i=e.setTimeout(a.bind(null,d));return}typeof o=="string"&&(t=o,n(t)),typeof o=="object"&&(t=o,n(t)),typeof o=="function"&&o()}};return{stop:()=>{r=!0},start:o=>{r=!1,i&&(i(),i=null),a(o)},subscribe:o=>(n=o,()=>{n=()=>null}),getTimeoutController:()=>e}}class h0e{setTimeout(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),i=null,a=o=>{o-r>=n?t(o):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(a))};return i=requestAnimationFrame(a),()=>{i!=null&&cancelAnimationFrame(i)}}}function m0e(){return f0e(new h0e)}var p0e=w.createContext(m0e);function g0e(e,t){var n=w.useContext(p0e);return w.useMemo(()=>t??n(e),[e,t,n])}var b0e=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),jf={devToolsEnabled:!1,isSsr:b0e()},y0e={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},Z3={t:0},MS={t:1};function a8(e){var t=Vi(e,y0e),{isActive:n,canBegin:r,duration:i,easing:a,begin:o,onAnimationEnd:l,onAnimationStart:u,children:d}=t,h=n==="auto"?!jf.isSsr:n,p=g0e(t.animationId,t.animationManager),[b,y]=w.useState(h?Z3:MS),S=w.useRef(null);return w.useEffect(()=>{h||y(MS)},[h]),w.useEffect(()=>{if(!h||!r)return Ap;var _=o0e(Z3,MS,d0e(a),i,y,p.getTimeoutController()),k=()=>{S.current=_()};return p.start([u,o,k,i,l]),()=>{p.stop(),S.current&&S.current(),l()}},[h,r,i,a,o,u,l,p]),d(b.t)}function o8(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=w.useRef(Vm(t)),r=w.useRef(e);return r.current!==e&&(n.current=Vm(t),r.current=e),n.current}var v0e=["radius"],x0e=["radius"];function X3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function J3(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?X3(Object(n),!0).forEach(function(r){w0e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X3(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function w0e(e,t,n){return(t=_0e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _0e(e){var t=S0e(e,"string");return typeof t=="symbol"?t:t+""}function S0e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Yy(){return Yy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Yy.apply(null,arguments)}function Q3(e,t){if(e==null)return{};var n,r,i=k0e(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function k0e(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var eL=(e,t,n,r,i)=>{var a=Math.min(Math.abs(n)/2,Math.abs(r)/2),o=r>=0?1:-1,l=n>=0?1:-1,u=r>=0&&n>=0||r<0&&n<0?1:0,d;if(a>0&&i instanceof Array){for(var h=[0,0,0,0],p=0,b=4;p<b;p++)h[p]=i[p]>a?a:i[p];d="M".concat(e,",").concat(t+o*h[0]),h[0]>0&&(d+="A ".concat(h[0],",").concat(h[0],",0,0,").concat(u,",").concat(e+l*h[0],",").concat(t)),d+="L ".concat(e+n-l*h[1],",").concat(t),h[1]>0&&(d+="A ".concat(h[1],",").concat(h[1],",0,0,").concat(u,`,
        `).concat(e+n,",").concat(t+o*h[1])),d+="L ".concat(e+n,",").concat(t+r-o*h[2]),h[2]>0&&(d+="A ".concat(h[2],",").concat(h[2],",0,0,").concat(u,`,
        `).concat(e+n-l*h[2],",").concat(t+r)),d+="L ".concat(e+l*h[3],",").concat(t+r),h[3]>0&&(d+="A ".concat(h[3],",").concat(h[3],",0,0,").concat(u,`,
        `).concat(e,",").concat(t+r-o*h[3])),d+="Z"}else if(a>0&&i===+i&&i>0){var y=Math.min(a,i);d="M ".concat(e,",").concat(t+o*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(e+l*y,",").concat(t,`
            L `).concat(e+n-l*y,",").concat(t,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(e+n,",").concat(t+o*y,`
            L `).concat(e+n,",").concat(t+r-o*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(e+n-l*y,",").concat(t+r,`
            L `).concat(e+l*y,",").concat(t+r,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(e,",").concat(t+r-o*y," Z")}else d="M ".concat(e,",").concat(t," h ").concat(n," v ").concat(r," h ").concat(-n," Z");return d},tL={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},E0e=e=>{var t=Vi(e,tL),n=w.useRef(null),[r,i]=w.useState(-1);w.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var J=n.current.getTotalLength();J&&i(J)}catch{}},[]);var{x:a,y:o,width:l,height:u,radius:d,className:h}=t,{animationEasing:p,animationDuration:b,animationBegin:y,isAnimationActive:S,isUpdateAnimationActive:_}=t,k=w.useRef(l),A=w.useRef(u),N=w.useRef(a),j=w.useRef(o),C=w.useMemo(()=>({x:a,y:o,width:l,height:u,radius:d}),[a,o,l,u,d]),D=o8(C,"rectangle-");if(a!==+a||o!==+o||l!==+l||u!==+u||l===0||u===0)return null;var P=rn("recharts-rectangle",h);if(!_){var $=Sa(t),{radius:U}=$,Y=Q3($,v0e);return w.createElement("path",Yy({},Y,{radius:typeof d=="number"?d:void 0,className:P,d:eL(a,o,l,u,d)}))}var K=k.current,F=A.current,z=N.current,W=j.current,X="0px ".concat(r===-1?1:r,"px"),Z="".concat(r,"px 0px"),G=Qge(["strokeDasharray"],b,typeof p=="string"?p:tL.animationEasing);return w.createElement(a8,{animationId:D,key:D,canBegin:r>0,duration:b,easing:p,isActive:_,begin:y},J=>{var te=Co(K,l,J),ce=Co(F,u,J),oe=Co(z,a,J),B=Co(W,o,J);n.current&&(k.current=te,A.current=ce,N.current=oe,j.current=B);var V;S?J>0?V={transition:G,strokeDasharray:Z}:V={strokeDasharray:X}:V={strokeDasharray:Z};var ie=Sa(t),{radius:Q}=ie,se=Q3(ie,x0e);return w.createElement("path",Yy({},se,{radius:typeof d=="number"?d:void 0,className:P,d:eL(oe,B,te,ce,d),ref:n,style:J3(J3({},V),t.style)}))})};function nL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function rL(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?nL(Object(n),!0).forEach(function(r){T0e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nL(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function T0e(e,t,n){return(t=A0e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function A0e(e){var t=j0e(e,"string");return typeof t=="symbol"?t:t+""}function j0e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ky=Math.PI/180,O0e=e=>e*180/Math.PI,Tr=(e,t,n,r)=>({x:e+Math.cos(-Ky*r)*n,y:t+Math.sin(-Ky*r)*n}),N0e=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},C0e=(e,t)=>{var{x:n,y:r}=e,{x:i,y:a}=t;return Math.sqrt((n-i)**2+(r-a)**2)},M0e=(e,t)=>{var{x:n,y:r}=e,{cx:i,cy:a}=t,o=C0e({x:n,y:r},{x:i,y:a});if(o<=0)return{radius:o,angle:0};var l=(n-i)/o,u=Math.acos(l);return r>a&&(u=2*Math.PI-u),{radius:o,angle:O0e(u),angleInRadian:u}},D0e=e=>{var{startAngle:t,endAngle:n}=e,r=Math.floor(t/360),i=Math.floor(n/360),a=Math.min(r,i);return{startAngle:t-a*360,endAngle:n-a*360}},P0e=(e,t)=>{var{startAngle:n,endAngle:r}=t,i=Math.floor(n/360),a=Math.floor(r/360),o=Math.min(i,a);return e+o*360},R0e=(e,t)=>{var{chartX:n,chartY:r}=e,{radius:i,angle:a}=M0e({x:n,y:r},t),{innerRadius:o,outerRadius:l}=t;if(i<o||i>l||i===0)return null;var{startAngle:u,endAngle:d}=D0e(t),h=a,p;if(u<=d){for(;h>d;)h-=360;for(;h<u;)h+=360;p=h>=u&&h<=d}else{for(;h>u;)h-=360;for(;h<d;)h+=360;p=h>=d&&h<=u}return p?rL(rL({},t),{},{radius:i,angle:P0e(h,t)}):null};function s8(e){var{cx:t,cy:n,radius:r,startAngle:i,endAngle:a}=e,o=Tr(t,n,r,i),l=Tr(t,n,r,a);return{points:[o,l],cx:t,cy:n,radius:r,startAngle:i,endAngle:a}}function W2(){return W2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},W2.apply(null,arguments)}var L0e=(e,t)=>{var n=ba(t-e),r=Math.min(Math.abs(t-e),359.999);return n*r},fb=e=>{var{cx:t,cy:n,radius:r,angle:i,sign:a,isExternal:o,cornerRadius:l,cornerIsExternal:u}=e,d=l*(o?1:-1)+r,h=Math.asin(l/d)/Ky,p=u?i:i+a*h,b=Tr(t,n,d,p),y=Tr(t,n,r,p),S=u?i-a*h:i,_=Tr(t,n,d*Math.cos(h*Ky),S);return{center:b,circleTangency:y,lineTangency:_,theta:h}},l8=e=>{var{cx:t,cy:n,innerRadius:r,outerRadius:i,startAngle:a,endAngle:o}=e,l=L0e(a,o),u=a+l,d=Tr(t,n,i,a),h=Tr(t,n,i,u),p="M ".concat(d.x,",").concat(d.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(a>u),`,
    `).concat(h.x,",").concat(h.y,`
  `);if(r>0){var b=Tr(t,n,r,a),y=Tr(t,n,r,u);p+="L ".concat(y.x,",").concat(y.y,`
            A `).concat(r,",").concat(r,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(a<=u),`,
            `).concat(b.x,",").concat(b.y," Z")}else p+="L ".concat(t,",").concat(n," Z");return p},I0e=e=>{var{cx:t,cy:n,innerRadius:r,outerRadius:i,cornerRadius:a,forceCornerRadius:o,cornerIsExternal:l,startAngle:u,endAngle:d}=e,h=ba(d-u),{circleTangency:p,lineTangency:b,theta:y}=fb({cx:t,cy:n,radius:i,angle:u,sign:h,cornerRadius:a,cornerIsExternal:l}),{circleTangency:S,lineTangency:_,theta:k}=fb({cx:t,cy:n,radius:i,angle:d,sign:-h,cornerRadius:a,cornerIsExternal:l}),A=l?Math.abs(u-d):Math.abs(u-d)-y-k;if(A<0)return o?"M ".concat(b.x,",").concat(b.y,`
        a`).concat(a,",").concat(a,",0,0,1,").concat(a*2,`,0
        a`).concat(a,",").concat(a,",0,0,1,").concat(-a*2,`,0
      `):l8({cx:t,cy:n,innerRadius:r,outerRadius:i,startAngle:u,endAngle:d});var N="M ".concat(b.x,",").concat(b.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(h<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(A>180),",").concat(+(h<0),",").concat(S.x,",").concat(S.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(h<0),",").concat(_.x,",").concat(_.y,`
  `);if(r>0){var{circleTangency:j,lineTangency:C,theta:D}=fb({cx:t,cy:n,radius:r,angle:u,sign:h,isExternal:!0,cornerRadius:a,cornerIsExternal:l}),{circleTangency:P,lineTangency:$,theta:U}=fb({cx:t,cy:n,radius:r,angle:d,sign:-h,isExternal:!0,cornerRadius:a,cornerIsExternal:l}),Y=l?Math.abs(u-d):Math.abs(u-d)-D-U;if(Y<0&&a===0)return"".concat(N,"L").concat(t,",").concat(n,"Z");N+="L".concat($.x,",").concat($.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(h<0),",").concat(P.x,",").concat(P.y,`
      A`).concat(r,",").concat(r,",0,").concat(+(Y>180),",").concat(+(h>0),",").concat(j.x,",").concat(j.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(h<0),",").concat(C.x,",").concat(C.y,"Z")}else N+="L".concat(t,",").concat(n,"Z");return N},$0e={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},B0e=e=>{var t=Vi(e,$0e),{cx:n,cy:r,innerRadius:i,outerRadius:a,cornerRadius:o,forceCornerRadius:l,cornerIsExternal:u,startAngle:d,endAngle:h,className:p}=t;if(a<i||d===h)return null;var b=rn("recharts-sector",p),y=a-i,S=Wl(o,y,0,!0),_;return S>0&&Math.abs(d-h)<360?_=I0e({cx:n,cy:r,innerRadius:i,outerRadius:a,cornerRadius:Math.min(S,y/2),forceCornerRadius:l,cornerIsExternal:u,startAngle:d,endAngle:h}):_=l8({cx:n,cy:r,innerRadius:i,outerRadius:a,startAngle:d,endAngle:h}),w.createElement("path",W2({},Sa(t),{className:b,d:_}))};function z0e(e,t,n){if(e==="horizontal")return[{x:t.x,y:n.top},{x:t.x,y:n.top+n.height}];if(e==="vertical")return[{x:n.left,y:t.y},{x:n.left+n.width,y:t.y}];if(V7(t)){if(e==="centric"){var{cx:r,cy:i,innerRadius:a,outerRadius:o,angle:l}=t,u=Tr(r,i,a,l),d=Tr(r,i,o,l);return[{x:u.x,y:u.y},{x:d.x,y:d.y}]}return s8(t)}}var DS={},PS={},RS={},iL;function U0e(){return iL||(iL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=o9();function n(r){return t.isSymbol(r)?NaN:Number(r)}e.toNumber=n})(RS)),RS}var aL;function F0e(){return aL||(aL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=U0e();function n(r){return r?(r=t.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}e.toFinite=n})(PS)),PS}var oL;function H0e(){return oL||(oL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=s9(),n=F0e();function r(i,a,o){o&&typeof o!="number"&&t.isIterateeCall(i,a,o)&&(a=o=void 0),i=n.toFinite(i),a===void 0?(a=i,i=0):a=n.toFinite(a),o=o===void 0?i<a?1:-1:n.toFinite(o);const l=Math.max(Math.ceil((a-i)/(o||1)),0),u=new Array(l);for(let d=0;d<l;d++)u[d]=i,i+=o;return u}e.range=r})(DS)),DS}var LS,sL;function G0e(){return sL||(sL=1,LS=H0e().range),LS}var q0e=G0e();const c8=wi(q0e);function Fl(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Y0e(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function pA(e){let t,n,r;e.length!==2?(t=Fl,n=(l,u)=>Fl(e(l),u),r=(l,u)=>e(l)-u):(t=e===Fl||e===Y0e?e:K0e,n=e,r=e);function i(l,u,d=0,h=l.length){if(d<h){if(t(u,u)!==0)return h;do{const p=d+h>>>1;n(l[p],u)<0?d=p+1:h=p}while(d<h)}return d}function a(l,u,d=0,h=l.length){if(d<h){if(t(u,u)!==0)return h;do{const p=d+h>>>1;n(l[p],u)<=0?d=p+1:h=p}while(d<h)}return d}function o(l,u,d=0,h=l.length){const p=i(l,u,d,h-1);return p>d&&r(l[p-1],u)>-r(l[p],u)?p-1:p}return{left:i,center:o,right:a}}function K0e(){return 0}function u8(e){return e===null?NaN:+e}function*W0e(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const V0e=pA(Fl),Pp=V0e.right;pA(u8).center;class lL extends Map{constructor(t,n=J0e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(cL(this,t))}has(t){return super.has(cL(this,t))}set(t,n){return super.set(Z0e(this,t),n)}delete(t){return super.delete(X0e(this,t))}}function cL({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function Z0e({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function X0e({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function J0e(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Q0e(e=Fl){if(e===Fl)return d8;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function d8(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const ebe=Math.sqrt(50),tbe=Math.sqrt(10),nbe=Math.sqrt(2);function Wy(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),o=a>=ebe?10:a>=tbe?5:a>=nbe?2:1;let l,u,d;return i<0?(d=Math.pow(10,-i)/o,l=Math.round(e*d),u=Math.round(t*d),l/d<e&&++l,u/d>t&&--u,d=-d):(d=Math.pow(10,i)*o,l=Math.round(e/d),u=Math.round(t/d),l*d<e&&++l,u*d>t&&--u),u<l&&.5<=n&&n<2?Wy(e,t,n*2):[l,u,d]}function V2(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,a,o]=r?Wy(t,e,n):Wy(e,t,n);if(!(a>=i))return[];const l=a-i+1,u=new Array(l);if(r)if(o<0)for(let d=0;d<l;++d)u[d]=(a-d)/-o;else for(let d=0;d<l;++d)u[d]=(a-d)*o;else if(o<0)for(let d=0;d<l;++d)u[d]=(i+d)/-o;else for(let d=0;d<l;++d)u[d]=(i+d)*o;return u}function Z2(e,t,n){return t=+t,e=+e,n=+n,Wy(e,t,n)[2]}function X2(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?Z2(t,e,n):Z2(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function uL(e,t){let n;for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function dL(e,t){let n;for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function f8(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?d8:Q0e(i);r>n;){if(r-n>600){const u=r-n+1,d=t-n+1,h=Math.log(u),p=.5*Math.exp(2*h/3),b=.5*Math.sqrt(h*p*(u-p)/u)*(d-u/2<0?-1:1),y=Math.max(n,Math.floor(t-d*p/u+b)),S=Math.min(r,Math.floor(t+(u-d)*p/u+b));f8(e,t,y,S,i)}const a=e[t];let o=n,l=r;for(lm(e,n,t),i(e[r],a)>0&&lm(e,n,r);o<l;){for(lm(e,o,l),++o,--l;i(e[o],a)<0;)++o;for(;i(e[l],a)>0;)--l}i(e[n],a)===0?lm(e,n,l):(++l,lm(e,l,r)),l<=t&&(n=l+1),t<=l&&(r=l-1)}return e}function lm(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function rbe(e,t,n){if(e=Float64Array.from(W0e(e)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return dL(e);if(t>=1)return uL(e);var r,i=(r-1)*t,a=Math.floor(i),o=uL(f8(e,a).subarray(0,a+1)),l=dL(e.subarray(a+1));return o+(l-o)*(i-a)}}function ibe(e,t,n=u8){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,a=Math.floor(i),o=+n(e[a],a,e),l=+n(e[a+1],a+1,e);return o+(l-o)*(i-a)}}function abe(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,a=new Array(i);++r<i;)a[r]=e+r*n;return a}function Oa(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Fs(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const J2=Symbol("implicit");function gA(){var e=new lL,t=[],n=[],r=J2;function i(a){let o=e.get(a);if(o===void 0){if(r!==J2)return r;e.set(a,o=t.push(a)-1)}return n[o%n.length]}return i.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new lL;for(const o of a)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return gA(t,n).unknown(r)},Oa.apply(i,arguments),i}function bA(){var e=gA().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,a,o,l=!1,u=0,d=0,h=.5;delete e.unknown;function p(){var b=t().length,y=i<r,S=y?i:r,_=y?r:i;a=(_-S)/Math.max(1,b-u+d*2),l&&(a=Math.floor(a)),S+=(_-S-a*(b-u))*h,o=a*(1-u),l&&(S=Math.round(S),o=Math.round(o));var k=abe(b).map(function(A){return S+a*A});return n(y?k.reverse():k)}return e.domain=function(b){return arguments.length?(t(b),p()):t()},e.range=function(b){return arguments.length?([r,i]=b,r=+r,i=+i,p()):[r,i]},e.rangeRound=function(b){return[r,i]=b,r=+r,i=+i,l=!0,p()},e.bandwidth=function(){return o},e.step=function(){return a},e.round=function(b){return arguments.length?(l=!!b,p()):l},e.padding=function(b){return arguments.length?(u=Math.min(1,d=+b),p()):u},e.paddingInner=function(b){return arguments.length?(u=Math.min(1,b),p()):u},e.paddingOuter=function(b){return arguments.length?(d=+b,p()):d},e.align=function(b){return arguments.length?(h=Math.max(0,Math.min(1,b)),p()):h},e.copy=function(){return bA(t(),[r,i]).round(l).paddingInner(u).paddingOuter(d).align(h)},Oa.apply(p(),arguments)}function h8(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return h8(t())},e}function obe(){return h8(bA.apply(null,arguments).paddingInner(1))}function yA(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function m8(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Rp(){}var rp=.7,Vy=1/rp,Yd="\\s*([+-]?\\d+)\\s*",ip="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ro="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",sbe=/^#([0-9a-f]{3,8})$/,lbe=new RegExp(`^rgb\\(${Yd},${Yd},${Yd}\\)$`),cbe=new RegExp(`^rgb\\(${Ro},${Ro},${Ro}\\)$`),ube=new RegExp(`^rgba\\(${Yd},${Yd},${Yd},${ip}\\)$`),dbe=new RegExp(`^rgba\\(${Ro},${Ro},${Ro},${ip}\\)$`),fbe=new RegExp(`^hsl\\(${ip},${Ro},${Ro}\\)$`),hbe=new RegExp(`^hsla\\(${ip},${Ro},${Ro},${ip}\\)$`),fL={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};yA(Rp,ap,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:hL,formatHex:hL,formatHex8:mbe,formatHsl:pbe,formatRgb:mL,toString:mL});function hL(){return this.rgb().formatHex()}function mbe(){return this.rgb().formatHex8()}function pbe(){return p8(this).formatHsl()}function mL(){return this.rgb().formatRgb()}function ap(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=sbe.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?pL(t):n===3?new yi(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?hb(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?hb(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=lbe.exec(e))?new yi(t[1],t[2],t[3],1):(t=cbe.exec(e))?new yi(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=ube.exec(e))?hb(t[1],t[2],t[3],t[4]):(t=dbe.exec(e))?hb(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=fbe.exec(e))?yL(t[1],t[2]/100,t[3]/100,1):(t=hbe.exec(e))?yL(t[1],t[2]/100,t[3]/100,t[4]):fL.hasOwnProperty(e)?pL(fL[e]):e==="transparent"?new yi(NaN,NaN,NaN,0):null}function pL(e){return new yi(e>>16&255,e>>8&255,e&255,1)}function hb(e,t,n,r){return r<=0&&(e=t=n=NaN),new yi(e,t,n,r)}function gbe(e){return e instanceof Rp||(e=ap(e)),e?(e=e.rgb(),new yi(e.r,e.g,e.b,e.opacity)):new yi}function Q2(e,t,n,r){return arguments.length===1?gbe(e):new yi(e,t,n,r??1)}function yi(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}yA(yi,Q2,m8(Rp,{brighter(e){return e=e==null?Vy:Math.pow(Vy,e),new yi(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?rp:Math.pow(rp,e),new yi(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new yi(du(this.r),du(this.g),du(this.b),Zy(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:gL,formatHex:gL,formatHex8:bbe,formatRgb:bL,toString:bL}));function gL(){return`#${au(this.r)}${au(this.g)}${au(this.b)}`}function bbe(){return`#${au(this.r)}${au(this.g)}${au(this.b)}${au((isNaN(this.opacity)?1:this.opacity)*255)}`}function bL(){const e=Zy(this.opacity);return`${e===1?"rgb(":"rgba("}${du(this.r)}, ${du(this.g)}, ${du(this.b)}${e===1?")":`, ${e})`}`}function Zy(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function du(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function au(e){return e=du(e),(e<16?"0":"")+e.toString(16)}function yL(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Za(e,t,n,r)}function p8(e){if(e instanceof Za)return new Za(e.h,e.s,e.l,e.opacity);if(e instanceof Rp||(e=ap(e)),!e)return new Za;if(e instanceof Za)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=NaN,l=a-i,u=(a+i)/2;return l?(t===a?o=(n-r)/l+(n<r)*6:n===a?o=(r-t)/l+2:o=(t-n)/l+4,l/=u<.5?a+i:2-a-i,o*=60):l=u>0&&u<1?0:o,new Za(o,l,u,e.opacity)}function ybe(e,t,n,r){return arguments.length===1?p8(e):new Za(e,t,n,r??1)}function Za(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}yA(Za,ybe,m8(Rp,{brighter(e){return e=e==null?Vy:Math.pow(Vy,e),new Za(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?rp:Math.pow(rp,e),new Za(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new yi(IS(e>=240?e-240:e+120,i,r),IS(e,i,r),IS(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Za(vL(this.h),mb(this.s),mb(this.l),Zy(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Zy(this.opacity);return`${e===1?"hsl(":"hsla("}${vL(this.h)}, ${mb(this.s)*100}%, ${mb(this.l)*100}%${e===1?")":`, ${e})`}`}}));function vL(e){return e=(e||0)%360,e<0?e+360:e}function mb(e){return Math.max(0,Math.min(1,e||0))}function IS(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const vA=e=>()=>e;function vbe(e,t){return function(n){return e+n*t}}function xbe(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function wbe(e){return(e=+e)==1?g8:function(t,n){return n-t?xbe(t,n,e):vA(isNaN(t)?n:t)}}function g8(e,t){var n=t-e;return n?vbe(e,n):vA(isNaN(e)?t:e)}const xL=(function e(t){var n=wbe(t);function r(i,a){var o=n((i=Q2(i)).r,(a=Q2(a)).r),l=n(i.g,a.g),u=n(i.b,a.b),d=g8(i.opacity,a.opacity);return function(h){return i.r=o(h),i.g=l(h),i.b=u(h),i.opacity=d(h),i+""}}return r.gamma=e,r})(1);function _be(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=e[i]*(1-a)+t[i]*a;return r}}function Sbe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function kbe(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),a=new Array(n),o;for(o=0;o<r;++o)i[o]=Of(e[o],t[o]);for(;o<n;++o)a[o]=t[o];return function(l){for(o=0;o<r;++o)a[o]=i[o](l);return a}}function Ebe(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Xy(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Tbe(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Of(e[i],t[i]):r[i]=t[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var eE=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,$S=new RegExp(eE.source,"g");function Abe(e){return function(){return e}}function jbe(e){return function(t){return e(t)+""}}function Obe(e,t){var n=eE.lastIndex=$S.lastIndex=0,r,i,a,o=-1,l=[],u=[];for(e=e+"",t=t+"";(r=eE.exec(e))&&(i=$S.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),l[o]?l[o]+=a:l[++o]=a),(r=r[0])===(i=i[0])?l[o]?l[o]+=i:l[++o]=i:(l[++o]=null,u.push({i:o,x:Xy(r,i)})),n=$S.lastIndex;return n<t.length&&(a=t.slice(n),l[o]?l[o]+=a:l[++o]=a),l.length<2?u[0]?jbe(u[0].x):Abe(t):(t=u.length,function(d){for(var h=0,p;h<t;++h)l[(p=u[h]).i]=p.x(d);return l.join("")})}function Of(e,t){var n=typeof t,r;return t==null||n==="boolean"?vA(t):(n==="number"?Xy:n==="string"?(r=ap(t))?(t=r,xL):Obe:t instanceof ap?xL:t instanceof Date?Ebe:Sbe(t)?_be:Array.isArray(t)?kbe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Tbe:Xy)(e,t)}function xA(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function Nbe(e,t){t===void 0&&(t=e,e=Of);for(var n=0,r=t.length-1,i=t[0],a=new Array(r<0?0:r);n<r;)a[n]=e(i,i=t[++n]);return function(o){var l=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return a[l](o-l)}}function Cbe(e){return function(){return e}}function Jy(e){return+e}var wL=[0,1];function Wr(e){return e}function tE(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Cbe(isNaN(t)?NaN:.5)}function Mbe(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function Dbe(e,t,n){var r=e[0],i=e[1],a=t[0],o=t[1];return i<r?(r=tE(i,r),a=n(o,a)):(r=tE(r,i),a=n(a,o)),function(l){return a(r(l))}}function Pbe(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),a=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=tE(e[o],e[o+1]),a[o]=n(t[o],t[o+1]);return function(l){var u=Pp(e,l,1,r)-1;return a[u](i[u](l))}}function Lp(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function vx(){var e=wL,t=wL,n=Of,r,i,a,o=Wr,l,u,d;function h(){var b=Math.min(e.length,t.length);return o!==Wr&&(o=Mbe(e[0],e[b-1])),l=b>2?Pbe:Dbe,u=d=null,p}function p(b){return b==null||isNaN(b=+b)?a:(u||(u=l(e.map(r),t,n)))(r(o(b)))}return p.invert=function(b){return o(i((d||(d=l(t,e.map(r),Xy)))(b)))},p.domain=function(b){return arguments.length?(e=Array.from(b,Jy),h()):e.slice()},p.range=function(b){return arguments.length?(t=Array.from(b),h()):t.slice()},p.rangeRound=function(b){return t=Array.from(b),n=xA,h()},p.clamp=function(b){return arguments.length?(o=b?!0:Wr,h()):o!==Wr},p.interpolate=function(b){return arguments.length?(n=b,h()):n},p.unknown=function(b){return arguments.length?(a=b,p):a},function(b,y){return r=b,i=y,h()}}function wA(){return vx()(Wr,Wr)}function Rbe(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Qy(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function cf(e){return e=Qy(Math.abs(e)),e?e[1]:NaN}function Lbe(e,t){return function(n,r){for(var i=n.length,a=[],o=0,l=e[0],u=0;i>0&&l>0&&(u+l+1>r&&(l=Math.max(1,r-u)),a.push(n.substring(i-=l,i+l)),!((u+=l+1)>r));)l=e[o=(o+1)%e.length];return a.reverse().join(t)}}function Ibe(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var $be=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function op(e){if(!(t=$be.exec(e)))throw new Error("invalid format: "+e);var t;return new _A({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}op.prototype=_A.prototype;function _A(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}_A.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Bbe(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var b8;function zbe(e,t){var n=Qy(e,t);if(!n)return e+"";var r=n[0],i=n[1],a=i-(b8=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Qy(e,Math.max(0,t+a-1))[0]}function _L(e,t){var n=Qy(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const SL={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Rbe,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>_L(e*100,t),r:_L,s:zbe,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function kL(e){return e}var EL=Array.prototype.map,TL=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Ube(e){var t=e.grouping===void 0||e.thousands===void 0?kL:Lbe(EL.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?kL:Ibe(EL.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function d(p){p=op(p);var b=p.fill,y=p.align,S=p.sign,_=p.symbol,k=p.zero,A=p.width,N=p.comma,j=p.precision,C=p.trim,D=p.type;D==="n"?(N=!0,D="g"):SL[D]||(j===void 0&&(j=12),C=!0,D="g"),(k||b==="0"&&y==="=")&&(k=!0,b="0",y="=");var P=_==="$"?n:_==="#"&&/[boxX]/.test(D)?"0"+D.toLowerCase():"",$=_==="$"?r:/[%p]/.test(D)?o:"",U=SL[D],Y=/[defgprs%]/.test(D);j=j===void 0?6:/[gprs]/.test(D)?Math.max(1,Math.min(21,j)):Math.max(0,Math.min(20,j));function K(F){var z=P,W=$,X,Z,G;if(D==="c")W=U(F)+W,F="";else{F=+F;var J=F<0||1/F<0;if(F=isNaN(F)?u:U(Math.abs(F),j),C&&(F=Bbe(F)),J&&+F==0&&S!=="+"&&(J=!1),z=(J?S==="("?S:l:S==="-"||S==="("?"":S)+z,W=(D==="s"?TL[8+b8/3]:"")+W+(J&&S==="("?")":""),Y){for(X=-1,Z=F.length;++X<Z;)if(G=F.charCodeAt(X),48>G||G>57){W=(G===46?i+F.slice(X+1):F.slice(X))+W,F=F.slice(0,X);break}}}N&&!k&&(F=t(F,1/0));var te=z.length+F.length+W.length,ce=te<A?new Array(A-te+1).join(b):"";switch(N&&k&&(F=t(ce+F,ce.length?A-W.length:1/0),ce=""),y){case"<":F=z+F+W+ce;break;case"=":F=z+ce+F+W;break;case"^":F=ce.slice(0,te=ce.length>>1)+z+F+W+ce.slice(te);break;default:F=ce+z+F+W;break}return a(F)}return K.toString=function(){return p+""},K}function h(p,b){var y=d((p=op(p),p.type="f",p)),S=Math.max(-8,Math.min(8,Math.floor(cf(b)/3)))*3,_=Math.pow(10,-S),k=TL[8+S/3];return function(A){return y(_*A)+k}}return{format:d,formatPrefix:h}}var pb,SA,y8;Fbe({thousands:",",grouping:[3],currency:["$",""]});function Fbe(e){return pb=Ube(e),SA=pb.format,y8=pb.formatPrefix,pb}function Hbe(e){return Math.max(0,-cf(Math.abs(e)))}function Gbe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(cf(t)/3)))*3-cf(Math.abs(e)))}function qbe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,cf(t)-cf(e))+1}function v8(e,t,n,r){var i=X2(e,t,n),a;switch(r=op(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(a=Gbe(i,o))&&(r.precision=a),y8(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=qbe(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=Hbe(i))&&(r.precision=a-(r.type==="%")*2);break}}return SA(r)}function Jl(e){var t=e.domain;return e.ticks=function(n){var r=t();return V2(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return v8(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,a=r.length-1,o=r[i],l=r[a],u,d,h=10;for(l<o&&(d=o,o=l,l=d,d=i,i=a,a=d);h-- >0;){if(d=Z2(o,l,n),d===u)return r[i]=o,r[a]=l,t(r);if(d>0)o=Math.floor(o/d)*d,l=Math.ceil(l/d)*d;else if(d<0)o=Math.ceil(o*d)/d,l=Math.floor(l*d)/d;else break;u=d}return e},e}function x8(){var e=wA();return e.copy=function(){return Lp(e,x8())},Oa.apply(e,arguments),Jl(e)}function w8(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,Jy),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return w8(e).unknown(t)},e=arguments.length?Array.from(e,Jy):[0,1],Jl(n)}function _8(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],a=e[r],o;return a<i&&(o=n,n=r,r=o,o=i,i=a,a=o),e[n]=t.floor(i),e[r]=t.ceil(a),e}function AL(e){return Math.log(e)}function jL(e){return Math.exp(e)}function Ybe(e){return-Math.log(-e)}function Kbe(e){return-Math.exp(-e)}function Wbe(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Vbe(e){return e===10?Wbe:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Zbe(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function OL(e){return(t,n)=>-e(-t,n)}function kA(e){const t=e(AL,jL),n=t.domain;let r=10,i,a;function o(){return i=Zbe(r),a=Vbe(r),n()[0]<0?(i=OL(i),a=OL(a),e(Ybe,Kbe)):e(AL,jL),t}return t.base=function(l){return arguments.length?(r=+l,o()):r},t.domain=function(l){return arguments.length?(n(l),o()):n()},t.ticks=l=>{const u=n();let d=u[0],h=u[u.length-1];const p=h<d;p&&([d,h]=[h,d]);let b=i(d),y=i(h),S,_;const k=l==null?10:+l;let A=[];if(!(r%1)&&y-b<k){if(b=Math.floor(b),y=Math.ceil(y),d>0){for(;b<=y;++b)for(S=1;S<r;++S)if(_=b<0?S/a(-b):S*a(b),!(_<d)){if(_>h)break;A.push(_)}}else for(;b<=y;++b)for(S=r-1;S>=1;--S)if(_=b>0?S/a(-b):S*a(b),!(_<d)){if(_>h)break;A.push(_)}A.length*2<k&&(A=V2(d,h,k))}else A=V2(b,y,Math.min(y-b,k)).map(a);return p?A.reverse():A},t.tickFormat=(l,u)=>{if(l==null&&(l=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=op(u)).precision==null&&(u.trim=!0),u=SA(u)),l===1/0)return u;const d=Math.max(1,r*l/t.ticks().length);return h=>{let p=h/a(Math.round(i(h)));return p*r<r-.5&&(p*=r),p<=d?u(h):""}},t.nice=()=>n(_8(n(),{floor:l=>a(Math.floor(i(l))),ceil:l=>a(Math.ceil(i(l)))})),t}function S8(){const e=kA(vx()).domain([1,10]);return e.copy=()=>Lp(e,S8()).base(e.base()),Oa.apply(e,arguments),e}function NL(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function CL(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function EA(e){var t=1,n=e(NL(t),CL(t));return n.constant=function(r){return arguments.length?e(NL(t=+r),CL(t)):t},Jl(n)}function k8(){var e=EA(vx());return e.copy=function(){return Lp(e,k8()).constant(e.constant())},Oa.apply(e,arguments)}function ML(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Xbe(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Jbe(e){return e<0?-e*e:e*e}function TA(e){var t=e(Wr,Wr),n=1;function r(){return n===1?e(Wr,Wr):n===.5?e(Xbe,Jbe):e(ML(n),ML(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},Jl(t)}function AA(){var e=TA(vx());return e.copy=function(){return Lp(e,AA()).exponent(e.exponent())},Oa.apply(e,arguments),e}function Qbe(){return AA.apply(null,arguments).exponent(.5)}function DL(e){return Math.sign(e)*e*e}function eye(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function E8(){var e=wA(),t=[0,1],n=!1,r;function i(a){var o=eye(e(a));return isNaN(o)?r:n?Math.round(o):o}return i.invert=function(a){return e.invert(DL(a))},i.domain=function(a){return arguments.length?(e.domain(a),i):e.domain()},i.range=function(a){return arguments.length?(e.range((t=Array.from(a,Jy)).map(DL)),i):t.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(n=!!a,i):n},i.clamp=function(a){return arguments.length?(e.clamp(a),i):e.clamp()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return E8(e.domain(),t).round(n).clamp(e.clamp()).unknown(r)},Oa.apply(i,arguments),Jl(i)}function T8(){var e=[],t=[],n=[],r;function i(){var o=0,l=Math.max(1,t.length);for(n=new Array(l-1);++o<l;)n[o-1]=ibe(e,o/l);return a}function a(o){return o==null||isNaN(o=+o)?r:t[Pp(n,o)]}return a.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?n[l-1]:e[0],l<n.length?n[l]:e[e.length-1]]},a.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(Fl),i()},a.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},a.unknown=function(o){return arguments.length?(r=o,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return T8().domain(e).range(t).unknown(r)},Oa.apply(a,arguments)}function A8(){var e=0,t=1,n=1,r=[.5],i=[0,1],a;function o(u){return u!=null&&u<=u?i[Pp(r,u,0,n)]:a}function l(){var u=-1;for(r=new Array(n);++u<n;)r[u]=((u+1)*t-(u-n)*e)/(n+1);return o}return o.domain=function(u){return arguments.length?([e,t]=u,e=+e,t=+t,l()):[e,t]},o.range=function(u){return arguments.length?(n=(i=Array.from(u)).length-1,l()):i.slice()},o.invertExtent=function(u){var d=i.indexOf(u);return d<0?[NaN,NaN]:d<1?[e,r[0]]:d>=n?[r[n-1],t]:[r[d-1],r[d]]},o.unknown=function(u){return arguments.length&&(a=u),o},o.thresholds=function(){return r.slice()},o.copy=function(){return A8().domain([e,t]).range(i).unknown(a)},Oa.apply(Jl(o),arguments)}function j8(){var e=[.5],t=[0,1],n,r=1;function i(a){return a!=null&&a<=a?t[Pp(e,a,0,r)]:n}return i.domain=function(a){return arguments.length?(e=Array.from(a),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(a){return arguments.length?(t=Array.from(a),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(a){var o=t.indexOf(a);return[e[o-1],e[o]]},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return j8().domain(e).range(t).unknown(n)},Oa.apply(i,arguments)}const BS=new Date,zS=new Date;function er(e,t,n,r){function i(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(e(a=new Date(+a)),a),i.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),i.round=a=>{const o=i(a),l=i.ceil(a);return a-o<l-a?o:l},i.offset=(a,o)=>(t(a=new Date(+a),o==null?1:Math.floor(o)),a),i.range=(a,o,l)=>{const u=[];if(a=i.ceil(a),l=l==null?1:Math.floor(l),!(a<o)||!(l>0))return u;let d;do u.push(d=new Date(+a)),t(a,l),e(a);while(d<a&&a<o);return u},i.filter=a=>er(o=>{if(o>=o)for(;e(o),!a(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!a(o););else for(;--l>=0;)for(;t(o,1),!a(o););}),n&&(i.count=(a,o)=>(BS.setTime(+a),zS.setTime(+o),e(BS),e(zS),Math.floor(n(BS,zS))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?o=>r(o)%a===0:o=>i.count(0,o)%a===0):i)),i}const ev=er(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);ev.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?er(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):ev);ev.range;const ks=1e3,ya=ks*60,Es=ya*60,Ps=Es*24,jA=Ps*7,PL=Ps*30,US=Ps*365,ou=er(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*ks)},(e,t)=>(t-e)/ks,e=>e.getUTCSeconds());ou.range;const OA=er(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ks)},(e,t)=>{e.setTime(+e+t*ya)},(e,t)=>(t-e)/ya,e=>e.getMinutes());OA.range;const NA=er(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*ya)},(e,t)=>(t-e)/ya,e=>e.getUTCMinutes());NA.range;const CA=er(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ks-e.getMinutes()*ya)},(e,t)=>{e.setTime(+e+t*Es)},(e,t)=>(t-e)/Es,e=>e.getHours());CA.range;const MA=er(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Es)},(e,t)=>(t-e)/Es,e=>e.getUTCHours());MA.range;const Ip=er(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*ya)/Ps,e=>e.getDate()-1);Ip.range;const xx=er(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ps,e=>e.getUTCDate()-1);xx.range;const O8=er(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ps,e=>Math.floor(e/Ps));O8.range;function Tu(e){return er(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*ya)/jA)}const wx=Tu(0),tv=Tu(1),tye=Tu(2),nye=Tu(3),uf=Tu(4),rye=Tu(5),iye=Tu(6);wx.range;tv.range;tye.range;nye.range;uf.range;rye.range;iye.range;function Au(e){return er(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/jA)}const _x=Au(0),nv=Au(1),aye=Au(2),oye=Au(3),df=Au(4),sye=Au(5),lye=Au(6);_x.range;nv.range;aye.range;oye.range;df.range;sye.range;lye.range;const DA=er(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());DA.range;const PA=er(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());PA.range;const Rs=er(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Rs.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:er(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Rs.range;const Ls=er(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Ls.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:er(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Ls.range;function N8(e,t,n,r,i,a){const o=[[ou,1,ks],[ou,5,5*ks],[ou,15,15*ks],[ou,30,30*ks],[a,1,ya],[a,5,5*ya],[a,15,15*ya],[a,30,30*ya],[i,1,Es],[i,3,3*Es],[i,6,6*Es],[i,12,12*Es],[r,1,Ps],[r,2,2*Ps],[n,1,jA],[t,1,PL],[t,3,3*PL],[e,1,US]];function l(d,h,p){const b=h<d;b&&([d,h]=[h,d]);const y=p&&typeof p.range=="function"?p:u(d,h,p),S=y?y.range(d,+h+1):[];return b?S.reverse():S}function u(d,h,p){const b=Math.abs(h-d)/p,y=pA(([,,k])=>k).right(o,b);if(y===o.length)return e.every(X2(d/US,h/US,p));if(y===0)return ev.every(Math.max(X2(d,h,p),1));const[S,_]=o[b/o[y-1][2]<o[y][2]/b?y-1:y];return S.every(_)}return[l,u]}const[cye,uye]=N8(Ls,PA,_x,O8,MA,NA),[dye,fye]=N8(Rs,DA,wx,Ip,CA,OA);function FS(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function HS(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function cm(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function hye(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,a=e.days,o=e.shortDays,l=e.months,u=e.shortMonths,d=um(i),h=dm(i),p=um(a),b=dm(a),y=um(o),S=dm(o),_=um(l),k=dm(l),A=um(u),N=dm(u),j={a:J,A:te,b:ce,B:oe,c:null,d:zL,e:zL,f:Lye,g:Yye,G:Wye,H:Dye,I:Pye,j:Rye,L:C8,m:Iye,M:$ye,p:B,q:V,Q:HL,s:GL,S:Bye,u:zye,U:Uye,V:Fye,w:Hye,W:Gye,x:null,X:null,y:qye,Y:Kye,Z:Vye,"%":FL},C={a:ie,A:Q,b:se,B:me,c:null,d:UL,e:UL,f:Qye,g:cve,G:dve,H:Zye,I:Xye,j:Jye,L:D8,m:eve,M:tve,p:he,q:_e,Q:HL,s:GL,S:nve,u:rve,U:ive,V:ave,w:ove,W:sve,x:null,X:null,y:lve,Y:uve,Z:fve,"%":FL},D={a:K,A:F,b:z,B:W,c:X,d:$L,e:$L,f:Oye,g:IL,G:LL,H:BL,I:BL,j:Eye,L:jye,m:kye,M:Tye,p:Y,q:Sye,Q:Cye,s:Mye,S:Aye,u:yye,U:vye,V:xye,w:bye,W:wye,x:Z,X:G,y:IL,Y:LL,Z:_ye,"%":Nye};j.x=P(n,j),j.X=P(r,j),j.c=P(t,j),C.x=P(n,C),C.X=P(r,C),C.c=P(t,C);function P(re,Ee){return function(we){var le=[],Ue=-1,Fe=0,Ne=re.length,Pe,Ge,Oe;for(we instanceof Date||(we=new Date(+we));++Ue<Ne;)re.charCodeAt(Ue)===37&&(le.push(re.slice(Fe,Ue)),(Ge=RL[Pe=re.charAt(++Ue)])!=null?Pe=re.charAt(++Ue):Ge=Pe==="e"?" ":"0",(Oe=Ee[Pe])&&(Pe=Oe(we,Ge)),le.push(Pe),Fe=Ue+1);return le.push(re.slice(Fe,Ue)),le.join("")}}function $(re,Ee){return function(we){var le=cm(1900,void 0,1),Ue=U(le,re,we+="",0),Fe,Ne;if(Ue!=we.length)return null;if("Q"in le)return new Date(le.Q);if("s"in le)return new Date(le.s*1e3+("L"in le?le.L:0));if(Ee&&!("Z"in le)&&(le.Z=0),"p"in le&&(le.H=le.H%12+le.p*12),le.m===void 0&&(le.m="q"in le?le.q:0),"V"in le){if(le.V<1||le.V>53)return null;"w"in le||(le.w=1),"Z"in le?(Fe=HS(cm(le.y,0,1)),Ne=Fe.getUTCDay(),Fe=Ne>4||Ne===0?nv.ceil(Fe):nv(Fe),Fe=xx.offset(Fe,(le.V-1)*7),le.y=Fe.getUTCFullYear(),le.m=Fe.getUTCMonth(),le.d=Fe.getUTCDate()+(le.w+6)%7):(Fe=FS(cm(le.y,0,1)),Ne=Fe.getDay(),Fe=Ne>4||Ne===0?tv.ceil(Fe):tv(Fe),Fe=Ip.offset(Fe,(le.V-1)*7),le.y=Fe.getFullYear(),le.m=Fe.getMonth(),le.d=Fe.getDate()+(le.w+6)%7)}else("W"in le||"U"in le)&&("w"in le||(le.w="u"in le?le.u%7:"W"in le?1:0),Ne="Z"in le?HS(cm(le.y,0,1)).getUTCDay():FS(cm(le.y,0,1)).getDay(),le.m=0,le.d="W"in le?(le.w+6)%7+le.W*7-(Ne+5)%7:le.w+le.U*7-(Ne+6)%7);return"Z"in le?(le.H+=le.Z/100|0,le.M+=le.Z%100,HS(le)):FS(le)}}function U(re,Ee,we,le){for(var Ue=0,Fe=Ee.length,Ne=we.length,Pe,Ge;Ue<Fe;){if(le>=Ne)return-1;if(Pe=Ee.charCodeAt(Ue++),Pe===37){if(Pe=Ee.charAt(Ue++),Ge=D[Pe in RL?Ee.charAt(Ue++):Pe],!Ge||(le=Ge(re,we,le))<0)return-1}else if(Pe!=we.charCodeAt(le++))return-1}return le}function Y(re,Ee,we){var le=d.exec(Ee.slice(we));return le?(re.p=h.get(le[0].toLowerCase()),we+le[0].length):-1}function K(re,Ee,we){var le=y.exec(Ee.slice(we));return le?(re.w=S.get(le[0].toLowerCase()),we+le[0].length):-1}function F(re,Ee,we){var le=p.exec(Ee.slice(we));return le?(re.w=b.get(le[0].toLowerCase()),we+le[0].length):-1}function z(re,Ee,we){var le=A.exec(Ee.slice(we));return le?(re.m=N.get(le[0].toLowerCase()),we+le[0].length):-1}function W(re,Ee,we){var le=_.exec(Ee.slice(we));return le?(re.m=k.get(le[0].toLowerCase()),we+le[0].length):-1}function X(re,Ee,we){return U(re,t,Ee,we)}function Z(re,Ee,we){return U(re,n,Ee,we)}function G(re,Ee,we){return U(re,r,Ee,we)}function J(re){return o[re.getDay()]}function te(re){return a[re.getDay()]}function ce(re){return u[re.getMonth()]}function oe(re){return l[re.getMonth()]}function B(re){return i[+(re.getHours()>=12)]}function V(re){return 1+~~(re.getMonth()/3)}function ie(re){return o[re.getUTCDay()]}function Q(re){return a[re.getUTCDay()]}function se(re){return u[re.getUTCMonth()]}function me(re){return l[re.getUTCMonth()]}function he(re){return i[+(re.getUTCHours()>=12)]}function _e(re){return 1+~~(re.getUTCMonth()/3)}return{format:function(re){var Ee=P(re+="",j);return Ee.toString=function(){return re},Ee},parse:function(re){var Ee=$(re+="",!1);return Ee.toString=function(){return re},Ee},utcFormat:function(re){var Ee=P(re+="",C);return Ee.toString=function(){return re},Ee},utcParse:function(re){var Ee=$(re+="",!0);return Ee.toString=function(){return re},Ee}}}var RL={"-":"",_:" ",0:"0"},gr=/^\s*\d+/,mye=/^%/,pye=/[\\^$*+?|[\]().{}]/g;function Nt(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(t)+i:i)}function gye(e){return e.replace(pye,"\\$&")}function um(e){return new RegExp("^(?:"+e.map(gye).join("|")+")","i")}function dm(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function bye(e,t,n){var r=gr.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function yye(e,t,n){var r=gr.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function vye(e,t,n){var r=gr.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function xye(e,t,n){var r=gr.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function wye(e,t,n){var r=gr.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function LL(e,t,n){var r=gr.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function IL(e,t,n){var r=gr.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function _ye(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Sye(e,t,n){var r=gr.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function kye(e,t,n){var r=gr.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function $L(e,t,n){var r=gr.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function Eye(e,t,n){var r=gr.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function BL(e,t,n){var r=gr.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function Tye(e,t,n){var r=gr.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function Aye(e,t,n){var r=gr.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function jye(e,t,n){var r=gr.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function Oye(e,t,n){var r=gr.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Nye(e,t,n){var r=mye.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function Cye(e,t,n){var r=gr.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function Mye(e,t,n){var r=gr.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function zL(e,t){return Nt(e.getDate(),t,2)}function Dye(e,t){return Nt(e.getHours(),t,2)}function Pye(e,t){return Nt(e.getHours()%12||12,t,2)}function Rye(e,t){return Nt(1+Ip.count(Rs(e),e),t,3)}function C8(e,t){return Nt(e.getMilliseconds(),t,3)}function Lye(e,t){return C8(e,t)+"000"}function Iye(e,t){return Nt(e.getMonth()+1,t,2)}function $ye(e,t){return Nt(e.getMinutes(),t,2)}function Bye(e,t){return Nt(e.getSeconds(),t,2)}function zye(e){var t=e.getDay();return t===0?7:t}function Uye(e,t){return Nt(wx.count(Rs(e)-1,e),t,2)}function M8(e){var t=e.getDay();return t>=4||t===0?uf(e):uf.ceil(e)}function Fye(e,t){return e=M8(e),Nt(uf.count(Rs(e),e)+(Rs(e).getDay()===4),t,2)}function Hye(e){return e.getDay()}function Gye(e,t){return Nt(tv.count(Rs(e)-1,e),t,2)}function qye(e,t){return Nt(e.getFullYear()%100,t,2)}function Yye(e,t){return e=M8(e),Nt(e.getFullYear()%100,t,2)}function Kye(e,t){return Nt(e.getFullYear()%1e4,t,4)}function Wye(e,t){var n=e.getDay();return e=n>=4||n===0?uf(e):uf.ceil(e),Nt(e.getFullYear()%1e4,t,4)}function Vye(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Nt(t/60|0,"0",2)+Nt(t%60,"0",2)}function UL(e,t){return Nt(e.getUTCDate(),t,2)}function Zye(e,t){return Nt(e.getUTCHours(),t,2)}function Xye(e,t){return Nt(e.getUTCHours()%12||12,t,2)}function Jye(e,t){return Nt(1+xx.count(Ls(e),e),t,3)}function D8(e,t){return Nt(e.getUTCMilliseconds(),t,3)}function Qye(e,t){return D8(e,t)+"000"}function eve(e,t){return Nt(e.getUTCMonth()+1,t,2)}function tve(e,t){return Nt(e.getUTCMinutes(),t,2)}function nve(e,t){return Nt(e.getUTCSeconds(),t,2)}function rve(e){var t=e.getUTCDay();return t===0?7:t}function ive(e,t){return Nt(_x.count(Ls(e)-1,e),t,2)}function P8(e){var t=e.getUTCDay();return t>=4||t===0?df(e):df.ceil(e)}function ave(e,t){return e=P8(e),Nt(df.count(Ls(e),e)+(Ls(e).getUTCDay()===4),t,2)}function ove(e){return e.getUTCDay()}function sve(e,t){return Nt(nv.count(Ls(e)-1,e),t,2)}function lve(e,t){return Nt(e.getUTCFullYear()%100,t,2)}function cve(e,t){return e=P8(e),Nt(e.getUTCFullYear()%100,t,2)}function uve(e,t){return Nt(e.getUTCFullYear()%1e4,t,4)}function dve(e,t){var n=e.getUTCDay();return e=n>=4||n===0?df(e):df.ceil(e),Nt(e.getUTCFullYear()%1e4,t,4)}function fve(){return"+0000"}function FL(){return"%"}function HL(e){return+e}function GL(e){return Math.floor(+e/1e3)}var kd,R8,L8;hve({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function hve(e){return kd=hye(e),R8=kd.format,kd.parse,L8=kd.utcFormat,kd.utcParse,kd}function mve(e){return new Date(e)}function pve(e){return e instanceof Date?+e:+new Date(+e)}function RA(e,t,n,r,i,a,o,l,u,d){var h=wA(),p=h.invert,b=h.domain,y=d(".%L"),S=d(":%S"),_=d("%I:%M"),k=d("%I %p"),A=d("%a %d"),N=d("%b %d"),j=d("%B"),C=d("%Y");function D(P){return(u(P)<P?y:l(P)<P?S:o(P)<P?_:a(P)<P?k:r(P)<P?i(P)<P?A:N:n(P)<P?j:C)(P)}return h.invert=function(P){return new Date(p(P))},h.domain=function(P){return arguments.length?b(Array.from(P,pve)):b().map(mve)},h.ticks=function(P){var $=b();return e($[0],$[$.length-1],P??10)},h.tickFormat=function(P,$){return $==null?D:d($)},h.nice=function(P){var $=b();return(!P||typeof P.range!="function")&&(P=t($[0],$[$.length-1],P??10)),P?b(_8($,P)):h},h.copy=function(){return Lp(h,RA(e,t,n,r,i,a,o,l,u,d))},h}function gve(){return Oa.apply(RA(dye,fye,Rs,DA,wx,Ip,CA,OA,ou,R8).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function bve(){return Oa.apply(RA(cye,uye,Ls,PA,_x,xx,MA,NA,ou,L8).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Sx(){var e=0,t=1,n,r,i,a,o=Wr,l=!1,u;function d(p){return p==null||isNaN(p=+p)?u:o(i===0?.5:(p=(a(p)-n)*i,l?Math.max(0,Math.min(1,p)):p))}d.domain=function(p){return arguments.length?([e,t]=p,n=a(e=+e),r=a(t=+t),i=n===r?0:1/(r-n),d):[e,t]},d.clamp=function(p){return arguments.length?(l=!!p,d):l},d.interpolator=function(p){return arguments.length?(o=p,d):o};function h(p){return function(b){var y,S;return arguments.length?([y,S]=b,o=p(y,S),d):[o(0),o(1)]}}return d.range=h(Of),d.rangeRound=h(xA),d.unknown=function(p){return arguments.length?(u=p,d):u},function(p){return a=p,n=p(e),r=p(t),i=n===r?0:1/(r-n),d}}function Ql(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function I8(){var e=Jl(Sx()(Wr));return e.copy=function(){return Ql(e,I8())},Fs.apply(e,arguments)}function $8(){var e=kA(Sx()).domain([1,10]);return e.copy=function(){return Ql(e,$8()).base(e.base())},Fs.apply(e,arguments)}function B8(){var e=EA(Sx());return e.copy=function(){return Ql(e,B8()).constant(e.constant())},Fs.apply(e,arguments)}function LA(){var e=TA(Sx());return e.copy=function(){return Ql(e,LA()).exponent(e.exponent())},Fs.apply(e,arguments)}function yve(){return LA.apply(null,arguments).exponent(.5)}function z8(){var e=[],t=Wr;function n(r){if(r!=null&&!isNaN(r=+r))return t((Pp(e,r,1)-1)/(e.length-1))}return n.domain=function(r){if(!arguments.length)return e.slice();e=[];for(let i of r)i!=null&&!isNaN(i=+i)&&e.push(i);return e.sort(Fl),n},n.interpolator=function(r){return arguments.length?(t=r,n):t},n.range=function(){return e.map((r,i)=>t(i/(e.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,a)=>rbe(e,a/r))},n.copy=function(){return z8(t).domain(e)},Fs.apply(n,arguments)}function kx(){var e=0,t=.5,n=1,r=1,i,a,o,l,u,d=Wr,h,p=!1,b;function y(_){return isNaN(_=+_)?b:(_=.5+((_=+h(_))-a)*(r*_<r*a?l:u),d(p?Math.max(0,Math.min(1,_)):_))}y.domain=function(_){return arguments.length?([e,t,n]=_,i=h(e=+e),a=h(t=+t),o=h(n=+n),l=i===a?0:.5/(a-i),u=a===o?0:.5/(o-a),r=a<i?-1:1,y):[e,t,n]},y.clamp=function(_){return arguments.length?(p=!!_,y):p},y.interpolator=function(_){return arguments.length?(d=_,y):d};function S(_){return function(k){var A,N,j;return arguments.length?([A,N,j]=k,d=Nbe(_,[A,N,j]),y):[d(0),d(.5),d(1)]}}return y.range=S(Of),y.rangeRound=S(xA),y.unknown=function(_){return arguments.length?(b=_,y):b},function(_){return h=_,i=_(e),a=_(t),o=_(n),l=i===a?0:.5/(a-i),u=a===o?0:.5/(o-a),r=a<i?-1:1,y}}function U8(){var e=Jl(kx()(Wr));return e.copy=function(){return Ql(e,U8())},Fs.apply(e,arguments)}function F8(){var e=kA(kx()).domain([.1,1,10]);return e.copy=function(){return Ql(e,F8()).base(e.base())},Fs.apply(e,arguments)}function H8(){var e=EA(kx());return e.copy=function(){return Ql(e,H8()).constant(e.constant())},Fs.apply(e,arguments)}function IA(){var e=TA(kx());return e.copy=function(){return Ql(e,IA()).exponent(e.exponent())},Fs.apply(e,arguments)}function vve(){return IA.apply(null,arguments).exponent(.5)}const wm=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:bA,scaleDiverging:U8,scaleDivergingLog:F8,scaleDivergingPow:IA,scaleDivergingSqrt:vve,scaleDivergingSymlog:H8,scaleIdentity:w8,scaleImplicit:J2,scaleLinear:x8,scaleLog:S8,scaleOrdinal:gA,scalePoint:obe,scalePow:AA,scaleQuantile:T8,scaleQuantize:A8,scaleRadial:E8,scaleSequential:I8,scaleSequentialLog:$8,scaleSequentialPow:LA,scaleSequentialQuantile:z8,scaleSequentialSqrt:yve,scaleSequentialSymlog:B8,scaleSqrt:Qbe,scaleSymlog:k8,scaleThreshold:j8,scaleTime:gve,scaleUtc:bve,tickFormat:v8},Symbol.toStringTag,{value:"Module"}));var ec=e=>e.chartData,xve=xe([ec],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),$A=(e,t,n,r)=>r?xve(e):ec(e);function Vl(e){if(Array.isArray(e)&&e.length===2){var[t,n]=e;if(jn(t)&&jn(n))return!0}return!1}function qL(e,t,n){return n?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function G8(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[n,r]=e,i,a;if(jn(n))i=n;else if(typeof n=="function")return;if(jn(r))a=r;else if(typeof r=="function")return;var o=[i,a];if(Vl(o))return o}}function wve(e,t,n){if(!(!n&&t==null)){if(typeof e=="function"&&t!=null)try{var r=e(t,n);if(Vl(r))return qL(r,t,n)}catch{}if(Array.isArray(e)&&e.length===2){var[i,a]=e,o,l;if(i==="auto")t!=null&&(o=Math.min(...t));else if(Qe(i))o=i;else if(typeof i=="function")try{t!=null&&(o=i(t?.[0]))}catch{}else if(typeof i=="string"&&w3.test(i)){var u=w3.exec(i);if(u==null||t==null)o=void 0;else{var d=+u[1];o=t[0]-d}}else o=t?.[0];if(a==="auto")t!=null&&(l=Math.max(...t));else if(Qe(a))l=a;else if(typeof a=="function")try{t!=null&&(l=a(t?.[1]))}catch{}else if(typeof a=="string"&&_3.test(a)){var h=_3.exec(a);if(h==null||t==null)l=void 0;else{var p=+h[1];l=t[1]+p}}else l=t?.[1];var b=[o,l];if(Vl(b))return t==null?b:qL(b,t,n)}}}var Nf=1e9,_ve={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},zA,fn=!0,Ea="[DecimalError] ",fu=Ea+"Invalid argument: ",BA=Ea+"Exponent out of range: ",Cf=Math.floor,Jc=Math.pow,Sve=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,zi,dr=1e7,nn=7,q8=9007199254740991,rv=Cf(q8/nn),He={};He.absoluteValue=He.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};He.comparedTo=He.cmp=function(e){var t,n,r,i,a=this;if(e=new a.constructor(e),a.s!==e.s)return a.s||-e.s;if(a.e!==e.e)return a.e>e.e^a.s<0?1:-1;for(r=a.d.length,i=e.d.length,t=0,n=r<i?r:i;t<n;++t)if(a.d[t]!==e.d[t])return a.d[t]>e.d[t]^a.s<0?1:-1;return r===i?0:r>i^a.s<0?1:-1};He.decimalPlaces=He.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*nn;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};He.dividedBy=He.div=function(e){return As(this,new this.constructor(e))};He.dividedToIntegerBy=He.idiv=function(e){var t=this,n=t.constructor;return Wt(As(t,new n(e),0,1),n.precision)};He.equals=He.eq=function(e){return!this.cmp(e)};He.exponent=function(){return qn(this)};He.greaterThan=He.gt=function(e){return this.cmp(e)>0};He.greaterThanOrEqualTo=He.gte=function(e){return this.cmp(e)>=0};He.isInteger=He.isint=function(){return this.e>this.d.length-2};He.isNegative=He.isneg=function(){return this.s<0};He.isPositive=He.ispos=function(){return this.s>0};He.isZero=function(){return this.s===0};He.lessThan=He.lt=function(e){return this.cmp(e)<0};He.lessThanOrEqualTo=He.lte=function(e){return this.cmp(e)<1};He.logarithm=He.log=function(e){var t,n=this,r=n.constructor,i=r.precision,a=i+5;if(e===void 0)e=new r(10);else if(e=new r(e),e.s<1||e.eq(zi))throw Error(Ea+"NaN");if(n.s<1)throw Error(Ea+(n.s?"NaN":"-Infinity"));return n.eq(zi)?new r(0):(fn=!1,t=As(sp(n,a),sp(e,a),a),fn=!0,Wt(t,i))};He.minus=He.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?W8(t,e):Y8(t,(e.s=-e.s,e))};He.modulo=He.mod=function(e){var t,n=this,r=n.constructor,i=r.precision;if(e=new r(e),!e.s)throw Error(Ea+"NaN");return n.s?(fn=!1,t=As(n,e,0,1).times(e),fn=!0,n.minus(t)):Wt(new r(n),i)};He.naturalExponential=He.exp=function(){return K8(this)};He.naturalLogarithm=He.ln=function(){return sp(this)};He.negated=He.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};He.plus=He.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?Y8(t,e):W8(t,(e.s=-e.s,e))};He.precision=He.sd=function(e){var t,n,r,i=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(fu+e);if(t=qn(i)+1,r=i.d.length-1,n=r*nn+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return e&&t>n?t:n};He.squareRoot=He.sqrt=function(){var e,t,n,r,i,a,o,l=this,u=l.constructor;if(l.s<1){if(!l.s)return new u(0);throw Error(Ea+"NaN")}for(e=qn(l),fn=!1,i=Math.sqrt(+l),i==0||i==1/0?(t=Do(l.d),(t.length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=Cf((e+1)/2)-(e<0||e%2),i==1/0?t="5e"+e:(t=i.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),r=new u(t)):r=new u(i.toString()),n=u.precision,i=o=n+3;;)if(a=r,r=a.plus(As(l,a,o+2)).times(.5),Do(a.d).slice(0,o)===(t=Do(r.d)).slice(0,o)){if(t=t.slice(o-3,o+1),i==o&&t=="4999"){if(Wt(a,n+1,0),a.times(a).eq(l)){r=a;break}}else if(t!="9999")break;o+=4}return fn=!0,Wt(r,n)};He.times=He.mul=function(e){var t,n,r,i,a,o,l,u,d,h=this,p=h.constructor,b=h.d,y=(e=new p(e)).d;if(!h.s||!e.s)return new p(0);for(e.s*=h.s,n=h.e+e.e,u=b.length,d=y.length,u<d&&(a=b,b=y,y=a,o=u,u=d,d=o),a=[],o=u+d,r=o;r--;)a.push(0);for(r=d;--r>=0;){for(t=0,i=u+r;i>r;)l=a[i]+y[r]*b[i-r-1]+t,a[i--]=l%dr|0,t=l/dr|0;a[i]=(a[i]+t)%dr|0}for(;!a[--o];)a.pop();return t?++n:a.shift(),e.d=a,e.e=n,fn?Wt(e,p.precision):e};He.toDecimalPlaces=He.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),e===void 0?n:(zo(e,0,Nf),t===void 0?t=r.rounding:zo(t,0,8),Wt(n,e+qn(n)+1,t))};He.toExponential=function(e,t){var n,r=this,i=r.constructor;return e===void 0?n=vu(r,!0):(zo(e,0,Nf),t===void 0?t=i.rounding:zo(t,0,8),r=Wt(new i(r),e+1,t),n=vu(r,!0,e+1)),n};He.toFixed=function(e,t){var n,r,i=this,a=i.constructor;return e===void 0?vu(i):(zo(e,0,Nf),t===void 0?t=a.rounding:zo(t,0,8),r=Wt(new a(i),e+qn(i)+1,t),n=vu(r.abs(),!1,e+qn(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};He.toInteger=He.toint=function(){var e=this,t=e.constructor;return Wt(new t(e),qn(e)+1,t.rounding)};He.toNumber=function(){return+this};He.toPower=He.pow=function(e){var t,n,r,i,a,o,l=this,u=l.constructor,d=12,h=+(e=new u(e));if(!e.s)return new u(zi);if(l=new u(l),!l.s){if(e.s<1)throw Error(Ea+"Infinity");return l}if(l.eq(zi))return l;if(r=u.precision,e.eq(zi))return Wt(l,r);if(t=e.e,n=e.d.length-1,o=t>=n,a=l.s,o){if((n=h<0?-h:h)<=q8){for(i=new u(zi),t=Math.ceil(r/nn+4),fn=!1;n%2&&(i=i.times(l),KL(i.d,t)),n=Cf(n/2),n!==0;)l=l.times(l),KL(l.d,t);return fn=!0,e.s<0?new u(zi).div(i):Wt(i,r)}}else if(a<0)throw Error(Ea+"NaN");return a=a<0&&e.d[Math.max(t,n)]&1?-1:1,l.s=1,fn=!1,i=e.times(sp(l,r+d)),fn=!0,i=K8(i),i.s=a,i};He.toPrecision=function(e,t){var n,r,i=this,a=i.constructor;return e===void 0?(n=qn(i),r=vu(i,n<=a.toExpNeg||n>=a.toExpPos)):(zo(e,1,Nf),t===void 0?t=a.rounding:zo(t,0,8),i=Wt(new a(i),e,t),n=qn(i),r=vu(i,e<=n||n<=a.toExpNeg,e)),r};He.toSignificantDigits=He.tosd=function(e,t){var n=this,r=n.constructor;return e===void 0?(e=r.precision,t=r.rounding):(zo(e,1,Nf),t===void 0?t=r.rounding:zo(t,0,8)),Wt(new r(n),e,t)};He.toString=He.valueOf=He.val=He.toJSON=He[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=qn(e),n=e.constructor;return vu(e,t<=n.toExpNeg||t>=n.toExpPos)};function Y8(e,t){var n,r,i,a,o,l,u,d,h=e.constructor,p=h.precision;if(!e.s||!t.s)return t.s||(t=new h(e)),fn?Wt(t,p):t;if(u=e.d,d=t.d,o=e.e,i=t.e,u=u.slice(),a=o-i,a){for(a<0?(r=u,a=-a,l=d.length):(r=d,i=o,l=u.length),o=Math.ceil(p/nn),l=o>l?o+1:l+1,a>l&&(a=l,r.length=1),r.reverse();a--;)r.push(0);r.reverse()}for(l=u.length,a=d.length,l-a<0&&(a=l,r=d,d=u,u=r),n=0;a;)n=(u[--a]=u[a]+d[a]+n)/dr|0,u[a]%=dr;for(n&&(u.unshift(n),++i),l=u.length;u[--l]==0;)u.pop();return t.d=u,t.e=i,fn?Wt(t,p):t}function zo(e,t,n){if(e!==~~e||e<t||e>n)throw Error(fu+e)}function Do(e){var t,n,r,i=e.length-1,a="",o=e[0];if(i>0){for(a+=o,t=1;t<i;t++)r=e[t]+"",n=nn-r.length,n&&(a+=Cl(n)),a+=r;o=e[t],r=o+"",n=nn-r.length,n&&(a+=Cl(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return a+o}var As=(function(){function e(r,i){var a,o=0,l=r.length;for(r=r.slice();l--;)a=r[l]*i+o,r[l]=a%dr|0,o=a/dr|0;return o&&r.unshift(o),r}function t(r,i,a,o){var l,u;if(a!=o)u=a>o?1:-1;else for(l=u=0;l<a;l++)if(r[l]!=i[l]){u=r[l]>i[l]?1:-1;break}return u}function n(r,i,a){for(var o=0;a--;)r[a]-=o,o=r[a]<i[a]?1:0,r[a]=o*dr+r[a]-i[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,a,o){var l,u,d,h,p,b,y,S,_,k,A,N,j,C,D,P,$,U,Y=r.constructor,K=r.s==i.s?1:-1,F=r.d,z=i.d;if(!r.s)return new Y(r);if(!i.s)throw Error(Ea+"Division by zero");for(u=r.e-i.e,$=z.length,D=F.length,y=new Y(K),S=y.d=[],d=0;z[d]==(F[d]||0);)++d;if(z[d]>(F[d]||0)&&--u,a==null?N=a=Y.precision:o?N=a+(qn(r)-qn(i))+1:N=a,N<0)return new Y(0);if(N=N/nn+2|0,d=0,$==1)for(h=0,z=z[0],N++;(d<D||h)&&N--;d++)j=h*dr+(F[d]||0),S[d]=j/z|0,h=j%z|0;else{for(h=dr/(z[0]+1)|0,h>1&&(z=e(z,h),F=e(F,h),$=z.length,D=F.length),C=$,_=F.slice(0,$),k=_.length;k<$;)_[k++]=0;U=z.slice(),U.unshift(0),P=z[0],z[1]>=dr/2&&++P;do h=0,l=t(z,_,$,k),l<0?(A=_[0],$!=k&&(A=A*dr+(_[1]||0)),h=A/P|0,h>1?(h>=dr&&(h=dr-1),p=e(z,h),b=p.length,k=_.length,l=t(p,_,b,k),l==1&&(h--,n(p,$<b?U:z,b))):(h==0&&(l=h=1),p=z.slice()),b=p.length,b<k&&p.unshift(0),n(_,p,k),l==-1&&(k=_.length,l=t(z,_,$,k),l<1&&(h++,n(_,$<k?U:z,k))),k=_.length):l===0&&(h++,_=[0]),S[d++]=h,l&&_[0]?_[k++]=F[C]||0:(_=[F[C]],k=1);while((C++<D||_[0]!==void 0)&&N--)}return S[0]||S.shift(),y.e=u,Wt(y,o?a+qn(y)+1:a)}})();function K8(e,t){var n,r,i,a,o,l,u=0,d=0,h=e.constructor,p=h.precision;if(qn(e)>16)throw Error(BA+qn(e));if(!e.s)return new h(zi);for(fn=!1,l=p,o=new h(.03125);e.abs().gte(.1);)e=e.times(o),d+=5;for(r=Math.log(Jc(2,d))/Math.LN10*2+5|0,l+=r,n=i=a=new h(zi),h.precision=l;;){if(i=Wt(i.times(e),l),n=n.times(++u),o=a.plus(As(i,n,l)),Do(o.d).slice(0,l)===Do(a.d).slice(0,l)){for(;d--;)a=Wt(a.times(a),l);return h.precision=p,t==null?(fn=!0,Wt(a,p)):a}a=o}}function qn(e){for(var t=e.e*nn,n=e.d[0];n>=10;n/=10)t++;return t}function GS(e,t,n){if(t>e.LN10.sd())throw fn=!0,n&&(e.precision=n),Error(Ea+"LN10 precision limit exceeded");return Wt(new e(e.LN10),t)}function Cl(e){for(var t="";e--;)t+="0";return t}function sp(e,t){var n,r,i,a,o,l,u,d,h,p=1,b=10,y=e,S=y.d,_=y.constructor,k=_.precision;if(y.s<1)throw Error(Ea+(y.s?"NaN":"-Infinity"));if(y.eq(zi))return new _(0);if(t==null?(fn=!1,d=k):d=t,y.eq(10))return t==null&&(fn=!0),GS(_,d);if(d+=b,_.precision=d,n=Do(S),r=n.charAt(0),a=qn(y),Math.abs(a)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)y=y.times(e),n=Do(y.d),r=n.charAt(0),p++;a=qn(y),r>1?(y=new _("0."+n),a++):y=new _(r+"."+n.slice(1))}else return u=GS(_,d+2,k).times(a+""),y=sp(new _(r+"."+n.slice(1)),d-b).plus(u),_.precision=k,t==null?(fn=!0,Wt(y,k)):y;for(l=o=y=As(y.minus(zi),y.plus(zi),d),h=Wt(y.times(y),d),i=3;;){if(o=Wt(o.times(h),d),u=l.plus(As(o,new _(i),d)),Do(u.d).slice(0,d)===Do(l.d).slice(0,d))return l=l.times(2),a!==0&&(l=l.plus(GS(_,d+2,k).times(a+""))),l=As(l,new _(p),d),_.precision=k,t==null?(fn=!0,Wt(l,k)):l;l=u,i+=2}}function YL(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charCodeAt(r)===48;)++r;for(i=t.length;t.charCodeAt(i-1)===48;)--i;if(t=t.slice(r,i),t){if(i-=r,n=n-r-1,e.e=Cf(n/nn),e.d=[],r=(n+1)%nn,n<0&&(r+=nn),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=nn;r<i;)e.d.push(+t.slice(r,r+=nn));t=t.slice(r),r=nn-t.length}else r-=i;for(;r--;)t+="0";if(e.d.push(+t),fn&&(e.e>rv||e.e<-rv))throw Error(BA+n)}else e.s=0,e.e=0,e.d=[0];return e}function Wt(e,t,n){var r,i,a,o,l,u,d,h,p=e.d;for(o=1,a=p[0];a>=10;a/=10)o++;if(r=t-o,r<0)r+=nn,i=t,d=p[h=0];else{if(h=Math.ceil((r+1)/nn),a=p.length,h>=a)return e;for(d=a=p[h],o=1;a>=10;a/=10)o++;r%=nn,i=r-nn+o}if(n!==void 0&&(a=Jc(10,o-i-1),l=d/a%10|0,u=t<0||p[h+1]!==void 0||d%a,u=n<4?(l||u)&&(n==0||n==(e.s<0?3:2)):l>5||l==5&&(n==4||u||n==6&&(r>0?i>0?d/Jc(10,o-i):0:p[h-1])%10&1||n==(e.s<0?8:7))),t<1||!p[0])return u?(a=qn(e),p.length=1,t=t-a-1,p[0]=Jc(10,(nn-t%nn)%nn),e.e=Cf(-t/nn)||0):(p.length=1,p[0]=e.e=e.s=0),e;if(r==0?(p.length=h,a=1,h--):(p.length=h+1,a=Jc(10,nn-r),p[h]=i>0?(d/Jc(10,o-i)%Jc(10,i)|0)*a:0),u)for(;;)if(h==0){(p[0]+=a)==dr&&(p[0]=1,++e.e);break}else{if(p[h]+=a,p[h]!=dr)break;p[h--]=0,a=1}for(r=p.length;p[--r]===0;)p.pop();if(fn&&(e.e>rv||e.e<-rv))throw Error(BA+qn(e));return e}function W8(e,t){var n,r,i,a,o,l,u,d,h,p,b=e.constructor,y=b.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new b(e),fn?Wt(t,y):t;if(u=e.d,p=t.d,r=t.e,d=e.e,u=u.slice(),o=d-r,o){for(h=o<0,h?(n=u,o=-o,l=p.length):(n=p,r=d,l=u.length),i=Math.max(Math.ceil(y/nn),l)+2,o>i&&(o=i,n.length=1),n.reverse(),i=o;i--;)n.push(0);n.reverse()}else{for(i=u.length,l=p.length,h=i<l,h&&(l=i),i=0;i<l;i++)if(u[i]!=p[i]){h=u[i]<p[i];break}o=0}for(h&&(n=u,u=p,p=n,t.s=-t.s),l=u.length,i=p.length-l;i>0;--i)u[l++]=0;for(i=p.length;i>o;){if(u[--i]<p[i]){for(a=i;a&&u[--a]===0;)u[a]=dr-1;--u[a],u[i]+=dr}u[i]-=p[i]}for(;u[--l]===0;)u.pop();for(;u[0]===0;u.shift())--r;return u[0]?(t.d=u,t.e=r,fn?Wt(t,y):t):new b(0)}function vu(e,t,n){var r,i=qn(e),a=Do(e.d),o=a.length;return t?(n&&(r=n-o)>0?a=a.charAt(0)+"."+a.slice(1)+Cl(r):o>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+Cl(-i-1)+a,n&&(r=n-o)>0&&(a+=Cl(r))):i>=o?(a+=Cl(i+1-o),n&&(r=n-i-1)>0&&(a=a+"."+Cl(r))):((r=i+1)<o&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-o)>0&&(i+1===o&&(a+="."),a+=Cl(r))),e.s<0?"-"+a:a}function KL(e,t){if(e.length>t)return e.length=t,!0}function V8(e){var t,n,r;function i(a){var o=this;if(!(o instanceof i))return new i(a);if(o.constructor=i,a instanceof i){o.s=a.s,o.e=a.e,o.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(fu+a);if(a>0)o.s=1;else if(a<0)a=-a,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(a===~~a&&a<1e7){o.e=0,o.d=[a];return}return YL(o,a.toString())}else if(typeof a!="string")throw Error(fu+a);if(a.charCodeAt(0)===45?(a=a.slice(1),o.s=-1):o.s=1,Sve.test(a))YL(o,a);else throw Error(fu+a)}if(i.prototype=He,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=V8,i.config=i.set=kve,e===void 0&&(e={}),e)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<r.length;)e.hasOwnProperty(n=r[t++])||(e[n]=this[n]);return i.config(e),i}function kve(e){if(!e||typeof e!="object")throw Error(Ea+"Object expected");var t,n,r,i=["precision",1,Nf,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if((r=e[n=i[t]])!==void 0)if(Cf(r)===r&&r>=i[t+1]&&r<=i[t+2])this[n]=r;else throw Error(fu+n+": "+r);if((r=e[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(fu+n+": "+r);return this}var zA=V8(_ve);zi=new zA(1);const zt=zA;var Eve=e=>e,Z8={},X8=e=>e===Z8,WL=e=>function t(){return arguments.length===0||arguments.length===1&&X8(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},J8=(e,t)=>e===1?t:WL(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var a=r.filter(o=>o!==Z8).length;return a>=e?t(...r):J8(e-a,WL(function(){for(var o=arguments.length,l=new Array(o),u=0;u<o;u++)l[u]=arguments[u];var d=r.map(h=>X8(h)?l.shift():h);return t(...d,...l)}))}),Tve=e=>J8(e.length,e),nE=(e,t)=>{for(var n=[],r=e;r<t;++r)n[r-e]=r;return n},Ave=Tve((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(n=>t[n]).map(e)),jve=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(!n.length)return Eve;var i=n.reverse(),a=i[0],o=i.slice(1);return function(){return o.reduce((l,u)=>u(l),a(...arguments))}},rE=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join("");function Q8(e){var t;return e===0?t=1:t=Math.floor(new zt(e).abs().log(10).toNumber())+1,t}function ez(e,t,n){for(var r=new zt(e),i=0,a=[];r.lt(t)&&i<1e5;)a.push(r.toNumber()),r=r.add(n),i++;return a}var tz=e=>{var[t,n]=e,[r,i]=[t,n];return t>n&&([r,i]=[n,t]),[r,i]},nz=(e,t,n)=>{if(e.lte(0))return new zt(0);var r=Q8(e.toNumber()),i=new zt(10).pow(r),a=e.div(i),o=r!==1?.05:.1,l=new zt(Math.ceil(a.div(o).toNumber())).add(n).mul(o),u=l.mul(i);return t?new zt(u.toNumber()):new zt(Math.ceil(u.toNumber()))},Ove=(e,t,n)=>{var r=new zt(1),i=new zt(e);if(!i.isint()&&n){var a=Math.abs(e);a<1?(r=new zt(10).pow(Q8(e)-1),i=new zt(Math.floor(i.div(r).toNumber())).mul(r)):a>1&&(i=new zt(Math.floor(e)))}else e===0?i=new zt(Math.floor((t-1)/2)):n||(i=new zt(Math.floor(e)));var o=Math.floor((t-1)/2),l=jve(Ave(u=>i.add(new zt(u-o).mul(r)).toNumber()),nE);return l(0,t)},rz=function(t,n,r,i){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-t)/(r-1)))return{step:new zt(0),tickMin:new zt(0),tickMax:new zt(0)};var o=nz(new zt(n).sub(t).div(r-1),i,a),l;t<=0&&n>=0?l=new zt(0):(l=new zt(t).add(n).div(2),l=l.sub(new zt(l).mod(o)));var u=Math.ceil(l.sub(t).div(o).toNumber()),d=Math.ceil(new zt(n).sub(l).div(o).toNumber()),h=u+d+1;return h>r?rz(t,n,r,i,a+1):(h<r&&(d=n>0?d+(r-h):d,u=n>0?u:u+(r-h)),{step:o,tickMin:l.sub(new zt(u).mul(o)),tickMax:l.add(new zt(d).mul(o))})},Nve=function(t){var[n,r]=t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(i,2),[l,u]=tz([n,r]);if(l===-1/0||u===1/0){var d=u===1/0?[l,...nE(0,i-1).map(()=>1/0)]:[...nE(0,i-1).map(()=>-1/0),u];return n>r?rE(d):d}if(l===u)return Ove(l,i,a);var{step:h,tickMin:p,tickMax:b}=rz(l,u,o,a,0),y=ez(p,b.add(new zt(.1).mul(h)),h);return n>r?rE(y):y},Cve=function(t,n){var[r,i]=t,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[o,l]=tz([r,i]);if(o===-1/0||l===1/0)return[r,i];if(o===l)return[o];var u=Math.max(n,2),d=nz(new zt(l).sub(o).div(u-1),a,0),h=[...ez(new zt(o),new zt(l),d),l];return a===!1&&(h=h.map(p=>Math.round(p))),r>i?rE(h):h},Mve=e=>e.rootProps.barCategoryGap,Ex=e=>e.rootProps.stackOffset,iz=e=>e.rootProps.reverseStackOrder,UA=e=>e.options.chartName,FA=e=>e.rootProps.syncId,az=e=>e.rootProps.syncMethod,HA=e=>e.options.eventEmitter,Dve=e=>e.rootProps.baseValue,Vr={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},xs={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},$i={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},Tx=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},Pve={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:xs.angleAxisId,includeHidden:!1,name:void 0,reversed:xs.reversed,scale:xs.scale,tick:xs.tick,tickCount:void 0,ticks:void 0,type:xs.type,unit:void 0},Rve={allowDataOverflow:$i.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:$i.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:$i.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:$i.scale,tick:$i.tick,tickCount:$i.tickCount,ticks:void 0,type:$i.type,unit:void 0},Lve={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:xs.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:xs.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:xs.scale,tick:xs.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},Ive={allowDataOverflow:$i.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:$i.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:$i.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:$i.scale,tick:$i.tick,tickCount:$i.tickCount,ticks:void 0,type:"category",unit:void 0},GA=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?Lve:Pve,qA=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?Ive:Rve,Ax=e=>e.polarOptions,YA=xe([zs,Us,Nr],N0e),oz=xe([Ax,YA],(e,t)=>{if(e!=null)return Wl(e.innerRadius,t,0)}),sz=xe([Ax,YA],(e,t)=>{if(e!=null)return Wl(e.outerRadius,t,t*.8)}),$ve=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:n}=e;return[t,n]},lz=xe([Ax],$ve);xe([GA,lz],Tx);var cz=xe([YA,oz,sz],(e,t,n)=>{if(!(e==null||t==null||n==null))return[t,n]});xe([qA,cz],Tx);var uz=xe([Jt,Ax,oz,sz,zs,Us],(e,t,n,r,i,a)=>{if(!(e!=="centric"&&e!=="radial"||t==null||n==null||r==null)){var{cx:o,cy:l,startAngle:u,endAngle:d}=t;return{cx:Wl(o,i,i/2),cy:Wl(l,a,a/2),innerRadius:n,outerRadius:r,startAngle:u,endAngle:d,clockWise:!1}}}),tr=(e,t)=>t,jx=(e,t,n)=>n;function KA(e){return e?.id}function dz(e,t,n){var{chartData:r=[]}=t,{allowDuplicatedCategory:i,dataKey:a}=n,o=new Map;return e.forEach(l=>{var u,d=(u=l.data)!==null&&u!==void 0?u:r;if(!(d==null||d.length===0)){var h=KA(l);d.forEach((p,b)=>{var y=a==null||i?b:String(Ir(p,a,null)),S=Ir(p,l.dataKey,0),_;o.has(y)?_=o.get(y):_={},Object.assign(_,{[h]:S}),o.set(y,_)})}}),Array.from(o.values())}function WA(e){return e.stackId!=null&&e.dataKey!=null}var Ox=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function Nx(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function Bve(e,t){if(e.length===t.length){for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return!1}var nr=e=>{var t=Jt(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},Mf=e=>e.tooltip.settings.axisId;function VL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function iv(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?VL(Object(n),!0).forEach(function(r){zve(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):VL(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function zve(e,t,n){return(t=Uve(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Uve(e){var t=Fve(e,"string");return typeof t=="symbol"?t:t+""}function Fve(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var iE=[0,"auto"],lr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},fz=(e,t)=>e.cartesianAxis.xAxis[t],Hs=(e,t)=>{var n=fz(e,t);return n??lr},cr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:iE,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Cp},hz=(e,t)=>e.cartesianAxis.yAxis[t],Gs=(e,t)=>{var n=hz(e,t);return n??cr},Hve={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},VA=(e,t)=>{var n=e.cartesianAxis.zAxis[t];return n??Hve},Qr=(e,t,n)=>{switch(t){case"xAxis":return Hs(e,n);case"yAxis":return Gs(e,n);case"zAxis":return VA(e,n);case"angleAxis":return GA(e,n);case"radiusAxis":return qA(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},Gve=(e,t,n)=>{switch(t){case"xAxis":return Hs(e,n);case"yAxis":return Gs(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},$p=(e,t,n)=>{switch(t){case"xAxis":return Hs(e,n);case"yAxis":return Gs(e,n);case"angleAxis":return GA(e,n);case"radiusAxis":return qA(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},mz=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function pz(e,t){return n=>{switch(e){case"xAxis":return"xAxisId"in n&&n.xAxisId===t;case"yAxis":return"yAxisId"in n&&n.yAxisId===t;case"zAxis":return"zAxisId"in n&&n.zAxisId===t;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===t;default:return!1}}}var gz=e=>e.graphicalItems.cartesianItems,qve=xe([tr,jx],pz),bz=(e,t,n)=>e.filter(n).filter(r=>t?.includeHidden===!0?!0:!r.hide),Bp=xe([gz,Qr,qve],bz,{memoizeOptions:{resultEqualityCheck:Nx}}),yz=xe([Bp],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(WA)),vz=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),Yve=xe([Bp],vz),xz=e=>e.map(t=>t.data).filter(Boolean).flat(1),Kve=xe([Bp],xz,{memoizeOptions:{resultEqualityCheck:Nx}}),wz=(e,t)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:i}=t;return e.length>0?e:n.slice(r,i+1)},ZA=xe([Kve,$A],wz),_z=(e,t,n)=>t?.dataKey!=null?e.map(r=>({value:Ir(r,t.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>e.map(i=>({value:Ir(i,r)}))):e.map(r=>({value:r})),Cx=xe([ZA,Qr,Bp],_z);function Sz(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function Fb(e){if($o(e)||e instanceof Date){var t=Number(e);if(jn(t))return t}}function ZL(e){if(Array.isArray(e)){var t=[Fb(e[0]),Fb(e[1])];return Vl(t)?t:void 0}var n=Fb(e);if(n!=null)return[n,n]}function Is(e){return e.map(Fb).filter(mhe)}function Wve(e,t,n){return!n||typeof t!="number"||no(t)?[]:n.length?Is(n.flatMap(r=>{var i=Ir(e,r.dataKey),a,o;if(Array.isArray(i)?[a,o]=i:a=o=i,!(!jn(a)||!jn(o)))return[t-a,t+o]})):[]}var rr=e=>{var t=nr(e),n=Mf(e);return $p(e,t,n)},zp=xe([rr],e=>e?.dataKey),Vve=xe([yz,$A,rr],dz),kz=(e,t,n,r)=>{var i={},a=t.reduce((o,l)=>(l.stackId==null||(o[l.stackId]==null&&(o[l.stackId]=[]),o[l.stackId].push(l)),o),i);return Object.fromEntries(Object.entries(a).map(o=>{var[l,u]=o,d=r?[...u].reverse():u,h=d.map(KA);return[l,{stackedData:vpe(e,h,n),graphicalItems:d}]}))},aE=xe([Vve,yz,Ex,iz],kz),Ez=(e,t,n,r)=>{var{dataStartIndex:i,dataEndIndex:a}=t;if(r==null&&n!=="zAxis"){var o=Spe(e,i,a);if(!(o!=null&&o[0]===0&&o[1]===0))return o}},Zve=xe([Qr],e=>e.allowDataOverflow),XA=e=>{var t;if(e==null||!("domain"in e))return iE;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var n=Is(e.ticks);return[Math.min(...n),Math.max(...n)]}if(e.type==="category")return e.ticks.map(String)}return(t=e?.domain)!==null&&t!==void 0?t:iE},Tz=xe([Qr],XA),Az=xe([Tz,Zve],G8),Xve=xe([aE,ec,tr,Az],Ez,{memoizeOptions:{resultEqualityCheck:Ox}}),JA=e=>e.errorBars,Jve=(e,t,n)=>e.flatMap(r=>t[r.id]).filter(Boolean).filter(r=>Sz(n,r)),av=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n.filter(Boolean);if(i.length!==0){var a=i.flat(),o=Math.min(...a),l=Math.max(...a);return[o,l]}},jz=(e,t,n,r,i)=>{var a,o;if(n.length>0&&e.forEach(l=>{n.forEach(u=>{var d,h,p=(d=r[u.id])===null||d===void 0?void 0:d.filter(A=>Sz(i,A)),b=Ir(l,(h=t.dataKey)!==null&&h!==void 0?h:u.dataKey),y=Wve(l,b,p);if(y.length>=2){var S=Math.min(...y),_=Math.max(...y);(a==null||S<a)&&(a=S),(o==null||_>o)&&(o=_)}var k=ZL(b);k!=null&&(a=a==null?k[0]:Math.min(a,k[0]),o=o==null?k[1]:Math.max(o,k[1]))})}),t?.dataKey!=null&&e.forEach(l=>{var u=ZL(Ir(l,t.dataKey));u!=null&&(a=a==null?u[0]:Math.min(a,u[0]),o=o==null?u[1]:Math.max(o,u[1]))}),jn(a)&&jn(o))return[a,o]},Qve=xe([ZA,Qr,Yve,JA,tr],jz,{memoizeOptions:{resultEqualityCheck:Ox}});function exe(e){var{value:t}=e;if($o(t)||t instanceof Date)return t}var txe=(e,t,n)=>{var r=e.map(exe).filter(i=>i!=null);return n&&(t.dataKey==null||t.allowDuplicatedCategory&&K7(r))?c8(0,e.length):t.allowDuplicatedCategory?r:Array.from(new Set(r))},Oz=e=>e.referenceElements.dots,Df=(e,t,n)=>e.filter(r=>r.ifOverflow==="extendDomain").filter(r=>t==="xAxis"?r.xAxisId===n:r.yAxisId===n),nxe=xe([Oz,tr,jx],Df),Nz=e=>e.referenceElements.areas,rxe=xe([Nz,tr,jx],Df),Cz=e=>e.referenceElements.lines,ixe=xe([Cz,tr,jx],Df),Mz=(e,t)=>{var n=Is(e.map(r=>t==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},axe=xe(nxe,tr,Mz),Dz=(e,t)=>{var n=Is(e.flatMap(r=>[t==="xAxis"?r.x1:r.y1,t==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},oxe=xe([rxe,tr],Dz);function sxe(e){var t;if(e.x!=null)return Is([e.x]);var n=(t=e.segment)===null||t===void 0?void 0:t.map(r=>r.x);return n==null||n.length===0?[]:Is(n)}function lxe(e){var t;if(e.y!=null)return Is([e.y]);var n=(t=e.segment)===null||t===void 0?void 0:t.map(r=>r.y);return n==null||n.length===0?[]:Is(n)}var Pz=(e,t)=>{var n=e.flatMap(r=>t==="xAxis"?sxe(r):lxe(r));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},cxe=xe([ixe,tr],Pz),uxe=xe(axe,cxe,oxe,(e,t,n)=>av(e,n,t)),Rz=(e,t,n,r,i,a,o,l)=>{if(n!=null)return n;var u=o==="vertical"&&l==="xAxis"||o==="horizontal"&&l==="yAxis",d=u?av(r,a,i):av(a,i);return wve(t,d,e.allowDataOverflow)},dxe=xe([Qr,Tz,Az,Xve,Qve,uxe,Jt,tr],Rz,{memoizeOptions:{resultEqualityCheck:Ox}}),fxe=[0,1],Lz=(e,t,n,r,i,a,o)=>{if(!((e==null||n==null||n.length===0)&&o===void 0)){var{dataKey:l,type:u}=e,d=Bs(t,a);if(d&&l==null){var h;return c8(0,(h=n?.length)!==null&&h!==void 0?h:0)}return u==="category"?txe(r,e,d):i==="expand"?fxe:o}},QA=xe([Qr,Jt,ZA,Cx,Ex,tr,dxe],Lz),Iz=(e,t,n,r,i)=>{if(e!=null){var{scale:a,type:o}=e;if(a==="auto")return t==="radial"&&i==="radiusAxis"?"band":t==="radial"&&i==="angleAxis"?"linear":o==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?"point":o==="category"?"band":"linear";if(typeof a=="string"){var l="scale".concat(tA(a));return l in wm?l:"point"}}},Up=xe([Qr,Jt,mz,UA,tr],Iz);function hxe(e){if(e!=null){if(e in wm)return wm[e]();var t="scale".concat(tA(e));if(t in wm)return wm[t]()}}function ej(e,t,n,r){if(!(n==null||r==null)){if(typeof e.scale=="function")return e.scale.copy().domain(n).range(r);var i=hxe(t);if(i!=null){var a=i.domain(n).range(r);return ppe(a),a}}}var $z=(e,t,n)=>{var r=XA(t);if(!(n!=="auto"&&n!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&Vl(e))return Nve(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&Vl(e))return Cve(e,t.tickCount,t.allowDecimals)}},tj=xe([QA,$p,Up],$z),Bz=(e,t,n,r)=>{if(r!=="angleAxis"&&e?.type==="number"&&Vl(t)&&Array.isArray(n)&&n.length>0){var i=t[0],a=n[0],o=t[1],l=n[n.length-1];return[Math.min(i,a),Math.max(o,l)]}return t},mxe=xe([Qr,QA,tj,tr],Bz),pxe=xe(Cx,Qr,(e,t)=>{if(!(!t||t.type!=="number")){var n=1/0,r=Array.from(Is(e.map(l=>l.value))).sort((l,u)=>l-u);if(r.length<2)return 1/0;var i=r[r.length-1]-r[0];if(i===0)return 1/0;for(var a=0;a<r.length-1;a++){var o=r[a+1]-r[a];n=Math.min(n,o)}return n/i}}),zz=xe(pxe,Jt,Mve,Nr,(e,t,n,r)=>r,(e,t,n,r,i)=>{if(!jn(e))return 0;var a=t==="vertical"?r.height:r.width;if(i==="gap")return e*a/2;if(i==="no-gap"){var o=Wl(n,e*a),l=e*a/2;return l-o-(l-o)/a*o}return 0}),gxe=(e,t)=>{var n=Hs(e,t);return n==null||typeof n.padding!="string"?0:zz(e,"xAxis",t,n.padding)},bxe=(e,t)=>{var n=Gs(e,t);return n==null||typeof n.padding!="string"?0:zz(e,"yAxis",t,n.padding)},yxe=xe(Hs,gxe,(e,t)=>{var n,r;if(e==null)return{left:0,right:0};var{padding:i}=e;return typeof i=="string"?{left:t,right:t}:{left:((n=i.left)!==null&&n!==void 0?n:0)+t,right:((r=i.right)!==null&&r!==void 0?r:0)+t}}),vxe=xe(Gs,bxe,(e,t)=>{var n,r;if(e==null)return{top:0,bottom:0};var{padding:i}=e;return typeof i=="string"?{top:t,bottom:t}:{top:((n=i.top)!==null&&n!==void 0?n:0)+t,bottom:((r=i.bottom)!==null&&r!==void 0?r:0)+t}}),xxe=xe([Nr,yxe,hx,fx,(e,t,n)=>n],(e,t,n,r,i)=>{var{padding:a}=r;return i?[a.left,n.width-a.right]:[e.left+t.left,e.left+e.width-t.right]}),wxe=xe([Nr,Jt,vxe,hx,fx,(e,t,n)=>n],(e,t,n,r,i,a)=>{var{padding:o}=i;return a?[r.height-o.bottom,o.top]:t==="horizontal"?[e.top+e.height-n.bottom,e.top+n.top]:[e.top+n.top,e.top+e.height-n.bottom]}),Fp=(e,t,n,r)=>{var i;switch(t){case"xAxis":return xxe(e,n,r);case"yAxis":return wxe(e,n,r);case"zAxis":return(i=VA(e,n))===null||i===void 0?void 0:i.range;case"angleAxis":return lz(e);case"radiusAxis":return cz(e,n);default:return}},Uz=xe([Qr,Fp],Tx),Pf=xe([Qr,Up,mxe,Uz],ej);xe([Bp,JA,tr],Jve);function Fz(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var Mx=(e,t)=>t,Dx=(e,t,n)=>n,_xe=xe(ux,Mx,Dx,(e,t,n)=>e.filter(r=>r.orientation===t).filter(r=>r.mirror===n).sort(Fz)),Sxe=xe(dx,Mx,Dx,(e,t,n)=>e.filter(r=>r.orientation===t).filter(r=>r.mirror===n).sort(Fz)),Hz=(e,t)=>({width:e.width,height:t.height}),kxe=(e,t)=>{var n=typeof t.width=="number"?t.width:Cp;return{width:n,height:e.height}},Exe=xe(Nr,Hs,Hz),Txe=(e,t,n)=>{switch(t){case"top":return e.top;case"bottom":return n-e.bottom;default:return 0}},Axe=(e,t,n)=>{switch(t){case"left":return e.left;case"right":return n-e.right;default:return 0}},jxe=xe(Us,Nr,_xe,Mx,Dx,(e,t,n,r,i)=>{var a={},o;return n.forEach(l=>{var u=Hz(t,l);o==null&&(o=Txe(t,r,e));var d=r==="top"&&!i||r==="bottom"&&i;a[l.id]=o-Number(d)*u.height,o+=(d?-1:1)*u.height}),a}),Oxe=xe(zs,Nr,Sxe,Mx,Dx,(e,t,n,r,i)=>{var a={},o;return n.forEach(l=>{var u=kxe(t,l);o==null&&(o=Axe(t,r,e));var d=r==="left"&&!i||r==="right"&&i;a[l.id]=o-Number(d)*u.width,o+=(d?-1:1)*u.width}),a}),Nxe=(e,t)=>{var n=Hs(e,t);if(n!=null)return jxe(e,n.orientation,n.mirror)},Cxe=xe([Nr,Hs,Nxe,(e,t)=>t],(e,t,n,r)=>{if(t!=null){var i=n?.[r];return i==null?{x:e.left,y:0}:{x:e.left,y:i}}}),Mxe=(e,t)=>{var n=Gs(e,t);if(n!=null)return Oxe(e,n.orientation,n.mirror)},Dxe=xe([Nr,Gs,Mxe,(e,t)=>t],(e,t,n,r)=>{if(t!=null){var i=n?.[r];return i==null?{x:0,y:e.top}:{x:i,y:e.top}}}),Pxe=xe(Nr,Gs,(e,t)=>{var n=typeof t.width=="number"?t.width:Cp;return{width:n,height:e.height}}),Gz=(e,t,n,r)=>{if(n!=null){var{allowDuplicatedCategory:i,type:a,dataKey:o}=n,l=Bs(e,r),u=t.map(d=>d.value);if(o&&l&&a==="category"&&i&&K7(u))return u}},nj=xe([Jt,Cx,Qr,tr],Gz),qz=(e,t,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:i,scale:a}=n,o=Bs(e,r);if(o&&(i==="number"||a!=="auto"))return t.map(l=>l.value)}},rj=xe([Jt,Cx,$p,tr],qz),XL=xe([Jt,Gve,Up,Pf,nj,rj,Fp,tj,tr],(e,t,n,r,i,a,o,l,u)=>{if(t!=null){var d=Bs(e,u);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:u,categoricalDomain:a,duplicateDomain:i,isCategorical:d,niceTicks:l,range:o,realScaleType:n,scale:r}}}),Rxe=(e,t,n,r,i,a,o,l,u)=>{if(!(t==null||r==null)){var d=Bs(e,u),{type:h,ticks:p,tickCount:b}=t,y=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,S=h==="category"&&r.bandwidth?r.bandwidth()/y:0;S=u==="angleAxis"&&a!=null&&a.length>=2?ba(a[0]-a[1])*2*S:S;var _=p||i;if(_){var k=_.map((A,N)=>{var j=o?o.indexOf(A):A;return{index:N,coordinate:r(j)+S,value:A,offset:S}});return k.filter(A=>jn(A.coordinate))}return d&&l?l.map((A,N)=>({coordinate:r(A)+S,value:A,index:N,offset:S})).filter(A=>jn(A.coordinate)):r.ticks?r.ticks(b).map(A=>({coordinate:r(A)+S,value:A,offset:S})):r.domain().map((A,N)=>({coordinate:r(A)+S,value:o?o[A]:A,index:N,offset:S}))}},Yz=xe([Jt,$p,Up,Pf,tj,Fp,nj,rj,tr],Rxe),Lxe=(e,t,n,r,i,a,o)=>{if(!(t==null||n==null||r==null||r[0]===r[1])){var l=Bs(e,o),{tickCount:u}=t,d=0;return d=o==="angleAxis"&&r?.length>=2?ba(r[0]-r[1])*2*d:d,l&&a?a.map((h,p)=>({coordinate:n(h)+d,value:h,index:p,offset:d})):n.ticks?n.ticks(u).map(h=>({coordinate:n(h)+d,value:h,offset:d})):n.domain().map((h,p)=>({coordinate:n(h)+d,value:i?i[h]:h,index:p,offset:d}))}},Kz=xe([Jt,$p,Pf,Fp,nj,rj,tr],Lxe),Wz=xe(Qr,Pf,(e,t)=>{if(!(e==null||t==null))return iv(iv({},e),{},{scale:t})}),Ixe=xe([Qr,Up,QA,Uz],ej);xe((e,t,n)=>VA(e,n),Ixe,(e,t)=>{if(!(e==null||t==null))return iv(iv({},e),{},{scale:t})});var $xe=xe([Jt,ux,dx],(e,t,n)=>{switch(e){case"horizontal":return t.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),Vz=e=>e.options.defaultTooltipEventType,Zz=e=>e.options.validateTooltipEventTypes;function Xz(e,t,n){if(e==null)return t;var r=e?"axis":"item";return n==null?t:n.includes(r)?r:t}function ij(e,t){var n=Vz(e),r=Zz(e);return Xz(t,n,r)}function Bxe(e){return tt(t=>ij(t,e))}var Jz=(e,t)=>{var n,r=Number(t);if(!(no(r)||t==null))return r>=0?e==null||(n=e[r])===null||n===void 0?void 0:n.value:void 0},zxe=e=>e.tooltip.settings,$l={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},Uxe={itemInteraction:{click:$l,hover:$l},axisInteraction:{click:$l,hover:$l},keyboardInteraction:$l,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},Qz=Si({name:"tooltip",initialState:Uxe,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:un()},replaceTooltipEntrySettings:{reducer(e,t){var{prev:n,next:r}=t.payload,i=Ja(e).tooltipItemPayloads.indexOf(n);i>-1&&(e.tooltipItemPayloads[i]=r)},prepare:un()},removeTooltipEntrySettings:{reducer(e,t){var n=Ja(e).tooltipItemPayloads.indexOf(t.payload);n>-1&&e.tooltipItemPayloads.splice(n,1)},prepare:un()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:Fxe,replaceTooltipEntrySettings:Hxe,removeTooltipEntrySettings:Gxe,setTooltipSettingsState:qxe,setActiveMouseOverItemIndex:Yxe,mouseLeaveItem:hCe,mouseLeaveChart:eU,setActiveClickItemIndex:mCe,setMouseOverAxisIndex:tU,setMouseClickAxisIndex:Kxe,setSyncInteraction:oE,setKeyboardInteraction:sE}=Qz.actions,Wxe=Qz.reducer;function JL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function gb(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?JL(Object(n),!0).forEach(function(r){Vxe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JL(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Vxe(e,t,n){return(t=Zxe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zxe(e){var t=Xxe(e,"string");return typeof t=="symbol"?t:t+""}function Xxe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Jxe(e,t,n){return t==="axis"?n==="click"?e.axisInteraction.click:e.axisInteraction.hover:n==="click"?e.itemInteraction.click:e.itemInteraction.hover}function Qxe(e){return e.index!=null}var nU=(e,t,n,r)=>{if(t==null)return $l;var i=Jxe(e,t,n);if(i==null)return $l;if(i.active)return i;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var a=e.settings.active===!0;if(Qxe(i)){if(a)return gb(gb({},i),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r,graphicalItemId:void 0};return gb(gb({},$l),{},{coordinate:i.coordinate})};function ewe(e){if(typeof e=="number")return Number.isFinite(e)?e:void 0;if(e instanceof Date){var t=e.valueOf();return Number.isFinite(t)?t:void 0}var n=Number(e);return Number.isFinite(n)?n:void 0}function twe(e,t){var n=ewe(e),r=t[0],i=t[1];if(n===void 0)return!1;var a=Math.min(r,i),o=Math.max(r,i);return n>=a&&n<=o}function nwe(e,t,n){if(n==null||t==null)return!0;var r=Ir(e,t);return r==null||!Vl(n)?!0:twe(r,n)}var aj=(e,t,n,r)=>{var i=e?.index;if(i==null)return null;var a=Number(i);if(!jn(a))return i;var o=0,l=1/0;t.length>0&&(l=t.length-1);var u=Math.max(o,Math.min(a,l)),d=t[u];return d==null||nwe(d,n,r)?String(u):null},rU=(e,t,n,r,i,a,o,l)=>{if(!(a==null||l==null)){var u=o[0],d=u==null?void 0:l(u.positions,a);if(d!=null)return d;var h=i?.[Number(a)];if(h)switch(n){case"horizontal":return{x:h.coordinate,y:(r.top+t)/2};default:return{x:(r.left+e)/2,y:h.coordinate}}}},iU=(e,t,n,r)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var i;return n==="hover"?i=e.itemInteraction.hover.dataKey:i=e.itemInteraction.click.dataKey,i==null&&r!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(a=>{var o;return((o=a.settings)===null||o===void 0?void 0:o.dataKey)===i})},Hp=e=>e.options.tooltipPayloadSearcher,Rf=e=>e.tooltip;function QL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function eI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?QL(Object(n),!0).forEach(function(r){rwe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):QL(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function rwe(e,t,n){return(t=iwe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function iwe(e){var t=awe(e,"string");return typeof t=="symbol"?t:t+""}function awe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function owe(e,t){return e??t}var aU=(e,t,n,r,i,a,o)=>{if(!(t==null||a==null)){var{chartData:l,computedData:u,dataStartIndex:d,dataEndIndex:h}=n,p=[];return e.reduce((b,y)=>{var S,{dataDefinedOnItem:_,settings:k}=y,A=owe(_,l),N=Array.isArray(A)?R9(A,d,h):A,j=(S=k?.dataKey)!==null&&S!==void 0?S:r,C=k?.nameKey,D;if(r&&Array.isArray(N)&&!Array.isArray(N[0])&&o==="axis"?D=W7(N,r,i):D=a(N,t,u,C),Array.isArray(D))D.forEach($=>{var U=eI(eI({},k),{},{name:$.name,unit:$.unit,color:void 0,fill:void 0});b.push(S3({tooltipEntrySettings:U,dataKey:$.dataKey,payload:$.payload,value:Ir($.payload,$.dataKey),name:$.name}))});else{var P;b.push(S3({tooltipEntrySettings:k,dataKey:j,payload:D,value:Ir(D,j),name:(P=Ir(D,C))!==null&&P!==void 0?P:k?.name}))}return b},p)}},oj=xe([rr,Jt,mz,UA,nr],Iz),swe=xe([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),lwe=xe([nr,Mf],pz),Gp=xe([swe,rr,lwe],bz,{memoizeOptions:{resultEqualityCheck:Nx}}),cwe=xe([Gp],e=>e.filter(WA)),uwe=xe([Gp],xz,{memoizeOptions:{resultEqualityCheck:Nx}}),Lf=xe([uwe,ec],wz),dwe=xe([cwe,ec,rr],dz),sj=xe([Lf,rr,Gp],_z),oU=xe([rr],XA),fwe=xe([rr],e=>e.allowDataOverflow),sU=xe([oU,fwe],G8),hwe=xe([Gp],e=>e.filter(WA)),mwe=xe([dwe,hwe,Ex,iz],kz),pwe=xe([mwe,ec,nr,sU],Ez),gwe=xe([Gp],vz),bwe=xe([Lf,rr,gwe,JA,nr],jz,{memoizeOptions:{resultEqualityCheck:Ox}}),ywe=xe([Oz,nr,Mf],Df),vwe=xe([ywe,nr],Mz),xwe=xe([Nz,nr,Mf],Df),wwe=xe([xwe,nr],Dz),_we=xe([Cz,nr,Mf],Df),Swe=xe([_we,nr],Pz),kwe=xe([vwe,Swe,wwe],av),Ewe=xe([rr,oU,sU,pwe,bwe,kwe,Jt,nr],Rz),qp=xe([rr,Jt,Lf,sj,Ex,nr,Ewe],Lz),Twe=xe([qp,rr,oj],$z),Awe=xe([rr,qp,Twe,nr],Bz),lU=e=>{var t=nr(e),n=Mf(e),r=!1;return Fp(e,t,n,r)},cU=xe([rr,lU],Tx),uU=xe([rr,oj,Awe,cU],ej),jwe=xe([Jt,sj,rr,nr],Gz),Owe=xe([Jt,sj,rr,nr],qz),Nwe=(e,t,n,r,i,a,o,l)=>{if(t){var{type:u}=t,d=Bs(e,l);if(r){var h=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,p=u==="category"&&r.bandwidth?r.bandwidth()/h:0;return p=l==="angleAxis"&&i!=null&&i?.length>=2?ba(i[0]-i[1])*2*p:p,d&&o?o.map((b,y)=>({coordinate:r(b)+p,value:b,index:y,offset:p})):r.domain().map((b,y)=>({coordinate:r(b)+p,value:a?a[b]:b,index:y,offset:p}))}}},qs=xe([Jt,rr,oj,uU,lU,jwe,Owe,nr],Nwe),lj=xe([Vz,Zz,zxe],(e,t,n)=>Xz(n.shared,e,t)),dU=e=>e.tooltip.settings.trigger,cj=e=>e.tooltip.settings.defaultIndex,Yp=xe([Rf,lj,dU,cj],nU),lp=xe([Yp,Lf,zp,qp],aj),fU=xe([qs,lp],Jz),Cwe=xe([Yp],e=>{if(e)return e.dataKey});xe([Yp],e=>{if(e)return e.graphicalItemId});var hU=xe([Rf,lj,dU,cj],iU),Mwe=xe([zs,Us,Jt,Nr,qs,cj,hU,Hp],rU),Dwe=xe([Yp,Mwe],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),Pwe=xe([Yp],e=>e.active),Rwe=xe([hU,lp,ec,zp,fU,Hp,lj],aU),Lwe=xe([Rwe],e=>{if(e!=null){var t=e.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(t))}});function tI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function nI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?tI(Object(n),!0).forEach(function(r){Iwe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Iwe(e,t,n){return(t=$we(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $we(e){var t=Bwe(e,"string");return typeof t=="symbol"?t:t+""}function Bwe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var zwe=()=>tt(rr),Uwe=()=>{var e=zwe(),t=tt(qs),n=tt(uU);return $y(!e||!n?void 0:nI(nI({},e),{},{scale:n}),t)};function rI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ed(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?rI(Object(n),!0).forEach(function(r){Fwe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Fwe(e,t,n){return(t=Hwe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Hwe(e){var t=Gwe(e,"string");return typeof t=="symbol"?t:t+""}function Gwe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qwe=(e,t,n,r)=>{var i=t.find(a=>a&&a.index===n);if(i){if(e==="horizontal")return{x:i.coordinate,y:r.chartY};if(e==="vertical")return{x:r.chartX,y:i.coordinate}}return{x:0,y:0}},Ywe=(e,t,n,r)=>{var i=t.find(d=>d&&d.index===n);if(i){if(e==="centric"){var a=i.coordinate,{radius:o}=r;return Ed(Ed(Ed({},r),Tr(r.cx,r.cy,o,a)),{},{angle:a,radius:o})}var l=i.coordinate,{angle:u}=r;return Ed(Ed(Ed({},r),Tr(r.cx,r.cy,l,u)),{},{angle:u,radius:l})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function Kwe(e,t){var{chartX:n,chartY:r}=e;return n>=t.left&&n<=t.left+t.width&&r>=t.top&&r<=t.top+t.height}var mU=(e,t,n,r,i)=>{var a,o=-1,l=(a=t?.length)!==null&&a!==void 0?a:0;if(l<=1||e==null)return 0;if(r==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var u=0;u<l;u++){var d=u>0?n[u-1].coordinate:n[l-1].coordinate,h=n[u].coordinate,p=u>=l-1?n[0].coordinate:n[u+1].coordinate,b=void 0;if(ba(h-d)!==ba(p-h)){var y=[];if(ba(p-h)===ba(i[1]-i[0])){b=p;var S=h+i[1]-i[0];y[0]=Math.min(S,(S+d)/2),y[1]=Math.max(S,(S+d)/2)}else{b=d;var _=p+i[1]-i[0];y[0]=Math.min(h,(_+h)/2),y[1]=Math.max(h,(_+h)/2)}var k=[Math.min(h,(b+h)/2),Math.max(h,(b+h)/2)];if(e>k[0]&&e<=k[1]||e>=y[0]&&e<=y[1]){({index:o}=n[u]);break}}else{var A=Math.min(d,p),N=Math.max(d,p);if(e>(A+h)/2&&e<=(N+h)/2){({index:o}=n[u]);break}}}else if(t){for(var j=0;j<l;j++)if(j===0&&e<=(t[j].coordinate+t[j+1].coordinate)/2||j>0&&j<l-1&&e>(t[j].coordinate+t[j-1].coordinate)/2&&e<=(t[j].coordinate+t[j+1].coordinate)/2||j===l-1&&e>(t[j].coordinate+t[j-1].coordinate)/2){({index:o}=t[j]);break}}return o},pU=()=>tt(UA),uj=(e,t)=>t,gU=(e,t,n)=>n,dj=(e,t,n,r)=>r,Wwe=xe(qs,e=>tx(e,t=>t.coordinate)),fj=xe([Rf,uj,gU,dj],nU),hj=xe([fj,Lf,zp,qp],aj),Vwe=(e,t,n)=>{if(t!=null){var r=Rf(e);return t==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},bU=xe([Rf,uj,gU,dj],iU),ov=xe([zs,Us,Jt,Nr,qs,dj,bU,Hp],rU),Zwe=xe([fj,ov],(e,t)=>{var n;return(n=e.coordinate)!==null&&n!==void 0?n:t}),yU=xe([qs,hj],Jz),Xwe=xe([bU,hj,ec,zp,yU,Hp,uj],aU),Jwe=xe([fj,hj],(e,t)=>({isActive:e.active&&t!=null,activeIndex:t})),Qwe=(e,t,n,r,i,a,o)=>{if(!(!e||!n||!r||!i)&&Kwe(e,o)){var l=kpe(e,t),u=mU(l,a,i,n,r),d=qwe(t,i,u,e);return{activeIndex:String(u),activeCoordinate:d}}},e_e=(e,t,n,r,i,a,o)=>{if(!(!e||!r||!i||!a||!n)){var l=R0e(e,n);if(l){var u=Epe(l,t),d=mU(u,o,a,r,i),h=Ywe(t,a,d,l);return{activeIndex:String(d),activeCoordinate:h}}}},t_e=(e,t,n,r,i,a,o,l)=>{if(!(!e||!t||!r||!i||!a))return t==="horizontal"||t==="vertical"?Qwe(e,t,r,i,a,o,l):e_e(e,t,n,r,i,a,o)},n_e=xe(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,n)=>n,(e,t,n)=>{if(t!=null){var r=e[t];if(r!=null)return n?r.panoramaElementId:r.elementId}}),r_e=xe(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(r=>parseInt(r,10)).concat(Object.values(Vr)),n=Array.from(new Set(t));return n.sort((r,i)=>r-i)},{memoizeOptions:{resultEqualityCheck:Bve}});function iI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function aI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?iI(Object(n),!0).forEach(function(r){i_e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function i_e(e,t,n){return(t=a_e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a_e(e){var t=o_e(e,"string");return typeof t=="symbol"?t:t+""}function o_e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var s_e={},l_e={zIndexMap:Object.values(Vr).reduce((e,t)=>aI(aI({},e),{},{[t]:{elementId:void 0,panoramaElementId:void 0,consumers:0}}),s_e)},c_e=new Set(Object.values(Vr));function u_e(e){return c_e.has(e)}var vU=Si({name:"zIndex",initialState:l_e,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:n}=t.payload;e.zIndexMap[n]?e.zIndexMap[n].consumers+=1:e.zIndexMap[n]={consumers:1,elementId:void 0,panoramaElementId:void 0}},prepare:un()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:n}=t.payload;e.zIndexMap[n]&&(e.zIndexMap[n].consumers-=1,e.zIndexMap[n].consumers<=0&&!u_e(n)&&delete e.zIndexMap[n])},prepare:un()},registerZIndexPortalId:{reducer:(e,t)=>{var{zIndex:n,elementId:r,isPanorama:i}=t.payload;e.zIndexMap[n]?i?e.zIndexMap[n].panoramaElementId=r:e.zIndexMap[n].elementId=r:e.zIndexMap[n]={consumers:0,elementId:i?void 0:r,panoramaElementId:i?r:void 0}},prepare:un()},unregisterZIndexPortalId:{reducer:(e,t)=>{var{zIndex:n}=t.payload;e.zIndexMap[n]&&(t.payload.isPanorama?e.zIndexMap[n].panoramaElementId=void 0:e.zIndexMap[n].elementId=void 0)},prepare:un()}}}),{registerZIndexPortal:d_e,unregisterZIndexPortal:f_e,registerZIndexPortalId:h_e,unregisterZIndexPortalId:m_e}=vU.actions,p_e=vU.reducer;function Ys(e){var{zIndex:t,children:n}=e,r=age(),i=r&&t!==void 0&&t!==0,a=ki(),o=pr();w.useLayoutEffect(()=>i?(o(d_e({zIndex:t})),()=>{o(f_e({zIndex:t}))}):Ap,[o,t,i]);var l=tt(d=>n_e(d,t,a));if(!i)return n;if(!l)return null;var u=document.getElementById(l);return u?ku.createPortal(n,u):null}function lE(){return lE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lE.apply(null,arguments)}function oI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function bb(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?oI(Object(n),!0).forEach(function(r){g_e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function g_e(e,t,n){return(t=b_e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b_e(e){var t=y_e(e,"string");return typeof t=="symbol"?t:t+""}function y_e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function v_e(e){var{cursor:t,cursorComp:n,cursorProps:r}=e;return w.isValidElement(t)?w.cloneElement(t,r):w.createElement(n,r)}function x_e(e){var t,{coordinate:n,payload:r,index:i,offset:a,tooltipAxisBandSize:o,layout:l,cursor:u,tooltipEventType:d,chartName:h}=e,p=n,b=r,y=i;if(!u||!p||h!=="ScatterChart"&&d!=="axis")return null;var S,_,k;if(h==="ScatterChart")S=p,_=Kge,k=Vr.cursorLine;else if(h==="BarChart")S=Wge(l,p,a,o),_=E0e,k=Vr.cursorRectangle;else if(l==="radial"&&V7(p)){var{cx:A,cy:N,radius:j,startAngle:C,endAngle:D}=s8(p);S={cx:A,cy:N,startAngle:C,endAngle:D,innerRadius:j,outerRadius:j},_=B0e,k=Vr.cursorLine}else S={points:z0e(l,p,a)},_=Ub,k=Vr.cursorLine;var P=typeof u=="object"&&"className"in u?u.className:void 0,$=bb(bb(bb(bb({stroke:"#ccc",pointerEvents:"none"},a),S),Xv(u)),{},{payload:b,payloadIndex:y,className:rn("recharts-tooltip-cursor",P)});return w.createElement(Ys,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:k},w.createElement(v_e,{cursor:u,cursorComp:_,cursorProps:$}))}function w_e(e){var t=Uwe(),n=q9(),r=Mp(),i=pU();return t==null||n==null||r==null||i==null?null:w.createElement(x_e,lE({},e,{offset:n,layout:r,tooltipAxisBandSize:t,chartName:i}))}var xU=w.createContext(null),__e=()=>w.useContext(xU),qS={exports:{}},sI;function S_e(){return sI||(sI=1,(function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(u,d,h){this.fn=u,this.context=d,this.once=h||!1}function a(u,d,h,p,b){if(typeof h!="function")throw new TypeError("The listener must be a function");var y=new i(h,p||u,b),S=n?n+d:d;return u._events[S]?u._events[S].fn?u._events[S]=[u._events[S],y]:u._events[S].push(y):(u._events[S]=y,u._eventsCount++),u}function o(u,d){--u._eventsCount===0?u._events=new r:delete u._events[d]}function l(){this._events=new r,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],h,p;if(this._eventsCount===0)return d;for(p in h=this._events)t.call(h,p)&&d.push(n?p.slice(1):p);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(h)):d},l.prototype.listeners=function(d){var h=n?n+d:d,p=this._events[h];if(!p)return[];if(p.fn)return[p.fn];for(var b=0,y=p.length,S=new Array(y);b<y;b++)S[b]=p[b].fn;return S},l.prototype.listenerCount=function(d){var h=n?n+d:d,p=this._events[h];return p?p.fn?1:p.length:0},l.prototype.emit=function(d,h,p,b,y,S){var _=n?n+d:d;if(!this._events[_])return!1;var k=this._events[_],A=arguments.length,N,j;if(k.fn){switch(k.once&&this.removeListener(d,k.fn,void 0,!0),A){case 1:return k.fn.call(k.context),!0;case 2:return k.fn.call(k.context,h),!0;case 3:return k.fn.call(k.context,h,p),!0;case 4:return k.fn.call(k.context,h,p,b),!0;case 5:return k.fn.call(k.context,h,p,b,y),!0;case 6:return k.fn.call(k.context,h,p,b,y,S),!0}for(j=1,N=new Array(A-1);j<A;j++)N[j-1]=arguments[j];k.fn.apply(k.context,N)}else{var C=k.length,D;for(j=0;j<C;j++)switch(k[j].once&&this.removeListener(d,k[j].fn,void 0,!0),A){case 1:k[j].fn.call(k[j].context);break;case 2:k[j].fn.call(k[j].context,h);break;case 3:k[j].fn.call(k[j].context,h,p);break;case 4:k[j].fn.call(k[j].context,h,p,b);break;default:if(!N)for(D=1,N=new Array(A-1);D<A;D++)N[D-1]=arguments[D];k[j].fn.apply(k[j].context,N)}}return!0},l.prototype.on=function(d,h,p){return a(this,d,h,p,!1)},l.prototype.once=function(d,h,p){return a(this,d,h,p,!0)},l.prototype.removeListener=function(d,h,p,b){var y=n?n+d:d;if(!this._events[y])return this;if(!h)return o(this,y),this;var S=this._events[y];if(S.fn)S.fn===h&&(!b||S.once)&&(!p||S.context===p)&&o(this,y);else{for(var _=0,k=[],A=S.length;_<A;_++)(S[_].fn!==h||b&&!S[_].once||p&&S[_].context!==p)&&k.push(S[_]);k.length?this._events[y]=k.length===1?k[0]:k:o(this,y)}return this},l.prototype.removeAllListeners=function(d){var h;return d?(h=n?n+d:d,this._events[h]&&o(this,h)):(this._events=new r,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,e.exports=l})(qS)),qS.exports}var k_e=S_e();const E_e=wi(k_e);var cp=new E_e,cE="recharts.syncEvent.tooltip",lI="recharts.syncEvent.brush";function T_e(e,t){if(t){var n=Number.parseInt(t,10);if(!no(n))return e?.[n]}}var A_e={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},wU=Si({name:"options",initialState:A_e,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),j_e=wU.reducer,{createEventEmitter:O_e}=wU.actions;function N_e(e){return e.tooltip.syncInteraction}var C_e={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},_U=Si({name:"chartData",initialState:C_e,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:n,endIndex:r}=t.payload;n!=null&&(e.dataStartIndex=n),r!=null&&(e.dataEndIndex=r)}}}),{setChartData:cI,setDataStartEndIndexes:M_e,setComputedData:pCe}=_U.actions,D_e=_U.reducer,P_e=["x","y"];function uI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Td(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?uI(Object(n),!0).forEach(function(r){R_e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function R_e(e,t,n){return(t=L_e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function L_e(e){var t=I_e(e,"string");return typeof t=="symbol"?t:t+""}function I_e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $_e(e,t){if(e==null)return{};var n,r,i=B_e(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function B_e(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function z_e(){var e=tt(FA),t=tt(HA),n=pr(),r=tt(az),i=tt(qs),a=Mp(),o=mx(),l=tt(u=>u.rootProps.className);w.useEffect(()=>{if(e==null)return Ap;var u=(d,h,p)=>{if(t!==p&&e===d){if(r==="index"){var b;if(o&&h!==null&&h!==void 0&&(b=h.payload)!==null&&b!==void 0&&b.coordinate&&h.payload.sourceViewBox){var y=h.payload.coordinate,{x:S,y:_}=y,k=$_e(y,P_e),{x:A,y:N,width:j,height:C}=h.payload.sourceViewBox,D=Td(Td({},k),{},{x:o.x+(j?(S-A)/j:0)*o.width,y:o.y+(C?(_-N)/C:0)*o.height});n(Td(Td({},h),{},{payload:Td(Td({},h.payload),{},{coordinate:D})}))}else n(h);return}if(i!=null){var P;if(typeof r=="function"){var $={activeTooltipIndex:h.payload.index==null?void 0:Number(h.payload.index),isTooltipActive:h.payload.active,activeIndex:h.payload.index==null?void 0:Number(h.payload.index),activeLabel:h.payload.label,activeDataKey:h.payload.dataKey,activeCoordinate:h.payload.coordinate},U=r(i,$);P=i[U]}else r==="value"&&(P=i.find(G=>String(G.value)===h.payload.label));var{coordinate:Y}=h.payload;if(P==null||h.payload.active===!1||Y==null||o==null){n(oE({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:K,y:F}=Y,z=Math.min(K,o.x+o.width),W=Math.min(F,o.y+o.height),X={x:a==="horizontal"?P.coordinate:z,y:a==="horizontal"?W:P.coordinate},Z=oE({active:h.payload.active,coordinate:X,dataKey:h.payload.dataKey,index:String(P.index),label:h.payload.label,sourceViewBox:h.payload.sourceViewBox,graphicalItemId:h.payload.graphicalItemId});n(Z)}}};return cp.on(cE,u),()=>{cp.off(cE,u)}},[l,n,t,e,r,i,a,o])}function U_e(){var e=tt(FA),t=tt(HA),n=pr();w.useEffect(()=>{if(e==null)return Ap;var r=(i,a,o)=>{t!==o&&e===i&&n(M_e(a))};return cp.on(lI,r),()=>{cp.off(lI,r)}},[n,t,e])}function F_e(){var e=pr();w.useEffect(()=>{e(O_e())},[e]),z_e(),U_e()}function H_e(e,t,n,r,i,a){var o=tt(y=>Vwe(y,e,t)),l=tt(HA),u=tt(FA),d=tt(az),h=tt(N_e),p=h?.active,b=mx();w.useEffect(()=>{if(!p&&u!=null&&l!=null){var y=oE({active:a,coordinate:n,dataKey:o,index:i,label:typeof r=="number"?String(r):r,sourceViewBox:b,graphicalItemId:void 0});cp.emit(cE,u,y,l)}},[p,n,o,i,r,l,u,d,a,b])}function dI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function fI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?dI(Object(n),!0).forEach(function(r){G_e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function G_e(e,t,n){return(t=q_e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function q_e(e){var t=Y_e(e,"string");return typeof t=="symbol"?t:t+""}function Y_e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function K_e(e){return e.dataKey}function W_e(e,t){return w.isValidElement(e)?w.cloneElement(e,t):typeof e=="function"?w.createElement(e,t):w.createElement(Tge,t)}var hI=[],V_e={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function Z_e(e){var t,n,r=Vi(e,V_e),{active:i,allowEscapeViewBox:a,animationDuration:o,animationEasing:l,content:u,filterNull:d,isAnimationActive:h,offset:p,payloadUniqBy:b,position:y,reverseDirection:S,useTranslate3d:_,wrapperStyle:k,cursor:A,shared:N,trigger:j,defaultIndex:C,portal:D,axisId:P}=r,$=pr(),U=typeof C=="number"?String(C):C;w.useEffect(()=>{$(qxe({shared:N,trigger:j,axisId:P,active:i,defaultIndex:U}))},[$,N,j,P,i,U]);var Y=mx(),K=t8(),F=Bxe(N),{activeIndex:z,isActive:W}=(t=tt(he=>Jwe(he,F,j,U)))!==null&&t!==void 0?t:{},X=tt(he=>Xwe(he,F,j,U)),Z=tt(he=>yU(he,F,j,U)),G=tt(he=>Zwe(he,F,j,U)),J=X,te=__e(),ce=(n=i??W)!==null&&n!==void 0?n:!1,[oe,B]=mme([J,ce]),V=F==="axis"?Z:void 0;H_e(F,j,G,V,z,ce);var ie=D??te;if(ie==null||Y==null||F==null)return null;var Q=J??hI;ce||(Q=hI),d&&Q.length&&(Q=zhe(Q.filter(he=>he.value!=null&&(he.hide!==!0||r.includeHidden)),b,K_e));var se=Q.length>0,me=w.createElement(Dge,{allowEscapeViewBox:a,animationDuration:o,animationEasing:l,isAnimationActive:h,active:ce,coordinate:G,hasPayload:se,offset:p,position:y,reverseDirection:S,useTranslate3d:_,viewBox:Y,wrapperStyle:k,lastBoundingBox:oe,innerRef:B,hasPortalFromProps:!!D},W_e(u,fI(fI({},r),{},{payload:Q,label:V,active:ce,activeIndex:z,coordinate:G,accessibilityLayer:K})));return w.createElement(w.Fragment,null,ku.createPortal(me,ie),ce&&w.createElement(w_e,{cursor:A,tooltipEventType:F,coordinate:G,payload:Q,index:z}))}function X_e(e,t,n){return(t=J_e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function J_e(e){var t=Q_e(e,"string");return typeof t=="symbol"?t:t+""}function Q_e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class e1e{constructor(t){X_e(this,"cache",new Map),this.maxSize=t}get(t){var n=this.cache.get(t);return n!==void 0&&(this.cache.delete(t),this.cache.set(t,n)),n}set(t,n){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;r!=null&&this.cache.delete(r)}this.cache.set(t,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function mI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function t1e(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?mI(Object(n),!0).forEach(function(r){n1e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function n1e(e,t,n){return(t=r1e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r1e(e){var t=i1e(e,"string");return typeof t=="symbol"?t:t+""}function i1e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var a1e={cacheSize:2e3,enableCache:!0},SU=t1e({},a1e),pI=new e1e(SU.cacheSize),o1e={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},gI="recharts_measurement_span";function s1e(e,t){var n=t.fontSize||"",r=t.fontFamily||"",i=t.fontWeight||"",a=t.fontStyle||"",o=t.letterSpacing||"",l=t.textTransform||"";return"".concat(e,"|").concat(n,"|").concat(r,"|").concat(i,"|").concat(a,"|").concat(o,"|").concat(l)}var bI=(e,t)=>{try{var n=document.getElementById(gI);n||(n=document.createElement("span"),n.setAttribute("id",gI),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,o1e,t),n.textContent="".concat(e);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},Cm=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||jf.isSsr)return{width:0,height:0};if(!SU.enableCache)return bI(t,n);var r=s1e(t,n),i=pI.get(r);if(i)return i;var a=bI(t,n);return pI.set(r,a),a},yI=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,vI=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,l1e=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,c1e=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,kU={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},u1e=Object.keys(kU),Id="NaN";function d1e(e,t){return e*kU[t]}class pi{static parse(t){var n,[,r,i]=(n=c1e.exec(t))!==null&&n!==void 0?n:[];return new pi(parseFloat(r),i??"")}constructor(t,n){this.num=t,this.unit=n,this.num=t,this.unit=n,no(t)&&(this.unit=""),n!==""&&!l1e.test(n)&&(this.num=NaN,this.unit=""),u1e.includes(n)&&(this.num=d1e(t,n),this.unit="px")}add(t){return this.unit!==t.unit?new pi(NaN,""):new pi(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new pi(NaN,""):new pi(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new pi(NaN,""):new pi(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new pi(NaN,""):new pi(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return no(this.num)}}function EU(e){if(e.includes(Id))return Id;for(var t=e;t.includes("*")||t.includes("/");){var n,[,r,i,a]=(n=yI.exec(t))!==null&&n!==void 0?n:[],o=pi.parse(r??""),l=pi.parse(a??""),u=i==="*"?o.multiply(l):o.divide(l);if(u.isNaN())return Id;t=t.replace(yI,u.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var d,[,h,p,b]=(d=vI.exec(t))!==null&&d!==void 0?d:[],y=pi.parse(h??""),S=pi.parse(b??""),_=p==="+"?y.add(S):y.subtract(S);if(_.isNaN())return Id;t=t.replace(vI,_.toString())}return t}var xI=/\(([^()]*)\)/;function f1e(e){for(var t=e,n;(n=xI.exec(t))!=null;){var[,r]=n;t=t.replace(xI,EU(r))}return t}function h1e(e){var t=e.replace(/\s+/g,"");return t=f1e(t),t=EU(t),t}function m1e(e){try{return h1e(e)}catch{return Id}}function YS(e){var t=m1e(e.slice(5,-1));return t===Id?"":t}var p1e=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],g1e=["dx","dy","angle","className","breakAll"];function uE(){return uE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},uE.apply(null,arguments)}function wI(e,t){if(e==null)return{};var n,r,i=b1e(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function b1e(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var TU=/[ \f\n\r\t\v\u2028\u2029]+/,AU=e=>{var{children:t,breakAll:n,style:r}=e;try{var i=[];Ar(t)||(n?i=t.toString().split(""):i=t.toString().split(TU));var a=i.map(l=>({word:l,width:Cm(l,r).width})),o=n?0:Cm("",r).width;return{wordsWithComputedWidth:a,spaceWidth:o}}catch{return null}};function y1e(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var jU=(e,t,n,r)=>e.reduce((i,a)=>{var{word:o,width:l}=a,u=i[i.length-1];if(u&&l!=null&&(t==null||r||u.width+l+n<Number(t)))u.words.push(o),u.width+=l+n;else{var d={words:[o],width:l};i.push(d)}return i},[]),OU=e=>e.reduce((t,n)=>t.width>n.width?t:n),v1e="",_I=(e,t,n,r,i,a,o,l)=>{var u=e.slice(0,t),d=AU({breakAll:n,style:r,children:u+v1e});if(!d)return[!1,[]];var h=jU(d.wordsWithComputedWidth,a,o,l),p=h.length>i||OU(h).width>Number(a);return[p,h]},x1e=(e,t,n,r,i)=>{var{maxLines:a,children:o,style:l,breakAll:u}=e,d=Qe(a),h=String(o),p=jU(t,r,n,i);if(!d||i)return p;var b=p.length>a||OU(p).width>Number(r);if(!b)return p;for(var y=0,S=h.length-1,_=0,k;y<=S&&_<=h.length-1;){var A=Math.floor((y+S)/2),N=A-1,[j,C]=_I(h,N,u,l,a,r,n,i),[D]=_I(h,A,u,l,a,r,n,i);if(!j&&!D&&(y=A+1),j&&D&&(S=A-1),!j&&D){k=C;break}_++}return k||p},SI=e=>{var t=Ar(e)?[]:e.toString().split(TU);return[{words:t,width:void 0}]},w1e=e=>{var{width:t,scaleToFit:n,children:r,style:i,breakAll:a,maxLines:o}=e;if((t||n)&&!jf.isSsr){var l,u,d=AU({breakAll:a,children:r,style:i});if(d){var{wordsWithComputedWidth:h,spaceWidth:p}=d;l=h,u=p}else return SI(r);return x1e({breakAll:a,children:r,maxLines:o,style:i},l,u,t,!!n)}return SI(r)},NU="#808080",_1e={angle:0,breakAll:!1,capHeight:"0.71em",fill:NU,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},mj=w.forwardRef((e,t)=>{var n=Vi(e,_1e),{x:r,y:i,lineHeight:a,capHeight:o,fill:l,scaleToFit:u,textAnchor:d,verticalAnchor:h}=n,p=wI(n,p1e),b=w.useMemo(()=>w1e({breakAll:p.breakAll,children:p.children,maxLines:p.maxLines,scaleToFit:u,style:p.style,width:p.width}),[p.breakAll,p.children,p.maxLines,u,p.style,p.width]),{dx:y,dy:S,angle:_,className:k,breakAll:A}=p,N=wI(p,g1e);if(!$o(r)||!$o(i)||b.length===0)return null;var j=Number(r)+(Qe(y)?y:0),C=Number(i)+(Qe(S)?S:0);if(!jn(j)||!jn(C))return null;var D;switch(h){case"start":D=YS("calc(".concat(o,")"));break;case"middle":D=YS("calc(".concat((b.length-1)/2," * -").concat(a," + (").concat(o," / 2))"));break;default:D=YS("calc(".concat(b.length-1," * -").concat(a,")"));break}var P=[];if(u){var $=b[0].width,{width:U}=p;P.push("scale(".concat(Qe(U)&&Qe($)?U/$:1,")"))}return _&&P.push("rotate(".concat(_,", ").concat(j,", ").concat(C,")")),P.length&&(N.transform=P.join(" ")),w.createElement("text",uE({},Sa(N),{ref:t,x:j,y:C,className:rn("recharts-text",k),textAnchor:d,fill:l.includes("url")?NU:l}),b.map((Y,K)=>{var F=Y.words.join(A?"":" ");return w.createElement("tspan",{x:j,dy:K===0?D:a,key:"".concat(F,"-").concat(K)},F)}))});mj.displayName="Text";var S1e=["labelRef"];function k1e(e,t){if(e==null)return{};var n,r,i=E1e(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function E1e(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function kI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Mn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?kI(Object(n),!0).forEach(function(r){T1e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function T1e(e,t,n){return(t=A1e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function A1e(e){var t=j1e(e,"string");return typeof t=="symbol"?t:t+""}function j1e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ws(){return ws=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ws.apply(null,arguments)}var CU=w.createContext(null),O1e=e=>{var{x:t,y:n,upperWidth:r,lowerWidth:i,width:a,height:o,children:l}=e,u=w.useMemo(()=>({x:t,y:n,upperWidth:r,lowerWidth:i,width:a,height:o}),[t,n,r,i,a,o]);return w.createElement(CU.Provider,{value:u},l)},MU=()=>{var e=w.useContext(CU),t=mx();return e||G9(t)},N1e=w.createContext(null),C1e=()=>{var e=w.useContext(N1e),t=tt(uz);return e||t},M1e=e=>{var{value:t,formatter:n}=e,r=Ar(e.children)?t:e.children;return typeof n=="function"?n(r):r},pj=e=>e!=null&&typeof e=="function",D1e=(e,t)=>{var n=ba(t-e),r=Math.min(Math.abs(t-e),360);return n*r},P1e=(e,t,n,r,i)=>{var{offset:a,className:o}=e,{cx:l,cy:u,innerRadius:d,outerRadius:h,startAngle:p,endAngle:b,clockWise:y}=i,S=(d+h)/2,_=D1e(p,b),k=_>=0?1:-1,A,N;switch(t){case"insideStart":A=p+k*a,N=y;break;case"insideEnd":A=b-k*a,N=!y;break;case"end":A=b+k*a,N=y;break;default:throw new Error("Unsupported position ".concat(t))}N=_<=0?N:!N;var j=Tr(l,u,S,A),C=Tr(l,u,S,A+(N?1:-1)*359),D="M".concat(j.x,",").concat(j.y,`
    A`).concat(S,",").concat(S,",0,1,").concat(N?0:1,`,
    `).concat(C.x,",").concat(C.y),P=Ar(e.id)?Vm("recharts-radial-line-"):e.id;return w.createElement("text",ws({},r,{dominantBaseline:"central",className:rn("recharts-radial-bar-label",o)}),w.createElement("defs",null,w.createElement("path",{id:P,d:D})),w.createElement("textPath",{xlinkHref:"#".concat(P)},n))},R1e=(e,t,n)=>{var{cx:r,cy:i,innerRadius:a,outerRadius:o,startAngle:l,endAngle:u}=e,d=(l+u)/2;if(n==="outside"){var{x:h,y:p}=Tr(r,i,o+t,d);return{x:h,y:p,textAnchor:h>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"end"};var b=(a+o)/2,{x:y,y:S}=Tr(r,i,b,d);return{x:y,y:S,textAnchor:"middle",verticalAnchor:"middle"}},dE=e=>"cx"in e&&Qe(e.cx),L1e=(e,t)=>{var{parentViewBox:n,offset:r,position:i}=e,a;n!=null&&!dE(n)&&(a=n);var{x:o,y:l,upperWidth:u,lowerWidth:d,height:h}=t,p=o,b=o+(u-d)/2,y=(p+b)/2,S=(u+d)/2,_=p+u/2,k=h>=0?1:-1,A=k*r,N=k>0?"end":"start",j=k>0?"start":"end",C=u>=0?1:-1,D=C*r,P=C>0?"end":"start",$=C>0?"start":"end";if(i==="top"){var U={x:p+u/2,y:l-A,textAnchor:"middle",verticalAnchor:N};return Mn(Mn({},U),a?{height:Math.max(l-a.y,0),width:u}:{})}if(i==="bottom"){var Y={x:b+d/2,y:l+h+A,textAnchor:"middle",verticalAnchor:j};return Mn(Mn({},Y),a?{height:Math.max(a.y+a.height-(l+h),0),width:d}:{})}if(i==="left"){var K={x:y-D,y:l+h/2,textAnchor:P,verticalAnchor:"middle"};return Mn(Mn({},K),a?{width:Math.max(K.x-a.x,0),height:h}:{})}if(i==="right"){var F={x:y+S+D,y:l+h/2,textAnchor:$,verticalAnchor:"middle"};return Mn(Mn({},F),a?{width:Math.max(a.x+a.width-F.x,0),height:h}:{})}var z=a?{width:S,height:h}:{};return i==="insideLeft"?Mn({x:y+D,y:l+h/2,textAnchor:$,verticalAnchor:"middle"},z):i==="insideRight"?Mn({x:y+S-D,y:l+h/2,textAnchor:P,verticalAnchor:"middle"},z):i==="insideTop"?Mn({x:p+u/2,y:l+A,textAnchor:"middle",verticalAnchor:j},z):i==="insideBottom"?Mn({x:b+d/2,y:l+h-A,textAnchor:"middle",verticalAnchor:N},z):i==="insideTopLeft"?Mn({x:p+D,y:l+A,textAnchor:$,verticalAnchor:j},z):i==="insideTopRight"?Mn({x:p+u-D,y:l+A,textAnchor:P,verticalAnchor:j},z):i==="insideBottomLeft"?Mn({x:b+D,y:l+h-A,textAnchor:$,verticalAnchor:N},z):i==="insideBottomRight"?Mn({x:b+d-D,y:l+h-A,textAnchor:P,verticalAnchor:N},z):i&&typeof i=="object"&&(Qe(i.x)||Ms(i.x))&&(Qe(i.y)||Ms(i.y))?Mn({x:o+Wl(i.x,S),y:l+Wl(i.y,h),textAnchor:"end",verticalAnchor:"end"},z):Mn({x:_,y:l+h/2,textAnchor:"middle",verticalAnchor:"middle"},z)},I1e={angle:0,offset:5,zIndex:Vr.label,position:"middle",textBreakAll:!1};function Ml(e){var t=Vi(e,I1e),{viewBox:n,position:r,value:i,children:a,content:o,className:l="",textBreakAll:u,labelRef:d}=t,h=C1e(),p=MU(),b=r==="center"?p:h??p,y,S,_;if(n==null?y=b:dE(n)?y=n:y=G9(n),!y||Ar(i)&&Ar(a)&&!w.isValidElement(o)&&typeof o!="function")return null;var k=Mn(Mn({},t),{},{viewBox:y});if(w.isValidElement(o)){var{labelRef:A}=k,N=k1e(k,S1e);return w.cloneElement(o,N)}if(typeof o=="function"){if(S=w.createElement(o,k),w.isValidElement(S))return S}else S=M1e(t);var j=Sa(t);if(dE(y)){if(r==="insideStart"||r==="insideEnd"||r==="end")return P1e(t,r,S,j,y);_=R1e(y,t.offset,t.position)}else _=L1e(t,y);return w.createElement(Ys,{zIndex:t.zIndex},w.createElement(mj,ws({ref:d,className:rn("recharts-label",l)},j,_,{textAnchor:y1e(j.textAnchor)?j.textAnchor:_.textAnchor,breakAll:u}),S))}Ml.displayName="Label";var $1e=(e,t,n)=>{if(!e)return null;var r={viewBox:t,labelRef:n};return e===!0?w.createElement(Ml,ws({key:"label-implicit"},r)):$o(e)?w.createElement(Ml,ws({key:"label-implicit",value:e},r)):w.isValidElement(e)?e.type===Ml?w.cloneElement(e,Mn({key:"label-implicit"},r)):w.createElement(Ml,ws({key:"label-implicit",content:e},r)):pj(e)?w.createElement(Ml,ws({key:"label-implicit",content:e},r)):e&&typeof e=="object"?w.createElement(Ml,ws({},e,{key:"label-implicit"},r)):null};function B1e(e){var{label:t,labelRef:n}=e,r=MU();return $1e(t,r,n)||null}var KS={},WS={},EI;function z1e(){return EI||(EI=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n[n.length-1]}e.last=t})(WS)),WS}var VS={},TI;function U1e(){return TI||(TI=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Array.isArray(n)?n:Array.from(n)}e.toArray=t})(VS)),VS}var AI;function F1e(){return AI||(AI=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=z1e(),n=U1e(),r=rA();function i(a){if(r.isArrayLike(a))return t.last(n.toArray(a))}e.last=i})(KS)),KS}var ZS,jI;function H1e(){return jI||(jI=1,ZS=F1e().last),ZS}var G1e=H1e();const q1e=wi(G1e);var Y1e=["valueAccessor"],K1e=["dataKey","clockWise","id","textBreakAll","zIndex"];function sv(){return sv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sv.apply(null,arguments)}function OI(e,t){if(e==null)return{};var n,r,i=W1e(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function W1e(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var V1e=e=>Array.isArray(e.value)?q1e(e.value):e.value,DU=w.createContext(void 0),Z1e=DU.Provider,PU=w.createContext(void 0);PU.Provider;function X1e(){return w.useContext(DU)}function J1e(){return w.useContext(PU)}function Hb(e){var{valueAccessor:t=V1e}=e,n=OI(e,Y1e),{dataKey:r,clockWise:i,id:a,textBreakAll:o,zIndex:l}=n,u=OI(n,K1e),d=X1e(),h=J1e(),p=d||h;return!p||!p.length?null:w.createElement(Ys,{zIndex:l??Vr.label},w.createElement(Io,{className:"recharts-label-list"},p.map((b,y)=>{var S,_=Ar(r)?t(b,y):Ir(b&&b.payload,r),k=Ar(a)?{}:{id:"".concat(a,"-").concat(y)};return w.createElement(Ml,sv({key:"label-".concat(y)},Sa(b),u,k,{fill:(S=n.fill)!==null&&S!==void 0?S:b.fill,parentViewBox:b.parentViewBox,value:_,textBreakAll:o,viewBox:b.viewBox,index:y,zIndex:0}))})))}Hb.displayName="LabelList";function Q1e(e){var{label:t}=e;return t?t===!0?w.createElement(Hb,{key:"labelList-implicit"}):w.isValidElement(t)||pj(t)?w.createElement(Hb,{key:"labelList-implicit",content:t}):typeof t=="object"?w.createElement(Hb,sv({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}function fE(){return fE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fE.apply(null,arguments)}var RU=e=>{var{cx:t,cy:n,r,className:i}=e,a=rn("recharts-dot",i);return Qe(t)&&Qe(n)&&Qe(r)?w.createElement("circle",fE({},to(e),nA(e),{className:a,cx:t,cy:n,r})):null},eSe={radiusAxis:{},angleAxis:{}},LU=Si({name:"polarAxis",initialState:eSe,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:gCe,removeRadiusAxis:bCe,addAngleAxis:yCe,removeAngleAxis:vCe}=LU.actions,tSe=LU.reducer,XS={exports:{}},Rt={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NI;function nSe(){if(NI)return Rt;NI=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,n=e?Symbol.for("react.portal"):60106,r=e?Symbol.for("react.fragment"):60107,i=e?Symbol.for("react.strict_mode"):60108,a=e?Symbol.for("react.profiler"):60114,o=e?Symbol.for("react.provider"):60109,l=e?Symbol.for("react.context"):60110,u=e?Symbol.for("react.async_mode"):60111,d=e?Symbol.for("react.concurrent_mode"):60111,h=e?Symbol.for("react.forward_ref"):60112,p=e?Symbol.for("react.suspense"):60113,b=e?Symbol.for("react.suspense_list"):60120,y=e?Symbol.for("react.memo"):60115,S=e?Symbol.for("react.lazy"):60116,_=e?Symbol.for("react.block"):60121,k=e?Symbol.for("react.fundamental"):60117,A=e?Symbol.for("react.responder"):60118,N=e?Symbol.for("react.scope"):60119;function j(D){if(typeof D=="object"&&D!==null){var P=D.$$typeof;switch(P){case t:switch(D=D.type,D){case u:case d:case r:case a:case i:case p:return D;default:switch(D=D&&D.$$typeof,D){case l:case h:case S:case y:case o:return D;default:return P}}case n:return P}}}function C(D){return j(D)===d}return Rt.AsyncMode=u,Rt.ConcurrentMode=d,Rt.ContextConsumer=l,Rt.ContextProvider=o,Rt.Element=t,Rt.ForwardRef=h,Rt.Fragment=r,Rt.Lazy=S,Rt.Memo=y,Rt.Portal=n,Rt.Profiler=a,Rt.StrictMode=i,Rt.Suspense=p,Rt.isAsyncMode=function(D){return C(D)||j(D)===u},Rt.isConcurrentMode=C,Rt.isContextConsumer=function(D){return j(D)===l},Rt.isContextProvider=function(D){return j(D)===o},Rt.isElement=function(D){return typeof D=="object"&&D!==null&&D.$$typeof===t},Rt.isForwardRef=function(D){return j(D)===h},Rt.isFragment=function(D){return j(D)===r},Rt.isLazy=function(D){return j(D)===S},Rt.isMemo=function(D){return j(D)===y},Rt.isPortal=function(D){return j(D)===n},Rt.isProfiler=function(D){return j(D)===a},Rt.isStrictMode=function(D){return j(D)===i},Rt.isSuspense=function(D){return j(D)===p},Rt.isValidElementType=function(D){return typeof D=="string"||typeof D=="function"||D===r||D===d||D===a||D===i||D===p||D===b||typeof D=="object"&&D!==null&&(D.$$typeof===S||D.$$typeof===y||D.$$typeof===o||D.$$typeof===l||D.$$typeof===h||D.$$typeof===k||D.$$typeof===A||D.$$typeof===N||D.$$typeof===_)},Rt.typeOf=j,Rt}var CI;function rSe(){return CI||(CI=1,XS.exports=nSe()),XS.exports}rSe();var IU=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0;function iSe(e){var{tooltipEntrySettings:t}=e,n=pr(),r=ki(),i=w.useRef(null);return w.useLayoutEffect(()=>{r||(i.current===null?n(Fxe(t)):i.current!==t&&n(Hxe({prev:i.current,next:t})),i.current=t)},[t,n,r]),w.useLayoutEffect(()=>()=>{i.current&&(n(Gxe(i.current)),i.current=null)},[n]),null}function aSe(e){var{legendPayload:t}=e,n=pr(),r=ki(),i=w.useRef(null);return w.useLayoutEffect(()=>{r||(i.current===null?n(yge(t)):i.current!==t&&n(vge({prev:i.current,next:t})),i.current=t)},[n,r,t]),w.useLayoutEffect(()=>()=>{i.current&&(n(xge(i.current)),i.current=null)},[n]),null}var JS,oSe=()=>{var[e]=w.useState(()=>Vm("uid-"));return e},sSe=(JS=IG.useId)!==null&&JS!==void 0?JS:oSe;function $U(e,t){var n=sSe();return t||(e?"".concat(e,"-").concat(n):n)}var lSe=w.createContext(void 0),cSe=e=>{var{id:t,type:n,children:r}=e,i=$U("recharts-".concat(n),t);return w.createElement(lSe.Provider,{value:i},r(i))},uSe={cartesianItems:[],polarItems:[]},BU=Si({name:"graphicalItems",initialState:uSe,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:un()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:n,next:r}=t.payload,i=Ja(e).cartesianItems.indexOf(n);i>-1&&(e.cartesianItems[i]=r)},prepare:un()},removeCartesianGraphicalItem:{reducer(e,t){var n=Ja(e).cartesianItems.indexOf(t.payload);n>-1&&e.cartesianItems.splice(n,1)},prepare:un()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:un()},removePolarGraphicalItem:{reducer(e,t){var n=Ja(e).polarItems.indexOf(t.payload);n>-1&&e.polarItems.splice(n,1)},prepare:un()}}}),{addCartesianGraphicalItem:dSe,replaceCartesianGraphicalItem:fSe,removeCartesianGraphicalItem:hSe,addPolarGraphicalItem:xCe,removePolarGraphicalItem:wCe}=BU.actions,mSe=BU.reducer,pSe=e=>{var t=pr(),n=w.useRef(null);return w.useLayoutEffect(()=>{n.current===null?t(dSe(e)):n.current!==e&&t(fSe({prev:n.current,next:e})),n.current=e},[t,e]),w.useLayoutEffect(()=>()=>{n.current&&(t(hSe(n.current)),n.current=null)},[t]),null},gSe=w.memo(pSe),bSe=["points"];function MI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function QS(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?MI(Object(n),!0).forEach(function(r){ySe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ySe(e,t,n){return(t=vSe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vSe(e){var t=xSe(e,"string");return typeof t=="symbol"?t:t+""}function xSe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lv(){return lv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lv.apply(null,arguments)}function wSe(e,t){if(e==null)return{};var n,r,i=_Se(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function _Se(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function SSe(e){var{option:t,dotProps:n,className:r}=e;if(w.isValidElement(t))return w.cloneElement(t,n);if(typeof t=="function")return t(n);var i=rn(r,typeof t!="boolean"?t.className:""),a=n??{},{points:o}=a,l=wSe(a,bSe);return w.createElement(RU,lv({},l,{className:i}))}function kSe(e,t){return e==null?!1:t?!0:e.length===1}function ESe(e){var{points:t,dot:n,className:r,dotClassName:i,dataKey:a,baseProps:o,needClip:l,clipPathId:u,zIndex:d=Vr.scatter}=e;if(!kSe(t,n))return null;var h=IU(n),p=Pfe(n),b=t.map((S,_)=>{var k,A,N=QS(QS(QS({r:3},o),p),{},{index:_,cx:(k=S.x)!==null&&k!==void 0?k:void 0,cy:(A=S.y)!==null&&A!==void 0?A:void 0,dataKey:a,value:S.value,payload:S.payload,points:t});return w.createElement(SSe,{key:"dot-".concat(_),option:n,dotProps:N,className:i})}),y={};return l&&u!=null&&(y.clipPath="url(#clipPath-".concat(h?"":"dots-").concat(u,")")),w.createElement(Ys,{zIndex:d},w.createElement(Io,lv({className:r},y),b))}function DI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function PI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?DI(Object(n),!0).forEach(function(r){TSe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function TSe(e,t,n){return(t=ASe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ASe(e){var t=jSe(e,"string");return typeof t=="symbol"?t:t+""}function jSe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var OSe={xAxis:{},yAxis:{},zAxis:{}},zU=Si({name:"cartesianAxis",initialState:OSe,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:un()},replaceXAxis:{reducer(e,t){var{prev:n,next:r}=t.payload;e.xAxis[n.id]!==void 0&&(n.id!==r.id&&delete e.xAxis[n.id],e.xAxis[r.id]=r)},prepare:un()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:un()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:un()},replaceYAxis:{reducer(e,t){var{prev:n,next:r}=t.payload;e.yAxis[n.id]!==void 0&&(n.id!==r.id&&delete e.yAxis[n.id],e.yAxis[r.id]=r)},prepare:un()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:un()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:un()},replaceZAxis:{reducer(e,t){var{prev:n,next:r}=t.payload;e.zAxis[n.id]!==void 0&&(n.id!==r.id&&delete e.zAxis[n.id],e.zAxis[r.id]=r)},prepare:un()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:un()},updateYAxisWidth(e,t){var{id:n,width:r}=t.payload,i=e.yAxis[n];if(i){var a=i.widthHistory||[];if(a.length===3&&a[0]===a[2]&&r===a[1]&&r!==i.width&&Math.abs(r-a[0])<=1)return;var o=[...a,r].slice(-3);e.yAxis[n]=PI(PI({},e.yAxis[n]),{},{width:r,widthHistory:o})}}}}),{addXAxis:NSe,replaceXAxis:CSe,removeXAxis:MSe,addYAxis:DSe,replaceYAxis:PSe,removeYAxis:RSe,addZAxis:_Ce,replaceZAxis:SCe,removeZAxis:kCe,updateYAxisWidth:LSe}=zU.actions,ISe=zU.reducer,$Se=xe([Nr],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),BSe=xe([$Se,zs,Us],(e,t,n)=>{if(!(!e||t==null||n==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,n-e.top-e.bottom)}}),gj=()=>tt(BSe),zSe=()=>tt(Lwe);function RI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ek(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?RI(Object(n),!0).forEach(function(r){USe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):RI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function USe(e,t,n){return(t=FSe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function FSe(e){var t=HSe(e,"string");return typeof t=="symbol"?t:t+""}function HSe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var GSe=e=>{var{point:t,childIndex:n,mainColor:r,activeDot:i,dataKey:a,clipPath:o}=e;if(i===!1||t.x==null||t.y==null)return null;var l={index:n,dataKey:a,cx:t.x,cy:t.y,r:4,fill:r??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},u=ek(ek(ek({},l),Xv(i)),nA(i)),d;return w.isValidElement(i)?d=w.cloneElement(i,u):typeof i=="function"?d=i(u):d=w.createElement(RU,u),w.createElement(Io,{className:"recharts-active-dot",clipPath:o},d)};function LI(e){var{points:t,mainColor:n,activeDot:r,itemDataKey:i,clipPath:a,zIndex:o=Vr.activeDot}=e,l=tt(lp),u=zSe();if(t==null||u==null)return null;var d=t.find(h=>u.includes(h.payload));return Ar(d)?null:w.createElement(Ys,{zIndex:o},w.createElement(GSe,{point:d,childIndex:Number(l),mainColor:n,dataKey:i,activeDot:r,clipPath:a}))}var qSe={},UU=Si({name:"errorBars",initialState:qSe,reducers:{addErrorBar:(e,t)=>{var{itemId:n,errorBar:r}=t.payload;e[n]||(e[n]=[]),e[n].push(r)},replaceErrorBar:(e,t)=>{var{itemId:n,prev:r,next:i}=t.payload;e[n]&&(e[n]=e[n].map(a=>a.dataKey===r.dataKey&&a.direction===r.direction?i:a))},removeErrorBar:(e,t)=>{var{itemId:n,errorBar:r}=t.payload;e[n]&&(e[n]=e[n].filter(i=>i.dataKey!==r.dataKey||i.direction!==r.direction))}}}),{addErrorBar:ECe,replaceErrorBar:TCe,removeErrorBar:ACe}=UU.actions,YSe=UU.reducer;function FU(e,t){var n,r,i=tt(d=>Hs(d,e)),a=tt(d=>Gs(d,t)),o=(n=i?.allowDataOverflow)!==null&&n!==void 0?n:lr.allowDataOverflow,l=(r=a?.allowDataOverflow)!==null&&r!==void 0?r:cr.allowDataOverflow,u=o||l;return{needClip:u,needClipX:o,needClipY:l}}function KSe(e){var{xAxisId:t,yAxisId:n,clipPathId:r}=e,i=gj(),{needClipX:a,needClipY:o,needClip:l}=FU(t,n);if(!l||!i)return null;var{x:u,y:d,width:h,height:p}=i;return w.createElement("clipPath",{id:"clipPath-".concat(r)},w.createElement("rect",{x:a?u:u-h/2,y:o?d:d-p/2,width:a?h:h*2,height:o?p:p*2}))}var WSe=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle"]);function VSe(e,t){return e==null&&t==null?!0:typeof e=="number"&&typeof t=="number"?e===t||e!==e&&t!==t:e===t}function bj(e,t){var n=new Set([...Object.keys(e),...Object.keys(t)]);for(var r of n)if(WSe.has(r)){if(e[r]==null&&t[r]==null)continue;if(!Pb(e[r],t[r]))return!1}else if(!VSe(e[r],t[r]))return!1;return!0}var ZSe=e=>{var{chartData:t}=e,n=pr(),r=ki();return w.useEffect(()=>r?()=>{}:(n(cI(t)),()=>{n(cI(void 0))}),[t,n,r]),null},II={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},HU=Si({name:"brush",initialState:II,reducers:{setBrushSettings(e,t){return t.payload==null?II:t.payload}}}),{setBrushSettings:jCe}=HU.actions,XSe=HU.reducer;function JSe(e,t,n){return(t=QSe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function QSe(e){var t=eke(e,"string");return typeof t=="symbol"?t:t+""}function eke(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class yj{static create(t){return new yj(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:n,position:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(r)switch(r){case"start":return this.scale(t);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+i}case"end":{var a=this.bandwidth?this.bandwidth():0;return this.scale(t)+a}default:return this.scale(t)}if(n){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+o}return this.scale(t)}}isInRange(t){var n=this.range(),r=n[0],i=n[n.length-1];return r<=i?t>=r&&t<=i:t>=i&&t<=r}}JSe(yj,"EPS",1e-4);function tke(e){return(e%180+180)%180}var nke=function(t){var{width:n,height:r}=t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=tke(i),o=a*Math.PI/180,l=Math.atan(r/n),u=o>l&&o<Math.PI-l?r/Math.sin(o):n/Math.cos(o);return Math.abs(u)},rke={dots:[],areas:[],lines:[]},GU=Si({name:"referenceElements",initialState:rke,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var n=Ja(e).dots.findIndex(r=>r===t.payload);n!==-1&&e.dots.splice(n,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var n=Ja(e).areas.findIndex(r=>r===t.payload);n!==-1&&e.areas.splice(n,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var n=Ja(e).lines.findIndex(r=>r===t.payload);n!==-1&&e.lines.splice(n,1)}}}),{addDot:OCe,removeDot:NCe,addArea:CCe,removeArea:MCe,addLine:DCe,removeLine:PCe}=GU.actions,ike=GU.reducer,ake=w.createContext(void 0),oke=e=>{var{children:t}=e,[n]=w.useState("".concat(Vm("recharts"),"-clip")),r=gj();if(r==null)return null;var{x:i,y:a,width:o,height:l}=r;return w.createElement(ake.Provider,{value:n},w.createElement("defs",null,w.createElement("clipPath",{id:n},w.createElement("rect",{x:i,y:a,height:l,width:o}))),t)};function qU(e,t){if(t<1)return[];if(t===1)return e;for(var n=[],r=0;r<e.length;r+=t)n.push(e[r]);return n}function ske(e,t,n){var r={width:e.width+t.width,height:e.height+t.height};return nke(r,n)}function lke(e,t,n){var r=n==="width",{x:i,y:a,width:o,height:l}=e;return t===1?{start:r?i:a,end:r?i+o:a+l}:{start:r?i+o:a+l,end:r?i:a}}function cv(e,t,n,r,i){if(e*t<e*r||e*t>e*i)return!1;var a=n();return e*(t-e*a/2-r)>=0&&e*(t+e*a/2-i)<=0}function cke(e,t){return qU(e,t+1)}function uke(e,t,n,r,i){for(var a=(r||[]).slice(),{start:o,end:l}=t,u=0,d=1,h=o,p=function(){var S=r?.[u];if(S===void 0)return{v:qU(r,d)};var _=u,k,A=()=>(k===void 0&&(k=n(S,_)),k),N=S.coordinate,j=u===0||cv(e,N,A,h,l);j||(u=0,h=o,d+=1),j&&(h=N+e*(A()/2+i),u+=d)},b;d<=a.length;)if(b=p(),b)return b.v;return[]}function $I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Rr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$I(Object(n),!0).forEach(function(r){dke(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$I(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function dke(e,t,n){return(t=fke(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fke(e){var t=hke(e,"string");return typeof t=="symbol"?t:t+""}function hke(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mke(e,t,n,r,i){for(var a=(r||[]).slice(),o=a.length,{start:l}=t,{end:u}=t,d=function(b){var y=a[b],S,_=()=>(S===void 0&&(S=n(y,b)),S);if(b===o-1){var k=e*(y.coordinate+e*_()/2-u);a[b]=y=Rr(Rr({},y),{},{tickCoord:k>0?y.coordinate-k*e:y.coordinate})}else a[b]=y=Rr(Rr({},y),{},{tickCoord:y.coordinate});if(y.tickCoord!=null){var A=cv(e,y.tickCoord,_,l,u);A&&(u=y.tickCoord-e*(_()/2+i),a[b]=Rr(Rr({},y),{},{isShow:!0}))}},h=o-1;h>=0;h--)d(h);return a}function pke(e,t,n,r,i,a){var o=(r||[]).slice(),l=o.length,{start:u,end:d}=t;if(a){var h=r[l-1],p=n(h,l-1),b=e*(h.coordinate+e*p/2-d);if(o[l-1]=h=Rr(Rr({},h),{},{tickCoord:b>0?h.coordinate-b*e:h.coordinate}),h.tickCoord!=null){var y=cv(e,h.tickCoord,()=>p,u,d);y&&(d=h.tickCoord-e*(p/2+i),o[l-1]=Rr(Rr({},h),{},{isShow:!0}))}}for(var S=a?l-1:l,_=function(N){var j=o[N],C,D=()=>(C===void 0&&(C=n(j,N)),C);if(N===0){var P=e*(j.coordinate-e*D()/2-u);o[N]=j=Rr(Rr({},j),{},{tickCoord:P<0?j.coordinate-P*e:j.coordinate})}else o[N]=j=Rr(Rr({},j),{},{tickCoord:j.coordinate});if(j.tickCoord!=null){var $=cv(e,j.tickCoord,D,u,d);$&&(u=j.tickCoord+e*(D()/2+i),o[N]=Rr(Rr({},j),{},{isShow:!0}))}},k=0;k<S;k++)_(k);return o}function vj(e,t,n){var{tick:r,ticks:i,viewBox:a,minTickGap:o,orientation:l,interval:u,tickFormatter:d,unit:h,angle:p}=e;if(!i||!i.length||!r)return[];if(Qe(u)||jf.isSsr){var b;return(b=cke(i,Qe(u)?u:0))!==null&&b!==void 0?b:[]}var y=[],S=l==="top"||l==="bottom"?"width":"height",_=h&&S==="width"?Cm(h,{fontSize:t,letterSpacing:n}):{width:0,height:0},k=(j,C)=>{var D=typeof d=="function"?d(j.value,C):j.value;return S==="width"?ske(Cm(D,{fontSize:t,letterSpacing:n}),_,p):Cm(D,{fontSize:t,letterSpacing:n})[S]},A=i.length>=2?ba(i[1].coordinate-i[0].coordinate):1,N=lke(a,A,S);return u==="equidistantPreserveStart"?uke(A,N,k,i,o):(u==="preserveStart"||u==="preserveStartEnd"?y=pke(A,N,k,i,o,u==="preserveStartEnd"):y=mke(A,N,k,i,o),y.filter(j=>j.isShow))}var gke=e=>{var{ticks:t,label:n,labelGapWithTick:r=5,tickSize:i=0,tickMargin:a=0}=e,o=0;if(t){Array.from(t).forEach(h=>{if(h){var p=h.getBoundingClientRect();p.width>o&&(o=p.width)}});var l=n?n.getBoundingClientRect().width:0,u=i+a,d=o+u+l+(n?r:0);return Math.round(d)}return 0},bke=["axisLine","width","height","className","hide","ticks","axisType"];function yke(e,t){if(e==null)return{};var n,r,i=vke(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function vke(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function xu(){return xu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xu.apply(null,arguments)}function BI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Hn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?BI(Object(n),!0).forEach(function(r){xke(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function xke(e,t,n){return(t=wke(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wke(e){var t=_ke(e,"string");return typeof t=="symbol"?t:t+""}function _ke(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var js={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:Vr.axis};function Ske(e){var{x:t,y:n,width:r,height:i,orientation:a,mirror:o,axisLine:l,otherSvgProps:u}=e;if(!l)return null;var d=Hn(Hn(Hn({},u),to(l)),{},{fill:"none"});if(a==="top"||a==="bottom"){var h=+(a==="top"&&!o||a==="bottom"&&o);d=Hn(Hn({},d),{},{x1:t,y1:n+h*i,x2:t+r,y2:n+h*i})}else{var p=+(a==="left"&&!o||a==="right"&&o);d=Hn(Hn({},d),{},{x1:t+p*r,y1:n,x2:t+p*r,y2:n+i})}return w.createElement("line",xu({},d,{className:rn("recharts-cartesian-axis-line",ex(l,"className"))}))}function kke(e,t,n,r,i,a,o,l,u){var d,h,p,b,y,S,_=l?-1:1,k=e.tickSize||o,A=Qe(e.tickCoord)?e.tickCoord:e.coordinate;switch(a){case"top":d=h=e.coordinate,b=n+ +!l*i,p=b-_*k,S=p-_*u,y=A;break;case"left":p=b=e.coordinate,h=t+ +!l*r,d=h-_*k,y=d-_*u,S=A;break;case"right":p=b=e.coordinate,h=t+ +l*r,d=h+_*k,y=d+_*u,S=A;break;default:d=h=e.coordinate,b=n+ +l*i,p=b+_*k,S=p+_*u,y=A;break}return{line:{x1:d,y1:p,x2:h,y2:b},tick:{x:y,y:S}}}function Eke(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function Tke(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function Ake(e){var{option:t,tickProps:n,value:r}=e,i,a=rn(n.className,"recharts-cartesian-axis-tick-value");if(w.isValidElement(t))i=w.cloneElement(t,Hn(Hn({},n),{},{className:a}));else if(typeof t=="function")i=t(Hn(Hn({},n),{},{className:a}));else{var o="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(o=rn(o,t?.className)),i=w.createElement(mj,xu({},n,{className:o}),r)}return i}var jke=w.forwardRef((e,t)=>{var{ticks:n=[],tick:r,tickLine:i,stroke:a,tickFormatter:o,unit:l,padding:u,tickTextProps:d,orientation:h,mirror:p,x:b,y,width:S,height:_,tickSize:k,tickMargin:A,fontSize:N,letterSpacing:j,getTicksConfig:C,events:D,axisType:P}=e,$=vj(Hn(Hn({},C),{},{ticks:n}),N,j),U=Eke(h,p),Y=Tke(h,p),K=to(C),F=Xv(r),z={};typeof i=="object"&&(z=i);var W=Hn(Hn({},K),{},{fill:"none"},z),X=$.map(J=>Hn({entry:J},kke(J,b,y,S,_,h,k,p,A))),Z=X.map(J=>{var{entry:te,line:ce}=J;return w.createElement(Io,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(te.value,"-").concat(te.coordinate,"-").concat(te.tickCoord)},i&&w.createElement("line",xu({},W,ce,{className:rn("recharts-cartesian-axis-tick-line",ex(i,"className"))})))}),G=X.map((J,te)=>{var{entry:ce,tick:oe}=J,B=Hn(Hn(Hn(Hn({textAnchor:U,verticalAnchor:Y},K),{},{stroke:"none",fill:a},F),oe),{},{index:te,payload:ce,visibleTicksCount:$.length,tickFormatter:o,padding:u},d);return w.createElement(Io,xu({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(ce.value,"-").concat(ce.coordinate,"-").concat(ce.tickCoord)},ghe(D,ce,te)),r&&w.createElement(Ake,{option:r,tickProps:B,value:"".concat(typeof o=="function"?o(ce.value,te):ce.value).concat(l||"")}))});return w.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(P,"-ticks")},G.length>0&&w.createElement(Ys,{zIndex:Vr.label},w.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(P,"-tick-labels"),ref:t},G)),Z.length>0&&w.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(P,"-tick-lines")},Z))}),Oke=w.forwardRef((e,t)=>{var{axisLine:n,width:r,height:i,className:a,hide:o,ticks:l,axisType:u}=e,d=yke(e,bke),[h,p]=w.useState(""),[b,y]=w.useState(""),S=w.useRef(null);w.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var k;return gke({ticks:S.current,label:(k=e.labelRef)===null||k===void 0?void 0:k.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var _=w.useCallback(k=>{if(k){var A=k.getElementsByClassName("recharts-cartesian-axis-tick-value");S.current=A;var N=A[0];if(N){var j=window.getComputedStyle(N),C=j.fontSize,D=j.letterSpacing;(C!==h||D!==b)&&(p(C),y(D))}}},[h,b]);return o||r!=null&&r<=0||i!=null&&i<=0?null:w.createElement(Ys,{zIndex:e.zIndex},w.createElement(Io,{className:rn("recharts-cartesian-axis",a)},w.createElement(Ske,{x:e.x,y:e.y,width:r,height:i,orientation:e.orientation,mirror:e.mirror,axisLine:n,otherSvgProps:to(e)}),w.createElement(jke,{ref:_,axisType:u,events:d,fontSize:h,getTicksConfig:e,height:e.height,letterSpacing:b,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:l,unit:e.unit,width:e.width,x:e.x,y:e.y}),w.createElement(O1e,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},w.createElement(B1e,{label:e.label,labelRef:e.labelRef}),e.children)))}),xj=w.forwardRef((e,t)=>{var n=Vi(e,js);return w.createElement(Oke,xu({},n,{ref:t}))});xj.displayName="CartesianAxis";var Nke=["x1","y1","x2","y2","key"],Cke=["offset"],Mke=["xAxisId","yAxisId"],Dke=["xAxisId","yAxisId"];function zI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Lr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?zI(Object(n),!0).forEach(function(r){Pke(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Pke(e,t,n){return(t=Rke(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rke(e){var t=Lke(e,"string");return typeof t=="symbol"?t:t+""}function Lke(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function su(){return su=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},su.apply(null,arguments)}function uv(e,t){if(e==null)return{};var n,r,i=Ike(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Ike(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var $ke=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:n,x:r,y:i,width:a,height:o,ry:l}=e;return w.createElement("rect",{x:r,y:i,ry:l,width:a,height:o,stroke:"none",fill:t,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function YU(e){var{option:t,lineItemProps:n}=e,r;if(w.isValidElement(t))r=w.cloneElement(t,n);else if(typeof t=="function")r=t(n);else{var i,{x1:a,y1:o,x2:l,y2:u,key:d}=n,h=uv(n,Nke),p=(i=to(h))!==null&&i!==void 0?i:{},{offset:b}=p,y=uv(p,Cke);r=w.createElement("line",su({},y,{x1:a,y1:o,x2:l,y2:u,fill:"none",key:d}))}return r}function Bke(e){var{x:t,width:n,horizontal:r=!0,horizontalPoints:i}=e;if(!r||!i||!i.length)return null;var{xAxisId:a,yAxisId:o}=e,l=uv(e,Mke),u=i.map((d,h)=>{var p=Lr(Lr({},l),{},{x1:t,y1:d,x2:t+n,y2:d,key:"line-".concat(h),index:h});return w.createElement(YU,{key:"line-".concat(h),option:r,lineItemProps:p})});return w.createElement("g",{className:"recharts-cartesian-grid-horizontal"},u)}function zke(e){var{y:t,height:n,vertical:r=!0,verticalPoints:i}=e;if(!r||!i||!i.length)return null;var{xAxisId:a,yAxisId:o}=e,l=uv(e,Dke),u=i.map((d,h)=>{var p=Lr(Lr({},l),{},{x1:d,y1:t,x2:d,y2:t+n,key:"line-".concat(h),index:h});return w.createElement(YU,{option:r,lineItemProps:p,key:"line-".concat(h)})});return w.createElement("g",{className:"recharts-cartesian-grid-vertical"},u)}function Uke(e){var{horizontalFill:t,fillOpacity:n,x:r,y:i,width:a,height:o,horizontalPoints:l,horizontal:u=!0}=e;if(!u||!t||!t.length||l==null)return null;var d=l.map(p=>Math.round(p+i-i)).sort((p,b)=>p-b);i!==d[0]&&d.unshift(0);var h=d.map((p,b)=>{var y=!d[b+1],S=y?i+o-p:d[b+1]-p;if(S<=0)return null;var _=b%t.length;return w.createElement("rect",{key:"react-".concat(b),y:p,x:r,height:S,width:a,stroke:"none",fill:t[_],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return w.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},h)}function Fke(e){var{vertical:t=!0,verticalFill:n,fillOpacity:r,x:i,y:a,width:o,height:l,verticalPoints:u}=e;if(!t||!n||!n.length)return null;var d=u.map(p=>Math.round(p+i-i)).sort((p,b)=>p-b);i!==d[0]&&d.unshift(0);var h=d.map((p,b)=>{var y=!d[b+1],S=y?i+o-p:d[b+1]-p;if(S<=0)return null;var _=b%n.length;return w.createElement("rect",{key:"react-".concat(b),x:p,y:a,width:S,height:l,stroke:"none",fill:n[_],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return w.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},h)}var Hke=(e,t)=>{var{xAxis:n,width:r,height:i,offset:a}=e;return L9(vj(Lr(Lr(Lr({},js),n),{},{ticks:I9(n),viewBox:{x:0,y:0,width:r,height:i}})),a.left,a.left+a.width,t)},Gke=(e,t)=>{var{yAxis:n,width:r,height:i,offset:a}=e;return L9(vj(Lr(Lr(Lr({},js),n),{},{ticks:I9(n),viewBox:{x:0,y:0,width:r,height:i}})),a.top,a.top+a.height,t)},qke={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:Vr.grid};function KU(e){var t=Y9(),n=K9(),r=q9(),i=Lr(Lr({},Vi(e,qke)),{},{x:Qe(e.x)?e.x:r.left,y:Qe(e.y)?e.y:r.top,width:Qe(e.width)?e.width:r.width,height:Qe(e.height)?e.height:r.height}),{xAxisId:a,yAxisId:o,x:l,y:u,width:d,height:h,syncWithTicks:p,horizontalValues:b,verticalValues:y}=i,S=ki(),_=tt(Y=>XL(Y,"xAxis",a,S)),k=tt(Y=>XL(Y,"yAxis",o,S));if(!Bo(d)||!Bo(h)||!Qe(l)||!Qe(u))return null;var A=i.verticalCoordinatesGenerator||Hke,N=i.horizontalCoordinatesGenerator||Gke,{horizontalPoints:j,verticalPoints:C}=i;if((!j||!j.length)&&typeof N=="function"){var D=b&&b.length,P=N({yAxis:k?Lr(Lr({},k),{},{ticks:D?b:k.ticks}):void 0,width:t??d,height:n??h,offset:r},D?!0:p);By(Array.isArray(P),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof P,"]")),Array.isArray(P)&&(j=P)}if((!C||!C.length)&&typeof A=="function"){var $=y&&y.length,U=A({xAxis:_?Lr(Lr({},_),{},{ticks:$?y:_.ticks}):void 0,width:t??d,height:n??h,offset:r},$?!0:p);By(Array.isArray(U),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof U,"]")),Array.isArray(U)&&(C=U)}return w.createElement(Ys,{zIndex:i.zIndex},w.createElement("g",{className:"recharts-cartesian-grid"},w.createElement($ke,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),w.createElement(Uke,su({},i,{horizontalPoints:j})),w.createElement(Fke,su({},i,{verticalPoints:C})),w.createElement(Bke,su({},i,{offset:r,horizontalPoints:j,xAxis:_,yAxis:k})),w.createElement(zke,su({},i,{offset:r,verticalPoints:C,xAxis:_,yAxis:k}))))}KU.displayName="CartesianGrid";function Yke(e){var t=Xv(e),n=3,r=2;if(t!=null){var{r:i,strokeWidth:a}=t,o=Number(i),l=Number(a);return(Number.isNaN(o)||o<0)&&(o=n),(Number.isNaN(l)||l<0)&&(l=r),{r:o,strokeWidth:l}}return{r:n,strokeWidth:r}}var WU=(e,t,n,r)=>Wz(e,"xAxis",t,r),VU=(e,t,n,r)=>Kz(e,"xAxis",t,r),ZU=(e,t,n,r)=>Wz(e,"yAxis",n,r),XU=(e,t,n,r)=>Kz(e,"yAxis",n,r),Kke=xe([Jt,WU,ZU,VU,XU],(e,t,n,r,i)=>Bs(e,"xAxis")?$y(t,r,!1):$y(n,i,!1)),Wke=(e,t,n,r,i)=>i,JU=xe([gz,Wke],(e,t)=>e.filter(n=>n.type==="area").find(n=>n.id===t)),Vke=(e,t,n,r,i)=>{var a,o=JU(e,t,n,r,i);if(o!=null){var l=Jt(e),u=Bs(l,"xAxis"),d;if(u?d=aE(e,"yAxis",n,r):d=aE(e,"xAxis",t,r),d!=null){var{stackId:h}=o,p=KA(o);if(!(h==null||p==null)){var b=(a=d[h])===null||a===void 0?void 0:a.stackedData;return b?.find(y=>y.key===p)}}}},Zke=xe([Jt,WU,ZU,VU,XU,Vke,$A,Kke,JU,Dve],(e,t,n,r,i,a,o,l,u,d)=>{var{chartData:h,dataStartIndex:p,dataEndIndex:b}=o;if(!(u==null||e!=="horizontal"&&e!=="vertical"||t==null||n==null||r==null||i==null||r.length===0||i.length===0||l==null)){var{data:y}=u,S;if(y&&y.length>0?S=y:S=h?.slice(p,b+1),S!=null)return p2e({layout:e,xAxis:t,yAxis:n,xAxisTicks:r,yAxisTicks:i,dataStartIndex:p,areaSettings:u,stackedData:a,displayedData:S,chartBaseValue:d,bandSize:l})}}),Xke=["id"],Jke=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function hu(){return hu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hu.apply(null,arguments)}function QU(e,t){if(e==null)return{};var n,r,i=Qke(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Qke(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function UI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function $d(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?UI(Object(n),!0).forEach(function(r){e2e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):UI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function e2e(e,t,n){return(t=t2e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function t2e(e){var t=n2e(e,"string");return typeof t=="symbol"?t:t+""}function n2e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dv(e,t){return e&&e!=="none"?e:t}var r2e=e=>{var{dataKey:t,name:n,stroke:r,fill:i,legendType:a,hide:o}=e;return[{inactive:o,dataKey:t,type:a,color:dv(r,i),value:$9(n,t),payload:e}]},i2e=w.memo(e=>{var{dataKey:t,data:n,stroke:r,strokeWidth:i,fill:a,name:o,hide:l,unit:u,tooltipType:d}=e,h={dataDefinedOnItem:n,positions:void 0,settings:{stroke:r,strokeWidth:i,fill:a,dataKey:t,nameKey:void 0,name:$9(o,t),hide:l,type:d,color:dv(r,a),unit:u}};return w.createElement(iSe,{tooltipEntrySettings:h})});function a2e(e){var{clipPathId:t,points:n,props:r}=e,{needClip:i,dot:a,dataKey:o}=r,l=to(r);return w.createElement(ESe,{points:n,dot:a,className:"recharts-area-dots",dotClassName:"recharts-area-dot",dataKey:o,baseProps:l,needClip:i,clipPathId:t})}function o2e(e){var{showLabels:t,children:n,points:r}=e,i=r.map(a=>{var o,l,u={x:(o=a.x)!==null&&o!==void 0?o:0,y:(l=a.y)!==null&&l!==void 0?l:0,width:0,lowerWidth:0,upperWidth:0,height:0};return $d($d({},u),{},{value:a.value,payload:a.payload,parentViewBox:void 0,viewBox:u,fill:void 0})});return w.createElement(Z1e,{value:t?i:void 0},n)}function FI(e){var{points:t,baseLine:n,needClip:r,clipPathId:i,props:a}=e,{layout:o,type:l,stroke:u,connectNulls:d,isRange:h}=a,{id:p}=a,b=QU(a,Xke),y=to(b),S=Sa(b);return w.createElement(w.Fragment,null,t?.length>1&&w.createElement(Io,{clipPath:r?"url(#clipPath-".concat(i,")"):void 0},w.createElement(Ub,hu({},S,{id:p,points:t,connectNulls:d,type:l,baseLine:n,layout:o,stroke:"none",className:"recharts-area-area"})),u!=="none"&&w.createElement(Ub,hu({},y,{className:"recharts-area-curve",layout:o,type:l,connectNulls:d,fill:"none",points:t})),u!=="none"&&h&&w.createElement(Ub,hu({},y,{className:"recharts-area-curve",layout:o,type:l,connectNulls:d,fill:"none",points:n}))),w.createElement(a2e,{points:t,props:b,clipPathId:i}))}function s2e(e){var{alpha:t,baseLine:n,points:r,strokeWidth:i}=e,a=r[0].y,o=r[r.length-1].y;if(!jn(a)||!jn(o))return null;var l=t*Math.abs(a-o),u=Math.max(...r.map(d=>d.x||0));return Qe(n)?u=Math.max(n,u):n&&Array.isArray(n)&&n.length&&(u=Math.max(...n.map(d=>d.x||0),u)),Qe(u)?w.createElement("rect",{x:0,y:a<o?a:a-l,width:u+(i?parseInt("".concat(i),10):1),height:Math.floor(l)}):null}function l2e(e){var{alpha:t,baseLine:n,points:r,strokeWidth:i}=e,a=r[0].x,o=r[r.length-1].x;if(!jn(a)||!jn(o))return null;var l=t*Math.abs(a-o),u=Math.max(...r.map(d=>d.y||0));return Qe(n)?u=Math.max(n,u):n&&Array.isArray(n)&&n.length&&(u=Math.max(...n.map(d=>d.y||0),u)),Qe(u)?w.createElement("rect",{x:a<o?a:a-l,y:0,width:l,height:Math.floor(u+(i?parseInt("".concat(i),10):1))}):null}function c2e(e){var{alpha:t,layout:n,points:r,baseLine:i,strokeWidth:a}=e;return n==="vertical"?w.createElement(s2e,{alpha:t,points:r,baseLine:i,strokeWidth:a}):w.createElement(l2e,{alpha:t,points:r,baseLine:i,strokeWidth:a})}function u2e(e){var{needClip:t,clipPathId:n,props:r,previousPointsRef:i,previousBaselineRef:a}=e,{points:o,baseLine:l,isAnimationActive:u,animationBegin:d,animationDuration:h,animationEasing:p,onAnimationStart:b,onAnimationEnd:y}=r,S=w.useMemo(()=>({points:o,baseLine:l}),[o,l]),_=o8(S,"recharts-area-"),k=ige(),[A,N]=w.useState(!1),j=!A,C=w.useCallback(()=>{typeof y=="function"&&y(),N(!1)},[y]),D=w.useCallback(()=>{typeof b=="function"&&b(),N(!0)},[b]);if(k==null)return null;var P=i.current,$=a.current;return w.createElement(o2e,{showLabels:j,points:o},r.children,w.createElement(a8,{animationId:_,begin:d,duration:h,isActive:u,easing:p,onAnimationEnd:C,onAnimationStart:D,key:_},U=>{if(P){var Y=P.length/o.length,K=U===1?o:o.map((z,W)=>{var X=Math.floor(W*Y);if(P[X]){var Z=P[X];return $d($d({},z),{},{x:Co(Z.x,z.x,U),y:Co(Z.y,z.y,U)})}return z}),F;return Qe(l)?F=Co($,l,U):Ar(l)||no(l)?F=Co($,0,U):F=l.map((z,W)=>{var X=Math.floor(W*Y);if(Array.isArray($)&&$[X]){var Z=$[X];return $d($d({},z),{},{x:Co(Z.x,z.x,U),y:Co(Z.y,z.y,U)})}return z}),U>0&&(i.current=K,a.current=F),w.createElement(FI,{points:K,baseLine:F,needClip:t,clipPathId:n,props:r})}return U>0&&(i.current=o,a.current=l),w.createElement(Io,null,u&&w.createElement("defs",null,w.createElement("clipPath",{id:"animationClipPath-".concat(n)},w.createElement(c2e,{alpha:U,points:o,baseLine:l,layout:k,strokeWidth:r.strokeWidth}))),w.createElement(Io,{clipPath:"url(#animationClipPath-".concat(n,")")},w.createElement(FI,{points:o,baseLine:l,needClip:t,clipPathId:n,props:r})))}),w.createElement(Q1e,{label:r.label}))}function d2e(e){var{needClip:t,clipPathId:n,props:r}=e,i=w.useRef(null),a=w.useRef();return w.createElement(u2e,{needClip:t,clipPathId:n,props:r,previousPointsRef:i,previousBaselineRef:a})}class f2e extends w.PureComponent{render(){var{hide:t,dot:n,points:r,className:i,top:a,left:o,needClip:l,xAxisId:u,yAxisId:d,width:h,height:p,id:b,baseLine:y,zIndex:S}=this.props;if(t)return null;var _=rn("recharts-area",i),k=b,{r:A,strokeWidth:N}=Yke(n),j=IU(n),C=A*2+N,D=l?"url(#clipPath-".concat(j?"":"dots-").concat(k,")"):void 0;return w.createElement(Ys,{zIndex:S},w.createElement(Io,{className:_},l&&w.createElement("defs",null,w.createElement(KSe,{clipPathId:k,xAxisId:u,yAxisId:d}),!j&&w.createElement("clipPath",{id:"clipPath-dots-".concat(k)},w.createElement("rect",{x:o-C/2,y:a-C/2,width:h+C,height:p+C}))),w.createElement(d2e,{needClip:l,clipPathId:k,props:this.props})),w.createElement(LI,{points:r,mainColor:dv(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:D}),this.props.isRange&&Array.isArray(y)&&w.createElement(LI,{points:y,mainColor:dv(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:D}))}}var eF={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:"auto",legendType:"line",stroke:"#3182bd",strokeWidth:1,type:"linear",label:!1,xAxisId:0,yAxisId:0,zIndex:Vr.area};function h2e(e){var t,n=Vi(e,eF),{activeDot:r,animationBegin:i,animationDuration:a,animationEasing:o,connectNulls:l,dot:u,fill:d,fillOpacity:h,hide:p,isAnimationActive:b,legendType:y,stroke:S,xAxisId:_,yAxisId:k}=n,A=QU(n,Jke),N=Mp(),j=pU(),{needClip:C}=FU(_,k),D=ki(),{points:P,isRange:$,baseLine:U}=(t=tt(X=>Zke(X,_,k,D,e.id)))!==null&&t!==void 0?t:{},Y=gj();if(N!=="horizontal"&&N!=="vertical"||Y==null||j!=="AreaChart"&&j!=="ComposedChart")return null;var{height:K,width:F,x:z,y:W}=Y;return!P||!P.length?null:w.createElement(f2e,hu({},A,{activeDot:r,animationBegin:i,animationDuration:a,animationEasing:o,baseLine:U,connectNulls:l,dot:u,fill:d,fillOpacity:h,height:K,hide:p,layout:N,isAnimationActive:b==="auto"?!jf.isSsr:b,isRange:$,legendType:y,needClip:C,points:P,stroke:S,width:F,left:z,top:W,xAxisId:_,yAxisId:k}))}var m2e=(e,t,n,r,i)=>{var a=n??t;if(Qe(a))return a;var o=e==="horizontal"?i:r,l=o.scale.domain();if(o.type==="number"){var u=Math.max(l[0],l[1]),d=Math.min(l[0],l[1]);return a==="dataMin"?d:a==="dataMax"||u<0?u:Math.max(Math.min(l[0],l[1]),0)}return a==="dataMin"?l[0]:a==="dataMax"?l[1]:l[0]};function p2e(e){var{areaSettings:{connectNulls:t,baseValue:n,dataKey:r},stackedData:i,layout:a,chartBaseValue:o,xAxis:l,yAxis:u,displayedData:d,dataStartIndex:h,xAxisTicks:p,yAxisTicks:b,bandSize:y}=e,S=i&&i.length,_=m2e(a,o,n,l,u),k=a==="horizontal",A=!1,N=d.map((C,D)=>{var P;S?P=i[h+D]:(P=Ir(C,r),Array.isArray(P)?A=!0:P=[_,P]);var $=P[1]==null||S&&!t&&Ir(C,r)==null;return k?{x:x3({axis:l,ticks:p,bandSize:y,entry:C,index:D}),y:$?null:u.scale(P[1]),value:P,payload:C}:{x:$?null:l.scale(P[1]),y:x3({axis:u,ticks:b,bandSize:y,entry:C,index:D}),value:P,payload:C}}),j;return S||A?j=N.map(C=>{var D=Array.isArray(C.value)?C.value[0]:null;return k?{x:C.x,y:D!=null&&C.y!=null?u.scale(D):null,payload:C.payload}:{x:D!=null?l.scale(D):null,y:C.y,payload:C.payload}}):j=k?u.scale(_):l.scale(_),{points:N,baseLine:j,isRange:A}}function g2e(e){var t=Vi(e,eF),n=ki();return w.createElement(cSe,{id:t.id,type:"area"},r=>w.createElement(w.Fragment,null,w.createElement(aSe,{legendPayload:r2e(t)}),w.createElement(i2e,{dataKey:t.dataKey,data:t.data,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType}),w.createElement(gSe,{type:"area",id:r,data:t.data,dataKey:t.dataKey,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,stackId:xpe(t.stackId),hide:t.hide,barSize:void 0,baseValue:t.baseValue,isPanorama:n,connectNulls:t.connectNulls}),w.createElement(h2e,hu({},t,{id:r}))))}var tF=w.memo(g2e,bj);tF.displayName="Area";var b2e=["domain","range"],y2e=["domain","range"];function HI(e,t){if(e==null)return{};var n,r,i=v2e(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function v2e(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function GI(e,t){return e===t?!0:Array.isArray(e)&&e.length===2&&Array.isArray(t)&&t.length===2?e[0]===t[0]&&e[1]===t[1]:!1}function nF(e,t){if(e===t)return!0;var{domain:n,range:r}=e,i=HI(e,b2e),{domain:a,range:o}=t,l=HI(t,y2e);return!GI(n,a)||!GI(r,o)?!1:bj(i,l)}var x2e=["dangerouslySetInnerHTML","ticks"],w2e=["id"];function hE(){return hE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hE.apply(null,arguments)}function qI(e,t){if(e==null)return{};var n,r,i=_2e(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function _2e(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function S2e(e){var t=pr(),n=w.useRef(null);return w.useLayoutEffect(()=>{n.current===null?t(NSe(e)):n.current!==e&&t(CSe({prev:n.current,next:e})),n.current=e},[e,t]),w.useLayoutEffect(()=>()=>{n.current&&(t(MSe(n.current)),n.current=null)},[t]),null}var k2e=e=>{var{xAxisId:t,className:n}=e,r=tt(z9),i=ki(),a="xAxis",o=tt(k=>Pf(k,a,t,i)),l=tt(k=>Yz(k,a,t,i)),u=tt(k=>Exe(k,t)),d=tt(k=>Cxe(k,t)),h=tt(k=>fz(k,t));if(u==null||d==null||h==null)return null;var{dangerouslySetInnerHTML:p,ticks:b}=e,y=qI(e,x2e),{id:S}=h,_=qI(h,w2e);return w.createElement(xj,hE({},y,_,{scale:o,x:d.x,y:d.y,width:u.width,height:u.height,className:rn("recharts-".concat(a," ").concat(a),n),viewBox:r,ticks:l,axisType:a}))},E2e={allowDataOverflow:lr.allowDataOverflow,allowDecimals:lr.allowDecimals,allowDuplicatedCategory:lr.allowDuplicatedCategory,angle:lr.angle,axisLine:js.axisLine,height:lr.height,hide:!1,includeHidden:lr.includeHidden,interval:lr.interval,minTickGap:lr.minTickGap,mirror:lr.mirror,orientation:lr.orientation,padding:lr.padding,reversed:lr.reversed,scale:lr.scale,tick:lr.tick,tickCount:lr.tickCount,tickLine:js.tickLine,tickSize:js.tickSize,type:lr.type,xAxisId:0},T2e=e=>{var t=Vi(e,E2e);return w.createElement(w.Fragment,null,w.createElement(S2e,{allowDataOverflow:t.allowDataOverflow,allowDecimals:t.allowDecimals,allowDuplicatedCategory:t.allowDuplicatedCategory,angle:t.angle,dataKey:t.dataKey,domain:t.domain,height:t.height,hide:t.hide,id:t.xAxisId,includeHidden:t.includeHidden,interval:t.interval,minTickGap:t.minTickGap,mirror:t.mirror,name:t.name,orientation:t.orientation,padding:t.padding,reversed:t.reversed,scale:t.scale,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit}),w.createElement(k2e,t))},rF=w.memo(T2e,nF);rF.displayName="XAxis";var A2e=["dangerouslySetInnerHTML","ticks"],j2e=["id"];function mE(){return mE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mE.apply(null,arguments)}function YI(e,t){if(e==null)return{};var n,r,i=O2e(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function O2e(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function N2e(e){var t=pr(),n=w.useRef(null);return w.useLayoutEffect(()=>{n.current===null?t(DSe(e)):n.current!==e&&t(PSe({prev:n.current,next:e})),n.current=e},[e,t]),w.useLayoutEffect(()=>()=>{n.current&&(t(RSe(n.current)),n.current=null)},[t]),null}var C2e=e=>{var{yAxisId:t,className:n,width:r,label:i}=e,a=w.useRef(null),o=w.useRef(null),l=tt(z9),u=ki(),d=pr(),h="yAxis",p=tt(D=>Pf(D,h,t,u)),b=tt(D=>Pxe(D,t)),y=tt(D=>Dxe(D,t)),S=tt(D=>Yz(D,h,t,u)),_=tt(D=>hz(D,t));if(w.useLayoutEffect(()=>{if(!(r!=="auto"||!b||pj(i)||w.isValidElement(i)||_==null)){var D=a.current;if(D){var P=D.getCalculatedWidth();Math.round(b.width)!==Math.round(P)&&d(LSe({id:t,width:P}))}}},[S,b,d,i,t,r,_]),b==null||y==null||_==null)return null;var{dangerouslySetInnerHTML:k,ticks:A}=e,N=YI(e,A2e),{id:j}=_,C=YI(_,j2e);return w.createElement(xj,mE({},N,C,{ref:a,labelRef:o,scale:p,x:y.x,y:y.y,tickTextProps:r==="auto"?{width:void 0}:{width:r},width:b.width,height:b.height,className:rn("recharts-".concat(h," ").concat(h),n),viewBox:l,ticks:S,axisType:h}))},M2e={allowDataOverflow:cr.allowDataOverflow,allowDecimals:cr.allowDecimals,allowDuplicatedCategory:cr.allowDuplicatedCategory,angle:cr.angle,axisLine:js.axisLine,hide:!1,includeHidden:cr.includeHidden,interval:cr.interval,minTickGap:cr.minTickGap,mirror:cr.mirror,orientation:cr.orientation,padding:cr.padding,reversed:cr.reversed,scale:cr.scale,tick:cr.tick,tickCount:cr.tickCount,tickLine:js.tickLine,tickSize:js.tickSize,type:cr.type,width:cr.width,yAxisId:0},D2e=e=>{var t=Vi(e,M2e);return w.createElement(w.Fragment,null,w.createElement(N2e,{interval:t.interval,id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:t.includeHidden,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:t.angle,minTickGap:t.minTickGap,tick:t.tick,tickFormatter:t.tickFormatter}),w.createElement(C2e,t))},iF=w.memo(D2e,nF);iF.displayName="YAxis";var P2e=(e,t)=>t,wj=xe([P2e,Jt,uz,nr,cU,qs,Wwe,Nr],t_e),_j=e=>{var t=e.currentTarget.getBoundingClientRect(),n=t.width/e.currentTarget.offsetWidth,r=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/n),chartY:Math.round((e.clientY-t.top)/r)}},aF=ka("mouseClick"),oF=Np();oF.startListening({actionCreator:aF,effect:(e,t)=>{var n=e.payload,r=wj(t.getState(),_j(n));r?.activeIndex!=null&&t.dispatch(Kxe({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var pE=ka("mouseMove"),sF=Np(),yb=null;sF.startListening({actionCreator:pE,effect:(e,t)=>{var n=e.payload;yb!==null&&cancelAnimationFrame(yb);var r=_j(n);yb=requestAnimationFrame(()=>{var i=t.getState(),a=ij(i,i.tooltip.settings.shared);if(a==="axis"){var o=wj(i,r);o?.activeIndex!=null?t.dispatch(tU({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate})):t.dispatch(eU())}yb=null})}});var KI={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},lF=Si({name:"rootProps",initialState:KI,reducers:{updateOptions:(e,t)=>{var n;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(n=t.payload.barGap)!==null&&n!==void 0?n:KI.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue,e.reverseStackOrder=t.payload.reverseStackOrder}}}),R2e=lF.reducer,{updateOptions:L2e}=lF.actions,cF=Si({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:RCe}=cF.actions,I2e=cF.reducer,uF=ka("keyDown"),dF=ka("focus"),Sj=Np();Sj.startListening({actionCreator:uF,effect:(e,t)=>{var n=t.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip,a=e.payload;if(!(a!=="ArrowRight"&&a!=="ArrowLeft"&&a!=="Enter")){var o=aj(i,Lf(n),zp(n),qp(n)),l=o==null?-1:Number(o);if(!(!Number.isFinite(l)||l<0)){var u=qs(n);if(a==="Enter"){var d=ov(n,"axis","hover",String(i.index));t.dispatch(sE({active:!i.active,activeIndex:i.index,activeDataKey:i.dataKey,activeCoordinate:d}));return}var h=$xe(n),p=h==="left-to-right"?1:-1,b=a==="ArrowRight"?1:-1,y=l+b*p;if(!(u==null||y>=u.length||y<0)){var S=ov(n,"axis","hover",String(y));t.dispatch(sE({active:!0,activeIndex:y.toString(),activeDataKey:void 0,activeCoordinate:S}))}}}}}});Sj.startListening({actionCreator:dF,effect:(e,t)=>{var n=t.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip;if(!i.active&&i.index==null){var a="0",o=ov(n,"axis","hover",String(a));t.dispatch(sE({activeDataKey:void 0,active:!0,activeIndex:a,activeCoordinate:o}))}}}});var ua=ka("externalEvent"),fF=Np(),tk=new Map;fF.startListening({actionCreator:ua,effect:(e,t)=>{var{handler:n,reactEvent:r}=e.payload;if(n!=null){r.persist();var i=r.type,a=tk.get(i);a!==void 0&&cancelAnimationFrame(a);var o=requestAnimationFrame(()=>{try{var l=t.getState(),u={activeCoordinate:Dwe(l),activeDataKey:Cwe(l),activeIndex:lp(l),activeLabel:fU(l),activeTooltipIndex:lp(l),isTooltipActive:Pwe(l)};n(u,r)}finally{tk.delete(i)}});tk.set(i,o)}}});var $2e=xe([Rf],e=>e.tooltipItemPayloads),B2e=xe([$2e,Hp,(e,t,n)=>t,(e,t,n)=>n],(e,t,n,r)=>{var i=e.find(l=>l.settings.dataKey===r);if(i!=null){var{positions:a}=i;if(a!=null){var o=t(a,n);return o}}}),hF=ka("touchMove"),mF=Np();mF.startListening({actionCreator:hF,effect:(e,t)=>{var n=e.payload;if(!(n.touches==null||n.touches.length===0)){var r=t.getState(),i=ij(r,r.tooltip.settings.shared);if(i==="axis"){var a=wj(r,_j({clientX:n.touches[0].clientX,clientY:n.touches[0].clientY,currentTarget:n.currentTarget}));a?.activeIndex!=null&&t.dispatch(tU({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate}))}else if(i==="item"){var o,l=n.touches[0];if(document.elementFromPoint==null)return;var u=document.elementFromPoint(l.clientX,l.clientY);if(!u||!u.getAttribute)return;var d=u.getAttribute(Ape),h=(o=u.getAttribute(jpe))!==null&&o!==void 0?o:void 0,p=B2e(t.getState(),d,h);t.dispatch(Yxe({activeDataKey:h,activeIndex:d,activeCoordinate:p}))}}}});var z2e=zB({brush:XSe,cartesianAxis:ISe,chartData:D_e,errorBars:YSe,graphicalItems:mSe,layout:upe,legend:wge,options:j_e,polarAxis:tSe,polarOptions:I2e,referenceElements:ike,rootProps:R2e,tooltip:Wxe,zIndex:p_e}),U2e=function(t){return Rme({reducer:z2e,preloadedState:t,middleware:n=>{var r;return n({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((r="es6")!==null&&r!==void 0?r:"")}).concat([oF.middleware,sF.middleware,Sj.middleware,fF.middleware,mF.middleware])},enhancers:n=>{var r=n;return typeof n=="function"&&(r=n()),r.concat(_9({type:"raf"}))},devTools:jf.devToolsEnabled})};function F2e(e){var{preloadedState:t,children:n,reduxStoreName:r}=e,i=ki(),a=w.useRef(null);if(i)return n;a.current==null&&(a.current=U2e(t));var o=iA;return w.createElement(VB,{context:o,store:a.current},n)}function H2e(e){var{layout:t,margin:n}=e,r=pr(),i=ki();return w.useEffect(()=>{i||(r(spe(t)),r(ope(n)))},[r,i,t,n]),null}var G2e=w.memo(H2e,bj);function q2e(e){var t=pr();return w.useEffect(()=>{t(L2e(e))},[t,e]),null}function WI(e){var{zIndex:t,isPanorama:n}=e,r=n?"recharts-zindex-panorama-":"recharts-zindex-",i=$U("".concat(r).concat(t)),a=pr();return w.useLayoutEffect(()=>(a(h_e({zIndex:t,elementId:i,isPanorama:n})),()=>{a(m_e({zIndex:t,isPanorama:n}))}),[a,t,i,n]),w.createElement("g",{tabIndex:-1,id:i})}function VI(e){var{children:t,isPanorama:n}=e,r=tt(r_e);if(!r||r.length===0)return t;var i=r.filter(o=>o<0),a=r.filter(o=>o>0);return w.createElement(w.Fragment,null,i.map(o=>w.createElement(WI,{key:o,zIndex:o,isPanorama:n})),t,a.map(o=>w.createElement(WI,{key:o,zIndex:o,isPanorama:n})))}var Y2e=["children"];function K2e(e,t){if(e==null)return{};var n,r,i=W2e(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function W2e(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function fv(){return fv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fv.apply(null,arguments)}var V2e={width:"100%",height:"100%",display:"block"},Z2e=w.forwardRef((e,t)=>{var n=Y9(),r=K9(),i=t8();if(!Bo(n)||!Bo(r))return null;var{children:a,otherAttributes:o,title:l,desc:u}=e,d,h;return o!=null&&(typeof o.tabIndex=="number"?d=o.tabIndex:d=i?0:void 0,typeof o.role=="string"?h=o.role:h=i?"application":void 0),w.createElement(C7,fv({},o,{title:l,desc:u,role:h,tabIndex:d,width:n,height:r,style:V2e,ref:t}),a)}),X2e=e=>{var{children:t}=e,n=tt(hx);if(!n)return null;var{width:r,height:i,y:a,x:o}=n;return w.createElement(C7,{width:r,height:i,x:o,y:a},t)},ZI=w.forwardRef((e,t)=>{var{children:n}=e,r=K2e(e,Y2e),i=ki();return i?w.createElement(X2e,null,w.createElement(VI,{isPanorama:!0},n)):w.createElement(Z2e,fv({ref:t},r),w.createElement(VI,{isPanorama:!1},n))});function J2e(){var e=pr(),[t,n]=w.useState(null),r=tt(Tpe);return w.useEffect(()=>{if(t!=null){var i=t.getBoundingClientRect(),a=i.width/t.offsetWidth;jn(a)&&a!==r&&e(cpe(a))}},[t,e,r]),n}function XI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Q2e(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?XI(Object(n),!0).forEach(function(r){eEe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function eEe(e,t,n){return(t=tEe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tEe(e){var t=nEe(e,"string");return typeof t=="symbol"?t:t+""}function nEe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wu(){return wu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wu.apply(null,arguments)}var rEe=()=>(F_e(),null);function hv(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var iEe=w.forwardRef((e,t)=>{var n,r,i=w.useRef(null),[a,o]=w.useState({containerWidth:hv((n=e.style)===null||n===void 0?void 0:n.width),containerHeight:hv((r=e.style)===null||r===void 0?void 0:r.height)}),l=w.useCallback((d,h)=>{o(p=>{var b=Math.round(d),y=Math.round(h);return p.containerWidth===b&&p.containerHeight===y?p:{containerWidth:b,containerHeight:y}})},[]),u=w.useCallback(d=>{if(typeof t=="function"&&t(d),d!=null&&typeof ResizeObserver<"u"){var{width:h,height:p}=d.getBoundingClientRect();l(h,p);var b=S=>{var{width:_,height:k}=S[0].contentRect;l(_,k)},y=new ResizeObserver(b);y.observe(d),i.current=y}},[t,l]);return w.useEffect(()=>()=>{var d=i.current;d?.disconnect()},[l]),w.createElement(w.Fragment,null,w.createElement(px,{width:a.containerWidth,height:a.containerHeight}),w.createElement("div",wu({ref:u},e)))}),aEe=w.forwardRef((e,t)=>{var{width:n,height:r}=e,[i,a]=w.useState({containerWidth:hv(n),containerHeight:hv(r)}),o=w.useCallback((u,d)=>{a(h=>{var p=Math.round(u),b=Math.round(d);return h.containerWidth===p&&h.containerHeight===b?h:{containerWidth:p,containerHeight:b}})},[]),l=w.useCallback(u=>{if(typeof t=="function"&&t(u),u!=null){var{width:d,height:h}=u.getBoundingClientRect();o(d,h)}},[t,o]);return w.createElement(w.Fragment,null,w.createElement(px,{width:i.containerWidth,height:i.containerHeight}),w.createElement("div",wu({ref:l},e)))}),oEe=w.forwardRef((e,t)=>{var{width:n,height:r}=e;return w.createElement(w.Fragment,null,w.createElement(px,{width:n,height:r}),w.createElement("div",wu({ref:t},e)))}),sEe=w.forwardRef((e,t)=>{var{width:n,height:r}=e;return Ms(n)||Ms(r)?w.createElement(aEe,wu({},e,{ref:t})):w.createElement(oEe,wu({},e,{ref:t}))});function lEe(e){return e===!0?iEe:sEe}var cEe=w.forwardRef((e,t)=>{var{children:n,className:r,height:i,onClick:a,onContextMenu:o,onDoubleClick:l,onMouseDown:u,onMouseEnter:d,onMouseLeave:h,onMouseMove:p,onMouseUp:b,onTouchEnd:y,onTouchMove:S,onTouchStart:_,style:k,width:A,responsive:N,dispatchTouchEvents:j=!0}=e,C=w.useRef(null),D=pr(),[P,$]=w.useState(null),[U,Y]=w.useState(null),K=J2e(),F=fA(),z=F?.width>0?F.width:A,W=F?.height>0?F.height:i,X=w.useCallback(re=>{K(re),typeof t=="function"&&t(re),$(re),Y(re),re!=null&&(C.current=re)},[K,t,$,Y]),Z=w.useCallback(re=>{D(aF(re)),D(ua({handler:a,reactEvent:re}))},[D,a]),G=w.useCallback(re=>{D(pE(re)),D(ua({handler:d,reactEvent:re}))},[D,d]),J=w.useCallback(re=>{D(eU()),D(ua({handler:h,reactEvent:re}))},[D,h]),te=w.useCallback(re=>{D(pE(re)),D(ua({handler:p,reactEvent:re}))},[D,p]),ce=w.useCallback(()=>{D(dF())},[D]),oe=w.useCallback(re=>{D(uF(re.key))},[D]),B=w.useCallback(re=>{D(ua({handler:o,reactEvent:re}))},[D,o]),V=w.useCallback(re=>{D(ua({handler:l,reactEvent:re}))},[D,l]),ie=w.useCallback(re=>{D(ua({handler:u,reactEvent:re}))},[D,u]),Q=w.useCallback(re=>{D(ua({handler:b,reactEvent:re}))},[D,b]),se=w.useCallback(re=>{D(ua({handler:_,reactEvent:re}))},[D,_]),me=w.useCallback(re=>{j&&D(hF(re)),D(ua({handler:S,reactEvent:re}))},[D,j,S]),he=w.useCallback(re=>{D(ua({handler:y,reactEvent:re}))},[D,y]),_e=lEe(N);return w.createElement(xU.Provider,{value:P},w.createElement(Ufe.Provider,{value:U},w.createElement(_e,{width:z??k?.width,height:W??k?.height,className:rn("recharts-wrapper",r),style:Q2e({position:"relative",cursor:"default",width:z,height:W},k),onClick:Z,onContextMenu:B,onDoubleClick:V,onFocus:ce,onKeyDown:oe,onMouseDown:ie,onMouseEnter:G,onMouseLeave:J,onMouseMove:te,onMouseUp:Q,onTouchEnd:he,onTouchMove:me,onTouchStart:se,ref:X},w.createElement(rEe,null),n)))}),uEe=["width","height","responsive","children","className","style","compact","title","desc"];function dEe(e,t){if(e==null)return{};var n,r,i=fEe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function fEe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var hEe=w.forwardRef((e,t)=>{var{width:n,height:r,responsive:i,children:a,className:o,style:l,compact:u,title:d,desc:h}=e,p=dEe(e,uEe),b=to(p);return u?w.createElement(w.Fragment,null,w.createElement(px,{width:n,height:r}),w.createElement(ZI,{otherAttributes:b,title:d,desc:h},a)):w.createElement(cEe,{className:o,style:l,width:n,height:r,responsive:i??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},w.createElement(ZI,{otherAttributes:b,title:d,desc:h,ref:t},w.createElement(oke,null,a)))});function gE(){return gE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gE.apply(null,arguments)}var mEe={top:5,right:5,bottom:5,left:5},pEe={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:mEe,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},gEe=w.forwardRef(function(t,n){var r,i=Vi(t.categoricalChartProps,pEe),{chartName:a,defaultTooltipEventType:o,validateTooltipEventTypes:l,tooltipPayloadSearcher:u,categoricalChartProps:d}=t,h={chartName:a,defaultTooltipEventType:o,validateTooltipEventTypes:l,tooltipPayloadSearcher:u,eventEmitter:void 0};return w.createElement(F2e,{preloadedState:{options:h},reduxStoreName:(r=d.id)!==null&&r!==void 0?r:a},w.createElement(ZSe,{chartData:d.data}),w.createElement(G2e,{layout:i.layout,margin:i.margin}),w.createElement(q2e,{baseValue:i.baseValue,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),w.createElement(hEe,gE({},i,{ref:n})))}),bEe=["axis"],yEe=w.forwardRef((e,t)=>w.createElement(gEe,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:bEe,tooltipPayloadSearcher:T_e,categoricalChartProps:e,ref:t}));function pF(e){return typeof e=="object"&&e!==null}function ru(e,t=0){return typeof e=="number"&&Number.isFinite(e)?e:t}function vEe(e,t=""){return typeof e=="string"?e:t}function xEe(e){if(!Array.isArray(e))return[];const t=[];for(const n of e){if(!pF(n))continue;const r=vEe(n.day),i=ru(n.dau),a=ru(n.total_active_ms);r&&t.push({day:r,dau:i,total_active_ms:a})}return t}function wEe(e){return pF(e)?{online_now:ru(e.online_now),active_today:ru(e.active_today),active_7d:ru(e.active_7d),active_30d:ru(e.active_30d),active_365d:ru(e.active_365d),series:xEe(e.series)}:null}function _Ee(e){if(!e||e<=0)return"0";const t=Math.floor(e/1e3),n=Math.floor(t/86400),r=Math.floor(t%86400/3600),i=Math.floor(t%3600/60);return n>=1?`${n} ${r}`:r>=1?`${r} ${i}`:`${i}`}function JI(){const[e,t]=w.useState(30),[n,r]=w.useState(null),[i,a]=w.useState(0),[o,l]=w.useState(!1),[u,d]=w.useState(""),h=w.useRef(!1),p=w.useRef(!1),b=w.useCallback(async()=>{if(!h.current){h.current=!0,l(!0),d("");try{const{data:k,error:A}=await Ie.rpc("admin_dashboard_stats",{p_days:e});if(A){d(A.message||"RPC error"),r(null);return}const N=wEe(k);if(!N){d("   ( )"),r(null);return}r(N),a(N.online_now)}finally{l(!1),h.current=!1}}},[e]),y=w.useCallback(async()=>{if(!p.current){p.current=!0;try{const{data:k,error:A}=await Ie.rpc("admin_online_now");if(A)return;const N=typeof k=="number"?k:typeof k=="string"?Number(k):0;Number.isFinite(N)&&a(N)}finally{p.current=!1}}},[]);w.useEffect(()=>{b()},[b]),w.useEffect(()=>{y();const k=window.setInterval(()=>void y(),3e4);return()=>window.clearInterval(k)},[y]),w.useEffect(()=>{const k=window.setInterval(()=>void b(),3e5);return()=>window.clearInterval(k)},[b]);const S=w.useMemo(()=>n?.series??[],[n]),_=w.useMemo(()=>S.reduce((k,A)=>k+(A.total_active_ms||0),0),[S]);return g.jsx(Nfe,{allow:["admin","operator","viewer"],children:g.jsxs("div",{className:"p-6 text-white",children:[g.jsxs("div",{className:"flex items-center justify-between gap-3 mb-6",children:[g.jsx("h1",{className:"text-2xl font-bold",children:"Dashboard"}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("select",{value:e,onChange:k=>{const A=Number(k.target.value);(A===30||A===60||A===90)&&t(A)},className:"px-2 py-1 bg-neutral-800 border border-neutral-700 rounded text-sm",title:"DAU  ",children:[g.jsx("option",{value:30,children:" 30"}),g.jsx("option",{value:60,children:" 60"}),g.jsx("option",{value:90,children:" 90"})]}),g.jsx("button",{type:"button",onClick:()=>void b(),className:"px-3 py-1 rounded bg-neutral-700 hover:bg-neutral-600 cursor-pointer text-sm",children:""})]})]}),u?g.jsx("div",{className:"text-red-400 mb-3",children:u}):null,o?g.jsx("div",{className:"text-neutral-300 mb-3",children:"Loading..."}):null,g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 mb-10",children:[g.jsx(fm,{label:" ",value:i}),g.jsx(fm,{label:" (DAU)",value:n?.active_today??0}),g.jsx(fm,{label:" 7 ",value:n?.active_7d??0}),g.jsx(fm,{label:" 30 ",value:n?.active_30d??0}),g.jsx(fm,{label:" 1 ",value:n?.active_365d??0})]}),g.jsxs("section",{className:"mb-10",children:[g.jsxs("div",{className:"flex items-end justify-between gap-3 mb-3",children:[g.jsx("h2",{className:"text-xl font-semibold",children:"DAU "}),g.jsx("div",{className:"text-xs text-neutral-400",children:"(     )"})]}),g.jsx(SEe,{data:S})]}),g.jsxs("section",{className:"mt-6",children:[g.jsx("h3",{className:"text-lg font-semibold mb-2",children:"   ()"}),g.jsxs("div",{className:"p-4 bg-neutral-900 border border-neutral-700 rounded-lg",children:[g.jsx("div",{className:"text-sm text-neutral-400",children:"series.total_active_ms  (day    )"}),g.jsx("div",{className:"text-2xl font-bold mt-1",children:_Ee(_)})]})]})]})})}function fm({label:e,value:t}){return g.jsxs("div",{className:"p-4 bg-neutral-900 border border-neutral-700 rounded-lg",children:[g.jsx("div",{className:"text-neutral-400 text-sm",children:e}),g.jsx("div",{className:"text-3xl font-bold mt-1",children:t})]})}function SEe({data:e}){return g.jsx("div",{className:"w-full h-64 bg-neutral-900 border border-neutral-700 rounded-lg p-2 text-xs",children:g.jsx(nge,{width:"100%",height:"100%",children:g.jsxs(yEe,{data:e,children:[g.jsx(KU,{strokeDasharray:"3 3"}),g.jsx(rF,{dataKey:"day"}),g.jsx(iF,{}),g.jsx(Z_e,{formatter:(t,n)=>n==="dau"?[t,"DAU"]:[t,n]}),g.jsx(tF,{type:"monotone",dataKey:"dau"})]})})})}function kEe(){const[e,t]=w.useState(""),[n,r]=w.useState("ACTIVE"),[i,a]=w.useState("LAST_SEEN_DESC"),[o,l]=w.useState(1),[u,d]=w.useState({});return{search:e,setSearch:t,tab:n,setTab:r,sort:i,setSort:a,page:o,setPage:l,draftByUser:u,setDraftByUser:d,setDraft:(p,b)=>{d(y=>{const S=y[p]??{plan:"FREE",startDate:"",endDate:"",myoViewer:"OFF",saving:!1};return{...y,[p]:{...S,...b}}})}}}const bE=20;function EEe(e){return typeof e=="object"&&e!==null}function To(e){return typeof e=="string"?e:null}function QI(e){return typeof e=="boolean"?e:null}function nk(e){if(typeof e=="number"&&Number.isFinite(e))return e;if(typeof e=="string"&&e.trim()!==""){const t=Number(e);return Number.isFinite(t)?t:null}return null}function gF(e){return e==="FREE"||e==="BASIC"||e==="PRO"}function TEe(e){return gF(e)?e:null}function AEe(e){if(!EEe(e))return null;const t=To(e.user_id);return t?{user_id:t,name:To(e.name),nickname:To(e.nickname),email:To(e.email),disabled_at:To(e.disabled_at),created_at:To(e.created_at),plan:TEe(e.plan),starts_at:To(e.starts_at),expires_at:To(e.expires_at),can_use_myo_viewer:QI(e.can_use_myo_viewer),myeongsik_count:nk(e.myeongsik_count),last_seen_at:To(e.last_seen_at),last_path:To(e.last_path),total_active_ms:nk(e.total_active_ms),online:QI(e.online),total_count:nk(e.total_count)}:null}function e$(e){const t=(e??"").trim();return t.length?t:null}function bF(e){const t=/^(\d{4})-(\d{2})-(\d{2})$/.exec(e);if(!t)return!1;const n=Number(t[1]),r=Number(t[2]),i=Number(t[3]);if(!Number.isFinite(n)||!Number.isFinite(r)||!Number.isFinite(i)||r<1||r>12)return!1;const a=new Date(Date.UTC(n,r-1,i));return a.getUTCFullYear()===n&&a.getUTCMonth()===r-1&&a.getUTCDate()===i}function jEe(e,t){if(!bF(e))throw new Error(`   : ${e}`);const n=/^(\d{4})-(\d{2})-(\d{2})$/.exec(e);if(!n)throw new Error(`   : ${e}`);const r=Number(n[1]),i=Number(n[2]),a=Number(n[3]),o=new Date(Date.UTC(r,i-1,a));o.setUTCDate(o.getUTCDate()+t);const l=String(o.getUTCFullYear()).padStart(4,"0"),u=String(o.getUTCMonth()+1).padStart(2,"0"),d=String(o.getUTCDate()).padStart(2,"0");return`${l}-${u}-${d}`}function t$(e){if(!bF(e))throw new Error(`   : ${e}`);return`${e}T00:00:00.000Z`}function OEe(e){return typeof e=="object"&&e!==null}function NEe(e,t){if(console.error(e,t),OEe(t)&&console.error(`${e} fields`,{message:t.message,code:t.code,details:t.details,hint:t.hint}),typeof t=="object"&&t!==null)try{console.error(`${e} ownKeys`,Object.getOwnPropertyNames(t))}catch{}try{console.error(`${e} json`,JSON.stringify(t))}catch{}}function CEe(){const[e,t]=w.useState([]),[n,r]=w.useState(0),[i,a]=w.useState(!1),[o,l]=w.useState(null),u=w.useCallback(async h=>{const{search:p,tab:b,sort:y,page:S}=h;a(!0),l(null);try{const _=Math.max(0,(Math.max(1,S)-1)*bE),{data:k,error:A}=await Ie.rpc("admin_list_users",{p_search:p&&p.trim()?p.trim():null,p_tab:b,p_sort:y,p_limit:bE,p_offset:_});if(A)throw A;const j=(Array.isArray(k)?k:[]).map(AEe).filter(C=>C!==null);t(j),r(j[0]?.total_count??0)}catch(_){t([]),r(0),l(_ instanceof Error?_.message:"  ")}finally{a(!1)}},[]),d=w.useCallback(async(h,p,b,y)=>{if(p){l(null),b(h,{saving:!0});try{if(!gF(p.plan))throw new Error(`  : ${String(p.plan)}`);const S=e$(p.startDate),_=e$(p.endDate),k=S?t$(S):null,A=_?t$(jEe(_,1)):null;if(k&&A){const C=Date.parse(k),D=Date.parse(A);if(!Number.isFinite(C)||!Number.isFinite(D))throw new Error("  ");if(D<=C)throw new Error("  .")}const N={p_target_user_id:h,p_plan:p.plan,p_can_use_myo_viewer:p.myoViewer==="ON",p_starts_at:k,p_expires_at:A},{error:j}=await Ie.rpc("admin_set_user_entitlements",N);if(j)throw NEe("admin_set_user_entitlements error",j),j;b(h,{saving:!1,lastSavedAt:Date.now()}),await y()}catch(S){throw b(h,{saving:!1}),l(S instanceof Error?S.message:" "),S}}},[]);return{rows:e,totalCount:n,loading:i,error:o,setError:l,fetchList:u,saveEntitlements:d}}const yF=[{value:"FREE",label:"FREE ()"},{value:"BASIC",label:"BASIC (ON)"},{value:"PRO",label:"PRO (OFF)"}];function MEe(e){return e==="FREE"||e==="BASIC"||e==="PRO"}function DEe(e){const t=e??"FREE";return yF.find(n=>n.value===t)?.label??String(t)}function PEe(e){if(!e)return" ";const t=Date.parse(e);if(!Number.isFinite(t))return" ";const n=Date.now()-t,r=Math.floor(n/1e3);if(r<15)return"";if(r<60)return`${r} `;const i=Math.floor(r/60);if(i<60)return`${i} `;const a=Math.floor(i/60);return a<24?`${a} `:`${Math.floor(a/24)} `}function n$(e){if(!e||e<=0)return"0";const t=Math.floor(e/1e3),n=Math.floor(t/86400),r=Math.floor(t%86400/3600),i=Math.floor(t%3600/60);return n>=1?`${n} ${r}`:r>=1?`${r} ${i}`:`${i}`}function mv(e){if(!e)return"";const t=Date.parse(e);return Number.isFinite(t)?new Date(t).toISOString().slice(0,10):""}function REe(e,t){const n=mv(e),r=mv(t);return!n&&!r?" ":n&&!r?`${n} ~`:!n&&r?`~ ${r}`:`${n} ~ ${r}`}function LEe(e,t){const n={...e};for(const r of t){const i=r.plan??"FREE",a=mv(r.starts_at),o=mv(r.expires_at),l=r.can_use_myo_viewer===!0?"ON":"OFF",u=n[r.user_id];if(!u){n[r.user_id]={plan:i,startDate:a,endDate:o,myoViewer:l,saving:!1};continue}u.saving||(u.plan!==i||u.startDate!==a||u.endDate!==o||u.myoViewer!==l)&&(n[r.user_id]={...u,plan:i,startDate:a,endDate:o,myoViewer:l})}return n}function IEe(){const e=kEe(),{search:t,setSearch:n,tab:r,setTab:i,sort:a,setSort:o,page:l,setPage:u,draftByUser:d,setDraftByUser:h,setDraft:p}=e,{rows:b,totalCount:y,loading:S,error:_,fetchList:k,saveEntitlements:A}=CEe(),N=w.useMemo(()=>Math.max(1,Math.ceil(y/bE)),[y]);return w.useEffect(()=>{u(1)},[r,a]),w.useEffect(()=>{k({search:t,tab:r,sort:a,page:l})},[k,t,r,a,l]),w.useEffect(()=>{l>N&&u(N)},[l,N,u]),w.useEffect(()=>{h(j=>LEe(j,b))},[b,h]),g.jsxs("div",{className:"p-6 text-white",children:[g.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Users"}),g.jsxs("div",{className:"flex flex-col md:flex-row gap-2 md:items-center mb-4",children:[g.jsx("input",{className:"px-3 py-2 bg-neutral-800 border border-neutral-700 rounded w-full max-w-sm",placeholder:"Search (name, email, userId...)",value:t,onChange:j=>{n(j.target.value),u(1)}}),g.jsxs("div",{className:"flex gap-2",children:[g.jsxs("select",{className:"px-2 py-2 bg-neutral-800 border border-neutral-700 rounded text-sm",value:r,onChange:j=>{const C=j.target.value;i(C==="DISABLED"?"DISABLED":C==="ALL"?"ALL":"ACTIVE")},children:[g.jsx("option",{value:"ACTIVE",children:""}),g.jsx("option",{value:"DISABLED",children:""}),g.jsx("option",{value:"ALL",children:""})]}),g.jsxs("select",{className:"px-2 py-2 bg-neutral-800 border border-neutral-700 rounded text-sm",value:a,onChange:j=>{const C=j.target.value;(C==="LAST_SEEN_DESC"||C==="LAST_SEEN_ASC"||C==="CREATED_DESC"||C==="CREATED_ASC"||C==="PLAN_DESC"||C==="ONLINE_ACTIVE_MS_DESC"||C==="TOTAL_ACTIVE_MS_DESC")&&o(C)},children:[g.jsx("option",{value:"LAST_SEEN_DESC",children:" "}),g.jsx("option",{value:"CREATED_DESC",children:" "}),g.jsx("option",{value:"PLAN_DESC",children:""}),g.jsx("option",{value:"ONLINE_ACTIVE_MS_DESC",children:"+"}),g.jsx("option",{value:"TOTAL_ACTIVE_MS_DESC",children:""}),g.jsx("option",{value:"LAST_SEEN_ASC",children:" "}),g.jsx("option",{value:"CREATED_ASC",children:" "})]})]})]}),_&&g.jsx("div",{className:"text-red-400 mb-2",children:_}),S&&g.jsx("div",{children:"Loading..."}),g.jsx("div",{className:"space-y-3",children:b.map(j=>{const C=j.name||j.nickname||"(no profile)",D=j.email||"",P=d[j.user_id]??{plan:"FREE",startDate:"",endDate:"",myoViewer:"OFF",saving:!1,lastSavedAt:void 0},$=Date.now(),U=(j.starts_at?Date.parse(j.starts_at)<=$:!0)&&(j.expires_at?Date.parse(j.expires_at)>$:!0),Y=j.plan??"FREE",K=U?Y:"FREE",F=j.can_use_myo_viewer===!0?"ON":"OFF",z=j.last_seen_at??null,W=j.online===!0,X=j.total_active_ms??null;return g.jsxs("div",{className:"p-4 bg-neutral-900 border border-neutral-700 rounded-lg hover:bg-neutral-800",children:[g.jsxs("div",{className:"font-semibold text-lg flex flex-col desk:flex-row item-start desk:items-center justify-between gap-3",children:[g.jsxs("div",{className:"min-w-0 flex flex-col desk:flex-row item-start desk:items-center gap-2",children:[g.jsx("span",{className:"text-nowrap mr-1",children:C}),D?g.jsxs("span",{className:"text-sm text-neutral-400",children:["(",D,")"]}):null,g.jsxs("div",{className:"flex items-center gap-1",children:[g.jsxs("span",{className:`text-[11px] px-2 py-0.5 rounded-full border ${W?"bg-emerald-900/40 border-emerald-700 text-emerald-300":"bg-neutral-800 border-neutral-700 text-neutral-300"}`,title:z?new Date(z).toLocaleString():" ",children:[W?"":"","  ",PEe(z)]}),g.jsxs("span",{className:"text-[11px] px-2 py-0.5 rounded-full border bg-neutral-800 border-neutral-700 text-neutral-300",title:" ",children:[" ",n$(X)]})]})]}),g.jsx("span",{className:"text-neutral-500 text-sm shrink-0",children:j.user_id})]}),g.jsxs("div",{className:"text-sm text-neutral-400 mt-1",children:[" ",j.myeongsik_count??0,"",z?g.jsxs(g.Fragment,{children:["    ",new Date(z).toLocaleString()]}):g.jsx(g.Fragment,{children:"     "}),g.jsxs(g.Fragment,{children:["   ",n$(X)]})]}),g.jsxs("div",{className:"text-sm text-neutral-400 mt-1",children:[" ",DEe(K),"  ",REe(j.starts_at,j.expires_at),"    ",F,!U&&j.plan&&j.plan!=="FREE"?" ()":""]}),g.jsxs("div",{className:"mt-3 flex flex-col gap-2",children:[g.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[g.jsxs("div",{className:"mb-1",children:[g.jsx("input",{type:"date",className:"px-2 py-1 bg-neutral-800 border border-neutral-700 rounded text-sm",value:P.startDate,onChange:Z=>p(j.user_id,{startDate:Z.target.value})}),g.jsx("span",{className:"text-neutral-500 mx-1",children:"~"}),g.jsx("input",{type:"date",className:"px-2 py-1 bg-neutral-800 border border-neutral-700 rounded text-sm",value:P.endDate,onChange:Z=>p(j.user_id,{endDate:Z.target.value})})]}),g.jsx("select",{className:"px-2 py-1 bg-neutral-800 border border-neutral-700 rounded text-sm",value:P.plan,onChange:Z=>{const G=Z.target.value;MEe(G)&&p(j.user_id,{plan:G})},children:yF.map(Z=>g.jsx("option",{value:Z.value,children:Z.label},Z.value))}),g.jsxs("select",{className:"px-2 py-1 bg-neutral-800 border border-neutral-700 rounded text-sm",value:P.myoViewer,onChange:Z=>p(j.user_id,{myoViewer:Z.target.value==="ON"?"ON":"OFF"}),children:[g.jsx("option",{value:"ON",children:"  ON"}),g.jsx("option",{value:"OFF",children:"  OFF"})]}),g.jsx("button",{type:"button",disabled:P.saving,onClick:()=>void A(j.user_id,P,e.setDraft,()=>k({search:t,tab:r,sort:a,page:l})),className:"px-3 py-1 rounded bg-purple-600 hover:bg-purple-500 disabled:opacity-50 cursor-pointer",children:P.saving?" ...":""}),g.jsx("button",{type:"button",onClick:()=>location.href=`/admin/user/${j.user_id}`,className:"px-3 py-1 rounded bg-neutral-700 hover:bg-neutral-600 cursor-pointer",children:""})]}),P.lastSavedAt!=null?g.jsxs("div",{className:"text-xs text-emerald-400",children:["  ",new Date(P.lastSavedAt).toLocaleString()]}):null]})]},j.user_id)})}),g.jsxs("div",{className:"flex items-center justify-center gap-3 mt-6",children:[g.jsx("button",{disabled:l<=1,onClick:()=>u(j=>j-1),className:"px-3 py-1 border border-neutral-700 rounded disabled:opacity-50",children:""}),g.jsxs("span",{children:[l," / ",N," ( ",y,")"]}),g.jsx("button",{disabled:l>=N,onClick:()=>u(j=>j+1),className:"px-3 py-1 border border-neutral-700 rounded disabled:opacity-50",children:""})]})]})}function $Ee(){const[e,t]=w.useState(null),[n,r]=w.useState([]),[i,a]=w.useState(!1);return{profile:e,setProfile:t,myeongsikList:n,setMyeongsikList:r,saving:i,setSaving:a}}function BEe(e){return{isDisabled:!!e?.disabled_at,hasProfile:!!e}}async function kj({action:e,targetUserId:t,targetRecordId:n,payload:r={}}){const a=(await Ie.auth.getSession()).data.session?.user?.id;a&&await Ie.from("audit_logs").insert({action:e,target_user_id:t??null,target_record_id:n??null,actor_admin_id:a,payload:r})}const zEe=async e=>{const{data:t}=await Ie.from("profiles").select("*").eq("user_id",e).maybeSingle();return t??null},UEe=async e=>{const{data:t}=await Ie.from("myeongsik").select("*").eq("user_id",e).order("created_at",{ascending:!1});return t??[]},FEe=async e=>{await Ie.from("profiles").insert({user_id:e,name:"",nickname:"",email:"",mgr_memo:""})},HEe=async(e,t)=>{await Ie.from("profiles").update({name:t.name,nickname:t.nickname,email:t.email,mgr_memo:t.mgr_memo}).eq("user_id",e)},GEe=async e=>{await Ie.from("profiles").update({disabled_at:null}).eq("user_id",e),await Ie.from("myeongsik").update({deleted_at:null}).eq("user_id",e),await kj({action:"restore_account",targetUserId:e,payload:{source:"admin_user_detail"}})},qEe=async e=>{await Ie.from("myeongsik").update({deleted_at:null}).eq("user_id",e),await kj({action:"restore_myeongsik_all",targetUserId:e,payload:{source:"admin_user_detail"}})},r$=async(e,t,n)=>{const{error:r}=await Ie.rpc("admin_set_myeongsik_deleted",{p_target_user_id:e,p_myeongsik_id:t,p_deleted_at:n});if(r)throw console.error("admin_set_myeongsik_deleted error:",{message:r.message,details:r.details,hint:r.hint,code:r.code}),r;await kj({action:n?"delete_myeongsik":"restore_myeongsik",targetUserId:e,targetRecordId:t,payload:{deleted_at:n,source:"admin_user_detail"}})};function YEe(e,t){if(t&&typeof t=="object"){const n=t;console.error(e,{message:n.message,details:n.details,hint:n.hint,code:n.code});return}console.error(e,t)}function KEe({userId:e,profile:t,setProfile:n,setMyeongsikList:r,setSaving:i}){const a=w.useCallback(async()=>{const k=await zEe(e);n(k)},[e,n]),o=w.useCallback(async()=>{const k=await UEe(e);r(k)},[e,r]);w.useEffect(()=>{a(),o()},[a,o]);const l=w.useCallback(async()=>{if(e){i(!0);try{await FEe(e),await a()}catch(k){throw console.error("handleCreateProfile failed:",k),k}finally{i(!1)}}},[e,i,a]),u=w.useCallback(async()=>{if(e&&t){i(!0);try{await HEe(e,t),await a()}catch(k){throw console.error("handleSaveProfile failed:",k),k}finally{i(!1)}}},[e,t,i,a]),d=w.useCallback(async()=>{if(e&&t){i(!0);try{const k=t.disabled_at==null,{data:A,error:N}=await Ie.rpc("admin_set_profile_disabled",{p_target_user_id:e,p_disabled:k});if(N)throw YEe("admin_set_profile_disabled error:",N),N;n({...t,disabled_at:typeof A=="string"?A:null})}finally{i(!1)}}},[e,t,n,i]),h=w.useCallback(async()=>{if(e){i(!0);try{await GEe(e),await a(),await o()}catch(k){throw console.error("handleRestoreAccount failed:",k),k}finally{i(!1)}}},[e,i,a,o]),p=w.useCallback(async()=>{if(e){i(!0);try{await qEe(e),await o()}catch(k){throw console.error("handleRestoreAllMyeongsik failed:",k),k}finally{i(!1)}}},[e,i,o]),b=w.useCallback(async k=>{if(e&&k){i(!0);try{await r$(e,k,null),await o()}catch(A){throw console.error("handleRestoreMyeongsik failed:",A),A}finally{i(!1)}}},[e,i,o]),y=w.useCallback(k=>{const A=typeof window<"u"?window.location.origin:"",N=k?`${A}/impersonate?userId=${e}&myeongsikId=${k}`:`${A}/impersonate?userId=${e}`;window.open(N,"_blank")},[e]),S=w.useCallback(async(k,A)=>{if(!e||!k)return;const N=A?null:new Date().toISOString();i(!0);try{await r$(e,k,N),await o()}catch(j){throw console.error("toggleDeleteMyeongsik failed:",j),j}finally{i(!1)}},[e,i,o]),_=w.useCallback(k=>{window.location.href=k},[]);return{handleCreateProfile:l,handleSaveProfile:u,toggleDisable:d,handleRestoreAccount:h,handleRestoreAllMyeongsik:p,handleRestoreMyeongsik:b,handleViewAsUser:y,toggleDeleteMyeongsik:S,goTo:_}}function WEe({params:e}){const t=e.userId,n=$Ee(),r=BEe(n.profile),i=KEe({userId:t,profile:n.profile,setProfile:n.setProfile,setMyeongsikList:n.setMyeongsikList,setSaving:n.setSaving});return g.jsxs("div",{className:"p-6 text-white",children:[g.jsx("button",{className:"mb-4 underline cursor-pointer",onClick:()=>i.goTo("/admin/user"),children:"  "}),g.jsx("h1",{className:"text-2xl font-bold mb-4",children:" "}),g.jsxs("div",{className:"p-4 bg-neutral-900 border border-neutral-700 rounded-lg mb-6",children:[g.jsx("div",{className:"flex items-center justify-between mb-3",children:g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("h2",{className:"text-xl font-semibold",children:""}),g.jsx("button",{className:"px-3 py-1 bg-blue-700 text-xs rounded cursor-pointer",onClick:()=>i.handleViewAsUser(),children:" ( )"})]})}),!r.hasProfile&&g.jsx("button",{onClick:i.handleCreateProfile,className:"px-3 py-2 bg-blue-600 rounded cursor-pointer",disabled:n.saving,children:" "}),r.hasProfile&&n.profile&&g.jsxs("div",{className:"space-y-3",children:[g.jsxs("div",{children:[g.jsx("label",{children:""}),g.jsx("input",{className:"w-full p-2 bg-neutral-800 border border-neutral-600 rounded",value:n.profile.name??"",onChange:a=>n.setProfile({...n.profile,name:a.target.value})})]}),g.jsxs("div",{children:[g.jsx("label",{children:""}),g.jsx("input",{className:"w-full p-2 bg-neutral-800 border border-neutral-600 rounded",value:n.profile.nickname??"",onChange:a=>n.setProfile({...n.profile,nickname:a.target.value})})]}),g.jsxs("div",{children:[g.jsx("label",{children:"Email"}),g.jsx("input",{className:"w-full p-2 bg-neutral-800 border border-neutral-600 rounded",value:n.profile.email??"",onChange:a=>n.setProfile({...n.profile,email:a.target.value})})]}),g.jsxs("div",{children:[g.jsx("label",{children:" "}),g.jsx("textarea",{className:"w-full p-2 bg-neutral-800 border border-neutral-600 rounded",rows:3,value:n.profile.mgr_memo??"",onChange:a=>n.setProfile({...n.profile,mgr_memo:a.target.value})})]}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("button",{onClick:i.handleSaveProfile,className:"px-3 py-2 bg-green-600 rounded cursor-pointer text-xs",disabled:n.saving,children:""}),r.isDisabled&&g.jsx("button",{onClick:i.handleRestoreAccount,className:"px-3 py-2 bg-blue-600 rounded cursor-pointer text-xs",disabled:n.saving,children:" + "}),g.jsx("button",{onClick:i.toggleDisable,className:`px-3 py-2 rounded cursor-pointer text-xs ${r.isDisabled?"bg-yellow-600":"bg-gray-600"}`,children:r.isDisabled?" ":" "})]})]})]}),g.jsxs("div",{className:"p-4 bg-neutral-900 border border-neutral-700 rounded-lg",children:[g.jsxs("div",{className:"flex items-center justify-between mb-4",children:[g.jsx("h2",{className:"text-xl font-semibold",children:" "}),g.jsx("button",{className:"px-3 py-2 bg-blue-700 rounded text-xs cursor-pointer",onClick:i.handleRestoreAllMyeongsik,disabled:n.saving,children:"  "})]}),n.myeongsikList.map(a=>g.jsx("div",{className:"p-3 bg-neutral-800 border border-neutral-700 rounded mb-3",children:g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{children:[g.jsx("div",{className:"font-semibold",children:a.name||"(no name)"}),g.jsxs("div",{className:"text-sm text-neutral-400",children:["Birth: ",a.birth_json?.birthDay??"-"," "," ",a.created_at?new Date(a.created_at).toLocaleString():"-"]})]}),g.jsx("div",{className:"flex gap-2",children:g.jsx("button",{className:"text-nowrap px-2 py-1 border border-emerald-500 text-emerald-100 rounded cursor-pointer text-xs",onClick:()=>i.handleRestoreMyeongsik(a.id),disabled:n.saving,children:"  "})})]})},a.id)),n.myeongsikList.length===0&&g.jsx("div",{className:"text-neutral-400",children:" ."})]})]})}function VEe({open:e,onClose:t,children:n}){return e?g.jsx("div",{className:"fixed inset-0 bg-black/70 z-50 flex items-center justify-center",children:g.jsxs("div",{className:"bg-neutral-900 border border-neutral-700 rounded-lg p-6 max-w-2xl w-full relative",children:[g.jsx("button",{className:"absolute top-3 right-3 text-neutral-400 hover:text-white",onClick:t,children:""}),g.jsx("div",{className:"max-h-[70vh] overflow-y-auto",children:n})]})}):null}const i$=50;function ZEe(){const[e,t]=w.useState(null),[n,r]=w.useState(!1),[i,a]=w.useState([]),[o,l]=w.useState(1),[u,d]=w.useState("all"),[h,p]=w.useState("all"),[b,y]=w.useState("30"),[S,_]=w.useState(""),[k,A]=w.useState(!1),N=w.useCallback(async C=>{await Ie.from("audit_logs").delete().eq("id",C),a(D=>D.filter(P=>P.id!==C))},[]),j=w.useCallback(async()=>{A(!0);const C=new Date;b!=="all"&&C.setDate(C.getDate()-Number(b));let D=Ie.from("audit_logs").select("*").order("created_at",{ascending:!1}).range((o-1)*i$,o*i$-1);b!=="all"&&(D=D.gte("created_at",C.toISOString())),u!=="all"&&(D=D.eq("action",u)),h!=="all"&&(D=D.eq("actor_admin_id",h));const{data:P}=await D;let $=P||[];if(S.trim()!==""){const U=S.toLowerCase();$=$.filter(Y=>(JSON.stringify(Y).toLowerCase()+(Y.payload?JSON.stringify(Y.payload).toLowerCase():"")).includes(U))}a($),A(!1)},[o,u,h,b,S]);return w.useEffect(()=>{j()},[j]),g.jsxs("div",{className:"p-6 text-white",children:[g.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Audit Logs"}),g.jsxs("div",{className:"mb-6 grid grid-cols-1 md:grid-cols-4 gap-3",children:[g.jsxs("select",{className:"p-2 bg-neutral-800 rounded border border-neutral-600",value:u,onChange:C=>d(C.target.value),children:[g.jsx("option",{value:"all",children:" Action"}),g.jsx("option",{value:"delete_myeongsik",children:" "}),g.jsx("option",{value:"restore_myeongsik",children:" "}),g.jsx("option",{value:"update_profile",children:" "}),g.jsx("option",{value:"impersonate_user",children:""})]}),g.jsxs("select",{className:"p-2 bg-neutral-800 rounded border border-neutral-600",value:h,onChange:C=>p(C.target.value),children:[g.jsx("option",{value:"all",children:" "}),g.jsx("option",{value:"",children:""}),g.jsx("option",{value:"system",children:"System"})]}),g.jsxs("select",{className:"p-2 bg-neutral-800 rounded border border-neutral-600",value:b,onChange:C=>y(C.target.value),children:[g.jsx("option",{value:"1",children:"24"}),g.jsx("option",{value:"7",children:"7"}),g.jsx("option",{value:"30",children:"30"}),g.jsx("option",{value:"all",children:""})]}),g.jsx("input",{className:"p-2 bg-neutral-800 rounded border border-neutral-600",placeholder:" (payload )",value:S,onChange:C=>_(C.target.value)})]}),k?g.jsx("div",{children:"Loading..."}):i.map(C=>g.jsxs("div",{className:"p-4 bg-neutral-900 border border-neutral-700 rounded mb-4 cursor-pointer hover:bg-neutral-800",onClick:()=>{t(C),r(!0)},children:[g.jsxs("div",{className:"flex items-center justify-between gap-3",children:[g.jsx("div",{className:"font-semibold text-lg",children:C.action}),g.jsx("button",{className:"px-2 py-1 text-xs bg-red-700 hover:bg-red-600 rounded cursor-pointer",onClick:D=>{D.stopPropagation(),N(C.id)},children:""})]}),g.jsxs("div",{className:"text-sm mt-1 text-neutral-400",children:[g.jsxs("div",{children:["Actor: ",C.actor_admin_id]}),g.jsxs("div",{children:["Target User: ",C.target_user_id||"-"]}),g.jsxs("div",{children:["Target Record: ",C.target_record_id||"-"]}),g.jsxs("div",{children:["Time: ",new Date(C.created_at).toLocaleString()]})]}),C.payload&&g.jsx("pre",{className:"mt-3 text-xs bg-neutral-800 p-2 rounded",children:JSON.stringify(C.payload,null,2)})]},C.id)),g.jsxs("div",{className:"flex items-center justify-center gap-3 mt-6",children:[g.jsx("button",{className:"px-3 py-1 bg-neutral-800 border border-neutral-600 rounded disabled:opacity-40 cursor-pointer",disabled:o===1,onClick:()=>l(C=>C-1),children:" "}),g.jsxs("span",{className:"text-neutral-400",children:["Page ",o]}),g.jsx("button",{className:"px-3 py-1 bg-neutral-800 border border-neutral-600 rounded cursor-pointer",onClick:()=>l(C=>C+1),children:" "})]}),g.jsx(VEe,{open:n,onClose:()=>r(!1),children:e&&g.jsxs("div",{children:[g.jsx("h2",{className:"text-xl font-bold mb-3",children:e.action}),g.jsxs("div",{className:"text-sm text-neutral-400 space-y-1 mb-4",children:[g.jsxs("div",{children:["Actor: ",e.actor_admin_id]}),g.jsxs("div",{children:["Target User: ",e.target_user_id??"-"]}),g.jsxs("div",{children:["Target Record: ",e.target_record_id??"-"]}),g.jsxs("div",{children:["Time: ",new Date(e.created_at).toLocaleString()]})]}),g.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Payload"}),g.jsx("pre",{className:"text-xs bg-neutral-800 p-3 rounded whitespace-pre-wrap",children:JSON.stringify(e.payload,null,2)})]})})]})}const XEe="15b517b3-3d97-41a6-ae17-563abd163a36".split(",").map(e=>e.trim()).filter(Boolean);function vF(){const[e,t]=w.useState(!1),[n,r]=w.useState(!1);if(w.useEffect(()=>{(async()=>{const{data:l}=await Ie.auth.getUser(),u=l.user?.id;r(!!u&&XEe.includes(u)),t(!0)})()},[]),!e)return g.jsx("div",{className:"p-6 text-white",children:"  ...!"});if(!n)return g.jsx("div",{className:"p-6 text-white",children:"  "});const i=window.location.pathname;let a=g.jsx(JI,{});if(i.startsWith("/admin/user/")){const o=i.replace("/admin/user/","");a=g.jsx(WEe,{params:{userId:o}})}else i.startsWith("/admin/user")?a=g.jsx(IEe,{}):i.startsWith("/admin/logs")?a=g.jsx(ZEe,{}):i.startsWith("/admin/dashboard")&&(a=g.jsx(JI,{}));return g.jsx(jfe,{children:a})}function JEe({pillarsA:e,pillarsB:t}){const n=Jie(e,t);return g.jsxs("div",{className:"rounded-xl p-4 bg-neutral-100 dark:bg-neutral-900 text-neutral-900 dark:text-neutral-100 space-y-2",children:[g.jsx("div",{className:"text-sm font-bold mb-3",children:"   "}),Object.entries(n).map(([r,i])=>i.length>0?g.jsxs("div",{className:"flex gap-2 text-xs",children:[g.jsx("span",{className:"shrink-0 w-20 text-xs font-semibold text-neutral-700 dark:text-neutral-400 mt-1",children:r}),g.jsx("div",{className:"flex flex-wrap gap-2",children:i.map((a,o)=>g.jsx("span",{className:"text-xs px-2 py-1 rounded-full border whitespace-nowrap bg-violet-100 text-violet-800 border-violet-200 dark:bg-violet-900/30 dark:text-violet-200 dark:border-violet-800",children:a},o))})]},r):null)]})}const QEe=["","","","","","","","","",""],eTe=["","","","","","","","","",""],tTe=["","","","","","","","","","","",""],nTe=["","","","","","","","","","","",""],rTe=new Set([...QEe,...eTe]),iTe=new Set([...tTe,...nTe]);function aTe(e){return typeof e=="object"&&e!==null}function a$(e){return typeof e=="string"&&e.length>=2&&rTe.has(e[0])&&iTe.has(e[1])}function cn(e,...t){if(a$(e))return e;for(const n of t)if(a$(n))return n;return""}function vb(e,t){let n=null;const r=t.getTime();for(const i of e)if(i.at.getTime()<=r)n=i;else break;return n}function oTe(e){const t=n=>String(n).padStart(2,"0");return`${e.getFullYear()}-${t(e.getMonth()+1)}-${t(e.getDate())}T${t(e.getHours())}:${t(e.getMinutes())}`}function o$(e){if(!e)return null;const t=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2})$/.exec(e);if(!t)return null;const[,n,r,i,a,o]=t,l=new Date(+n,+r-1,+i,+a,+o);return Number.isNaN(l.getTime())?null:l}function pv(e){const t=e;return typeof t.name=="string"&&t.name?t.name:typeof t.title=="string"&&t.title?t.title:typeof t.memo=="string"&&t.memo?t.memo:" "}function sTe(e){const t=Number(e.birthDay.slice(0,4)),n=Number(e.birthDay.slice(4,6)),r=Number(e.birthDay.slice(6,8));let i=0,a=0;const o=e;return typeof o.birthTime=="string"&&o.birthTime.length>=4&&(i=Number(o.birthTime.slice(0,2)),a=Number(o.birthTime.slice(2,4))),{y:t,m:n,d:r,hh:i,mm:a}}function Px(e){const{y:t,m:n,d:r,hh:i,mm:a}=sTe(e),o=e.corrected instanceof Date&&!Number.isNaN(e.corrected.getTime())?e.corrected:new Date(t,n-1,r,i,a),l=o.getHours(),u=o.getMinutes();return e.calendarType==="lunar"?Wi(t,n,r,l,u):new Date(t,n-1,r,l,u)}function lTe(e){const t=Px(e);return`${pv(e)}-${t.toISOString()}`}function Ad(e){const t=e;return typeof t.id=="string"&&t.id?t.id:lTe(e)}function cTe(e){return aTe(e)&&("Classic"in e||"Modern"in e||"classic"in e||"modern"in e)}function uTe(e){const t=v6;return cTe(t)?e==="classic"?t.Classic:t.Modern:e}function dTe(e){if(!e)return"";const t=e,n=l=>typeof t[l]=="string"?String(t[l]).trim().toLowerCase():null,r=l=>typeof t[l]=="boolean"?t[l]:null,i=[n("gender"),n("sex"),n("genderType"),n(""),n("sexType"),n("g")].filter(l=>!!l);for(const l of i){if(["","","male","m","boy","man"].includes(l))return"";if(["","","female","f","girl","woman"].includes(l))return""}const a=r("isMale"),o=r("isFemale");return a===!0?"":o===!0?"":""}const rk="people_picker_order_v1";function fTe(e,t,n){const r=e.slice(),[i]=r.splice(t,1);return r.splice(n,0,i),r}function s$({open:e,list:t,onSelect:n,onClose:r}){const[i,a]=w.useState("");w.useEffect(()=>{e||a("")},[e]);const o=w.useMemo(()=>t.map(Ad),[t]),l=w.useMemo(()=>new Set(o),[o]),[u,d]=w.useState([]);w.useEffect(()=>{const _=localStorage.getItem(rk),k=_?JSON.parse(_):[],A=k.filter(j=>l.has(j)),N=[...A,...o.filter(j=>!A.includes(j))];d(N),JSON.stringify(N)!==JSON.stringify(k)&&localStorage.setItem(rk,JSON.stringify(N))},[o,l]);const h=_=>{d(_),localStorage.setItem(rk,JSON.stringify(_))},p=w.useMemo(()=>{const _=new Map(t.map(j=>[Ad(j),j])),k=[];for(const j of u){const C=_.get(j);C&&k.push(C)}_.forEach((j,C)=>{u.includes(C)||k.push(j)});const A=[],N=[];for(const j of k)(typeof j.relationship=="string"?j.relationship.trim():"")===""?A.push(j):N.push(j);return[...A,...N]},[t,u]),b=w.useMemo(()=>{const _=i.trim().toLowerCase();return _?p.filter(k=>{const A=typeof k.relationship=="string"?k.relationship.trim():"";return`${pv(k)} ${A}`.toLowerCase().includes(_)}):p},[p,i]),y=i.trim()==="",S=_=>{const{destination:k,source:A}=_;if(!k||!y||k.index===A.index)return;const N=b.map(Ad),j=fTe(N,A.index,k.index),D=p.map(Ad).filter($=>!N.includes($)),P=[...j,...D].filter(($,U,Y)=>Y.indexOf($)===U);h(P)};return g.jsxs(g.Fragment,{children:[g.jsx("style",{children:"[data-rbd-drag-handle-context-id]{touch-action:none!important}"}),g.jsx("div",{className:`fixed inset-0 bg-black/60 transition-opacity duration-200 z-[1000] ${e?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,onClick:r}),g.jsxs("div",{className:`fixed bottom-0 inset-x-0 mx-auto w-full max-w-[640px] max-h-[80dvh] bg-white dark:bg-neutral-950 rounded-t-2xl border border-neutral-200 dark:border-neutral-800 p-4 overflow-auto transition-transform duration-300 z-[1001] ${e?"translate-y-0":"translate-y-full"}`,children:[g.jsxs("div",{className:"flex items-center justify-between mb-3",children:[g.jsx("h3",{className:"text-sm font-semibold text-neutral-900 dark:text-neutral-200",children:" "}),g.jsx("button",{onClick:r,className:"text-neutral-500 hover:text-neutral-900 dark:text-neutral-400 dark:hover:text-white text-sm cursor-pointer",children:""})]}),g.jsxs("div",{className:"mb-3",children:[g.jsx("input",{value:i,onChange:_=>a(_.target.value),placeholder:" ",className:"w-full px-3 py-2 rounded border border-neutral-300 dark:border-neutral-700 bg-white dark:bg-neutral-900 text-sm"}),g.jsx("div",{className:"text-[11px] text-neutral-500 mt-1",children:"    ."})]}),g.jsx(xp,{onDragEnd:S,children:g.jsx(Sf,{droppableId:"people-picker",children:_=>g.jsxs("ul",{className:"space-y-2",ref:_.innerRef,..._.droppableProps,children:[b.map((k,A)=>{const N=Px(k),j=typeof k.relationship=="string"?k.relationship.trim():"",C=j||" ",D=pv(k),P=j&&D===" "?j:D;return g.jsx(_f,{draggableId:Ad(k),index:A,isDragDisabled:!y,children:$=>g.jsx("li",{ref:$.innerRef,...$.draggableProps,...$.dragHandleProps,className:"flex items-center justify-between gap-2 px-3 py-2 rounded border border-neutral-200 dark:border-neutral-800 bg-white dark:bg-neutral-900",children:g.jsxs("button",{onClick:()=>n(k),className:"flex-1 text-left cursor-pointer",children:[g.jsxs("div",{className:"flex items-center gap-2 text-sm text-neutral-900 dark:text-neutral-100",children:[g.jsx("span",{children:P}),g.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded border border-neutral-300 dark:border-neutral-700 ${j?"text-neutral-600 dark:text-neutral-300":"text-neutral-400 dark:text-neutral-500"}`,children:C})]}),g.jsx("div",{className:"text-neutral-500 dark:text-neutral-400 text-xs",children:Om(N)})]})})},Ad(k))}),_.placeholder]})})})]})]})}function ik({label:e,gzHour:t,gzDay:n,gzMonth:r,gzYear:i,dayStem:a,cardSettings:o,sinsalBaseBranch:l,sinsalMode:u,sinsalBloom:d}){const h=_=>{const k=o.showSibiUnseong?Ho(a,_):"",A=o.showSibiSinsal?Go({baseBranch:l,targetBranch:_,era:uTe(u),gaehwa:!!d}):"";return{unseongText:k||void 0,shinsalText:A||void 0}},p=cn(t).charAt(1),b=cn(n).charAt(1),y=cn(r).charAt(1),S=cn(i).charAt(1);return g.jsxs("div",{className:"rounded-lg border bg-white dark:bg-neutral-900 border-neutral-200 dark:border-neutral-800 py-2 desk:p-2",children:[g.jsx("div",{className:"px-2 py-1 text-xs text-neutral-600 dark:text-neutral-300",children:e}),g.jsx("div",{className:"grid grid-cols-4 gap-1 text-neutral-900 dark:text-white",children:[["",cn(t),p],["",cn(n),b],["",cn(r),y],["",cn(i),S]].map(([_,k,A])=>{const{unseongText:N,shinsalText:j}=h(A);return g.jsx(Md,{label:_,gz:k,dayStem:a,settings:vn.getState().settings,unseongText:N,shinsalText:j,hideBranchSipSin:!0,size:"sm"},`${e}-${_}`)})})]})}function jd({label:e,data:t,mode:n,effectiveDate:r,onPick:i}){const a=vn(P=>P.settings),o=w.useMemo(()=>t?Px(t):null,[t]),l="/",u=cn(o?Qa(o,l):void 0),d=cn(o?mt(o,l):void 0),h=cn(o?St(o):void 0),p=cn(o?st(o):void 0),b=w.useMemo(()=>d.charAt(0)||"",[d]),y=o,S=w.useMemo(()=>{const P=t?.birthPlace;return!P||P.name===""||!P.lon?127.5:P.lon},[t]),_=t?.mingSikType??l,k=w.useMemo(()=>{const P=y?mt(y,_).charAt(1):d.charAt(1)||"",$=y?st(y,S).charAt(1):p.charAt(1)||"";return(a.sinsalBase??"")===""?P:$},[a.sinsalBase,y,_,S,d,p]),A=w.useMemo(()=>{if(n!==""||!o||!t)return null;try{const P=_6(o,u,t.dir,120),$=k6(P,d,t.dir,t.DayChangeRule),U=kp(o,h,t.dir,120,t?.birthPlace?.lon??127.5),Y=E6(U,p,t.dir,t.DayChangeRule,o),K=r;return{si:cn(vb(P.events,K)?.gz,u),il:cn(vb($.events,K)?.gz,d),wl:cn(vb(U.events,K)?.gz,h),yn:cn(vb(Y.events,K)?.gz,p)}}catch{return null}},[n,o,u,d,h,p,r,t]),N=w.useMemo(()=>{if(n!=="")return null;const P=r;return{si:cn(Qa(P,l)),il:cn(mt(P,l)),wl:cn(St(P)),yn:cn(st(P))}},[n,r]),j=t?pv(t):"",C=o?Om(o):"",D=t?dTe(t):"";return t?g.jsxs("div",{className:"space-y-2",children:[g.jsx("button",{onClick:i,className:"px-3 py-1 rounded text-xs bg-neutral-900 dark:bg-white text-white dark:text-neutral-900 border border-neutral-900 dark:border-white hover:opacity-90 cursor-pointer",title:"  ",children:" "}),g.jsxs("div",{className:"text-[11px] text-neutral-600 dark:text-neutral-300",children:[g.jsx("span",{className:"font-semibold text-neutral-900 dark:text-neutral-200",children:e}),g.jsx("span",{className:"ml-2 text-neutral-900 dark:text-neutral-50",children:j}),D&&g.jsxs("span",{className:"ml-1 text-neutral-500 dark:text-neutral-400",children:[" ",D]}),C&&g.jsx("span",{className:"block mt-1 text-neutral-500 dark:text-neutral-400 text-[10px]",children:C})]}),n===""&&g.jsx(ik,{label:"",gzHour:u,gzDay:d,gzMonth:h,gzYear:p,dayStem:b,cardSettings:a,sinsalBaseBranch:k,sinsalMode:a.sinsalMode,sinsalBloom:!!a.sinsalBloom}),n===""&&A&&g.jsx(ik,{label:"",gzHour:A.si,gzDay:A.il,gzMonth:A.wl,gzYear:A.yn,dayStem:b,cardSettings:a,sinsalBaseBranch:k,sinsalMode:a.sinsalMode,sinsalBloom:!!a.sinsalBloom}),n===""&&N&&g.jsx(ik,{label:"",gzHour:N.si,gzDay:N.il,gzMonth:N.wl,gzYear:N.yn,dayStem:b,cardSettings:a,sinsalBaseBranch:k,sinsalMode:a.sinsalMode,sinsalBloom:!!a.sinsalBloom})]}):g.jsx("div",{className:"flex items-center justify-center h-48 rounded-lg border border-dashed bg-white dark:bg-neutral-900 border-neutral-300 dark:border-neutral-700",children:g.jsx("button",{onClick:i,className:"px-3 py-2 rounded bg-neutral-900 dark:bg-white text-white dark:text-neutral-900 text-sm hover:opacity-90 cursor-pointer",children:" "})})}function hTe({people:e=[]}){const[t,n]=w.useState(),[r,i]=w.useState(),[a,o]=w.useState(!1),[l,u]=w.useState(!1),d=w.useRef(new Date),[h,p]=w.useState(()=>oTe(d.current)),b=w.useRef(o$(h)??d.current),y=w.useMemo(()=>{const C=o$(h);return C&&(b.current=C),b.current},[h]),[S,_]=w.useState(!1),[k,A]=w.useState(!1);function N(C){if(!C)return["","","",""];try{const D=Px(C),P="/",$={hour:cn(Qa(D,P)),day:cn(mt(D,P)),month:cn(St(D)),year:cn(st(D))};return[$.year,$.month,$.day,$.hour]}catch{return["","","",""]}}const j=dn(C=>C.canUseMyoViewerNow());return g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"w-[96%] max-w-[640px] mx-auto bg-white dark:bg-neutral-950 text-neutral-900 dark:text-neutral-100 rounded-xl shadow border border-neutral-200 dark:border-neutral-800 px-2 py-4 desk:p-4",children:[g.jsxs("header",{className:"flex gap-3 justify-between items-center mb-4",children:[g.jsx("div",{className:"font-semibold text-sm text-neutral-900 dark:text-neutral-200",children:" "}),g.jsxs("div",{className:"flex items-center gap-4 text-xs text-neutral-600 dark:text-neutral-400",children:[j?g.jsxs("label",{className:"flex items-center gap-1 cursor-pointer",children:[g.jsx("input",{type:"checkbox",checked:a,onChange:C=>o(C.target.checked),className:"accent-indigo-500"})," "]}):null,g.jsx("button",{onClick:()=>u(C=>!C),className:"px-2 py-1 rounded border border-neutral-300 dark:border-neutral-700 hover:border-indigo-500 text-neutral-700 dark:text-neutral-300 bg-white dark:bg-neutral-900 cursor-pointer",children:l?" ":" "})]})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-2 desk:gap-4",children:[g.jsx(jd,{label:" A",data:t,mode:"",effectiveDate:y,onPick:()=>_(!0)}),g.jsx(jd,{label:" B",data:r,mode:"",effectiveDate:y,onPick:()=>A(!0)}),a&&t&&g.jsx(jd,{label:" A",data:t,mode:"",effectiveDate:y,onPick:()=>_(!0)}),a&&r&&g.jsx(jd,{label:" B",data:r,mode:"",effectiveDate:y,onPick:()=>A(!0)}),l&&t&&g.jsx(jd,{label:" A",data:t,mode:"",effectiveDate:y,onPick:()=>_(!0)}),l&&r&&g.jsx(jd,{label:" B",data:r,mode:"",effectiveDate:y,onPick:()=>A(!0)})]}),t&&r&&g.jsx("div",{className:"mt-4",children:g.jsx(JEe,{pillarsA:N(t),pillarsB:N(r)})}),g.jsxs("div",{className:"mt-4 max-w-[260px] mx-auto text-center",children:[g.jsx("label",{className:"min-w-0 block text-xs text-neutral-600 dark:text-neutral-400 mb-2",children:" /"}),g.jsx("input",{type:"datetime-local",value:h,onChange:C=>p(C.target.value),className:"min-w-0 bg-white dark:bg-neutral-900 border border-neutral-300 dark:border-neutral-700 rounded px-3 py-1 text-xs w-[260px] max-w-[260px] box-border overflow-x-hidden text-neutral-900 dark:text-neutral-100 h-30",min:"1900-01-01T00:00",max:"2100-12-31T23:59"})]})]}),g.jsx(s$,{open:S,list:e||[],onSelect:C=>{n(C),_(!1)},onClose:()=>_(!1)}),g.jsx(s$,{open:k,list:e||[],onSelect:C=>{i(C),A(!1)},onClose:()=>A(!1)})]})}function mTe(){const[e,t]=w.useState(!1),[n,r]=w.useState(!1),i=async()=>{try{const{data:{user:a}}=await Ie.auth.getUser();if(!a){alert("  .");return}const o=a.id,l=new Date().toISOString();await Ie.from("profiles").update({disabled_at:l}).eq("id",o),await Ie.from("myeongsik").update({deleted_at:l}).eq("user_id",o),await Ie.auth.signOut(),alert(" .   ."),window.location.href="/"}catch(a){console.error(a),alert("    .")}};return g.jsxs(g.Fragment,{children:[g.jsxs("footer",{className:"py-8 pb-[calc(64px+env(safe-area-inset-bottom,0px)+var(--bottom-dock,0px))] px-4 border-t border-neutral-200 dark:border-neutral-700",children:[g.jsx("div",{className:"text-center text-[12px] text-orange-600 dark:text-orange-300",children:"Copyright  2025 Hwarim96. All rights reserved."}),g.jsxs("div",{className:"flex justify-center items-center gap-4 mt-3",children:[g.jsx("button",{onClick:()=>t(!0),className:"text-[12px] text-neutral-500 dark:text-neutral-300 underline cursor-pointer hover:text-orange-500 transition",children:" "}),g.jsx("button",{onClick:()=>r(!0),className:"text-[12px] text-red-500 underline hover:text-red-400 transition cursor-pointer",children:""})]})]}),e&&g.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:()=>t(!1),children:g.jsxs("div",{className:"w-full max-w-lg bg-white dark:bg-neutral-900 text-neutral-900 dark:text-neutral-200 p-6 rounded-xl shadow-xl relative animate-fadeInUp",onClick:a=>a.stopPropagation(),children:[g.jsx("h2",{className:"text-lg font-bold mb-4",children:" "}),g.jsxs("div",{className:"text-sm leading-relaxed max-h-[60vh] overflow-y-auto pr-2",children:[g.jsx("p",{className:"mb-2",children:"     ,    ."}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"1.  "}),g.jsxs("p",{className:"mb-1",children:["    (, )",g.jsx("br",{}),"       ( ,  ,  )"]}),g.jsxs("p",{className:"mb-2",children:["    (, )",g.jsx("br",{}),"       ( ,  ,  )"]}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"2.  "}),g.jsxs("p",{className:"mb-2",children:["     ",g.jsx("br",{}),"    /  ",g.jsx("br",{}),"      "]}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"3.  "}),g.jsxs("p",{className:"mb-2",children:["     ",g.jsx("br",{}),"         "]}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"4. 3 "}),g.jsx("p",{className:"mb-1",children:"       ."}),g.jsx("p",{className:"mb-2",children:"   3  ."}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"5. "}),g.jsx("p",{className:"mb-2",children:" Supabase /DB    ."}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"6. "}),g.jsx("p",{children:"   : unique950318@gmail.com"})]}),g.jsx("button",{onClick:()=>t(!1),className:"cursor-pointer mt-4 w-full py-2 bg-neutral-900 dark:bg-neutral-700 text-white rounded-lg hover:bg-neutral-800 transition",children:""})]})}),n&&g.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:()=>r(!1),children:g.jsxs("div",{className:"w-full max-w-sm bg-white dark:bg-neutral-900 text-neutral-900 dark:text-neutral-200 p-6 rounded-xl shadow-xl relative animate-fadeInUp",onClick:a=>a.stopPropagation(),children:[g.jsx("h2",{className:"text-lg font-bold mb-4 text-red-500",children:" ?"}),g.jsxs("p",{className:"text-sm leading-relaxed mb-6",children:["        .",g.jsx("br",{}),"    ."]}),g.jsxs("div",{className:"flex gap-3",children:[g.jsx("button",{onClick:()=>r(!1),className:"cursor-pointer flex-1 py-2 bg-neutral-300 dark:bg-neutral-700 text-black dark:text-white rounded-lg hover:bg-neutral-400 transition",children:""}),g.jsx("button",{onClick:i,className:"cursor-pointer flex-1 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition",children:""})]})]})})]})}function pTe(e){const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return`${t}-${n}-${r}`}function ak(e){if(!/^\d{4}-\d{2}-\d{2}$/.test(e))return null;const[t,n,r]=e.split("-"),i=Number(t),a=Number(n),o=Number(r);if(!Number.isFinite(i)||!Number.isFinite(a)||!Number.isFinite(o)||a<1||a>12)return null;const l=new Date(i,a,0).getDate();return o<1||o>l?null:{y:i,m:a,d:o}}function l$(e,t,n){return e<t?t:e>n?n:e}function xF({date:e,onChange:t,min:n="1900-01-01",max:r="2100-12-31",className:i="px-2 py-1 text-xs border rounded bg-white dark:bg-neutral-700"}){const a=w.useMemo(()=>e instanceof Date&&!Number.isNaN(e.getTime())?e:new Date,[e]),o=w.useMemo(()=>pTe(a),[a]),[l,u]=w.useState(o);w.useEffect(()=>{u(o)},[o]);const d=h=>{if(!ak(h))return;const b=l$(h,n,r),{y,m:S,d:_}=ak(b),k=a.getHours(),A=a.getMinutes(),N=a.getSeconds(),j=a.getMilliseconds(),C=new Date(y,S-1,_,k,A,N,j);Number.isNaN(C.getTime())||t(C)};return g.jsx("input",{type:"date",value:l,min:n,max:r,onChange:h=>{const p=h.target.value;u(p),p&&d(p)},onBlur:()=>{if(!l||!ak(l)){u(o);return}const h=l$(l,n,r);h!==l&&(u(h),d(h))},className:i,"aria-label":" "})}function gTe({ms:e}){const{date:t,setDate:n}=Xr(),r=Xl(),i=w.useMemo(()=>{const d=typeof e.id=="string"?e.id:"";if(d)return d;const h=typeof e.birthDay=="string"||typeof e.birthDay=="number"?String(e.birthDay):"",p=typeof e.birthTime=="string"?e.birthTime:"";return[typeof e.ganji=="string"?e.ganji:"",h,p].filter(Boolean).join("|")},[e]);w.useEffect(()=>{n(new Date)},[i]);const a=Hv(e,void 0,void 0,{dstOffsetMinutes:r}),o=t instanceof Date&&!Number.isNaN(t.getTime())?t:new Date,l=w.useMemo(()=>{const d=typeof e.ganji=="string"?e.ganji:"",h=a?.dae?.gz?`${a.dae.gz}`:null,p=a?.se?.gz?`${a.se.gz}`:null,b=a?.wol?.gz?`${a.wol.gz}`:null,y=[h,p,b].filter(Boolean).join(" ");return[d,y].filter(Boolean).join(" + ")},[e.ganji,a]),u=d=>{n(d)};return g.jsxs("div",{className:"w-[calc(100%_-_16px)] max-w-[625px] desk:max-w-[640px] mx-auto mb-4 px-2 rounded-xl border border-neutral-200 dark:border-neutral-800 bg-white dark:bg-neutral-950 p-3 space-y-3",children:[l&&g.jsx("div",{className:"text-center text-sm font-medium text-neutral-800 dark:text-neutral-200",children:l}),g.jsx("div",{className:"grid grid-cols-1 gap-3",children:g.jsxs("label",{className:"w-full flex justify-center items-center",children:[g.jsx("span",{className:"text-sm text-neutral-500 mr-4",children:""}),g.jsx(xF,{date:o,onChange:u,min:"1900-01-01",max:"2100-12-31"})]})})]})}function bTe({useWoldu:e,useSiju:t,hourRule:n,gender:r,onToggleWoldu:i,onToggleSiju:a,onChangeHourRule:o,onChangeGender:l}){return g.jsxs("div",{className:"flex flex-wrap items-center gap-6 mb-4",children:[g.jsxs("div",{children:[g.jsx("p",{className:"font-medium mb-2",children:"/"}),g.jsxs("span",{className:"mr-3 chkContainer",children:[g.jsx("input",{type:"checkbox",id:"useWoldu",checked:e,onChange:u=>i(u.target.checked)}),g.jsx("label",{htmlFor:"useWoldu",className:"ml-1",children:" "})]}),g.jsxs("span",{className:"chkContainer",children:[g.jsx("input",{type:"checkbox",id:"useSidu",checked:t,onChange:u=>a(u.target.checked)}),g.jsx("label",{htmlFor:"useSidu",className:"ml-1",children:" "})]})]}),g.jsxs("div",{children:[g.jsx("p",{className:"font-medium mb-2",children:" "}),g.jsxs("span",{className:"mr-3 chkContainer",children:[g.jsx("input",{type:"radio",id:"jasi",checked:n==="",onChange:()=>o("")}),g.jsx("label",{htmlFor:"jasi",className:"ml-1",children:""})]}),g.jsxs("span",{className:"chkContainer",children:[g.jsx("input",{type:"radio",id:"insi",checked:n==="",onChange:()=>o("")}),g.jsx("label",{htmlFor:"insi",className:"ml-1",children:""})]})]}),g.jsxs("div",{children:[g.jsx("p",{className:"font-medium mb-2",children:""}),g.jsxs("span",{className:"mr-3 chkContainer",children:[g.jsx("input",{type:"radio",id:"male",checked:r==="male",onChange:()=>l("male")}),g.jsx("label",{htmlFor:"male",className:"ml-1",children:""})]}),g.jsxs("span",{className:"chkContainer",children:[g.jsx("input",{type:"radio",id:"female",checked:r==="female",onChange:()=>l("female")}),g.jsx("label",{htmlFor:"female",className:"ml-1",children:""})]})]})]})}function yTe({pillars:e,active:t,canEnterOthers:n,onActivate:r}){return g.jsx("div",{className:"grid grid-cols-4 gap-2 mb-4",children:[["hourStem",""],["dayStem",""],["monthStem",""],["yearStem",""],["hourBranch",""],["dayBranch",""],["monthBranch",""],["yearBranch",""]].map(([i,a])=>{const o=!n&&!(i==="yearStem"||i==="yearBranch"||i==="dayStem"||i==="dayBranch"),l=t===i;return g.jsxs("button",{onClick:()=>!o&&r(i),disabled:o,className:["border rounded p-2 text-center cursor-pointer",l?"border-purple-500 bg-purple-100 dark:bg-purple-900/30":"border-neutral-300 dark:border-neutral-700",o?"opacity-50 cursor-not-allowed":""].join(" "),children:[a,g.jsx("br",{}),g.jsx("span",{className:"font-bold",children:e[i]??"-"})]},i)})})}function vTe({results:e,selectedRow:t,onSelectRow:n,gender:r}){return e?e.length===0?g.jsx("div",{className:"p-4 text-neutral-500",children:"  ."}):g.jsxs("table",{className:"w-full text-xs",children:[g.jsx("thead",{className:"sticky top-0 bg-neutral-50 dark:bg-neutral-800",children:g.jsxs("tr",{children:[g.jsx("th",{className:"p-1 text-center",children:""}),g.jsx("th",{className:"p-1 text-center",children:""}),g.jsx("th",{className:"p-1 text-center",children:""}),g.jsx("th",{className:"p-1 text-center",children:""}),g.jsx("th",{className:"p-1 text-center",children:""}),g.jsx("th",{className:"p-1 text-center",children:""}),g.jsx("th",{className:"p-1 text-center",children:""})]})}),g.jsx("tbody",{children:e.map((i,a)=>g.jsxs("tr",{className:"border-t border-neutral-200 dark:border-neutral-800",children:[g.jsx("td",{className:"p-1 text-center",children:g.jsxs("span",{className:"chkContainer",children:[g.jsx("input",{type:"radio",name:"selectRow",id:`selectRow-${a}`,checked:t===a,onChange:()=>n(a)}),g.jsx("label",{htmlFor:`selectRow-${a}`,children:"ON"})]})}),g.jsx("td",{className:"p-1 text-center",children:i.date}),g.jsx("td",{className:"p-1 text-center",children:i.year}),g.jsx("td",{className:"p-1 text-center",children:i.month}),g.jsx("td",{className:"p-1 text-center",children:i.day}),g.jsx("td",{className:"p-1 text-center",children:g.jsx("div",{className:"flex flex-wrap gap-1",children:i.hourSlots.map((o,l)=>g.jsx("span",{className:"inline-flex items-center mx-auto gap-1 px-1 py-0.5 rounded bg-neutral-100 dark:bg-neutral-800 border border-neutral-200 dark:border-neutral-700",children:g.jsx("b",{children:o.branch})},l))})}),g.jsx("td",{className:"p-1 text-center",children:r==="male"?"":""})]},`${i.date}-${a}`))})]}):g.jsx("div",{className:"p-2 text-neutral-500 text-sm text-center",children:"    ."})}function xTe({toast:e,showToast4:t,searchToast:n,error:r}){return g.jsxs(g.Fragment,{children:[e&&g.jsx("div",{className:"pointer-events-none fixed left-1/2 -translate-x-1/2 top-6 z-[1100] border border-white/30",children:g.jsx("div",{className:"px-4 py-2 rounded-md bg-black/80 text-white text-sm shadow-lg",children:e})}),t&&g.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-[2000]",children:g.jsx("div",{className:"bg-black text-white px-4 py-2 rounded-lg shadow-lg",children:" 4  ."})}),n&&g.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-[2000]",children:g.jsxs("div",{className:"bg-black text-white px-4 py-2 rounded-lg shadow-lg text-center",children:["  .",g.jsx("br",{}),"   ."]})}),r&&g.jsx("div",{className:"mt-3 text-xs text-red-600 text-center",children:r})]})}function wTe({choices:e,onChoose:t}){return!e||e.length===0?null:g.jsxs("div",{className:"mb-3",children:[g.jsx("p",{className:"text-sm mb-1",children:"  ."}),g.jsx("div",{className:"flex gap-2",children:e.map(n=>g.jsx("button",{onClick:()=>t(n),className:"flex-1 px-2 py-1 border rounded hover:bg-orange-100 dark:hover:bg-orange-800 cursor-pointer",children:n},n))})]})}const Ej=["","","","","","","","","",""],Kp=["","","","","","","","","","","",""],_Te={:0,:1,:2,:3,:4,:5,:6,:7,:8,:9},wF=["","","","","","","","","","","",""],STe=Kp,kTe=wF,ETe=["23:00~0:59","01:00~2:59","03:00~4:59","05:00~6:59","07:00~8:59","09:00~10:59","11:00~12:59","13:00~14:59","15:00~16:59","17:00~18:59","19:00~20:59","21:00~22:59"],TTe={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},ATe={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};function up(e,t){let n;e===""||e===""?n="":e===""||e===""?n="":e===""||e===""?n="":e===""||e===""?n="":n="";const r=_Te[n],i=wF.indexOf(t),a=(r+(i>=0?i:0))%10;return Ej[a]}function Rx(e,t){const n=t===""?STe:kTe,r=e===""||e===""?0:e===""||e===""?2:e===""||e===""?4:e===""||e===""?6:8,i=Kp.reduce((a,o)=>(a[o]="",a),{});for(let a=0;a<12;a++){const o=Ej[(r+a)%10],l=n[a];i[l]=`${o}${l}`}return i}const jTe={:{hh:0,mi:0},:{hh:2,mi:0},:{hh:4,mi:0},:{hh:6,mi:0},:{hh:8,mi:0},:{hh:10,mi:0},:{hh:12,mi:0},:{hh:14,mi:0},:{hh:16,mi:0},:{hh:18,mi:0},:{hh:20,mi:0},:{hh:22,mi:0}};function OTe(e){return e==="yearStem"?"yearBranch":e==="yearBranch"?"yearStem":e==="monthStem"?"monthBranch":e==="monthBranch"?"monthStem":e==="dayStem"?"dayBranch":e==="dayBranch"?"dayStem":e==="hourStem"?"hourBranch":"hourStem"}function NTe({active:e,pillars:t,activeIsStem:n,activeIsBranch:r,onSelect:i,settingsObj:a}){return e?g.jsxs("div",{className:"w-full",children:[n&&g.jsxs("div",{children:[g.jsx("p",{className:"font-medium mb-2",children:""}),g.jsx("div",{className:"grid grid-cols-5 gap-2",children:Ej.map(o=>g.jsx("button",{onClick:()=>i(o),className:`border rounded px-2 py-1 cursor-pointer ${Yi(o,"stem",a)}`,children:o},o))})]}),r&&g.jsxs("div",{children:[g.jsx("p",{className:"font-medium mb-2",children:""}),g.jsx("div",{className:"grid grid-cols-6 gap-2",children:Kp.filter(o=>{const l=OTe(e),u=t[l];return u?ATe[o]===TTe[u]:!0}).map(o=>g.jsx("button",{onClick:()=>i(o),className:`border rounded px-2 py-1 cursor-pointer ${Yi(o,"branch",a)}`,children:o},o))})]})]}):g.jsx("div",{className:"text-sm text-neutral-500 p-2 border rounded w-full text-center",children:"   ."})}function CTe(){const[e,t]=w.useState({}),[n,r]=w.useState(null),[i,a]=w.useState(null),[o,l]=w.useState(!0),[u,d]=w.useState(!0),[h,p]=w.useState(""),[b,y]=w.useState("male"),[S,_]=w.useState(null),[k,A]=w.useState(!1),[N,j]=w.useState(null),[C,D]=w.useState({gender:"",mingSikType:"/",DayChangeRule:"",calendarType:"solar"}),[P,$]=w.useState(!1),[U,Y]=w.useState(null),[K,F]=w.useState(null),[z,W]=w.useState(!1),[X,Z]=w.useState(!1),G=J=>{F(J),setTimeout(()=>F(null),1800)};return w.useEffect(()=>{if(!z)return;const J=setTimeout(()=>W(!1),2e3);return()=>clearTimeout(J)},[z]),w.useEffect(()=>{if(!X)return;const J=setTimeout(()=>Z(!1),2e3);return()=>clearTimeout(J)},[X]),{pillars:e,setPillars:t,active:n,setActive:r,monthBranchChoices:i,setMonthBranchChoices:a,useWoldu:o,setUseWoldu:l,useSiju:u,setUseSiju:d,hourRule:h,setHourRule:p,gender:b,setGender:y,results:S,setResults:_,searching:k,setSearching:A,selectedRow:N,setSelectedRow:j,form:C,setForm:D,unknownPlace:P,setUnknownPlace:$,error:U,setError:Y,toast:K,showToast4:z,setShowToast:W,searchToast:X,setSearchToast:Z,showToast:G}}function _F(e){return!!(e.yearStem&&e.yearBranch&&e.monthStem&&e.monthBranch&&e.dayStem&&e.dayBranch&&e.hourStem&&e.hourBranch)}function c$(e,t){return Kp.filter(n=>up(e,n)===t)}function u$(e,t,n){if(!n||!e.yearStem)return{next:e,monthBranchChoices:null};const r={...e};if(!r.yearStem)return{next:r,monthBranchChoices:null};if(t==="monthStem"&&r.monthStem){const i=c$(r.yearStem,r.monthStem);return i.length>=2?{next:r,monthBranchChoices:i.slice(0,2)}:(i.length===1&&(r.monthBranch=i[0]),{next:r,monthBranchChoices:null})}if(t==="monthBranch"&&r.monthBranch)return r.monthStem=up(r.yearStem,r.monthBranch),{next:r,monthBranchChoices:null};if(t==="yearStem")if(r.monthStem&&!r.monthBranch){const i=c$(r.yearStem,r.monthStem);if(i.length>=2)return{next:r,monthBranchChoices:i.slice(0,2)};i.length===1&&(r.monthBranch=i[0])}else r.monthBranch&&!r.monthStem&&(r.monthStem=up(r.yearStem,r.monthBranch));return{next:r,monthBranchChoices:null}}function MTe(e,t,n,r){if(!n||!e.dayStem)return e;const i={...e};if(!i.dayStem)return i;const a=Rx(i.dayStem,r),o=u=>Object.entries(a).find(([,d])=>d.startsWith(u)),l=u=>a[u];if(t==="hourStem"&&i.hourStem){const u=o(i.hourStem);return u&&(i.hourBranch=u[0]),i}if(t==="hourBranch"&&i.hourBranch){const u=l(i.hourBranch);return u&&(i.hourStem=u.slice(0,1)),i}if(t==="dayStem"){if(i.hourStem&&!i.hourBranch){const u=o(i.hourStem);u&&(i.hourBranch=u[0])}else if(i.hourBranch&&!i.hourStem){const u=l(i.hourBranch);u&&(i.hourStem=u.slice(0,1))}}return i}function DTe(e,t){return!t||!e.yearStem?!1:e.monthBranch&&e.monthStem?up(e.yearStem,e.monthBranch)!==e.monthStem:!1}function PTe(e,t,n){if(!t||!e.dayStem)return!1;if(e.hourBranch&&e.hourStem){const i=Rx(e.dayStem,n)[e.hourBranch];return i?i.slice(0,1)!==e.hourStem:!1}return!1}function ok(e,t,n){const i=Rx(e,t)[n];return i?i.slice(0,1):null}function RTe({pillars:e,setPillars:t,active:n,setActive:r,monthBranchChoices:i,setMonthBranchChoices:a,useWoldu:o,setUseWoldu:l,useSiju:u,setUseSiju:d,hourRule:h,setHourRule:p,setResults:b,setError:y,showToast:S}){const _=o||u,k=!!(e.yearStem&&e.yearBranch),A=!!(e.dayStem&&e.dayBranch),N=!_||k||A,j=!!n&&n.endsWith("Stem"),C=!!n&&n.endsWith("Branch"),D=w.useMemo(()=>_F(e),[e]);return w.useEffect(()=>{if(!(!u||!e.dayStem||!e.hourBranch)&&(e.hourBranch===""||e.hourBranch==="")){const z=ok(e.dayStem,h,e.hourBranch);z&&t(W=>({...W,hourStem:z}))}},[h,u,e.dayStem,e.hourBranch,t]),{needStartFromYearOrDay:_,canEnterOthers:N,activeIsStem:j,activeIsBranch:C,filledAll:D,monthBranchChoices:i,handleSelect:z=>{if(!n)return;if(!N&&!(n==="yearStem"||n==="yearBranch"||n==="dayStem"||n==="dayBranch")){y("/      ."),setTimeout(()=>y(null),1500);return}let X={...e,[n]:z};if(n==="yearStem"||n==="monthStem"||n==="monthBranch"){const J=u$(X,n,o);X=J.next,a(J.monthBranchChoices)}(n==="dayStem"||n==="hourStem"||n==="hourBranch")&&(X=MTe(X,n,u,h));let Z=!1;DTe(X,o)&&(l(!1),Z=!0),PTe(X,u,h)&&(d(!1),Z=!0),Z&&S("/  .  ."),t(X),b(null),r(n==="yearStem"?"yearBranch":n==="yearBranch"?"yearStem":n==="monthStem"?"monthBranch":n==="monthBranch"?"monthStem":n==="dayStem"?"dayBranch":n==="dayBranch"?"dayStem":n==="hourStem"?"hourBranch":"hourStem"),setTimeout(()=>{const J={...X};if(J.yearStem&&J.yearBranch&&!J.monthStem){r("monthStem");return}if(J.monthStem&&J.monthBranch&&!J.dayStem){r("dayStem");return}if(J.dayStem&&J.dayBranch&&!J.hourStem){r("hourStem");return}},0)},handleMonthBranchChoice:z=>{let W={...e,monthBranch:z};a(null),W=u$(W,"monthBranch",o).next,t(W),r("dayStem")},clearAll:()=>{t({}),b(null),y(null),r(null),a(null)},onToggleWoldu:z=>{b(null),z&&t(W=>{const X={...W};return X.yearStem&&X.monthBranch&&(X.monthStem=up(X.yearStem,X.monthBranch)),X}),l(z)},onToggleSiju:z=>{b(null),z&&t(W=>{const X={...W};if(X.dayStem&&X.hourBranch){const Z=ok(X.dayStem,h,X.hourBranch);Z&&(X.hourStem=Z)}return X}),d(z)},onChangeHourRule:z=>{if(b(null),p(z),u&&e.dayStem&&e.hourBranch&&(e.hourBranch===""||e.hourBranch==="")){const W=ok(e.dayStem,z,e.hourBranch);W&&t(X=>({...X,hourStem:W}))}}}}function LTe(e){const{selectedRow:t,results:n,gender:r,hourRule:i,form:a,unknownPlace:o}=e,l=t!==null?n?.filter((K,F)=>F===t)??[]:[];if(l.length===0)return{error:"  ."};const u=l[0],d=i===""?"/":"",[h,p,b]=u.date.split("-").map(Number);let y=0,S=0;if(u.hourSlots.length>0){const K=u.hourSlots[0].branch,F=jTe[K];F&&(y=F.hh,S=F.mi)}const _=new Date(h,p-1,b,y,S),k=_,A="",N=r==="male"?"":"",j=ITe(u.year.charAt(0),N),C=st(k,127.5),D=St(k,127.5),P=mt(k,d),$=Qa(k,d),U=[`: ${C} ${D} ${P}`,$?`${$}`:null].filter(Boolean).join(" ");return{payload:{id:p6(),name:"",birthDay:`${h}${String(p).padStart(2,"0")}${String(b).padStart(2,"0")}`,birthTime:`${String(y).padStart(2,"0")}${String(S).padStart(2,"0")}`,gender:N,birthPlace:o?{name:"",lat:0,lon:127.5}:a.birthPlace??{name:"",lat:0,lon:127.5},relationship:a.relationship??"",memo:a.memo??"",folder:cu(a.folder),mingSikType:a.mingSikType??"/",DayChangeRule:a.mingSikType===""?"":"",calendarType:a.calendarType??"solar",ganjiText:`: ${u.year} ${u.month} ${u.day} ${u.hour}`,ganji:U,dayStem:u.day.charAt(0),dateObj:_,corrected:k,correctedLocal:A,dir:j,favorite:!1}}}function ITe(e,t){const r=["","","","","","","","","",""].includes(e),i=t==="";return r?i?"forward":"backward":i?"backward":"forward"}function $Te(e){yn.getState().add(e)}function BTe(e,t,n,r=300){if(!e.yearStem||!e.yearBranch)return[];if(!e.monthStem||!e.monthBranch)return[];if(!e.dayStem||!e.dayBranch)return[];if(!e.hourStem||!e.hourBranch)return[];const i=`${e.yearStem}${e.yearBranch}`,a=`${e.monthStem}${e.monthBranch}`,o=`${e.dayStem}${e.dayBranch}`,l=`${e.hourStem}${e.hourBranch}`,u=[],d=new Date(1900,0,1,12,0,0),h=new Date(2100,11,31,12,0,0);for(let p=d.getTime();p<=h.getTime();p+=24*3600*1e3){const b=new Date(p),y=st(b);if(y!==i)continue;const S=St(b);if(S!==a)continue;const _=mt(b,n);if(_!==o)continue;const k=Rx(e.dayStem,t),A=[];for(let N=0;N<12;N++){const j=Kp[N];k[j]===l&&A.push({branch:j,time:ETe[N]})}if(A.length!==0&&(u.push({date:`${b.getFullYear()}-${String(b.getMonth()+1).padStart(2,"0")}-${String(b.getDate()).padStart(2,"0")}`,year:y,month:S,day:_,hour:l,hourSlots:A}),u.length>=r))break}return u}function zTe({pillars:e,hourRule:t,results:n,selectedRow:r,gender:i,form:a,unknownPlace:o,setResults:l,setSearching:u,setError:d,setSearchToast:h,setForm:p,setUnknownPlace:b,showToast:y,onSave:S,onClose:_}){return{doSearch:()=>{if(l(null),d(null),!_F(e)){d(" 4  .");return}u(!0);try{const j=BTe(e,t,t===""?"/":"");j.length===0&&d("  . (: 1900~2100)"),l(j)}catch(N){N instanceof Error?d(N.message):d(String(N))}finally{u(!1)}},handleSave:()=>{const N=LTe({selectedRow:r,results:n,gender:i,hourRule:t,form:a,unknownPlace:o});if("error"in N){h(!0);return}ku.flushSync(()=>{$Te(N.payload)}),S(N.payload),y(" !"),p({gender:"",mingSikType:"/",DayChangeRule:"",calendarType:"solar"}),b(!1),_()}}}function UTe({open:e,onClose:t,onSave:n}){const{settings:r}=vn(),i=CTe(),a=RTe({pillars:i.pillars,setPillars:i.setPillars,active:i.active,setActive:i.setActive,monthBranchChoices:i.monthBranchChoices,setMonthBranchChoices:i.setMonthBranchChoices,useWoldu:i.useWoldu,setUseWoldu:i.setUseWoldu,useSiju:i.useSiju,setUseSiju:i.setUseSiju,hourRule:i.hourRule,setHourRule:i.setHourRule,setResults:i.setResults,setError:i.setError,showToast:i.showToast}),o=zTe({pillars:i.pillars,hourRule:i.hourRule,results:i.results,selectedRow:i.selectedRow,gender:i.gender,form:i.form,unknownPlace:i.unknownPlace,setResults:i.setResults,setSearching:i.setSearching,setError:i.setError,setSearchToast:i.setSearchToast,setForm:i.setForm,setUnknownPlace:i.setUnknownPlace,showToast:i.showToast,onSave:n,onClose:t});return e?g.jsx("div",{className:"fixed min-w-[320px] inset-0 z-[1000] flex items-center justify-center bg-black/50",children:g.jsxs("div",{className:"bg-white max-w-[360px] dark:bg-neutral-900 rounded-xl shadow-xl w-full max-w-5xl p-4 relative",children:[g.jsx("button",{onClick:t,className:"absolute top-3 right-3 text-neutral-500 hover:text-neutral-800 dark:hover:text-neutral-200 cursor-pointer","aria-label":"",children:g.jsx(ry,{size:20})}),g.jsx("h2",{className:"text-lg font-semibold mb-4",children:"  "}),g.jsx(bTe,{useWoldu:i.useWoldu,useSiju:i.useSiju,hourRule:i.hourRule,gender:i.gender,onToggleWoldu:a.onToggleWoldu,onToggleSiju:a.onToggleSiju,onChangeHourRule:a.onChangeHourRule,onChangeGender:i.setGender}),a.needStartFromYearOrDay&&!a.canEnterOthers&&g.jsxs("div",{className:"mb-3 text-sm text-orange-700 bg-orange-50 dark:text-orange-300 dark:bg-orange-900/30 rounded p-2 text-center",children:["/  . ",g.jsx("br",{}),g.jsx("b",{children:""}),"  ",g.jsx("b",{children:""})," ."]}),g.jsx(yTe,{pillars:i.pillars,active:i.active,canEnterOthers:a.canEnterOthers,onActivate:i.setActive}),g.jsx(wTe,{choices:i.monthBranchChoices,onChoose:a.handleMonthBranchChoice}),g.jsx("div",{className:"flex w-full flex-wrap gap-6 mb-4",children:g.jsx(NTe,{active:i.active,pillars:i.pillars,activeIsStem:a.activeIsStem,activeIsBranch:a.activeIsBranch,onSelect:a.handleSelect,settingsObj:r})}),g.jsxs("div",{className:"flex justify-between items-center gap-3 mb-4",children:[g.jsx("span",{children:g.jsx("button",{type:"button",onClick:()=>{if(!a.filledAll){i.setShowToast(!0);return}o.doSearch()},disabled:i.searching,className:"px-2 py-1 rounded-md bg-blue-600 text-white disabled:opacity-50 cursor-pointer",children:i.searching?"..":""})}),g.jsxs("span",{className:"flex items-center gap-2",children:[g.jsx("button",{type:"button",onClick:a.clearAll,className:"px-2 py-1 rounded-md bg-red-600 border border-neutral-300 dark:border-neutral-700 cursor-pointer",children:""}),g.jsx("button",{type:"button",onClick:o.handleSave,className:"px-2 py-1 rounded-md border bg-yellow-600 border-neutral-300 dark:border-neutral-700 cursor-pointer",children:""})]})]}),g.jsx("div",{className:"max-h-[40vh] overflow-auto rounded border border-neutral-200 dark:border-neutral-800",children:g.jsx(vTe,{results:i.results,selectedRow:i.selectedRow,onSelectRow:i.setSelectedRow,gender:i.gender})}),g.jsx(xTe,{toast:i.toast,showToast4:i.showToast4,searchToast:i.searchToast,error:i.error})]})}):null}function FTe(){return g.jsx("div",{className:"flex flex-col desk:flex-row desk:items-center desk:justify-between gap-2",children:g.jsx("div",{className:"text-sm font-semibold text-neutral-700 dark:text-neutral-200",children:"AI  "})})}function HTe({sections:e,toggleSection:t}){return g.jsxs("div",{className:"mt-3 border-t pt-2",children:[g.jsxs("div",{className:"text-[11px] font-semibold mb-2 text-neutral-700 dark:text-neutral-200",children:[g.jsxs("p",{children:["   ",g.jsx("span",{className:"text-amber-500",children:"(TIP.  AI  . ex.,  )"})]}),g.jsx("p",{className:"text-amber-500",children:"      . (     .)"}),g.jsx("p",{className:"text-amber-500",children:" AI     .  ,   ."}),g.jsx("p",{className:"text-amber-500",children:"  AI ,    .  ."})]}),g.jsxs("div",{className:"grid grid-cols-4 desk:grid-cols-8 gap-2 text-[11px] text-neutral-700 dark:text-neutral-200",children:[g.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[g.jsx("input",{type:"checkbox",checked:e.twelveUnseong,onChange:()=>t("twelveUnseong"),className:"w-3 h-3"}),""]}),g.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[g.jsx("input",{type:"checkbox",checked:e.twelveShinsal,onChange:()=>t("twelveShinsal"),className:"w-3 h-3"}),""]}),g.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[g.jsx("input",{type:"checkbox",checked:e.shinsal,onChange:()=>t("shinsal"),className:"w-3 h-3"})," "]}),g.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[g.jsx("input",{type:"checkbox",checked:e.nabeum,onChange:()=>t("nabeum"),className:"w-3 h-3"}),""]})]})]})}function GTe({tone:e,toneMeta:t,setTone:n,friendMode:r,setFriendMode:i,teacherMode:a,setTeacherMode:o}){return g.jsxs("div",{className:"w-full mt-2 p-2 border rounded-md bg-neutral-50 dark:bg-neutral-800",children:[g.jsx("div",{className:"text-xs font-semibold mb-1 text-neutral-700 dark:text-neutral-200",children:"  "}),g.jsx("div",{className:"flex gap-1.5 mb-2",children:Object.keys(t).map(l=>g.jsx("button",{type:"button",onClick:()=>n(l),className:`flex-1 p-1 text-[10px] rounded border cursor-pointer ${e===l?"bg-neutral-900 text-white dark:bg-yellow-500 dark:text-black":"bg-white dark:bg-neutral-700 text-neutral-700 dark:text-neutral-200"}`,children:t[l].label},l))}),g.jsx("div",{className:"text-[11px] whitespace-pre-line text-neutral-600 dark:text-neutral-300 leading-4",children:t[e].desc}),g.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[g.jsxs("div",{className:"mr-1 flex items-center gap-2",children:[g.jsx("input",{type:"checkbox",id:"friendMode",checked:r,onChange:i,className:"w-3 h-3"}),g.jsx("label",{htmlFor:"friendMode",className:"text-[11px] text-neutral-700 dark:text-neutral-200 cursor-pointer",children:" "})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("input",{type:"checkbox",id:"teacherMode",checked:a,onChange:o,className:"w-3 h-3"}),g.jsx("label",{htmlFor:"teacherMode",className:"text-[11px] text-neutral-700 dark:text-neutral-200 cursor-pointer",children:" (/)"})]})]})]})}function qTe({mainCategory:e,subCategory:t,mainCategoryMeta:n,currentSubList:r,onMainCategoryChange:i,onSubCategoryChange:a}){return g.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[g.jsx("select",{value:e,onChange:o=>i(o.target.value),className:"px-2.5 h-30 h-8 text-[11px] rounded-md border bg-white dark:bg-neutral-800 text-neutral-700 dark:text-neutral-200 border-neutral-200 dark:border-neutral-700",children:Object.keys(n).map(o=>g.jsx("option",{value:o,children:n[o].label},o))}),r.length>0&&g.jsx("select",{value:t,onChange:o=>a(o.target.value),className:"px-2.5 h-30 h-8 text-[11px] rounded-md border bg-white dark:bg-neutral-800 text-neutral-700 dark:text-neutral-200 border-neutral-200 dark:border-neutral-700",children:r.map(o=>g.jsx("option",{value:o.key,children:o.label},o.key))})]})}function YTe({visible:e,relationMode:t,setRelationMode:n,partnerId:r,setPartnerId:i,partnerOptions:a}){return e?g.jsxs("div",{className:"flex flex-col gap-1.5 text-[11px] text-neutral-700 dark:text-neutral-200",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:"font-semibold",children:" "}),g.jsxs("div",{className:"inline-flex rounded-full border border-neutral-200 dark:border-neutral-700 overflow-hidden",children:[g.jsx("button",{type:"button",onClick:()=>n("solo"),className:`px-3 py-1 cursor-pointer ${t==="solo"?"bg-neutral-900 text-white dark:bg-yellow-500 dark:text-black":"bg-neutral-50 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-300"}`,children:" "}),g.jsx("button",{type:"button",onClick:()=>n("couple"),className:`px-3 py-1 cursor-pointer ${t==="couple"?"bg-neutral-900 text-white dark:bg-yellow-500 dark:text-black":"bg-neutral-50 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-300"}`,children:" "})]})]}),t==="couple"&&g.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[g.jsx("span",{className:"font-semibold",children:"  "}),g.jsxs("select",{value:r,onChange:o=>i(o.target.value),className:"min-w-[180px] h-30 px-2 py-1 border rounded bg-white dark:bg-neutral-800",children:[g.jsx("option",{value:"",children:" "}),a.map(o=>g.jsx("option",{value:o.id,children:o.label},o.id))]})]})]}):null}function KTe({isMultiMode:e,setIsMultiMode:t,canUseMultiMode:n}){const r=!n;return g.jsxs("div",{className:"flex gap-2",children:[g.jsx("button",{type:"button",onClick:()=>t(!1),className:`px-3 py-1.5 text-xs rounded-md border cursor-pointer ${e?"bg-neutral-100 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-300":"bg-neutral-900 text-white dark:bg-yellow-500 dark:text-black"}`,children:" "}),g.jsxs("button",{type:"button",onClick:()=>t(!0),disabled:r,title:r?" .":" (  )",className:`px-3 py-1.5 text-xs rounded-md border transition-colors ${r?"bg-neutral-200 text-neutral-500 dark:bg-neutral-800 dark:text-neutral-400 cursor-not-allowed opacity-70":e?"bg-neutral-900 text-white dark:bg-yellow-500 dark:text-black cursor-pointer":"bg-neutral-100 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-300 cursor-pointer"}`,children:[" (  ) ",r?"":""]})]})}function WTe({tabs:e,activeTab:t,setActiveTab:n,date:r,setDate:i,canUseLuckTabs:a}){return g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"flex desk:justify-between flex-col desk:flex-row gap-2",children:[g.jsx("div",{className:"flex gap-1 flex-wrap",children:e.map(o=>{const l=!a&&o!=="",u=!l&&t===o;return g.jsxs("button",{type:"button",onClick:()=>{l||n(o)},disabled:l,title:l?" .":o,className:["px-2 py-1 text-xs rounded-md border transition-colors",l?"bg-neutral-200 text-neutral-500 dark:bg-neutral-800 dark:text-neutral-400 cursor-not-allowed opacity-70":"cursor-pointer",u?"bg-neutral-900 text-white dark:bg-yellow-500 dark:text-black":l?"":"bg-neutral-100 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-300"].join(" "),children:[o," ",l?"":""]},o)})}),g.jsx(xF,{date:r,onChange:i})]}),g.jsxs("div",{className:"text-[11px] text-neutral-500 dark:text-neutral-400",children:[g.jsx("p",{children:"      ."}),g.jsx("p",{children:"     ."}),g.jsx("p",{children:"      ."})]})]})}function VTe({multiTab:e,setMultiTab:t,daeList:n,selectedDaeIdx:r,onToggleDae:i,seStartYear:a,seEndYear:o,onSeStartChange:l,onSeEndChange:u,onSeStartBlur:d,onSeEndBlur:h,seYearsCount:p,wolStartDate:b,wolEndDate:y,onWolStartChange:S,onWolEndChange:_,onWolStartBlur:k,onWolEndBlur:A,wolMonthsCount:N,ilStartDate:j,ilEndDate:C,onIlStartChange:D,onIlEndChange:P,onIlStartBlur:$,onIlEndBlur:U,ilDaysCount:Y}){return g.jsxs("div",{className:"space-y-3 p-3 bg-neutral-50 dark:bg-neutral-800 rounded-lg",children:[g.jsx("div",{className:"flex gap-1.5 border-b pb-2",children:["","","",""].map(K=>g.jsx("button",{type:"button",onClick:()=>t(K),className:`px-3 py-1.5 text-xs rounded-md cursor-pointer transition-colors ${e===K?"bg-blue-600 text-white font-semibold":"bg-white dark:bg-neutral-700 text-neutral-600 dark:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-neutral-600"}`,children:K},K))}),e===""&&g.jsxs("div",{children:[g.jsx("div",{className:"text-xs font-semibold mb-2 text-neutral-700 dark:text-neutral-200",children:"  (  )"}),g.jsx("div",{className:"grid grid-cols-2 gap-1.5",children:n.map((K,F)=>g.jsxs("button",{type:"button",onClick:()=>i(F),className:`px-2 py-1.5 text-xs rounded border cursor-pointer text-left ${r.includes(F)?"bg-blue-600 text-white border-blue-600":"bg-white dark:bg-neutral-700 border-neutral-300 dark:border-neutral-600"}`,children:[g.jsx("div",{className:"font-mono",children:K.gz}),g.jsxs("div",{className:"text-[10px] opacity-80",children:[K.age," (",K.startYear,"~",K.endYear,")"]})]},F))})]}),e===""&&g.jsxs("div",{children:[g.jsx("div",{className:"text-xs font-semibold mb-2 text-neutral-700 dark:text-neutral-200",children:"  ( 10)"}),g.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[g.jsx("input",{type:"number",value:a,onChange:K=>l(Number(K.target.value)),onBlur:d,className:"w-24 px-2 h-30 text-xs border rounded bg-white dark:bg-neutral-700"}),g.jsx("span",{className:"text-xs",children:"~"}),g.jsx("input",{type:"number",value:o,onChange:K=>u(Number(K.target.value)),onBlur:h,className:"w-24 px-2 h-30 text-xs border rounded bg-white dark:bg-neutral-700"})]}),g.jsxs("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 mt-1",children:[" : ",p,""]})]}),e===""&&g.jsxs("div",{children:[g.jsx("div",{className:"text-xs font-semibold mb-2 text-neutral-700 dark:text-neutral-200",children:"  ( 12)"}),g.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[g.jsx("input",{type:"month",value:b,onChange:K=>S(K.target.value),onBlur:k,className:"px-2 py-1 text-xs border rounded bg-white dark:bg-neutral-700"}),g.jsx("span",{className:"text-xs",children:"~"}),g.jsx("input",{type:"month",value:y,onChange:K=>_(K.target.value),onBlur:A,className:"px-2 py-1 text-xs border rounded bg-white dark:bg-neutral-700"})]}),g.jsxs("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 mt-1",children:[" : ",N,""]})]}),e===""&&g.jsxs("div",{children:[g.jsx("div",{className:"text-xs font-semibold mb-2 text-neutral-700 dark:text-neutral-200",children:"  ( 7)"}),g.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[g.jsx("input",{type:"date",value:j,onChange:K=>D(K.target.value),onBlur:$,className:"px-2 py-1 text-xs border rounded bg-white dark:bg-neutral-700"}),g.jsx("span",{className:"text-xs",children:"~"}),g.jsx("input",{type:"date",value:C,onChange:K=>P(K.target.value),onBlur:U,className:"px-2 py-1 text-xs border rounded bg-white dark:bg-neutral-700"})]}),g.jsxs("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 mt-1",children:[" : ",Y,""]})]}),g.jsxs("div",{className:"text-[11px] text-neutral-500 dark:text-neutral-400",children:[g.jsxs("p",{children:[" ",e,"   ."]}),g.jsx("p",{children:"    ."})]})]})}function ZTe({questionDraft:e,onChangeDraft:t,onAddQuestion:n,extraQuestions:r,onClearAll:i,onRemoveQuestion:a,locked:o=!1,lockTitle:l}){const u=l?" ":"";return g.jsxs("div",{className:"space-y-1",children:[g.jsxs("div",{className:"flex items-center justify-between gap-2",children:[g.jsx("div",{className:"text-xs font-semibold text-neutral-700 dark:text-neutral-200",children:"   ()"}),r.length>0&&g.jsx("button",{type:"button",onClick:i,disabled:o,title:o?l:void 0,className:"px-2 py-1 text-[10px] rounded-md border border-neutral-300 dark:border-neutral-600 text-neutral-500 dark:text-neutral-300 cursor-pointer",children:" "})]}),g.jsx("textarea",{value:e,onChange:t,readOnly:o,disabled:o,title:o?l:void 0,placeholder:" AI     , ' '  .",rows:3,className:"w-full placeholder:text-xs text-[16px] desk:text-xs rounded-md border bg-white dark:bg-neutral-800 p-2"}),g.jsxs("div",{className:"mb-4 text-center",children:[g.jsx("button",{type:"button",onClick:n,disabled:o,title:o?l:void 0,className:["w-full desk:max-w-[160px] px-1 py-1.5 text-xs rounded-md border",o?"cursor-not-allowed opacity-50 bg-neutral-400 text-white dark:bg-neutral-700":"bg-neutral-900 text-white dark:bg-yellow-500 dark:text-black cursor-pointer"].join(" "),children:o?` ${u}`:" "}),r.length>0&&g.jsxs("div",{className:"flex-1 text-[11px] text-neutral-500 dark:text-neutral-400 text-right",children:["  ",r.length,""]})]}),r.length>0&&g.jsx("ul",{className:"mt-1 space-y-1 max-h-24 overflow-y-auto text-[11px] text-neutral-700 dark:text-neutral-200",children:r.map((d,h)=>g.jsxs("li",{className:"flex gap-1 items-start",children:[g.jsxs("span",{className:"shrink-0",children:[h+1,"."]}),g.jsx("span",{className:"whitespace-pre-wrap break-words flex-1",children:d}),g.jsx("button",{type:"button",onClick:()=>a(h),disabled:o,title:o?l:void 0,className:["shrink-0 ml-2 text-[10px]",o?"text-neutral-400 cursor-not-allowed":"text-red-500 hover:underline"].join(" "),children:""})]},h))})]})}function XTe({value:e,lockSelection:t=!1}){const[n,r]=w.useState(!1);return t?g.jsx("div",{className:"w-full h-[320px] text-xs font-mono rounded-md border bg-neutral-50 dark:bg-neutral-800 p-2 select-none flex items-center justify-center text-center text-neutral-500","aria-readonly":"true",children:"   "}):g.jsxs("div",{children:[g.jsxs("div",{className:"relative",children:[g.jsx("textarea",{readOnly:!0,value:e,placeholder:"   ",className:["w-full text-xs font-mono rounded-md border bg-neutral-50 dark:bg-neutral-800 p-2 resize-none transition-[height] duration-200","desk:h-[270px] desk:overflow-y-auto",n?"h-[270px] overflow-y-auto pointer-events-auto":"h-[150px] overflow-hidden pointer-events-none desk:pointer-events-auto"].join(" ")}),!n&&g.jsx("div",{className:"pointer-events-none absolute inset-x-0 bottom-0 h-10 rounded-b-md bg-gradient-to-t from-white/95 dark:from-neutral-800/95 to-transparent"})]}),g.jsx("div",{className:"mt-2 mb-3 flex justify-center desk:hidden",children:g.jsx("button",{type:"button",onClick:()=>r(i=>!i),className:"px-3 py-1 rounded-full border text-xs bg-white text-neutral-700 border-neutral-300 dark:bg-neutral-900 dark:text-neutral-200 dark:border-neutral-700",children:n?"":""})})]})}const JTe={analysis:{label:"",desc:`-   ,   
- //    
-   `},mentor:{label:"",desc:`-   
-     
-    `},dryHumor:{label:" ",desc:`-     
-   `},softWarm:{label:" ",desc:`-   
-  `},etc:{label:" ",desc:"-     "}},QTe=["","","","",""],eAe={personality:{label:"    "},lifeFlow:{label:"   "},love:{label:"    "},career:{label:"    "},money:{label:"    "},family:{label:"      "},baby:{label:"    "},health:{label:"    "},move:{label:"     "},social:{label:"  "},compat:{label:"   "},risk:{label:"  "},meta:{label:"    "},etc:{label:"  "}},d$={personality:[{key:"overview",label:"  "},{key:"personality_basic",label:" "},{key:"personality_shadow",label:""},{key:"personality_relationshipStyle",label:" "},{key:"personality_workStyle",label:" "},{key:"personality_stressPattern",label:" "}],lifeFlow:[{key:"overview",label:"  "},{key:"lifeFlow_cycle",label:" "},{key:"lifeFlow_turningPoint",label:""},{key:"lifeFlow_peak",label:""},{key:"lifeFlow_down",label:""},{key:"lifeFlow_theme",label:"  "}],love:[{key:"love_pattern",label:" "},{key:"love_timing",label:"/ "},{key:"love_partner",label:" "},{key:"love_current",label:" /"},{key:"love_breakup",label:" "},{key:"love_marriageChange",label:"/ "}],career:[{key:"career_aptitude",label:" "},{key:"career_mode",label:" vs "},{key:"career_jobChange",label:"/ "},{key:"career_promotion",label:""},{key:"career_study",label:""},{key:"career_exam",label:""}],money:[{key:"overview",label:"  "},{key:"money_flow",label:" "},{key:"money_income",label:""},{key:"money_spending",label:" "},{key:"money_saving",label:"/ "},{key:"money_asset",label:" "},{key:"money_debt",label:"/ "},{key:"money_invest",label:" "},{key:"money_bigEvent",label:"  "}],family:[{key:"overview",label:"  "},{key:"family_origin",label:"/ "},{key:"family_current",label:" /"},{key:"family_parents",label:" "},{key:"family_siblings",label:" "},{key:"family_children",label:"/"},{key:"family_care",label:" "}],baby:[{key:"overview",label:" "},{key:"baby_pregnancy",label:"  "},{key:"baby_birth",label:"  "},{key:"baby_selection",label:"  "}],health:[{key:"overview",label:" "},{key:"health_overall",label:""},{key:"health_physical",label:" "},{key:"health_mental",label:""},{key:"health_stress",label:" "},{key:"health_accident",label:" "}],move:[{key:"overview",label:" "},{key:"move_timing",label:" "},{key:"move_chance",label:" "},{key:"move_targetHouse",label:"  "},{key:"move_environment",label:"  "},{key:"move_finance",label:" "}],social:[{key:"overview",label:"  "},{key:"social_overall",label:" "},{key:"social_friend",label:" "},{key:"social_workspace",label:" "},{key:"social_network",label:""},{key:"social_conflict",label:" "}],compat:[{key:"overview",label:" "},{key:"compat_overall",label:"  "},{key:"compat_love",label:"/ "},{key:"compat_marriage",label:"  "},{key:"compat_work",label:"/ "},{key:"compat_family",label:" "},{key:"compat_friend",label:" "}],risk:[{key:"overview",label:" "},{key:"risk_money",label:" "},{key:"risk_relationship",label:" "},{key:"risk_health",label:" "},{key:"risk_lawsuit",label:"/ "},{key:"risk_burnout",label:" "}],meta:[{key:"overview",label:"  "},{key:"meta_structure",label:"  "},{key:"meta_cycle",label:"  "},{key:"meta_trigger",label:" "},{key:"meta_usage",label:" "}],etc:[]};function tAe(){const[e,t]=w.useState(null);return w.useEffect(()=>{let n=!0;return Ie.auth.getUser().then(({data:r})=>{n&&t(r.user?.id??null)}),()=>{n=!1}},[]),e}const nAe={twelveUnseong:!0,twelveShinsal:!0,shinsal:!0,nabeum:!0},gv=Fo(e=>({sections:nAe,setSections:t=>e({sections:t}),toggleSection:t=>e(n=>({sections:{...n.sections,[t]:!n.sections[t]}}))})),sk=1e3*60*60*24;function lk(e,t){return(t.getFullYear()-e.getFullYear())*12+(t.getMonth()-e.getMonth())}function xb(e){return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}`}function wb(e){return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`}function f$(){const e=new Date,t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return`${t}-${n}-${r}`}function h$(){const e=new Date;return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}`}function rAe(){const e=new Date().getFullYear(),[t,n]=w.useState(e),[r,i]=w.useState(e),[a,o]=w.useState(()=>h$()),[l,u]=w.useState(()=>h$()),[d,h]=w.useState(()=>f$()),[p,b]=w.useState(()=>f$()),y=Z=>{n(Z)},S=Z=>{i(Z)},_=()=>{const Z=t;let G=r;G<Z&&(G=Z),G-Z>9&&(G=Z+9),i(G)},k=()=>{let Z=t;const G=r;G<Z&&(Z=G),G-Z>9&&(Z=G-9),n(Z)},A=w.useMemo(()=>{if(!Number.isFinite(t)||!Number.isFinite(r))return 0;const Z=r-t+1;return Z>0?Z:0},[t,r]),N=w.useMemo(()=>{const Z=[];if(!Number.isFinite(t)||!Number.isFinite(r))return Z;for(let G=t;G<=r&&Z.length<10;G++)Z.push(G);return Z},[t,r]),j=Z=>{o(Z)},C=Z=>{u(Z)},D=()=>{const[Z,G]=a.split("-").map(Number),[J,te]=l.split("-").map(Number),ce=new Date(Z,G-1),oe=new Date(J,te-1);if(oe<ce){u(xb(ce));return}if(lk(ce,oe)>11){const V=new Date(ce);V.setMonth(ce.getMonth()+11),u(xb(V))}},P=()=>{const[Z,G]=a.split("-").map(Number),[J,te]=l.split("-").map(Number),ce=new Date(Z,G-1),oe=new Date(J,te-1);if(oe<ce){o(xb(oe));return}if(lk(ce,oe)>11){const V=new Date(oe);V.setMonth(oe.getMonth()-11),o(xb(V))}},$=w.useMemo(()=>{const[Z,G]=(a||"").split("-").map(Number),[J,te]=(l||"").split("-").map(Number);if(!Number.isFinite(Z)||!Number.isFinite(G)||!Number.isFinite(J)||!Number.isFinite(te))return 0;const ce=new Date(Z,G-1,1),oe=new Date(J,te-1,1),B=lk(ce,oe)+1;return B>0?B:0},[a,l]),U=w.useMemo(()=>{const Z=[],[G,J]=a.split("-").map(Number),[te,ce]=l.split("-").map(Number),oe=new Date(G,J-1),B=new Date(te,ce-1);if(Number.isNaN(oe.getTime())||Number.isNaN(B.getTime()))return Z;for(;oe<=B&&Z.length<12;)Z.push(`${oe.getFullYear()}-${String(oe.getMonth()+1).padStart(2,"0")}`),oe.setMonth(oe.getMonth()+1);return Z},[a,l]),Y=Z=>{h(Z)},K=Z=>{b(Z)},F=()=>{if(!d||!p)return;const[Z,G,J]=d.split("-").map(Number),[te,ce,oe]=p.split("-").map(Number),B=new Date(Z,G-1,J,4,0,0),V=new Date(te,ce-1,oe,4,0,0);if(V<B){b(wb(B));return}if(Math.floor((V.getTime()-B.getTime())/sk)>7){const Q=new Date(B);Q.setDate(B.getDate()+6),b(wb(Q))}},z=()=>{if(!d||!p)return;const[Z,G,J]=d.split("-").map(Number),[te,ce,oe]=p.split("-").map(Number),B=new Date(Z,G-1,J,4,0,0),V=new Date(te,ce-1,oe,4,0,0);if(B>V){h(wb(V));return}if(Math.floor((V.getTime()-B.getTime())/sk)>7){const Q=new Date(V);Q.setDate(V.getDate()-6),h(wb(Q))}},W=w.useMemo(()=>{const[Z,G,J]=(d||"").split("-").map(Number),[te,ce,oe]=(p||"").split("-").map(Number);if(!Number.isFinite(Z)||!Number.isFinite(G)||!Number.isFinite(J)||!Number.isFinite(te)||!Number.isFinite(ce)||!Number.isFinite(oe))return 0;const B=new Date(Z,G-1,J,4,0,0),V=new Date(te,ce-1,oe,4,0,0),ie=Math.floor((V.getTime()-B.getTime())/sk)+1;return ie>0?ie:0},[d,p]),X=w.useMemo(()=>{const Z=[],[G,J,te]=d.split("-").map(Number),[ce,oe,B]=p.split("-").map(Number),V=new Date(G,J-1,te,4,0,0),ie=new Date(ce,oe-1,B,4,0,0);if(Number.isNaN(V.getTime())||Number.isNaN(ie.getTime()))return Z;const Q=new Date(V);for(;Q<=ie&&Z.length<31;){const se=Q.getFullYear(),me=String(Q.getMonth()+1).padStart(2,"0"),he=String(Q.getDate()).padStart(2,"0");Z.push(`${se}-${me}-${he}`),Q.setDate(Q.getDate()+1)}return Z},[d,p]);return{seStartYear:t,seEndYear:r,wolStartYM:a,wolEndYM:l,ilStartDate:d,ilEndDate:p,onSeStartChange:y,onSeEndChange:S,onSeStartBlur:_,onSeEndBlur:k,onWolStartChange:j,onWolEndChange:C,onWolStartBlur:D,onWolEndBlur:P,onIlStartChange:Y,onIlEndChange:K,onIlStartBlur:F,onIlEndBlur:z,seYearsCount:A,wolMonthsCount:$,ilDaysCount:W,seYearsList:N,wolMonthsList:U,ilDaysList:X}}function iAe({msId:e,canUseMultiMode:t,canUseLuckTabs:n}){const r=gv(oe=>oe.sections),i=gv(oe=>oe.toggleSection),[a,o]=w.useState("analysis"),[l,u]=w.useState(!1),[d,h]=w.useState(!1),[p,b]=w.useState(""),[y,S]=w.useState("personality"),[_,k]=w.useState("overview"),[A,N]=w.useState("solo"),[j,C]=w.useState(""),[D,P]=w.useState(!1),[$,U]=w.useState(""),[Y,K]=w.useState([]),[F,z]=w.useState(""),[W,X]=w.useState([]),Z=rAe();w.useEffect(()=>{y!=="love"&&y!=="compat"&&(N("solo"),b(""))},[y]),w.useEffect(()=>{!t&&D&&P(!1)},[t,D]),w.useEffect(()=>{!n&&j!==""&&C("")},[n,j]),w.useEffect(()=>{$!==""&&K([])},[$]),w.useEffect(()=>{z(""),X([])},[e]);function G(){const oe=F.trim();oe&&(X(B=>[...B,oe]),z(""))}function J(oe){X(B=>B.filter((V,ie)=>ie!==oe))}function te(){X([])}function ce(oe){K(B=>B.includes(oe)?B.filter(V=>V!==oe):[...B,oe])}return{sections:r,toggleSection:i,tone:a,setTone:o,friendMode:l,setFriendMode:u,teacherMode:d,setTeacherMode:h,partnerId:p,setPartnerId:b,mainCategory:y,setMainCategory:S,subCategory:_,setSubCategory:k,relationMode:A,setRelationMode:N,activeTab:j,setActiveTab:C,isMultiMode:D,setIsMultiMode:P,multiTab:$,setMultiTab:U,selectedDaeIdx:Y,setSelectedDaeIdx:K,handleToggleDae:ce,rangeControls:Z,questionDraft:F,setQuestionDraft:z,extraQuestions:W,setExtraQuestions:X,handleAddQuestion:G,handleRemoveQuestion:J,handleClearQuestions:te}}const SF=Fo(e=>({shinsalBase:"",shinsalEra:"",shinsalGaehwa:!1,hiddenStemMode:"hgc",setShinsalBase:t=>e({shinsalBase:t}),setShinsalEra:t=>e({shinsalEra:t}),setShinsalGaehwa:t=>e({shinsalGaehwa:t}),setHiddenStemMode:t=>e({hiddenStemMode:t})}));function Tj(e){if(!e)return["","","",""];let t=Number(e.birthDay?.slice(0,4)??2e3),n=Number(e.birthDay?.slice(4,6)??1),r=Number(e.birthDay?.slice(6,8)??1);if(e.calendarType==="lunar"){const j=Wi(t,n,r);t=j.getFullYear(),n=j.getMonth()+1,r=j.getDate()}const i=!e.birthTime||e.birthTime==="",a=i?4:Number(e.birthTime.slice(0,2)),o=i?30:Number(e.birthTime.slice(2,4)),l=new Date(t,n-1,r,a,o,0,0),u=!e.birthPlace||e.birthPlace.name===""||!e.birthPlace.lon?127.5:e.birthPlace.lon,d=wp(l,u,i),h=e.mingSikType??"/",p=st(d,u),b=St(d,u),y=mt(d,h),S=i?null:Qa(d,h),_=Le(p),k=Le(b),A=Le(y),N=S?Le(S):"";return[_,k,A,N]}function kF(e){const t=new Date(e.corrected),n=Tj(e),r=n[0].charAt(0),a=["","","","",""].includes(r),o=e.gender==="",l=o&&a||!o&&!a?"forward":"backward",u=kp(t,n[1],l,120,e.birthPlace?.lon??127.5),d=u.firstChange;if(!d)return[];const h=[];let p=Le(u.events[0]?.gz??n[1]);for(let b=0;b<10;b++){const y=new Date(d);if(y.setFullYear(y.getFullYear()+b*10),b>0){const S=u.events[b];S&&(p=Le(S.gz))}h.push(`${y.getFullYear()} ${String(y.getMonth()+1).padStart(2,"0")} ${p}  `)}return h}const aAe=["- AI     ,      . (, ,   )","-   ,  . (     )","-  /    .","- , , , ,       ,    .","-     , (~, ~  ) .","-    .","-  JSON/      .","-       .","-         .","-   ,    .","-      ,    ."],oAe=["- :     . ////  .","- :  ,  .    . //   .","- : ~  //     .    .","- , /      , ////   .",""," ( )","-  + (///)  /","-      +   ","- :   +    ","-  + :      ()   ","-  :  ","- : /(  )",""," ","-  .  /  /  ","-   =  . 1~2 "];function sAe(e,t){e.push("### ()");const n=t?oAe:aAe;e.push(...n)}function lAe(e,t){const{mode:n,tab:r,isStudyTone:i}=t,a=(...o)=>e.push(...o);n==="single"?r?i?a("","##  ()",`-  : (${r})  ,    ( + / )  .`,"-     /      ()  ."):a("","##  ()",`-    (${r})   ,         .`,"-   ,          ."):a("","##  ()","-   ,      /  ."):i?a("","##  ()","-       .    .","-      (/// )  1~2 ."):a("","##  ()","-  (///)  ,           ."),i&&e.push("- (teacherMode)     ,   .","-      (/ / )  1~2 .")}function cAe(e,t){const{topic:n,subTopic:r,relationMode:i,isStudyTone:a}=t,o=(...l)=>e.push(...l);switch(n){case"personality":return a?o("","## ()","-     //   .","-    .   + /(   ) +   ,   .","-   :   XX  YY .   .","-        .","1)   : /, , /,        ,      .","2)   :    VS   ,   VS   ,  VS      . ","3) /:   ,     , /        . ","4)   : //  ,    ,       . ","5)  :     ,    ,       ."):o("","## ()","-  /  .","-         .","-        .","1)   : /, , /,        ,      .","2)   :    VS   ,   VS   ,  VS      . ","3) /:   ,     , /        . ","4)   : //  ,    ,       . ","5)  :     ,    ,       ."),r==="personality_shadow"&&o("-    ,    / ,    ."),r==="personality_relationshipStyle"&&o("-  / ,   /  ."),r==="personality_workStyle"&&o("-     /    ."),r==="personality_stressPattern"&&o("-       ."),!0;case"lifeFlow":return a?o("","## ( )","-   . //    .","-   :   +  () + /  +   .","-    /  ."):o("","## ( )","-       .","-     ."),r==="lifeFlow_turningPoint"&&o("-   A/B ,     ."),!0;case"love":return a?o("","## ()","-   : /////// .","- ( )   . +      .","- ///  /  () ."):o("","## ()","- //   .","-  ,   ,    ."),i==="solo"?o("-  :  / ,     ."):i==="couple"&&o("-  :        (//)  ."),!0;case"career":return a?o("","## ()","-  : ///// / .","- ///        .","- (//)   ,  +  ."):o("","## ()","- ///   ."),r==="career_jobChange"&&o("-    / ."),r==="career_promotion"&&o("-     //   ."),!0;case"money":return a?o("","## ()","-   :  /, / ,   , /, , , /  .","-    .   +   +    /  .","-  (    )    ."):o("","## ()","- //   ."),r==="money_debt"&&o("- //   (// )."),r==="money_bigEvent"&&o("-          ."),!0}return!1}function uAe(e,t){const{topic:n,subTopic:r,isStudyTone:i}=t,a=(...o)=>e.push(...o);switch(n){case"family":return i?a("","## ()","-  : /  ,   ,  /,   , / .","- /     ,   ."):a("","## ()","- /   ."),!0;case"baby":return i?a("","## ()","-  :  /,  ,    .","-  /   .  / /  ."):a("","## ()","- //   ."),!0;case"health":return i?a("","## ()","-   : ,   , /, /.","-   .  //      .","-   + /      ."):a("","## ()","- /   ."),r==="health_accident"&&a("-  /(/// ) ."),!0;case"move":return i?a("","## ()","-    : , , , / ,  .","- ()()(/)    .","- /  /    ."):a("","## ()","- /  ."),!0;case"social":return i?a("","## ()","-  ////   .","- ()/()/()     ."):a("","## ()","- /   ."),!0;case"compat":return i?a("","## ( )","-    ,        .","- // ,  //   ."):a("","## ( )","- /    ."),!0;case"risk":return i?a("","## ()","-  .        .","- //  + /    ."):a("","## ()","- /   ."),!0;case"meta":return i?a("","## ()","-    ,        .","- ,  3~7 .   "):a("","## ()","-       ."),!0}return!1}function dAe(e,t){cAe(e,t)||uAe(e,t)}function fAe(e){return e==="multi"?"multi":"single"}function EF(e){const{topic:t,subTopic:n,timeMode:r="single",tab:i,relationMode:a,teacherMode:o}=e;if(!t)return"";const l=fAe(r),u=[],d=o===!0;return sAe(u,d),t==="etc"||(lAe(u,{mode:l,tab:i,isStudyTone:d}),dAe(u,{topic:t,subTopic:n,relationMode:a,isStudyTone:d})),u.join(`
`)}const hAe=!1,m$=e=>e<10?`0${e}`:`${e}`;function mAe(e){const t=e,n=typeof t.birthDay=="string"?t.birthDay:"",r=typeof t.calendarType=="string"?t.calendarType:"solar";if(n.length<8)return e;const i=Number(n.slice(0,4)),a=Number(n.slice(4,6)),o=Number(n.slice(6,8));if(r==="lunar")try{const l=Wi(i,a,o,0,0),u=`${l.getFullYear()}${m$(l.getMonth()+1)}${m$(l.getDate())}`;return{...e,birthDay:u,calendarType:"solar"}}catch{return e}return e}const _m={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Sm={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},_u={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},_b={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},pAe=["","","","",""];function p$(e){return pAe.includes(e)}const TF={:"",:"",:"",:"",:""},AF={:"",:"",:"",:"",:""},jF={:"",:"",:"",:"",:""},OF={:"",:"",:"",:"",:""};function yE(e){if(!e)return null;const t=e.trim();if(["","","","","","","","","",""].includes(t))return t;if(_m[t])return _m[t];if(["","","","","","","","","","","",""].includes(t))return _b[t]??null;if(Sm[t])return _b[Sm[t]]??null;const n=t.charAt(0);return _m[n]?_m[n]:["","","","","","","","","",""].includes(n)?n:Sm[n]?_b[Sm[n]]??null:["","","","","","","","","","","",""].includes(n)?_b[n]??null:null}function gAe(e){const t={};for(const[n,r]of Object.entries(e??{})){if(r<=0)continue;const i=yE(n);i&&(t[i]=(t[i]??0)+r)}return t}function bAe(e){if(!e)return[];const t=yE(e.charAt(0)),n=yE(e.charAt(1));return[t,n].filter(Boolean)}function Sb(e){const t=bAe(e),n={};for(const r of t)n[r]=(n[r]??0)+1;return n}function yAe(e,t){const n=_u[e],r=_u[t];if(!n||!r)return"";let i;r===n?i="":r===TF[n]?i="":r===AF[n]?i="":r===jF[n]?i="":r===OF[n]?i="":i="";const a=p$(e)===p$(t);switch(i){case"":return a?"":"";case"":return a?"":"";case"":return a?"":"";case"":return a?"":"";case"":return a?"":""}}function NF(e,t){return t===e?"":t===TF[e]?"":t===AF[e]?"":t===jF[e]?"":t===OF[e]?"":""}function CF(e){const t=Object.entries(e),n=t.reduce((d,[,h])=>d+(h>0?h:0),0);if(n<=0)return Object.fromEntries(t.map(([d])=>[d,0]));const r=t.map(([d,h])=>[d,(h>0?h:0)*100/n]),i=r.map(([d,h])=>[d,Math.floor(h)]);let a=i.reduce((d,[,h])=>d+h,0);const o=r.map(([d,h])=>[d,h-Math.floor(h)]).sort((d,h)=>h[1]-d[1]),l=Object.fromEntries(i.map(([d,h])=>[d,h]));let u=0;for(;a<100&&u<o.length;)l[o[u][0]]+=1,a+=1,u+=1;return l}const vAe={:{name:"",element:"",brief:"  ",keywords:" "},:{name:"",element:"",brief:"  ",keywords:" "},:{name:"",element:"",brief:"  ",keywords:" "},:{name:"",element:"",brief:"  ",keywords:" "},:{name:"",element:"",brief:"  ",keywords:""},:{name:"",element:"",brief:"  ",keywords:""},:{name:"",element:"",brief:" ",keywords:""},:{name:"",element:"",brief:" ",keywords:""},:{name:"",element:"",brief:" ",keywords:""},:{name:"",element:"",brief:" ",keywords:""},:{name:"",element:"",brief:" ",keywords:""},:{name:"",element:"",brief:" ",keywords:""},:{name:"",element:"",brief:"  ",keywords:""},:{name:"",element:"",brief:"  ",keywords:""},:{name:"",element:"",brief:"  ",keywords:""},:{name:"",element:"",brief:"  ",keywords:""},:{name:"",element:"",brief:"  ",keywords:" "},:{name:"",element:"",brief:"  ",keywords:" "},:{name:"",element:"",brief:"",keywords:""},:{name:"",element:"",brief:"",keywords:""},:{name:"",element:"",brief:"()",keywords:""},:{name:"",element:"",brief:"()",keywords:""},:{name:"",element:"",brief:" ",keywords:""},:{name:"",element:"",brief:" ",keywords:""},:{name:"",element:"",brief:"",keywords:"/"},:{name:"",element:"",brief:"",keywords:"/"},:{name:"",element:"",brief:" ",keywords:" "},:{name:"",element:"",brief:" ",keywords:" "},:{name:"",element:"",brief:"  ",keywords:" "},:{name:"",element:"",brief:"  ",keywords:" "},:{name:"",element:"",brief:" ",keywords:"/"},:{name:"",element:"",brief:" ",keywords:"/"},:{name:"",element:"",brief:"",keywords:""},:{name:"",element:"",brief:"",keywords:""},:{name:"",element:"",brief:" ",keywords:""},:{name:"",element:"",brief:" ",keywords:""},:{name:"",element:"",brief:"()",keywords:""},:{name:"",element:"",brief:"()",keywords:""},:{name:"",element:"",brief:"()",keywords:""},:{name:"",element:"",brief:"()",keywords:""},:{name:"",element:"",brief:"(  )",keywords:""},:{name:"",element:"",brief:"(  )",keywords:""},:{name:"",element:"",brief:"()",keywords:" "},:{name:"",element:"",brief:"()",keywords:" "},:{name:"",element:"",brief:"  ",keywords:" "},:{name:"",element:"",brief:"  ",keywords:" "},:{name:"",element:"",brief:" ",keywords:" "},:{name:"",element:"",brief:" ",keywords:" "},:{name:"",element:"",brief:"",keywords:""},:{name:"",element:"",brief:"",keywords:""},:{name:"",element:"",brief:"   ",keywords:" "},:{name:"",element:"",brief:"   ",keywords:" "},:{name:"",element:"",brief:"",keywords:""},:{name:"",element:"",brief:"",keywords:""},:{name:"",element:"",brief:"  ",keywords:""},:{name:"",element:"",brief:"  ",keywords:""},:{name:"",element:"",brief:"",keywords:""},:{name:"",element:"",brief:"",keywords:""},:{name:"",element:"",brief:"  ",keywords:""},:{name:"",element:"",brief:"  ",keywords:""}},xAe=e=>{if(!e||e.length<2)return e;const t=e.charAt(0),n=e.charAt(1),r=_m[t]??t,i=Sm[n]??n;return`${r}${i}`},Aj=e=>{const t=xAe(e),n=vAe[t];return n?{...n,code:t}:null};function MF(e,t){const n=mAe(e),r=n.birthDay??"",i=r.slice(0,4),a=r.slice(4,6),o=r.slice(6,8);let l="";if(n.corrected instanceof Date&&!Number.isNaN(n.corrected.getTime())){const u=String(n.corrected.getHours()).padStart(2,"0"),d=String(n.corrected.getMinutes()).padStart(2,"0");l=t?"":`${u}:${d}`}return`${i} ${a} ${o}  ${l}`}function wAe(e){const t={:0,:0,:0,:0,:0};for(const[n,r]of Object.entries(e)){const i=_u[n];i&&(t[i]+=r)}return t}function _Ae(e,t){const n={:0,:0,:0,:0,:0,:0,:0,:0,:0,:0};for(const[r,i]of Object.entries(e)){if(i<=0)continue;const a=yAe(t,r);n[a]+=i}return n}function SAe(e){return{:e.+e.,:e.+e.,:e.+e.,:e.+e.,:e.+e.}}const kAe={natal:50,dae:30,se:20,wol:7,il:3};function EAe(e){const t={};for(const{kind:r,bare:i}of e){const a=kAe[r]??0;if(a<=0)continue;const o=CF(i);for(const[l,u]of Object.entries(o))t[l]=(t[l]??0)+u*a}const n=Object.values(t).reduce((r,i)=>r+i,0);if(n>0)for(const r of Object.keys(t))t[r]=t[r]/n*100;return t}function DF(e,t,n){const r=gAe(e.perStemElementScaled),i=t!==""&&n?.dae?Sb(n.dae):{},a=(t===""||t===""||t==="")&&n?.se?Sb(n.se):{},o=(t===""||t==="")&&n?.wol?Sb(n.wol):{},l=t===""&&n?.il?Sb(n.il):{},u=EAe([{kind:"natal",bare:r},{kind:"dae",bare:i},{kind:"se",bare:a},{kind:"wol",bare:o},{kind:"il",bare:l}]),d=CF(u),h=wAe(d),p=_Ae(d,e.dayStem),b=SAe(p);return{perStemAugBare:d,elementPercent:h,totalsSub:p,totalsMain:b}}function PF(e){return!e.birthTime||e.birthTime===""}function RF(e,t){return t[3]?["","","",""]:["","",""]}function TAe(e,t){return e.map((n,r)=>t[r]??"")}const AAe=e=>typeof e=="object"&&e!==null&&!Array.isArray(e);function bv(e){if(e!=null){if(Array.isArray(e)){const t=e.map(n=>bv(n)).filter(n=>n!==void 0);return t.length>0?t:void 0}if(AAe(e)){const t={};for(const[n,r]of Object.entries(e)){const i=bv(r);i!==void 0&&(t[n]=i)}return Object.keys(t).length>0?t:void 0}return e}}function jAe(e){return e==null?"":typeof e=="string"?e:typeof e=="number"||typeof e=="boolean"?String(e):""}function OAe(e,t){const n=bv(e);if(n===void 0)return"";const r=jAe(n);if(r!=="")return r;const i=JSON.stringify(n,null,2);return t==="plain"?i:["```json",i,"```"].join(`
`)}function LF(e,t,n){const r=OAe(t,n);return r.trim()?`## ${e}
${r}`:""}const Xn=(e,t)=>LF(e,t,"plain"),qr=(e,t)=>LF(e,t,"fenced"),NAe=(e,t)=>{if(!e)return{};const n=t,r=l=>{if(!l)return;const u={};for(const[d,h]of Object.entries(l)){if(!Array.isArray(h))continue;const p=h.filter(b=>typeof b=="string"&&b.includes(n));p.length>0&&(u[d]=p)}return Object.keys(u).length>0?u:void 0},i=r(e.good),a=r(e.bad),o={};return i&&(o.good=i),a&&(o.bad=a),o},CAe=(e,t)=>{const n={};if(!e||typeof e!="object")return n;for(const[r,i]of Object.entries(e)){if(!Array.isArray(i))continue;const a=Array.from(new Set(i.filter(o=>typeof o=="string"&&o.includes(t))));a.length>0&&(n[r]=a)}return n};function vE(e,t){return Object.fromEntries(Object.entries(e).map(([n,r])=>[`${n}(${NF(t,n)})`,r]))}function MAe(e){const{tab:t,natal:n,posLabels:r,chain:i}=e,a=[];for(let l=0;l<r.length;l++){const u=n[l]??"";u&&a.push({kind:"natal",pos:r[l],gz:u})}if(t===""||!i)return a;const o=[...a];return i.dae&&o.push({kind:"luck",pos:"",gz:i.dae}),(t===""||t===""||t==="")&&i.se&&o.push({kind:"luck",pos:"",gz:i.se}),(t===""||t==="")&&i.wol&&o.push({kind:"luck",pos:"",gz:i.wol}),t===""&&i.il&&o.push({kind:"luck",pos:"",gz:i.il}),o}function DAe(e,t){if(!t)return"()";const n=[];return(e===""||e===""||e===""||e==="")&&t.dae&&n.push(`:${Le(t.dae)}`),(e===""||e===""||e==="")&&t.se&&n.push(`:${Le(t.se)}`),(e===""||e==="")&&t.wol&&n.push(`:${Le(t.wol)}`),e===""&&t.il&&n.push(`:${Le(t.il)}`),n.length>0?n.join(" / "):"()"}function IF(e){const{ms:t,natal:n,chain:r,basis:i,tab:a,unified:o,percent:l,category:u,topic:d,subTopic:h,relationMode:p,teacherMode:b,sections:y}=e,S=y?.tenGod??!0,_=y?.twelveUnseong??!0,k=y?.twelveShinsal??!0,A=y?.shinsal??!0,N=y?.nabeum??!0,j=PF(t),C=Le(n[3]??""),D=!!C,P=[Le(n[0]??""),Le(n[1]??""),Le(n[2]??""),C],$=kF(t).slice(0,10),U=Il({natal:P,daewoon:a!==""?r?.dae??void 0:void 0,sewoon:a===""||a===""||a===""?r?.se??void 0:void 0,wolwoon:a===""||a===""?r?.wol??void 0:void 0,ilwoon:a===""?r?.il??void 0:void 0}),Y=ef({natal:P,daewoon:a!==""?r?.dae??void 0:void 0,sewoon:a===""||a===""||a===""?r?.se??void 0:void 0,wolwoon:a===""||a===""?r?.wol??void 0:void 0,ilwoon:a===""?r?.il??void 0:void 0}),{shinsalEra:K,shinsalGaehwa:F,shinsalBase:z}=SF.getState(),W=z===""?P[0]?.charAt(1)??"":P[2]?.charAt(1)??"",X=DF(o,a,r),Z=X.elementPercent,G=X.totalsSub,{flags:J}=p7(P,o.elementScoreRaw),te=`${u} (${l.toFixed(1)}%)  ${[` ${J..||J..||J..||J..?"":""}`,` ${J..||J..||J..||J..?"":""}`,` ${J..||J..?"":""}`].join(", ")}`,ce=RF(t,P),oe=o.dayStem,B=_u[oe]??_u[o.dayStem]??"",V=[` : ${t.name??""} (${MF(t,j)}) : ${t.gender}`,` ${P[0]} ${P[1]} ${P[2]}`+(D?` ${P[3]}`:""),`: ${DAe(a,r)}`].join(`
`),ie=[];ie.push(qr("  (10)",$)),ie.push(qr("",te)),ie.push(qr("(  )",vE(o.natalFixed.elementPercent100,B))),a!==""&&ie.push(qr(`(=${a})`,vE(Z,B))),S&&(ie.push(qr(" ( 10 100)",o.natalFixed.totalsSub)),a!==""&&ie.push(qr(` ( 10=${a} 100)`,G)));const Q=MAe({tab:a,natal:P,posLabels:ce,chain:r});if(_){const re=Q.map(({pos:Ee,gz:we})=>({pos:Ee,gz:we,unseong:Ho(P[2]?.charAt(0)??"",we.charAt(1))}));ie.push(qr("(+ )",re))}if(k){const re=Q.map(({pos:Ee,gz:we})=>({pos:Ee,gz:we,shinsal:Go({baseBranch:W,targetBranch:we.charAt(1),era:K,gaehwa:F})}));ie.push(qr("(+  )",re))}if(N){const re=[];for(const Ee of Q){const we=Aj(Ee.gz);if(!we){Ee.kind==="natal"&&re.push({pos:Ee.pos,gz:Ee.gz,nabeum:null});continue}re.push({pos:Ee.pos,gz:Ee.gz,nabeum:we.name,element:we.element,code:we.code})}ie.push(qr("(+ )",re))}if(ie.push(qr("()",BT(ce.map((re,Ee)=>P[Ee]??"")))),ie.push(qr("( :  )",U)),A)if(a===""){const re=ef({natal:P,daewoon:null,sewoon:null,wolwoon:null,ilwoon:null,basis:i});ie.push(qr("( )",{good:re.good,bad:re.bad,meta:re.meta}))}else ie.push(qr(`( =${a})`,Y));const se=ie.filter(re=>re&&re.trim().length>0).join(`

`),me=EF({topic:d,subTopic:h,timeMode:"single",tab:a,relationMode:p,teacherMode:b}),he=["-----","  ","","1.       (////)  .","2.  ,        ."];me&&he.push("","  ( )",me);const _e=he.join(`
`);return{header:V,body:se,guide:_e}}function PAe(e){const{header:t,body:n,guide:r}=IF(e);return[t,n,r].join(`

`)}function Po(e){const{scope:t,infoText:n,gz:r,chain:i,natal:a,relationArgs:o,basis:l,unified:u,dayEl:d,baseDayStem:h,show:p,shinsalSettings:b,harmonyMode:y="scope",includeBasicInfo:S=!0}=e,_=DF(u,t,i),k=Il({natal:a,daewoon:o.daewoon,sewoon:o.sewoon,wolwoon:o.wolwoon,ilwoon:o.ilwoon}),A=p.shinsal?ef({natal:a,daewoon:o.daewoon,sewoon:o.sewoon,wolwoon:o.wolwoon,ilwoon:o.ilwoon,basis:l}):null,N=p.nabeum?Aj(r):null,j=p.twelveUnseong?Ho(h,r.charAt(1)):null,C=p.twelveShinsal?Go({baseBranch:b.baseBranch,targetBranch:r.charAt(1),era:b.era,gaehwa:b.gaehwa}):null,D=y==="full"?k:CAe(k,t);return{...S?{:n,:r}:{},:vE(_.elementPercent,d),...p.tenGod?{:_.totalsSub}:{},:D,...p.shinsal?{:NAe(A,t)}:{},...p.nabeum?{:N?{gz:r,nabeum:N.name,element:N.element,code:N.code}:null}:{},...p.twelveUnseong?{:{pos:t,gz:r,unseong:j}}:{},...p.twelveShinsal?{:{pos:t,gz:r,shinsal:C}}:{}}}function RAe(e){const{selectedDaeList:t,daeList:n,natal:r,basis:i,unified:a,dayEl:o,baseDayStem:l,show:u,shinsalSettings:d}=e;if(n.length===0||t.length===0)return[];const h=[];for(const p of t){const b={dae:p.gz,se:null,wol:null,il:null},y=Po({scope:"",infoText:`${p.age} ${p.gz} (${p.startYear}~${p.endYear})`,gz:p.gz,chain:b,natal:r,relationArgs:{daewoon:p.gz,sewoon:void 0,wolwoon:void 0,ilwoon:void 0},basis:i,unified:a,dayEl:o,baseDayStem:l,show:u,shinsalSettings:d,harmonyMode:"full",includeBasicInfo:!1});h.push(Xn(`${p.age} ${p.gz} (${p.startYear}~${p.endYear})`,y))}return h.filter(p=>p.trim().length>0)}function jj(e){return new Date(e.startYear,(e.startMonth??1)-1,e.startDay??1)}function $F(e,t){const n=e[t],r=e[t+1];return r?jj(r):new Date(n.endYear+1,0,1)}function BF(e,t,n,r){return e<r&&t>n}function zF(e,t,n){const r=new Date(t,0,1),i=new Date(n+1,0,1),a=[];for(let o=0;o<e.length;o++){const l=e[o],u=jj(l),d=$F(e,o);BF(u,d,r,i)&&(a.some(h=>h.gz===l.gz&&h.startYear===l.startYear)||a.push(l))}return a}function UF(e,t){return zF(e,t,t)}function yv(e,t,n){const r=new Date(t,n-1,1),i=new Date(t,n,1),a=[];for(let o=0;o<e.length;o++){const l=e[o],u=jj(l),d=$F(e,o);BF(u,d,r,i)&&(a.some(h=>h.gz===l.gz&&h.startYear===l.startYear)||a.push(l))}return a}function xE(e,t){if(!Number.isInteger(t)||t<1||t>12)throw new RangeError(`findSeForMonthPairs: month must be 1..12, got ${t}`);const n=new Date(e,t-1,1,0,0,0,0),r=new Date(e,t,1,0,0,0,0),i=An(e,315),a=[],o=u=>{const d=st(new Date(u,5,15,12,0,0,0)),h=Le(d||"");h&&(a.some(p=>p.useYear===u&&p.gz===h)||a.push({useYear:u,gz:h}))};return n<i&&i<r?(o(e-1),o(e)):r<=i?o(e-1):o(e),a}function LAe(e){const{seYears:t,daeList:n,natal:r,basis:i,unified:a,dayEl:o,baseDayStem:l,show:u,shinsalSettings:d}=e;if(t.length===0)return[];const h=Array.from(new Set(t)).sort((_,k)=>_-k),p=[],b=h[0],y=h[h.length-1],S=zF(n,b,y);if(S.length>0){const _=b,k=st(new Date(_,5,15,12,0,0)),A=Le(k||""),N={:S.map(j=>{const C={dae:j.gz,se:A||null,wol:null,il:null};return Po({scope:"",infoText:`${j.age} ${j.gz} (${j.startYear}~${j.endYear})`,gz:j.gz,chain:C,natal:r,relationArgs:{daewoon:j.gz,sewoon:A||void 0,wolwoon:void 0,ilwoon:void 0},basis:i,unified:a,dayEl:o,baseDayStem:l,show:u,shinsalSettings:d,harmonyMode:"scope",includeBasicInfo:!0})})};p.push(Xn("",N))}for(const _ of h){const k=new Date(_,5,15,12,0,0),A=st(k),N=UF(n,_),j=N.length>0?N[0]:null,C=Le(A||""),D=_,P={dae:j?j.gz:null,se:C||null,wol:null,il:null},$=Po({scope:"",infoText:`${D} ${C}`,gz:C,chain:P,natal:r,relationArgs:{daewoon:j?.gz,sewoon:C||void 0,wolwoon:void 0,ilwoon:void 0},basis:i,unified:a,dayEl:o,baseDayStem:l,show:u,shinsalSettings:d,harmonyMode:"scope",includeBasicInfo:!0});p.push(Xn(` ${D}`,{:$}))}return p.filter(_=>_.trim().length>0)}function ck(e){return String(e).padStart(2,"0")}function IAe(e,t){const n=new Date(e,t-1,1,12,0,0,0),r=new Date(e,t,1,12,0,0,0),i=An(e,315),a=xE(e,t);if(!(n<i&&i<r)){const S=a[a.length-1]??(()=>{const _=Le(st(new Date(e,5,15,12,0,0,0))||"");return{useYear:e,gz:_}})();return[{label:`${e}-${ck(t)}`,repDate:new Date(e,t-1,15,12,0,0,0),se:S}]}const l=1440*60*1e3,u=new Date(i.getTime()-l);u.setHours(12,0,0,0);const d=new Date(i.getTime()+l);d.setHours(12,0,0,0);const h=a.find(S=>S.useYear===e-1)??a[0],p=a.find(S=>S.useYear===e)??a[a.length-1],b=h??{useYear:e-1,gz:Le(st(new Date(e-1,5,15,12,0,0,0))||"")},y=p??{useYear:e,gz:Le(st(new Date(e,5,15,12,0,0,0))||"")};return[{label:`${e}-${ck(t)}()`,repDate:u,se:b},{label:`${e}-${ck(t)}()`,repDate:d,se:y}]}function $Ae(e){const{wolMonths:t,daeList:n,natal:r,basis:i,unified:a,dayEl:o,baseDayStem:l,show:u,shinsalSettings:d}=e;if(t.length===0)return[];const h=[],p=[],b=new Map;for(const N of t){const[j,C]=N.split("-").map(Number),D=yv(n,j,C);for(const $ of D)p.some(U=>U.gz===$.gz&&U.startYear===$.startYear)||p.push($);const P=xE(j,C);for(const $ of P){const U=`${$.useYear}:${$.gz}`;b.has(U)||b.set(U,{year:$.useYear,month:C,gz:$.gz})}}const[y,S]=t[0].split("-").map(Number),_=xE(y,S),k=_[_.length-1]?.gz??Le(st(new Date(y,5,15,12,0,0,0))||"");if(p.length>0){const N={:p.map(j=>{const C={dae:j.gz,se:k||null,wol:null,il:null};return Po({scope:"",infoText:`${j.age} ${j.gz} (${j.startYear}~${j.endYear})`,gz:j.gz,chain:C,natal:r,relationArgs:{daewoon:j.gz,sewoon:k||void 0,wolwoon:void 0,ilwoon:void 0},basis:i,unified:a,dayEl:o,baseDayStem:l,show:u,shinsalSettings:d,harmonyMode:"scope",includeBasicInfo:!0})})};h.push(Xn("",N))}const A=Array.from(b.keys()).sort((N,j)=>{const C=Number(N.split(":")[0]),D=Number(j.split(":")[0]);return C-D});if(A.length>0){const N={:A.map(j=>{const C=b.get(j),D=C.year,P=C.gz,U=UF(n,D)[0]??p[0]??null,Y={dae:U?U.gz:null,se:P,wol:null,il:null};return Po({scope:"",infoText:`${D} ${P}`,gz:P,chain:Y,natal:r,relationArgs:{daewoon:U?.gz,sewoon:P,wolwoon:void 0,ilwoon:void 0},basis:i,unified:a,dayEl:o,baseDayStem:l,show:u,shinsalSettings:d,harmonyMode:"scope",includeBasicInfo:!0})})};h.push(Xn("",N))}for(const N of t){const[j,C]=N.split("-").map(Number),D=yv(n,j,C),P=D.length>0?D[0]:null,U=IAe(j,C).map(Y=>{const K=St(Y.repDate),F=Le(K||""),z={dae:P?P.gz:null,se:Y.se.gz||null,wol:F,il:null};return Po({scope:"",infoText:`${Y.label} ${F}  ${Y.se.useYear} ${Y.se.gz}`,gz:F,chain:z,natal:r,relationArgs:{daewoon:P?.gz,sewoon:Y.se.gz||void 0,wolwoon:F,ilwoon:void 0},basis:i,unified:a,dayEl:o,baseDayStem:l,show:u,shinsalSettings:d,harmonyMode:"scope",includeBasicInfo:!0})});h.push(Xn(` ${N}`,{:U}))}return h.filter(N=>N.trim().length>0)}function uk(e){const t=e.getFullYear(),n=An(t,315),r=e<n?t-1:t,i=st(new Date(r,5,15,12,0,0,0)),a=Le(i||"");return{useYear:r,gz:a}}function BAe(e){const{ilDays:t,daeList:n,natal:r,basis:i,unified:a,dayEl:o,baseDayStem:l,show:u,shinsalSettings:d,dayBoundaryRule:h}=e;if(t.length===0)return[];const p=[],[b,y,S]=t[0].split("-").map(Number),_=new Date(b,y-1,S,4,0),k=new Date(b,y-1,S,12,0);if(!Number.isNaN(_.getTime())){const A=yv(n,b,y),N=A.length>0?A[0]:null,j=[];for(const K of t){const[F,z,W]=K.split("-").map(Number),X=new Date(F,z-1,W,12,0),Z=new Date(F,z-1,W,4,0);if(Number.isNaN(X.getTime())||Number.isNaN(Z.getTime()))continue;const G=uk(X),J=Le(St(X)||""),te=Le(mt(Z,h)||""),ce=`${G.useYear}|${G.gz}|${J}`;j.some(oe=>oe.key===ce)||j.push({key:ce,repDateStr:K,seYear:G.useYear,seGZ:G.gz,wolGZ:J,ilGZ:te})}const C=Le(mt(_,h)||""),D=Le(St(k)||""),P=uk(k),$=j.length>0?j:[{key:`${P.useYear}|${P.gz}|${D}`,repDateStr:t[0],seYear:P.useYear,seGZ:P.gz,wolGZ:D,ilGZ:C}];if(N){const K=$[$.length-1],F={dae:N.gz,se:K.seGZ,wol:K.wolGZ,il:K.ilGZ},z=Po({scope:"",infoText:`${N.age} ${N.gz} (${N.startYear}~${N.endYear})`,gz:N.gz,chain:F,natal:r,relationArgs:{daewoon:N.gz,sewoon:K.seGZ,wolwoon:K.wolGZ,ilwoon:K.ilGZ},basis:i,unified:a,dayEl:o,baseDayStem:l,show:u,shinsalSettings:d,harmonyMode:"scope",includeBasicInfo:!0});p.push(Xn("",z))}const U=$.filter(K=>K.seGZ.trim().length>0).map(K=>{const F={dae:N?N.gz:null,se:K.seGZ,wol:K.wolGZ,il:K.ilGZ};return Po({scope:"",infoText:`${K.seYear} ${K.seGZ} (${K.repDateStr} )`,gz:K.seGZ,chain:F,natal:r,relationArgs:{daewoon:N?.gz,sewoon:K.seGZ,wolwoon:K.wolGZ,ilwoon:K.ilGZ},basis:i,unified:a,dayEl:o,baseDayStem:l,show:u,shinsalSettings:d,harmonyMode:"scope",includeBasicInfo:!0})});U.length>0&&p.push(Xn("",{:U}));const Y=$.filter(K=>K.wolGZ.trim().length>0).map(K=>{const F={dae:N?N.gz:null,se:K.seGZ,wol:K.wolGZ,il:K.ilGZ};return Po({scope:"",infoText:`${K.repDateStr} ${K.wolGZ}`,gz:K.wolGZ,chain:F,natal:r,relationArgs:{daewoon:N?.gz,sewoon:K.seGZ,wolwoon:K.wolGZ,ilwoon:K.ilGZ},basis:i,unified:a,dayEl:o,baseDayStem:l,show:u,shinsalSettings:d,harmonyMode:"scope",includeBasicInfo:!0})});Y.length>0&&p.push(Xn("",{:Y}))}for(const A of t){const[N,j,C]=A.split("-").map(Number),D=new Date(N,j-1,C,4,0),P=new Date(N,j-1,C,12,0);if(Number.isNaN(D.getTime())||Number.isNaN(P.getTime()))continue;const $=yv(n,N,j),U=$.length>0?$[0]:null,K=uk(P).gz,F=St(P),z=Le(F||""),W=mt(D,h),X=Le(W||""),Z={dae:U?U.gz:null,se:K||null,wol:z,il:X},G=Po({scope:"",infoText:`${A} ${X}`,gz:X,chain:Z,natal:r,relationArgs:{daewoon:U?.gz,sewoon:K||void 0,wolwoon:z||void 0,ilwoon:X||void 0},basis:i,unified:a,dayEl:o,baseDayStem:l,show:u,shinsalSettings:d,harmonyMode:"scope",includeBasicInfo:!0});p.push(Xn(` ${A}`,{:G}))}return p.filter(A=>A.trim().length>0)}function FF(e){const{ms:t,natal:n,basis:r,includeTenGod:i,unified:a,percent:o,category:l,selectedDaeList:u,daeList:d,seYears:h,wolMonths:p,ilDays:b,topic:y,subTopic:S,timeMode:_,teacherMode:k,sections:A}=e,N=PF(t),j=Le(n[3]??""),C=!!j,D=t.mingSikType??"/",P=[Le(n[0]??""),Le(n[1]??""),Le(n[2]??""),j],$=RF(t,P),U=P[2]?.charAt(0)??"",Y=_u[U]??_u[a.dayStem]??"",K=!!i&&(A?.tenGod??!0),F=A?.twelveUnseong??!0,z=A?.twelveShinsal??!0,W=A?.shinsal??!0,X=A?.nabeum??!0,{shinsalBase:Z,shinsalEra:G,shinsalGaehwa:J}=SF.getState(),te=Z===""?P[0]?.charAt(1)??"":P[2]?.charAt(1)??"",ce=MF(t,N),oe=[` : ${t.name??""} (${ce}) : ${t.gender}`,` ${P[0]} ${P[1]} ${P[2]}`+(C?` ${P[3]}`:"")].join(`
`),B=[],{flags:V}=p7(P,a.elementScoreRaw),ie=`${l} (${o.toFixed(1)}%)  ${[` ${V..||V..||V..||V..?"":""}`,` ${V..||V..||V..||V..?"":""}`,` ${V..||V..||V..||V..?"":""}`].join("  ")}`;if(B.push(Xn("",ie)),B.push(Xn("()",Object.fromEntries(Object.entries(a.natalFixed.elementPercent100).map(([he,_e])=>[`${he}(${NF(Y,he)})`,_e])))),K&&B.push(Xn(" ( 10 100)",a.natalFixed.totalsSub)),F){const he=Object.fromEntries($.map((_e,re)=>[_e,Ho(U,(P[re]??"").charAt(1))]));B.push(Xn("()",he))}if(z){const he=Object.fromEntries($.map((_e,re)=>[_e,Go({baseBranch:te,targetBranch:(P[re]??"").charAt(1),era:G,gaehwa:J})]));B.push(Xn("()",he))}B.push(Xn("//",V));const Q=BT(TAe($,P));if(B.push(Xn("()",Q)),W){const he=ef({natal:P,daewoon:null,sewoon:null,wolwoon:null,ilwoon:null,basis:r});B.push(Xn("()",he))}if(X){const he=Object.fromEntries($.map((_e,re)=>{const Ee=P[re]??"",we=Aj(Ee);return[_e,we?{gz:Ee,nabeum:we.name,element:we.element,code:we.code}:null]}));B.push(Xn("()",he))}d.length>0&&u.length>0&&B.push(...RAe({selectedDaeList:u,daeList:d,natal:P,basis:r,unified:a,dayEl:Y,baseDayStem:U,show:{tenGod:K,twelveUnseong:F,twelveShinsal:z,shinsal:W,nabeum:X},shinsalSettings:{baseBranch:te,era:G,gaehwa:J}})),h.length>0&&B.push(...LAe({seYears:h,daeList:d,natal:P,basis:r,unified:a,dayEl:Y,baseDayStem:U,show:{tenGod:K,twelveUnseong:F,twelveShinsal:z,shinsal:W,nabeum:X},shinsalSettings:{baseBranch:te,era:G,gaehwa:J}})),p.length>0&&B.push(...$Ae({wolMonths:p,daeList:d,natal:P,basis:r,unified:a,dayEl:Y,baseDayStem:U,show:{tenGod:K,twelveUnseong:F,twelveShinsal:z,shinsal:W,nabeum:X},shinsalSettings:{baseBranch:te,era:G,gaehwa:J}})),b.length>0&&B.push(...BAe({ilDays:b,daeList:d,natal:P,basis:r,unified:a,dayEl:Y,baseDayStem:U,show:{tenGod:K,twelveUnseong:F,twelveShinsal:z,shinsal:W,nabeum:X},shinsalSettings:{baseBranch:te,era:G,gaehwa:J},dayBoundaryRule:D}));const se=EF({topic:y,subTopic:S,timeMode:_,teacherMode:k}),me=(bv(B.join(`

`))??"").toString();return{header:oe,body:me,guide:se}}function zAe(e){const{header:t,body:n,guide:r}=FF(e);return[t,"",n,"",r].join(`
`)}function Oj(e){if(!e)return null;const t=e.name||"";let n="";if(e.birthDay&&e.birthDay.length===8){const o=e.birthDay.slice(0,4),l=e.birthDay.slice(4,6),u=e.birthDay.slice(6,8);n=`${o}-${l}-${u}`}else e.birthDay&&(n=e.birthDay);let r="";if(e.birthTime&&e.birthTime.trim().length>0){const l=e.birthTime.trim().padEnd(4,"0").slice(0,4),u=l.slice(0,2),d=l.slice(2,4);r=`${u}:${d}`}let i="";e.birthPlace&&typeof e.birthPlace=="object"&&(i=e.birthPlace.name||"");const a=e.ganji||e.ganjiText||"";return{name:t,birthDate:n,birthTime:r,birthPlace:i,ganjiText:a}}function UAe(e){const{header:t,body:n}=IF(e),r=e.relationMode==="couple"?Oj(e.partnerMs??null):null,i=r?qr("  ",r):"";return[t,n,i].filter(a=>a&&a.trim().length>0).join(`

`)}function FAe(e){const{header:t,body:n}=FF(e),r=e.relationMode==="couple"?Oj(e.partnerMs??null):null,i=r?qr("  ",r):"";return[t,n,i].filter(a=>a&&a.trim().length>0).join(`

`)}function HAe(e){const t=(e??"").trim();if(!t)return"";const n=[/\r?\n-----\s*\r?\n/,/\r?\n?\s*\s*/,/\r?\n?\s*\s*/,/\r?\n##\s*\s*/,/\r?\n##\s*/,/\r?\n?###\s*/,/\r?\n?\s*\s*/,/\r?\n?\s*\s*/];let r=-1;for(const i of n){const a=t.search(i);a>=0&&(r=r<0?a:Math.min(r,a))}return r>=0?t.slice(0,r).trimEnd():t}function GAe(e){switch(e){case"analysis":return`   ,   .
`;case"mentor":return`     .
`;case"dryHumor":return`    .
`;case"softWarm":return`    .
`;default:return""}}function qAe(e){return e?`    .
`:""}function YAe(e,t){if(e!=="couple")return"";const n=Oj(t);return n?["","","[  -   ]","",`-  : ${n.name}`,`-  : ${n.birthDate}`,`-  : ${n.birthTime}`,`-  : ${n.birthPlace}`,`- ${n.ganjiText}`,"","   /  ,","      .",""].join(`
`):""}function Kd(e){return Le(e)}function KAe(e){return e[0]?.length===2&&e[1]?.length===2&&e[2]?.length===2}function g$(e){const t=Array.isArray(e)?e.slice(0,4):[];for(;t.length<4;)t.push("");return t.map((n,r)=>{const i=Le(n??"");return i||(r<=2?"--":"")})}function WAe(e,t,n){if(e)return{dae:e.dae??null,se:e.se??null,wol:e.wol??null,il:e.il??null};const r=Kd(st(t)||""),i=Kd(St(t)||""),a=Kd(mt(t,n)||"");return{dae:null,se:r||null,wol:i||null,il:a||null}}function VAe(e,t){const n=g$(e),r=g$(t);return{solarKo:n,lunarKo:r}}function wE(e,t,n){const r=[...e];return n&&(!r[3]||r[3]===""||r[3]==="--")&&t&&(r[3]=t.stem+t.branch),r}function ZAe(e,t,n){return e?"solar":t?"lunar":"solar"}function XAe(e,t,n,r,i,a,o,l){return wE(e==="lunar"?n?i:t?r:a??["","","",""]:t?r:n?i:a??["","","",""],o,l)}function JAe(e,t){const n=Number(e.birthDay?.slice(0,4)),r=Number(e.birthDay?.slice(4,6)),i=Number(e.birthDay?.slice(6,8));if(!Number.isFinite(n)||!Number.isFinite(r)||!Number.isFinite(i))return null;const a=new Date(n,r-1,i,12,4,0,0),o=Kd(st(a)||""),l=Kd(St(a)||""),u=Kd(mt(a,t)||"");return[o,l,u,""]}function QAe(e,t){return t&&e?e.stem+e.branch:""}function eje(e,t,n){const i=[...Tj(e)];return n&&t&&t.length===2&&(i[3]=t),i}function tje(e){const t=v7(e,{criteriaMode:"modern",useHarmonyOverlay:!0}),n=HT(t);return{percent:n,category:X6(n)}}function nje(e){const t=kF(e).slice(0,10),n=e.birthDay?Number(e.birthDay.slice(0,4)):0;return t.map((r,i)=>{const a=r.match(/(\d{4})\s+(\d{1,2})\s+([-]{2})\s+/),o=a?Number(a[1]):0,l=a?Number(a[2]):1,u=1,d=a?a[3]:"",h=n>0?aje(n,o):i*10;return{gz:d,age:h,startYear:o,startMonth:l,startDay:u,endYear:o+10}})}function rje(e,t){return e.filter(n=>n.id!==t).map(n=>{const r=(n.name??"").trim()||" ",i=n.birthDay?n.birthDay:"",a=i?`${r} (${i})`:r;return{id:n.id,label:a}})}function ije(e,t){if(!e)return"";if(t.length===0)return e;const n=["","-----","     ","",...t.map((r,i)=>`${i+1}. ${r}`)];return`${e}
${n.join(`
`)}`}function b$(e){return KAe(e)}function aje(e,t){return t-e+1}function oje({ms:e,natal:t,lunarPillars:n,chain:r,basis:i,includeTenGod:a=!1,canUseMultiMode:o,canUseLuckTabs:l,input:u}){const{tone:d,friendMode:h,teacherMode:p,partnerId:b,mainCategory:y,subCategory:S,relationMode:_,activeTab:k,isMultiMode:A,multiTab:N,selectedDaeIdx:j,rangeControls:C,extraQuestions:D,sections:P}=u,$=yn(It=>It.list),{date:U,setDate:Y}=Xr();w.useEffect(()=>{Y(new Date)},[e.id,Y]);const K=w.useMemo(()=>b?$.find(It=>It.id===b)??null:null,[b,$]),F=e.mingSikType??"/",z=w.useMemo(()=>U??new Date,[U]),W=w.useMemo(()=>WAe(r,z,F),[r,z,F]),X=w.useMemo(()=>l?W:{dae:null,se:null,wol:null,il:null},[l,W]),Z=bp(It=>It.manualHour),G=!e.birthTime||e.birthTime===""||!/^\d{4}$/.test(e.birthTime??""),{solarKo:J,lunarKo:te}=w.useMemo(()=>VAe(t,n),[t,n]),ce=w.useMemo(()=>wE(J,Z,G),[J,Z,G]),oe=w.useMemo(()=>wE(te,Z,G),[te,Z,G]),B=w.useMemo(()=>JAe(e,F),[e,F]),V=b$(ce),ie=b$(oe),Q=ZAe(V,ie),se=w.useMemo(()=>XAe(Q,V,ie,ce,oe,B,Z,G),[Q,V,ie,ce,oe,B,Z,G]),me=w.useMemo(()=>G&&Z?Z.stem+Z.branch:se[3]||"",[Z,se,G]),he=QAe(Z,G),_e=w.useMemo(()=>eje(e,he,G),[e,he,G]),re=l?k:"",Ee=y==="love"||y==="compat",le=Ee&&_==="couple"?K??null:null,Ue=Ee?_:void 0,Fe=w.useMemo(()=>Wv({natal:_e,tab:re,chain:X,hourKey:me}),[_e,re,X,me]),{percent:Ne,category:Pe}=w.useMemo(()=>tje(_e),[_e]),Ge=w.useMemo(()=>nje(e),[e]),Oe=w.useMemo(()=>rje($??[],e.id),[$,e.id]),Me=w.useMemo(()=>j.map(It=>Ge[It]).filter(It=>!!It),[j,Ge]),Be=w.useMemo(()=>N===""?C.seYearsList:[],[N,C.seYearsList]),lt=w.useMemo(()=>N===""?C.wolMonthsList:[],[N,C.wolMonthsList]),ue=w.useMemo(()=>N===""?C.ilDaysList:[],[N,C.ilDaysList]),Ce=w.useMemo(()=>e?PAe({ms:e,natal:_e,chain:X,basis:i,tab:re,unified:Fe,percent:Ne,category:Pe,topic:y,subTopic:S,relationMode:_,teacherMode:p,sections:P}):"",[e,i,a,re,X,Fe,Ne,Pe,_e,y,S,_,le,p,P]),ze=w.useMemo(()=>!e||!A||!o?"":zAe({ms:e,natal:_e,basis:i,includeTenGod:a,unified:Fe,percent:Ne,category:Pe,selectedDaeList:Me,daeList:Ge,seYears:Be,wolMonths:lt,ilDays:ue,topic:y,subTopic:S,timeMode:"multi",teacherMode:p,sections:P}),[e,A,o,Be,Me,Ge,lt,ue,_e,i,a,Fe,Ne,Pe,y,S,Ue,le,p,h,P]),it=w.useMemo(()=>YAe(_,K),[_,K]),Et=A?ze:Ce,pt=w.useMemo(()=>GAe(d),[d]),Qt=w.useMemo(()=>qAe(h),[h]),$r=w.useMemo(()=>Et||it?`${Et}${it}
${pt}${Qt}`:"",[pt,Qt,Et,it]),Br=w.useMemo(()=>ije($r,D),[$r,D]),Zi=w.useMemo(()=>e?A?FAe({ms:e,natal:_e,basis:i,includeTenGod:a,unified:Fe,percent:Ne,category:Pe,selectedDaeList:Me,daeList:Ge,seYears:Be,wolMonths:lt,ilDays:ue,topic:y,subTopic:S,timeMode:"multi",relationMode:Ue,partnerMs:le,teacherMode:p,sections:P}):UAe({ms:e,natal:_e,chain:X,basis:i,tab:re,unified:Fe,percent:Ne,category:Pe,topic:y,subTopic:S,relationMode:_,partnerMs:le,teacherMode:p,sections:P}):"",[e,A,_e,i,a,Fe,Ne,Pe,Me,Ge,Be,lt,ue,y,S,_,Ue,le,p,h,P,X,re]),ao=w.useMemo(()=>{const It=Zi.trim();if(It)return It;const an=HAe(Et).trim();return an||Et.trim()},[Zi,Et]);return{date:U,setDate:Y,partnerMs:K,partnerOptions:Oe,daeList:Ge,tabForLogic:re,baseText:Et,basePrompt:$r,finalText:Br,infoOnlyText:ao,allowManualHour:G,activePillars:se}}function y$(e,t=1200){const[n,r]=w.useState(!1),i=!!(e&&e.trim().length>0),a=w.useCallback(async()=>{if(i)try{await navigator.clipboard.writeText(e),r(!0),setTimeout(()=>r(!1),t)}catch{r(!1)}},[i,e,t]);return{copied:n,canCopy:i,onCopy:a}}function sje(e,t){const{copied:n,canCopy:r,onCopy:i}=y$(e),{copied:a,canCopy:o,onCopy:l}=y$(t);return{copiedAll:n,copiedInfo:a,canCopyAll:r,canCopyInfo:o,onCopyAll:i,onCopyInfoOnly:l}}function lje({ms:e,natal:t,lunarPillars:n,chain:r,basis:i,includeTenGod:a=!1}){const o=yn(K=>K._rtUserId),u=tAe()??o??null,d=dn(K=>K.loaded),h=dn(K=>K.userId),p=dn(K=>K.plan),b=w.useMemo(()=>vm(!u||!d||h!==u?"FREE":p??null),[u,d,h,p]),y=w.useMemo(()=>e2(b),[b]),S=y.canUseMultiMode,_=y.canUseLuckTabs,k=y.canUseAllPrompts?"full":"locked",A=iAe({msId:e.id,canUseMultiMode:S,canUseLuckTabs:_}),N=oje({ms:e,natal:t,lunarPillars:n,chain:r,basis:i,includeTenGod:a,canUseMultiMode:S,canUseLuckTabs:_,input:A}),{copiedAll:j,copiedInfo:C,canCopyAll:D,canCopyInfo:P,onCopyAll:$,onCopyInfoOnly:U}=sje(N.finalText,N.infoOnlyText);function Y(K,F){A.setMainCategory(K),A.setSubCategory(F?.[0]?.key??"overview")}return{sections:A.sections,toggleSection:A.toggleSection,tone:A.tone,setTone:A.setTone,friendMode:A.friendMode,setFriendMode:A.setFriendMode,teacherMode:A.teacherMode,setTeacherMode:A.setTeacherMode,date:N.date,setDate:N.setDate,planTier:b,promptAccess:k,canUseMultiMode:S,canUseLuckTabs:_,partnerId:A.partnerId,setPartnerId:A.setPartnerId,partnerMs:N.partnerMs,mainCategory:A.mainCategory,subCategory:A.subCategory,setSubCategory:A.setSubCategory,relationMode:A.relationMode,setRelationMode:A.setRelationMode,activeTab:A.activeTab,setActiveTab:A.setActiveTab,isMultiMode:A.isMultiMode,setIsMultiMode:A.setIsMultiMode,multiTab:A.multiTab,setMultiTab:A.setMultiTab,selectedDaeIdx:A.selectedDaeIdx,handleToggleDae:A.handleToggleDae,rangeControls:A.rangeControls,partnerOptions:N.partnerOptions,daeList:N.daeList,tabForLogic:N.tabForLogic,baseText:N.baseText,basePrompt:N.basePrompt,finalText:N.finalText,infoOnlyText:N.infoOnlyText,copiedAll:j,copiedInfo:C,canCopyAll:k==="full"&&D,canCopyInfo:k==="full"&&P,onCopyAll:$,onCopyInfoOnly:U,handleMainCategoryChange:Y,setQuestionDraft:A.setQuestionDraft,questionDraft:A.questionDraft,extraQuestions:A.extraQuestions,setExtraQuestions:A.setExtraQuestions,handleAddQuestion:A.handleAddQuestion,handleRemoveQuestion:A.handleRemoveQuestion,handleClearQuestions:A.handleClearQuestions,allowManualHour:N.allowManualHour,activePillars:N.activePillars}}function cje({ms:e,natal:t,chain:n,basis:r,lunarPillars:i,includeTenGod:a=!1}){const o=lje({ms:e,natal:t,chain:n,basis:r,lunarPillars:i,includeTenGod:a}),l=d$[o.mainCategory];if(!e)return g.jsx("div",{className:"p-4 border rounded bg-neutral-50 dark:bg-neutral-900 text-sm text-neutral-500",children:"  ."});const u=o.promptAccess!=="full",d=u?"    . ":void 0,h=!u&&o.canCopyInfo,p=!u&&o.canCopyAll;return g.jsxs("div",{className:"relative rounded-xl border border-neutral-200 dark:border-neutral-800 bg-white dark:bg-neutral-900 p-3 space-y-2 desk:space-y-3",children:[u?g.jsx("div",{className:"absolute inset-0 z-10 rounded-xl bg-white/70 dark:bg-neutral-900/70 backdrop-blur-[1px] flex items-center justify-center p-4",children:g.jsxs("div",{className:"max-w-sm text-center border border-neutral-300 dark:border-neutral-700 rounded-xl bg-white dark:bg-neutral-900 px-4 py-3 shadow-sm",children:[g.jsx("div",{className:"text-lg font-semibold",children:"  "}),g.jsxs("div",{className:"text-sm text-neutral-600 dark:text-neutral-300 mt-1",children:["   /  .",g.jsx("br",{}),"    100   ! (  )"]})]})}):null,g.jsx(FTe,{}),g.jsx(HTe,{sections:o.sections,toggleSection:o.toggleSection}),g.jsx(GTe,{tone:o.tone,toneMeta:JTe,setTone:o.setTone,friendMode:o.friendMode,setFriendMode:b=>o.setFriendMode(b.target.checked),teacherMode:o.teacherMode,setTeacherMode:b=>o.setTeacherMode(b.target.checked)}),g.jsx(qTe,{mainCategory:o.mainCategory,subCategory:o.subCategory,mainCategoryMeta:eAe,currentSubList:l,onMainCategoryChange:b=>o.handleMainCategoryChange(b,d$[b]),onSubCategoryChange:o.setSubCategory}),g.jsx(YTe,{visible:o.mainCategory==="love"||o.mainCategory==="compat",relationMode:o.relationMode,setRelationMode:o.setRelationMode,partnerId:o.partnerId,setPartnerId:o.setPartnerId,partnerOptions:o.partnerOptions}),g.jsx(KTe,{isMultiMode:o.canUseMultiMode?o.isMultiMode:!1,setIsMultiMode:b=>{!o.canUseMultiMode&&b||o.setIsMultiMode(b)},canUseMultiMode:o.canUseMultiMode}),o.isMultiMode?g.jsx(VTe,{multiTab:o.multiTab,setMultiTab:o.setMultiTab,daeList:o.daeList.map(b=>({gz:b.gz,age:b.age,startYear:b.startYear,endYear:b.endYear})),selectedDaeIdx:o.selectedDaeIdx,onToggleDae:o.handleToggleDae,seStartYear:o.rangeControls.seStartYear,seEndYear:o.rangeControls.seEndYear,onSeStartChange:o.rangeControls.onSeStartChange,onSeEndChange:o.rangeControls.onSeEndChange,onSeStartBlur:o.rangeControls.onSeStartBlur,onSeEndBlur:o.rangeControls.onSeEndBlur,seYearsCount:o.rangeControls.seYearsCount,wolStartDate:o.rangeControls.wolStartYM,wolEndDate:o.rangeControls.wolEndYM,onWolStartChange:o.rangeControls.onWolStartChange,onWolEndChange:o.rangeControls.onWolEndChange,onWolStartBlur:o.rangeControls.onWolStartBlur,onWolEndBlur:o.rangeControls.onWolEndBlur,wolMonthsCount:o.rangeControls.wolMonthsCount,ilStartDate:o.rangeControls.ilStartDate,ilEndDate:o.rangeControls.ilEndDate,onIlStartChange:o.rangeControls.onIlStartChange,onIlEndChange:o.rangeControls.onIlEndChange,onIlStartBlur:o.rangeControls.onIlStartBlur,onIlEndBlur:o.rangeControls.onIlEndBlur,ilDaysCount:o.rangeControls.ilDaysCount}):g.jsx(WTe,{tabs:QTe,activeTab:o.tabForLogic,setActiveTab:b=>{!o.canUseLuckTabs&&b!==""||o.setActiveTab(b)},date:o.date,setDate:o.setDate,canUseLuckTabs:o.canUseLuckTabs}),g.jsx(ZTe,{questionDraft:o.questionDraft,onChangeDraft:b=>o.setQuestionDraft(b.target.value),onAddQuestion:o.handleAddQuestion,extraQuestions:o.extraQuestions,onClearAll:o.handleClearQuestions,onRemoveQuestion:o.handleRemoveQuestion,locked:u,lockTitle:d}),g.jsx(XTe,{value:o.finalText,lockSelection:u}),g.jsx("div",{className:"flex justify-end",children:g.jsxs("div",{className:"flex gap-2 w-full desk:w-auto",children:[g.jsx("button",{type:"button",onClick:o.onCopyInfoOnly,disabled:!h,title:h?void 0:d,className:["w-full desk:w-auto px-3 py-1 rounded-md text-xs whitespace-nowrap border",h?"cursor-pointer":"cursor-not-allowed opacity-50",o.copiedInfo?"bg-green-600 text-white border-green-600":h?"bg-orange-600 text-white dark:bg-orange-600":"bg-orange-600/70 text-white border-orange-600/50"].join(" "),children:o.copiedInfo?"":`  ${h?"":" "}`}),g.jsx("button",{type:"button",onClick:o.onCopyAll,disabled:!p,title:p?void 0:d,className:["w-full desk:w-auto px-3 py-1 rounded-md text-xs whitespace-nowrap",p?"cursor-pointer":"cursor-not-allowed opacity-50",o.copiedAll?"bg-green-600 text-white":"bg-neutral-900 text-white dark:bg-yellow-500 dark:text-black"].join(" "),children:o.copiedAll?"":`  ${p?"":" "}`})]})})]})}function uje(){const[e,t]=w.useState(null),[n,r]=w.useState(!1),[i,a]=w.useState(!1),[o]=w.useState(()=>typeof window>"u"?!1:window.location.pathname.startsWith("/admin"));return{userId:e,setUserId:t,authChecked:n,setAuthChecked:r,isLoggedIn:i,setIsLoggedIn:a,adminMode:o}}function dje(){const e=yn(r=>r.loading),t=vn(r=>r.loaded),n=dn(r=>r.loaded);return{loading:e,settingsLoaded:t,entLoaded:n}}const v$="app_session_started_at_ms",fje=7200*1e3;function hje(){const e=sessionStorage.getItem(v$),t=e?Number(e):NaN;if(!Number.isFinite(t)||t<=0){const n=Date.now();return sessionStorage.setItem(v$,String(n)),n}return t}function mje(e=Date.now()){const t=hje();return Math.max(0,e-t)}function pje(e,t=Date.now()){return mje(t)>=e}async function gje(e,t){const{data:n,error:r}=await Ie.from("user_settings_kv").select("value").eq("user_id",e).eq("setting_key",t).maybeSingle();if(r)throw r;return n?.value??null}async function bje(e,t,n){const{error:r}=await Ie.from("user_settings_kv").upsert({user_id:e,setting_key:t,value:n},{onConflict:"user_id,setting_key"});if(r)throw r}const yje=e=>typeof e=="object"&&e!==null&&!Array.isArray(e);function Bd(e){if(e===null)return"null";if(e===void 0)return"undefined";const t=typeof e;return t==="string"?JSON.stringify(e):t==="number"||t==="boolean"?String(e):Array.isArray(e)?`[${e.map(Bd).join(",")}]`:yje(e)?`{${Object.keys(e).sort().map(i=>`${JSON.stringify(i)}:${Bd(e[i])}`).join(",")}}`:e instanceof Date?`{"$date":${JSON.stringify(e.toISOString())}}`:JSON.stringify(String(e))}function vje(e,t){let n=null;return(...r)=>{n!==null&&window.clearTimeout(n),n=window.setTimeout(()=>{n=null,e(...r)},t)}}function xje(e,t){const n=t.debounceMs??400;let r=!1,i=null,a=Bd(t.select(t.store.getState()));const o=vje(async p=>{try{await bje(e,t.dbKey,p),a=Bd(p)}catch(b){console.error(`[settings] save failed key=${t.dbKey}`,b)}},n),l=p=>{r=!0;try{t.apply(p),a=Bd(p)}finally{r=!1}},u=p=>{t.validate&&!t.validate(p)||l(p)},d=async()=>{const p=await gje(e,t.dbKey);p!==null&&u(p)};i=t.store.subscribe(p=>{if(r)return;const b=t.select(p);Bd(b)!==a&&o(b)});const h=()=>{i&&i(),i=null};return{dbKey:t.dbKey,loadFromDb:d,applyRemote:u,stop:h}}function wje(e){if(typeof e!="object"||e===null)return!1;const t=e;return["twelveUnseong","twelveShinsal","shinsal","nabeum"].every(r=>typeof t[r]=="boolean")}function dk(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}function _je(e){w.useEffect(()=>{if(!e)return;const t=[];t.push(xje(e,{dbKey:"promptCopy.sections",store:gv,select:o=>o.sections,apply:o=>gv.setState({sections:o}),validate:wje,debounceMs:250})),Promise.all(t.map(o=>o.loadFromDb())).catch(o=>{console.error("[settings] initial load failed",o)});const n=[{table:"user_settings_kv",filterByUserId:!0}],r=new Map,i=(o,l,u)=>{const d=r.get(o);d&&window.clearTimeout(d);const h=window.setTimeout(()=>{r.delete(o),u()},l);r.set(o,h)},a=Ie.channel(`app-sync:${e}`);for(const o of n)a.on("postgres_changes",{event:"*",schema:"public",table:o.table,...o.filterByUserId?{filter:`user_id=eq.${e}`}:{}},l=>{if(pje(fje)){window.location.reload();return}if(o.table==="user_settings_kv"){if(!dk(l))return;const u=l.new,d=l.old,h=_=>dk(_)&&typeof _.setting_key=="string"?_.setting_key:null,p=_=>dk(_)?_.value:null,b=h(u)??h(d);if(!b)return;const y=t.find(_=>_.dbKey===b);if(!y)return;const S=typeof l.eventType=="string"?l.eventType:"";if(S==="INSERT"||S==="UPDATE"){y.applyRemote(p(u));return}y.loadFromDb();return}if(o.onChange){const u=typeof o.debounceMs=="number"?o.debounceMs:0;u>0?i(o.table,u,()=>o.onChange?.(l)):o.onChange(l)}});return a.subscribe(),()=>{for(const o of t)o.stop();for(const[,o]of r)window.clearTimeout(o);r.clear(),Ie.removeChannel(a)}},[e])}function Sje({setUserId:e,setIsLoggedIn:t,setAuthChecked:n}){w.useEffect(()=>{const r=Ie;(async()=>{const{data:o,error:l}=await r.auth.getSession();if(l){t(!1),e(null),n(!0);return}const u=o.session?.user?.id??null;t(!!o.session),e(u),n(!0)})();const{data:{subscription:a}}=r.auth.onAuthStateChange((o,l)=>{const u=l?.user?.id??null;t(!!l),e(u),n(!0),l||yn.getState().stopRealtime()});return()=>{a.unsubscribe()}},[n,t,e])}function kje(e){Sje({setUserId:e.setUserId,setIsLoggedIn:e.setIsLoggedIn,setAuthChecked:e.setAuthChecked}),_je(e.userId)}function Eje(e){const[t,n]=w.useState(()=>e.length>0?e[0].id:""),[r,i]=w.useState(!1),[a,o]=w.useState(!1),[l,u]=w.useState(null),[d,h]=w.useState(!0),[p,b]=w.useState(!1),[y,S]=w.useState(!1);return{currentId:t,setCurrentId:n,wizardOpen:r,setWizardOpen:i,showSidebar:a,setShowSidebar:o,editing:l,setEditing:u,showToday:d,setShowToday:h,showCouple:p,setShowCouple:b,openCustom:y,setOpenCustom:S}}function Tje(e){const t=Xr(i=>i.date),n=Xr(i=>i.rule),r=Eu(e);return w.useMemo(()=>{if(!e)return{dae:null,se:null,wol:null,il:null};const i=qv(r,t),a=i>=0?r[i]?.gz??null:null,o=st(t),l=St(t),u=mt(t,n);return{dae:a,se:o,wol:l,il:u}},[e,r,t,n])}const Aje=e=>typeof e=="string"&&e.length>=2,jje=e=>Array.isArray(e)&&e.length===4&&e.every(Aje);function Oje({list:e,currentId:t,settings:n,emptyMs:r}){const i=w.useMemo(()=>e.find(b=>b.id===t)??e[0],[e,t]),a=e.length>0&&!!i&&typeof i.birthDay=="string",o=a?i:r,l=w.useMemo(()=>Tj(o),[o]),u=Tje(o),d=dn(b=>b.canAddMyeongsik(e.length).ok),h=n.sinsalBase===""?"day":"year",p=n.sinsalBase===""?"day":"year";return{current:i,hasCurrent:a,msForHooks:o,natal:l,chain:u,isValidPillars:jje,canAdd:d,voidBasis:h,samjaeBasis:p}}function Nje({canAdd:e,hasCurrent:t,current:n,isLoggedIn:r,setWizardOpen:i,setOpenCustom:a,setShowSidebar:o,setShowToday:l,setShowCouple:u,setCurrentId:d,setEditing:h}){const{settings:p,saveToServer:b,loaded:y}=vn();w.useEffect(()=>{!r||!y||b()},[r,y,p,b]);const S=w.useCallback(()=>{if(!e){Dn.error("   1   .");return}i(!0)},[e,i]),_=w.useCallback(()=>{if(!e){Dn.error("   1   .");return}a(!0)},[e,a]),k=w.useCallback(D=>{d(D.id),o(!1),l(!1),u(!1);const P=new Date;P.setHours(12,0,0,0),Xr.getState().setDate(P),t&&n?.id===D.id&&(l(!1),u(!1),o(!1))},[n,t,d,o,l,u]),A=w.useCallback(D=>{h(D),d(D.id),o(!1),l(!1),u(!1)},[h,d,o,l,u]),N=w.useCallback(()=>{const D=yn.getState().list[0]?.id??"";d(D),l(!0),u(!1)},[d,l,u]),j=w.useCallback(D=>{d(D.id),l(!1),u(!1),o(!1),requestAnimationFrame(()=>i(!1))},[d,l,u,o,i]),C=w.useCallback(D=>{d(D.id),l(!1),u(!1),o(!1)},[d,l,u,o]);return{openAdd:S,openCustomModal:_,handleSidebarView:k,handleSidebarEdit:A,handleSidebarDeleteView:N,handleWizardSave:j,handleCustomSave:C}}function Cje(){return g.jsx("div",{className:"pt-16 pb-24",children:g.jsxs("div",{className:"max-w-[640px] mx-auto px-4",children:[g.jsx("div",{className:"flex items-center justify-between gap-3 mb-4",children:g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(LB,{className:"w-5 h-5 text-neutral-700 dark:text-neutral-200"}),g.jsx("h2",{className:"text-lg font-bold text-neutral-900 dark:text-neutral-100",children:"  "})]})}),g.jsxs("div",{className:"space-y-3",children:[g.jsxs("details",{className:"rounded-xl border border-neutral-200 bg-white p-4 dark:border-neutral-800 dark:bg-neutral-900/40",children:[g.jsx("summary",{className:"text-sm desk:text-base cursor-pointer select-none font-semibold text-neutral-900 dark:text-neutral-100",children:"Q.   ."}),g.jsxs("div",{className:"mt-3 text-xs desk:text-sm leading-relaxed text-neutral-700 dark:text-neutral-200",children:[g.jsxs("p",{children:["A.  ",g.jsx("b",{children:""})," ",g.jsx("b",{children:""}),"   .   ,    ."]}),g.jsxs("p",{className:"mt-2",children:[" ",g.jsx("b",{children:"*"}),"   ",g.jsx("b",{children:" "})," ",g.jsx("b",{children:"8*"}),"  ",g.jsx("b",{children:"    "}),"      ."]}),g.jsxs("p",{className:"mt-2",children:[" ",g.jsx("b",{children:" "}),"     ."]})]})]}),g.jsxs("details",{className:"rounded-xl border border-neutral-200 bg-white p-4 dark:border-neutral-800 dark:bg-neutral-900/40",children:[g.jsx("summary",{className:"text-sm desk:text-base cursor-pointer select-none font-semibold text-neutral-900 dark:text-neutral-100",children:"Q.     ."}),g.jsxs("div",{className:"mt-3 text-xs desk:text-sm leading-relaxed text-neutral-700 dark:text-neutral-200",children:[g.jsxs("p",{children:["A.    . ",g.jsx("b",{children:"*"}),", ",g.jsx("b",{children:"8*"}),"    ."]}),g.jsxs("p",{className:"mt-2",children:[" ",g.jsx("b",{children:""})," (  8   -  )   ."]}),g.jsxs("p",{className:"mt-2",children:["(    ,    ",g.jsx("b",{children:" "})," .)"]}),g.jsx("p",{className:"mt-2",children:" .    .    ,   ( )     ."})]})]}),g.jsxs("details",{className:"rounded-xl border border-neutral-200 bg-white p-4 dark:border-neutral-800 dark:bg-neutral-900/40",children:[g.jsx("summary",{className:"text-sm desk:text-base cursor-pointer select-none font-semibold text-neutral-900 dark:text-neutral-100",children:"Q.     ."}),g.jsxs("div",{className:"mt-3 text-xs desk:text-sm leading-relaxed text-neutral-700 dark:text-neutral-200",children:[g.jsx("p",{children:"A.     .         ,       ."}),g.jsx("p",{className:"mt-2",children:"    ,      ."}),g.jsxs("p",{className:"mt-2",children:["(   ",g.jsx("b",{children:" "}),"  ^^)",g.jsx("br",{}),g.jsx("a",{href:"https://5seasons.co.kr/",target:"_blank",children:g.jsx("ins",{className:"text-amber-500",children:"   !"})})]})]})]}),g.jsxs("details",{className:"rounded-xl border border-neutral-200 bg-white p-4 dark:border-neutral-800 dark:bg-neutral-900/40",children:[g.jsx("summary",{className:"text-sm desk:text-base cursor-pointer select-none font-semibold text-neutral-900 dark:text-neutral-100",children:"Q.  ''   ?"}),g.jsxs("div",{className:"mt-3 text-xs desk:text-sm leading-relaxed text-neutral-700 dark:text-neutral-200",children:[g.jsx("p",{children:"A.      ."}),g.jsx("p",{className:"mt-2",children:"          ^^"}),g.jsx("p",{className:"mt-2",children:g.jsx("a",{href:"https://yavares.tistory.com/345",target:"_blank",children:g.jsx("ins",{className:"text-amber-500",children:"  "})})})]})]})]})]})})}const HF="https://t1.daumcdn.net/kas/static/ba.min.js",Mje="//t1.daumcdn.net/kas/static/ba.min.js";let hm=null,mm=null;function GF(){return typeof window<"u"&&typeof document<"u"}function x$(e){return typeof e=="object"&&e!==null}function qF(){if(!GF())return!1;const e=window;if(!x$(e))return!1;const t=e.adfit;return x$(t)?typeof t.destroy=="function":!1}function YF(){return Array.from(document.querySelectorAll(`script[src="${HF}"], script[src="${Mje}"]`))}function KF(e){return e.getAttribute("data-adfit-scan")==="1"}function Dje(){const t=YF().filter(n=>!KF(n));if(!(t.length<=1))for(let n=1;n<t.length;n+=1){const r=t[n];r.parentNode?.removeChild(r)}}function w$(){return document.body??document.head??document.documentElement}function fk(e,t){return new Promise((n,r)=>{let i=!1;const a=()=>{e.removeEventListener("load",u),e.removeEventListener("error",d)},o=()=>{i||(i=!0,a(),n())},l=()=>{i||(i=!0,a(),r(new Error("AdFit script load failed")))},u=()=>o(),d=()=>l();e.addEventListener("load",u),e.addEventListener("error",d),window.setTimeout(()=>{qF(),o()},t)})}function _$(e){const t=document.createElement("script");return t.async=!0,t.type="text/javascript",t.charset="utf-8",t.src=HF,e?t.setAttribute("data-adfit-scan","1"):t.setAttribute("data-adfit-managed","1"),t}function _E(e){return GF()?(e?.mode??"boot")==="boot"?hm||(hm=(async()=>{if(Dje(),qF())return{inserted:!1};const r=YF().filter(a=>!KF(a))[0];if(r)return await fk(r,2500),{inserted:!1};const i=_$(!1);return w$().appendChild(i),await fk(i,4e3),{inserted:!0}})().finally(()=>{hm=null}),hm):mm||(mm=(async()=>{const n=_$(!0);w$().appendChild(n);try{return await fk(n,4e3),{inserted:!0}}finally{n.parentNode?.removeChild(n)}})().finally(()=>{mm=null}),mm):Promise.resolve({inserted:!1})}function WF({enabled:e}){return w.useEffect(()=>{e&&_E({mode:"boot"})},[e]),null}function S$(e){return typeof e=="object"&&e!==null}function Pje(e){const t=window;if(!S$(t))return;const n=t.adfit;if(!S$(n))return;const r=n.destroy;if(typeof r=="function")try{r.call(n,e)}catch{}}function lu({adUnit:e,width:t,height:n,enabled:r=!0,isVisible:i=!0,className:a,wrapperStyle:o,reserveSpace:l=!0}){const u=w.useRef(!1),d=w.useRef(!1),h=w.useMemo(()=>({...l?{width:"100%",minHeight:n,display:"flex",justifyContent:"center",alignItems:"flex-start"}:{width:"100%"},...o}),[n,l,o]);return w.useEffect(()=>{if(!r||u.current)return;u.current=!0;let p=!1;return(async()=>{try{if(await _E({mode:"boot"}),p)return}catch{}})(),()=>{p=!0}},[r]),w.useEffect(()=>{if(!r||!i||d.current)return;d.current=!0;let p=!1;return(async()=>{try{if(await _E({mode:"scan"}),p)return}catch{}})(),()=>{p=!0}},[r,i]),w.useEffect(()=>()=>{Pje(e),u.current=!1,d.current=!1},[e]),r?g.jsx("div",{className:a,style:h,children:g.jsx("div",{style:l?{width:t,height:n}:void 0,children:g.jsx("ins",{className:"kakao_ad_area",style:{display:"none"},"data-ad-unit":e,"data-ad-width":String(t),"data-ad-height":String(n)})})}):null}function VF({enabled:e,adUnit:t,width:n,height:r,showAfterScrollY:i=180,rightPx:a=16,topPx:o=120,breakpointClassName:l="hidden desk:block"}){const[u,d]=w.useState(!1),[h,p]=w.useState(!1);return w.useEffect(()=>{if(!e){d(!1),p(!1);return}p(!0);let b=0;const y=()=>{b||(b=window.requestAnimationFrame(()=>{b=0;const S=window.scrollY||0;d(S>=i)}))};return y(),window.addEventListener("scroll",y,{passive:!0}),()=>{b&&window.cancelAnimationFrame(b),window.removeEventListener("scroll",y)}},[e,i]),e?g.jsx("div",{className:l,style:{position:"fixed",right:a,top:o,zIndex:60,pointerEvents:"none",visibility:u?"visible":"hidden",opacity:u?1:0,transition:"opacity 150ms ease"},children:g.jsx("div",{style:{pointerEvents:u?"auto":"none"},children:g.jsx("div",{style:{borderRadius:12,background:"rgba(0,0,0,0.04)",backdropFilter:"blur(6px)",padding:8},children:g.jsx(lu,{enabled:h,isVisible:u,adUnit:t,width:n,height:r,wrapperStyle:{display:"flex",justifyContent:"center"}})})})}):null}function ZF(){const[e,t]=w.useState(!1),[n,r]=w.useState(!1),[i,a]=w.useState(!1),[o,l]=w.useState(!1),[u,d]=w.useState(!1);w.useEffect(()=>{document.title=" - //";const y=window.setTimeout(()=>t(!0),50),S=window.setTimeout(()=>r(!0),250),_=window.setTimeout(()=>a(!0),450);return()=>{window.clearTimeout(y),window.clearTimeout(S),window.clearTimeout(_)}},[]);const h=()=>u?!0:(fa.error(`   
  .`),!1),p=async()=>{if(!h())return;const y=`${window.location.origin}/auth/callback`;console.log("[oauth] origin =",window.location.origin),console.log("[oauth] redirectTo =",y);const{data:S,error:_}=await Ie.auth.signInWithOAuth({provider:"google",options:{redirectTo:y,skipBrowserRedirect:!0}});if(console.log("[oauth] authorize url =",S?.url),_){console.error("Google Login Error:",_),fa.error("   .");return}if(!S?.url){fa.error(" URL  .");return}window.location.assign(S.url)},b=async()=>{if(!h())return;const y=`${window.location.origin}/auth/callback`;console.log("[oauth] origin =",window.location.origin),console.log("[oauth] redirectTo =",y);const{data:S,error:_}=await Ie.auth.signInWithOAuth({provider:"kakao",options:{redirectTo:y,skipBrowserRedirect:!0}});if(console.log("[oauth] authorize url =",S?.url),_){console.error("Kakao Login Error:",_),fa.error("   .");return}if(!S?.url){fa.error(" URL  .");return}window.location.assign(S.url)};return g.jsxs("main",{className:`relative py-6 max-h-[70vh] overflow-auto bg-neutral-950 text-white transition-opacity duration-500 ${e?"opacity-100":"opacity-0"}`,children:[g.jsxs("header",{className:`transform transition-all duration-500 mb-8 ${n?"translate-y-0 opacity-100":"translate-y-4 opacity-0"} text-center max-w-[680px]`,children:[g.jsx("h1",{className:"text-3xl font-bold tracking-tight mb-2",children:""}),g.jsxs("p",{className:"text-sm text-neutral-300 leading-relaxed",children:["      /       .",g.jsx("br",{}),"   /     "]})]}),g.jsxs("section",{className:`w-full max-w-sm mx-auto rounded-2xl bg-neutral-900 p-4 shadow-xl border border-neutral-800 transition-all duration-500 ${i?"opacity-100 translate-y-0":"opacity-0 translate-y-6"}`,"aria-label":"",children:[g.jsx("h2",{className:"mb-2 text-2xl font-bold tracking-tight text-center",children:""}),g.jsxs("p",{className:"mb-5 text-sm text-neutral-400 text-center leading-relaxed",children:["  .",g.jsx("br",{}),"      "]}),g.jsx("div",{className:"mb-5 space-y-2",children:g.jsxs("label",{className:"flex items-start gap-2 text-sm text-neutral-300 cursor-pointer",children:[g.jsx("input",{type:"checkbox",checked:u,onChange:()=>d(!u),className:"mt-[2px]"}),g.jsxs("span",{children:["  .",g.jsx("button",{type:"button",onClick:()=>l(!0),className:"ml-1 underline text-orange-400 hover:text-orange-300 cursor-pointer",children:"( )"})]})]})}),g.jsxs("div",{className:"space-y-2",children:[g.jsxs("button",{type:"button",onClick:p,disabled:!u,"aria-disabled":!u,className:`flex items-center justify-center gap-3 w-full py-3 rounded-lg font-medium text-sm shadow transition-all 
              ${u?"bg-white text-black hover:bg-neutral-100 active:scale-[0.98] cursor-pointer":"bg-neutral-700 text-neutral-400 cursor-not-allowed"}`,children:[g.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",alt:"Google Logo",className:"w-5 h-5 opacity-90"}),g.jsx("span",{children:"  "})]}),g.jsxs("button",{type:"button",onClick:b,disabled:!u,"aria-disabled":!u,className:`flex items-center justify-center gap-3 w-full py-3 rounded-lg font-medium text-sm shadow transition-all
              ${u?"bg-[#FEE500] text-black hover:brightness-95 active:scale-[0.98] cursor-pointer":"bg-neutral-700 text-neutral-400 cursor-not-allowed"}`,children:[g.jsx("img",{src:"/icons/KakaoTalk_logo.png",alt:"KakaoTalk",className:"h-5"}),g.jsx("span",{children:" "})]})]}),g.jsxs("div",{className:"mt-6 border-t border-neutral-800 pt-4 text-xs text-neutral-400 leading-relaxed",children:[g.jsx("p",{className:"font-semibold text-neutral-300 mb-2",children:"    "}),g.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[g.jsx("li",{children:" /  "}),g.jsx("li",{children:"    "}),g.jsx("li",{children:"/ (  )"})]}),g.jsx("p",{className:"mt-3 text-[11px] text-neutral-500",children:": unique950318@gmail.com   "})]})]}),g.jsx(o5,{position:"top-center",toastOptions:{duration:2e3}}),o&&g.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:()=>l(!1),children:g.jsxs("div",{className:"w-full max-w-lg bg-white dark:bg-neutral-900 text-neutral-900 dark:text-neutral-200 p-6 rounded-xl shadow-xl relative animate-fadeInUp",onClick:y=>y.stopPropagation(),children:[g.jsx("h3",{className:"text-lg font-bold mb-4",children:" "}),g.jsxs("div",{className:"text-sm leading-relaxed max-h-[60vh] overflow-y-auto pr-2",children:[g.jsx("p",{className:"mb-2",children:"( )     ,      ."}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"1.  "}),g.jsxs("p",{className:"mb-2",children:["   ,  (,  )",g.jsx("br",{}),"       ( ,  )"]}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"2.  "}),g.jsxs("p",{className:"mb-2",children:["     ",g.jsx("br",{}),"      ",g.jsx("br",{}),"      "]}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"3.  "}),g.jsxs("p",{className:"mb-2",children:["     ",g.jsx("br",{}),"           "]}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"4. 3 "}),g.jsx("p",{className:"mb-2",children:"          ."}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"5. "}),g.jsx("p",{className:"mb-2",children:" Supabase        ."}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"6. "}),g.jsx("p",{children:"   : unique950318@gmail.com"})]}),g.jsx("button",{onClick:()=>l(!1),className:"mt-4 w-full py-2 bg-neutral-900 dark:bg-neutral-700 text-white rounded-lg hover:bg-neutral-800 transition cursor-pointer",children:""})]})})]})}function Rje(e){switch(e){case"PERSIST_SAVE":return"    !";case"ADD_LIMIT":return"    !";case"HEADER":return"";default:return""}}function Lje(){const e=_s(i=>i.open),t=_s(i=>i.reason),n=_s(i=>i.close),r=w.useMemo(()=>Rje(t),[t]);return w.useEffect(()=>{if(!e)return;const i=a=>{a.key==="Escape"&&n()};return window.addEventListener("keydown",i),()=>window.removeEventListener("keydown",i)},[e,n]),w.useEffect(()=>{const{data:i}=Ie.auth.onAuthStateChange((a,o)=>{o?.user&&(dn.getState().loadFromServer(),vn.getState().loadFromServer(),yn.getState().loadFromServer(),_s.getState().close())});return()=>i.subscription.unsubscribe()},[]),e?g.jsx("div",{className:"fixed inset-0 z-[9999] bg-black/60 flex items-center justify-center p-4",onClick:n,role:"dialog","aria-modal":"true",children:g.jsxs("div",{className:"w-full max-w-[520px] rounded-2xl bg-white dark:bg-neutral-950 border border-neutral-200 dark:border-neutral-800 shadow-xl overflow-hidden",onClick:i=>i.stopPropagation(),children:[g.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-b border-neutral-200 dark:border-neutral-800",children:[g.jsx("div",{className:"text-sm font-semibold text-neutral-900 dark:text-neutral-100",children:r}),g.jsx("button",{type:"button",onClick:n,className:`w-8 h-8 rounded-full flex items-center justify-center
                       bg-neutral-100 hover:bg-neutral-200
                       dark:bg-neutral-800 dark:hover:bg-neutral-700
                       text-neutral-700 dark:text-neutral-200 cursor-pointer`,"aria-label":"",title:"",children:""})]}),g.jsx("div",{className:"p-4",children:g.jsx(ZF,{})})]})}):null}function Ije(){const e=_s(t=>t.openWith);return g.jsx("div",{className:"max-w-[640px] mx-auto px-3",children:g.jsxs("div",{className:`rounded-xl border border-amber-300/60 bg-amber-50 text-amber-950
                      dark:border-amber-500/30 dark:bg-amber-950/30 dark:text-amber-100
                      shadow-sm px-4 py-3 flex items-center justify-between gap-3`,children:[g.jsxs("div",{className:"min-w-0",children:[g.jsx("div",{className:"text-sm font-semibold truncate",children:"   "}),g.jsx("div",{className:"text-xs opacity-90 mt-0.5 leading-relaxed",children:" /   ."})]}),g.jsxs("button",{type:"button",onClick:()=>e("PERSIST_SAVE"),className:`shrink-0 inline-flex items-center gap-1.5
                     px-3 py-2 rounded-lg text-xs font-semibold
                     bg-amber-500 hover:bg-amber-600 text-white
                     border border-amber-600/30
                     cursor-pointer`,"aria-label":"",title:"",children:[g.jsx(IB,{size:16}),""]})]})})}const Nj="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js";let pm=null;function Cj(){return typeof window<"u"&&typeof document<"u"}function XF(){return Cj()?Array.from(document.querySelectorAll('script[src*="pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"]')):[]}function JF(e,t){const n=`client=${encodeURIComponent(t)}`;return e.includes(n)||e.includes(`client=${t}`)}function k$(e){return XF().some(n=>{const r=n.getAttribute("src")??"";return r.includes(Nj)&&JF(r,e)})}function hk(e){const t=XF().filter(n=>{const r=n.getAttribute("src")??"";return r.includes(Nj)&&JF(r,e)});if(!(t.length<=1))for(let n=1;n<t.length;n+=1){const r=t[n];r.parentNode&&r.parentNode.removeChild(r)}}function $je(e){const t=document.createElement("script");return t.async=!0,t.src=`${Nj}?client=${encodeURIComponent(e)}`,t.crossOrigin="anonymous",t}function Bje(e){return new Promise((t,n)=>{const r=()=>t(),i=()=>n(new Error("AdSense script failed to load"));e.addEventListener("load",r,{once:!0}),e.addEventListener("error",i,{once:!0})})}function zje(e){return typeof e!="object"||e===null||!("push"in e)?!1:typeof e.push=="function"}async function E$(e){if(Cj()){if(k$(e)){hk(e);return}if(pm)return pm;pm=(async()=>{if(k$(e)){hk(e);return}const t=$je(e);document.head.appendChild(t),await Bje(t),hk(e)})();try{await pm}finally{pm=null}}}function Uje(e={}){if(!Cj())return;const t=window.adsbygoogle;if(Array.isArray(t)){t.push(e);return}if(zje(t)){t.push(e);return}const n=[];n.push(e),window.adsbygoogle=n}function Fje({enabled:e,isVisible:t,clientId:n,slotId:r,width:i,height:a,testMode:o=!1}){const l=w.useRef(!1),u=w.useRef(null);return w.useEffect(()=>{l.current=!1},[n,r,i,a]),w.useEffect(()=>{e&&E$(n).catch(()=>{})},[e,n]),w.useEffect(()=>{if(!e||!t||l.current)return;let d=!0;return(async()=>{try{if(await Promise.resolve(),!d||(await E$(n),!d))return;Uje({}),l.current=!0}catch{console.log()}})(),()=>{d=!1}},[e,t,n]),e?g.jsx("ins",{ref:u,className:"adsbygoogle",style:{display:"inline-block",width:i,height:a},"data-ad-client":n,"data-ad-slot":r,...o?{"data-adtest":"on"}:{}}):null}function QF({enabled:e,clientId:t,slotId:n,width:r,height:i,showAfterScrollY:a=180,side:o="left",sidePx:l=16,topPx:u=120,breakpointClassName:d="hidden desk:block"}){const[h,p]=w.useState(!1),[b,y]=w.useState(!1);return w.useEffect(()=>{if(!e){p(!1),y(!1);return}y(!0);let S=0;const _=()=>{S||(S=window.requestAnimationFrame(()=>{S=0;const k=window.scrollY||0;p(k>=a)}))};return _(),window.addEventListener("scroll",_,{passive:!0}),()=>{S&&window.cancelAnimationFrame(S),window.removeEventListener("scroll",_)}},[e,a]),e?g.jsx("div",{className:d,style:{position:"fixed",...o==="left"?{left:l}:{right:l},top:u,zIndex:60,pointerEvents:"none",visibility:h?"visible":"hidden",opacity:h?1:0,transition:"opacity 150ms ease"},children:g.jsx("div",{style:{pointerEvents:h?"auto":"none"},children:g.jsx("div",{style:{borderRadius:12,background:"rgba(0,0,0,0.04)",backdropFilter:"blur(6px)",padding:8},children:g.jsx("div",{style:{display:"flex",justifyContent:"center"},children:g.jsx(Fje,{enabled:b,isVisible:h,clientId:t,slotId:n,width:r,height:i})})})})}):null}const eH="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js";function T$(e){return typeof e=="object"&&e!==null&&"push"in e&&typeof e.push=="function"}function Hje(){return document.querySelector(`script[src^="${eH}"]`)}async function A$(e){Hje()||await new Promise((n,r)=>{const i=document.createElement("script");i.async=!0,i.src=`${eH}?client=${encodeURIComponent(e)}`,i.crossOrigin="anonymous",i.onload=()=>n(),i.onerror=()=>r(new Error("Failed to load adsbygoogle.js")),document.head.appendChild(i)})}function Gje(){const e=window.adsbygoogle;if(T$(e)){e.push({});return}window.adsbygoogle||(window.adsbygoogle=[]);const t=window.adsbygoogle;T$(t)&&t.push({})}function qje({enabled:e,clientId:t,slotId:n,heightPx:r=100,maxWidthPx:i=750,marginTopPx:a=0,fullWidthResponsive:o=!0,pushOnVisible:l=!0,testMode:u=!1,className:d,style:h}){const p=w.useRef(null),b=w.useRef(!1),y=w.useMemo(()=>`adsense_banner:${t}:${n}`,[t,n]),[S,_]=w.useState(!l);return w.useEffect(()=>{b.current=!1},[t,n]),w.useEffect(()=>{e&&A$(t).catch(()=>{})},[e,t]),w.useEffect(()=>{if(!e||!l)return;const k=p.current;if(!k)return;const A=new IntersectionObserver(N=>{const j=N[0];j&&j.isIntersecting&&_(!0)},{root:null,threshold:.05});return A.observe(k),()=>A.disconnect()},[e,l]),w.useEffect(()=>{if(!e||!S||b.current)return;let k=!0;return(async()=>{try{if(await A$(t),!k||(await Promise.resolve(),!k))return;Gje(),b.current=!0}catch{}})(),()=>{k=!1}},[e,S,t]),e?g.jsx("div",{style:{width:"100%",display:"flex",justifyContent:"center",marginTop:a,...h},className:d,children:g.jsx("ins",{ref:p,className:"adsbygoogle",style:{display:"block",width:"100%",height:`${r}px`,maxWidth:`${i}px`},"data-ad-client":t,"data-ad-slot":n,"data-full-width-responsive":o?"true":"false",...u?{"data-adtest":"on"}:{}},y)}):null}const Yje="DAN-GW4jrUdfiXklZ12U",Kje="DAN-CeRuC0yKzSAs5Gju",Wje="DAN-G16gewnPhZou1D9y",Vje="DAN-rdKe9ZODmrZR4hho",Zje="DAN-INfSKh1pW2cEtWNu",Xje={id:"empty",name:"",birthDay:"",birthTime:"",gender:"",birthPlace:{name:"",lat:0,lon:0},relationship:"",memo:"",folder:"",mingSikType:"/",DayChangeRule:"",favorite:!1,dateObj:new Date,corrected:new Date,correctedLocal:"",dayStem:"",ganjiText:"",ganji:"",calendarType:"solar",dir:"forward"};function kb(){const e=uje();kje(e);const t=dje();return e.authChecked?e.isLoggedIn&&e.adminMode?g.jsx(vF,{}):e.isLoggedIn&&(!t.entLoaded||!t.settingsLoaded)?g.jsx("main",{className:"flex min-h-screen items-center justify-center",children:g.jsx("p",{className:"text-sm text-neutral-500",children:"  ..."})}):g.jsx(Jje,{isLoggedIn:e.isLoggedIn}):g.jsx("main",{className:"flex min-h-screen items-center justify-center",children:g.jsx("p",{className:"text-sm text-neutral-500",children:"   ..."})})}function Jje({isLoggedIn:e}){const{list:t}=yn(),n=vn(D=>D.settings),r=Eje(t),i=Oje({list:t,currentId:r.currentId,settings:n,emptyMs:Xje}),a=Nje({canAdd:i.canAdd,hasCurrent:i.hasCurrent,current:i.current,isLoggedIn:e,setWizardOpen:r.setWizardOpen,setOpenCustom:r.setOpenCustom,setShowSidebar:r.setShowSidebar,setShowToday:r.setShowToday,setShowCouple:r.setShowCouple,setCurrentId:r.setCurrentId,setEditing:r.setEditing}),[o,l]=w.useState(!1),[u,d]=w.useState(0);w.useEffect(()=>{r.editing&&l(!1)},[r.editing]);const h=dn(D=>D.shouldShowAdsNow()),p=i.hasCurrent&&!r.showToday&&!r.showCouple&&!o&&!r.wizardOpen&&!r.editing,b=r.showToday||!i.hasCurrent&&!r.showCouple&&!o&&!r.wizardOpen&&!r.editing,y=!e&&i.hasCurrent&&p,S=!e&&!p,[_,k]=w.useState(!1),A=(...D)=>{l(!1),r.setShowToday(!1),r.setShowCouple(!1),a.handleSidebarView(...D)},N=()=>{r.setOpenCustom(!1),d(D=>D+1)},j=D=>{l(!1),a.handleCustomSave(D)},C=D=>{l(!1),a.handleWizardSave(D)};return g.jsxs("div",{className:"min-h-screen pb-16",children:[g.jsx(WF,{enabled:h}),h&&p&&g.jsx(QF,{enabled:!0,clientId:"ca-pub-4729618898154189",slotId:"1598573921",width:160,height:600,showAfterScrollY:0,side:"left",sidePx:16,topPx:60,breakpointClassName:"hidden desk:block"}),g.jsx("div",{className:"hidden desk:block",children:g.jsx(VF,{enabled:h,adUnit:Zje,width:160,height:600,showAfterScrollY:0,rightPx:16,topPx:60,breakpointClassName:"hidden desk:block"})}),g.jsx(kde,{isLoggedIn:e,onOpenSidebar:()=>r.setShowSidebar(!0),onAddNew:a.openAdd,onOpenCustom:a.openCustomModal}),g.jsx(Lje,{}),_&&g.jsxs("div",{className:"fixed inset-0 z-[210] bg-black/70 flex items-center justify-center",children:[g.jsx("div",{className:"w-full max-w-[420px] max-h-[90dvh] overflow-auto rounded-2xl",children:g.jsx(ZF,{})}),g.jsx("button",{className:"fixed top-4 right-4 text-white text-2xl",onClick:()=>k(!1),children:""})]}),g.jsx(UTe,{open:r.openCustom,onClose:N,onSave:j},u),g.jsx(o5,{position:"top-center"}),g.jsx(ffe,{open:r.showSidebar,onClose:()=>r.setShowSidebar(!1),onView:A,onAddNew:a.openAdd,onEdit:a.handleSidebarEdit,onDeleteView:a.handleSidebarDeleteView,isLoggedIn:e}),S&&g.jsx("div",{className:"absolute w-full left-0 mt-14 desk:mt-16 text-xs desk:text-base text-amber-500 dark:text-amber-400 text-center",children:" .    ."}),o&&g.jsx(Cje,{}),b&&g.jsx($Z,{}),r.wizardOpen&&g.jsxs(g.Fragment,{children:[g.jsx("div",{id:"wizard-dim",className:"bg-black opacity-80 fixed inset-0 w-full min-h-full z-99"}),g.jsx("div",{className:"absolute inset-0 transition-opacity duration-150 opacity-100 z-100",children:g.jsx("div",{className:"py-6 pb-16 overflow-y-auto min-h-[100dvh]",children:g.jsx(Lre,{onSave:C,onClose:()=>r.setWizardOpen(!1)})})})]}),i.hasCurrent&&!r.showToday&&!r.showCouple&&!o&&g.jsxs("div",{className:"pt-16",children:[y&&g.jsx("div",{children:g.jsx(Ije,{})}),g.jsx("div",{className:"pb-4",children:g.jsx(Woe,{data:i.current,hourTable:i.current?.mingSikType??"/"})}),g.jsx(gTe,{ms:i.current}),g.jsx("div",{children:g.jsx(Sde,{data:i.current})}),h&&p&&n.showPromptBox&&g.jsx("div",{className:"max-w-[760px] mx-auto px-3 mt-6 mb-2",children:g.jsx(qje,{enabled:!0,clientId:"ca-pub-4729618898154189",slotId:"3868873416",heightPx:100,maxWidthPx:750,marginTopPx:10,fullWidthResponsive:!0,testMode:!1})}),n.showPromptBox&&g.jsx("div",{className:"max-w-[640px] mx-auto mb-8",children:g.jsx(cje,{ms:i.current,natal:i.isValidPillars(i.natal)?i.natal:[],chain:i.chain,basis:{voidBasis:i.voidBasis,samjaeBasis:i.samjaeBasis},includeTenGod:!0,lunarPillars:[]})}),h&&p&&g.jsxs("div",{className:"max-w-[760px] mx-auto px-3 pb-6",children:[g.jsx("div",{className:"hidden md:block",children:g.jsx(lu,{enabled:!0,adUnit:Vje,width:728,height:90})}),g.jsx("div",{className:"md:hidden",children:g.jsx(lu,{enabled:!0,adUnit:Wje,width:320,height:50})})]})]}),r.showCouple&&g.jsx("div",{className:"pt-18 pb-4",children:g.jsx(hTe,{people:t})}),h&&!p&&g.jsxs("div",{className:"max-w-[760px] mx-auto px-3 mt-1 mb-2",children:[g.jsx("div",{className:"hidden md:block",children:g.jsx(lu,{enabled:!0,adUnit:Kje,width:728,height:90})}),g.jsx("div",{className:"md:hidden",children:g.jsx(lu,{enabled:!0,adUnit:Yje,width:320,height:50})})]}),r.editing&&g.jsx("div",{className:"fixed inset-0 z-55 flex items-center justify-center bg-black/60",children:g.jsx("div",{className:"overflow-auto bg-white dark:bg-neutral-950 p-4 rounded-xl w-full max-h-[90dvh] max-w-xl shadow-lg",children:g.jsx(Afe,{item:r.editing,onClose:()=>r.setEditing(null)})})}),g.jsx(Dde,{onShowToday:()=>{l(!1),r.setShowToday(!0),r.setShowCouple(!1)},onShowCouple:()=>{l(!1),r.setShowCouple(!0),r.setShowToday(!1)},onShowFaq:()=>{r.setShowToday(!1),r.setShowCouple(!1),l(!0)}}),g.jsx(mTe,{})]})}function Qje(){const e=_i(),[t,n]=w.useState(null),[r,i]=w.useState(null);return w.useEffect(()=>{if(e.pathname!=="/impersonate")return;const a=new URLSearchParams(e.search);n(a.get("userId")),i(a.get("myeongsikId"))},[e.pathname,e.search]),g.jsxs("div",{className:"p-4 text-white",children:[g.jsx("div",{className:"text-sm text-neutral-400",children:"Impersonate"}),g.jsxs("div",{className:"mt-2",children:["userId: ",t??"(none)"]}),g.jsxs("div",{className:"mt-1",children:["myeongsikId: ",r??"(none)"]})]})}function eOe(){const e=_i(),t=gf(),[n,r]=w.useState("  ...");return w.useEffect(()=>{(async()=>{try{const a=new URLSearchParams(e.search),o=a.get("error"),l=a.get("error_description");if(o){r(` : ${decodeURIComponent(l??o)}`);return}const u=a.get("code");if(!u){r(" code . (redirectTo/PKCE  )");return}const{error:d}=await Ie.auth.exchangeCodeForSession(u);if(d){r(`  : ${d.message}`);return}t("/",{replace:!0})}catch(a){r(a instanceof Error?a.message:"   ")}})()},[e.search,t]),g.jsx("main",{className:"min-h-screen flex items-center justify-center",children:g.jsx("p",{className:"text-sm text-neutral-500",children:n})})}function tOe({yinYang:e,changing:t,onClick:n,showChanging:r=!0}){return g.jsxs("button",{type:"button",onClick:n,className:["w-full select-none","rounded-xl px-3 py-2","border border-neutral-200 dark:border-neutral-800","bg-white hover:bg-neutral-50 dark:bg-neutral-900 dark:hover:bg-neutral-800","flex items-center gap-3",n?"cursor-pointer":"cursor-default"].join(" "),title:n?"  (6789)":void 0,children:[g.jsx("div",{className:"flex-1",children:e===1?g.jsx("div",{className:"h-3 rounded bg-neutral-900 dark:bg-neutral-100"}):g.jsxs("div",{className:"flex gap-2",children:[g.jsx("div",{className:"h-3 flex-1 rounded bg-neutral-900 dark:bg-neutral-100"}),g.jsx("div",{className:"h-3 flex-1 rounded bg-neutral-900 dark:bg-neutral-100"})]})}),r&&g.jsx("div",{className:"w-8 text-right text-sm font-medium text-neutral-700 dark:text-neutral-300",children:t?"":""})]})}function nOe(e){return e===6||e===9}function Lx(e){return e===7||e===9?1:0}function tH(e){return e===6?1:e===9?0:Lx(e)}function rOe(e){return e===6?7:e===7?8:e===8?9:6}function nH(e){let t=2166136261;for(let n=0;n<e.length;n+=1)t^=e.charCodeAt(n),t=t+(t<<1)+(t<<4)+(t<<7)+(t<<8)+(t<<24)>>>0;return t>>>0}function rH(e){let t=e>>>0;return()=>{t+=1831565813;let n=t;return n=Math.imul(n^n>>>15,n|1),n^=n+Math.imul(n^n>>>7,n|61),((n^n>>>14)>>>0)/4294967296}}function iH(){return new Date().toISOString()}function aH(){const e=Date.now().toString(36),t=Math.floor(Math.random()*1e9).toString(36);return`ich_${e}_${t}`}function oH(e){const t=[];for(let n=0;n<e.length;n+=1)nOe(e[n].value)&&t.push(n+1);return t}function SE(e){const t=()=>e()<.5?2:3,n=t(),r=t(),i=t(),a=n+r+i;return{value:a===6?6:a===7?7:a===8?8:9,source:"coin",coins:[n,r,i]}}function iOe(e){return e?[e.myeongSikId?`id=${e.myeongSikId}`:"",e.pillarsText?`pillars=${e.pillarsText}`:"",e.birthISO?`birth=${e.birthISO}`:"",e.tz?`tz=${e.tz}`:"",e.luck?.daeun?`daeun=${e.luck.daeun}`:"",e.luck?.seun?`seun=${e.luck.seun}`:"",e.luck?.wolun?`wolun=${e.luck.wolun}`:"",e.luck?.ilun?`ilun=${e.luck.ilun}`:""].filter(Boolean).join("|"):""}const Mj=["","","","","","","","","",""],Dj=["","","","","","","","","","","",""];function Hl(e,t){const n=e%t;return n<0?n+t:n}function Pj(e){const t=e-1984,n=Mj[Hl(t,10)],r=Dj[Hl(t,12)];return`${n}${r}`}function sH(e,t){if(t<1||t>12)throw new Error(`month must be 1..12, got ${t}`);const n=Hl(e-1984,10),r=n===0||n===5?2:n===1||n===6?4:n===2||n===7?6:n===3||n===8?8:0,i=t===1?1:t===12?0:t,a=Hl(i-2,12),o=Hl(r+a,10),l=Mj[o],u=Dj[i];return`${l}${u}`}function aOe(e){const t=e.getFullYear(),n=e.getMonth(),r=e.getDate(),i=Date.UTC(1984,0,31),a=Date.UTC(t,n,r),o=Math.floor((a-i)/864e5),l=Hl(o,60),u=Mj[Hl(l,10)],d=Dj[Hl(l,12)];return`${u}${d}`}function qa(e){const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return`${t}-${n}-${r}`}function ha(e){const t=/^(\d{4})-(\d{2})-(\d{2})$/.exec(e);if(!t)return null;const n=Number(t[1]),r=Number(t[2])-1,i=Number(t[3]);if(![n,r,i].every(o=>Number.isFinite(o)))return null;const a=new Date(n,r,i,9,0,0,0);return a.getFullYear()!==n||a.getMonth()!==r||a.getDate()!==i?null:a}function lH(e,t){const n=new Date(e);return n.setDate(n.getDate()+t),n}function Su(){const e=new Date;return new Date(e.getFullYear(),e.getMonth(),e.getDate(),9,0,0,0)}function Rj(e,t){return e.getTime()<=t.getTime()?{start:e,end:t}:{start:t,end:e}}function j$(e,t){return e*100+t}function oOe(e,t){const n=[];let r=e.getFullYear(),i=e.getMonth()+1;const a=j$(t.getFullYear(),t.getMonth()+1);for(;j$(r,i)<=a;)n.push({y:r,m1:i}),i+=1,i===13&&(i=1,r+=1);return n}function sOe(e,t=10){const n=ha(e.startYMD)??Su(),r=ha(e.endYMD)??Su(),{start:i,end:a}=Rj(n,r),o=i.getFullYear(),l=a.getFullYear(),u=[];for(let d=o;d<=l&&!(u.length>=t);d+=1){const h=new Date(d,5,15,9,0,0,0);u.push({year:d,refDateYMD:qa(h),seun:Pj(d)})}return u}function lOe(e,t=12,n=!1){const r=ha(e.startYMD)??Su(),i=ha(e.endYMD)??Su(),{start:a,end:o}=Rj(r,i),l=oOe(a,o),u=[];for(const d of l){if(u.length>=t)break;if(n&&d.m1===1)continue;const h=new Date(d.y,d.m1-1,15,9,0,0,0),p=new Date(d.y,d.m1-1,15,12,0,0,0),b=st(p)||Pj(d.y),y=St(p)||sH(d.y,d.m1);u.push({year:d.y,month:d.m1,refDateYMD:qa(h),seun:b,wolun:y})}return u}function cOe(e,t=7){const n=ha(e.startYMD)??Su(),r=ha(e.endYMD)??Su(),{start:i,end:a}=Rj(n,r),o=[];let l=new Date(i);for(;l.getTime()<=a.getTime()&&!(o.length>=t);){const u=l.getFullYear(),d=l.getMonth()+1,h=new Date(u,d-1,l.getDate(),12,0,0,0),p=st(h)||Pj(u),b=St(h)||sH(u,d);o.push({dateYMD:qa(l),seun:p,wolun:b,ilun:aOe(l)}),l=lH(l,1)}return o}function cH(e,t){const n=ha(t.startYMD)??Su();if(e==="seun")return new Date(n.getFullYear(),5,15,9,0,0,0);if(e==="wolun"){const r=n.getFullYear(),i=n.getMonth()+1;return new Date(r,i-1,15,9,0,0,0)}return new Date(n.getFullYear(),n.getMonth(),n.getDate(),9,0,0,0)}function mk(e,t){const n=cH(e,t),r=qa(n);return e==="seun"?{tab:e,baseDateYMD:r,seun:sOe(t,10),wolun:[],ilun:[]}:e==="wolun"?{tab:e,baseDateYMD:r,seun:[],wolun:lOe(t,12,!1),ilun:[]}:{tab:e,baseDateYMD:r,seun:[],wolun:[],ilun:cOe(t,7)}}function uH(e){return e===7||e===9?1:0}const Ta={:{key:"",ko:"",hanja:"",symbolHanja:"",bitsBottomUp:"111",element:"",naJiaUpperTopDown:["","",""],naJiaLowerTopDown:["","",""]},:{key:"",ko:"",hanja:"",symbolHanja:"",bitsBottomUp:"110",element:"",naJiaUpperTopDown:["","",""],naJiaLowerTopDown:["","",""]},:{key:"",ko:"",hanja:"",symbolHanja:"",bitsBottomUp:"101",element:"",naJiaUpperTopDown:["","",""],naJiaLowerTopDown:["","",""]},:{key:"",ko:"",hanja:"",symbolHanja:"",bitsBottomUp:"100",element:"",naJiaUpperTopDown:["","",""],naJiaLowerTopDown:["","",""]},:{key:"",ko:"",hanja:"",symbolHanja:"",bitsBottomUp:"011",element:"",naJiaUpperTopDown:["","",""],naJiaLowerTopDown:["","",""]},:{key:"",ko:"",hanja:"",symbolHanja:"",bitsBottomUp:"010",element:"",naJiaUpperTopDown:["","",""],naJiaLowerTopDown:["","",""]},:{key:"",ko:"",hanja:"",symbolHanja:"",bitsBottomUp:"001",element:"",naJiaUpperTopDown:["","",""],naJiaLowerTopDown:["","",""]},:{key:"",ko:"",hanja:"",symbolHanja:"",bitsBottomUp:"000",element:"",naJiaUpperTopDown:["","",""],naJiaLowerTopDown:["","",""]}},uOe=[{n:1,ko:"",nameHanja:"",upper:"",lower:""},{n:2,ko:"",nameHanja:"",upper:"",lower:""},{n:3,ko:"",nameHanja:"",upper:"",lower:""},{n:4,ko:"",nameHanja:"",upper:"",lower:""},{n:5,ko:"",nameHanja:"",upper:"",lower:""},{n:6,ko:"",nameHanja:"",upper:"",lower:""},{n:7,ko:"",nameHanja:"",upper:"",lower:""},{n:8,ko:"",nameHanja:"",upper:"",lower:""},{n:9,ko:"",nameHanja:"",upper:"",lower:""},{n:10,ko:"",nameHanja:"",upper:"",lower:""},{n:11,ko:"",nameHanja:"",upper:"",lower:""},{n:12,ko:"",nameHanja:"",upper:"",lower:""},{n:13,ko:"",nameHanja:"",upper:"",lower:""},{n:14,ko:"",nameHanja:"",upper:"",lower:""},{n:15,ko:"",nameHanja:"",upper:"",lower:""},{n:16,ko:"",nameHanja:"",upper:"",lower:""},{n:17,ko:"",nameHanja:"",upper:"",lower:""},{n:18,ko:"",nameHanja:"",upper:"",lower:""},{n:19,ko:"",nameHanja:"",upper:"",lower:""},{n:20,ko:"",nameHanja:"",upper:"",lower:""},{n:21,ko:"",nameHanja:"",upper:"",lower:""},{n:22,ko:"",nameHanja:"",upper:"",lower:""},{n:23,ko:"",nameHanja:"",upper:"",lower:""},{n:24,ko:"",nameHanja:"",upper:"",lower:""},{n:25,ko:"",nameHanja:"",upper:"",lower:""},{n:26,ko:"",nameHanja:"",upper:"",lower:""},{n:27,ko:"",nameHanja:"",upper:"",lower:""},{n:28,ko:"",nameHanja:"",upper:"",lower:""},{n:29,ko:"",nameHanja:"",upper:"",lower:""},{n:30,ko:"",nameHanja:"",upper:"",lower:""},{n:31,ko:"",nameHanja:"",upper:"",lower:""},{n:32,ko:"",nameHanja:"",upper:"",lower:""},{n:33,ko:"",nameHanja:"",upper:"",lower:""},{n:34,ko:"",nameHanja:"",upper:"",lower:""},{n:35,ko:"",nameHanja:"",upper:"",lower:""},{n:36,ko:"",nameHanja:"",upper:"",lower:""},{n:37,ko:"",nameHanja:"",upper:"",lower:""},{n:38,ko:"",nameHanja:"",upper:"",lower:""},{n:39,ko:"",nameHanja:"",upper:"",lower:""},{n:40,ko:"",nameHanja:"",upper:"",lower:""},{n:41,ko:"",nameHanja:"",upper:"",lower:""},{n:42,ko:"",nameHanja:"",upper:"",lower:""},{n:43,ko:"",nameHanja:"",upper:"",lower:""},{n:44,ko:"",nameHanja:"",upper:"",lower:""},{n:45,ko:"",nameHanja:"",upper:"",lower:""},{n:46,ko:"",nameHanja:"",upper:"",lower:""},{n:47,ko:"",nameHanja:"",upper:"",lower:""},{n:48,ko:"",nameHanja:"",upper:"",lower:""},{n:49,ko:"",nameHanja:"",upper:"",lower:""},{n:50,ko:"",nameHanja:"",upper:"",lower:""},{n:51,ko:"",nameHanja:"",upper:"",lower:""},{n:52,ko:"",nameHanja:"",upper:"",lower:""},{n:53,ko:"",nameHanja:"",upper:"",lower:""},{n:54,ko:"",nameHanja:"",upper:"",lower:""},{n:55,ko:"",nameHanja:"",upper:"",lower:""},{n:56,ko:"",nameHanja:"",upper:"",lower:""},{n:57,ko:"",nameHanja:"",upper:"",lower:""},{n:58,ko:"",nameHanja:"",upper:"",lower:""},{n:59,ko:"",nameHanja:"",upper:"",lower:""},{n:60,ko:"",nameHanja:"",upper:"",lower:""},{n:61,ko:"",nameHanja:"",upper:"",lower:""},{n:62,ko:"",nameHanja:"",upper:"",lower:""},{n:63,ko:"",nameHanja:"",upper:"",lower:""},{n:64,ko:"",nameHanja:"",upper:"",lower:""}];function vv(e){const t=Object.keys(Ta);for(const n of t)if(Ta[n].bitsBottomUp===e)return n;return null}function dOe(e,t){return`${Ta[t].bitsBottomUp}${Ta[e].bitsBottomUp}`}const fOe=(()=>{const e={};for(const t of uOe){const n=Ta[t.upper],r=Ta[t.lower],i=dOe(t.upper,t.lower);e[i]={number:t.n,titleKo:t.ko,nameHanja:t.nameHanja,titleHanja:`${n.symbolHanja}${r.symbolHanja}${t.nameHanja}`,upperKo:n.ko,lowerKo:r.ko,upperHanja:n.hanja,lowerHanja:r.hanja,upperSymbolHanja:n.symbolHanja,lowerSymbolHanja:r.symbolHanja,bitsBottomUp:i}}return e})();function Lj(e){const t=e.join(""),n=fOe[t];if(n)return n;const r=t.slice(0,3),i=t.slice(3,6),a=vv(r),o=vv(i),l=a?Ta[a]:null,u=o?Ta[o]:null;return{number:void 0,titleKo:"",nameHanja:"",titleHanja:u&&l?`${u.symbolHanja}${l.symbolHanja}`:"",upperKo:u?.ko,lowerKo:l?.ko,upperHanja:u?.hanja,lowerHanja:l?.hanja,upperSymbolHanja:u?.symbolHanja,lowerSymbolHanja:l?.symbolHanja,bitsBottomUp:t}}function kE(e){const t=e.map(n=>uH(n.value));return Lj(t)}const O$={:[1,44,33,12,20,23,35,14],:[29,60,3,63,49,55,36,7],:[52,22,26,41,38,10,61,53],:[51,16,40,32,46,48,28,17],:[57,9,37,42,25,21,27,18],:[30,56,50,64,4,59,6,13],:[2,24,19,11,34,43,5,8],:[58,47,45,31,39,15,62,54]};function hOe(e){return e===0?"pure":e===1?"1":e===2?"2":e===3?"3":e===4?"4":e===5?"5":e===6?"youhun":"guihun"}function mOe(e){return e==="pure"?6:e==="1"?1:e==="2"?2:e==="3"?3:e==="4"?4:e==="5"?5:e==="youhun"?4:3}function pOe(e){return(e+2)%6+1}function gOe(e){return e===""||e===""?"":e===""||e===""?"":e===""||e===""||e===""||e===""?"":e===""||e===""?"":e===""||e===""?"":null}function N$(e,t){return e===""&&t===""||e===""&&t===""||e===""&&t===""||e===""&&t===""||e===""&&t===""}function C$(e,t){return e===""&&t===""||e===""&&t===""||e===""&&t===""||e===""&&t===""||e===""&&t===""}function bOe(e,t){return t===e?"":N$(t,e)?"":N$(e,t)?"":C$(t,e)?"":C$(e,t)?"":""}function yOe(e){const t=Object.keys(O$);for(const n of t){const r=O$[n].indexOf(e);if(r>=0)return{palace:n,stage:hOe(r)}}return null}function vOe(e){const t=e.join(""),n=t.slice(0,3),r=t.slice(3,6),i=vv(n),a=vv(r);if(!i||!a)return[];const o=Ta[i],u=Ta[a].naJiaUpperTopDown,d=o.naJiaLowerTopDown;return[...u,...d]}function EE(e){const t=e.map(S=>uH(S.value)),n=Lj(t),r=typeof n.number=="number"?n.number:null,i=vOe(t),a=r?yOe(r):null,o=a?.palace??null,l=o?Ta[o].element:null,u=a?.stage??"pure",d=mOe(u),h=pOe(d),p=7-d,b=7-h,y=[];if(i.length===6&&l)for(const S of i){const _=gOe(S);if(!_){y.push("");continue}y.push(bOe(l,_))}return{leftTopDown:y.length?y:[],rightTopDown:i.length?i:[],markers:[{text:"",atLineTopDown:p},{text:"",atLineTopDown:b}],palace:o?{key:o,element:Ta[o].element,stage:u}:void 0}}function pk(e){const t=rH(nH(e)),n=[];for(let r=0;r<6;r+=1)n.push(SE(t));return n}function gk(e,t,n,r,i){return{id:aH(),kind:"iching_sixyao",createdAtISO:iH(),question:e,seedTextUsed:t,linesBottomUp:n,changingLines:oH(n),baseBitsBottomUp:n.map(a=>Lx(a.value)),changedBitsBottomUp:n.map(a=>tH(a.value)),saju:r??void 0,viewMeta:i}}function xOe(e){const{periodTab:t,seunPayload:n,wolunPayload:r,ilunPayload:i,questionText:a,sajuSeedPart:o,saju:l,viewMeta:u}=e,d=[];return t==="seun"&&n?.seun?.length&&n.seun.forEach(h=>{const p=` ${h.year} (${h.seun}`,b=`${a}::${h.refDateYMD}`,y=o?`${b}::SAJU::${o}`:b,S=pk(y),_=gk(a,y,S,l,u);d.push({key:`seun-${h.year}`,title:p,dateYMD:h.refDateYMD,record:_})}),t==="wolun"&&r?.wolun?.length&&r.wolun.forEach(h=>{const p=String(h.month).padStart(2,"0"),b=` ${h.year}-${p} (${h.seun} ${h.wolun}`,y=`${a}::${h.refDateYMD}`,S=o?`${y}::SAJU::${o}`:y,_=pk(S),k=gk(a,S,_,l,u);d.push({key:`wolun-${h.year}-${p}`,title:b,dateYMD:h.refDateYMD,record:k})}),t==="ilun"&&i?.ilun?.length&&i.ilun.forEach(h=>{const p=` ${h.dateYMD} (${h.seun} ${h.wolun} ${h.ilun}`,b=`${a}::${h.dateYMD}`,y=o?`${b}::SAJU::${o}`:b,S=pk(y),_=gk(a,y,S,l,u);d.push({key:`ilun-${h.dateYMD}`,title:p,dateYMD:h.dateYMD,record:_})}),d}function wOe(e){if(!e)return"  ";const t=[e.name?`: ${e.name}`:"",e.gender?`: ${e.gender}`:"",e.pillarsText?`: ${e.pillarsText}`:""].filter(Boolean);return t.length?t.join(`
`):"  "}function _Oe(e,t){if(!e||!e.luck)return e;const{daeun:n,seun:r,wolun:i,ilun:a}=e.luck;return{...e,luck:t==="seun"?{daeun:n,seun:r}:t==="wolun"?{daeun:n,seun:r,wolun:i}:{daeun:n,seun:r,wolun:i,ilun:a}}}function SOe(e){const{selectedCardText:t,ready:n,periodCards:r,finalQuestion:i,question:a,baseBits:o,changedBits:l,changingIndexes:u,lineValues:d,lines:h,saju:p,periodTab:b}=e,y=(i.trim()||a.trim()).trim(),S=y||"( )";if(t&&t.trim())return[` : ${S}`,"",t.trim()].join(`
`);if(!n&&r.length===0)return"";const _=o.join(""),k=l.join(""),A=u.length?u.join(", "):"",N=d.join(", "),j=kE(h),C=Lj(l),D=typeof j.number=="number"?String(j.number):"",P=j.titleKo||"",$=j.titleHanja||"?",U=j.nameHanja||"?",Y=j.upperKo&&j.lowerKo?`${j.upperKo}/${j.lowerKo}`:"",K=j.upperHanja&&j.lowerHanja?`${j.upperHanja}/${j.lowerHanja}`:"",F=typeof C.number=="number"?String(C.number):"",z=C.upperKo&&C.lowerKo?`${C.upperKo}/${C.lowerKo}`:"",W=C.upperHanja&&C.lowerHanja?`${C.upperHanja}/${C.lowerHanja}`:"",X=EE(h),Z=X.leftTopDown.length?X.leftTopDown.join(" "):"()",G=X.rightTopDown.length?X.rightTopDown.join(" "):"()",J=X.markers.length?X.markers.map(ie=>`${ie.text}${ie.atLineTopDown}`).join(", "):"()",te=wOe(p),ce=r.length>0?[" (  )",...r.flatMap((ie,Q)=>{const se=kE(ie.record.linesBottomUp),me=EE(ie.record.linesBottomUp),he=ie.record.baseBitsBottomUp.join(""),_e=ie.record.changedBitsBottomUp.join(""),re=ie.record.changingLines.length?ie.record.changingLines.join(", "):"",Ee=ie.record.linesBottomUp.map(Pe=>Pe.value).join(", "),we=se.titleKo||"",le=typeof se.number=="number"?String(se.number):"",Ue=me.leftTopDown.length?me.leftTopDown.join(" "):"()",Fe=me.rightTopDown.length?me.rightTopDown.join(" "):"()",Ne=me.markers.length?me.markers.map(Pe=>`${Pe.text}${Pe.atLineTopDown}`).join(", "):"()";return[`${Q+1}. ${ie.title}`,`-  /: ${le}  ${we}`,`-  (): ${he}`,`-  (): ${_e}`,`- : ${re}`,`- (): ${Ee}`,`- (): ${Ue}`,`- (): ${Fe}`,`- ///: ${Ne}`]}),""]:[],oe=n&&h.length===6?[" ()",`-  : ${D}`,`- (): ${P}`,`- (): ${$} (${U})`,`- / : ${Y} (${K})`,""," ()",`-  : ${F}`,`- / : ${z} (${W})`,""," ",`-  (): ${_}`,`-  (): ${k}`,`- : ${A}`,`- (): ${N}`,`- (): ${Z}`,`- (): ${G}`,`- ///: ${J}`,""]:[" ","- /   ",""],B=n&&r.length===0,V=B?_Oe(p??null,b):null;return[" / .        .","",`: ${S}`,"",...oe," ",te,"",...B?["(JSON)",JSON.stringify(V??{},null,2),""]:[],"",...ce,"","-     ","-        ","-    "].join(`
`)}const M$=[`1.  () 

 
 ()	( ,  : ,  : ) (() )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () +  + ()
4() - () + ()
3() - () +  + ()
2() - () +  + ()
() - () + ()`,`2.  () 

 
 ()	( ,  : ,  : ) (() )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () + () -  
4() - () +  + ()
3() - () +  + ()
2() - () + ()
() - () +  + ()`,`3.  

  
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () +  + ()
4() - () + ()
3() - () +  + ()
2() - () +  + ()
() - () + ()`,`4.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () + ()
5() - () +  + ()
4() - () +  + ()
3() - () + ()
2() - () +  + ()
() - () +  + ()`,`5.  

 
 ()	( ,  : ,  : ) (: )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () + ()
4() - () +  + ()
3() - () +  + ()
2() - () + ()
() - () +  + ()`,`6.  

 
 ()	( ,  : ,  : ) (: )

 = 
 = 
 = 
 = 

() - () + ()
5() - () + ()
4() - () +  +  + ()
3() - () + ()
2() - () + ()
() - () +  +  + ()`,`7.  

 
 ()	( ,  : ,  : ) (: )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () + ()
4() - () +  + ()
3() - () +  + ()
2() - () + ()
() - () +  + ()`,`8.  

 
 ()	( ,  : ,  : ) (: )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () + ()
4() - () +  + ()
3() - () +  + ()
2() - () + ()
() - () +  + ()`,`9.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () + ()
5() - () + ()
4() - () +  +  + ()
3() - () + ()
2() - () + ()
() - () +  +  + () -  `,`10.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () +  + ()
4() - () + ()
3() - () +  + ()
2() - () +  + ()
() - () + ()`,`11.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () +  + ()
4() - () + ()
3() - () +  + ()
2() - () +  + () -  
() - () + ()`,`12.  () 

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () + () -  
4() - () +  + ()
3() - () +  + ()
2() - () + ()
() - () +  + ()`,`13.  

 
 ()	( ,  : ,  : ) (: )

 = 
 = 
 = 
 = 

() - () +  +  + ()
5() - () + ()
4() - () + ()
3() - () +  +  + ()
2() - () + ()
() - () + ()`,`14.  

 
 ()	( ,  : ,  : ) (: )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () +  + ()
4() - () + ()
3() - () +  + ()
2() - () +  + () -  
() - () + ()`,`15.  

 
 ()	( ,  : (),  : )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () +  + ()
4() - () + ()
3() - () +  + ()
2() - () +  + ()
() - () + ()`,`16.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () + ()
5() - () +  + ()
4() - () +  + () -  
3() - () + ()
2() - () +  + ()
() - () +  + ()`,`17.  

 
 ()	( ,  : ,  : ) (: )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () +  + ()
4() - () + ()
3() - () +  + ()
2() - () +  + ()
() - () + ()`,`18.  

  
 ()	( ,  : ,  : ) (: )

 = 
 = 
 = 
 = 

() - () +  + () -  
5() - () + ()
4() - () +  + ()
3() - () +  + ()
2() - () + ()
() - () +  + ()`,`19.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () + ()
5() - () +  + ()
4() - () +  + () -  
3() - () + () -  
2() - () +  + ()
() - () +  + ()`,`20.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () + ()
5() - () +  + ()
4() - () +  + ()
3() - () + ()
2() - () +  + ()
() - () +  + ()`,`21.  

  
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () + ()
5() - () +  +  + ()
4() - () + ()
3() - () + ()
2() - () +  +  + ()
() - () + ()`,`22.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () + ()
5() - () + ()
4() - () +  +  + ()
3() - () + ()
2() - () + ()
() - () +  +  + ()`,`23.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () + ()
5() - () +  + ()
4() - () +  + () -  
3() - () + ()
2() - () +  + ()
() - () +  + ()`,`24.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () + ()
5() - () + ()
4() - () +  +  + ()
3() - () + ()
2() - () + ()
() - () +  +  + () -  `,`25.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () + ()
5() - () + ()
4() - () +  +  + ()
3() - () + ()
2() - () + ()
() - () +  +  + ()`,`26.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () +  + ()
4() - () + ()
3() - () +  + ()
2() - () +  + ()
() - () + ()`,`27.  

 
 ()	( ,  : ,  : ) (: )

 = 
 = 
 = 
 = 

() - () + ()
5() - () +  + ()
4() - () +  + ()
3() - () + ()
2() - () +  + ()
() - () +  + ()`,`28.  

 
 ()	( ,  : ,  : ) (: )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () + ()
4() - () +  + ()
3() - () +  + ()
2() - () + ()
() - () +  + ()`,`29.  () (() ) 

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () + ()
4() - () +  + ()
3() - () +  + ()
2() - () + ()
() - () +  + ()`,`30.  () (() ) 

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () +  +  + () -  
5() - () + ()
4() - () + ()
3() - () +  +  + ()
2() - () + ()
() - () + ()`,`31.  

 
 ()	( ,  : (),  : )

 = 
 = 
 = 
 = 

() - () +  +  + ()
5() - () + ()
4() - () + ()
3() - () +  +  + ()
2() - () + ()
() - () + ()`,`32.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () + ()
4() - () +  + ()
3() - () +  + ()
2() - () + ()
() - () +  + ()`,`33.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () + ()
5() - () +  + ()
4() - () +  + ()
3() - () + ()
2() - () +  + ()
() - () +  + ()`,`34.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () + ()
5() - () + ()
4() - () +  +  + ()
3() - () + ()
2() - () + ()
() - () +  +  + ()`,`35.  

 
 ()	( ,  : ,  : ) (: )

 = 
 = 
 = 
 = 

() - () + ()
5() - () + ()
4() - () +  +  + ()
3() - () + () -  
2() - () + ()
() - () +  +  + ()`,`36.  

  
 ()	( ,  : ,  : ) (: )

 = 
 = 
 = 
 = 

() - () + () -  
5() - () +  + ()
4() - () +  + ()
3() - () + ()
2() - () +  + ()
() - () +  + ()`,`37.  
 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () + ()
5() - () +  +  + ()
4() - () + ()
3() - () + ()
2() - () +  +  + ()
() - () + ()`,`38.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () + ()
5() - () + ()
4() - () +  +  + ()
3() - () + ()
2() - () + () -  
() - () +  +  + ()`,`39.  

 
 ()	( ,  : (),  : )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () + ()
4() - () +  + ()
3() - () +  + ()
2() - () + ()
() - () +  + ()`,`40.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () + ()
5() - () +  +  + ()
4() - () + ()
3() - () + ()
2() - () +  +  + ()
() - () + ()`,`41.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () +  + ()
4() - () + ()
3() - () +  + ()
2() - () +  + ()
() - () + ()`,`42.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () +  + ()
4() - () + ()
3() - () +  + ()
2() - () +  + ()
() - () + ()`,`43.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () + ()
5() - () +  + ()
4() - () +  + ()
3() - () + () -  
2() - () +  + ()
() - () +  + ()`,`44.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () + ()
5() - () +  + ()
4() - () +  + () -  
3() - () + ()
2() - () +  + ()
() - () +  + ()`,`45.  () 

 
 ()	( ,  : (),  : )

 = 
 = 
 = 
 = 

() - () +  + () -  
5() - () +  + ()
4() - () + ()
3() - () +  + ()
2() - () +  + ()
() - () + () -  `,`46.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () + () -  
5() - () +  + ()
4() - () +  + ()
3() - () + () -  
2() - () +  + ()
() - () +  + ()`,`47.  

 
 ()	( ,  : (),  : )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () + ()
4() - () +  + ()
3() - () +  + () -  
2() - () + ()
() - () +  + ()`,`48.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () + ()
5() - () +  +  + ()
4() - () + ()
3() - () + ()
2() - () +  +  + ()
() - () + ()`,`49.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () + ()
4() - () +  + ()
3() - () +  + ()
2() - () + ()
() - () +  + () -  `,`50.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () +  + ()
4() - () + ()
3() - () +  + ()
2() - () +  + ()
() - () + () -  `,`51.  () (() )  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () +  + ()
4() - () + ()
3() - () +  + ()
2() - () +  + ()
() - () + ()`,`52. () (() ) 

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () +  +  + ()
5() - () + ()
4() - () + ()
3() - () +  +  + ()
2() - () + ()
() - () + ()`,`53.  

 
 ()	( ,  : ,  : ) (: )

 = 
 = 
 = 
 = 

() - () +  +  + ()
5() - () + ()
4() - () + ()
3() - () +  +  + ()
2() - () + ()
() - () + ()`,`54.  

 
 ()	( ,  : (),  : ) (: )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () +  + () -  
4() - () + ()
3() - () +  + ()
2() - () +  + ()
() - () + ()`,`55.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () +  + () -  
5() - () +  + ()
4() - () + ()
3() - () +  + ()
2() - () +  + ()
() - () + ()`,`56.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () + ()
5() - () +  + ()
4() - () +  + ()
3() - () + ()
2() - () +  + ()
() - () +  + ()`,`57.  () (() ) 

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () + () -  
4() - () +  + ()
3() - () +  + ()
2() - () + ()
() - () +  + ()`,`58.  () (() ) 

 
 ()	( ,  : (),  : )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () +  + ()
4() - () + () -  
3() - () +  + ()
2() - () +  + ()
() - () + ()`,`59.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () +  + ()
4() - () + ()
3() - () +  + ()
2() - () +  + () -  
() - () + ()`,`60.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () +  + () -  
5() - () + ()
4() - () +  + ()
3() - () +  + ()
2() - () + ()
() - () +  + ()`,`61.  

 
 ()	( ,  : ,  : ) (: )

 = 
 = 
 = 
 = 

() - () + ()
5() - () +  + ()
4() - () +  + ()
3() - () + ()
2() - () +  + ()
() - () +  + ()`,`62.  

 
 ()	( ,  : (),  : ) (: )

 = 
 = 
 = 
 = 

() - () + ()
5() - () + ()
4() - () +  +  + ()
3() - () + ()
2() - () + ()
() - () +  +  + ()`,`63.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () +  +  + ()
5() - () + ()
4() - () + ()
3() - () +  +  + ()
2() - () + ()
() - () + ()`,`64.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () + ()
4() - () +  + ()
3() - () +  + ()
2() - () + ()
() - () +  + ()`];function kOe({saju:e,viewMeta:t,initialQuestion:n="",onBaseDateChange:r}){const[i,a]=w.useState(n),[o,l]=w.useState(""),[u,d]=w.useState("all"),[h,p]=w.useState("seun"),[b,y]=w.useState(()=>{const De=new Date,nt=new Date(De.getFullYear(),0,1,9,0,0,0),Dt=new Date(De.getFullYear()+9,11,31,9,0,0,0);return{startYMD:qa(nt),endYMD:qa(Dt)}}),[S,_]=w.useState(()=>{const De=new Date,nt=new Date(De.getFullYear(),De.getMonth(),1,9,0,0,0),Dt=new Date(nt);return Dt.setMonth(Dt.getMonth()+11),{startYMD:qa(nt),endYMD:qa(Dt)}}),[k,A]=w.useState(()=>{const De=new Date,nt=new Date(De.getFullYear(),De.getMonth(),De.getDate(),9,0,0,0),Dt=lH(nt,6);return{startYMD:qa(nt),endYMD:qa(Dt)}}),[N,j]=w.useState([]),[C,D]=w.useState(null),[P,$]=w.useState([]),[U,Y]=w.useState(!1),[K,F]=w.useState(!1),[z,W]=w.useState(null),X=w.useRef(null),Z=w.useRef(null),G=w.useRef(null);w.useEffect(()=>{a(n),l(n)},[n]),w.useEffect(()=>{$([])},[h,b.startYMD,b.endYMD,S.startYMD,S.endYMD,k.startYMD,k.endYMD]),w.useEffect(()=>{if(!z)return;const De=window.setTimeout(()=>W(null),2200);return()=>window.clearTimeout(De)},[z]);const J=w.useMemo(()=>{const De=ha(b.startYMD);if(De&&De.getMonth()===0){const nt=new Date(De.getFullYear(),1,1,9,0,0,0);return{...b,startYMD:qa(nt)}}return b},[b]),te=h,ce=w.useMemo(()=>te?cH(te,te==="seun"?J:te==="wolun"?S:k):new Date,[te,k,J,S]);w.useEffect(()=>{r&&r(ce??null)},[ce,r]);const oe=w.useMemo(()=>iOe(e),[e]),B=w.useMemo(()=>`${o.trim()}::${ce.toISOString()}`,[ce,o]),V=w.useMemo(()=>oe?`${B}::SAJU::${oe}`:B,[B,oe]),ie=w.useMemo(()=>{const De=nH(V);return rH(De)},[V]),Q=w.useMemo(()=>h==="seun"?mk("seun",J):null,[h,J]),se=w.useMemo(()=>h==="wolun"?mk("wolun",S):null,[h,S]),me=w.useMemo(()=>h==="ilun"?mk("ilun",k):null,[h,k]),he=w.useMemo(()=>{const De=ha(b.startYMD);return De?String(De.getFullYear()):""},[b.startYMD]),_e=w.useMemo(()=>{const De=ha(b.endYMD);return De?String(De.getFullYear()):""},[b.endYMD]),re=w.useMemo(()=>{const De=ha(S.startYMD);if(!De)return"";const nt=String(De.getMonth()+1).padStart(2,"0");return`${De.getFullYear()}-${nt}`},[S.startYMD]),Ee=w.useMemo(()=>{const De=ha(S.endYMD);if(!De)return"";const nt=String(De.getMonth()+1).padStart(2,"0");return`${De.getFullYear()}-${nt}`},[S.endYMD]),we=w.useMemo(()=>{if(h==="seun"){const De=Q?.seun[0];return De?` ${De.year} - ${De.seun}`:""}if(h==="wolun"){const De=se?.wolun[0];if(!De)return"";const nt=String(De.month).padStart(2,"0");return` ${De.year}-${nt} - ${De.seun} ${De.wolun}`}if(h==="ilun"){const De=me?.ilun[0];return De?` ${De.dateYMD} - ${De.seun} ${De.wolun} ${De.ilun}`:""}return""},[h,Q,se,me]),le=w.useCallback((De,nt,Dt)=>{De(br=>({...br,[nt]:Dt}))},[]),Ue=w.useCallback((De,nt)=>{if(!nt)return;const Dt=Number(nt);if(!Number.isFinite(Dt))return;const br=Math.trunc(Dt);y(ei=>({...ei,[De]:`${br}-06-15`}))},[]),Fe=w.useCallback((De,nt)=>{if(!nt)return;const Dt=/^(\d{4})-(\d{2})$/.exec(nt);Dt&&_(br=>({...br,[De]:`${Dt[1]}-${Dt[2]}-15`}))},[]),Ne=N.length===6,Pe=w.useMemo(()=>N.map(De=>Lx(De.value)),[N]),Ge=w.useMemo(()=>N.map(De=>tH(De.value)),[N]),Oe=w.useMemo(()=>oH(N),[N]),Me=w.useMemo(()=>N.map(De=>De.value),[N]),Be=N.length>0||!!C,lt=P.length>0,ue=o.trim().length>0,Ce=!ue||K||lt||Ne,ze=!ue||U||Be||lt||K,it=w.useCallback(()=>{window.setTimeout(()=>{X.current?.scrollIntoView({behavior:"smooth",block:"start"})},50)},[]),Et=w.useCallback(()=>{window.setTimeout(()=>{Z.current?.scrollIntoView({behavior:"smooth",block:"start"})},50)},[]),pt=w.useCallback(()=>{j([]),D(null),$([]),Y(!1),F(!1),W(null)},[]),Qt=w.useCallback(()=>o.trim()?!0:(alert("  !"),window.setTimeout(()=>{G.current?.focus()},0),!1),[o]),$r=w.useCallback(()=>{if(!Qt()||Ce)return;Y(!0);let De=0;j(nt=>nt.length>=6?nt:(De=nt.length+1,[...nt,SE(ie)])),window.setTimeout(()=>{if(Y(!1),De>=6){it();return}De>0&&W(`${De}  !  ${De+1} ?`)},350)},[Qt,Ce,ie,it]),Br=w.useCallback(()=>{if(!Qt()||Ce)return;Y(!0);const De=[];for(let nt=0;nt<6;nt+=1)De.push(SE(ie));j(De),window.setTimeout(()=>{Y(!1),it()},350)},[Qt,Ce,ie,it]),Zi=w.useMemo(()=>{if(N.length!==6)return"";const De=kE(N);if(typeof De.number!="number")return"";const nt=De.number-1;return nt<0||nt>=M$.length?"":M$[nt]??""},[N]),ao=w.useCallback(De=>{j(nt=>{if(De<0||De>=nt.length)return nt;const Dt=[...nt],br=Dt[De];return Dt[De]={value:rOe(br.value),source:"manual"},Dt})},[]),It=w.useCallback(()=>{if(N.length!==6)return;const De=(o.trim()||i.trim()).trim(),nt={id:aH(),kind:"iching_sixyao",createdAtISO:iH(),question:De,seedTextUsed:V,linesBottomUp:N,changingLines:Oe,baseBitsBottomUp:Pe,changedBitsBottomUp:Ge,saju:e??void 0,viewMeta:t};D(nt)},[Pe,Ge,Oe,V,o,N,i,e,t]);w.useEffect(()=>{N.length===6&&It()},[It,N.length]);const an=w.useMemo(()=>[{value:7,source:"manual"}].concat(Array.from({length:5},()=>({value:7,source:"manual"}))),[]),zr=w.useCallback(()=>{if(!Qt()||ze)return;F(!0);const De=(o.trim()||i.trim()).trim(),nt=xOe({periodTab:h,seunPayload:Q,wolunPayload:se,ilunPayload:me,questionText:De,sajuSeedPart:oe,saju:e,viewMeta:t});$(nt),window.setTimeout(()=>{F(!1),Et()},400)},[Qt,ze,o,me,h,i,e,oe,Q,t,se,Et]),Yn=w.useMemo(()=>SOe({selectedCardText:Zi,ready:Ne,periodCards:P,finalQuestion:o,question:i,baseBits:Pe,changedBits:Ge,changingIndexes:Oe,lineValues:Me,lines:N,saju:e,periodTab:h}),[Zi,Ne,P,o,i,Pe,Ge,Oe,Me,N,e,ce,Q,se,me,h]),qo=w.useCallback(async()=>{if(Yn)try{await navigator.clipboard.writeText(Yn),alert("  !")}catch{alert("  .   .")}},[Yn]),If=w.useMemo(()=>{if(!Ne)return null;const De=EE(N),nt=De.leftTopDown.join(" "),Dt=De.rightTopDown.join(" "),br=De.markers.map(ei=>`${ei.text}${ei.atLineTopDown}`).join(", ");return{liuQin:nt,zhi:Dt,marks:br}},[N,Ne]);return{saju:e,question:i,setQuestion:a,finalQuestion:o,setFinalQuestion:l,questionInputRef:G,drawMode:u,setDrawMode:d,periodTab:h,setPeriodTab:p,seunRange:b,setSeunRange:y,wolunRange:S,setWolunRange:_,ilunRange:k,setIlunRange:A,seunStartYear:he,seunEndYear:_e,wolunStartYM:re,wolunEndYM:Ee,activePeriodLabel:we,onRangeChange:le,onSeunYearChange:Ue,onWolunMonthChange:Fe,ready:Ne,baseBits:Pe,changedBits:Ge,changingIndexes:Oe,lineValues:Me,autoSideSummary:If,selectedCardText:Zi,drawOne:$r,drawAll:Br,reset:pt,onEditLine:ao,lines:N,record:C,periodCards:P,placeholderLines:an,copyPrompt:qo,isDrawing:U,isPeriodDrawing:K,toast:z,disableSingleDraw:Ce,disablePeriodDraw:ze,resultRef:X,periodCardsRef:Z,buildPeriodCards:zr}}const EOe="DAN-GW4jrUdfiXklZ12U",TOe="DAN-CeRuC0yKzSAs5Gju";function AOe(e){const{saju:t,question:n,setQuestion:r,finalQuestion:i,setFinalQuestion:a,questionInputRef:o,drawMode:l,setDrawMode:u,lines:d,isDrawing:h,disableSingleDraw:p,selectedCardText:b,drawOne:y,drawAll:S,reset:_,copyPrompt:k,toast:A,resultRef:N}=kOe(e),j=b?b.split(/\r?\n/):[],C=j[0]??"",D=j.slice(1).join("\\n").trim(),P=d.length?[...d].reverse():[],$=j.map(U=>U.trim()).map(U=>{const Y=/^(|5|4|3|2|)\((|)\)\s*-\s*(.+)$/.exec(U);if(!Y)return null;const K=Y[1],F=Y[2],z=//.test(Y[3]),X=Y[3].replace(/\s*-\s*\s*?/g,"").trim().split(" + ").map(te=>te.trim()).filter(Boolean),Z=X.filter(te=>te===""||te===""||te===""||te===""),G=X.find(te=>/\([]\)/.test(te))??"",J=X.find(te=>/\(.+\)/.test(te)&&te!==G)??"";return{label:K,yinYang:F,liuQin:J,zhi:G,markers:Z,hasDonghyo:z}}).filter(Boolean);return g.jsxs("div",{className:"w-full max-w-[768px] mx-auto pb-12 desk:pb-4 p-4",children:[g.jsxs("div",{className:"rounded-2xl border border-neutral-200 bg-white p-4 dark:border-neutral-800 dark:bg-neutral-900",children:[g.jsx("div",{className:"text-lg font-bold text-neutral-900 dark:text-neutral-100",children:"   "}),g.jsx("div",{className:"mt-1 text-sm text-neutral-600 dark:text-neutral-400",children:"   ,     ."}),g.jsxs("div",{className:"mt-4 rounded-2xl border border-neutral-200 bg-neutral-50 p-3 dark:border-neutral-800 dark:bg-neutral-950",children:[g.jsx("div",{className:"text-sm font-semibold text-neutral-900 dark:text-neutral-100",children:" "}),t?g.jsxs("div",{className:"mt-1 text-sm text-neutral-700 dark:text-neutral-300 space-y-1",children:[g.jsxs("div",{children:[g.jsx("span",{className:"font-semibold",children:":"})," ",t.name?t.name:" ",t.gender?`  ${t.gender}`:""]}),t.pillarsText?g.jsxs("div",{children:[g.jsx("span",{className:"font-semibold",children:":"})," ",t.pillarsText]}):null]}):g.jsx("div",{className:"mt-1 text-sm text-neutral-600 dark:text-neutral-400",children:"  ."})]}),g.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-3",children:[g.jsxs("label",{className:"block",children:[g.jsx("div",{className:"text-sm font-medium text-neutral-800 dark:text-neutral-200",children:""}),g.jsx("textarea",{ref:o,value:n,onChange:U=>r(U.target.value),rows:3,className:"mt-1 w-full rounded-xl border border-neutral-200 bg-white px-3 py-2 text-sm outline-none focus:border-neutral-400 dark:border-neutral-800 dark:bg-neutral-900 dark:text-neutral-100",placeholder:"      !"})]}),g.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs text-neutral-600 dark:text-neutral-400",children:[g.jsx("button",{type:"button",onClick:()=>a(n.trim()),className:"rounded-xl border border-neutral-300 bg-white px-3 py-2 text-xs font-semibold text-neutral-800 hover:bg-neutral-50 dark:border-neutral-700 dark:bg-neutral-900 dark:text-neutral-100 dark:hover:bg-neutral-800 cursor-pointer",children:" "}),g.jsxs("span",{children:[" : ",i.trim()?i:""]})]}),g.jsxs("div",{className:"rounded-2xl border border-neutral-200 bg-neutral-50 p-3 dark:border-neutral-800 dark:bg-neutral-950",children:[g.jsx("div",{className:"text-sm font-semibold text-neutral-900 dark:text-neutral-100",children:" "}),g.jsxs("div",{className:"mt-2 flex flex-wrap gap-3 text-sm text-neutral-700 dark:text-neutral-300",children:[g.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[g.jsx("input",{type:"radio",name:"drawMode",checked:l==="all",onChange:()=>u("all")})," "]}),g.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[g.jsx("input",{type:"radio",name:"drawMode",checked:l==="step",onChange:()=>u("step")})," "]})]})]}),g.jsxs("div",{className:"flex flex-wrap gap-2",children:[g.jsx("button",{type:"button",onClick:l==="all"?S:y,disabled:p||h,className:"rounded-xl bg-neutral-900 px-4 py-2 text-sm font-semibold text-white hover:bg-neutral-800 disabled:cursor-not-allowed disabled:opacity-50 dark:bg-neutral-100 dark:text-neutral-900 dark:hover:bg-neutral-200 cursor-pointer",children:l==="all"?" ":`1  (${d.length}/6)`}),g.jsx("button",{type:"button",onClick:_,className:"rounded-xl border border-neutral-300 bg-white px-4 py-2 text-sm font-semibold text-neutral-800 hover:bg-neutral-50 dark:border-neutral-700 dark:bg-neutral-900 dark:text-neutral-100 dark:hover:bg-neutral-800 cursor-pointer",children:""}),h?g.jsxs("div",{className:"flex items-center gap-2 text-xs text-neutral-600 dark:text-neutral-400",children:[g.jsx("span",{children:" "}),g.jsx("span",{className:"animate-pulse",children:"..."})]}):null]})]})]}),g.jsxs("div",{className:"mt-4",ref:N,children:[g.jsxs("div",{className:"mb-3",children:[g.jsx("div",{className:"hidden md:block",children:g.jsx(lu,{enabled:!0,adUnit:TOe,width:728,height:90})}),g.jsx("div",{className:"md:hidden",children:g.jsx(lu,{enabled:!0,adUnit:EOe,width:320,height:50})})]}),b?g.jsx("div",{className:"rounded-2xl border border-neutral-200 bg-gradient-to-b from-amber-50 to-white p-4 shadow-sm dark:border-neutral-800 dark:from-neutral-900 dark:to-neutral-950",children:g.jsxs("div",{className:"flex flex-col gap-4 md:flex-row",children:[g.jsxs("div",{className:"w-full md:w-[180px]",children:[g.jsx("div",{className:"rounded-xl border border-amber-200 bg-white px-3 py-2 text-sm font-semibold text-amber-900 dark:border-neutral-700 dark:bg-neutral-900 dark:text-neutral-100",children:C}),g.jsxs("div",{className:"mt-3 rounded-xl border border-amber-200 bg-white px-3 py-4 dark:border-neutral-700 dark:bg-neutral-900",children:[g.jsx("div",{className:"text-xs font-semibold text-neutral-700 dark:text-neutral-300",children:" "}),g.jsx("div",{className:"mt-2 flex flex-col gap-2",children:P.map((U,Y)=>g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:"text-[10px] text-neutral-500 dark:text-neutral-400",children:6-Y}),g.jsx(tOe,{yinYang:Lx(U.value),changing:!1,showChanging:!1})]},`line-${Y}`))})]})]}),g.jsxs("div",{className:"flex-1 rounded-xl border border-amber-200 bg-white p-4 dark:border-neutral-700 dark:bg-neutral-900",children:[g.jsx("div",{className:"space-y-2",children:($.length?$:[]).map(U=>g.jsxs("div",{className:"flex items-center justify-between gap-3 rounded-lg border border-amber-100 bg-amber-50/50 px-3 py-2 text-sm dark:border-neutral-800 dark:bg-neutral-950",children:[g.jsxs("div",{children:[g.jsxs("div",{className:"font-semibold text-neutral-900 dark:text-neutral-100",children:[U.label," (",U.yinYang,")"]}),g.jsxs("div",{className:"text-xs text-neutral-700 dark:text-neutral-300",children:[U.liuQin||"-"," ",U.zhi?`  ${U.zhi}`:""]})]}),g.jsxs("div",{className:"flex flex-wrap gap-1 text-[10px] font-semibold text-amber-900 dark:text-neutral-200",children:[U.hasDonghyo&&g.jsx("span",{className:"rounded border border-red-200 bg-red-50 px-1.5 py-0.5 text-red-600 dark:border-red-900/40 dark:bg-red-950/40 dark:text-red-300",children:""}),U.markers.map(Y=>g.jsx("span",{className:"rounded border border-amber-200 bg-white px-1.5 py-0.5 dark:border-neutral-700 dark:bg-neutral-900",children:Y},`${U.label}-${Y}`))]})]},U.label))}),!$.length&&g.jsx("pre",{className:"mt-2 whitespace-pre-wrap text-sm text-neutral-800 dark:text-neutral-100",children:D})]})]})}):g.jsx("div",{className:"text-sm text-neutral-600 dark:text-neutral-400",children:"   ."})]}),g.jsxs("div",{className:"mt-4 rounded-2xl border border-neutral-200 bg-white p-4 dark:border-neutral-800 dark:bg-neutral-900",children:[g.jsx("div",{className:"text-sm font-semibold text-neutral-900 dark:text-neutral-100",children:" "}),g.jsx("div",{className:"mt-1 text-xs text-neutral-600 dark:text-neutral-400",children:"   AI    ."}),b?g.jsx("button",{type:"button",onClick:k,className:"mt-3 w-full rounded-xl border border-neutral-300 bg-white px-3 py-2 text-xs font-semibold text-neutral-800 hover:bg-neutral-50 dark:border-neutral-700 dark:bg-neutral-900 dark:text-neutral-100 dark:hover:bg-neutral-800 cursor-pointer",children:"AI   "}):g.jsx("div",{className:"mt-3 text-sm text-neutral-600 dark:text-neutral-400",children:"  ."})]}),A?g.jsx("div",{className:"fixed bottom-6 left-1/2 z-50 w-[90%] max-w-sm -translate-x-1/2",children:g.jsx("div",{className:"rounded-2xl border border-neutral-200 bg-white px-4 py-3 text-sm text-neutral-900 shadow-lg dark:border-neutral-800 dark:bg-neutral-900 dark:text-neutral-100",children:A})}):null]})}const jOe="DAN-INfSKh1pW2cEtWNu";function Eb(e){return!e?.stem||!e?.branch?"":`${e.stem}${e.branch}`}function OOe(e){const t=[e.year?`${e.year}`:"",e.month?`${e.month}`:"",e.day?`${e.day}`:"",e.hour?`${e.hour}`:""].filter(Boolean);return t.length?t.join(" "):""}function bk(e){if(typeof e!="string")return!1;const t=e.trim();return t===""||t===""||t===""||t==="self"||t===""||t===""}function NOe({current:e}){const t=by(h=>h.useDST),n=e.mingSikType,r=w.useMemo(()=>u2(e,t),[e,t]),[i,a]=w.useState(null),o=Xr(h=>h.date),l=Hv(e,n,i??o??void 0),u=w.useMemo(()=>{const h={year:Eb(r.year),month:Eb(r.month),day:Eb(r.day),hour:Eb(r.hour)},p=e.ganjiText?.trim()||e.ganji?.trim()||OOe(h),b={daeun:l.dae.gz||void 0,seun:l.se.gz||void 0,wolun:l.wol.gz||void 0,ilun:l.il.gz||void 0};return{name:e.name||void 0,gender:e.gender||void 0,pillarsText:p,pillars:h,luck:b}},[e,l,r]),d=w.useMemo(()=>({sourceRoute:"/iching",currentId:e.id,currentName:e.name??null}),[e.id,e.name]);return g.jsx("div",{className:"py-2",children:g.jsx(AOe,{saju:u,viewMeta:d,onBaseDateChange:a},e.id)})}function COe(){const e=yn(_=>_.list),t=yn(_=>_.loading),n=yn(_=>_.currentId),r=yn(_=>_.setCurrentId),i=gf(),a=w.useRef(!1),[o,l]=w.useState(!1),u=w.useRef(!1),d=dn(_=>_.shouldShowAdsNow()),h=w.useMemo(()=>e.find(k=>bk(k.relationship))?.id??null,[e]);w.useEffect(()=>{if(t||e.length===0)return;const _=h??e[0]?.id??null;if(!a.current){_&&n!==_&&r(_),a.current=!0;return}n&&!e.some(k=>k.id===n)&&_&&r(_)},[t,e,n,h,r]),w.useEffect(()=>{t&&l(!0)},[t]);const p=w.useMemo(()=>e.find(_=>_.id===n)??null,[e,n]),b=w.useMemo(()=>p||(e.find(k=>bk(k.relationship))??e[0]??null),[p,e]),y=w.useMemo(()=>{const _=e.find(k=>bk(k.relationship));return _?[_,...e.filter(k=>k.id!==_.id)]:e},[e]);w.useEffect(()=>{o&&(t||e.length>0||u.current||(u.current=!0,alert("   .  ."),i("/",{replace:!0})))},[o,e.length,t,i]);const S=w.useMemo(()=>n||h||(e[0]?.id??""),[n,h,e]);return g.jsxs("div",{className:"min-h-screen bg-neutral-100 dark:bg-neutral-950",children:[g.jsx(WF,{enabled:d}),d&&g.jsx(QF,{enabled:!0,clientId:"ca-pub-4729618898154189",slotId:"1598573921",width:160,height:600,showAfterScrollY:0,side:"left",sidePx:16,topPx:60,breakpointClassName:"hidden desk:block"}),g.jsx("div",{className:"hidden desk:block",children:g.jsx(VF,{enabled:d,adUnit:jOe,width:160,height:600,showAfterScrollY:0,rightPx:16,topPx:60,breakpointClassName:"hidden desk:block"})}),g.jsxs("div",{className:"w-full max-w-[768px] mx-auto px-4 pt-4",children:[g.jsxs("div",{className:"flex items-center justify-between gap-3",children:[g.jsxs("div",{children:[g.jsx("div",{className:"text-xl font-bold text-neutral-900 dark:text-neutral-100",children:"   "}),g.jsx("div",{className:"text-sm text-neutral-600 dark:text-neutral-400",children:"    ."})]}),g.jsx(PE,{to:"/",className:"rounded-xl border border-neutral-300 bg-white px-4 py-2 text-sm font-semibold text-neutral-800 hover:bg-neutral-50 dark:border-neutral-700 dark:bg-neutral-900 dark:text-neutral-100 dark:hover:bg-neutral-800",children:""})]}),e.length>0&&g.jsxs("div",{className:"mt-4 flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[g.jsx("label",{className:"text-sm font-medium text-neutral-700 dark:text-neutral-300",children:" "}),g.jsxs("select",{className:"w-full sm:w-[320px] rounded-xl border border-neutral-300 bg-white px-3 py-2 text-sm dark:border-neutral-700 dark:bg-neutral-900 dark:text-neutral-100",value:S,onChange:_=>{const k=_.target.value;k&&r(k)},children:[g.jsx("option",{value:"",disabled:!0,children:""}),y.map(_=>g.jsx("option",{value:_.id,children:_.name?.trim()?_.name:" "},_.id))]})]})]}),t&&e.length===0&&g.jsx("div",{className:"w-full max-w-[768px] mx-auto px-4 py-10",children:g.jsx("div",{className:"rounded-2xl border border-neutral-200 bg-white p-4 text-sm text-neutral-600 dark:border-neutral-800 dark:bg-neutral-900 dark:text-neutral-400",children:" .."})}),b&&g.jsx(NOe,{current:b})]})}function MOe(e){return typeof e=="object"&&e!==null}function DOe(e){if(!MOe(e))return null;const t=typeof e.ok=="boolean"?e.ok:void 0,n=typeof e.total_active_ms=="number"?e.total_active_ms:void 0,r=typeof e.upgraded_to_basic=="boolean"?e.upgraded_to_basic:void 0;return{ok:t,total_active_ms:n,upgraded_to_basic:r}}function dH({enabled:e=!0,intervalMs:t=6e4,path:n,onBasicUnlocked:r,onTotalActiveMs:i}){const a=w.useRef(!1),o=w.useRef(""),l=w.useRef(!1),u=w.useRef(null),d=w.useRef(null),h=w.useRef(null),p=w.useRef(0);return w.useEffect(()=>{o.current=n??""},[n]),w.useEffect(()=>{let b=null;return(async()=>{const{data:S}=await Ie.auth.getSession();u.current=S.session?.user?.id??null;const k=Ie.auth.onAuthStateChange((A,N)=>{u.current=N?.user?.id??null,l.current=!1}).data?.subscription;k&&typeof k.unsubscribe=="function"&&(b=()=>k.unsubscribe())})(),()=>{b&&b()}},[]),w.useEffect(()=>{if(!e)return;const b=async _=>{if(document.visibilityState!=="visible")return;const k=Date.now();if(!(_!=="init"&&k-p.current<1e4)&&(p.current=k,!a.current)){a.current=!0;try{if(!u.current)return;const N=o.current||null,{data:j,error:C}=await Ie.rpc("ping_activity",{p_last_path:N});if(C)return;const D=DOe(j);if(!D)return;typeof D.total_active_ms=="number"&&i?.(D.total_active_ms),D.upgraded_to_basic===!0&&!l.current&&(l.current=!0,r?.())}finally{a.current=!1}}};b("init");const y=Math.floor(Math.random()*5e3);h.current=window.setTimeout(()=>{b("interval"),d.current=window.setInterval(()=>void b("interval"),t)},y);const S=()=>{document.visibilityState==="visible"&&b("visible")};return document.addEventListener("visibilitychange",S),()=>{document.removeEventListener("visibilitychange",S),h.current!==null&&(window.clearTimeout(h.current),h.current=null),d.current!==null&&(window.clearInterval(d.current),d.current=null)}},[e,t,r,i]),null}function POe(){const e=yn(a=>a.loadFromServer),t=yn(a=>a.migrateLocalToServer),n=vn(a=>a.loadFromServer),r=dn(a=>a.loadFromServer),i=w.useCallback(async()=>{await t(),await Promise.all([r(),n(),e()])},[t,r,n,e]);return w.useEffect(()=>{i();const{data:a}=Ie.auth.onAuthStateChange(o=>{o==="TOKEN_REFRESHED"||o==="INITIAL_SESSION"||i()});return()=>{a.subscription.unsubscribe()}},[i]),null}function ROe(e){try{const t=localStorage.getItem(e);if(!t)return 0;const n=Number(t);return Number.isFinite(n)?n:0}catch{return 0}}function LOe(e,t){try{localStorage.setItem(e,String(t))}catch{}}function IOe(e){return e<=0?0:Math.floor(Math.random()*e)}function $Oe({enabled:e=!0,href:t="https://open.kakao.com/o/sjBRz57h",hintTexts:n=["    !"," .",",  ."," ,   ,  !","  !  ! "],hideHintHours:r=24,cycleMs:i=4200,mobilePaddingX:a=0,bottomDockCssVarName:o="--bottom-dock"}){const l=w.useMemo(()=>"kakao_chat_hint_hide_until",[]),[u,d]=w.useState(!1),[h,p]=w.useState(()=>IOe(n.length)),b=w.useRef(null),y=w.useCallback(k=>{if(typeof document>"u")return;const A=`${Math.max(0,Math.floor(k))}px`;document.documentElement.style.setProperty(o,A)},[o]);if(w.useEffect(()=>{if(n.length<=0){p(0);return}p(k=>k%n.length)},[n.length]),w.useEffect(()=>{if(!e){d(!1);return}const k=ROe(l),A=Date.now();if(k>A){d(!1);return}const N=window.setTimeout(()=>d(!0),900);return()=>window.clearTimeout(N)},[e,l]),w.useEffect(()=>{if(!e||!u||n.length<=1)return;const k=window.setInterval(()=>{p(A=>A+1>=n.length?0:A+1)},i);return()=>window.clearInterval(k)},[e,u,n.length,i]),w.useEffect(()=>{if(!e||!u){y(0);return}const k=b.current;if(!k){y(0);return}const A=()=>{const N=Math.ceil(k.getBoundingClientRect().height);y(N)};if(A(),typeof ResizeObserver<"u"){const N=new ResizeObserver(A);return N.observe(k),()=>{N.disconnect(),y(0)}}return window.addEventListener("resize",A),()=>{window.removeEventListener("resize",A),y(0)}},[e,u,y]),!e)return null;const S=()=>{LOe(l,Date.now()+r*60*60*1e3),d(!1),y(0)},_=n[h]??"";return g.jsxs(g.Fragment,{children:[g.jsx("style",{children:`
        @keyframes hintFadeCycle {
          0%   { opacity: 0; transform: translate3d(0, 6px, 0); }
          14%  { opacity: 1; transform: translate3d(0, 0, 0); }
          78%  { opacity: 1; transform: translate3d(0, 0, 0); }
          100% { opacity: 0; transform: translate3d(0, -2px, 0); }
        }
      `}),u&&n.length>0?g.jsx("div",{ref:b,className:"desk:hidden fixed left-0 right-0 bottom-0 z-[99] pointer-events-none",style:{paddingLeft:a,paddingRight:a,paddingBottom:0},children:g.jsxs("div",{className:"pointer-events-auto w-full border border-neutral-700 bg-neutral-900/95 text-white shadow-lg",style:{display:"grid",gridTemplateColumns:"1fr auto",alignItems:"center",gap:10,padding:"4px 8px"},children:[g.jsx("div",{className:"min-w-0 text-xs whitespace-nowrap overflow-hidden text-ellipsis",style:{animationName:"hintFadeCycle",animationDuration:`${i}ms`,animationTimingFunction:"ease-in-out",animationIterationCount:"infinite"},title:_,children:_}),g.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[g.jsx("button",{type:"button",onClick:S,"aria-label":" ",title:"",className:"w-8 h-8 rounded-full bg-neutral-800 border border-neutral-700 text-[14px] flex items-center justify-center hover:bg-neutral-700",children:g.jsx(ry,{})}),g.jsx("a",{href:t,target:"_blank",rel:"noopener noreferrer","aria-label":"  ",title:"( )",className:`w-8 h-8 rounded-full bg-neutral-800 hover:bg-neutral-700 border border-neutral-700
                           flex items-center justify-center transition-colors`,children:g.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",children:[g.jsx("path",{d:"M4 5.5C4 4.12 5.12 3 6.5 3h11C18.88 3 20 4.12 20 5.5v7C20 13.88 18.88 15 17.5 15H10l-4.5 4V15H6.5C5.12 15 4 13.88 4 12.5v-7Z",stroke:"currentColor",strokeWidth:"1.8",strokeLinejoin:"round"}),g.jsx("path",{d:"M7.5 7.5h9M7.5 10.5h6",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round"})]})})]})]})}):null,g.jsxs("div",{className:"hidden desk:block fixed right-5 bottom-5 z-[999]",children:[u&&n.length>0&&g.jsx("div",{className:"absolute bottom-14 right-0 w-max max-w-[260px]",children:g.jsxs("div",{className:"relative rounded-xl bg-neutral-900 text-white border border-neutral-700 shadow-lg px-3 py-2 text-xs whitespace-pre-line",style:{animationName:"hintFadeCycle",animationDuration:`${i}ms`,animationTimingFunction:"ease-in-out",animationIterationCount:"infinite"},children:[_,g.jsx("button",{type:"button",onClick:S,className:"absolute -top-2 -right-2 w-6 h-6 rounded-full bg-neutral-800 border border-neutral-700 text-[12px] flex items-center justify-center hover:bg-neutral-700 cursor-pointer","aria-label":" ",title:"",children:g.jsx(ry,{size:12})}),g.jsx("div",{className:"absolute -bottom-2 right-4 w-0 h-0 border-l-8 border-r-8 border-t-8 border-l-transparent border-r-transparent border-t-neutral-900"})]})}),g.jsx("a",{href:t,target:"_blank",rel:"noopener noreferrer","aria-label":"  ",title:"( )",className:`flex items-center justify-center w-12 h-12 rounded-full shadow-lg
                     bg-neutral-800 hover:bg-neutral-700 border border-neutral-700 transition-colors`,children:g.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",children:[g.jsx("path",{d:"M4 5.5C4 4.12 5.12 3 6.5 3h11C18.88 3 20 4.12 20 5.5v7C20 13.88 18.88 15 17.5 15H10l-4.5 4V15H6.5C5.12 15 4 13.88 4 12.5v-7Z",stroke:"currentColor",strokeWidth:"1.8",strokeLinejoin:"round"}),g.jsx("path",{d:"M7.5 7.5h9M7.5 10.5h6",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round"})]})})]})]})}function BOe(e){const t=["#F87171","#FBBF24","#34D399","#60A5FA","#A78BFA","#F472B6"],n=[];for(let r=0;r<e;r+=1)n.push({leftPct:Math.random()*100,size:6+Math.floor(Math.random()*8),delayMs:Math.floor(Math.random()*300),durationMs:1200+Math.floor(Math.random()*900),rotate:Math.floor(Math.random()*360),driftPx:-40+Math.floor(Math.random()*80),color:t[r%t.length]});return n}function zOe({open:e,onClose:t}){const n=w.useMemo(()=>BOe(48),[]);return w.useEffect(()=>{if(!e)return;const r=a=>{a.key==="Escape"&&t()};window.addEventListener("keydown",r);const i=window.setTimeout(()=>t(),6e3);return()=>{window.removeEventListener("keydown",r),window.clearTimeout(i)}},[e,t]),e?g.jsxs("div",{className:"fixed inset-0 z-[2000] flex items-center justify-center",children:[g.jsx("style",{children:`
        @keyframes confettiFall {
          0%   { transform: translate3d(var(--dx), -20px, 0) rotate(var(--rot)); opacity: 0; }
          10%  { opacity: 1; }
          100% { transform: translate3d(var(--dx), 560px, 0) rotate(calc(var(--rot) + 360deg)); opacity: 0; }
        }
        @keyframes pop {
          0% { transform: scale(0.98); opacity: 0; }
          100% { transform: scale(1); opacity: 1; }
        }
      `}),g.jsx("div",{className:"absolute inset-0 bg-black/60",onClick:t}),g.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:n.map((r,i)=>{const a={position:"absolute",top:0,left:`${r.leftPct}%`,width:r.size,height:Math.max(8,r.size+6),background:r.color,borderRadius:2,transform:`rotate(${r.rotate}deg)`,animation:`confettiFall ${r.durationMs}ms ease-out ${r.delayMs}ms forwards`,"--dx":`${r.driftPx}px`,"--rot":`${r.rotate}deg`};return g.jsx("span",{style:a},i)})}),g.jsxs("div",{className:`relative w-[92%] max-w-[420px] rounded-2xl bg-white dark:bg-neutral-950
                   border border-neutral-200 dark:border-neutral-800 shadow-xl p-5`,style:{animation:"pop 160ms ease-out"},children:[g.jsxs("div",{className:"text-center",children:[g.jsx("div",{className:"text-3xl mb-2",children:""}),g.jsx("div",{className:"text-xl font-extrabold text-neutral-900 dark:text-neutral-50",children:"BASIC  !"}),g.jsx("div",{className:"mt-2 text-sm text-neutral-600 dark:text-neutral-300",children:"     ! "})]}),g.jsx("div",{className:"mt-4 flex justify-center gap-2",children:g.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 rounded-lg bg-neutral-900 text-white hover:bg-neutral-800 cursor-pointer",children:""})})]})]}):null}function D$(e){if(typeof e!="string")return"FREE";const t=e.toUpperCase();return t==="BASIC"?"BASIC":t==="PRO"?"PRO":"FREE"}function UOe(){const e=_i(),t=e.pathname+e.search,n=!e.pathname.startsWith("/admin")&&!e.pathname.startsWith("/impersonate")&&!e.pathname.startsWith("/auth/callback"),[r,i]=w.useState(!1),a=dn(b=>b.loaded),o=dn(b=>b.loading),l=dn(b=>b.userId),u=dn(b=>D$(b.plan)),d=w.useRef(!1);w.useEffect(()=>{n&&(a||o||dn.getState().loadFromServer())},[n,a,o]);const h=w.useCallback(async()=>{if(d.current)return;d.current=!0;const{data:b,error:y}=await Ie.rpc("mark_basic_celebrated");if(y){console.warn("[basic celebration] rpc error:",y.message);return}b===!0&&i(!0)},[]);w.useEffect(()=>{n&&a&&l&&u==="BASIC"&&h()},[n,a,l,u,h]);const p=w.useCallback(()=>{(async()=>(await dn.getState().loadFromServer(),D$(dn.getState().plan)==="BASIC"&&(d.current=!1,await h())))()},[h]);return g.jsxs(g.Fragment,{children:[g.jsx(dH,{enabled:n,path:t,onBasicUnlocked:p}),g.jsx($Oe,{enabled:n}),g.jsx(zOe,{open:r,onClose:()=>i(!1)})]})}function FOe(e){return typeof e=="object"&&e!==null}function HOe(e){if(!Array.isArray(e)||e.length===0)return null;const t=e[0];if(!FOe(t))return null;const n=t.disabled_at;return typeof n=="string"?n:null}function GOe(){const e=gf(),t=_i(),n=w.useRef(!1);return w.useEffect(()=>{const r=async()=>{if(!n.current){n.current=!0;try{const{data:o}=await Ie.auth.getSession(),l=o.session?.user?.id??null;if(!l)return;const{data:u,error:d}=await Ie.rpc("get_my_account_status");if(!d){!!HOe(u)&&t.pathname!=="/disabled"&&e("/disabled",{replace:!0});return}const{data:h,error:p}=await Ie.from("profiles").select("disabled_at").eq("user_id",l).maybeSingle();if(p)return;(h?.disabled_at??null)&&t.pathname!=="/disabled"&&e("/disabled",{replace:!0})}finally{n.current=!1}}};r();const{data:i}=Ie.auth.onAuthStateChange(()=>{r()}),a=()=>{document.visibilityState==="visible"&&r()};return document.addEventListener("visibilitychange",a),()=>{document.removeEventListener("visibilitychange",a),i.subscription.unsubscribe()}},[e,t.pathname]),null}function qOe(e){return typeof e=="object"&&e!==null}function YOe(e){if(!Array.isArray(e)||e.length===0)return null;const t=e[0];if(!qOe(t))return null;const n=t.disabled_at;return typeof n=="string"?n:null}const KOe=Fo((e,t)=>({loaded:!1,loading:!1,userId:null,disabledAt:null,reset:()=>{e({loaded:!0,loading:!1,userId:null,disabledAt:null})},loadFromServer:async n=>{if(!t().loading){e({loading:!0,userId:n});try{const{data:i,error:a}=await Ie.rpc("get_my_account_status");if(!a){const d=YOe(i);e({loaded:!0,loading:!1,disabledAt:d});return}const{data:o,error:l}=await Ie.from("profiles").select("disabled_at").eq("user_id",n).maybeSingle();if(l){console.error("[accountStatus] load error:",l),e({loaded:!0,loading:!1,disabledAt:null});return}const u=o?.disabled_at??null;e({loaded:!0,loading:!1,disabledAt:typeof u=="string"?u:null})}catch(i){console.error("[accountStatus] exception:",i),e({loaded:!0,loading:!1,disabledAt:null})}}}}));function WOe(e){if(!e)return"-";const t=Date.parse(e);return Number.isFinite(t)?new Date(t).toLocaleString():e}function VOe(){const e=KOe(n=>n.disabledAt),t=w.useCallback(async()=>{try{await Ie.auth.signOut(),window.location.href="/"}catch(n){console.error("signOut error:",n),window.location.href="/"}},[]);return g.jsx("main",{className:"min-h-screen flex items-center justify-center p-6 text-white",children:g.jsxs("div",{className:"w-full max-w-[520px] bg-neutral-900 border border-neutral-700 rounded-xl p-6",children:[g.jsx("h1",{className:"text-2xl font-bold mb-3",children:" "}),g.jsxs("div",{className:"text-sm text-neutral-300 leading-6",children:["        .",g.jsx("span",{className:"font-semibold text-neutral-100",children:WOe(e)})]}),g.jsx("div",{className:"mt-5 p-3 bg-neutral-800 border border-neutral-700 rounded text-sm text-neutral-300",children:"    ."}),g.jsxs("div",{className:"mt-6 flex gap-2",children:[g.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 rounded bg-neutral-700 hover:bg-neutral-600 cursor-pointer",children:""}),g.jsx("button",{type:"button",onClick:()=>window.location.reload(),className:"px-4 py-2 rounded bg-blue-700 hover:bg-blue-600 cursor-pointer",children:""})]})]})})}function ZOe(){const e=_i();return w.useEffect(()=>{window.scrollTo({top:0,left:0,behavior:"auto"})},[e.pathname]),g.jsxs(g.Fragment,{children:[g.jsx(POe,{}),g.jsx(UOe,{}),g.jsx(GOe,{}),g.jsx(dH,{}),g.jsxs(Nq,{children:[g.jsx(Ua,{path:"/auth/callback",element:g.jsx(eOe,{})}),g.jsx(Ua,{path:"/disabled",element:g.jsx(VOe,{})}),g.jsx(Ua,{path:"/iching",element:g.jsx(COe,{})}),g.jsx(Ua,{path:"/",element:g.jsx(kb,{})}),g.jsx(Ua,{path:"/faq",element:g.jsx(kb,{})}),g.jsx(Ua,{path:"/couple",element:g.jsx(kb,{})}),g.jsx(Ua,{path:"/result",element:g.jsx(kb,{})}),g.jsx(Ua,{path:"/admin/*",element:g.jsx(vF,{})}),g.jsx(Ua,{path:"/impersonate",element:g.jsx(Qje,{})}),g.jsx(Ua,{path:"*",element:g.jsx(jq,{to:"/",replace:!0})})]})]})}LG.createRoot(document.getElementById("root")).render(g.jsx(Qq,{children:g.jsx(ZOe,{})}));
